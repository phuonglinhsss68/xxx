window.__require=function t(e,i,o){function n(a,r){if(!i[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!r&&h)return h(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+a+"'")}}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){return n(e[a][1][t]||t)},l,l.exports,t,e,i,o)}return i[a].exports}for(var s="function"==typeof __require&&__require,a=0;a<o.length;a++)n(o[a]);return n}({APIConstant:[function(t,e,i){"use strict";cc._RF.push(e,"6d98aWVPixM6oYZfQhdoDMo","APIConstant");e.exports={HOST_SUB:"/api/",HOST:"https://fantasland.com/v1/",HOST_CAPTCHA:"https://fantasland.com/v1/config/captcha",API_CONFIG:"config/list",API_CAPTCHA:"user/captcha",API_CHECK_LOGIN:"user/check_login",API_REGISTER:"user/register",API_REGISTER_SOCIAL:"user/register_social",API_LOGIN:"user/login",API_LOGIN_TOKEN:"user/info",API_INFO_UPDATE:"user/update",API_UPDATE_AVATAR:"user/avatar",API_UPDATE_NICKNAME:"user/update_nickname",API_NOTIFY_UPDATE:"user/notify",API_MONEY:"user/money",API_LOGOUT:"user/logout",API_CHANGE_PASSWORD:"user/change_pass",API_SUMMARY_MATCH:"user/summary_match",API_PLAYER_INFO:"user/get_info",API_GAME_INFO:"user/summary_match",API_PLAY_HISTORY:"user/get_play_history",API_GET_GIFTCODE:"user/get_giftcode",API_UPDATE_SOUND:"user/update_sound",API_UPDATE_INVITE:"user/update_invite",API_FORGOT_PASSWORD_EMAIL:"user/forgot_pass_by_email",API_VERIFY_PASSWORD:"user/verify_new_pass",API_VERIFY_OTP:"user/verify_otp",API_SEND_OTP:"user/send_otp",API_SEND_OTP_FORGET_PASSWORD:"user/send_otp_forgotpass",API_SEND_OTP_LOGIN:"user/send_otp_login",API_SEND_OTP_LOGIN_SOCIAL:"user/send_otp_login_social",API_VERIFY_LOGIN_SECURITY:"user/verify_login_secure",API_SECURITY_GAME:"user/security_game",API_TOP_BEST_MONEY_WIN:"top/best_money_win",API_TOP_BEST_GOLD_WIN:"top/best_gold_win",API_TOP_AWARD:"top/award",API_TOP:"top/list",API_RECHARGE_CARD:"card/recharge",API_AWARD_CARD:"award/withdraw",API_HISTORY_AWARD:"award/log_award",API_TRANSTER_MONEY_TO_GOLD:"transfer/convert",API_HISTORY_TRANSTER_MONEY_TO_GOLD:"transfer/log_convert_moneytogold",API_RECHARGE_BANKING:"bank/charge",API_HISTORY_RECHARGE_GOLD:"user/recharge",API_RECHARGE_CARD_STEP_1:"card/recharge_step1",API_RECHARGE_CARD_STEP_2:"card/recharge_step2",API_CATEGORIES_LIST:"category/list",API_CATEGORIES_DETAIL:"category/detail",API_POST_LIST:"post/list",API_POST_DETAIL:"post/detail",API_MAIL:"message/allpage",API_MAIL_READED:"/api/message/readed",API_MAIL_DELETE:"/api/message/deleted",API_MESSAGE_LIST:"message/list",API_MESSAGE_READ:"message/read",API_MESSAGE_REMOVE:"message/remove",API_TAIXIU_HISTORY:"taixiu/history",API_TAIXIU_TOP:"taixiu/top",API_TAIXIU_CHAIN:"taixiu/chain",API_DRAGON_TIGER_CHAIN:"dragon_tiger/chain",API_MINIPOKER_HISTORY:"minipoker/history",API_DRAGON_TIGER_HISTORY:"dragon_tiger/history",API_MINIPOKER_TOP:"minipoker/top",API_MINIBACAY_HISTORY:"mini3cay/history",API_MINIBACAY_TOP:"mini3cay/top",API_DIAMOND_HISTORY:"diamond/history",API_DIAMOND2_HISTORY:"diamond2/history",API_BOM_HISTORY:"bom/history",API_WILD_HISTORY:"wild/history",API_DIAMOND_TOP:"diamond/top",API_DIAMOND2_TOP:"diamond2/top",API_TRENDUOI_HISTORY:"hilo/history",API_TRENDUOI_TOP:"hilo/top",API_BAUCUA_HISTORY:"hooheyhow/history",API_BAUCUA_TOP:"hooheyhow/top",API_BAUCUA_TOP_WEEK:"hooheyhow/top_week",API_LV_GET_TOP:"lv/top",API_SLOT_GET_TOP:"modern_slot/top",API_SLOT_GET_HISTORY:"modern_slot/history",API_SLOT2_GET_TOP:"one001/top",API_SLOT2_GET_HISTORY:"one001/history",API_SLOT3_GET_TOP:"dragon/top",API_SLOT3_GET_HISTORY:"dragon/history",API_SLOT4_GET_HISTORY:"classic1/history",API_SLOT4_GET_TOP:"classic1/top",API_SLOT5_GET_HISTORY:"modern_slot/history",API_SLOT5_GET_TOP:"modern_slot/top",API_LOTTERY_GET_HISTORY:"lottery/history",EVENT_HISTORY:"user_diamond/history",EVENT_TOP:"user_diamond/top",EVENT_TOP_2:"top/vp",API_INVITE_FRIEND_INFO:"friend/info",API_INVITE_FRIEND_HISTORY:"friend/history",API_INVITE_FRIEND_TOP:"friend/top",API_INVITE_FRIEND_CONVERT_MONEY:"friend/convert",API_INVITE_FRIEND_UPDATE_CODE:"friend/update",API_LOG_TOP_VIP_2:"top/viplog2",API_MOMO_HISTORY:"momo/history",API_MOMO_INFO:"momo/info",API_SUCCESS:1},cc._RF.pop()},{}],API:[function(t,e,i){"use strict";cc._RF.push(e,"21071dpjSBMGqdCQ3xY9+0m","API");var o=t("./APIConstant"),n=t("../helper/Message"),s=t("../prefab/mini-game/MiniGameConstant"),a={getUrlByAPI:function(t){return o.HOST+t},getStringBodyByObject:function(t){var e=[];for(var i in t)e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},executeGETMethod:function(t,e,i,o){t=t+"?"+this.getStringBodyByObject(e);var s=new XMLHttpRequest;return s.onreadystatechange=function(){if(4===s.readyState)if(s.status>=200&&s.status<300){var t=JSON.parse(s.responseText);"1"===t.status||1===t.status?i(t):o(t)}else 0===s.status||o({msg:n.TIME_OUT_LOADING})},s.open("GET",t,!0),s.setRequestHeader("User-Agent","Android60s"),cc.sys.isNative&&s.setRequestHeader("Accept-Encoding","gzip,deflate"),s.send(),s},executePOSTMethod:function(t,e,i,o){var s=this.getStringBodyByObject(e),a=new XMLHttpRequest;return a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<400){var t=JSON.parse(a.responseText);"1"===t.status||1===t.status?i(t):o(t)}else 0===a.status||o({msg:n.TIME_OUT_LOADING})},a.open("POST",t,!0),a.setRequestHeader("content-type","application/x-www-form-urlencoded"),a.setRequestHeader("User-Agent","Android60s"),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.send(s),a},getCaptcha:function(t,e,i){var s=o.HOST_CAPTCHA,a=new XMLHttpRequest;return a.onreadystatechange=function(){if(4===a.readyState)if(a.status>=200&&a.status<300){var t=JSON.parse(a.responseText);"1"===t.status||1===t.status?e(t):i(t)}else 0===a.status||i({msg:n.TIME_OUT_LOADING})},a.open("GET",s,!0),a.setRequestHeader("User-Agent","Android60s"),cc.sys.isNative&&a.setRequestHeader("Accept-Encoding","gzip,deflate"),a.send(),a},getConfig:function(t,e,i){var n=this.getUrlByAPI(o.API_CONFIG);return this.executeGETMethod(n,t,e,i)},checkLogin:function(t,e,i){var n=this.getUrlByAPI(o.API_CHECK_LOGIN);return this.executeGETMethod(n,t,e,i)},login:function(t,e,i){var n=this.getUrlByAPI(o.API_LOGIN);return this.executePOSTMethod(n,t,e,i)},loginToken:function(t,e,i){var n=this.getUrlByAPI(o.API_LOGIN_TOKEN);return this.executeGETMethod(n,t,e,i)},register:function(t,e,i){var n=this.getUrlByAPI(o.API_REGISTER);return this.executePOSTMethod(n,t,e,i)},registerSocial:function(t,e,i){var n=this.getUrlByAPI(o.API_REGISTER_SOCIAL);return this.executePOSTMethod(n,t,e,i)},forgotPasswordEmail:function(t,e,i){var n=this.getUrlByAPI(o.API_FORGOT_PASSWORD_EMAIL);return this.executePOSTMethod(n,t,e,i)},verifyPassword:function(t,e,i){var n=this.getUrlByAPI(o.API_VERIFY_PASSWORD);return this.executePOSTMethod(n,t,e,i)},verifyOtp:function(t,e,i){var n=this.getUrlByAPI(o.API_VERIFY_OTP);return this.executePOSTMethod(n,t,e,i)},sendOtp:function(t,e,i){var n=this.getUrlByAPI(o.API_SEND_OTP);return this.executePOSTMethod(n,t,e,i)},sendOtpForgetPassword:function(t,e,i){var n=this.getUrlByAPI(o.API_SEND_OTP_FORGET_PASSWORD);return this.executePOSTMethod(n,t,e,i)},update:function(t,e,i){var n=this.getUrlByAPI(o.API_INFO_UPDATE);return this.executePOSTMethod(n,t,e,i)},updateNickname:function(t,e,i){var n=this.getUrlByAPI(o.API_UPDATE_NICKNAME);return this.executePOSTMethod(n,t,e,i)},changePassword:function(t,e,i){var n=this.getUrlByAPI(o.API_CHANGE_PASSWORD);return this.executePOSTMethod(n,t,e,i)},updateSoundGame:function(t,e,i){var n=this.getUrlByAPI(o.API_UPDATE_SOUND);return this.executePOSTMethod(n,t,e,i)},updateInviteGame:function(t,e,i){var n=this.getUrlByAPI(o.API_UPDATE_INVITE);return this.executePOSTMethod(n,t,e,i)},getListMessage:function(t,e,i){var n=this.getUrlByAPI(o.API_MESSAGE_LIST);return this.executeGETMethod(n,t,e,i)},readMessage:function(t,e,i){var n=this.getUrlByAPI(o.API_MESSAGE_READ);return this.executePOSTMethod(n,t,e,i)},removeMessage:function(t,e,i){var n=this.getUrlByAPI(o.API_MESSAGE_REMOVE);return this.executePOSTMethod(n,t,e,i)},logout:function(t,e,i){var n=this.getUrlByAPI(o.API_LOGOUT);return this.executePOSTMethod(n,t,e,i)},topBestMoneyWin:function(t,e,i){var n=this.getUrlByAPI(o.API_TOP_BEST_MONEY_WIN);return this.executeGETMethod(n,t,e,i)},topAward:function(t,e,i){var n=this.getUrlByAPI(o.API_TOP_AWARD);return this.executeGETMethod(n,t,e,i)},top:function(t,e,i){var n=this.getUrlByAPI(o.API_TOP);return this.executeGETMethod(n,t,e,i)},historyAward:function(t,e,i){var n=this.getUrlByAPI(o.API_HISTORY_AWARD);return this.executeGETMethod(n,t,e,i)},historyRechargeGold:function(t,e,i){var n=this.getUrlByAPI(o.API_HISTORY_TRANSTER_MONEY_TO_GOLD);return this.executeGETMethod(n,t,e,i)},historyRechargeMoney:function(t,e,i){var n=this.getUrlByAPI(o.API_HISTORY_RECHARGE_GOLD);return this.executeGETMethod(n,t,e,i)},getGameInfo:function(t,e,i){var n=this.getUrlByAPI(o.API_GAME_INFO);return this.executeGETMethod(n,t,e,i)},getMail:function(t,e,i){var n=this.getUrlByAPI(o.API_MAIL);return this.executeGETMethod(n,t,e,i)},readedMail:function(t,e,i){var n=this.getUrlByAPI(o.API_MAIL_READED);return this.executeGETMethod(n,t,e,i)},deleteMail:function(t,e,i){var n=this.getUrlByAPI(o.API_MAIL_DELETE);return this.executeGETMethod(n,t,e,i)},getPlayerInfo:function(t,e,i){var n=this.getUrlByAPI(o.API_PLAYER_INFO);return this.executeGETMethod(n,t,e,i)},scaleRecharge:function(t,e,i){var n=this.getUrlByAPI(o.API_SCALE_RECHARGE);return this.executePOSTMethod(n,t,e,i)},rechargeCard:function(t,e,i){var n=this.getUrlByAPI(o.API_RECHARGE_CARD);return this.executePOSTMethod(n,t,e,i)},rechargeCardStep1:function(t,e,i){var n=this.getUrlByAPI(o.API_RECHARGE_CARD_STEP_1);return this.executePOSTMethod(n,t,e,i)},rechargeCardStep2:function(t,e,i){var n=this.getUrlByAPI(o.API_RECHARGE_CARD_STEP_2);return this.executePOSTMethod(n,t,e,i)},rechargeBanking:function(t,e,i){var n=this.getUrlByAPI(o.API_RECHARGE_BANKING);return this.executePOSTMethod(n,t,e,i)},awardCard:function(t,e,i){var n=this.getUrlByAPI(o.API_AWARD_CARD);return this.executePOSTMethod(n,t,e,i)},updateAvatar:function(t,e,i){var n=this.getUrlByAPI(o.API_UPDATE_AVATAR);return this.executePOSTMethod(n,t,e,i)},transferMoneyToGold:function(t,e,i){var n=this.getUrlByAPI(o.API_TRANSTER_MONEY_TO_GOLD);return this.executePOSTMethod(n,t,e,i)},getPlayHistory:function(t,e,i){var n=this.getUrlByAPI(o.API_PLAY_HISTORY);return this.executeGETMethod(n,t,e,i)},getGiftCode:function(t,e,i){var n=this.getUrlByAPI(o.API_GET_GIFTCODE);return this.executePOSTMethod(n,t,e,i)},getTopTaiXiu:function(t,e,i){var n=this.getUrlByAPI(o.API_TAIXIU_TOP);return this.executeGETMethod(n,t,e,i)},getHistoryTaiXiu:function(t,e,i){var n=this.getUrlByAPI(o.API_TAIXIU_HISTORY);return this.executeGETMethod(n,t,e,i)},getChainTaiXiu:function(t,e,i){var n=this.getUrlByAPI(o.API_TAIXIU_CHAIN);return this.executeGETMethod(n,t,e,i)},getChainDragonTiger:function(t,e,i){var n=this.getUrlByAPI(o.API_DRAGON_TIGER_CHAIN);return this.executeGETMethod(n,t,e,i)},getTopMiniPoker:function(t,e,i){var n=this.getUrlByAPI(o.API_MINIPOKER_TOP);return this.executeGETMethod(n,t,e,i)},getHistoryMiniPoker:function(t,e,i){var n=this.getUrlByAPI(o.API_MINIPOKER_HISTORY);return this.executeGETMethod(n,t,e,i)},getHistoryDragonTiger:function(t,e,i){var n=this.getUrlByAPI(o.API_DRAGON_TIGER_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopMiniBaCay:function(t,e,i){var n=this.getUrlByAPI(o.API_MINIBACAY_TOP);return this.executeGETMethod(n,t,e,i)},getHistoryMiniBaCay:function(t,e,i){var n=this.getUrlByAPI(o.API_MINIBACAY_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopDiamond:function(t,e,i){var n=this.getUrlByAPI(o.API_DIAMOND_TOP);return this.executeGETMethod(n,t,e,i)},getTopDiamond2:function(t,e,i){var n=this.getUrlByAPI(o.API_DIAMOND2_TOP);return this.executeGETMethod(n,t,e,i)},getHistoryDiamond:function(t,e,i){var n=this.getUrlByAPI(o.API_DIAMOND_HISTORY);return this.executeGETMethod(n,t,e,i)},getHistoryBom:function(t,e,i){var n=this.getUrlByAPI(o.API_BOM_HISTORY);return this.executeGETMethod(n,t,e,i)},getHistoryDiamond2:function(t,e,i){var n=this.getUrlByAPI(o.API_DIAMOND2_HISTORY);return this.executeGETMethod(n,t,e,i)},getHistoryWild:function(t,e,i){var n=this.getUrlByAPI(o.API_WILD_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopTrenDuoi:function(t,e,i){var n=this.getUrlByAPI(o.API_TRENDUOI_TOP);return this.executeGETMethod(n,t,e,i)},getHistoryTrenDuoi:function(t,e,i){var n=this.getUrlByAPI(o.API_TRENDUOI_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopBauCua:function(t,e,i){var n=this.getUrlByAPI(o.API_BAUCUA_TOP);return this.executeGETMethod(n,t,e,i)},getTopWeekBauCua:function(t,e,i){var n=this.getUrlByAPI(o.API_BAUCUA_TOP_WEEK);return this.executeGETMethod(n,t,e,i)},getHistoryBauCua:function(t,e,i){var n=this.getUrlByAPI(o.API_BAUCUA_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopLongVuong:function(t,e,i){var n=this.getUrlByAPI(o.API_LV_GET_TOP);return this.executeGETMethod(n,t,e,i)},getTopSlot:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT_GET_TOP);return this.executeGETMethod(n,t,e,i)},getHistorySlot:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT_GET_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopSlot2:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT3_GET_TOP);return this.executeGETMethod(n,t,e,i)},getHistorySlot2:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT3_GET_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopSlot3:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT2_GET_TOP);return this.executeGETMethod(n,t,e,i)},getHistorySlot3:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT2_GET_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopSlot4:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT4_GET_TOP);return this.executeGETMethod(n,t,e,i)},getHistorySlot4:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT4_GET_HISTORY);return this.executeGETMethod(n,t,e,i)},getHistorySlot5:function(t,e,i){var n=this.getUrlByAPI(o.API_SLOT5_GET_HISTORY);return this.executeGETMethod(n,t,e,i)},getHistoryLottery:function(t,e,i){var n=this.getUrlByAPI(o.API_LOTTERY_GET_HISTORY);return this.executeGETMethod(n,t,e,i)},getOTPLogin:function(t,e,i){var n=this.getUrlByAPI(o.API_SEND_OTP_LOGIN);return this.executePOSTMethod(n,t,e,i)},getHistoryEvent:function(t,e,i){var n=this.getUrlByAPI(o.EVENT_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopEvent:function(t,e,i){var n=this.getUrlByAPI(o.EVENT_TOP);return this.executeGETMethod(n,t,e,i)},getTopEvent2:function(t,e,i){var n=this.getUrlByAPI(o.EVENT_TOP_2);return this.executeGETMethod(n,t,e,i)},getOTPLoginSecurity:function(t,e,i){var n=this.getUrlByAPI(o.API_VERIFY_LOGIN_SECURITY);return this.executePOSTMethod(n,t,e,i)},getOTPLoginSocial:function(t,e,i){var n=this.getUrlByAPI(o.API_SEND_OTP_LOGIN_SOCIAL);return this.executePOSTMethod(n,t,e,i)},securityGame:function(t,e,i){var n=this.getUrlByAPI(o.API_SECURITY_GAME);return this.executePOSTMethod(n,t,e,i)},getInfoInviteFriend:function(t,e,i){var n=this.getUrlByAPI(o.API_INVITE_FRIEND_INFO);return this.executeGETMethod(n,t,e,i)},gethistoryInviteFriend:function(t,e,i){var n=this.getUrlByAPI(o.API_INVITE_FRIEND_HISTORY);return this.executeGETMethod(n,t,e,i)},getTopInviteFriend:function(t,e,i){var n=this.getUrlByAPI(o.API_INVITE_FRIEND_TOP);return this.executeGETMethod(n,t,e,i)},convertMoneyInviteFriend:function(t,e,i){var n=this.getUrlByAPI(o.API_INVITE_FRIEND_CONVERT_MONEY);return this.executePOSTMethod(n,t,e,i)},updateCodeInviteFriend:function(t,e,i){var n=this.getUrlByAPI(o.API_INVITE_FRIEND_UPDATE_CODE);return this.executePOSTMethod(n,t,e,i)},getLogTopVip2:function(t,e,i){var n=this.getUrlByAPI(o.API_LOG_TOP_VIP_2);return this.executeGETMethod(n,t,e,i)},getHistoryMomo:function(t,e,i){var n=this.getUrlByAPI(o.API_MOMO_HISTORY);return this.executeGETMethod(n,t,e,i)},getInfoMomo:function(t,e,i){var n=this.getUrlByAPI(o.API_MOMO_INFO);return this.executeGETMethod(n,t,e,i)},getApiTopByMiniGameName:function(t){switch(t){case s.TAIXIU:return this.getTopTaiXiu;case s.MINI_POKER:return this.getTopMiniPoker;case s.MINI_BACAY:return this.getTopMiniBaCay;case s.DIAMOND:return this.getTopDiamond;case s.DIAMOND_2_2:return this.getTopDiamond2;case s.TREN_DUOI:return this.getTopTrenDuoi;case s.BAU_CUA:return this.getTopBauCua}},getApiHistoryByMiniGameName:function(t){switch(t){case s.TAIXIU:return this.getHistoryTaiXiu;case s.MINI_POKER:return this.getHistoryMiniPoker;case s.MINI_BACAY:return this.getHistoryMiniBaCay;case s.DIAMOND:return this.getHistoryDiamond;case s.DIAMOND_2_2:return this.getHistoryDiamond2;case s.TREN_DUOI:return this.getHistoryTrenDuoi;case s.BAU_CUA:return this.getHistoryBauCua}},getOriginDomain:function(){return window.location.origin},getDevide:function(){return cc.sys.platform===cc.sys.ANDROID?"Android":cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD?"iOS":"Web"}};e.exports=a,cc._RF.pop()},{"../helper/Message":"Message","../prefab/mini-game/MiniGameConstant":"MiniGameConstant","./APIConstant":"APIConstant"}],Agent2Item:[function(t,e,i){"use strict";cc._RF.push(e,"ecb69iBbzdErZ9X7DjIjdlc","Agent2Item"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,noLabel:cc.Label,nicknameLabel:cc.Label},init:function(t,e,i){this.GameCenter=t,this.data=i,this.noLabel.string=e+1,this.nicknameLabel.string=i.nick_name||""},onLoad:function(){},onClick:function(){var t=t=String.format(Constant.HOST_PAY_2,this.GameCenter.getToken(),this.data.nick_name,this.GameCenter.getUser().user_id);cc.sys.openURL(t)},getData:function(){return this.data},showBgNode:function(){this.bgNode.active=!0},hideBgNode:function(){this.bgNode.active=!1}}),cc._RF.pop()},{}],AgentItem2:[function(t,e,i){"use strict";cc._RF.push(e,"c6397+0ss1NxJYNOuOVfJIq","AgentItem2");t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{bgHoverNode:cc.Node,noLabel:cc.Label,nameLabel:cc.Label,nickNameLabel:cc.Label,phoneLabel:cc.Label,addressLabel:cc.Label,fbNode:cc.Node},init:function(t,e,i){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameRecharge=t.GameRecharge,this.ShopTransferAgent=this.GameRecharge.RechargeUseMoney.Transfer.TransferAgent,this.ShopTransferContent=this.GameRecharge.RechargeUseMoney.Transfer.TransferContent,this.data=i,this.noLabel.string=e+1,this.nameLabel.string=i.name||"",this.nickNameLabel.string=i.nick_name||"",this.phoneLabel.string=i.phone||"",this.addressLabel.string=i.address||"",i.fanpage?this.fbNode.active=!0:this.fbNode.active=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.bgHoverNode.active=!0},this.onMouseLeave=function(){t.bgHoverNode.active=!1}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onTransferClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onUseMoneyClick(),this.GameRecharge.onTransferClick(),this.GameCenterUI.hideAgentFormNode(),this.ShopTransferContent.showData(this.data.nick_name)},onFacebookClick:function(){cc.sys.openURL(this.data.fanpage)},getData:function(){return this.data}}),cc._RF.pop()},{"../../helper/Constant":"Constant"}],AgentItem:[function(t,e,i){"use strict";cc._RF.push(e,"e427f6F7nxPf5Jgx3pfclO7","AgentItem"),cc.Class({extends:cc.Component,properties:{bgNode:cc.Node,noLabel:cc.Label,nameLabel:cc.Label,nicknameLabel:cc.Label,phoneLabel:cc.Label,addressLabel:cc.Label,fbNode:cc.Node},init:function(t,e,i){this.GameCenter=t,this.ShopTransferAgent=t.GameRecharge.RechargeUseMoney.Transfer.TransferAgent,this.ShopTransferContent=t.GameRecharge.RechargeUseMoney.Transfer.TransferContent,this.data=i,this.noLabel.string=e+1,this.nameLabel.string=i.name||"",this.nicknameLabel.string=i.nick_name||"",this.phoneLabel.string=i.phone||"",this.addressLabel.string=i.address||"",i.fanpage?this.fbNode.active=!0:this.fbNode.active=!1},onLoad:function(){},onClick:function(){this.ShopTransferContent.showData(this.data.nick_name)},onFacebookClick:function(){cc.sys.openURL(this.data.fanpage)},getData:function(){return this.data},showBgNode:function(){this.bgNode.active=!0},hideBgNode:function(){this.bgNode.active=!1}}),cc._RF.pop()},{}],Agent:[function(t,e,i){"use strict";cc._RF.push(e,"67555wEBYxG4oHrzX4MbI1D","Agent"),cc.Class({extends:cc.Component,properties:{agentItem2Prefab:cc.Prefab,listAgentScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.initData()},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active&&!this.GameCenter.Bonus.node.active},initData:function(){this.listAgentScrollView.content.removeAllChildren(!0);var t=this.GameCenter.getListAgent(),e=0;if(t)for(var i=0;i<t.length;i++)if(0===t[i].type){var o=cc.instantiate(this.agentItem2Prefab);o.getComponent("AgentItem2").init(this.GameCenter,e,t[i]),o.parent=this.listAgentScrollView.content,e++}}}),cc._RF.pop()},{}],AudioFireFish:[function(t,e,i){"use strict";cc._RF.push(e,"ad2d6D0IpZFyKoMA/W8Wi1O","AudioFireFish");var o=t("../helper/Constant");cc.Class({extends:cc.Component,properties:{musicBackgroundGame:cc.AudioSource,clickAudioClip:{type:cc.AudioClip,default:null},fire1AudioClip:{type:cc.AudioClip,default:null},fire2AudioClip:{type:cc.AudioClip,default:null},fire3AudioClip:{type:cc.AudioClip,default:null},gemAudioClip:{type:cc.AudioClip,default:null},hitAudioClip:{type:cc.AudioClip,default:null},switchAudioClip:{type:cc.AudioClip,default:null}},onLoad:function(){this.isSound=!0,this.loadConfig()},loadConfig:function(){var t=cc.sys.localStorage.getItem(o.IS_SOUND);t="true"===t||!0===t||"false"!==t&&!1!==t,this.isSound=t,this.saveConfig()},setSoundClick:function(){this.setSound(!this.isSound)},setSound:function(t){1==t?t=!0:0==t&&(t=!1,this.stopAll()),this.isSound=t,this.saveConfig()},saveConfig:function(){cc.sys.localStorage.setItem(o.IS_SOUND,this.isSound)},stopAll:function(){this.musicBackgroundGame.stop()},pauseAll:function(){cc.audioEngine.pauseAllEffects()},resumeAll:function(){this.musicBackgroundGame.resume()},playMusicBackgroundGame:function(){this.loadConfig(),this.isSound&&this.musicBackgroundGame.play()},playClick:function(){this.isSound&&cc.audioEngine.playEffect(this.clickAudioClip,!1)},playFire1:function(){this.isSound&&cc.audioEngine.playEffect(this.fire1AudioClip,!1)},playFire2:function(){this.isSound&&cc.audioEngine.playEffect(this.fire2AudioClip,!1)},playFire3:function(){this.isSound&&cc.audioEngine.playEffect(this.fire3AudioClip,!1)},playGem:function(){this.isSound&&cc.audioEngine.playEffect(this.gemAudioClip,!1)},playHit:function(){this.isSound},playSwitch:function(){this.isSound&&cc.audioEngine.playEffect(this.switchAudioClip,!1)},playFireByGunType:function(t){switch(t){case 0:case 1:this.playFire1();break;case 2:case 3:this.playFire2();break;default:this.playFire3()}}}),cc._RF.pop()},{"../helper/Constant":"Constant"}],Audio:[function(t,e,i){"use strict";cc._RF.push(e,"afe9arSqlJDBJ5Cc1NbcT2s","Audio");var o=t("../helper/Constant");cc.Class({extends:cc.Component,properties:{alertAudioClip:{type:cc.AudioClip,default:null},clickAudioClip:{type:cc.AudioClip,default:null},joinGameAudioClip:{type:cc.AudioClip,default:null},outGameAudioClip:{type:cc.AudioClip,default:null},winAudioClip:{type:cc.AudioClip,default:null}},onLoad:function(){this.isSound=!0,this.loadConfig()},loadConfig:function(){var t=cc.sys.localStorage.getItem(o.IS_SOUND);t="true"===t||!0===t||"false"!==t&&!1!==t,this.isSound=t,this.saveConfig()},saveConfig:function(){cc.sys.localStorage.setItem(o.IS_SOUND,this.isSound)},setSoundClick:function(){this.setSound(!this.isSound)},setSound:function(t){this.isSound=t,this.saveConfig()},getSound:function(){return this.loadConfig(),this.isSound},playAlert:function(){this.isSound&&cc.audioEngine.playEffect(this.alertAudioClip,!1)},playClick:function(){this.isSound&&cc.audioEngine.playEffect(this.clickAudioClip,!1)},playJoinGame:function(){this.isSound&&cc.audioEngine.playEffect(this.outGameAudioClip,!1)},playOutGame:function(){this.isSound},playWin:function(){this.isSound&&cc.audioEngine.playEffect(this.winAudioClip,!1)}}),cc._RF.pop()},{"../helper/Constant":"Constant"}],AvatarItem:[function(t,e,i){"use strict";cc._RF.push(e,"8fcd6u/w4tBhIP2VQMKOJ9p","AvatarItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{selectedNode:cc.Node,avatarSprite:cc.Sprite},onLoad:function(){},init:function(t,e){var i=this;this.GameCenter=t,this.UpdateAvatar=t.UpdateAvatar,this.avatar=e,this.url=e.content,cc.loader.load(o.convertUrlToLocation(this.url),function(t,e){if(e instanceof cc.Texture2D){var o=new cc.SpriteFrame(e,cc.Rect(0,0,90,128));i.avatarSprite.spriteFrame=o}}),this.selectAvatar(!1)},selectAvatar:function(t){this.selectedNode.active=t},isSelected:function(){return this.selectedNode.active},onClick:function(){this.UpdateAvatar.clearSelected(),this.selectAvatar(!0)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],AwardCardRateItem:[function(t,e,i){"use strict";cc._RF.push(e,"f8f44lHw6tGWp36g/CEuX4e","AwardCardRateItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueCardLabel:cc.Label,valueMoneyLabel:cc.Label},onLoad:function(){},init:function(t){this.data=t,this.vnd=t.vnd,this.money=t.money,this.valueCardLabel.string=o.numberWithCommas(this.vnd),this.valueMoneyLabel.string=o.numberWithCommas(this.money)+" "},initSale:function(t,e){this.data=t,this.vnd=t.vnd,this.money=t.money+t.money*e,this.valueCardLabel.string=o.numberWithCommas(this.vnd),this.valueMoneyLabel.string=o.numberWithCommas(this.money)+" "}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],AwardCard:[function(t,e,i){"use strict";cc._RF.push(e,"0f71e7/LLtGEJos4SWcua+H","AwardCard");var o=t("../../../util/Util"),n=t("../../../util/FormatUtil"),s=t("../../../helper/Constant"),a=t("../../../helper/Message"),r=t("../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,smsButtonNode:cc.Node,otpButtonNode:cc.Node,awardCardRateItemPrefab:cc.Prefab,cardValueItemPrefab:cc.Prefab,listCardRateNode:cc.Node,listCardValueNode:cc.Node,nodeCardPhone:cc.Node,nodeCardGame:cc.Node,totalMoneyLabel:cc.Label,useMoneyNode:cc.Node,otpEditBox:cc.EditBox,cardTypeDropDownList:r},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.selectedCard="",this.listCard=[],this.initData(),this.editboxs=[this.otpEditBox],this.cardTypeDropDownList.selectByValue(s.VIETEL)},onEnable:function(){this.clear(),this.backButtonNode.active=!1,cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){this.backButtonNode.active=!0,cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getConfig().award_config,e=this.GameCenter.getConfig().award_provider;for(var i in e=this.addTypeAward(e),this.initListRate(t),e){var o=e[i].name;this.cardTypeDropDownList.addItem(o,e[i]),this.cardTypeDropDownList.setCallback(this.resetListCardRate,this)}},initListCard:function(t){for(var e in this.listCard=[],this.listCardValueNode.removeAllChildren(!0),t)if(5e4!==t[e]&&3e5!==t[e]){var i=cc.instantiate(this.cardValueItemPrefab),o=i.getComponent("CardValueItem");o.init(this.GameCenter,t[e]),i.parent=this.listCardValueNode,this.listCard.push(o)}this.listCard[0]&&this.listCard[0].onClick()},initListRate:function(t){for(var e in this.listCardRateNode.removeAllChildren(),t)if(5e4!==t[e].vnd&&3e5!==t[e].vnd){var i=cc.instantiate(this.awardCardRateItemPrefab);i.getComponent("AwardCardRateItem").init(t[e]),i.parent=this.listCardRateNode}},resetListCardRate:function(t){var e=t.value;if(this.selectedCard!=e){this.setCardSelected(e);var i=this.GameCenter.getConfig().award_provider;if(i)for(var o in i)e==i[o].name&&this.initListCard(i[o].listAmount)}},clearCardSelected:function(){for(var t in this.listCard)this.listCard[t].setOff()},initTotalMoney:function(){if(this.getSelectedCardValue()){var t=this.getSelectedCardValue().getMoney();this.totalMoneyLabel.string=n.numberWithCommas(t)}},getSelectedCardValue:function(){for(var t in this.listCard)if(this.listCard[t].isSelected())return this.listCard[t];return null},onConfirmClick:function(){if(this.GameCenter.Audio.playClick(),this.getSelectedCardValue()){var t=this.getSelectedCardValue().getValue(),e=this.otpEditBox.string;this.checkAllEditboxNotEmpty()?this.awardCard(t,e):this.GameCenter.showDialogMessage(a.AWARD_TITLE,a.MISSING_INFO)}},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},awardCard:function(t,e){var i={quantity:1,amount:t,otp:e,type_card:o.getShortNameTelcoByName(this.selectedCard)};this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(s.REQUEST_AWARD_CARD,i)},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},initCapcha:function(){},setCardSelected:function(t){this.selectedCard=t},showCardPhone:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},onBackClick:function(){this.GameCenter.GameRecharge.onBackClick()},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initTotalMoney()},addTypeAward:function(t){var e={id:2,bonus:0,name:"Mobifone",short_name:"MOBIFONE",listAmount:[5e4,1e5,2e5,3e5,5e5]};for(var i in t)if(t[i].short_name===e.short_name)return t;return t.push(e),t}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],AwardHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a062adjYpdAjqz8gvGKsEm9","AwardHistoryItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.nameLabel.string=String.format(n.AWARD_DESCRIBE,t.card_type),this.playBalanceLabel.string=o.numberWithCommas(t.total_money),this.remainBalanceLabel.string=o.numberWithCommas(t.after_money),this.noteLabel.string=t.status==s.STATUS_FAILURE?n.FAILURE:n.SUCCESS;var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],AwardInviteFriend:[function(t,e,i){"use strict";cc._RF.push(e,"922d0NtvgxLaoRiVhE/sCKL","AwardInviteFriend");var o=t("../../../../util/FormatUtil"),n=(t("../../../../util/Util"),t("../../../../helper/Message"));cc.Class({extends:cc.Component,properties:{totalScoreLabel:cc.Label,changeScoreEditBox:cc.EditBox,receiveMoneyLabel:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.InviteFriend=t.GameInfo.InviteFriend},onLoad:function(){},onEnable:function(){this.reset()},onEditBoxChange:function(){var t=500*parseInt(this.changeScoreEditBox.string);this.receiveMoneyLabel.string=o.numberWithCommas(t)},initScore:function(t){this.totalScoreLabel.string=o.numberWithCommas(t)},onSuccessClick:function(){this.GameCenter.Audio.playClick();var t=parseInt(this.changeScoreEditBox.string);t?t>=10?this.awardScore(t):this.GameCenter.showDialogMessage(n.INTIVE_TITLE,n.SCORE_INVITE_FRIEND_FAIL):this.GameCenter.showDialogMessage(n.INTIVE_TITLE,n.SCORE_INVITE_FRIEND_NOT_EMPTY)},awardScore:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),amount:t};this.GameCenter.showProcessingNode(),this.GameCenter.api.convertMoneyInviteFriend(i,function(t){e.GameCenter.hideProcessingNode(),e.InviteFriend.loadInfo(),e.GameCenter.showDialogMessage(n.INTIVE_TITLE,t.msg),e.reset()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.INTIVE_TITLE,t.msg),e.reset()})},reset:function(){this.changeScoreEditBox.string="",this.receiveMoneyLabel.string=0}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../../../../util/Util":"Util"}],AwardVip:[function(t,e,i){"use strict";cc._RF.push(e,"08500jTzSFBmbB69kcKzOxk","AwardVip");var o=t("../../../../helper/Message"),n=t("../../../../helper/Constant"),s=t("../../../../helper/Config"),a=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{myVippointLabel:cc.Label,rateLabel:cc.Label,vippointTranferEditbox:cc.EditBox,totalReceiveLabel:cc.Label,otpEditBox:cc.EditBox,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t},onLoad:function(){this.editboxs=[this.vippointTranferEditbox,this.otpEditBox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.initData()},onDisable:function(){},initData:function(){this.clear();var t=this.GameCenter.getVip2Remain(),e=this.GameCenter.getVip2Total();this.vipRateTranfer=this.getRateTranfer(e),this.myVippointLabel.string=a.numberWithCommas(t),this.rateLabel.string=a.numberWithCommas(this.vipRateTranfer)},onEditTextChange:function(){var t=this.vippointTranferEditbox.string;this.totalReceiveLabel.string=a.numberWithCommas(t*this.vipRateTranfer)},onSuccessClick:function(){var t=parseInt(this.vippointTranferEditbox.string),e=this.otpEditBox.string;if(t)if(e){var i={amount:t,otp:e};this.GameCenter.sendRequest.sendToZone(n.PLAYER_TRANSFER_VIP_POINT_2,i)}else this.GameCenter.showToast(o.OTP_NOT_EMPTY);else this.GameCenter.showToast(o.VIP_2_TRANFER_NOT_EMPTY)},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},getRateTranfer:function(t){for(var e=s.VIP_2_POINT,i=0,o=e.length;i<o;i++)if(t<e[i])return e[i-1]?s.VIP_2_RATE_TRANFER[i-1]:s.VIP_2_RATE_TRANFER[0];return s.VIP_2_RATE_TRANFER[s.VIP_2_RATE_TRANFER.length-1]},clear:function(){for(var t in this.totalReceiveLabel.string=0,this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],BaCayBetChicken:[function(t,e,i){"use strict";cc._RF.push(e,"bd2advU+TpKNbvnTlaCwQyM","BaCayBetChicken");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{betOnLabel:cc.Label,betOffLabel:cc.Label,betButtonOnNode:cc.Node,betButtonOffNode:cc.Node,betButtonNode:cc.Node},init:function(t){this.BaCay=t,this.BaCayConstant=t.BaCayConstant,this.BaCayConfig=t.BaCayConfig},onLoad:function(){},setBetChickenAmount:function(t){this.betOnLabel.string=o.numberWithCommas(t),this.betOffLabel.string=o.numberWithCommas(t)},show:function(){this.node.active=!0},hide:function(){this.node.active=!1},enable:function(){this.betButtonNode.active=!0,this.betButtonOnNode.active=!0,this.betButtonOffNode.active=!1,this.show()},disable:function(){this.betButtonNode.active=!1,this.betButtonOnNode.active=!1,this.betButtonOffNode.active=!0,this.show()},reset:function(){this.setBetChickenAmount(0)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BaCayCard:[function(t,e,i){"use strict";cc._RF.push(e,"a071540DK9APqJVCKmrlmM5","BaCayCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;++i,Object.defineProperties(this,{point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],BaCayConfig:[function(t,e,i){"use strict";cc._RF.push(e,"f7e1bP1kEBPJZT6ZK2JfZzL","BaCayConfig");e.exports={MAX_PLAYERS:7,RATE_MIN_BET:1,RATE_MAX_BET:2,TIME_MOVE_MASTER:.25,TIME_BET_CHICKEN:.25,TIME_FLIP_CARD:.5,TIME_SCALE_BET_CHICKEN_LABEL:.2,TIME_OPEN_ALL_CARDS:5,SCALE_PLAYER_CARD:1,SCALE_CARD_MOVE_NODE:1.5,DISTANCE_TWO_CARD_MOVE_NODE:100,POSITION_PLAYER_SUM_X:120,POSITION_PLAYER_SUM_Y:-60},cc._RF.pop()},{}],BaCayConstant:[function(t,e,i){"use strict";cc._RF.push(e,"254b5iRER5MVosTonQD6Kxs","BaCayConstant");e.exports={ROOM_INFO:"ROOM_INFO",COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",STATISTIC:"STATISTIC",BET_AMOUNT:"BET_AMOUNT",CHANGE_HOME:"CHANGE_HOME",BET_CHICKEN:"BET_CHICKEN",BET_PRIVATE:"BET_PRIVATE",CONFIRM_BET_PRIVATE:"CONFIRM_BET_PRIVATE",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ALERT_SELL_KEY:"ALERT_SELL_KEY",ALERT_BUY_KEY:"ALERT_BUY_KEY",ADD_PLAYER:"ADD_PLAYER",REQUEST_BET_AMOUNT:"REQUEST_BET_AMOUNT",REQUEST_BET_CHICKEN:"REQUEST_BET_CHICKEN",REQUEST_BET_PRIVATE:"REQUEST_BET_PRIVATE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_KEY:"REQUEST_BUY_KEY",REQUEST_SELL_KEY:"REQUEST_SELL_KEY"},cc._RF.pop()},{}],BaCayHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"a527dejyLtF0a5/WH1x24p4","BaCayHandlerEffect");var o=t("./BaCayCard"),n=t("./BaCayConfig"),s=t("./BaCayPrivateBetState"),a=t("../../ui/form/FormMove"),r={init:function(t){this.BaCay=t,this.BaCayUI=t.BaCayUI,this.GameCommon=t.GameCommon,this.BaCayBetChicken=t.BaCayBetChicken,this.listPlayers=t.listPlayers,this.timeoutShowEffectResult=null},showEffectBetChicken:function(t,e){var i=cc.instantiate(this.BaCay.chipPrefab);i.parent=this.BaCay.chipNode,i.setPosition(t.node.getPosition()),i.getComponent("Balance").init(this.BaCay.isMoneyType),i.runAction(cc.sequence(cc.moveTo(n.TIME_BET_CHICKEN,this.BaCayBetChicken.node.getPosition()),cc.callFunc(function(){i.removeFromParent(!0),this.BaCayBetChicken.setBetChickenAmount(e)},this)))},showEffectGameFinish:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.initPrivateBetAllPlayers(t),this.initCardsAllPlayers(t),this.initBetAmountAllPlayers(t),this.BaCay.myPlayer.is_player&&this.showMoveCards(),e?this.timeoutShowEffectResult=setTimeout(function(){this.showEffectResult(t)}.bind(this),1e3*n.TIME_OPEN_ALL_CARDS):this.showEffectResult(t)},initPrivateBetAllPlayers:function(t){var e=t.players;for(var i in this.listPlayers)this.listPlayers[i].BaCayPlayer.hidePrivateBetNode();for(var o in e){var n=this.BaCay.getPlayerByUserId(e[o].user_id);if(n&&n.isItMe){var a=e[o].bet_private;for(var r in a){var c=a[r].user_id,h=a[r].amount,l=this.BaCay.getPlayerByUserId(c);l&&l.BaCayPlayer.setBetSpriteByStatus(s.SUCCESS,h)}}}},initCardsAllPlayers:function(t){if(t){var e=t.players;if(e)for(var i in e){var o=e[i].user_id,n=e[i].cards,s=this.BaCay.getPlayerByUserId(o);s&&this.initCardsForPlayer(s,n)}}},initCardsForPlayer:function(t,e){for(var i in t.cards=e,e){var o=this.instanceCard(e[i],!1);o.scale=n.SCALE_PLAYER_CARD,o.setPosition(50*i,0),o.parent=t.BaCayPlayer.playerCardsNode}},instanceCard:function(t,e){var i=cc.instantiate(this.BaCay.cardPrefab),n=i.getComponent("CardController"),s=new o(t);return n.init(s),n.reveal(e),i},initBetAmountAllPlayers:function(){for(var t in this.listPlayers)!this.listPlayers[t].is_home&&this.listPlayers[t].is_player&&0===this.listPlayers[t].bet_amount&&(this.listPlayers[t].BasePlayer.showChangeBalance(-this.BaCay.minBet),this.listPlayers[t].BaCayPlayer.showBetNode(this.BaCay.minBet))},showMoveCards:function(){this.BaCayUI.showMoveNode();var t=this.BaCay.myPlayer.cards;for(var e in t){var i=this.instanceCard(t[e],!0);i.scale=n.SCALE_CARD_MOVE_NODE,i.setPosition(0,0),i.addComponent(a),i.getComponent("FormMove").isChangeZIndex=!1,i.parent=this.BaCay.moveCardNode}},showEffectResult:function(t){this.BaCayUI.hideMoveNode(),this.flipCardsAllPlayers();var e=t.players;for(var i in e){var o=this.BaCay.getPlayerByUserId(e[i].user_id);if(o){var s=e[i].change_balance,a=e[i].change_balance_bet_chicken,r=e[i].sum;a>0&&this.showEffectWinChicken(o),o.BasePlayer.showChangeBalance(s),o.BasePlayer.showEffectByChangeBalance(s),o.BasePlayer.showTextLight(r,!1,new cc.Vec2(n.POSITION_PLAYER_SUM_X,n.POSITION_PLAYER_SUM_Y)),o.isItMe&&s>0&&this.GameCommon.Audio.playWin()}}this.showTextEffectResult(t)},showEffectWinChicken:function(t){var e=cc.instantiate(this.BaCay.chipPrefab);e.parent=this.BaCay.chipNode,e.setPosition(this.BaCayBetChicken.node.getPosition()),e.getComponent("Balance").init(this.BaCay.isMoneyType),e.runAction(cc.sequence(cc.moveTo(n.TIME_BET_CHICKEN,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.BaCayBetChicken.setBetChickenAmount(0)},showTextEffectResult:function(t){var e=t.is_lost_all,i=t.is_win_all,o=this.BaCay.getHomePlayer();o&&(i&&o.BaCayPlayer.showWinAllEffect(),e&&o.BaCayPlayer.showPhatLuongEffect())},flipMyCards:function(){this.BaCay.myPlayer.BaCayPlayer.flipCards()},flipCardsAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BaCayPlayer.flipCards()},showPrivateBetAllPlayers:function(){if(!this.BaCay.myPlayer.is_home)for(var t in this.listPlayers){if(!this.listPlayers[t].isItMe&&this.listPlayers[t].is_player&&!this.listPlayers[t].is_home)this.listPlayers[t].BaCayPlayer.showPrivateBet(this.BaCay.minBet*n.RATE_MIN_BET,this.BaCay.minBet*n.RATE_MAX_BET),this.BaCay.addPrivateBetClick(this.listPlayers[t])}},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1),this.listPlayers[t].is_home=!1},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutShowEffectResult)}};e.exports=r,cc._RF.pop()},{"../../ui/form/FormMove":"FormMove","./BaCayCard":"BaCayCard","./BaCayConfig":"BaCayConfig","./BaCayPrivateBetState":"BaCayPrivateBetState"}],BaCayHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"294a5zOtAxIvZLpq+a9hlf5","BaCayHandlerRequest");var o=t("./BaCayConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.BaCay=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.BaCay.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.GOLD:this.BaCay.initGold(e);break;case n.MONEY:this.BaCay.initMoney(e);break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.COUNT_DOWN:this.BaCay.handleCountDown(e);break;case o.START_GAME:this.BaCay.handleStartGame(e);break;case o.STATISTIC:this.BaCay.handleStatistic(e);break;case o.BET_AMOUNT:this.BaCay.handleBetAmount(e);break;case o.CHANGE_HOME:this.BaCay.handleChangeHome(e);break;case o.BET_CHICKEN:this.BaCay.handleBetChicken(e);break;case o.BET_PRIVATE:this.BaCay.handleBetPrivate(e);break;case o.ALERT_SELL_KEY:this.BaCay.handleAlertSellKey(e);break;case o.ALERT_BUY_KEY:this.BaCay.handleAlertBuyKey(e);break;case o.PLAYERS_LEFT_ROOM:this.BaCay.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.BaCay.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.BaCay.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.BaCay.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./BaCayConstant":"BaCayConstant"}],BaCayPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"df80a3On9tDtLLDOR8HEXh8","BaCayPlayer");var o=t("./BaCayConfig"),n=t("./BaCayPrivateBetState"),s=t("../../helper/Message"),a=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{chickenNode:cc.Node,privateMinBetNode:cc.Node,privateMaxBetNode:cc.Node,privateMinBetLabel:cc.Label,privateMaxBetLabel:cc.Label,notBetSpriteFrame:cc.SpriteFrame,inviteBetSpriteFrame:cc.SpriteFrame,sucessBetSpriteFrame:cc.SpriteFrame,playerCardsNode:cc.Node},onLoad:function(){this.isFlipCards=!1,this.cards=[],this.BasePlayer=this.node.getComponent("BasePlayer")},flipCards:function(){if(!this.isFlipCards){this.isFlipCards=!0;for(var t=this.playerCardsNode._children,e=0,i=t.length;e<i;e++){t[e].getComponent("CardController").revealWithAnimationFlip(!0,o.TIME_FLIP_CARD)}}},showWinAllEffect:function(){this.BasePlayer.hideWinLoseEffect(),this.BasePlayer.showWinEffect(s.BACAY_WIN_ALL)},showPhatLuongEffect:function(){this.BasePlayer.hideWinLoseEffect(),this.BasePlayer.showLoseEffect(s.BACAY_LOSE_ALL)},setBetSpriteByStatus:function(t,e){this.status=t,this.betMoney=e;var i=void 0;switch(t){case n.NOT_BET:i=this.notBetSpriteFrame;break;case n.SUCCESS:i=this.sucessBetSpriteFrame;break;case n.INVITE:i=this.inviteBetSpriteFrame}t===n.NOT_BET?(this.privateMinBetNode.getComponent(cc.Sprite).spriteFrame=i,this.privateMaxBetNode.getComponent(cc.Sprite).spriteFrame=i):parseInt(this.privateMinValue)===e?(this.privateMinBetNode.getComponent(cc.Sprite).spriteFrame=i,this.privateMinBetNode.active=!0,this.privateMaxBetNode.active=!1):parseInt(this.privateMaxValue)===e&&(this.privateMaxBetNode.getComponent(cc.Sprite).spriteFrame=i,this.privateMinBetNode.active=!1,this.privateMaxBetNode.active=!0)},getBetStatus:function(){return this.status},getBetMoney:function(){return this.betMoney},showPrivateBet:function(t,e){this.setBetMinLabel(t),this.setBetMaxLabel(e),this.showprivateMinBetNode(),this.showprivateMaxBetNode()},hidePrivateBetNode:function(){this.hidePrivateMaxBetNode(),this.hidePrivateMinBetNode()},showprivateMinBetNode:function(){this.privateMinBetNode.active=!0},hidePrivateMinBetNode:function(){this.privateMinBetNode.active=!1},showprivateMaxBetNode:function(){this.privateMaxBetNode.active=!0},hidePrivateMaxBetNode:function(){this.privateMaxBetNode.active=!1},setBetMinLabel:function(t){this.privateMinValue=t,this.privateMinBetLabel.string=a.nFormatter(t)},setBetMaxLabel:function(t){this.privateMaxValue=t,this.privateMaxBetLabel.string=a.nFormatter(t)},setChicken:function(t){t?this.showChicken():this.hideChicken()},showChicken:function(){this.betChicken=!0,this.chickenNode.active=!0},hideChicken:function(){this.betChicken=!1,this.chickenNode.active=!1},reset:function(){this.isFlipCards=!1,this.betChicken=!1,this.hideChicken(),this.hidePrivateBetNode(),this.BasePlayer.hideText(),this.playerCardsNode.removeAllChildren(!0),this.setBetSpriteByStatus(n.NOT_BET,0)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","./BaCayConfig":"BaCayConfig","./BaCayPrivateBetState":"BaCayPrivateBetState"}],BaCayPrivateBetState:[function(t,e,i){"use strict";cc._RF.push(e,"2034e+hMr1I6ZR1O1/7k98J","BaCayPrivateBetState");e.exports={NOT_BET:"not_bet",SUCCESS:"success",INVITE:"invite"},cc._RF.pop()},{}],BaCayState:[function(t,e,i){"use strict";cc._RF.push(e,"62951t8dI9Mk5r1eZHzjY86","BaCayState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",BETTING:"BETTING",FINISH:"FINISH",setState:function(t){this.currentState=t},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setBetting:function(){this.currentState=this.BETTING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isBetting:function(){return this.currentState===this.BETTING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],BaCayUI:[function(t,e,i){"use strict";cc._RF.push(e,"06973gFZvlFNahQyw8xCw7L","BaCayUI"),cc.Class({extends:cc.Component,properties:{moveNode:cc.Node,sellKeyFormNode:cc.Node,buyKeyFormNode:cc.Node,betPrivateMinButtonNode:cc.Node,betPrivateMaxButtonNode:cc.Node,receivebetPrivateButtonNode:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){this._sellKeyDialogForm=this.sellKeyFormNode.getComponent("DialogForm"),this._buyKeyDialogForm=this.buyKeyFormNode.getComponent("DialogForm")},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showAllButton:function(){this.showBetPrivateMinButtonNode(),this.showBetPrivateMaxButtonNode(),this.showReceiveBetPrivateButtonNode()},hideAllButton:function(){this.hideBetPrivateMinButtonNode(),this.hideBetPrivateMaxButtonNode(),this.hideReceiveBetPrivateButtonNode()},showBetPrivateMinButtonNode:function(){this.betPrivateMinButtonNode.active=!0},hideBetPrivateMinButtonNode:function(){this.betPrivateMinButtonNode.active=!1},showBetPrivateMaxButtonNode:function(){this.betPrivateMaxButtonNode.active=!0},hideBetPrivateMaxButtonNode:function(){this.betPrivateMaxButtonNode.active=!1},showReceiveBetPrivateButtonNode:function(){this.receivebetPrivateButtonNode.active=!0},hideReceiveBetPrivateButtonNode:function(){this.receivebetPrivateButtonNode.active=!1},showMoveNode:function(){this.moveNode.active=!0},hideMoveNode:function(){this.moveNode.active=!1},showSellKeyForm:function(){this.sellKeyFormNode.active=!0},hideSellKeyForm:function(){this.sellKeyFormNode.active=!1},showBuyKeyForm:function(){this.buyKeyFormNode.active=!0},hideBuyKeyForm:function(){this.buyKeyFormNode.active=!1},reset:function(){this.hideSellKeyForm(),this.hideBuyKeyForm()}}),cc._RF.pop()},{}],BaCay:[function(t,e,i){"use strict";cc._RF.push(e,"a380b7clWNN6a/xQsuS0kJu","BaCay");var o=t("../../base/BaseController"),n=t("./BaCayConstant"),s=t("./BaCayConfig"),a=t("./BaCayUI"),r=t("./BaCayState"),c=t("./BaCayPrivateBetState"),h=t("./BaCayHandlerRequest"),l=t("./BaCayHandlerEffect"),u=t("./other/BaCayBetChicken"),d=t("../../ui/dialog/BetForm"),m=t("../../prefab/GameCommon"),p=t("../../object/RoomType"),f=t("../../helper/Constant"),g=t("../../helper/Message"),_=t("../../util/RandomUtil"),S=t("../../util/FormatUtil");cc.Class({extends:o,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,betPrivateMinButtonLabel:cc.Label,betPrivateMaxButtonLabel:cc.Label,moveNode:cc.Node,moveCardNode:cc.Node,chipNode:cc.Node,BaCayUI:a,BetForm:d,BaCayBetChicken:u,GameCommon:m},onLoad:function(){this._super(),this.setSceneName(f.SCENE_GAME_BACAY),this.sfsManager.setController(this),this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[f.MIN_BET].value),this.roomType=parseInt(this.room.variables[f.ROOM_TYPE].value),this.isMoneyType=this.roomType==p.MONEY_CODE,this.playersNode=this.BaCayUI.playersNode,this.isMoneyType||this.BaCayUI.disableAllPlaceHolder(),this.BaCayConstant=n,this.BaCayConfig=s,this.BaCayState=r,this.BaCayHandlerRequest=h,this.BaCayHandlerRequest.init(this),this.BaCayHandlerEffect=l,this.BaCayHandlerEffect.init(this),this.BaCayBetChicken.init(this),this.GameCommon.init(this),this.BetForm=this.GameCommon.BetForm,this.reset(),this.initBetForm(),this.initPlayers(),this.onPublicMessage=this.BaCayHandlerRequest.onPublicMessage.bind(this.BaCayHandlerRequest),this.onRoomVarsUpdate=this.BaCayHandlerRequest.onRoomVarsUpdate.bind(this.BaCayHandlerRequest),this.onUserVarsUpdate=this.BaCayHandlerRequest.onUserVarsUpdate.bind(this.BaCayHandlerRequest),this.onResponse=this.BaCayHandlerRequest.onResponse.bind(this.BaCayHandlerRequest),this.onPrivateBetMinBind=this.onPrivateBetMinClick.bind(this),this.onPrivateBetMaxBind=this.onPrivateBetMaxClick.bind(this),this.initButton(),this.initRoomInfo(),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.clearAllTimeout(),this.removeEventListeners()},initButton:function(){var t=String.format(g.BACAY_BET_PRIVATE_BUTTON,S.nFormatter(this.minBet*s.RATE_MIN_BET)),e=String.format(g.BACAY_BET_PRIVATE_BUTTON,S.nFormatter(this.minBet*s.RATE_MAX_BET));this.betPrivateMinButtonLabel.string=t,this.betPrivateMaxButtonLabel.string=e},initBetForm:function(){this.BetForm.setRound(this.minBet),this.BetForm.setMinValue(this.minBet*s.RATE_MIN_BET),this.BetForm.setMaxValue(this.minBet*s.RATE_MAX_BET)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(e){var i=this.user_id;t.GameCommon.showPlayerInfo(i)},a),a.active=!1}this.initPlayersByListPlayers(i,n),this.initPlayersByListPlayers(o,n)},initPlayersByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i]):t[i].isItMe=!1,this.initPlayer(t[i])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.isItMe?0:this.getRandomPosition();t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("BaCayPlayer");t.BasePlayer=o,t.BaCayPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRoomMaster(t.is_home),o.setRequestLeftRoom(t.request_left_room),o.setPlayerName(t.nick_name),o.setBalance(t.balance),n.setChicken(t.bet_chicken),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.BaCayHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,o=this.getPlayerByUserId(e);o&&!this.isMoneyType&&o.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,o=this.getPlayerByUserId(e);o&&this.isMoneyType&&o.BasePlayer.setBalance(i)},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.BaCayState.setState(e),this.BaCayState.isStop()?this.reset():this.BaCayState.isWaiting()?this.BaCayHandlerEffect.startCountDownAllPlayers(t):this.BaCayState.isBetting()?this.resumeStateBetting(t):this.BaCayState.isFinish()&&this.resumeStateFinish(t)},resumeStateBetting:function(t){for(var e=t.data.amount_chicken,i=t.data.players,o=0,n=i.length;o<n;o++){var s=i[o],a=s.bet_amount;if(0===a?s.isItMe&&!s.is_home&&this.GameCommon.showBetForm():s.BasePlayer.showBetNodeWithoutAnimation(a),s.isItMe){s.bet_chicken||!s.is_player?this.BaCayBetChicken.disable():this.BaCayBetChicken.enable();var r=s.bet_private;for(var h in this.BaCayHandlerEffect.showPrivateBetAllPlayers(),r){var l=r[h].user_id,u=r[h].amount,d=r[h].status,m=this.getPlayerByUserId(l);m&&d!==c.NOT_BET&&m.BaCayPlayer.setBetSpriteByStatus(d,u)}}}this.BaCayBetChicken.setBetChickenAmount(e),this.BaCayHandlerEffect.startCountDownAllPlayers(t),this.checkIsShowButton()&&this.BaCayUI.showAllButton()},resumeStateFinish:function(t){for(var e=t.data.amount_chicken,i=t.data.players,o=t.data.statistic,n=0,s=i.length;n<s;n++){var a=i[n],r=a.bet_amount;0!==r&&a.BasePlayer.showBetNodeWithoutAnimation(r)}this.BaCayBetChicken.setBetChickenAmount(e),this.BaCayBetChicken.disable(),this.BaCayHandlerEffect.showEffectGameFinish(o,!1)},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.BaCayState.setWaiting(),this.GameCommon.hideWaitingNode(),this.BaCayHandlerEffect.startCountDownAllPlayers(t)):(this.BaCayState.setStop(),this.BaCayHandlerEffect.stopCountDownAllPlayers())},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.BaCayState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.BaCayHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(g.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(g.IGNORE_REQUEST_LEFT_ROOM)},handleChangeHome:function(t){var e=t.data.user_id_new_home,i=this.getPlayerByUserId(e);this.BaCayHandlerEffect.clearRoomMasterAllPlayers(),i&&(i.is_home=!0,i.BasePlayer.setRoomMaster(!0)),this.BaCayUI.hideBuyKeyForm()},handleStartGame:function(t){this.myPlayer.is_home||this.GameCommon.showBetForm(),this.setViewersToPlayers(),this.BaCayState.setBetting(),this.BaCayBetChicken.enable(),this.BaCayHandlerEffect.showPrivateBetAllPlayers(),this.BaCayHandlerEffect.startCountDownAllPlayers(t),this.checkIsShowButton()&&this.BaCayUI.showAllButton()},handleBetAmount:function(t){var e=t.data.user_id,i=t.data.amount,o=this.getPlayerByUserId(e);o&&(o.bet_amount=i,o.BasePlayer.showChangeBalance(-i),o.BasePlayer.showBetNode(i),o.isItMe)},handleBetChicken:function(t){var e=t.data.user_id,i=t.data.amount_chicken,o=this.getPlayerByUserId(e);o&&(o.BasePlayer.showChangeBalance(-this.minBet),o.BaCayPlayer.showChicken(),this.BaCayHandlerEffect.showEffectBetChicken(o,i),o.isItMe&&this.BaCayBetChicken.disable())},handleBetPrivate:function(t){var e=t.data.amount,i=t.data.user_id,o=t.data.status,n=this.getPlayerByUserId(i);n&&n.BaCayPlayer.setBetSpriteByStatus(o,e)},handleAlertSellKey:function(t){this.BaCayUI.showSellKeyForm()},handleAlertBuyKey:function(t){this.myPlayer.is_player&&this.BaCayUI.showBuyKeyForm()},handleStatistic:function(t){this.BaCayState.setFinish(),this.BaCayBetChicken.disable(),this.GameCommon.hideBetForm(),this.BaCayHandlerEffect.stopCountDownAllPlayers(),this.BaCayHandlerEffect.showEffectGameFinish(t.data),this.setViewersToPlayers(),this.BaCayUI.hideAllButton()},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onConfirmBetClick:function(){this.GameCommon.Audio.playClick();var t={amount:this.BetForm.getBalanceSlider()};this.sendRequest.send(n.REQUEST_BET_AMOUNT,t),this.GameCommon.hideBetForm()},onBetChickenClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_BET_CHICKEN)},onBetPrivateMinClick:function(){for(var t in this.GameCommon.Audio.playClick(),this.listPlayers)if(!this.listPlayers[t].is_home&&!this.listPlayers[t].isItMe){var e={user_id:this.listPlayers[t].user_id,amount:this.minBet*s.RATE_MIN_BET};this.sendRequest.send(n.REQUEST_BET_PRIVATE,e)}this.BaCayUI.hideBetPrivateMinButtonNode(),this.BaCayUI.hideBetPrivateMaxButtonNode()},onBetPrivateMaxClick:function(){for(var t in this.GameCommon.Audio.playClick(),this.listPlayers)if(!this.listPlayers[t].is_home&&!this.listPlayers[t].isItMe){var e={user_id:this.listPlayers[t].user_id,amount:this.minBet*s.RATE_MAX_BET};this.sendRequest.send(n.REQUEST_BET_PRIVATE,e)}this.BaCayUI.hideBetPrivateMinButtonNode(),this.BaCayUI.hideBetPrivateMaxButtonNode()},onReveiceBetPrivateClick:function(){for(var t in this.GameCommon.Audio.playClick(),this.listPlayers){var e=this.listPlayers[t].BaCayPlayer;if(e.getBetStatus()===c.INVITE){var i={user_id:this.listPlayers[t].user_id,amount:e.getBetMoney()};this.sendRequest.send(n.REQUEST_BET_PRIVATE,i)}}},onFlipCardssClick:function(){this.GameCommon.Audio.playClick(),this.BaCayUI.hideMoveNode(),this.BaCayHandlerEffect.flipMyCards()},onConfirmSellKeyClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_SELL_KEY),this.BaCayUI.hideSellKeyForm()},onConfirmBuyKeyClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_BUY_KEY),this.BaCayUI.hideBuyKeyForm()},addPrivateBetClick:function(t){var e=t.node.getChildByName("private-bet-min-node"),i=t.node.getChildByName("private-bet-max-node");e.on(cc.Node.EventType.TOUCH_END,this.onPrivateBetMinBind,e),i.on(cc.Node.EventType.TOUCH_END,this.onPrivateBetMaxBind,i)},removePrivateBetClick:function(t){var e=t.node.getChildByName("private-bet-min-node"),i=t.node.getChildByName("private-bet-max-node");e.off(cc.Node.EventType.TOUCH_END,this.onPrivateBetMinBind,e),i.off(cc.Node.EventType.TOUCH_END,this.onPrivateBetMaxBind,i)},onPrivateBetMinClick:function(t){this.GameCommon.Audio.playClick(),this.BaCayState.isBetting()&&this.privateBetWithRate(t,s.RATE_MIN_BET),t.stopPropagation()},onPrivateBetMaxClick:function(t){this.GameCommon.Audio.playClick(),this.BaCayState.isBetting()&&this.privateBetWithRate(t,s.RATE_MAX_BET),t.stopPropagation()},privateBetWithRate:function(t,e){var i=t.currentTarget._parent.user_id,o=this.getPlayerByUserId(i),n=this.minBet*e;if(o){var s={user_id:i,amount:n};this.sendRequest.send(this.BaCayConstant.REQUEST_BET_PRIVATE,s)}},onInviteClick:function(){this.GameCommon.onInviteClick()},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkIsShowButton:function(){return this.myPlayer.is_player&&!this.myPlayer.is_home&&this.getNumberPlayers()>2},getNumberPlayers:function(){var t=0;for(var e in this.listPlayers)this.listPlayers[e].is_player&&t++;return t},getFirstPlayer:function(){for(var t in this.listPlayers)if(this.listPlayers[t].is_player)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(_.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},getHomePlayer:function(){for(var t in this.listPlayers)if(this.listPlayers[t].is_home)return this.listPlayers[t];return null},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.BaCayHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.BaCayBetChicken.hide(),this.BaCayBetChicken.reset(),this.BaCayUI.reset(),this.GameCommon.hideBetForm(!1),this.moveCardNode.removeAllChildren(!0),this.chipNode.removeAllChildren(!0),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].BaCayPlayer.reset(),this.listPlayers[t].cards=[],this.listPlayers[t].bet_chicken=!1,this.listPlayers[t].bet_amount=0;this.BaCayUI.hideAllButton()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","../../ui/dialog/BetForm":"BetForm","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./BaCayConfig":"BaCayConfig","./BaCayConstant":"BaCayConstant","./BaCayHandlerEffect":"BaCayHandlerEffect","./BaCayHandlerRequest":"BaCayHandlerRequest","./BaCayPrivateBetState":"BaCayPrivateBetState","./BaCayState":"BaCayState","./BaCayUI":"BaCayUI","./other/BaCayBetChicken":"BaCayBetChicken"}],Balance:[function(t,e,i){"use strict";cc._RF.push(e,"939d3OMLBhDV5pEaFjZ5hxD","Balance"),cc.Class({extends:cc.Component,properties:{balanceSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t){this.balanceSprite.spriteFrame=t?this.moneySpriteFrame:this.goldSpriteFrame}}),cc._RF.pop()},{}],BannerEvent:[function(t,e,i){"use strict";cc._RF.push(e,"66fefmpcJ5EGbwKqDA4o1j8","BannerEvent"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onClick:function(){this.node.active=!1,this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeMomoClick()}}),cc._RF.pop()},{}],BaseBullet:[function(t,e,i){"use strict";cc._RF.push(e,"ff26bvR3jhLwoCsnHbIrSEd","BaseBullet"),cc.Class({extends:cc.Component,properties:{bulletSprite:cc.Sprite,bulletSpriteFrames:[cc.SpriteFrame],colliderCollision:cc.Collider},init:function(t,e,i){this.controller=t,this.type=e,this.Bullet=i,this.node.getComponent(cc.Animation).stop(),this.bulletSprite.spriteFrame=this.bulletSpriteFrames[e]},onLoad:function(){this.animation=this.node.getComponent(cc.Animation),this.clips=this.animation.getClips()},onEnable:function(){this.initSizeCollider(),this.isAction=!1,cc.director.getCollisionManager().enabled=!0},onDisable:function(){},initSizeCollider:function(){this.colliderCollision.size.width=this.node.width,this.colliderCollision.size.height=this.node.height},setBulletCallBackCollision:function(t){this.callBackCollision=t.bind(this.Bullet)},onCollisionEnter:function(t){this.callBackCollision(t)},onCollisionStay:function(t){},onCollisionExit:function(t){},getIdBullet:function(){return this.Bullet.getIdBullet()},onDestroy:function(){clearTimeout(this.timeout)},explosion:function(){var t=this.clips[this.type];if(t){var e=t._name;this.animation.play(e),this.timeout=setTimeout(function(){this.node&&this.controller.bulletPool.put(this.node)}.bind(this),1e3*t.duration)}}}),cc._RF.pop()},{}],BaseController:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"b366ddk2EJCt6ES5/aYalAy","BaseController");var s=t("../helper/Constant"),a=(t("../helper/Config"),t("../object/Capcha")),r=t("../util/FormatUtil");cc.Class((n(o={extends:cc.Component,properties:{},onLoad:function(){this.initBaseController()},initBaseController:function(){cc.S||(cc.S={}),this.initPrototype(),this.singletonVQB(),this.singletonAPI(),this.singletonSFSManager()},initPrototype:function(){String.format||(String.format=function(t){var e=Array.prototype.slice.call(arguments,1);return t.replace(/{(\d+)}/g,function(t,i){return void 0!==e[i]?e[i]:t})}),String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)})},singletonVQB:function(){cc.S||(cc.S={})},singletonAPI:function(){if(!cc.S.api){var e=t("../api/API");cc.S.api=e}this.api=cc.S.api},singletonSFSManager:function(){if(!cc.S.sfsManager){var e=t("../sfs/SFSManager");cc.S.sfsManager=e}this.sfsManager=cc.S.sfsManager,this.sfs=this.sfsManager.sfs,this.SFS2X=this.sfsManager.SFS2X,this.sendRequest=this.sfsManager.sendRequest},clearTempRequests:function(){for(cc.S.tempRequests||(cc.S.tempRequests=[]);cc.S.tempRequests.length>0;)cc.S.tempRequests.pop()},setBankListAmount:function(t){cc.S.bank_list_amount=t},getBankListAmount:function(){return cc.S.bank_list_amount},setBankListProvider:function(t){cc.S.bank_list_provider=t},getBankListProvider:function(){return cc.S.bank_list_provider},setConfig:function(t){cc.S.config=t},getConfig:function(){return cc.S.config},setListAgent:function(t){cc.S.list_agent=t},getListAgent:function(){return r.randomListAnget(cc.S.list_agent)},setGeneralConfig:function(t){cc.S.general_config=t},getGeneralConfig:function(){return cc.S.general_config},setLuckyWheel:function(t){cc.S.lucky_wheel=t},setSecurityGame:function(t){cc.S.security_game=t},getSecurityGame:function(){return cc.S.security_game},getDiamondLevel:function(){return cc.S.sfsManager.sfs.mySelf.variables.diamond_level.value},getDiamond:function(){return cc.S.sfsManager.sfs.mySelf.variables.diamond.value},getUserLuckyWheelFree:function(){return cc.S.sfsManager.sfs.mySelf.variables.lucky_wheel_free.value},setDiamondEvent:function(t){cc.S.diamond_event=t},getDiamondEvent:function(){return cc.S.diamond_event},setDiamondLevelEvent:function(t){cc.S.diamond_level=t},getDiamondLevelEvent:function(){return cc.S.diamond_level},setDiamondEventOpen:function(t){cc.S.diamond_event_open=t},getDiamondEventOpen:function(){return cc.S.diamond_event_open},getLuckyWheel:function(){return cc.S.lucky_wheel},setQuest:function(t){cc.S.quest=t},getQuest:function(){return cc.S.quest},setLongVuongConfig:function(t){cc.S.lv=t},getLongVuongConfig:function(){return cc.S.lv},setFreeChip:function(t){cc.S.free_chip=t},getFreeChip:function(){return cc.S.free_chip},getTempData:function(){return cc.S.tempData||(cc.S.tempData={}),cc.S.tempData},setUser:function(t){cc.S.user=t},getUser:function(){return cc.S.user},setMoney:function(t){cc.S.user.money=t},setGold:function(t){cc.S.user.gold=t},getToken:function(){return cc.S.user.token},getUserId:function(){return cc.S.user.user_id},getSafeMoney:function(){return cc.S.sfsManager.sfs.mySelf.variables.safe_amount.value},getMoney:function(){return cc.S.sfsManager.sfs.mySelf.variables.money.value},getGold:function(){return cc.S.sfsManager.sfs.mySelf.variables.gold.value},getVipPoint:function(){return cc.S.sfsManager.sfs.mySelf.variables.vip_point},getVip2Remain:function(){return Math.floor(cc.S.sfsManager.sfs.mySelf.variables.vip_2_remain.value)},getVip2Total:function(){return Math.floor(cc.S.sfsManager.sfs.mySelf.variables.vip_2_total.value)},getBalance:function(){return cc.S.sfsManager.sfs.mySelf.variables.balance.value},isAutoBuyIn:function(){return cc.S.sfsManager.sfs.mySelf.variables.is_auto_buy_in.value},setSceneName:function(t){cc.S.sceneName=t},getSceneName:function(){return cc.S.sceneName},setSceneGameSlot:function(t){cc.S.sceneGameSlot=t},isSenceGameSlot:function(){return cc.S.sceneGameSlot},setBulletSpeed:function(t){cc.S.config.bullet_speed=t},getBulletSpeed:function(){return cc.S.config.bullet_speed||30},setRoomInfo:function(t){cc.S.roomInfo=t},getRoomInfo:function(){return cc.S.roomInfo},getLastJoinedRoom:function(){return cc.S.sfsManager.sfs.lastJoinedRoom},setOrbitFireFish:function(t){cc.S.orbit_firefish||(t?cc.S.orbit_firefish=t:cc.loader.loadRes("game-firefish/orbit/Orbit.json",cc.JsonAsset,function(t,e){cc.S.orbit_firefish=e.json}))},getOrbitFireFish:function(){return cc.S.orbit_firefish},getListUserInRoom:function(){var t=this.getLastJoinedRoom()._userManager._usersById.items,e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},getRoomName:function(){return cc.S.sfsManager.sfs.lastJoinedRoom.name||""},getSFS:function(){return cc.S.sfsManager?cc.S.sfsManager.sfs:null},getSFSMySelf:function(){return cc.S.sfsManager.sfs.mySelf},getListUserByRoom:function(){var t=[];if(this.sfs){var e=this.sfs.lastJoinedRoom._userManager._usersByName.items;for(var i in e)e.hasOwnProperty(i)&&t.push(e[i])}return t},getFID:function(){},getTempRequests:function(){return cc.S.tempRequests||(cc.S.tempRequests=[]),cc.S.tempRequests},getGameName:function(){var t="",e=this.getRoomName().split("_");return e.length>1&&(t=e[1]),t},getRoomMinBet:function(){var t="",e=this.getRoomName().split("_");return e.length>1&&(t=e[1]),t},getTableId:function(){var t="",e=this.getRoomName().split("_");return e.length>3&&(t=e[3]),t},isScene:function(t){return this.getSceneName()===t},getRegisterCode:function(){return cc.sys.platform===cc.sys.DESKTOP_BROWSER?s.REGISTER_CODE_WEB:cc.sys.platform===cc.sys.ANDROID?s.REGISTER_CODE_GOOGLE_STORE:cc.sys.platform===cc.sys.IPHONE||cc.sys.platform===cc.sys.IPAD?s.REGISTER_CODE_APPLE_STORE:s.REGISTER_CODE_WEB},getDeviceID:function(){var t=cc.sys.localStorage.getItem(s.DEVICE_ID);t||(t=(new a).device_id,cc.sys.localStorage.setItem(s.DEVICE_ID,t));return t},getMarketingCode:function(){return cc.sys.localStorage.getItem(s.MARKETING_CODE)||""},isConnected:function(){return this.getUser()&&cc.S.sfsManager&&cc.S.sfsManager.sfs&&cc.S.sfsManager.sfs.isConnected()},setAutoLogin:function(t){cc.sys.localStorage.setItem(s.AUTO_LOGIN,t)},isAutoLogin:function(){var t=cc.sys.localStorage.getItem(s.AUTO_LOGIN);return!!t&&"true"==t},setAccountType:function(t){cc.sys.localStorage.setItem(s.ACCOUNT_TYPE,t)},getAccountType:function(){var t=cc.sys.localStorage.getItem(s.ACCOUNT_TYPE);return!!t&&"true"==t},setTimeLogin:function(t){cc.sys.localStorage.setItem(s.TIME_LOGIN,JSON.stringify(t))},getTimeLogin:function(){var t=cc.sys.localStorage.getItem(s.TIME_LOGIN);return t?t=JSON.parse(t):null},setListFavorites:function(t){cc.sys.localStorage.setItem(s.FAVORIES,JSON.stringify(t))},setShowEvent:function(t){cc.S.is_show_event=t},setShowChanLe:function(t){cc.S.is_show_chan_le=t},getShowChanLe:function(){return cc.S.is_show_chan_le},isShowEvent:function(){return cc.S.is_show_event},getListFavorites:function(){var t=cc.sys.localStorage.getItem(s.FAVORIES);if(t)try{return JSON.parse(t)}catch(t){return[]}return[]},addFavorite:function(t){for(var e=this.getListFavorites(),i=0,o=e.length;i<o;i++)if(e[i]===t){e.splice(i,1);break}e.push(t),e.length>10&&e.splice(10,1),this.setListFavorites(e)}},"getFID",function(){var t=cc.sys.localStorage.getItem(s.FID);return t||(t=this.getParameterByName("fid"))&&this.setFID(t),t||0}),n(o,"setFID",function(t){cc.sys.localStorage.setItem(s.FID,t)}),n(o,"clearSFSManager",function(){var t=cc.S.general_config;cc.S.resume&&(cc.game.resume=cc.S.resume,cc.game.pause=cc.S.pause),cc.S={general_config:t},cc.S.sceneName=s.SCENE_GAME_CENTER,cc.S.tempData={}}),n(o,"getParameterByName",function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}),o)),cc._RF.pop()},{"../api/API":"API","../helper/Config":"Config","../helper/Constant":"Constant","../object/Capcha":"Capcha","../sfs/SFSManager":"SFSManager","../util/FormatUtil":"FormatUtil"}],BaseFish:[function(t,e,i){"use strict";cc._RF.push(e,"07182WxQJdLKpIbE5Imtzxp","BaseFish");var o=t("../../helper/FireFishConfig");cc.Class({extends:cc.Component,properties:{colliderCollision:cc.Collider},init:function(t,e){this.FireFishGame=t,this.fishManager=t.fishManager,this.Fish=e,this.node.opacity=255,this.initSwimAndDeadAnimationByType(this.Fish.type),this.initSizeCollider()},onLoad:function(){var t=this;this.isAction=!0;var e=this;this.onTouchEnd=function(i){e.FireFishGame.isLockFish()&&(t.Fish.setLockFish(!0),t.fishManager.removeAllEventClickFish())}},onEnable:function(){cc.director.getCollisionManager().enabled=!0,this.initSizeCollider()},onDisable:function(){this.removeEventClick()},addEventClick:function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node)},removeEventClick:function(){this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node)},initSizeCollider:function(){var t=this.fishManager.getTypeFishChange(this.Fish.type),e=this.getFishConfigByType(t);e&&(this.colliderCollision.size.width=e.width*e.scale_width,this.colliderCollision.size.height=e.height*e.scale_height,this.node.scale=-e.scale)},setFishCallBackCollision:function(t,e){this.callBackCollision=t.bind(e)},setLockFish:function(t){this.lockFish=t},isLockFish:function(){return this.lockFish},onCollisionEnter:function(t){this.callBackCollision(t)},onCollisionStay:function(t){},onCollisionExit:function(t){},initSwimAndDeadAnimationByType:function(t){this.animation=this.node.getComponent(cc.Animation);var e=this.animation.getClips();t=this.fishManager.getTypeFishChange(t);for(var i=0,o=e.length;i<o;i++){var n=e[i]._name;n.indexOf("Fish"+t+"SwimAnimation")>-1?(this.swimAnimation=e[i],this.swimAnimationName=n):n.indexOf("Fish"+t+"DeadAnimation")>-1&&(this.deadAnimation=e[i],this.deadAnimationName=n)}this.playSwimAnimation()},playSwimAnimation:function(){this.animation.play(this.swimAnimationName)},playDeadAnimation:function(){this.animation.play(this.deadAnimationName)},getFishConfigByType:function(t){var e=o.FISHS;for(var i in e)if(e[i].type==t)return e[i]},dead:function(){this.playDeadAnimation(),this.node.runAction(cc.sequence(cc.fadeOut(this.deadAnimation.duration),cc.callFunc(function(){this.node.destroy(),this.fishManager.removeFishInArray(this.Fish.id)},this)))}}),cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig"}],BasePlayer:[function(t,e,i){"use strict";cc._RF.push(e,"05628JT8HZNxqbNGOox9YYg","BasePlayer");var o=t("../../helper/Config"),n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,avatarDefaultSpriteFrame:cc.SpriteFrame,nameLabel:cc.Label,balanceLabel:cc.Label,countDownProgressBar:cc.ProgressBar,splashNode:cc.Node,roomMasterNode:cc.Node,requestLeftRoomNode:cc.Node,chatNode:cc.Node,chatLabel:cc.Label,emotionSprite:cc.Sprite,winNode:cc.Node,winLabel:cc.Label,loseNode:cc.Node,loseLabel:cc.Label,textLightNode:cc.Node,textLightMaskNode:cc.Node,textLightLabel:cc.Label,textDarkNode:cc.Node,textDarkMaskNode:cc.Node,textDarkLabel:cc.Label,betNode:cc.Node,betLabel:cc.Label,betTypeSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,changeBalancePrefab:cc.Prefab,changeBalanceNode:cc.Node,emotionSpriteAtlas:cc.SpriteAtlas},onLoad:function(){this.isCountDown=!1,this.time=0,this.totalTime=0,this.betAmount=0,this.avatar="",this.balance=0,this.name="",this.timeoutChat=null,this.timeoutText=null,this.initBetX=this.betNode.x,this.initBetY=this.betNode.y,this.initEmotionX=this.emotionSprite.node.x,this.initEmotionY=this.emotionSprite.node.y,this.distanceSplash=Math.sqrt(this.splashNode.x*this.splashNode.x+this.splashNode.y*this.splashNode.y),this.textLightLabel.node.scale=.85,this.textDarkLabel.node.scale=.85},onEnable:function(){this.clear(),this.changeBalanceNode.removeAllChildren(!0)},onDisable:function(){this.clearAllTimeout()},update:function(t){if(this.isCountDown){this.time+=t/this.totalTime,this.time>1&&(this.time=1),this.time<0&&(this.time=0);var e=this.getSplashPositionByProgress(this.time);this.splashNode.setPosition(e);var i=this.getSplashRotationByProgress(this.time);this.splashNode.angle=-i,this.countDownProgressBar.progress=this.time}},getSplashPositionByProgress:function(t){var e=this.distanceSplash*Math.cos(2*t*Math.PI+Math.PI/2),i=this.distanceSplash*Math.sin(2*t*Math.PI+Math.PI/2);return new cc.Vec2(e,i)},getSplashRotationByProgress:function(t){return 360*(1-t)},startCountDown:function(t,e){e?(this.countDownProgressBar.node.active=!0,this.splashNode.active=!0,this.isCountDown=!0,this.totalTime=e,this.time=(e-t)/e,this.countDownProgressBar.progress=this.time):this.stopCountDown()},stopCountDown:function(){this.countDownProgressBar.node.active=!1,this.splashNode.active=!1,this.isCountDown=!1,this.time=0,this.totalTime=0,this.countDownProgressBar.progress=0},setBetType:function(t){this.betTypeSprite.spriteFrame=t?this.moneySpriteFrame:this.goldSpriteFrame},setAvatar:function(t){var e=this;this.avatar=t,this.avatarSprite.spriteFrame=this.avatarDefaultSpriteFrame,t&&cc.loader.load(n.convertUrlToLocation(t),function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},showChat:function(t){this.clearChat(),this.node.zIndex=1;var e=this.emotionSpriteAtlas.getSpriteFrame(t);e?this.showChatEmotion(e):this.showChatText(t)},showChatText:function(t){this.chatNode.active=!0,this.chatLabel.string=t,this.timeoutChat=setTimeout(function(){this.clearChat()}.bind(this),1e3*o.CHAT_GAME_TIME_OUT)},showChatEmotion:function(t){this.emotionSprite.node.active=!0,this.emotionSprite.spriteFrame=t,this.timeoutChat=setTimeout(function(){this.clearChat()}.bind(this),1e3*o.CHAT_GAME_TIME_OUT),this.initActionEmotion()},initActionEmotion:function(){this.emotionSprite.node.stopAllActions(),this.emotionSprite.node.setPosition(this.initEmotionX,this.initEmotionY),this.emotionSprite.node.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.5,this.initEmotionX,this.initEmotionY+15),cc.moveTo(.5,this.initEmotionX,this.initEmotionY))))},showChangeBalance:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0!==t){e&&this.changeBalanceNode.removeAllChildren(!0),t>0&&this.changeBalanceNode.removeAllChildren(!0);var i=cc.instantiate(this.changeBalancePrefab),o=95;this.node.x<0&&(o*=-1),i.setPosition(o,45),i.parent=this.changeBalanceNode,i.getComponent("ChangeBalance").showChangeBalance(t)}},setBalance:function(t){this.balance=parseInt(t),this.balanceLabel.string=n.numberWithCommas(this.balance)},showEffectByChangeBalance:function(t){t>0?this.showWinEffect("TH\u1eaeNG"):t<0?this.showLoseEffect("THUA"):this.showLoseEffect("H\xd2A")},showBetNode:function(t){this.betAmount=t,this.betNode.active=!0,this.setBetLabel(t),this.betNode.stopAllActions(),this.betNode.x=this.initBetX,this.betNode.y=this.initBetY-50,this.betNode.opacity=0,this.betNode.runAction(cc.spawn(cc.moveTo(.5,this.initBetX,this.initBetY),cc.fadeIn(.5)))},showBetNodeWithoutAnimation:function(t){this.betNode.stopAllActions(),this.betAmount=t,this.betNode.active=!0,this.setBetLabel(t),this.betNode.x=this.initBetX,this.betNode.y=this.initBetY,this.betNode.opacity=255},hideBetNode:function(){this.betNode.active=!1},setBetLabel:function(t){this.betLabel.string=n.numberWithCommas(t)},setRequestLeftRoom:function(t){this.requestLeftRoomNode.active=t},isRequestLeftRoom:function(){return this.requestLeftRoomNode.active},setRoomMaster:function(t){this.roomMasterNode.active=t},setStatus:function(t){this.nameLabel.string=t},setPlayerName:function(t){this.name=t,this.nameLabel.string=t},resetPlayerName:function(){this.nameLabel.string=this.name},resetPlayerNameWithString:function(t){this.nameLabel.string===t&&(this.nameLabel.string=this.name)},resetPlayerNameExcept:function(t){this.nameLabel.string!==t&&(this.nameLabel.string=this.name)},showWinEffect:function(t){this.winNode.active=!0,this.winLabel.string=t},hideWinEffect:function(){this.winNode.active=!1},showLoseEffect:function(t){this.loseNode.active=!0,this.loseLabel.string=t},hideLoseEffect:function(){this.loseNode.active=!1},hideWinLoseEffect:function(){this.hideWinEffect(),this.hideLoseEffect()},showTextLight:function(t,e,i){clearTimeout(this.timeoutText),this.textLightNode.active=!0,this.textLightLabel.string=t,this.textDarkNode.active=!1,i?(this.textLightMaskNode.active=!1,this.textLightLabel.node.setPosition(i)):(this.textLightMaskNode.active=!0,this.textLightLabel.node.setPosition(0,0)),e&&(this.timeoutText=setTimeout(function(){this.hideText()}.bind(this),3e3))},hideTextLight:function(){this.textLightNode.active=!1,this.textLightLabel.string=""},showTextDark:function(t,e,i){clearTimeout(this.timeoutText),this.textDarkNode.active=!0,this.textDarkLabel.string=t,this.textLightNode.active=!1,i?(this.textDarkMaskNode.active=!1,this.textDarkLabel.node.setPosition(i)):(this.textDarkMaskNode.active=!0,this.textDarkLabel.node.setPosition(0,0)),e&&(this.timeoutText=setTimeout(function(){this.hideText()}.bind(this),3e3))},hideTextDark:function(){this.textDarkNode.active=!1,this.textDarkLabel.string=""},hideText:function(){this.hideTextLight(),this.hideTextDark()},getRemainTimeCountDown:function(){return this.totalTime*(1-this.time)},getTimeCountDown:function(){return this.totalTime},getTotalTimeCountDown:function(){return this.totalTime},clearChat:function(){clearTimeout(this.timeoutChat),this.chatNode.active=!1,this.chatLabel.string="",this.emotionSprite.node.active=!1,this.node.zIndex=0},clearAllTimeout:function(){clearTimeout(this.timeoutChat),clearTimeout(this.timeoutText)},clear:function(){this.clearChat()},reset:function(){this.setRequestLeftRoom(!1),this.stopCountDown(),this.hideWinEffect(),this.hideLoseEffect(),this.hideBetNode(),this.hideText()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],BaseScene:[function(t,e,i){"use strict";cc._RF.push(e,"4ef05L76XtPKIMMElQsq/d3","BaseScene");var o=t("./BaseController");cc.Class({extends:o,properties:{miniGamePrefab:cc.Prefab,miniGameContainerNode:cc.Node},onLoad:function(){this._super(),this.initMiniGame()},initMiniGame:function(){this.sfs&&this.sfs.isConnected()&&this.createMinigameNode()},createMinigameNode:function(){var t=this.getPersistNode();if(t)t.parent=this.miniGameContainerNode,this.MiniGame=t.getComponent("MiniGame"),this.MiniGame.init(this),t.active=!0;else if(!this.MiniGame){var e=cc.instantiate(this.miniGamePrefab);this.MiniGame=e.getComponent("MiniGame"),this.MiniGame.init(this),e.parent=this.miniGameContainerNode}},loadPersistScene:function(t){this.MiniGame&&(this.MiniGame.node.parent=null,cc.game.addPersistRootNode(this.MiniGame.node),this.MiniGame.node.active=!1),cc.director.loadScene(t)},getPersistNode:function(){var t=cc.game._persistRootNodes;for(var e in t)if(t[e].name===this.miniGamePrefab.name)return t[e];return null}}),cc._RF.pop()},{"./BaseController":"BaseController"}],BauCuaBetItem:[function(t,e,i){"use strict";cc._RF.push(e,"b3d57cCitpAPZO4c3/pMfMr","BauCuaBetItem");var o=t("../../../util/FormatUtil"),n=t("../bau-cua/BauCuaConstant");cc.Class({extends:cc.Component,properties:{betLabel:cc.Label,selectedNode:cc.Node},onLoad:function(){},init:function(t,e){this.BauCua=t,this.bet=e,this.betLabel.string=o.nFormatter(e)},getBet:function(){return this.bet},onClick:function(){this.BauCua.BauCuaBet.selectItem(this),this.BauCua.getTempData()[n.BET_VALUE]=this.bet},select:function(){this.selectedNode.active=!0},unSelect:function(){this.selectedNode.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../bau-cua/BauCuaConstant":"BauCuaConstant"}],BauCuaBet:[function(t,e,i){"use strict";cc._RF.push(e,"7f22dSXE3VJU4YTS2BpU3AN","BauCuaBet");var o=t("../item/BauCuaBetItem"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{listBetItems:[o]},init:function(t){for(var e in this.BauCua=t,this.listBetItems)this.listBetItems[e].init(t,n.BAU_CUA_LIST_BET[e]),0==e&&this.selectItem(this.listBetItems[e])},onLoad:function(){},selectItem:function(t){for(var e in this.listBetItems)this.listBetItems[e]===t?(this.selectedItem=t,this.listBetItems[e].select()):this.listBetItems[e].unSelect()},selectItemByBet:function(t){for(var e in this.listBetItems)this.listBetItems[e].getBet()===t?(this.selectedItem=this.listBetItems[e],this.listBetItems[e].select()):this.listBetItems[e].unSelect()},unSelectedAllItem:function(){for(var t in this.listBetItems)this.listBetItems[t].unSelect()},getSelectedItem:function(){return this.selectedItem},getSelectedBet:function(){return this.getSelectedItem().getBet()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../item/BauCuaBetItem":"BauCuaBetItem"}],BauCuaConfig:[function(t,e,i){"use strict";cc._RF.push(e,"99733lvjgRDJJM3lRg8gjMS","BauCuaConfig");e.exports={NUMBER_HISTORY:20,TIME_SHAKE_PLATE:.05,TIME_SHOW_COIN:2.5,DISTANCE_MOVE_BOWL_X:-60,DISTANCE_MOVE_BOWL_Y:-60},cc._RF.pop()},{}],BauCuaConstant:[function(t,e,i){"use strict";cc._RF.push(e,"b1ae7wYgNRKn5+rPD0I//Sd","BauCuaConstant");e.exports={REQUEST_START:"START",REQUEST_FINISH:"FINISH",REQUEST_UPDATE:"UPDATE",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_BET:"BET",REQUEST_CHAT:"CHAT",ADD_EVENT:"hooheyhow.ADD_EVENT",REMOVE_EVENT:"hooheyhow.REMOVE_EVENT",GET_STATE:"hooheyhow.GET_STATE",BET:"hooheyhow.BET",CHAT:"hooheyhow.CHAT",IS_SHOW:"hooheyhow_is_show",IS_SHOW_CHAT:"hooheyhow_is_show_chat",POSITION:"hooheyhow_position",BET_VALUE:"hooheyhow_bet_value",GAME_STATE_WAITTING:0,GAME_STATE_BETTING:1,NUMBER_HISTORY:10,MONEY_TYPE:"hooheyhow_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"hooheyhow.GET_TOP"},cc._RF.pop()},{}],BauCuaHistories:[function(t,e,i){"use strict";cc._RF.push(e,"675166Lm25BrIgpOX47jMQn","BauCuaHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryBauCua(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("BauCuaHistoryItem").init(t[e],e)}}},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],BauCuaHistoryGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"d610fMeOqJIlbKR4ka5yNBy","BauCuaHistoryGameItem"),cc.Class({extends:cc.Component,properties:{item1Sprite:cc.Sprite,item2Sprite:cc.Sprite,item3Sprite:cc.Sprite,itemsSpriteFrame:[cc.SpriteFrame]},onLoad:function(){},init:function(t){this.item1Sprite.spriteFrame=this.getSpriteFrameById(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameById(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameById(t[2])},getSpriteFrameById:function(t){return this.itemsSpriteFrame[t-1]}}),cc._RF.pop()},{}],BauCuaHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a7e0eaKtmNODKoAxP4KzN9Y","BauCuaHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,result1Sprite:cc.Sprite,result2Sprite:cc.Sprite,result3Sprite:cc.Sprite,itemsSpriteFrame:[cc.SpriteFrame],betLabel:cc.Label,getLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_money_bet),this.getLabel.string=o.numberWithCommas(t.total_money_win),this.initResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},initResult:function(t){t=JSON.parse(t),this.result1Sprite.spriteFrame=this.getSpriteFrameByValue(t[0]),this.result2Sprite.spriteFrame=this.getSpriteFrameByValue(t[1]),this.result3Sprite.spriteFrame=this.getSpriteFrameByValue(t[2])},getSpriteFrameByValue:function(t){return this.itemsSpriteFrame[t-1]}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BauCuaHistory:[function(t,e,i){"use strict";cc._RF.push(e,"5db3dm1S39BMrmK0lfma5mK","BauCuaHistory");var o=t("../item/BauCuaNumberItem"),n=t("./BauCuaConstant");cc.Class({extends:cc.Component,properties:{historyGameItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView,listNumberItems:[o]},init:function(t){this.BauCua=t;for(var e=0;e<this.listNumberItems.length;e++)this.listNumberItems[e].init(e+1)},onLoad:function(){},initHistory:function(t){var e=t.list_door,i=t.list_dice;if(e)for(var o in this.listNumberItems)for(var n in e)if(this.listNumberItems[o].getId()==e[n].door_id){this.listNumberItems[o].setNumber(e[n].count);break}if(i)for(var s in this.historyScrollView.content.removeAllChildren(!0),i)this.instanceItem(i[s])},addHistory:function(t){var e=this.historyScrollView.content.getChildren();for(var i in e.length>=n.NUMBER_HISTORY&&e[0].removeFromParent(!0),this.instanceItem(t),this.listNumberItems)for(var o in t)this.listNumberItems[i].getId()==t[o]&&this.listNumberItems[i].addNumber()},instanceItem:function(t){var e=cc.instantiate(this.historyGameItemPrefab);e.parent=this.historyScrollView.content,e.getComponent("BauCuaHistoryGameItem").init(t)}}),cc._RF.pop()},{"../item/BauCuaNumberItem":"BauCuaNumberItem","./BauCuaConstant":"BauCuaConstant"}],BauCuaItem:[function(t,e,i){"use strict";cc._RF.push(e,"a9410f+ZTVO9rFvVwvtS1pK","BauCuaItem");var o=t("../../../object/RoomType"),n=t("../bau-cua/BauCuaConstant"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{totalBetLabel:cc.Label,betLabel:cc.Label,betNode:cc.Node,selectedNode:cc.Node,xLabel:cc.Label,xNode:cc.Node},onLoad:function(){},init:function(t,e){this.BauCua=t,this.id=e},onClick:function(){var t={door_id:this.id,money_type:this.BauCua.isMoneyType?o.MONEY_CODE:o.GOLD_CODE,amount:this.BauCua.BauCuaBet.getSelectedBet()};this.BauCua.sendRequest.sendNoPrefixToZone(n.BET,t)},setTotalBet:function(t){this.totalBetLabel.string=s.nFormatter(t,2)},setBet:function(t){this.betNode.active=0!=t,this.betLabel.string=s.nFormatter(t,2)},isBet:function(){return this.betNode.active},showEffectByNumberWin:function(t){t>0&&(this.showSelect(),this.setX(t))},showSelect:function(){this.selectedNode.active=!0},hideSelect:function(){this.selectedNode.active=!1},setX:function(t){t>1&&(this.xLabel.string="x"+t,this.xNode.active=!0)},getId:function(){return this.id},reset:function(){this.betNode.active=!1,this.totalBetLabel.string=0,this.betLabel.string=0,this.xNode.active=!1,this.hideSelect(!0)}}),cc._RF.pop()},{"../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../bau-cua/BauCuaConstant":"BauCuaConstant"}],BauCuaNumberItem:[function(t,e,i){"use strict";cc._RF.push(e,"266ebZliEpA9Y9e+gbwZC3l","BauCuaNumberItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label},onLoad:function(){},init:function(t){this.id=t},getId:function(){return this.id},setNumber:function(t){this.number=t,this.numberLabel.string=o.numberWithCommas(t)},addNumber:function(){this.number||(this.number=0),this.number=this.number+1,this.numberLabel.string=o.numberWithCommas(this.number)},getNumber:function(){return this.number}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BauCuaPlate:[function(t,e,i){"use strict";cc._RF.push(e,"f0f93JxUVJFW5x3VLNe771T","BauCuaPlate");var o=t("./BauCuaConfig");cc.Class({extends:cc.Component,properties:{bowlNode:cc.Node,xocNode:cc.Node,item1Sprite:cc.Sprite,item2Sprite:cc.Sprite,item3Sprite:cc.Sprite,animation:cc.Animation,listSpriteFrame:[cc.SpriteFrame]},init:function(t){this.BauCua=t},onLoad:function(){this.isOnLoad=!0,this.duration=this.animation.defaultClip.duration,this.bowlInitX=this.bowlNode.x,this.bowlInitY=this.bowlNode.y,this.timeEachShake=o.TIME_SHAKE_PLATE,this.timeShowCoin=o.TIME_SHOW_COIN,this.distanceMoveBowlX=o.DISTANCE_MOVE_BOWL_X,this.distanceMoveBowlY=o.DISTANCE_MOVE_BOWL_Y},onEnable:function(){this.reset()},onDisable:function(){clearTimeout(this.timeoutHideXoc)},shakePlate:function(t){this.reset(),this.node.active=!0,this.item1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2]),this.xocNode.active=!0,this.xocNode.getComponent(cc.Animation).play(),clearTimeout(this.timeoutHideXoc),this.timeoutHideXoc=setTimeout(function(){this.xocNode.active=!1,this.bowlNode.runAction(cc.moveBy(this.timeShowCoin,this.distanceMoveBowlX,this.distanceMoveBowlY))}.bind(this),1e3*this.duration)},shakePlateBNoAnimation:function(t){this.reset(),this.item1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2]),this.isOnLoad?this.bowlNode.setPosition(this.bowlInitX+this.distanceMoveBowlX,this.bowlInitY+this.distanceMoveBowlY):this.bowlNode.setPosition(o.DISTANCE_MOVE_BOWL_X+1,o.DISTANCE_MOVE_BOWL_Y-1)},getSpriteFrameByDice:function(t){return this.listSpriteFrame[t-1]},reset:function(){this.isOnLoad&&(this.bowlNode.stopAllActions(),this.bowlNode.setPosition(this.bowlInitX,this.bowlInitY),this.bowlNode.setPosition(1,-1),this.xocNode.active=!1)}}),cc._RF.pop()},{"./BauCuaConfig":"BauCuaConfig"}],BauCuaRank:[function(t,e,i){"use strict";cc._RF.push(e,"9fd7bashoJAyJOoVlDJlj33","BauCuaRank");t("../../../helper/Config");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../util/FormatUtil"),a=t("../item/JackpotItem");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,loadingNode:cc.Node,currentWeekNode:cc.Node,lastWeekNode:cc.Node,JackpotItem:a,listTopNicknameLabel:[cc.Label],listTopWinLabel:[cc.Label],myWinLabel:[cc.Label],percentLabel:[cc.Label],lastWeekListTopNicknameLabel:[cc.Label],lastWeekListTopWinLabel:[cc.Label],balanceTopWinLabel:[cc.Label],dayLabel:cc.Label,hourLabel:cc.Label,minutesLabel:cc.Label,secondsLabel:cc.Label},init:function(t){this.controller=t},onLoad:function(){this.isMoneyType=!0,this.setTypeRoom(this.isMoneyType),this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset(),this.loadData()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),clearInterval(this.timeInterval),this.removeXhr()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.controller.DialogMessage||!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active},loadData:function(){var t=this;if(this.loadingNode.active=!0,this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.controller.api.getTopWeekBauCua(e,function(e){t.data=e.data,t.initData()},function(e){t.loadingNode.active=!1,t.controller.showDialogMessage(n.BAU_CUA_TOP_WEEK_TITLE,e.msg)})}},initData:function(){if(this.loadingNode.active=!1,this.data){var t=this.isMoneyType?this.data.money:this.data.gold;this.initLastWeekData(t),this.initThisWeekData(t),this.initUserData(this.data.user),this.initTime()}},initLastWeekData:function(t){if(t){var e=t.last_week;if(this.totalAmountLastWeek=0,e)for(var i in e){var o=e[i].door_id-1;this.lastWeekListTopNicknameLabel[o].string=e[i].nick_name,this.lastWeekListTopWinLabel[o].string=s.numberWithCommas(e[i].amount),this.balanceTopWinLabel[o].string=s.numberWithCommas(e[i].top_prize),this.totalAmountLastWeek+=e[i].top_prize}}var n=this.data.pecent_win_week;if(n)for(var a in this.percentLabel)this.percentLabel[a].string=n[a]+"%"},initThisWeekData:function(t){if(t){var e=t.this_week;if(e)for(var i in e){var o=e[i].door_id-1;this.listTopNicknameLabel[o].string=e[i].nick_name,this.listTopWinLabel[o].string=s.numberWithCommas(e[i].amount)}}},initUserData:function(t){var e=this.isMoneyType?t.money:t.gold;for(var i in e)this.myWinLabel[e[i].door_id-1].string=s.numberWithCommas(e[i].amount)},initTime:function(){this.initTimeLabel(),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.data.remain_time--,this.data.remain_time<0&&(this.data.remain_time=604800),this.initTimeLabel()}.bind(this),1e3)},initTimeLabel:function(){var t=this.data.remain_time,e=parseInt(t/86400),i=parseInt((t-86400*e)/3600),o=parseInt((t-86400*e-3600*i)/60),n=parseInt(t-86400*e-3600*i-60*o);this.dayLabel.string=e,this.hourLabel.string=i,this.minutesLabel.string=o,this.secondsLabel.string=n},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},isShowLastWeek:function(){return this.lastWeekNode.active},onCurrentWeekClick:function(){this.currentWeekNode.active=!0,this.lastWeekNode.active=!1,this.titleLabel.string="X\u1ebeP H\u1ea0NG HI\u1ec6N T\u1ea0I",this.initJackpotWithoutAnimation()},onLastWeekClick:function(){this.currentWeekNode.active=!1,this.lastWeekNode.active=!0,this.titleLabel.string="X\u1ebeP H\u1ea0NG TU\u1ea6N TR\u01af\u1edaC",this.JackpotItem.setMoneyWithoutAnimation(this.totalAmountLastWeek)},onTutorialClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(o.BAU_CUA)},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.initInfo()},initJackpotWithoutAnimation:function(){var t=this.controller.MiniGame.BauCua.data;if(t){var e=t.jackpot_gold,i=t.jackpot_money;this.isMoneyType?this.JackpotItem.setMoneyWithoutAnimation(i):this.JackpotItem.setMoneyWithoutAnimation(e)}},initJackpot:function(){var t=this.controller.MiniGame.BauCua.data;if(t){var e=t.jackpot_gold,i=t.jackpot_money;this.isShowLastWeek()||(this.isMoneyType?this.JackpotItem.setMoney(i):this.JackpotItem.setMoney(e))}},initInfo:function(){if(this.resetAllLabel(),this.data){var t=this.isMoneyType?this.data.money:this.data.gold;this.initLastWeekData(t),this.initThisWeekData(t),this.initUserData(this.data.user)}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},reset:function(){this.data=null,this.dayLabel.string="",this.hourLabel.string="",this.minutesLabel.string="",this.secondsLabel.string="",this.resetAllLabel()},resetAllLabel:function(){for(var t in this.listTopNicknameLabel)this.listTopNicknameLabel[t].string="...";for(var t in this.listTopWinLabel)this.listTopWinLabel[t].string=0;for(var t in this.myWinLabel)this.myWinLabel[t].string=0;for(var t in this.lastWeekListTopNicknameLabel)this.lastWeekListTopNicknameLabel[t].string="...";for(var t in this.lastWeekListTopWinLabel)this.lastWeekListTopWinLabel[t].string=0;for(var t in this.percentLabel)this.percentLabel[t].string=""}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../item/JackpotItem":"JackpotItem"}],BauCuaState:[function(t,e,i){"use strict";cc._RF.push(e,"3f9b2/dpS9IELkibc/XPnm2","BauCuaState");var o=t("./BauCuaConstant"),n={currentState:null,BETTING:"BETTING",WAITTING:"WAITTING",setState:function(t){this.currentState=t},setStateById:function(t){switch(t){case o.GAME_STATE_BETTING:this.setBetting();break;case o.GAME_STATE_WAITTING:this.setWaitting()}},setBetting:function(){this.currentState=this.BETTING},setWaitting:function(){this.currentState=this.WAITTING},isBetting:function(){return this.currentState===this.BETTING},isWaitting:function(){return this.currentState===this.WAITTING}};e.exports=n,cc._RF.pop()},{"./BauCuaConstant":"BauCuaConstant"}],BauCuaTime:[function(t,e,i){"use strict";cc._RF.push(e,"c087czN929JypsuHaTnWBxz","BauCuaTime");var o=t("./BauCuaConstant"),n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,timeLabel:cc.Label},init:function(t){this.BauCua=t},onLoad:function(){},onDestroy:function(){clearInterval(this.timeInterval)},initTime:function(t){t&&(t.game_state&&(this.gameState=t.game_state,this.setTitleByGameState(this.gameState)),t.remain_time&&(this.time=t.remain_time,this.setTitleByGameState(this.gameState),this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.setTimeLabel(this.time)}.bind(this),1e3)))},setTitleByGameState:function(t){switch(t){case o.GAME_STATE_WAITTING:this.titleLabel.string=n.BAU_CUA_NEXT_TURN,this.timeLabel.node.color=cc.Color.YELLOW;break;case o.GAME_STATE_BETTING:this.titleLabel.string=n.BAU_CUA_BET,this.timeLabel.node.color=cc.Color.WHITE}},setTimeLabel:function(t){this.timeLabel.string=t}}),cc._RF.pop()},{"../../../helper/Message":"Message","./BauCuaConstant":"BauCuaConstant"}],BauCuaUI:[function(t,e,i){"use strict";cc._RF.push(e,"0600e12BKJI9r73O3dxY76m","BauCuaUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],BauCua:[function(t,e,i){"use strict";cc._RF.push(e,"1a6bdiM3upMELme/iMyUG27","BauCua");var o=t("../../../base/BaseController"),n=t("./BauCuaState"),s=t("./BauCuaConstant"),a=t("./BauCuaHistory"),r=t("./BauCuaTime"),c=t("./BauCuaPlate"),h=t("./BauCuaBet"),l=t("../MiniGameResult"),u=t("../item/BauCuaItem"),d=t("../item/JackpotItem"),m=t("../../../object/RoomType"),p=t("../../../util/FormatUtil"),f=t("../../../helper/Message"),g=t("../../../helper/Constant"),_=t("../../../helper/Config"),S=t("../MiniGameConstant"),C=t("../item/MiniGameXPer");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,toastPrefab:cc.Prefab,JackpotItem:d,listItems:[u],BauCuaTime:r,BauCuaHistory:a,BauCuaPlate:c,BauCuaBet:h,MiniGameResult:l,MiniGameXPer:C},init:function(t){this.controller=t},onLoad:function(){this._super(),this.data=null,this.time=0,this.timeInterval=null,this.resultTimeout=null,this.isMoneyType=!0,this.BauCuaState=n,this.BauCuaTime.init(this),this.BauCuaHistory.init(this),this.BauCuaPlate.init(this),this.BauCuaBet.init(this);for(var t=0;t<this.listItems.length;t++)this.listItems[t].init(this,t+1);this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.initData()},onEnable:function(){this.BauCuaPlate.node.active=!1,this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.reset(),clearInterval(this.timeInterval),clearTimeout(this.resultTimeout),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[s.MONEY_TYPE]===s.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initSaveData:function(){var t=cc.sys.localStorage.getItem(s.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initTempData:function(){var t=this.getTempData()[s.BET_VALUE];t&&this.BauCuaBet.selectItemByBet(t)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_START:this.handleStart(i);break;case s.REQUEST_FINISH:this.handleFinish(i);break;case s.REQUEST_BET:this.handleBet(i);break;case s.REQUEST_UPDATE:this.handleUpdate(i);break;case s.REQUEST_MESSAGE:this.handleMessage(o);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i),this.controller.EventGame&&this.controller.EventGame.initDataTop(i)}},handleInfo:function(t){this.data=t;var e=t.game_state,i=t.spin_id||t.match_game_id,o=t.game_info,n=t.player_info,a=t.total_time;this.BauCuaHistory.initHistory(t),this.BauCuaTime.initTime(t),this.initJackpot(),void 0!==a&&(e=60===a?s.GAME_STATE_BETTING:s.GAME_STATE_WAITTING),void 0!==e&&(this.BauCuaState.setStateById(e),this.BauCuaTime.setTitleByGameState(e)),i&&(this.idLabel.string=String.format(f.MINIGAME_ID,i)),o&&this.setGameInfo(o),n&&this.setPlayerInfo(n)},handleStart:function(t){this.reset(),this.BauCuaState.setBetting(),this.BauCuaTime.initTime(t),this.BauCuaTime.setTitleByGameState(s.GAME_STATE_BETTING),this.idLabel.string=String.format(f.MINIGAME_ID,t.match_game_id)},handleFinish:function(t){this.BauCuaState.setWaitting(),this.BauCuaTime.initTime(t),this.BauCuaTime.setTitleByGameState(s.GAME_STATE_WAITTING),this.BauCuaPlate.shakePlate(t.dice),this.initFinish(t)},initFinish:function(t){clearTimeout(this.resultTimeout),this.resultTimeout=setTimeout(function(){if(t){this.showWinItem(t.dice),this.BauCuaHistory.addHistory(t.dice);var e=t.total_gold_win,i=t.total_money_win,o=this.isMoneyType?i:e,n="";n=o>0?"Th\u1eafng":o<0?"Thua":"H\xf2a",this.isBet()&&this.MiniGameResult.show(o,n)}}.bind(this),5e3)},showWinItem:function(t){for(var e in this.listItems){var i=0;for(var o in t)this.listItems[e].getId()==t[o]&&i++;this.listItems[e].showEffectByNumberWin(i)}},handleUpdate:function(t){if(t){var e=t.game_info;this.setGameInfo(e)}},handleBet:function(t){var e=t.game_info,i=t.player_info;this.setGameInfo(e),this.setPlayerInfo(i)},handleMessage:function(t){this.showMessage(t)},onBauCuaClick:function(){this.setShowBauCua(!this.isShow)},onCloseClick:function(){this.setShowBauCua(!1)},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(g.BAU_CUA)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showBauCuaHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(S.BAU_CUA),this.controller.MiniGame.GameMiniRank.showDialog()},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},onRankWeekClick:function(){this.controller.MiniGame.showBauCuaRankForm()},setGameInfo:function(t){this.gameInfo=t,this.initGameInfo()},initGameInfo:function(){var t=this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE;if(this.gameInfo)for(var e in this.listItems){var i=this.listItems[e].getId(),o=!1;for(var n in this.gameInfo)if(t==this.gameInfo[n].money_type&&i==this.gameInfo[n].door_id){this.listItems[e].setTotalBet(this.gameInfo[n].amount),o=!0;break}o||this.listItems[e].setTotalBet(0)}},initJackpot:function(){if(this.data){var t=this.data.jackpot_gold,e=this.data.jackpot_money;this.isMoneyType?this.JackpotItem.setMoney(e):this.JackpotItem.setMoney(t),this.controller.MiniGame.BauCuaRank.initJackpot()}},setPlayerInfo:function(t){this.playerInfo=t,this.initPlayerInfo()},initPlayerInfo:function(){var t=this.isMoneyType?m.MONEY_CODE:m.GOLD_CODE;if(this.playerInfo)for(var e in this.listItems){var i=this.listItems[e].getId(),o=!1;for(var n in this.playerInfo)if(t==this.playerInfo[n].money_type&&i==this.playerInfo[n].door_id){this.listItems[e].setBet(this.playerInfo[n].amount),o=!0;break}o||this.listItems[e].setBet(0)}},setShowBauCua:function(t){this.node.active=t,this.isShow=t,cc.sys.localStorage.setItem(s.IS_SHOW,this.isShow)},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=_.MINIGAME_SCALE_TOAST,e.setPosition(_.MINIGAME_POSITION_TOAST_X,_.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.initBauCuaData(this.data),this.initGameInfo(),this.initPlayerInfo();var e=this.isMoneyType?s.MONEY_TYPE_MONEY:s.MONEY_TYPE_GOLD;this.getTempData()[s.MONEY_TYPE]=e},initBauCuaData:function(t){if(t){this.data=t;var e=this.isMoneyType?t.money:t.gold;if(e){this.time=t.time_remain;var i=e.tai.total_players,o=e.tai.total_bet,n=e.tai.my_bet,s=e.xiu.total_players,a=e.xiu.total_bet,r=e.xiu.my_bet;this.setTimeLabel(this.data),this.taiTotalLabel.string=p.numberWithCommas(o),this.taiNumberPlayerLabel.string=p.numberWithCommas(i),this.taiMyBetLabel.string=p.numberWithCommas(n),this.xiuTotalLabel.string=p.numberWithCommas(a),this.xiuNumberPlayerLabel.string=p.numberWithCommas(s),this.xiuMyBetLabel.string=p.numberWithCommas(r)}}},isBet:function(){for(var t in this.listItems)if(this.listItems[t].isBet())return!0;return!1},reset:function(){for(var t in this.BauCuaPlate.node.active=!1,this.listItems)this.listItems[t].reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/BauCuaItem":"BauCuaItem","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./BauCuaBet":"BauCuaBet","./BauCuaConstant":"BauCuaConstant","./BauCuaHistory":"BauCuaHistory","./BauCuaPlate":"BauCuaPlate","./BauCuaState":"BauCuaState","./BauCuaTime":"BauCuaTime"}],BetForm:[function(t,e,i){"use strict";cc._RF.push(e,"0fffcu8MKRFwpRw8HhC3gd0","BetForm");var o=t("../../util/FormatUtil"),n=t("../../helper/Config"),s=t("../../object/RoomType");cc.Class({extends:cc.Component,properties:{minValue:0,maxValue:0,round:100,hideWhenClick:!1,balanceSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,balanceLabel:cc.Label,minLabel:cc.Label,maxLabel:cc.Label,formNode:cc.Node,balanceSlider:cc.Slider,backgroundNode:cc.Node},init:function(t){this.controller=t,this.initX=this.node.x,this.initY=this.node.y},onLoad:function(){var t=this;this.onBackgroundTouchDown=function(e){t.hideWhenClick&&t.hideDialog(),e.stopPropagation()},this.onFormTouchDown=function(t){t.stopPropagation()}},onEnable:function(){this.balanceSlider.progress=0,this.setBalanceBuyProgress(),this.setMinValue(this.minValue),this.setMaxValue(this.maxValue),cc.sys.isBrowser&&this.addEventKeyPress(),this.showDialog(),this.enableTouchEvents()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.disableTouchEvents()},enableTouchEvents:function(){this.backgroundNode.on(cc.Node.EventType.TOUCH_START,this.onBackgroundTouchDown,this.backgroundNode),this.formNode.on(cc.Node.EventType.TOUCH_START,this.onFormTouchDown,this.formNode)},disableTouchEvents:function(){this.formNode.off(cc.Node.EventType.TOUCH_START,this.onFormTouchDown,this.formNode)},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.controller.DialogMessage.node.active},setBalanceSpriteByRoomType:function(t){this.balanceSprite.spriteFrame=t==s.GOLD_CODE?this.moneySpriteFrame:this.goldSpriteFrame},setRound:function(t){this.round=t},getRound:function(){return this.round},setMinValue:function(t){this.minValue=t,this.minLabel.string=o.numberWithCommas(t)},setMaxValue:function(t){this.maxValue=t,this.maxLabel.string=o.numberWithCommas(t)},onBalanceSlider:function(){this.setBalanceBuyProgress()},onCancelClick:function(){this.controller.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.getBalanceSlider()},setBalanceBuyProgress:function(){var t=this.getBalanceSlider();this.balanceLabel.string=o.numberWithCommas(t)},getBalanceSlider:function(){var t=this.balanceSlider.progress*(this.maxValue-this.minValue)+this.minValue;return t=t>=this.maxValue?this.maxValue:t<=this.minLabel?this.minValue:Math.ceil(t/this.round)*this.round},setHideWhenClick:function(t){this.hideWhenClick=t},isHideWhenClick:function(){return this.hideWhenClick},showDialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.node.active=!0,t?(this.formNode.stopAllActions(),this.formNode.x=n.BET_FORM_HIDE_X,this.formNode.runAction(cc.moveTo(n.BET_FORM_TIME_SHOW,n.BET_FORM_SHOW_X,0))):this.node.setPosition(this.initX,this.initY)},hideDialog:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.formNode.stopAllActions(),this.formNode.x=n.BET_FORM_SHOW_X,this.formNode.runAction(cc.sequence(cc.moveTo(n.BET_FORM_TIME_SHOW,n.BET_FORM_HIDE_X,0),cc.callFunc(function(){this.node.active=!1},this)))):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil"}],BomConstant:[function(t,e,i){"use strict";cc._RF.push(e,"9ee736D6XpIpq5rlx9ehj22","BomConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"bom.ADD_EVENT",REMOVE_EVENT:"bom.REMOVE_EVENT",SPIN:"bom.SPIN",IS_SHOW:"bom_is_show",POSITION:"bom_position",LIST_LINES:"bom_list",IS_AUTO_SPIN:"bom_auto_spin",BET_VALUE:"bom_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"bom_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"bom.GET_TOP",MINIGAME_CONFIG_ID:47,BOM_LIST_ICON_1:["A","B","C","D","Bom","G"],BOM_LIST_ICON_2:["X2","X3","X5","X10","Bom"],LINE_1:[1,4,7],LINE_2:[1,4,8],LINE_3:[1,4,9],LINE_4:[1,5,7],LINE_5:[1,5,8],LINE_6:[1,5,9],LINE_7:[1,6,7],LINE_8:[1,6,8],LINE_9:[1,6,9],LINE_10:[2,4,7],LINE_11:[2,4,8],LINE_12:[2,4,9],LINE_13:[2,5,7],LINE_14:[2,5,8],LINE_15:[2,5,9],LINE_16:[2,6,7],LINE_17:[2,6,8],LINE_18:[2,6,9],LINE_19:[3,4,7],LINE_20:[3,4,8],LINE_21:[3,4,9],LINE_22:[3,5,7],LINE_23:[3,5,8],LINE_24:[3,5,9],LINE_25:[3,6,7],LINE_26:[3,6,8],LINE_27:[3,6,9]},cc._RF.pop()},{}],BomHistories:[function(t,e,i){"use strict";cc._RF.push(e,"bd38apUJcJN7rEG+2dEG/VD","BomHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyDiamondItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryBom(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyDiamondItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("BomHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],BomHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"29422+5k+JAxJNzYmb56JuL","BomHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_bet_value),this.getLabel.string=o.numberWithCommas(t.total_prize_value),this.resultLabel.string=this.getResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){try{return(t=JSON.parse(t)).length+" d\xf2ng"}catch(t){return"0 d\xf2ng"}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BomItem:[function(t,e,i){"use strict";cc._RF.push(e,"e718aee3qFJ3YqpB96jB7ub","BomItem"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconBomNode:cc.Node,iconGNode:cc.Node,x2SpriteNode:cc.Node,x3SpriteNode:cc.Node,x5SpriteNode:cc.Node,x10SpriteNode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"Bom":this.iconBomNode.active=!0;break;case"G":this.iconGNode.active=!0;break;case"X2":this.x2SpriteNode.active=!0;break;case"X3":this.x3SpriteNode.active=!0;break;case"X5":this.x5SpriteNode.active=!0;break;case"X10":this.x10SpriteNode.active=!0}},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconBomNode.active=!1,this.iconGNode.active=!1,this.x2SpriteNode.active=!1,this.x3SpriteNode.active=!1,this.x5SpriteNode.active=!1,this.x10SpriteNode.active=!1}}),cc._RF.pop()},{}],BomLine:[function(t,e,i){"use strict";cc._RF.push(e,"b012c9RaupJzK4WmXHIWLFj","BomLine");var o=t("./BomConstant");cc.Class({extends:cc.Component,properties:{listLineNode:[cc.Node]},init:function(t){this.Bom=t},onLoad:function(){cc.test=this},showLines:function(t){if(this.reset(),t)for(var e=0,i=t.length;e<i;e++)this.showLineBuyListIndex(t[e].line)},showLine:function(t){},initNumberLine:function(){},getLineData:function(){return[]},select:function(t){},unSelect:function(t){},getlistLineNodes:function(){return[]},showLineBuyListIndex:function(t){switch(JSON.stringify(t)){case JSON.stringify(o.LINE_1):this.listLineNode[0].active=!0;break;case JSON.stringify(o.LINE_2):this.listLineNode[1].active=!0;break;case JSON.stringify(o.LINE_3):this.listLineNode[2].active=!0;break;case JSON.stringify(o.LINE_4):this.listLineNode[3].active=!0;break;case JSON.stringify(o.LINE_5):this.listLineNode[4].active=!0;break;case JSON.stringify(o.LINE_6):this.listLineNode[5].active=!0;break;case JSON.stringify(o.LINE_7):this.listLineNode[6].active=!0;break;case JSON.stringify(o.LINE_8):this.listLineNode[7].active=!0;break;case JSON.stringify(o.LINE_9):this.listLineNode[8].active=!0;break;case JSON.stringify(o.LINE_10):this.listLineNode[9].active=!0;break;case JSON.stringify(o.LINE_11):this.listLineNode[10].active=!0;break;case JSON.stringify(o.LINE_12):this.listLineNode[11].active=!0;break;case JSON.stringify(o.LINE_13):this.listLineNode[12].active=!0;break;case JSON.stringify(o.LINE_14):this.listLineNode[13].active=!0;break;case JSON.stringify(o.LINE_15):this.listLineNode[14].active=!0;break;case JSON.stringify(o.LINE_16):this.listLineNode[15].active=!0;break;case JSON.stringify(o.LINE_17):this.listLineNode[16].active=!0;break;case JSON.stringify(o.LINE_18):this.listLineNode[17].active=!0;break;case JSON.stringify(o.LINE_19):this.listLineNode[18].active=!0;break;case JSON.stringify(o.LINE_20):this.listLineNode[19].active=!0;break;case JSON.stringify(o.LINE_21):this.listLineNode[20].active=!0;break;case JSON.stringify(o.LINE_22):this.listLineNode[21].active=!0;break;case JSON.stringify(o.LINE_23):this.listLineNode[22].active=!0;break;case JSON.stringify(o.LINE_24):this.listLineNode[23].active=!0;break;case JSON.stringify(o.LINE_25):this.listLineNode[24].active=!0;break;case JSON.stringify(o.LINE_26):this.listLineNode[25].active=!0;break;case JSON.stringify(o.LINE_27):this.listLineNode[26].active=!0}},reset:function(){for(var t in this.listLineNode)this.listLineNode[t].active=!1}}),cc._RF.pop()},{"./BomConstant":"BomConstant"}],BomReel2:[function(t,e,i){"use strict";cc._RF.push(e,"ed60c7VJ/pBK67zmXLSaMc6","BomReel2");var o=t("../../../util/RandomUtil"),n=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./BomConstant");cc.Class({extends:cc.Component,properties:{bomItemPrefab:cc.Prefab},init:function(t){this.Bom=t,this.BomUI=t.BomUI,this.BomLine=t.BomLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.bomItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,o,a,r,c,h){this.reset(),this.setChips(this.chips),this.chips=t;for(var l=1;l<e;l++){var u=this.getRandomChip();l===e-1&&(u=t[0]),l===e-2&&(u=t[1]),l===e-3&&(u=t[2]);var d=this.instanceChip(u);d.setPosition(0,(l+1)*n.BOM_DISTANCE_TWO_CHIPS_2),d.parent=this.node}var m=(e-1)*n.BOM_DISTANCE_TWO_CHIPS_2,p=m/n.BOM_SPEED_SPIN_CARD,f=cc.moveTo(p,this.node.x,-m).easing(cc.easeInOut(3)),g=cc.callFunc(function(){this.setChips(t),i&&this.Bom.node.active&&(r===s.WIN_TYPE_JACKPOT||h?this.BomUI.showJackPot(o,c):a&&this.MiniGameResult.show(o),this.BomLine.showLines(a))},this),_=cc.delayTime(n.BOM_DELAY_SPIN),S=cc.callFunc(function(){i&&this.Bom.node.active&&this.Bom.isAutoSpin()&&this.Bom.spin()},this);this.node.runAction(cc.sequence(f,g,_,S)),r!==s.WIN_TYPE_JACKPOT||this.Bom.node.active||(this.Bom.node.active=!0,this.BomUI.showJackPot(o,c))},randomChips:function(){for(var t=[],e=0;e<n.BOM_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=o.getRandomInt(0,a.BOM_LIST_ICON_2.length-1);return a.BOM_LIST_ICON_2[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*n.BOM_DISTANCE_TWO_CHIPS_2),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.bomItemPrefab)),e.getComponent("BomItem").init(t),e.scale=n.BOM_SCALE_CHIP_2,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.BomLine.reset(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./BomConstant":"BomConstant"}],BomReel:[function(t,e,i){"use strict";cc._RF.push(e,"8af8cU7J+xO/rBwhatrasEo","BomReel");var o=t("../../../util/RandomUtil"),n=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./BomConstant");cc.Class({extends:cc.Component,properties:{bomItemPrefab:cc.Prefab},init:function(t){this.Bom=t,this.BomUI=t.BomUI,this.BomLine=t.BomLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.bomItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,o,a,r,c){this.reset(),this.setChips(this.chips),this.chips=t;for(var h=1;h<e;h++){var l=this.getRandomChip();h===e-1&&(l=t[0]),h===e-2&&(l=t[1]),h===e-3&&(l=t[2]);var u=this.instanceChip(l);u.setPosition(0,(h+1)*n.BOM_DISTANCE_TWO_CHIPS),u.parent=this.node}var d=(e-1)*n.BOM_DISTANCE_TWO_CHIPS,m=d/n.BOM_SPEED_SPIN_CARD,p=cc.moveTo(m,this.node.x,-d).easing(cc.easeInOut(3)),f=cc.callFunc(function(){this.setChips(t),i&&this.Bom.node.active&&(r===s.WIN_TYPE_JACKPOT?this.BomUI.showJackPot(o,c):a&&this.MiniGameResult.show(o),this.BomLine.showLines(a))},this),g=cc.delayTime(n.BOM_DELAY_SPIN),_=cc.callFunc(function(){i&&this.Bom.node.active&&this.Bom.isAutoSpin()&&this.Bom.spin()},this);this.node.runAction(cc.sequence(p,f,g,_)),r!==s.WIN_TYPE_JACKPOT||this.Bom.node.active||(this.Bom.node.active=!0,this.BomUI.showJackPot(o,c))},randomChips:function(){for(var t=[],e=0;e<n.BOM_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=o.getRandomInt(0,a.BOM_LIST_ICON_1.length-1);return a.BOM_LIST_ICON_1[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*n.BOM_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.bomItemPrefab)),e.getComponent("BomItem").init(t),e.scale=n.BOM_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.BomLine.reset(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./BomConstant":"BomConstant"}],BomUI:[function(t,e,i){"use strict";cc._RF.push(e,"4e0afj2a3xFEa6BsWR11KzG","BomUI");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOn1Sprite:cc.Sprite,betOn2Sprite:cc.Sprite,betOn3Sprite:cc.Sprite,betMoneySpriteFrame:cc.SpriteFrame,betGoldSpriteFrame:cc.SpriteFrame,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?(this.setBetMoney(),this.betOn1Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn2Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn3Sprite.spriteFrame=this.betMoneySpriteFrame):(this.setBetGold(),this.betOn1Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn2Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn3Sprite.spriteFrame=this.betGoldSpriteFrame)},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetMoney:function(){var t=n.BOM_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=n.BOM_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=o.nFormatter(t),this.bet2Label.string=o.nFormatter(e),this.bet3Label.string=o.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],Bom:[function(t,e,i){"use strict";cc._RF.push(e,"c9cd4UZsRZIsI/isHeRdkZA","Bom");var o=t("../../../base/BaseController"),n=t("./BomLine"),s=t("./BomUI"),a=t("./BomConstant"),r=t("./BomReel"),c=t("./BomReel2"),h=t("../MiniGameResult"),l=t("../item/JackpotItem"),u=t("../../../helper/Config"),d=t("../../../helper/Constant"),m=t("../../../helper/Message"),p=t("../../../object/RoomType"),f=t("../MiniGameConstant"),g=t("../item/MiniGameXPer");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:l,toastPrefab:cc.Prefab,numberLineLabel:cc.Label,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,reels:[r],reels2:[c],BomLine:n,BomUI:s,MiniGameResult:h,MiniGameXPer:g},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.betOrder=1,this.intervalSpin=null,this.reels)this.reels[t].init(this);for(var e in this.reels2)this.reels2[e].init(this);this.BomLine.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(a.ADD_EVENT)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(a.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[a.MONEY_TYPE]===a.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().bom_free,i=t[a.IS_AUTO_SPIN],o=t[a.BET_VALUE];switch(i&&this.onAutoSpinClick(),o){case a.BET_100:this.setBet1();break;case a.BET_1k:this.setBet2();break;case a.BET_10k:this.setBet3();break;default:this.setBet2()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(a.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y);var e=cc.sys.localStorage.getItem(a.LIST_LINES);for(var i in e=e?JSON.parse(e):[1])this.BomLine.select(parseInt(e[i]))},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationBom(!0,e):this.MiniGameCircleNotification.initShowNotificationBom(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationBom(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,o=t[e].quantity;i===a.MINIGAME_CONFIG_ID&&(o>0?this.BomUI.showMiniGameSpinFree(o):this.BomUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case a.REQUEST_INFO:this.handleInfo(i);break;case a.REQUEST_SPIN:this.handleSpin(i);break;case a.REQUEST_MESSAGE:this.handleMessage(o);break;case a.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i),this.controller.EventGame&&this.controller.EventGame.initDataTop(i)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onStopAutoSpinClick()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,o=t.total_prize_value,n=t.win_type,s=t.money_type,a=t.spin_id,r=t.is_jackpot,c=s==p.MONEY_CODE;this.idLabel.string=String.format(m.MINIGAME_ID,a),this.spinReels(i,o,e,n,c,r)},spinReels:function(t,e,i,o,n,s){var a=t.slice(0,3),r=t.slice(3,6),c=t.slice(6,9),h=t.slice(9,12),l=t.slice(12,15);this.reels[0].spin(a,u.BOM_NUMBER_CHIP_SPIN),this.reels[1].spin(r,u.BOM_NUMBER_CHIP_SPIN+3),this.reels[2].spin(c,u.BOM_NUMBER_CHIP_SPIN+6),this.reels2[0].spin(h,u.BOM_NUMBER_CHIP_SPIN+9),this.reels2[1].spin(l,u.BOM_NUMBER_CHIP_SPIN+12,!0,e,i,o,n,s)},onAutoSpinClick:function(){this.autoSpinButtonNode.active=!1,this.stopAutoSpinButtonNode.active=!0,this.spinButtonNode.active=!1,this.getTempData()[a.IS_AUTO_SPIN]=!0,this.spin()},onStopAutoSpinClick:function(){this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.getTempData()[a.IS_AUTO_SPIN]=!1},onSpinClick:function(){this.isSpinning()||this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:p.MONEY_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(a.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(d.BOM)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showBomHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(f.BOM),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowBom(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.BomUI.enableBet1Button(),this.getTempData()[a.BET_VALUE]=a.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.BomUI.enableBet2Button(),this.getTempData()[a.BET_VALUE]=a.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.BomUI.enableBet3Button(),this.getTempData()[a.BET_VALUE]=a.BET_10k},onBomClick:function(){this.setShowBom(!this.isShow)},setShowBom:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().Bom_free;cc.sys.localStorage.setItem(a.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*u.BOM_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=u.MINIGAME_SCALE_TOAST,e.setPosition(u.MINIGAME_POSITION_TOAST_X,u.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.BomUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?a.MONEY_TYPE_MONEY:a.MONEY_TYPE_GOLD;this.getTempData()[a.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?u.BOM_LIST_BET_MONEY:u.BOM_LIST_BET_GOLD)[this.betOrder]},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0},isAutoSpin:function(){return!this.autoSpinButtonNode.active},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},saveListLines:function(){var t=this.BomLine.getListLines();cc.sys.localStorage.setItem(a.LIST_LINES,JSON.stringify(t))},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./BomConstant":"BomConstant","./BomLine":"BomLine","./BomReel":"BomReel","./BomReel2":"BomReel2","./BomUI":"BomUI"}],Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"d53bd4IqhdOH5Pfp+u2XhQR","Bonus");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{titleLabel:cc.Label,moneyNode:cc.Node,moneyLabel:cc.Label,goldNode:cc.Node,goldLabel:cc.Label},init:function(t){this.GameCenter=t},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutStarParticle)},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&(this.node.active=!1);break;case cc.macro.KEY.enter:self.isTop()&&(self.node.active=!1)}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getUser().bonus,e=t.money;t.gold;this.moneyNode.active=e>0,e>0&&(this.node.active=!0,this.moneyLabel.string=o.numberWithCommas(e)),t.name?this.titleLabel.string=t.name.toUpperCase():this.titleLabel.string=""},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getUser().bonus;(t.money>0||t.gold>0)&&(this.node.active=!1),t.money=0,t.gold=0}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],BrowserUtil:[function(t,e,i){"use strict";cc._RF.push(e,"03a19tqNJxC+7c3JPrmjmP3","BrowserUtil");var o={showCursorText:function(){this.isCursorAuto()||this.setCursor("text")},showCursorPointer:function(){this.isCursorAuto()||this.setCursor("pointer")},showCursorMove:function(){this.isCursorAuto()||this.setCursor("move")},showCursorAuto:function(){this.isCursorAuto()||this.setCursor("auto")},showCursorShoot:function(){cc.sys.isBrowser&&(document.getElementById("GameDiv").style.cursor="url('cursors/cursor-shot.png') 5 2, auto")},showCursorAutoForce:function(){cc.sys.isBrowser&&this.setCursor("auto")},isCursorAuto:function(){return!!cc.sys.isBrowser&&"auto"===document.getElementById("GameDiv").style.cursor},setCursor:function(t){cc.sys.isBrowser&&(document.body.style.cursor=t)},showTooltip:function(t){cc.sys.isBrowser&&(document.body.title=t)},focusGame:function(){cc.sys.isBrowser&&document.getElementsByTagName("canvas")[0].focus()},getHTMLElementByEditBox:function(t){return t._impl._elem},checkEditBoxFocus:function(t){return t.isFocused()},focusEditBox:function(t){t._impl._elem.style.display="",t.focus()},unFocusEditBox:function(t){t._impl._editing=!1,t._impl._elem.style.display="none"},readOnlyEditBox:function(t){t.readOnly=!0}};e.exports=o,cc._RF.pop()},{}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"0c84aw/ZftIGrzMpl8dVrvW","Bullet");var o=t("../../helper/FireFishConfig"),n=t("./PlasticityPositionType");function s(t,e,i,s,a,r,c){this.FireFishGame=t,this.FireFishBulletManager=t.bulletManager,this.gameWidth=t.gameNode.width,this.gameHeight=t.gameNode.height,this.bulletPrefab=t.bulletPrefab,this.bulletPool=t.bulletPool,this.currentGun=e-1,this.node=null,this.startX=i,this.startY=s,this.angle=a,this.speed=r,this.idBullet=c,this.width=o.BULLET_WIDTH,this.height=o.BULLET_HEIGHT,this.radius=this.width/2,this.plasticityPositionType=n.NO,this.instanceNode()}s.prototype.isOutOfScreen=function(){return!1},s.prototype.update=function(t){this.instanceNode(),this.node&&this.node._position&&(this.updatePosition(t),this.updateRotate())},s.prototype.instanceNode=function(){this.node||(this.bulletPool.size()>0?this.node=this.bulletPool.get():this.node=cc.instantiate(this.bulletPrefab),this.node.setPosition(this.startX,this.startY),this.ScriptBaseBullet=this.node.getComponent("BaseBullet"),this.ScriptBaseBullet.init(this.FireFishGame,this.currentGun,this),this.ScriptBaseBullet.setBulletCallBackCollision(this.bulletCollision,this),this.node.parent=this.FireFishGame.gamePlayNode)},s.prototype.updatePosition=function(t){this.node.x+=this.speed*Math.cos(this.angle*Math.PI/180)*t*60,this.node.y+=this.speed*Math.sin(this.angle*Math.PI/180)*t*60,this.node.x<-this.gameWidth/2+this.radius&&this.plasticityPositionType!==n.LEFT?this.updatePositionLeft(t):this.node.x>this.gameWidth/2-this.radius&&this.plasticityPositionType!==n.RIGHT?this.updatePositionRight(t):this.node.y<-this.gameHeight/2+this.radius&&this.plasticityPositionType!==n.BOTTOM?this.updatePositionBottom(t):this.node.y>this.gameHeight/2-this.radius&&this.plasticityPositionType!==n.TOP&&this.updatePositionTop(t)},s.prototype.updatePositionLeft=function(t){this.plasticityPositionType=n.LEFT;var e=-this.gameWidth/2+this.radius;this.node.x=2*(e-this.node.x)+this.node.x,this.angle=180-this.angle},s.prototype.updatePositionRight=function(t){this.plasticityPositionType=n.RIGHT;var e=this.gameWidth/2-this.radius;this.node.x=this.node.x-2*(this.node.x-e),this.angle=180-this.angle},s.prototype.updatePositionBottom=function(t){this.plasticityPositionType=n.BOTTOM;var e=-this.gameHeight/2+this.radius;this.node.y=2*(e-this.node.y)+this.node.y,this.angle=-this.angle},s.prototype.updatePositionTop=function(t){this.plasticityPositionType=n.TOP;var e=this.gameHeight/2-this.radius;this.node.y=this.node.y-2*(e-this.node.y),this.angle=-this.angle},s.prototype.updateRotate=function(){this.node.angle=-(90-this.angle)},s.prototype.bulletCollision=function(t){var e=t.node.getComponent("BaseFish"),i="-"+this.FireFishGame.getUser().user_id+"-";this.FireFishGame.fishManager.getFishLock()&&-1!=this.idBullet.indexOf(i)?e.isLockFish()&&this.FireFishBulletManager.destroyBulletWithAnimationByBullet(this):this.FireFishBulletManager.destroyBulletWithAnimationByBullet(this)},s.prototype.getIdBullet=function(){return this.idBullet},s.prototype.destroyNode=function(){this.node&&(this.bulletPool.put(this.node),this.node=null)},e.exports=s,cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig","./PlasticityPositionType":"PlasticityPositionType"}],ButtonHoverScaler:[function(t,e,i){"use strict";cc._RF.push(e,"d8be7q1rtlLh7+9LLkNg4+b","ButtonHoverScaler"),cc.Class({extends:cc.Component,properties:{hoverScale:1,duration:0},onLoad:function(){var t=this;this._initScale=this.node.scale,this._scaleDownAction=cc.scaleTo(this.duration,this.hoverScale),this._scaleUpAction=cc.scaleTo(this.duration,this._initScale),this.onMouseEnter=function(){t.node.stopAllActions(),t.node.runAction(t._scaleDownAction)},this.onMouseLeave=function(){t.node.stopAllActions(),t.node.runAction(t._scaleUpAction)}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouseHover()},onDisable:function(){cc.sys.isBrowser&&(this.node.stopAllActions(),this.node.scale=this._initScale,this.removeEventMouseHover())},addEventMouseHover:function(){this.isValidProperties()&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},removeEventMouseHover:function(){this.isValidProperties()&&(this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},isValidProperties:function(){return this.hoverScale!==this.initScale&&this.duration>0}}),cc._RF.pop()},{}],ButtonHover:[function(t,e,i){"use strict";cc._RF.push(e,"4d0b4loKx1BFrq+hIbYPxOP","ButtonHover");var o=t("../../util/BrowserUtil"),n=cc.Enum({Pointer:-1,Text:-1,Move:-1});cc.Class({extends:cc.Component,properties:{hoverType:{default:n.Pointer,type:n},enable:!0,showAutoWhenDisable:!1},onLoad:function(){var t=this;this._initScale=this.node.scale,this._initColor=this.node.color,this.onMouseEnter=function(){t.enable&&(t.hoverType===n.Pointer?o.showCursorPointer():t.hoverType===n.Text?o.showCursorText():t.hoverType===n.Move&&o.showCursorMove())},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&(this.removeEventMouserHover(),this.showAutoWhenDisable&&o.showCursorAuto());var t=this.node.getComponents(cc.Button);for(var e in t)t[e]._transitionFinished=!0,this.node.scale=this._initScale,this.node.color=this._initColor},setEnable:function(t){this.enable=t},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)}}),cc._RF.pop()},{"../../util/BrowserUtil":"BrowserUtil"}],ButtonShowHide:[function(t,e,i){"use strict";cc._RF.push(e,"c85e1ydlK5I3K/96oAtDf1T","ButtonShowHide"),cc.Class({extends:cc.Component,properties:{onButtonNode:cc.Node,offButtonNode:cc.Node},init:function(t,e){this.controller=t,this.callback=e.bind(t)},onLoad:function(){},onClick:function(){this.callback&&this.callback(this)},hideItemSelect:function(){this.onButtonNode.active=!1,this.offButtonNode.active=!0},showItemSelect:function(){this.onButtonNode.active=!0,this.offButtonNode.active=!1}}),cc._RF.pop()},{}],ButtonTooltip:[function(t,e,i){"use strict";cc._RF.push(e,"22bbf8LoS9Ch5vv1QGF2S3M","ButtonTooltip");var o=t("../../util/BrowserUtil");cc.Class({extends:cc.Component,properties:{tooltipString:{default:"",value:String}},onLoad:function(){var t=this;this.onMouseEnter=function(){o.showTooltip(t.tooltipString)},this.onMouseLeave=function(){o.showTooltip("")}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouseHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouseHover()},addEventMouseHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouseHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)}}),cc._RF.pop()},{"../../util/BrowserUtil":"BrowserUtil"}],BuyInForm:[function(t,e,i){"use strict";cc._RF.push(e,"129ecL1ZzhABL+4baDzczGe","BuyInForm");var o=t("../../util/FormatUtil"),n=t("../../object/RoomType"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{minValue:0,maxValue:0,round:100,balanceSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,balanceLabel:cc.Label,minLabel:cc.Label,maxLabel:cc.Label,autoBuyInToggle:cc.Toggle,balanceSlider:cc.Slider},init:function(t){this.controller=t,this.GameRoom=t.GameRoom},initDataInvite:function(t){this.dataInvite=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.setBalanceBuyProgress(),this.setMinValue(this.minValue),this.setMaxValue(this.maxValue),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active},setBalanceSpriteByRoomType:function(t){this.balanceSprite.spriteFrame=t==n.GOLD_CODE?this.moneySpriteFrame:this.goldSpriteFrame},setInvite:function(t){this.isInvite=t},setRound:function(t){this.round=t},getRound:function(){return this.round},setValue:function(t){var e=0;e=t<=this.minValue?0:t>=this.maxValue?1:(t-this.minValue)/(this.maxValue-this.minValue),this.balanceSlider.progress=e,this.setBalanceBuyProgress()},setMinValue:function(t){this.minValue=t,this.minLabel.string=o.numberWithCommas(t)},setMaxValue:function(t){this.maxValue=t,this.maxLabel.string=o.numberWithCommas(t)},setAutoBuyIn:function(t){this.autoBuyInToggle.isChecked=t},onAutoBuyinToggleClick:function(t){},onBalanceSlider:function(t){this.setBalanceBuyProgress()},onCancelClick:function(){this.controller.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){if(this.controller.Audio.playClick(),this.isInvite){var t={room_name:this.dataInvite.room_name,balance:this.getBalanceSlider(),is_auto_buy_in:this.autoBuyInToggle.isChecked};this.dialogForm.hideDialog(),this.controller.sendRequest.sendNoPrefixToZone(s.REQUEST_ACCEPT_INVITE,t)}else{this.controller.showProcessingNode();var e=this.controller.getLastJoinedRoom().groupId,i=this.getBalanceSlider(),o=this.autoBuyInToggle.isChecked,n=this.GameRoom.getRoomType();this.controller.sfsManager.joinRoom(e,this.GameRoom.minBet,n,i,o)}},setBalanceBuyProgress:function(){var t=this.getBalanceSlider();this.balanceLabel.string=o.numberWithCommas(t)},getBalanceSlider:function(){var t=this.balanceSlider.progress*(this.maxValue-this.minValue)+this.minValue;return t=t>=this.maxValue?this.maxValue:t<=this.minLabel?this.minValue:parseInt(t/this.round)*this.round},isBuyIn:function(){return this.autoBuyInToggle.isChecked},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil"}],Capcha:[function(t,e,i){"use strict";cc._RF.push(e,"bda77nV2SlBM6JyhlVGbMC0","Capcha"),e.exports=function(){for(var t="",e="",i="abcdefghijklmnpqrstuvwxyz123456789",o=0;o<3;o++)t+=i.charAt(Math.floor(Math.random()*i.length));for(var n=0;n<32;n++)e+=i.charAt(Math.floor(Math.random()*i.length));this.text=t,this.result=t,this.device_id=e},cc._RF.pop()},{}],CaptchaForm:[function(t,e,i){"use strict";cc._RF.push(e,"e3bddsSeSFMDYeqdgImdzI9","CaptchaForm");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=(t("../../../helper/Config"),t("../../../lib/md5")),a=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{capchaEditBox:cc.EditBox,captchaSprite:cc.Sprite},init:function(t){this.GameCenter=t},onLoad:function(){},onEnable:function(){this.capchaEditBox.string="",this.GameCenter.initCaptcha()},onResetCaptchaClick:function(){this.GameCenter.initCaptcha()},setCallBack:function(t,e,i){this.callback=t.bind(e),this.data=i},initCaptcha:function(t){this.session_id=t.session_id,this.checksum=t.checksum;var e=t.code,i=o.BASE64_TO_SPRITE+e;a.loadImageBase64(i,this.captchaSprite)},onCloseClick:function(){this.node.active=!1},onSuccessClick:function(){var t=this.capchaEditBox.string.trim();s(t.toUpperCase())!=this.checksum?this.GameCenter.showDialogMessage(n.TITLE_FAILED,"M\xe3 x\xe1c th\u1ef1c kh\xf4ng ch\xednh x\xe1c"):(this.node.active=!1,this.data.session_id=this.session_id,this.data.captcha=t,this.callback(this.data))}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../lib/md5":"md5","../../../util/Util":"Util"}],Card2Controller:[function(t,e,i){"use strict";cc._RF.push(e,"68d1bd38ClEIpurHQKgKfQ3","Card2Controller"),cc.Class({extends:cc.Component,properties:{darkEffectNode:cc.Node,highLightNode:cc.Node,backgroundNode:cc.Node,foregroundNode:cc.Node,cardSprite:cc.Sprite,highLightSprite:cc.Sprite,highLight1SpriteFrame:cc.SpriteFrame,highLight2SpriteFrame:cc.SpriteFrame,highLight3SpriteFrame:cc.SpriteFrame,highLight4SpriteFrame:cc.SpriteFrame,listCardSpriteFrame:[cc.SpriteFrame]},onLoad:function(){},init:function(t){this.trueValue=t.trueValue;var e=4*(t.point-1)+t.suit;this.cardSprite.spriteFrame=this.listCardSpriteFrame[e]},reveal:function(t){this.backgroundNode.active=!t,this.foregroundNode.active=t},isReveal:function(){return this.foregroundNode.active},revealWithAnimationFlip:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.node.scaleX,n=this.node.scaleY;this.reveal(!t),i&&this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(e/2,0,n),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/2,o,n)))},revealWithAnimationFlipMoveScale:function(t,e,i,o,n){this.node.scaleX;var s=this.node.scaleY;this.reveal(!t);var a=cc.spawn(cc.moveTo(e,i,o),cc.sequence(cc.scaleTo(e/4,0,(n+s)/2),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/4,n,n)));this.node.runAction(a,this)},showForeground:function(){this.foregroundNode.active=!0},hideForeground:function(){this.foregroundNode.active=!1},showBackground:function(){this.backgroundNode.active=!0},hideBackground:function(){this.backgroundNode.active=!1},showHighLightBlue:function(){this.highLightSprite.spriteFrame=this.highLight4SpriteFrame,this.showHighLight()},showHighLight:function(){this.highLightNode.active=!0},hideHighLight:function(){this.highLightNode.active=!1},showDarkEffect:function(){this.darkEffectNode.active=!0,this.hideHighLight()},hideDarkEffect:function(){this.darkEffectNode.active=!1},getTrueValue:function(){return this.trueValue}}),cc._RF.pop()},{}],CardController:[function(t,e,i){"use strict";cc._RF.push(e,"69c57HUsUVKCbgJO4A2zOZC","CardController"),cc.Class({extends:cc.Component,properties:{darkEffectNode:cc.Node,highLightNode:cc.Node,backgroundNode:cc.Node,foregroundNode:cc.Node,pointLabel:cc.Label,suiltSprite:cc.Sprite,mainPicSprite:cc.Sprite,highLightSprite:cc.Sprite,highLight1SpriteFrame:cc.SpriteFrame,highLight2SpriteFrame:cc.SpriteFrame,highLight3SpriteFrame:cc.SpriteFrame,highLight4SpriteFrame:cc.SpriteFrame,redColor:cc.Color,blackColor:cc.Color,faces:[cc.SpriteFrame],suiltsBig:[cc.SpriteFrame],suiltsSmall:[cc.SpriteFrame]},onLoad:function(){},init:function(t){var e=t.point>10;this.mainPicSprite.spriteFrame=e?this.faces[t.point-11]:this.suiltsBig[t.suit-1],this.trueValue=t.trueValue,this.pointLabel.string=t.pointName,this.pointLabel.node.color=t.isRedSuit?this.redColor:this.blackColor,this.suiltSprite.spriteFrame=this.suiltsSmall[t.suit-1]},reveal:function(t){this.backgroundNode.active=!t,this.foregroundNode.active=t},isReveal:function(){return this.foregroundNode.active},revealWithAnimationFlip:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.node.scaleX,n=this.node.scaleY;this.reveal(!t),i&&this.node.stopAllActions(),this.node.runAction(cc.sequence(cc.scaleTo(e/2,0,n),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/2,o,n)))},revealWithAnimationFlipMoveScale:function(t,e,i,o,n){this.node.scaleX;var s=this.node.scaleY;this.reveal(!t);var a=cc.spawn(cc.moveTo(e,i,o),cc.sequence(cc.scaleTo(e/4,0,(n+s)/2),cc.callFunc(function(){this.reveal(t)},this),cc.scaleTo(e/4,n,n)));this.node.runAction(a,this)},showForeground:function(){this.foregroundNode.active=!0},hideForeground:function(){this.foregroundNode.active=!1},showBackground:function(){this.backgroundNode.active=!0},hideBackground:function(){this.backgroundNode.active=!1},showHighLightBlue:function(){this.highLightSprite.spriteFrame=this.highLight4SpriteFrame,this.showHighLight()},showHighLight:function(){this.highLightNode.active=!0},hideHighLight:function(){this.highLightNode.active=!1},showDarkEffect:function(){this.darkEffectNode.active=!0,this.hideHighLight()},hideDarkEffect:function(){this.darkEffectNode.active=!1},getTrueValue:function(){return this.trueValue}}),cc._RF.pop()},{}],CardGameValueItem:[function(t,e,i){"use strict";cc._RF.push(e,"bb0fcIemBVM8Jc0HGC8Vg7G","CardGameValueItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardOnButtonNode:cc.Node,cardOffButtonNode:cc.Node,cardOnLabel:cc.Label,cardOffLabel:cc.Label},init:function(t,e){this.GameCenter=t,this.GameRecharge=t.GameRecharge,this.AwardCard=this.GameRecharge.RechargeUseMoney.AwardCard,this.data=e,this.vnd=parseInt(e.vnd),this.money=parseInt(e.money),this.cardOnLabel.string=String.format(n.CARD_VALUE,o.nFormatter(this.vnd)),this.cardOffLabel.string=String.format(n.CARD_VALUE,o.nFormatter(this.vnd))},onLoad:function(){},onClick:function(){this.AwardCard.clearCardSelected(),this.setOn(),this.AwardCard.initTotalMoney()},setOn:function(){this.cardOnButtonNode.active=!0,this.cardOffButtonNode.active=!1},setOff:function(){this.cardOnButtonNode.active=!1,this.cardOffButtonNode.active=!0},isSelected:function(){return this.cardOnButtonNode.active},getValue:function(){return this.vnd},getMoney:function(){return this.money}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],CardUtil:[function(t,e,i){"use strict";cc._RF.push(e,"102e57qSrBCCLOd51UwED01","CardUtil");var o={sortAZ:function(t){for(var e=0,i=t.length-1;e<i;e++)for(var o=e+1,n=t.length;o<n;o++)if(t[e]>t[o]){var s=t[e];t[e]=t[o],t[o]=s}return t},sortList:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[],o=[],n=0,s=(t=this.getValeCard2(t)).length;n<s;n++)e[parseInt(t[n]/100)]+=1;for(var a=1,r=e.length-1;a<r;a++)if(e[a-1]>0&&e[a]>0&&e[a+1]>0){i.push(a-1),i.push(a),e[a-1]-=1,e[a]-=1;for(var c=a+1;c<e.length&&e[c]>0;)i.push(c),e[c]-=1,c++;a-=1}for(var h=0,l=i.length;h<l;h++)if(0!==i[h])for(var u=!1,d=0,m=t.length;d<m;d++)u||i[h]===parseInt(t[d]/100)&&(o.push(t[d]),t[d]=0,u=!0);t=this.sortAZ(t);for(var p=0;p<t.length;p++)0!==t[p]&&o.push(t[p]);if(this.listSave2.length>0)for(var f=0,g=this.listSave2.length;f<g;f++)o.push(this.listSave2[f]);return o},getValeCard2:function(t){this.listSave2=[];for(var e=0,i=t.length;e<i;e++)t[e]>=1500&&(this.listSave2.push(t[e]),t.splice(e,1));return this.listSave2.length>0&&(this.listSave2=this.sortAZ(this.listSave2)),t},sorfCardPlayedInSam:function(t){return this.checkCardA_2(t)?this.sanhA_2(t):this.checkCard2_3(t)?this.sanh2_3(t):this.sortAZ(t)},checkCardA_2:function(t){var e=!1,i=!1;for(var o in t)t[o]>=1400&&t[o]<1500&&(e=!0),t[o]>=1500&&(i=!0);return e&&i},checkCard2_3:function(t){var e=!1,i=!1;for(var o in t)t[o]>=1500&&(e=!0),t[o]<1500&&(i=!0);return i&&e},sanhA_2:function(t){var e=[];for(var i in t)t[i]>=1400&&t[i]<1500&&(e[0]=t[i],t.splice(i,1)),t[i]>=1500&&(e[1]=t[i],t.splice(i,1));for(var o in t=this.sortAZ(t))e.push(t[o]);return e},sanh2_3:function(t){var e=[];for(var i in t)t[i]>=1500&&(e[1]=t[i],t.splice(i,1));for(var o in t=this.sortAZ(t))e.push(t[o]);return e},sortListSam:function(t){var e=this.checkCardQKASAm(t);t=this.removeListCard(t,e);for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=[],n=[],s=0,a=(t=this.convertValueCard(t)).length;s<a;s++)i[parseInt(t[s]/100)]+=1;for(var r=1,c=i.length-1;r<c;r++)if(i[r-1]>0&&i[r]>0&&i[r+1]>0){o.push(r-1),o.push(r),i[r-1]-=1,i[r]-=1;for(var h=r+1;h<i.length&&i[h]>0;)o.push(h),i[h]-=1,h++;r-=1}for(var l=0,u=o.length;l<u;l++)if(0!==o[l])for(var d=!1,m=0,p=t.length;m<p;m++)d||o[l]===parseInt(t[m]/100)&&(n.push(t[m]),t[m]=0,d=!0);for(var f=0,g=(n=this.convertBackValueCard(n)).length;f<g;f++)e.push(n[f]);t=this.convertBackValueCard(t);for(var _=this.checkNgang(t),S=0,C=_.length;S<C;S++)e.push(_[S]);t=this.removeListCard(t,_),t=this.sortAZ(t);for(var N=0;N<t.length;N++)0!==t[N]&&e.push(t[N]);return e},checkCardQKASAm:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[],o=[],n=0,s=t.length;n<s;n++)e[parseInt(t[n]/100)]+=1;for(var a=14;e[a]>0&&e[13]>0&&e[12]>0;){var r=[];r.push(a),r.push(13),e[13]-=1,e[a]-=1;for(var c=12;c>0&&e[c]>0;)r.push(c),e[c]-=1,c--;for(var h=r.length-1;h>=0;h--)i.push(r[h])}for(var l=0,u=i.length;l<u;l++)if(0!==i[l])for(var d=!1,m=0,p=t.length;m<p;m++)d||i[l]===parseInt(t[m]/100)&&(o.push(t[m]),t[m]=0,d=!0);return o},removeListCard:function(t,e){for(var i=0,o=e.length;i<o;i++)for(var n=!1,s=0,a=t.length;s<a;s++)n||e[i]===t[s]&&(t.splice(s,1),n=!0);return t},checkNgang:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[],o=[],n=0,s=t.length;n<s;n++)e[parseInt(t[n]/100)]+=1;for(var a=0,r=e.length;a<r;a++)if(e[a]>=3){for(var c=0;c<e[a];c++)i.push(a);e[a]=0}for(var h=0,l=e.length;h<l;h++)if(e[h]>=2){for(var u=0;u<e[h];u++)i.push(h);e[h]=0}for(var d=0,m=i.length;d<m;d++)if(0!==i[d])for(var p=!1,f=0,g=t.length;f<g;f++)p||i[d]===parseInt(t[f]/100)&&(o.push(t[f]),t[f]=0,p=!0);return o},convertValueCard:function(t){for(var e=0,i=t.length;e<i;e++)t[e]>=1400&&t[e]<1500&&(t[e]=100+t[e]%1400),t[e]>=1500&&(t[e]=200+t[e]%1500);return t},convertBackValueCard:function(t){for(var e=0,i=t.length;e<i;e++)t[e]>=100&&t[e]<200&&(t[e]=1400+t[e]%100),t[e]>=200&&t[e]<300&&(t[e]=1500+t[e]%200);return t}};e.exports=o,cc._RF.pop()},{}],CardValue2Item:[function(t,e,i){"use strict";cc._RF.push(e,"a6ba3sJJYZEv5ijxCB0xUiU","CardValue2Item");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardOnButtonNode:cc.Node,cardOffButtonNode:cc.Node,cardOnLabel:cc.Label,cardOffLabel:cc.Label},init:function(t,e){this.GameCenter=t,this.GameRecharge=t.GameRecharge,this.ShopTopUp=this.GameRecharge.ShopTopUp,this.data=e,this.vnd=parseInt(e.vnd),this.money=parseInt(e.money),this.cardOnLabel.string=String.format(n.CHARGE_CARD_ITEM_VALUE,o.numberWithCommas(this.vnd)),this.cardOffLabel.string=String.format(n.CHARGE_CARD_ITEM_VALUE,o.numberWithCommas(this.vnd))},onLoad:function(){},onClick:function(){this.ShopTopUp.clearCardSelected(),this.setOn(),this.ShopTopUp.initTotalMoney()},setOn:function(){this.cardOnButtonNode.active=!0,this.cardOffButtonNode.active=!1},setOff:function(){this.cardOnButtonNode.active=!1,this.cardOffButtonNode.active=!0},isSelected:function(){return this.cardOnButtonNode.active},getValue:function(){return this.vnd},getMoney:function(){return this.money}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],CardValueItem:[function(t,e,i){"use strict";cc._RF.push(e,"1cf79PQ3bRF44wHd2Ksao+m","CardValueItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardOnButtonNode:cc.Node,cardOffButtonNode:cc.Node,cardOnLabel:cc.Label,cardOffLabel:cc.Label},init:function(t,e){this.GameCenter=t,this.GameRecharge=t.GameRecharge,this.AwardCard=this.GameRecharge.RechargeUseMoney.AwardCard,this.data=e,e.vnd?(this.vnd=parseInt(e.vnd),this.money=parseInt(e.money)):(this.vnd=e,this.money=e*this.getAwardRate()),this.cardOnLabel.string=String.format(n.TOP_UP_ITEM_VALUE,o.nFormatter(this.vnd)),this.cardOffLabel.string=String.format(n.TOP_UP_ITEM_VALUE,o.nFormatter(this.vnd))},onLoad:function(){},onClick:function(){this.AwardCard.clearCardSelected(),this.setOn(),this.AwardCard.initTotalMoney()},setOn:function(){this.cardOnButtonNode.active=!0,this.cardOffButtonNode.active=!1},setOff:function(){this.cardOnButtonNode.active=!1,this.cardOffButtonNode.active=!0},isSelected:function(){return this.cardOnButtonNode.active},getValue:function(){return this.vnd},getMoney:function(){return this.money},getAwardRate:function(){var t=this.GameCenter.getConfig().award_config;return t&&t[0]?t[0].money/t[0].vnd:1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Card:[function(t,e,i){"use strict";cc._RF.push(e,"1b969WHve5B1rO3zNNUlG1L","Card");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t,e){Object.defineProperties(this,{point:{value:t,writable:!1},suit:{value:e,writable:!1},id:{value:13*(e-1)+(t-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return this.suit===o.Spade||this.suit===o.Club}},isRedSuit:{get:function(){return this.suit===o.Heart||this.suit===o.Diamond}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],ChanLeHistoryGame1:[function(t,e,i){"use strict";cc._RF.push(e,"8fa7eLbwftEU6cjPLTTP84S","ChanLeHistoryGame1");var o=t("../../../../util/FormatUtil"),n=t("../TaiXiuConstant");cc.Class({extends:cc.Component,properties:{chanLabel:cc.Label,leLabel:cc.Label,chanLabel2:cc.Label,leLabel2:cc.Label,resultOnButtonNode:cc.Node,resultOffButtonNode:cc.Node,pointOnButtonNode:cc.Node,pointOffButtonNode:cc.Node,history1Node:cc.Node,history2Node:cc.Node,historyLayoutNode:cc.Node,listLayoutNode:[cc.Node],listNodeEclip:[cc.Node],chanleHistoryItem2Prefab:cc.Prefab,chanleHistoryItemPrefab:cc.Prefab},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool,this.pool2=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.chanleHistoryItem2Prefab);this.pool.put(e)}for(var i=0;i<40;i++){var o=cc.instantiate(this.chanleHistoryItemPrefab);this.pool2.put(o)}}},onLoad:function(){this.onResultClick()},onEnable:function(){this.data&&this.initData(this.TaiXiuHistoryGame,this.data)},initData:function(t,e){this.data=e,this.TaiXiuHistoryGame=t,this.TaiXiuHistoryGame.node.active&&(this.initFirst(),this.initTaiXiuHistoryPoint(e),this.initTaiXiuHistory2(e))},onResultClick:function(){this.hideAll(),this.resultOffButtonNode.active=!1,this.resultOnButtonNode.active=!0,this.history2Node.active=!0},onPointClick:function(){this.hideAll(),this.pointOffButtonNode.active=!1,this.pointOnButtonNode.active=!0,this.history1Node.active=!0},initTaiXiuHistoryPoint:function(t){var e=[];(e=t.slice()).length>1&&parseInt(e[0].match_game_id)<parseInt(e[1].match_game_id)&&e.reverse();var i=0,s=0,a=4,r=0,c=void 0,h=[];this.putAllChipToPool();for(var l=0,u=e.length;l<u;l++){var d=this.instanceItem(e[l]);if(0===l)c=d.getComponent("ChanLeHistoryItem2").isChan(),r=0,a=4;else{var m=d.getComponent("ChanLeHistoryItem2").isChan();c===m?--a<0&&(r++,a=4):(a=4,r++),c=m}this.historyLayoutNode.addChild(d),c?i++:s++;var p=r*n.DISTANCE_W_STATISTIC+15,f=a*n.DISTANCE_H_STATISTIC+15;if(d.x=p,d.y=f,this.chanLabel.string=o.numberWithCommas(i),this.leLabel.string=o.numberWithCommas(s),h.push(d),r>=n.MAX_COL)break}for(var g=(n.MAX_COL+1)*n.DISTANCE_H_STATISTIC,_=0,S=h.length;_<S;_++)h[_].x=g-h[_].x;var C=[],N=h[0].getComponent("ChanLeHistoryItem2").isChan();C.push(h[0]);for(var E=1,T=h.length;E<T;E++){if(N!==h[E].getComponent("ChanLeHistoryItem2").isChan())break;C.push(h[E])}if(C.length>1)for(var I=0,v=C.length;I<parseInt(v/2);I++){var y=C[I].y,B=C.length-1-I;C[I].y=C[B].y,C[B].y=y}},initTaiXiuHistory2:function(t){var e=t.slice(),i=0,o=0;this.putAllChipToPool2();var s=[];e.length>n.MAX_TAXIU_2&&(e=e.splice(0,n.MAX_TAXIU_2)),e.length>1&&parseInt(e[0].match_game_id)>parseInt(e[1].match_game_id)&&e.reverse();for(var a=0;a<this.listNodeEclip.length;a++){var r=a+(a+1)*n.DISTANCE_ECLIP_ITEM;if(e[r]){s.push(e[r]);var c=this.instanceItem2(e[r]);this.listNodeEclip[a].addChild(c),c.x=0,c.y=0,this.isChan(e[r].dices)?i++:o++,r===e.length-1&&(c.getComponent("ChanLeHistoryItem").showLight(),this.showLight=!0)}}for(var h=0,l=0;l<e.length;l++)e[l]===s[h]&&(h++,e.splice(l,1),l-=1);h=0;for(var u=0;u<this.listLayoutNode.length;u++)for(var d=0;d<e.length;d++){0!==d&&d%n.DISTANCE_ECLIP_ITEM==0&&u++;var m=this.instanceItem2(e[d]);this.listLayoutNode[u].addChild(m),this.isChan(e[d].dices)?i++:o++,d===e.length-1&&(this.showLight||m.getComponent("ChanLeHistoryItem").showLight(),u=this.listLayoutNode.length)}this.chanLabel2.string=i,this.leLabel2.string=o},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.chanleHistoryItem2Prefab)),e.getComponent("ChanLeHistoryItem2").init(t),e},instanceItem2:function(t){var e=void 0;return this.pool2&&(e=this.pool2.get()),e||(e=cc.instantiate(this.chanleHistoryItemPrefab)),e.getComponent("ChanLeHistoryItem").initData(t),e},putAllChipToPool:function(){if(this.pool){var t=this.historyLayoutNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},putAllChipToPool2:function(){if(this.pool2){for(var t=0;t<this.listLayoutNode.length;t++){var e=this.listLayoutNode[t].getChildren(),i=[];for(var o in e)i.push(e[o]);for(var n in i)this.pool2.put(i[n])}for(var s=0;s<this.listNodeEclip.length;s++){var a=this.listNodeEclip[s].getChildren(),r=[];for(var c in a)r.push(a[c]);for(var h in r)this.pool2.put(r[h])}}},isChan:function(t){var e=0;for(var i in t)e+=t[i];return e%2==0},hideAll:function(){this.resultOffButtonNode.active=!0,this.resultOnButtonNode.active=!1,this.pointOffButtonNode.active=!0,this.pointOnButtonNode.active=!1,this.history1Node.active=!1,this.history2Node.active=!1}}),cc._RF.pop()},{"../../../../util/FormatUtil":"FormatUtil","../TaiXiuConstant":"TaiXiuConstant"}],ChanLeHistoryItem2:[function(t,e,i){"use strict";cc._RF.push(e,"01815XhQjdEMps93FKp4Yy7","ChanLeHistoryItem2"),cc.Class({extends:cc.Component,properties:{chanLabel:cc.Label,leLabel:cc.Label,bgSprite:cc.Sprite,chanSpriteFrame:cc.SpriteFrame,leSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t){this.data=t;var e=t.dices;for(var i in this.sum=0,e)this.sum+=e[i];this.chanLabel.string=this.sum,this.leLabel.string=this.sum,this.isChan()?(this.chanLabel.node.active=!0,this.leLabel.node.active=!1,this.bgSprite.spriteFrame=this.chanSpriteFrame):(this.chanLabel.node.active=!1,this.leLabel.node.active=!0,this.bgSprite.spriteFrame=this.leSpriteFrame)},isChan:function(){return this.sum%2==0}}),cc._RF.pop()},{}],ChanLeHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a674bTtgLpKsonbu359vSrG","ChanLeHistoryItem");t("../TaiXiuConstant");cc.Class({extends:cc.Component,properties:{itemSprite:cc.Sprite,chanSpriteFrame:cc.SpriteFrame,leSpriteFrame:cc.SpriteFrame,selectedNode:cc.Node,animationNode:cc.Node},init:function(t){this.ChanLe=t,this.TaiXiu=t.TaiXiu,this.ChanLeHistory=t.ChanLeHistory},onLoad:function(){var t=this;this.onMouseEnter=function(){t.ChanLeHistory&&t.ChanLeHistory.showGameHint(t)},this.onMouseLeave=function(){t.ChanLeHistory&&t.ChanLeHistory.hideGameHint()},this.node.getComponent("ButtonHover")&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onEnable:function(){this.ChanLe&&this.ChanLe.node.active&&this.selectedNode.active&&this.animationNode.getComponent(cc.Animation).play()},onDisable:function(){this.ChanLe&&this.selectedNode.active&&this.animationNode.getComponent(cc.Animation).stop(),this.animationNode.y=0},initData:function(t){this.hideSelectNode(),this.data=t;var e=t.dices;for(var i in this.sum=0,e)this.sum+=e[i];this.itemSprite.spriteFrame=this.sum%2==0?this.chanSpriteFrame:this.leSpriteFrame,this.selectedNode.active=!1,this.animationNode.y=0},showSelectedNode:function(){this.ChanLe&&this.ChanLe.node.active&&this.animationNode.getComponent(cc.Animation).play(),this.selectedNode.active=!0},hideSelectNode:function(){this.ChanLe&&this.ChanLe.node.active&&this.animationNode.getComponent(cc.Animation).stop(),this.selectedNode.active=!1},hideLight:function(){this.selectedNode.active=!1},showLight:function(){this.selectedNode.active=!0},getData:function(){return this.data},onClick:function(){this.TaiXiu&&this.TaiXiu.controller.MiniGame.TaiXiuDetail.showDetail(this.data.match_game_id,this.TaiXiu.isMoneyType)}}),cc._RF.pop()},{"../TaiXiuConstant":"TaiXiuConstant"}],ChanLeHistory:[function(t,e,i){"use strict";cc._RF.push(e,"b42deuvZUZIO49Kaj87CwTo","ChanLeHistory");var o=t("../TaiXiuConstant"),n=t("./ChanLeHistoryItem");cc.Class({extends:cc.Component,properties:{historyItemPrefab:cc.Prefab,historyLayout:cc.Node,historyHintNode:cc.Node,historyHintLabel:cc.Label,listHistoryItem:[n]},init:function(t){for(var e in this.ChanLe=t,this.listHistoryItem)this.listHistoryItem[e].init(t)},onLoad:function(){},initHistories:function(t){for(var e=t.length>o.NUMBER_HISTORY?o.NUMBER_HISTORY:t.length,i=0;i<this.listHistoryItem.length;i++)i<e?(this.listHistoryItem[i].node.active=!0,this.listHistoryItem[i].initData(t[i]),0==i&&this.listHistoryItem[i].showSelectedNode()):this.listHistoryItem[i].node.active=!1},showGameHint:function(t){if(t.getData()){this.historyHintNode.active=!0;for(var e=0,i=t.getData().dices,o=0,n=i.length;o<n;o++)e+=i[o];var s=e%2==0?"CH\u1eb4N: ":"L\u1eba: ";this.historyHintLabel.string=s+t.getData().dices.join("-");var a=this.historyHintNode.parent.convertToWorldSpaceAR(this.historyHintNode),r=t.node.convertToNodeSpaceAR(a);this.historyHintNode.x-=r.x}},stopAllAnimationHistory:function(){for(var t in this.listHistoryItem)this.listHistoryItem[t].onDisable()},hideGameHint:function(){this.historyHintNode.active=!1,this.historyHintLabel.string=""}}),cc._RF.pop()},{"../TaiXiuConstant":"TaiXiuConstant","./ChanLeHistoryItem":"ChanLeHistoryItem"}],ChanLe:[function(t,e,i){"use strict";cc._RF.push(e,"928af72C6RAprzG1iuUdR8x","ChanLe");var o=t("../../../../helper/Message"),n=t("../../../../helper/Constant"),s=t("../../../../util/FormatUtil"),a=t("../../../../helper/Config"),r=t("../../../../util/BrowserUtil"),c=t("./ChanLeHistory");cc.Class({extends:cc.Component,properties:{chainWinLabel:cc.Label,chainLoseLabel:cc.Label,currentChainWinLabel:cc.Label,currentChainLoseLabel:cc.Label,chanNumberPlayerLabel:cc.Label,chanTotalLabel:cc.Label,chanMyBetLabel:cc.Label,chanEditBox:cc.EditBox,leNumberPlayerLabel:cc.Label,leTotalLabel:cc.Label,leMyBetLabel:cc.Label,leEditBox:cc.EditBox,chanBetNodeSprite:cc.Sprite,leBetNodeSprite:cc.Sprite,onBetTaiXiuSpriteFrame:cc.SpriteFrame,offBetTaiXiuSpriteFrame:cc.SpriteFrame,chanAnimationNode:cc.Node,leAnimationNode:cc.Node,sumResultNode:cc.Node,sumResultLabel:cc.Label,ChanLeHistory:c},init:function(t){this.TaiXiu=t,this.ChanLeHistory.init(this)},onLoad:function(){this.editboxs=[this.chanEditBox,this.leEditBox]},onEnable:function(){cc.sys.isBrowser&&(this.addEventKeyPress(),this.TaiXiu.removeEventKeyPress())},onDisable:function(){cc.sys.isBrowser&&(this.removeEventKeyPress(),this.TaiXiu.addEventKeyPress())},addEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){r.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){r.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}},keyHandle:function(t){return t.keyCode==n.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ENTER_KEY?(r.focusGame(),this.onBetClick(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(r.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),r.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&r.focusEditBox(this.editboxs[0])}},initChain:function(){var t=this.getData();if(t){var e=t.chan_le_chain_lose,i=t.chan_le_chain_win,n=t.chan_le_current_chain_win,s=t.chan_le_current_chain_lose;this.chainWinLabel.string=String.format(o.TAIXIU_CHAIN_WIN,n),this.chainLoseLabel.string=String.format(o.TAIXIU_CHAIN_LOSE,s),this.currentChainWinLabel.string=String.format(o.TAIXIU_CURRENT_CHAIN_WIN,i),this.currentChainLoseLabel.string=String.format(o.TAIXIU_CURRENT_CHAIN_LOSE,e)}},initBetDataByData:function(t){var e=t.chan,i=t.le,o=e.total_players,n=e.total_bet,a=e.my_bet,r=i.total_players,c=i.total_bet,h=i.my_bet;this.chanTotalLabel.string=s.numberWithCommas(n),this.chanNumberPlayerLabel.string="("+s.numberWithCommas(o)+")",this.chanMyBetLabel.string=s.numberWithCommas(a),this.leTotalLabel.string=s.numberWithCommas(c),this.leNumberPlayerLabel.string="("+s.numberWithCommas(r)+")",this.leMyBetLabel.string=s.numberWithCommas(h)},showEffectChanLeResult:function(t){this.chanAnimationNode.active=!1,this.leAnimationNode.active=!1,this.sumResultNode.active=!0;for(var e=0,i=0,o=t.length;i<o;i++)e+=t[i];e%2==0?this.chanAnimationNode.active=!0:this.leAnimationNode.active=!0,this.sumResultLabel.string=e},onChanEditBoxBegan:function(){this.TaiXiu.TaiXiuQuickSelect.node.active=!0,this.leEditBox.string="",this.TaiXiu.taiEditBox.string="",this.TaiXiu.xiuEditBox.string="",this.isSelectChan=!0,this.showBetChanNode()},onChanEditBoxEnd:function(){this.hideBetChanNode()},onLeEditBoxBegan:function(){this.TaiXiu.TaiXiuQuickSelect.node.active=!0,this.chanEditBox.string="",this.TaiXiu.taiEditBox.string="",this.TaiXiu.xiuEditBox.string="",this.isSelectChan=!1,this.showBetLeNode()},onLeEditBoxEnd:function(){this.hideBetLeNode()},onEditBoxChange:function(){var t=this.chanEditBox.string,e=this.leEditBox.string,i=s.numberWithCommas(s.getOnlyNumberInString(t)),o=s.numberWithCommas(s.getOnlyNumberInString(e));this.chanEditBox.string=0==i?"":i,this.leEditBox.string=0==o?"":o},setChan:function(t){s.numberWithCommas(t).length<=a.TAI_XIU_MAX_LENGTH&&(this.chanEditBox.string=s.numberWithCommas(t))},getChanValue:function(){return parseInt(s.getOnlyNumberInString(this.chanEditBox.string))||0},setLe:function(t){s.numberWithCommas(t).length<=a.TAI_XIU_MAX_LENGTH&&(this.leEditBox.string=s.numberWithCommas(t))},getLeValue:function(){return parseInt(s.getOnlyNumberInString(this.leEditBox.string))||0},getData:function(){return this.TaiXiu.getTaiXiuData()},showBetChanNode:function(){},showBetLeNode:function(){},hideBetChanNode:function(){},hideBetLeNode:function(){},resetEditBox:function(){this.chanEditBox.string="",this.leEditBox.string="",this.TaiXiu.taiEditBox.string="",this.TaiXiu.xiuEditBox.string=""},hide:function(){this.sumResultNode.active=!1,this.chanAnimationNode.active=!1,this.leAnimationNode.active=!1},reset:function(){this.chanTotalLabel.string=s.numberWithCommas(0),this.chanNumberPlayerLabel.string="("+s.numberWithCommas(0)+")",this.chanMyBetLabel.string=s.numberWithCommas(0),this.leTotalLabel.string=s.numberWithCommas(0),this.leNumberPlayerLabel.string="("+s.numberWithCommas(0)+")",this.leMyBetLabel.string=s.numberWithCommas(0)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../helper/Message":"Message","../../../../util/BrowserUtil":"BrowserUtil","../../../../util/FormatUtil":"FormatUtil","./ChanLeHistory":"ChanLeHistory"}],ChangeBalance:[function(t,e,i){"use strict";cc._RF.push(e,"539d4zOzZFE+bKPzJ4uzg7+","ChangeBalance");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{addBalanceLabel:cc.Label,minusBalanceLabel:cc.Label},onLoad:function(){},showChangeBalance:function(t){var e=t>0?"+"+o.numberWithCommas(t):o.numberWithCommas(t);t>=0?(this.addBalanceLabel.string=e,this.addBalanceLabel.node.active=!0,this.minusBalanceLabel.node.active=!1):(this.minusBalanceLabel.string=e,this.minusBalanceLabel.node.active=!0,this.addBalanceLabel.node.active=!1),this.node.runAction(cc.sequence(cc.spawn(cc.moveBy(2,0,50),cc.fadeOut(3)),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],ChangePasswordSuccess:[function(t,e,i){"use strict";cc._RF.push(e,"9bc5bjvHolAPL5/9X13V01S","ChangePasswordSuccess"),cc.Class({extends:cc.Component,init:function(t){this.GameCenter=t},properties:{},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},onDestroy:function(){clearTimeout(this.hideTimeout)},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.enter:this.isTop()&&this.onConfirmLogoutClick()}},onConfirmLogoutClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.showProcessingNode(),this.logout()},logout:function(){var t={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.logout(t,function(t){},function(t){}),this.GameCenter.sfsManager&&this.GameCenter.sfsManager.sfs.disconnect()}}),cc._RF.pop()},{}],ChangePassword:[function(t,e,i){"use strict";cc._RF.push(e,"5243d1HGEdHUoCE0XBKEnnB","ChangePassword");var o=t("../../../util/BrowserUtil"),n=(t("../../../object/Capcha"),t("../../../helper/Message")),s=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{oldPasswordEditBox:cc.EditBox,newPasswordEditBox:cc.EditBox,reNewPasswordEditBox:cc.EditBox,otpEditbox:cc.EditBox,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.oldPasswordEditBox,this.newPasswordEditBox,this.reNewPasswordEditBox,this.otpEditbox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===s.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ESC_KEY?(this.node.active=!1,t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},onConfirmClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.oldPasswordEditBox.string,i=this.newPasswordEditBox.string,o=this.reNewPasswordEditBox.string,s=this.otpEditbox.string;if(this.checkAllEditboxNotEmpty())if(i===o){var a={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),old_pass:e,new_pass:i,otp:s};this.GameCenter.api.changePassword(a,function(e){t.clear(),t.GameCenter.hideProcessingNode(),t.GameCenterUI.showChangePasswordSuccessFormNode()},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.CHANGE_PASSWORD_TITLE,e.msg)})}else this.GameCenter.showDialogMessage(n.CHANGE_PASSWORD_TITLE,n.CHANGE_PASSWORD_RE_PASSWORD_NOT_CORRECT);else this.GameCenter.showDialogMessage(n.CHANGE_PASSWORD_TITLE,n.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},initCapcha:function(){},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/Capcha":"Capcha","../../../util/BrowserUtil":"BrowserUtil"}],ChatEvent:[function(t,e,i){"use strict";cc._RF.push(e,"3a261F6t49NIohpScnpjYIf","ChatEvent");var o=t("./Chat"),n=t("./SmallBanner");cc.Class({extends:cc.Component,properties:{Chat:o,SmallBanner:n,chatButtonNode:cc.Node,smallBannerButtonNode:cc.Node},onLoad:function(){},init:function(t){this.GameCenter=t,this.Chat.init(t),this.SmallBanner.init(t)},onChatClick:function(){this.Chat.node.active||this.showChat()},initLoginSuccess:function(){this.showSmallBanner()},onSmallBannerClick:function(){this.SmallBanner.node.active||this.showSmallBanner()},showChat:function(){this.Chat.node.active=!0,this.SmallBanner.node.active=!1,this.chatButtonNode.active=!1,this.smallBannerButtonNode.active=!0},showSmallBanner:function(){this.Chat.node.active=!1,this.SmallBanner.node.active=!0,this.chatButtonNode.active=!0,this.smallBannerButtonNode.active=!1},showButtons:function(){this.showSmallBanner()}}),cc._RF.pop()},{"./Chat":"Chat","./SmallBanner":"SmallBanner"}],ChatGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"b2c12vqej9MEIaeclZpm/lN","ChatGameItem");var o=t("../../helper/Message"),n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{messageRichText:cc.RichText},onLoad:function(){},init:function(t,e){this.setMessage(t,e)},setMessage:function(t,e){e=n.formatMessage(e),this.messageRichText.string=String.format(o.CHAT_GAME_MESSAGE,t,e)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],ChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"81321RgoCFF5Z7R7efL4I57","ChatItem");var o=t("../../helper/Message"),n=t("../../util/FormatUtil"),s=t("../../util/Util");cc.Class({extends:cc.Component,properties:{messageRichText:cc.RichText,nameLabel:cc.Label,messageLabel:cc.Label},onLoad:function(){},init:function(t){if(t.nick_name){this.messageLabel.node.active=!0,this.messageRichText.node.active=!1,this.nameLabel.string=s.getServerID(t.server_id)+t.nick_name+":",this.nameLabel._updateRenderData(!0);for(var e=this.nameLabel.node.width,i=Math.floor(e/4.5)+2,o=n.formatMessage(t.message||t.msg),a=0;a<i;a++)o=" "+o;this.messageLabel.string=o,this.messageLabel._updateRenderData(!0),this.node.height=this.messageLabel.node.height,this.checkIsAgent(t.nick_name)&&(this.nameLabel.node.color=cc.Color.YELLOW)}else this.node.active=!1},initFail:function(t){this.setMessageFail(t)},setMessageFail:function(t){this.messageLabel.node.active=!1,this.messageRichText.string=String.format(o.CHAT_MESSAGE_FAIL,t)},checkIsAgent:function(t){var e=cc.S.list_agent;if(e)for(var i=0;i<e.length;i++)if(t===e[i].nick_name)return!0;return!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Chat:[function(t,e,i){"use strict";cc._RF.push(e,"cd3acijzrZGzrkGqSRbu8qE","Chat");var o=t("../../../util/BrowserUtil"),n=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{chatEditBox:cc.EditBox,chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){this.editboxs=[this.chatEditBox]},start:function(){this.GameCenter.sendRequest.sendNoPrefixToZone("CHAT."+n.REQUEST_CHAT_GET_CHAT)},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(),this.number++},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.enter:this.isTop()&&this.focusChatEditBox()}},keyHandle:function(t){return t.keyCode===n.TAB_KEY?(t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ENTER_KEY?(o.focusGame(),this.onChatClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ESC_KEY?(this.unFocusChatEditBox(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},initChat:function(t){t&&(this.instanceChatItem(t),this.scrollToBottom())},addChatFail:function(t){this.instanceChatItem(t,!0),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},addChat:function(t){this.instanceChatItem(t),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},instanceChatItem:function(t,e){if(e)this.createChatItem(t,e);else if(Array.isArray(t))for(var i=0;i<t.length;i++)this.createChatItem(t[i],e);else this.createChatItem(t,e)},createChatItem:function(t,e){var i=cc.instantiate(this.chatItemPrefab);e?i.getComponent("ChatItem").initFail(t):i.getComponent("ChatItem").init(t),this.chatScrollView.content.addChild(i)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=50},scrollToBottom:function(){this.number=0},onChatClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(this.unFocusChatEditBox(),""!==t.trim()){var e={msg:t};this.chatEditBox.string="",o.focusGame(),this.focusChatEditBox(),this.GameCenter.sendRequest.sendNoPrefixToZone("CHAT."+n.REQUEST_CHAT_SEND_CHAT,e)}else o.focusGame()},focusChatEditBox:function(){o.focusEditBox(this.chatEditBox)},unFocusChatEditBox:function(){o.unFocusEditBox(this.chatEditBox)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/BrowserUtil":"BrowserUtil"}],Chip:[function(t,e,i){"use strict";cc._RF.push(e,"6e4b3qjhMxK8LB41nT7AiZz","Chip"),cc.Class({extends:cc.Component,properties:{chipSprite:cc.Sprite,chipSpriteFrames:[cc.SpriteFrame]},onLoad:function(){},init:function(t){this.chipSprite.spriteFrame=this.chipSpriteFrames[t]}}),cc._RF.pop()},{}],Clipboard:[function(t,e,i){"use strict";cc._RF.push(e,"0efe0yN/z5HNbR8OIYHTWtp","Clipboard"),window.Clipboard=function(t,e,i){var o;function n(t){(o=e.createElement("textArea")).value=t,e.body.appendChild(o)}function s(){var n,s;i.userAgent.match(/ipad|iphone/i)?((n=e.createRange()).selectNodeContents(o),(s=t.getSelection()).removeAllRanges(),s.addRange(n),o.setSelectionRange(0,999999)):o.select()}return{copy:function(t){n(t),s(),e.execCommand("copy"),e.body.removeChild(o)}}}(window,document,navigator),cc._RF.pop()},{}],CompareType:[function(t,e,i){"use strict";cc._RF.push(e,"5a971MjFeBBPqi1AXeAqlO9","CompareType");var o=cc.Enum({KHONG_HOP_LE:1,LON_HON:2,BANG_NHAU:3,NHO_HON:4});e.exports=o,cc._RF.pop()},{}],Config:[function(t,e,i){"use strict";cc._RF.push(e,"9fba5O+YeZBBrO8olQOatoZ","Config");e.exports={CANVAS_WIDTH:1920,CANVAS_HEIGHT:1080,GAME_WIDTH:1280,GAME_HEIGHT:720,TIME_SAVE_ACCOUNT:300,PROCESSING_TIME_OUT:30,TOAST_TIME_OUT:2,SPEED_MOVE_NEWS:125,DISTANCE_TWO_NEWS:75,NEWS_MAX:10,MAX_LENGTH_CONTENT:30,BET_FORM_SHOW_X:-145,BET_FORM_HIDE_X:0,BET_FORM_TIME_SHOW:.2,MAIL_PAGINATION:10,HISTORY_PAGINATION:10,BANNER_TIME_CHANGE:5,BANNER_TIME_FADE:1,TOGGLE_DISTANCE_X:27.5,TOGGLE_TIME_ANIMATION:.2,CHAT_GAME_TIME_OUT:5,CHANGE_BALANCE_TIME_OUT:5,GAME_BUTTON_HISTORY_CHAT_SHOW_Y:470,GAME_BUTTON_HISTORY_CHAT_HIDE_Y:40,WIN_EFFECT_TIME_OUT:5,SAFE_MAX_LENGTH:12,SLOT_NUMBER_ITEM_IN_REEL:3,SLOT_NUMBER_REELS:5,SLOT_NUMBER_TYPE_ITEM:11,SLOT_DISTANCE_TWO_ITEMS:156,SLOT_SPEED_SPIN:750,SLOT_DELAY_SPIN:2,SLOT_DELAY_FINISH_1:3.5,SLOT_DELAY_FINISH_2:7.5,SLOT_NUMBER_LINES:20,SLOT_BETS:[100,1e3,1e4],SLOT_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT_BONUS_TIME_FLIP_CARD:.4,SLOT2_DISTANCE_TWO_ITEMS:96,SLOT2_NUMBER_TYPE_ITEM:7,SLOT2_NUMBER_ITEM_IN_REEL:3,SLOT2_NUMBER_REELS:5,SLOT2_BET_ALIBABA:100,SLOT2_BET_ALADIN:1e3,SLOT2_BET_SINBAD:1e4,SLOT2_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT2_DELAY_FINISH_1:3.5,SLOT2_TIME_OPEN_BOX:.5,SLOT2_TIME_FIRST_OPEN_EGGE:1.5,SLOT2_TIME_OPEN_EGGE:.5,SLOT2_TIME_DELAY_OPEN_EGGE:.75,SLOT2_TIME_OPEN_ALL_EGGE:2,SLOT2_DELAY_FINISH_2:5,SLOT2_DELAY_FINISH_3:3.5,SLOT2_TIME_SPIN:3,SLOT3_DISTANCE_TWO_ITEMS:136,SLOT3_NUMBER_TYPE_ITEM:7,SLOT3_NUMBER_ITEM_IN_REEL:3,SLOT3_NUMBER_REELS:5,SLOT3_BET_ALIBABA:100,SLOT3_BET_ALADIN:1e3,SLOT3_BET_SINBAD:1e4,SLOT3_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT3_DELAY_FINISH_1:3.5,SLOT3_TIME_OPEN_BOX:.5,SLOT3_TIME_FIRST_OPEN_EGGE:1.5,SLOT3_TIME_OPEN_EGGE:.5,SLOT3_TIME_DELAY_OPEN_EGGE:.75,SLOT3_TIME_OPEN_ALL_EGGE:2,SLOT3_DELAY_FINISH_2:5,SLOT3_DELAY_FINISH_3:3.5,SLOT3_TIME_SPIN:3,MINIGAME_TIME_SHOW:.3,MINIGAME_SCALE_TOAST:.8,MINIGAME_POSITION_TOAST_X:0,MINIGAME_POSITION_TOAST_Y:-50,TAI_XIU_TIME_POSITION_X_BIG:215,TAI_XIU_TIME_POSITION_Y_BIG:85,TAI_XIU_TIME_POSITION_X_SMALL:75,TAI_XIU_TIME_POSITION_Y_SMALL:40,TAI_XIU_MIN_BALANCE_CHAT:1e3,TAI_XIU_NUMBER_HISTORY:120,TAI_XIU_NUMBER_DETAIL:8,JACKPOT_TIME_SHOW:.2,JACKPOT_EFFECT_SHOW:5,JACKPOT_TIME_INCREASE:2.5,MINIPOKER_SCALE_CARD:.85,MINIPOKER_DISTANCE_TWO_CARD:140,MINIPOKER_SPEED_SPIN_CARD:1e3,MINIPOKER_SPEED_FAST_SPIN_CARD:2e3,MINIPOKER_DELAY_SPIN:2,MINIPOKER_NUMBER_CARDS_SPIN:15,MINIPOKER_TIME_SPIN:4,MINIPOKER_TIME_FAST_SPIN:1,MINIPOKER_LIST_BET_GOLD:[1e3,1e4,1e5],MINIPOKER_LIST_BET_MONEY:[100,1e3,1e4],MINIBACAY_SCALE_CARD:.9,MINIBACAY_DISTANCE_TWO_CARD:130,MINIBACAY_SPEED_SPIN_CARD:1e3,MINIBACAY_SPEED_FAST_SPIN_CARD:2e3,MINIBACAY_DELAY_SPIN:2,MINIBACAY_NUMBER_CARDS_SPIN:15,MINIBACAY_TIME_SPIN:4,MINIBACAY_TIME_FAST_SPIN:1,MINIBACAY_LIST_BET_GOLD:[1e3,1e4,1e5],MINIBACAY_LIST_BET_MONEY:[100,1e3,1e4],DIAMOND_TIME_SPIN:5,DIAMOND_NUMBER_REELS:3,DIAMOND_SPEED_SPIN_CARD:750,DIAMOND_LIST_BET_GOLD:[1e3,1e4,1e5],DIAMOND_LIST_BET_MONEY:[100,1e3,1e4],DIAMOND_NUMBER_CHIP_SPIN:15,DIAMOND_NUMBER_TYPE_CHIP:6,DIAMOND_SCALE_CHIP:.9,DIAMOND_DISTANCE_TWO_CHIPS:70,DIAMOND_DELAY_SPIN:2,PIRATE_TIME_SPIN:5,PIRATE_NUMBER_REELS:3,PIRATE_SPEED_SPIN_CARD:750,PIRATE_LIST_BET_GOLD:[1e3,1e4,1e5],PIRATE_LIST_BET_MONEY:[100,1e3,1e4],PIRATE_NUMBER_CHIP_SPIN:15,PIRATE_NUMBER_TYPE_CHIP:6,PIRATE_SCALE_CHIP:.9,PIRATE_DISTANCE_TWO_CHIPS:66,PIRATE_DELAY_SPIN:2,TRENDUOI_SCALE_CARD:1,TRENDUOI_DISTANCE_TWO_CARD:160,TRENDUOI_SPEED_SPIN_CARD:1e3,TRENDUOI_DELAY_SPIN:1,TRENDUOI_NUMBER_CARDS_SPIN:15,TRENDUOI_LIST_BET_GOLD:[1e4,5e4,1e5,5e5,1e6],TRENDUOI_LIST_BET_MONEY:[1e3,5e3,1e4,5e4,1e5,5e5],BOM_TIME_SPIN:5,BOM_NUMBER_REELS:3,BOM_SPEED_SPIN_CARD:1500,BOM_LIST_BET_GOLD:[1e3,1e4,1e5],BOM_LIST_BET_MONEY:[100,1e3,1e4],BOM_NUMBER_CHIP_SPIN:20,BOM_NUMBER_TYPE_CHIP:6,BOM_SCALE_CHIP:.9,BOM_SCALE_CHIP_2:.9,BOM_DISTANCE_TWO_CHIPS:85,BOM_DISTANCE_TWO_CHIPS_2:80,BOM_DELAY_SPIN:1,WILD_TIME_SPIN:5,WILD_NUMBER_REELS:3,WILD_SPEED_SPIN_CARD:1500,WILD_LIST_BET_GOLD:[1e3,1e4,1e5],WILD_LIST_BET_MONEY:[1e3,5e3,1e4],WILD_NUMBER_CHIP_SPIN:20,WILD_NUMBER_TYPE_CHIP:6,WILD_SCALE_CHIP:.9,WILD_DISTANCE_TWO_CHIPS:85,WILD_DISTANCE_TWO_CHIPS_2:90,WILD_DELAY_SPIN:1,WILD_DELAY_SPIN_REEL_2:1.5,BAU_CUA_LIST_BET:[100,500,1e3,5e3,1e4,5e4,1e5,5e5,1e6],TAI_XIU_LIST_SELECT:[1e4,5e4,1e5,5e5,1e6,5e6,1e7,0],TAI_XIU_MAX_LENGTH:12,VIP_2_POINT:[0,10,50,120,200,500,1e3,2500,5e3,1e4,2e4,4e4,65e3,1e5,15e4],VIP_2_RATE_TRANFER:[50,100,150,200,250,300,350,450,500,650,800,1e3,1250,1600,2e3],QUEST_TIME_SHOW_NOTIFICATION:10,TIME_WIN_TYPE_NORMAL:1.5,TIME_WIN_TYPE_BIGWIN:3,TIME_WIN_TYPE_JACKPOT:5,NUMBER_PAGE_EVENT:10},cc._RF.pop()},{}],ConfirmRemoveMail:[function(t,e,i){"use strict";cc._RF.push(e,"64f08KPEVZKZLUfcQdvtRw5","ConfirmRemoveMail"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.InfoMail=t.GameInfo.InfoMail},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active&&!this.GameCenter.Bonus.node.active},setId:function(t,e){this.id=t,this.isReaded=e},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.removeMail()},removeMail:function(){var t={id:this.id,token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.removeMessage(t,function(t){},function(t){}),this.isReaded||this.GameCenter.Header.HeaderAccount.minusUnreadMessage(),this.InfoMail.removeMail(this.id),this.dialogForm.hideDialog()}}),cc._RF.pop()},{}],ConfirmSecurity:[function(t,e,i){"use strict";cc._RF.push(e,"f6baeAMzOFFPYhUxRIwH3Ot","ConfirmSecurity"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active&&!this.GameCenter.Bonus.node.active},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showSercurity(),this.dialogForm.hideDialog(!1)}}),cc._RF.pop()},{}],Constant:[function(t,e,i){"use strict";cc._RF.push(e,"7231dbXIA5Kw457Ynrh/vxo","Constant");e.exports={STATUS_SUCCESS:1,STATUS_FAILURE:0,SECURITY_LOGIN:1,SECURITY_LOGIN_STATUS_CANCEL:0,SECURITY_LOGIN_STATUS_CHOSE:1,IS_SOUND:"is_sound",Z_INDEX:"z_index",IS_SHOW_GAME_SLOT:"is_show_game_slot",TOKEN:"token",USER_ID:"user_id",FACEBOOK:"facebook",TYPE:"type",IS_AUTO_LOGIN_BY_FACEBOOK:"is_auto_login_by_facebook",TIME_LOGIN:"time_login",DEVICE_ID:"device_id",MONEY_NAME:"$",GOLD_NAME:"XU",MONEY_CODE:"0",GOLD_CODE:"1",SCENE_LOGIN:"Login",SCENE_GAME_CENTER:"GameCenter",SCENE_GAME_TLMN:"TLMN",SCENE_GAME_POKER:"POKER",SCENE_GAME_BACAY:"BACAY",SCENE_GAME_XOCDIA:"XOCDIA",SCENE_GAME_LIENG:"LIENG",SCENE_GAME_MAUBINH:"MAUBINH",SCENE_GAME_SAM:"SAM",SCENE_GAME_PHOM:"PHOM",SCENE_GAME_FIRE_FISH:"GameFireFish",SCENE_GAME_SLOT:"SLOT",SCENE_GAME_SLOT_2:"SLOT3",SCENE_GAME_SLOT_3:"SLOT2",SCENE_GAME_SLOT_4:"SLOT4",SCENE_GAME_SLOT_5:"SLOT5",SCENE_GAME_LOTTERY:"LOTTERY",LOBBY:"LOBBY",CHAT_WORLD:"CHAT_WORLD",BA_CAY:"BACAY",XOC_DIA:"XOCDIA",POKER:"POKER",TLMN:"TLMN",TLMNSOLO:"TLMNSOLO",LIENG:"LIENG",MAU_BINH:"MAUBINH",SAM:"SAM",SAMSOLO:"SAMSOLO",PHOM:"PHOM",CHAN:"CHAN",XITO:"XITO",TAI_XIU:"TAIXIU",CHAN_LE:"CHANLE",MINI_POKER:"MINIPOKER",MINI_BACAY:"MINI3CAY",TREN_DUOI:"HILO",BAU_CUA:"HOO_HEY_HOW",LUCK_WHEEL:"LUCK_WHEEL",DIAMOND:"DIAMOND",DIAMOND_2:"DIAMOND2",LONGVUONG:"LONGVUONG",ZOOMBIES:"ZOOMBIES",ONE001:"ONE001",DRAGON:"DRAGON",CLASSIC1:"CLASSIC1",MODERN_SLOT:"MODERN_SLOT",PIRATE:"PIRATE",LOTTERY:"LOTTERY",DRAGON_TIGER:"DRAGON_TIGER",BOM:"BOM",WILD:"WILD",MINIGAME_XOCDIA:"MINIGAME_XOCDIA",SHOOTING_FISH:"SHOOTING_FISH",KEOBUABAO:"KEOBUABAO",MIN_BET:"MIN_BET",ROOM_TYPE:"ROOM_TYPE",MATCH_GAME_ID:"MATCH_GAME_ID",GOLD:"gold",MONEY:"money",BALANCE:"balance",SAFE_AMOUNT:"safe_amount",VIP_POINT_VARIBLE:"vip_point",DIAMOND_EVENT:"diamond",DIAMOND_LEVEL_EVENT:"diamond_level",VIP_POINT_2_REMAIN_VARIBLE:"vip_2_remain",VIP_POINT_2_TOTAL_VARIBLE:"vip_2_total",SHORT_NAME:"short_name",IS_BUY_IN:"is_buy_in",MIN_BUY:"min_buy",MAX_BUY:"max_buy",SERVER_ID_1:1,SERVER_ID_2:2,SERVER_ID_1_NAME:"",SERVER_ID_2_NAME:"",SERVER_ID_1_MONEY_NAME:"$",SERVER_ID_2_MONEY_NAME:"$",JOIN_ROOM_ERROR:"JOIN_ROOM_ERROR",REQUEST_JOIN_GAME:"REQUEST_JOIN_GAME",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_JOIN_ROOM:"REQUEST_JOIN_ROOM",REQUEST_OUT_LOBBY_GAME:"REQUEST_OUT_LOBBY_GAME",REQUEST_UPDATE:"REQUEST_UPDATE",REQUEST_UPDATE_USER_VARIABLES:"UPDATE_USER_VARIABLES",REQUEST_PREVENT_DISCONNECT:"REQUEST_PREVENT_DISCONNECT",MINIGAME_REQUEST:"MINIGAME",REQUEST_INVITE:"REQUEST_INVITE",REQUEST_ACCEPT_INVITE:"REQUEST_ACCEPT_INVITE",REQUEST_CHAT_GET_CHAT:"GET_CHAT",REQUEST_CHAT_SEND_CHAT:"SEND_CHAT",REQUEST_SAFE_DEPOSIT:"SAFE_DEPOSIT",REQUEST_SAFE_WITHDRAW:"SAFE_WITHDRAW",REQUEST_AWARD_CARD:"AWARD",REQUEST_TRANSFER:"PLAYER_TRANSFER",REQUEST_RECHARGE_GOLD:"CONVERT_MONEY_TO_GOLD",REQUEST_PLAYER_RECEIVE_ALERT:"PLAYER_RECEIVE_ALERT",REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:"PLAYER_RECEIVE_NEW_MESSAGE",REQUEST_ACHIVEMENTED_QUEST:"REQUEST_ACHIVEMENTED_QUEST",REQUEST_NOT_ENOUGH_BALANCE_STAY_ROOM:"NOT_ENOUGH_BALANCE_STAY_ROOM",REQUEST_PLUS_LUCKY_WHEEL_FREE:"PLUS_LUCKY_WHEEL_FREE",REQUEST_GET_DAILY_ACHIVEMENT:"GET_DAILY_ACHIVEMENT",REQUEST_MESSAGE:"MESSAGE",REQUEST_GET_OTP:"GET_OTP",UPDATE_MINIGAME_FREE:"UPDATE_MINIGAME_FREE",REQUEST_ACHIVEMENTED_VIP_POINT:"REQUEST_ACHIVEMENTED_VIP_POINT",PLAYER_TRANSFER_VIP_POINT_2:"PLAYER_TRANSFER_VIP_POINT_2",GET_TOP:"GET_TOP",ROOM_INFO:"ROOM_INFO",NEWS:"NEWS",CONVERT_DIAMOND:"CONVERT_DIAMOND",GIFT_CODE:"GIFTCODE",TAB_KEY:9,ENTER_KEY:13,ESC_KEY:27,VIPS:[1e4,5e4,1e5,5e5,1e6,5e6,1e7,2e7],VIP_POINT:["Copper","Silver","Gold","Platinum","Ruby","Saphia","Diamond"],VIETEL:"Viettel",MOBIFONE:"Mobifone",VINAPHONE:"Vinaphone",GATE:"Gate",VCOIN:"VCoin",MEGACARD:"MegaCard",ZING:"ZING",SMS_MOBIFONE:"MOBIFONE",SMS_VIETTEL:"VIETTEL",SMS_VINAPHONE:"VINAPHONE",FACEBOOK_ID:"215637868926300",LOGIN_FACEBOOK_TYPE:1,REGISTER_CODE_WEB:"WEB",REGISTER_CODE_APPLE_STORE:"APPLE",REGISTER_CODE_GOOGLE_STORE:"GOOGLE",REGISTER_CODE_APPLE_JAILBREAK:"APPLE_JB",MARKETING_CODE:"mkt_code",ACCOUNT:"account",AUTO_LOGIN:"auto_login",ACCOUNT_TYPE:"account_type",FAVORIES:"favorites",FID:"fid",BANK_ACB:"ACB",BANK_AGRI:"AGRIBANK",BANK_AN_BINH:"ANBINHBANK",BANK_BAC_A:"BACABANK",BANK_BIDV:"BIDV",BANK_DAI_A:"DAIABANK",BANK_DONG_A:"DONGABANK",BANK_EXIM:"EXIMBANK",BANK_GP:"GPBANK",BANK_HD:"HDBANK",BANK_MARITIME:"MARITIMEBANK",BANK_MB:"MB",BANK_NAM_A:"NAMABANK",BANK_NAVI:"NAVIBANK",BANK_OCEAN:"OCEANBANK",BANK_PG:"PGBANK",BANK_SACOM:"SACOMBANK",BANK_SAI_GON:"SAIGONBANK",BANK_SEA:"SEABANK",BANK_SHB:"SHB",BANK_TECHCOM:"TECHCOMBANK",BANK_TIEN_PHONG:"TIENPHONGBANK",BANK_VIB:"VIB",BANK_VIET_A:"VIETABANK",BANK_VIETCOM:"VIETCOMBANK",BANK_VIETTIN:"VIETINBANK",BANK_VP:"VPBANK",HOST_PAY:"",HOST_PAY_2:"",HOST_RECHARGE_CARD:"",HOST_LOGIN_FACEBOOK:"",HOST_LOGIN_FACEBOOK_2:"",HOST_GAME:"",HOST_GAME_2:"",TELEGRAM_BOT:"http://t.me/choitx79Bot",TELEGRAM_BOT_IOS:"tg://resolve?domain=choitx79Bot",TELEGRAM_BOT_ANDROID:"intent://resolve?domain=choitx79Bot#Intent;package=org.telegram.messenger;scheme=tg;end",HOST_DOWNLOAD:"https://tx79.club/download/",BASE64_TO_SPRITE:"data:image/png;base64,",LIST_INTERNATION_PHONE_NUMBER:["+84","+86","+855","+853","+65","+852","+886","+93","+358","+856","+81","+33","+60","+374","+596","+594","+49","+61","+672","+43","+994","+229","+55","+1","+53","+420","+91","+62","+972","+63","+7"]},cc._RF.pop()},{}],DialogForm:[function(t,e,i){"use strict";cc._RF.push(e,"1fb49tXzQxNvrkjaKEWrGv0","DialogForm"),cc.Class({extends:cc.Component,properties:{formNode:cc.Node},onLoad:function(){this.isHiding=!1,this.formAnimation=this.formNode.getComponent(cc.Animation)},onDestroy:function(){clearTimeout(this.hideTimeout)},showDialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.node.active=!0,t&&this.formAnimation.play("ShowDialogFormAnimation")},hideDialog:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isHiding||(this.isHiding=!0,this.node.active&&this.formAnimation.play("HideDialogFormAnimation"),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.node.active=!1,this.isHiding=!1}.bind(this),500)):this.node.active=!1},onCloseClick:function(){this.hideDialog()}}),cc._RF.pop()},{}],DialogMessage:[function(t,e,i){"use strict";cc._RF.push(e,"e016aEktsRFU6gOpCNwKkOg","DialogMessage");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{formNode:cc.Node,titleLabel:cc.Label,contentLabel:cc.Label},onLoad:function(){this.formAnimation=this.formNode.getComponent(cc.Animation)},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},onDestroy:function(){clearTimeout(this.hideTimeout)},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.hideDialog()}},setMessage:function(t,e){this.titleLabel.string=t.toUpperCase(),e=o.replaceContent(e,n.OLD_MONEY_1,n.NEW_MONEY),e=o.replaceContent(e,n.OLD_MONEY_2,n.NEW_MONEY),e=o.replaceContent(e,n.OLD_MONEY_3,n.NEW_MONEY),e=o.replaceContent(e,n.OLD_MONEY_4,n.NEW_MONEY),this.contentLabel.string=e},showDialog:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.node.active=!0,t&&this.formAnimation.play("ShowDialogFormAnimation")},showMessage:function(t,e){this.setMessage(t,e),this.showDialog()},hideDialog:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.node.active&&this.formAnimation.play("HideDialogFormAnimation"),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.node.active=!1}.bind(this),500)):this.node.active=!1},onCloseClick:function(){this.hideDialog()}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],DiamondConstant:[function(t,e,i){"use strict";cc._RF.push(e,"02d18ohIQtBDLjjjcr0oCc4","DiamondConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"diamond.ADD_EVENT",REMOVE_EVENT:"diamond.REMOVE_EVENT",SPIN:"diamond.SPIN",IS_SHOW:"diamond_is_show",POSITION:"diamond_position",LIST_LINES:"diamond_list",IS_AUTO_SPIN:"diamond_auto_spin",BET_VALUE:"diamond_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"diamond_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"diamond.GET_TOP",MINIGAME_CONFIG_ID:13,DIAMOND_LIST_ICON:["A","B","C","D","E","W"]},cc._RF.pop()},{}],DiamondHistories:[function(t,e,i){"use strict";cc._RF.push(e,"f09d10/I91AtonX3K8O8qz1","DiamondHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyDiamondItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryDiamond(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyDiamondItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("DiamondHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],DiamondHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"26e46qI5d1CQ5bbvTx/vW9W","DiamondHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_bet_value),this.resultLabel.string=this.getResult(t.result),this.getLabel.string=o.numberWithCommas(t.total_prize_value);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){if(!t)return"0 d\xf2ng";"]"===t[t.length-1]&&"]"===t[t.length-2]&&(t=t.substring(0,t.length-1));try{return(t=JSON.parse(t)).length+" d\xf2ng"}catch(t){return"0 d\xf2ng"}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],DiamondItem:[function(t,e,i){"use strict";cc._RF.push(e,"4ade3TcWKZBWYIbccTy01ld","DiamondItem"),cc.Class({extends:cc.Component,properties:{iconWNode:cc.Node,iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),t){case"W":this.iconWNode.active=!0;break;case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0}},reset:function(){this.iconWNode.active=!1,this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1}}),cc._RF.pop()},{}],DiamondLine:[function(t,e,i){"use strict";cc._RF.push(e,"1e028BOpcVKzKfEjLPODe8t","DiamondLine");var o=t("../item/DiamondNumberLineItem");cc.Class({extends:cc.Component,properties:{listNumberLineItem:[o],listLine:[cc.Node]},init:function(t){for(var e in this.Diamond=t,this.DiamondSelectForm=t.DiamondSelectForm,this.listNumberLineItem)this.listNumberLineItem[e].init(this)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in this.listLine)for(var i in t)if(e==t[i].line-1){this.listLine[e].active=!0;break}},showLine:function(t){for(var e in this.listLine)this.listLine[e].active=parseInt(t)-1==e},initNumberLine:function(){var t=0;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t++;this.Diamond.numberLineLabel.string=t+" D\xd2NG"},getLineData:function(){var t=[];for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t.push(parseInt(e)+1);return t},select:function(t){this.listNumberLineItem[t-1].select()},unSelect:function(t){this.listNumberLineItem[t-1].unSelect()},getListLines:function(){var t=[];for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t.push(parseInt(e)+1);return t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1}}),cc._RF.pop()},{"../item/DiamondNumberLineItem":"DiamondNumberLineItem"}],DiamondNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"5bf970XvBpId6EelGMtFE1b","DiamondNumberLineItem");var o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{numberLine:0,bgSprite:cc.Sprite,bgDefaultSpriteFrame:cc.SpriteFrame,bgSelectedSpriteFrame:cc.SpriteFrame,bgHoverSpriteFrame:cc.SpriteFrame},init:function(t){this.DiamondLine=t,this.Diamond=t.Diamond,this.DiamondSelectForm=t.DiamondSelectForm,this.line=this.numberLine,this.isSelected=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.bgSprite.spriteFrame=t.bgHoverSpriteFrame,t.DiamondLine.showLine(t.line)},this.onMouseLeave=function(){t.bgSprite.spriteFrame=t.isSelected?t.bgSelectedSpriteFrame:t.bgDefaultSpriteFrame,t.DiamondLine.showLine(0)},this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Diamond.isSpinning()||this.Diamond.isAutoSpin()?this.Diamond.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET):(this.isSelected=!this.isSelected,this.isSelected?this.DiamondSelectForm.select(this.line):this.DiamondSelectForm.unSelect(this.line),this.Diamond.saveListLines())},select:function(){this.isSelected=!0,this.bgSprite.spriteFrame=this.bgSelectedSpriteFrame,this.DiamondLine.initNumberLine()},unSelect:function(){this.isSelected=!1,this.bgSprite.spriteFrame=this.bgDefaultSpriteFrame,this.DiamondLine.initNumberLine()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],DiamondReel:[function(t,e,i){"use strict";cc._RF.push(e,"cf0a6E8GtVNW4S69nHAeKvs","DiamondReel");var o=t("../../../util/RandomUtil"),n=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./DiamondConstant");cc.Class({extends:cc.Component,properties:{diamondItemPrefab:cc.Prefab},init:function(t){this.Diamond=t,this.DiamondUI=t.DiamondUI,this.DiamondLine=t.DiamondLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.diamondItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,o,a,r,c){this.reset(),this.setChips(this.chips),this.chips=t;for(var h=1;h<e;h++){var l=this.getRandomChip();h===e-1&&(l=t[0]),h===e-2&&(l=t[1]),h===e-3&&(l=t[2]);var u=this.instanceChip(l);u.setPosition(0,(h+1)*n.DIAMOND_DISTANCE_TWO_CHIPS),u.parent=this.node}var d=(e-1)*n.DIAMOND_DISTANCE_TWO_CHIPS,m=d/n.DIAMOND_SPEED_SPIN_CARD,p=cc.moveTo(m,this.node.x,-d).easing(cc.easeInOut(3)),f=cc.callFunc(function(){this.setChips(t),i&&this.Diamond.node.active&&(r===s.WIN_TYPE_JACKPOT?this.DiamondUI.showJackPot(o,c):a&&this.MiniGameResult.show(o),this.DiamondLine.showLines(a))},this),g=cc.delayTime(n.DIAMOND_DELAY_SPIN),_=cc.callFunc(function(){i&&this.Diamond.node.active&&this.Diamond.isAutoSpin()&&this.Diamond.spin()},this);this.node.runAction(cc.sequence(p,f,g,_)),r!==s.WIN_TYPE_JACKPOT||this.Diamond.node.active||(this.Diamond.node.active=!0,this.DiamondUI.showJackPot(o,c))},randomChips:function(){for(var t=[],e=0;e<n.DIAMOND_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=o.getRandomInt(0,a.DIAMOND_LIST_ICON.length-1);return a.DIAMOND_LIST_ICON[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*n.DIAMOND_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.diamondItemPrefab)),e.getComponent("DiamondItem").init(t),e.scale=n.DIAMOND_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.DiamondLine.reset(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./DiamondConstant":"DiamondConstant"}],DiamondSelectForm:[function(t,e,i){"use strict";cc._RF.push(e,"8eaa0pD7pFAkY7F2dN0xp9O","DiamondSelectForm");var o=t("../item/DiamondSelectItem"),n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{listSelectItem:[o]},init:function(t){for(var e in this.Diamond=t,this.DiamondLine=t.DiamondLine,this.listSelectItem)this.listSelectItem[e].init(this,parseInt(e)+1)},onLoad:function(){},initData:function(){},select:function(t){this.listSelectItem[t-1].select()},unSelect:function(t){this.listSelectItem[t-1].unSelect()},onCloseClick:function(){this.node.active=!1},onIgnoreAllClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].unSelect(),this.DiamondLine.unSelect(parseInt(t)+1);this.Diamond.saveListLines()}},onSelectAllClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].select(),this.DiamondLine.select(parseInt(t)+1);this.Diamond.saveListLines()}},onSelectEvenClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].select(),this.DiamondLine.select(parseInt(t)+1)):(this.listSelectItem[t].unSelect(),this.DiamondLine.unSelect(parseInt(t)+1));this.Diamond.saveListLines()}},onSelectOddClick:function(){if(this.Diamond.isSpinning()||this.Diamond.isAutoSpin())this.Diamond.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].unSelect(),this.DiamondLine.unSelect(parseInt(t)+1)):(this.listSelectItem[t].select(),this.DiamondLine.select(parseInt(t)+1));this.Diamond.saveListLines()}}}),cc._RF.pop()},{"../../../helper/Message":"Message","../item/DiamondSelectItem":"DiamondSelectItem"}],DiamondSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"a986fg5SLJLNa04CDwno5n4","DiamondSelectItem");var o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{diamondSprite:cc.Sprite,diamondOnSpriteFrame:cc.SpriteFrame,diamondOffSpriteFrame:cc.SpriteFrame},init:function(t,e){this.DiamondSelectForm=t,this.Diamond=t.Diamond,this.DiamondLine=t.DiamondLine,this.line=e,this.isSelected=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.diamondSprite.spriteFrame=t.diamondOnSpriteFrame},this.onMouseLeave=function(){t.diamondSprite.spriteFrame=t.isSelected?t.diamondOnSpriteFrame:t.diamondOffSpriteFrame},this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Diamond.isSpinning()||this.Diamond.isAutoSpin()?this.Diamond.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET):(this.isSelected=!this.isSelected,this.isSelected?this.DiamondLine.select(this.line):this.DiamondLine.unSelect(this.line),this.Diamond.saveListLines())},select:function(){this.isSelected=!0,this.diamondSprite.spriteFrame=this.diamondOnSpriteFrame,this.DiamondLine.initNumberLine()},unSelect:function(){this.isSelected=!1,this.diamondSprite.spriteFrame=this.diamondOffSpriteFrame,this.DiamondLine.initNumberLine()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],DiamondUI:[function(t,e,i){"use strict";cc._RF.push(e,"cc08255pmhA0Z/ihjvIj/y9","DiamondUI");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOn1Sprite:cc.Sprite,betOn2Sprite:cc.Sprite,betOn3Sprite:cc.Sprite,betMoneySpriteFrame:cc.SpriteFrame,betGoldSpriteFrame:cc.SpriteFrame,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?(this.setBetMoney(),this.betOn1Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn2Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn3Sprite.spriteFrame=this.betMoneySpriteFrame):(this.setBetGold(),this.betOn1Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn2Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn3Sprite.spriteFrame=this.betGoldSpriteFrame)},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetMoney:function(){var t=n.DIAMOND_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=n.DIAMOND_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=o.nFormatter(t),this.bet2Label.string=o.nFormatter(e),this.bet3Label.string=o.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],Diamond:[function(t,e,i){"use strict";cc._RF.push(e,"df956LzxDZEgKZY4Vv9ynB8","Diamond");var o=t("../../../base/BaseController"),n=t("./DiamondLine"),s=t("./DiamondSelectForm"),a=t("./DiamondUI"),r=t("./DiamondConstant"),c=t("./DiamondReel"),h=t("../MiniGameResult"),l=t("../item/JackpotItem"),u=t("../../../helper/Config"),d=t("../../../helper/Constant"),m=t("../../../helper/Message"),p=t("../../../object/RoomType"),f=t("../MiniGameConstant"),g=t("../item/MiniGameXPer");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:l,toastPrefab:cc.Prefab,numberLineLabel:cc.Label,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,diamonFormNode:cc.Node,reels:[c],DiamondLine:n,DiamondSelectForm:s,DiamondUI:a,MiniGameResult:h,MiniGameXPer:g},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.betOrder=0,this.intervalSpin=null,this.reels)this.reels[t].init(this);this.DiamondLine.init(this),this.DiamondSelectForm.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(r.ADD_EVENT)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(r.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[r.MONEY_TYPE]===r.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().diamond_free,i=t[r.IS_AUTO_SPIN],o=t[r.BET_VALUE];switch(i&&this.onAutoSpinClick(),o){case r.BET_100:this.setBet1();break;case r.BET_1k:this.setBet2();break;case r.BET_10k:this.setBet3()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(r.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y);var e=cc.sys.localStorage.getItem(r.LIST_LINES);for(var i in e=e?JSON.parse(e):[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])this.DiamondLine.select(parseInt(e[i])),this.DiamondSelectForm.select(parseInt(e[i]))},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationDiamond(!0,e):this.MiniGameCircleNotification.initShowNotificationDiamond(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationDiamond(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,o=t[e].quantity;i===r.MINIGAME_CONFIG_ID&&(o>0?this.DiamondUI.showMiniGameSpinFree(o):this.DiamondUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case r.REQUEST_INFO:this.handleInfo(i);break;case r.REQUEST_SPIN:this.handleSpin(i);break;case r.REQUEST_MESSAGE:this.handleMessage(o);break;case r.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i),this.controller.EventGame&&this.controller.EventGame.initDataTop(i)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onStopAutoSpinClick()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,o=t.total_prize_value,n=t.win_type,s=t.money_type,a=t.spin_id,r=s==p.MONEY_CODE;this.idLabel.string=String.format(m.MINIGAME_ID,a),this.spinReels(i,o,e,n,r)},spinReels:function(t,e,i,o,n){for(var s=[],a=[],r=[],c=0;c<t.length;c++)switch(c%u.DIAMOND_NUMBER_REELS){case 0:s.push(t[c]);break;case 1:a.push(t[c]);break;case 2:r.push(t[c])}this.reels[0].spin(s,u.DIAMOND_NUMBER_CHIP_SPIN),this.reels[1].spin(a,u.DIAMOND_NUMBER_CHIP_SPIN+3),this.reels[2].spin(r,u.DIAMOND_NUMBER_CHIP_SPIN+6,!0,e,i,o,n)},onAutoSpinClick:function(){this.DiamondLine.getLineData().length>0?(this.autoSpinButtonNode.active=!1,this.stopAutoSpinButtonNode.active=!0,this.spinButtonNode.active=!1,this.getTempData()[r.IS_AUTO_SPIN]=!0,this.spin()):this.showMessage(m.DIAMOND_NO_LINE_SELECTED)},onStopAutoSpinClick:function(){this.DiamondLine.getLineData().length>0?(this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.getTempData()[r.IS_AUTO_SPIN]=!1):this.showMessage(m.DIAMOND_NO_LINE_SELECTED)},onSpinClick:function(){this.isSpinning()?this.showMessage(m.SPIN_TOO_FAST):this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t=this.DiamondLine.getLineData();if(t.length>0){var e={money_type:this.isMoneyType?p.MONEY_CODE:p.GOLD_CODE,money_value:this.getCurrentBet(),line_data:t};this.sendRequest.sendNoPrefixToZone(r.SPIN,e),this.MiniGameResult.reset()}else this.showMessage(m.DIAMOND_NO_LINE_SELECTED)}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(d.DIAMOND)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showDiamondHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(f.DIAMOND),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowDiamond(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.DiamondUI.enableBet1Button(),this.getTempData()[r.BET_VALUE]=r.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.DiamondUI.enableBet2Button(),this.getTempData()[r.BET_VALUE]=r.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.DiamondUI.enableBet3Button(),this.getTempData()[r.BET_VALUE]=r.BET_10k},onDiamondClick:function(){this.setShowDiamond(!this.isShow)},onShowDiamonFormClick:function(){this.diamonFormNode.active=!0},setShowDiamond:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().diamond_free;cc.sys.localStorage.setItem(r.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*u.DIAMOND_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=u.MINIGAME_SCALE_TOAST,e.setPosition(u.MINIGAME_POSITION_TOAST_X,u.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.DiamondUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?r.MONEY_TYPE_MONEY:r.MONEY_TYPE_GOLD;this.getTempData()[r.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?u.DIAMOND_LIST_BET_MONEY:u.DIAMOND_LIST_BET_GOLD)[this.betOrder]},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0},isAutoSpin:function(){return this.stopAutoSpinButtonNode.active},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},saveListLines:function(){var t=this.DiamondLine.getListLines();cc.sys.localStorage.setItem(r.LIST_LINES,JSON.stringify(t))},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./DiamondConstant":"DiamondConstant","./DiamondLine":"DiamondLine","./DiamondReel":"DiamondReel","./DiamondSelectForm":"DiamondSelectForm","./DiamondUI":"DiamondUI"}],DragonTigerCard:[function(t,e,i){"use strict";cc._RF.push(e,"64311YrpTVGS4L58/AxHW/K","DragonTigerCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],DragonTigerChainItem:[function(t,e,i){"use strict";cc._RF.push(e,"ff4f9ky6RhC85f7VWSa/mLu","DragonTigerChainItem");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,nameLabel:cc.Label,chainLabel:cc.Label,totalBetLabel:cc.Label,startMatchGameIdLabel:cc.Label,endMatchGameIdLabel:cc.Label,prizeLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e,i,s){if(t&&this.checkNickName(t.nick_name)){this.noLabel.string=e+1,this.nameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.chainLabel.string=t.chain||"";var a=t.total_bet?o.numberWithCommas(t.total_bet):"";this.totalBetLabel.string=a,this.startMatchGameIdLabel.string=t.start_match_game_id||t.start_math_game_id||"",this.endMatchGameIdLabel.string=t.end_match_game_id||t.end_math_game_id||"",(t.chain_dragon||"Long"===t.note||i)&&(this.chainLabel.string="G\u1ecdi R\u1ed3ng"),(t.chain_tiger||"Ho"===t.note||s)&&(this.chainLabel.string="G\u1ecdi H\u1ed5"),this.prizeLabel.string=o.numberWithCommas(t.prize);var r=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=r}else this.node.active=!1},checkNickName:function(t){return"__zeus__"!==t&&"baonhi23"!==t&&"tinhduonphuong"!==t&&"king88"!==t&&"daophong21"!==t}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],DragonTigerChains:[function(t,e,i){"use strict";cc._RF.push(e,"a10b0ImX01JzZ+XOueZqirZ","DragonTigerChains");t("../../../helper/Constant");var o=t("../../../helper/Message"),n=t("../../../util/FormatUtil"),s=t("../dragon-tiger/DragonTigerConstant");cc.Class({extends:cc.Component,properties:{dragonTigerChainItemPrefab:cc.Prefab,dragonTigerContentNode:cc.Node,dragonTigerRuleNode:cc.Node,dragonTigerCurrentTopDayNode:cc.Node,dragonTigerListChainNode:cc.Node,dragonTigerListCurrentNode:cc.Node,dragonTigerNextNode:cc.Node,dragonTigerPreviousNode:cc.Node,dragonTigerDateLabel:cc.Label,dragonTigerChainWinButtonOnNode:cc.Node,dragonTigerChainWinButtonOffNode:cc.Node,dragonTigerChainLoseButtonOnNode:cc.Node,dragonTigerChainLoseButtonOffNode:cc.Node,dragonTigerChainWinButtonOnNode2:cc.Node,dragonTigerChainWinButtonOffNode2:cc.Node,dragonTigerChainLoseButtonOnNode2:cc.Node,dragonTigerChainLoseButtonOffNode2:cc.Node,currentTopDayOnNode:cc.Node,currentTopDayOffNode:cc.Node,topDayButtonOnNode:cc.Node,topDayButtonOffNode:cc.Node,topMonthButtonOnNode:cc.Node,topMonthButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset(),this.loadData(),this.getCurrentTopChain()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.removeXhr()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},getCurrentTopChain:function(){this.controller.sendRequest.sendNoPrefixToZone(s.CURRENT_TOP_CHAIN)},initTopDay:function(t){this.loadingNode.active=!1,this.currentDataTopDay=t,this.onCurrentTopDayClick()},initListTopDay:function(){if(this.dragonTigerListCurrentNode.removeAllChildren(!0),this.currentDataTopDay){var t=this.currentDataTopDay.chain_lose_day,e=this.currentDataTopDay.chain_win_day,i=this.currentDataTopDay.chain_dragon,o=this.currentDataTopDay.chain_tiger,n=this.dragonTigerChainWinButtonOnNode.active?e:t,s=0;if(i&&this.dragonTigerChainWinButtonOnNode.active){var a=cc.instantiate(this.dragonTigerChainItemPrefab);a.getComponent("DragonTigerChainItem").init(i,s,!0,!1),a.parent=this.dragonTigerListCurrentNode,s++}if(o&&this.dragonTigerChainWinButtonOnNode.active){var r=cc.instantiate(this.dragonTigerChainItemPrefab);r.getComponent("DragonTigerChainItem").init(o,s,!1,!0),r.parent=this.dragonTigerListCurrentNode,s++}for(var c=0;c<n.length;c++){var h=cc.instantiate(this.dragonTigerChainItemPrefab);h.getComponent("DragonTigerChainItem").init(n[c],s),h.parent=this.dragonTigerListCurrentNode,s++}}},loadData:function(){var t=this;if(this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.loadingNode.active=!0,this.xhr=this.controller.api.getChainDragonTiger(e,function(e){t.loadingNode.active=!1,t.data=e.data,t.initData()},function(e){t.loadingNode.active=!1,t.controller.showDialogMessage(o.DRAGON_TIGER_CHAIN,e.msg)})}},initData:function(){if(this.data){var t;t=this.data.day[0],this.initListData(t),t||this.hideDateNodeDragonTiger()}},initListData:function(t){if(this.dragonTigerListChainNode.removeAllChildren(!0),t){for(var e=[],i=0;i<t.length;i++)this.isDragonTigerChainWin()?1==t[i].is_win&&e.push(t[i]):0==t[i].is_win&&e.push(t[i]);this.showDateNodeDragonTiger(),e=this.softDataByTop(e);for(var o=0;o<e.length;o++){var s=cc.instantiate(this.dragonTigerChainItemPrefab);s.getComponent("DragonTigerChainItem").init(e[o],o),s.parent=this.dragonTigerListChainNode,9===o&&(this.timeDragonTiger=e[o].created_at,this.dragonTigerDateLabel.string=n.getStringOnlyDateByTimeStamp(this.timeDragonTiger/1e3-86400),this.initNextPreviousButton())}}},showDateNodeDragonTiger:function(){this.dragonTigerNextNode.active=!0,this.dragonTigerPreviousNode.active=!0,this.dragonTigerDateLabel.node.active=!0},hideDateNodeDragonTiger:function(){this.dragonTigerNextNode.active=!1,this.dragonTigerPreviousNode.active=!1,this.dragonTigerDateLabel.node.active=!1},isTopDay:function(){return this.topDayButtonOnNode.active},isDragonTigerChainWin:function(){return this.dragonTigerChainWinButtonOnNode2.active},isChanLeChainWin:function(){return this.chanLeChainWinButtonOnNode2.active},initNextPreviousButton:function(){if(this.dragonTigerNextNode.active=!0,this.dragonTigerPreviousNode.active=!0,this.data){var t=this.data.day;t.length>0&&(this.timeDragonTiger===t[0][0].created_at&&(this.dragonTigerPreviousNode.active=!1),this.timeDragonTiger===t[t.length-1][0].created_at&&(this.dragonTigerNextNode.active=!1))}},onNextClick:function(){if(this.data)for(var t=this.data.day,e=t.length-1;e>=0;e--){if(t[e][0].created_at===this.timeDragonTiger){this.initListData(t[e]);break}}},onPreviewClick:function(){if(this.data)for(var t=this.data.day,e=t.length-1;e>=0;e--){if(t[e][0].created_at===this.timeDragonTiger){this.initListData(t[e-2]);break}}},onChainWinCurrentDayClick:function(){this.dragonTigerChainWinButtonOnNode.active=!0,this.dragonTigerChainWinButtonOffNode.active=!1,this.dragonTigerChainLoseButtonOnNode.active=!1,this.dragonTigerChainLoseButtonOffNode.active=!0,this.initListTopDay()},onChainLoseCurrentDayClick:function(){this.dragonTigerChainWinButtonOnNode.active=!1,this.dragonTigerChainWinButtonOffNode.active=!0,this.dragonTigerChainLoseButtonOnNode.active=!0,this.dragonTigerChainLoseButtonOffNode.active=!1,this.initListTopDay()},onChainWinClick2:function(){this.data&&(this.dragonTigerChainWinButtonOnNode2.active=!0,this.dragonTigerChainWinButtonOffNode2.active=!1,this.dragonTigerChainLoseButtonOnNode2.active=!1,this.dragonTigerChainLoseButtonOffNode2.active=!0,this.initData())},onChainLoseClick2:function(){this.data&&(this.dragonTigerChainWinButtonOnNode2.active=!1,this.dragonTigerChainWinButtonOffNode2.active=!0,this.dragonTigerChainLoseButtonOnNode2.active=!0,this.dragonTigerChainLoseButtonOffNode2.active=!1,this.initData())},onDragonTigerChainClick:function(){this.dragonTigerButtonNode.active=!1,this.contentDragonTigerNode.active=!0},onChanLeChainClick:function(){this.taiXiuButtonNode.active=!0,this.chanLeButtonNode.active=!1,this.contentChanLeNode.active=!0,this.contentTaiXiuNode.active=!1},onCurrentTopDayClick:function(){this.showCurrentTopDayNode(),this.initListTopDay()},onTopDayClick:function(){this.data&&(this.showTopDayNode(),this.initData())},onTopMonthClick:function(){this.data&&(this.showTopMonthNode(),this.initData())},onRuleClick:function(){this.showRuleNode()},showCurrentTopDayNode:function(){this.hideAllButton(),this.hideAllContent(),this.dragonTigerCurrentTopDayNode.active=!0,this.currentTopDayOnNode.active=!0,this.currentTopDayOffNode.active=!1},showTopDayNode:function(){this.hideAllButton(),this.hideAllContent(),this.dragonTigerContentNode.active=!0,this.topDayButtonOnNode.active=!0,this.topDayButtonOffNode.active=!1},showTopMonthNode:function(){this.hideAllButton(),this.hideAllContent(),this.dragonTigerContentNode.active=!0,this.topMonthButtonOnNode.active=!0,this.topMonthButtonOffNode.active=!1},showRuleNode:function(){this.hideAllButton(),this.hideAllContent(),this.dragonTigerRuleNode.active=!0,this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1},hideAllContent:function(){this.dragonTigerContentNode.active=!1,this.dragonTigerRuleNode.active=!1,this.dragonTigerCurrentTopDayNode.active=!1},hideAllButton:function(){this.currentTopDayOnNode.active=!1,this.topDayButtonOnNode.active=!1,this.topMonthButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1,this.currentTopDayOffNode.active=!0,this.topDayButtonOffNode.active=!0,this.topMonthButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},softDataByTop:function(t){return t.sort(function(t,e){return t.top-e.top}),t},reset:function(){this.data=null}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../dragon-tiger/DragonTigerConstant":"DragonTigerConstant"}],DragonTigerChain:[function(t,e,i){"use strict";cc._RF.push(e,"ffb7dpbGq5GS4HNLkeoUwRp","DragonTigerChain");var o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{chainWinLabel:cc.Label,chainLoseLabel:cc.Label,currentChainWinLabel:cc.Label,currentChainLoseLabel:cc.Label},init:function(t){this.DragonTiger=t},onLoad:function(){},onEnable:function(){},onDisable:function(){},initChain:function(t){if(t){this.data=t;var e=t.chain_win,i=t.chain_lose,n=t.current_chain_win,s=t.current_chain_lose;this.currentChainWinLabel.string=String.format(o.DRAGON_TIGER_CURRENT_CHAIN_WIN,n),this.currentChainLoseLabel.string=String.format(o.DRAGON_TIGER_CURRENT_CHAIN_LOSE,s),this.chainWinLabel.string=String.format(o.DRAGON_TIGER_CHAIN_WIN,e),this.chainLoseLabel.string=String.format(o.DRAGON_TIGER_CHAIN_LOSE,i)}}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],DragonTigerChat:[function(t,e,i){"use strict";cc._RF.push(e,"c28d7CnlNtJYIt6vdkMcgCj","DragonTigerChat");var o=t("../../../helper/Constant"),n=t("../../../util/BrowserUtil"),s=t("./DragonTigerConstant");cc.Class({extends:cc.Component,properties:{chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView,chatEditBox:cc.EditBox,chatButtonNode:cc.Node},init:function(t){this.DragonTiger=t},onLoad:function(){this.editboxs=[this.chatEditBox],this.number=0},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(0),this.number++},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.chatButtonNode.active=!1},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.chatButtonNode.active=!0},addEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){n.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){n.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}},keyHandle:function(t){return t.keyCode===o.ENTER_KEY?(n.focusGame(),this.onSendClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ESC_KEY?(this.unFocusChatEditBox(),!1):void 0},initChat:function(t){this.chatScrollView.content.removeAllChildren(!0),this.instanceChat(t),this.scrollToBottom()},addChat:function(t){this.instanceChat(t),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},instanceChat:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.instanceChatItem(t[e]);else this.instanceChatItem(t)},instanceChatItem:function(t){var e=cc.instantiate(this.chatItemPrefab);e.getComponent("MiniGameChatItem").init(t),e.parent=this.chatScrollView.content},scrollToBottom:function(){this.number=0},onCloseClick:function(){this.DragonTiger.getTempData()[s.IS_SHOW_CHAT]=!this.node.active,this.node.active=!this.node.active},onSendClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(""!==t.trim()){var e={message:t};this.DragonTiger.sendRequest.sendNoPrefixToZone(s.CHAT,e),this.chatEditBox.string=""}},unFocusChatEditBox:function(){n.unFocusEditBox(this.chatEditBox)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=150}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/BrowserUtil":"BrowserUtil","./DragonTigerConstant":"DragonTigerConstant"}],DragonTigerChipItem:[function(t,e,i){"use strict";cc._RF.push(e,"cfbfdnDRC9LEb97e6opII7/","DragonTigerChipItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{chipLabel:cc.Label,selectBgNode:cc.Node},init:function(t,e){this.DragonTiger=t,this.DragonTigerChip=t.DragonTigerChip,this.bet=e},onLoad:function(){this.chipLabel.string=o.nFormatter(this.bet)},onClick:function(){this.isSelect()||(this.DragonTigerChip.hideAllItem(),this.showSelectNode(),this.DragonTigerChip.setBet(this.bet))},getBet:function(){return this.bet},showSelectNode:function(){this.selectBgNode.active=!0},hideSelectNode:function(){this.selectBgNode.active=!1},isSelect:function(){return this.selectBgNode.active}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],DragonTigerChip:[function(t,e,i){"use strict";cc._RF.push(e,"8b158bx47NOebWo075FHX1F","DragonTigerChip");t("../../../helper/Config"),t("./DragonTigerConstant");var o=t("./DragonTigerConfig"),n=t("./DragonTigerChipItem");cc.Class({extends:cc.Component,properties:{listChipItem:[n]},init:function(t){this.DragonTiger=t;for(var e=0,i=this.listChipItem.length;e<i;e++)this.listChipItem[e].init(t,o.LIST_CHIP[e])},onLoad:function(){},onEnable:function(){},onDisable:function(){},setBet:function(t){this.bet=t},getBet:function(){return this.bet},hideAllItem:function(){for(var t=0,e=this.listChipItem.length;t<e;t++)this.listChipItem[t].hideSelectNode()}}),cc._RF.pop()},{"../../../helper/Config":"Config","./DragonTigerChipItem":"DragonTigerChipItem","./DragonTigerConfig":"DragonTigerConfig","./DragonTigerConstant":"DragonTigerConstant"}],DragonTigerConfig:[function(t,e,i){"use strict";cc._RF.push(e,"28ad1Ho6dtGfaV1vd/6UbK8","DragonTigerConfig");e.exports={LIST_CHIP:[1e3,5e3,1e4,5e4,1e5,5e5,1e6,5e6,1e7],TIME_NAN:1e4,TIME_SHOW_CARD:3500,TIME_SHOW_EFFECT_CARD:1e3,SCALE_CARD_1:1.1,SCALE_CARD_2:.85,MAX_LENGTH_HISTORY:24,NUMBER_ITEM_IN_LIST:4,NUMBER_HISTORY:40,DISTANCE_W_STATISTIC:30.9,DISTANCE_H_STATISTIC:30.5,MAX_COL:18},cc._RF.pop()},{}],DragonTigerConstant:[function(t,e,i){"use strict";cc._RF.push(e,"678d9nxG95MtrZPyZe8sn02","DragonTigerConstant");e.exports={DRAGON:0,TIGER:1,TIE:2,NUMBER_DETAIL_ITEM:8,NUMBER_HISTORY:16,REQUEST_START:"START",REQUEST_BALANCE_DOOR:"BALANCE_DOOR",REQUEST_FINISH:"FINISH",REQUEST_UPDATE:"UPDATE",REQUEST_CALL_DRAGON:"DRAGON",REQUEST_CALL_TIGER:"TIGER",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_CHANGE_STATE:"CHANGE_STATE",REQUEST_CHAT:"CHAT",REQUEST_HISTORY_DETAIL:"HISTORY_DETAIL",CURRENT_TOP_CHAIN_2:"CURRENT_TOP_CHAIN",GET_TOP_2:"GET_TOP",ADD_EVENT:"dragon_tiger.ADD_EVENT",REMOVE_EVENT:"dragon_tiger.REMOVE_EVENT",GET_STATE:"dragon_tiger.GET_STATE",BET:"dragon_tiger.BET",CHAT:"dragon_tiger.CHAT",HISTORY_DETAIL:"dragon_tiger.HISTORY_DETAIL",IS_SHOW:"dragon_tiger_is_show",IS_SHOW_CHAT:"dragon_tiger_is_show_chat",POSITION:"dragon_tiger_position",IS_NAN:"dragon_tiger_nan",CURRENT_TOP_CHAIN:"dragon_tiger.CURRENT_TOP_CHAIN",GET_TOP:"dragon_tiger.GET_TOP",GET_FINISH:"dragon_tiger.FINISH",TIME_GET_FINISH:3,TIME_CALL_DRAGON:5},cc._RF.pop()},{}],DragonTigerDetailItem:[function(t,e,i){"use strict";cc._RF.push(e,"c8addD6ZR5Iz7R1mMp2bLZJ","DragonTigerDetailItem");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,nickNameLabel:cc.Label,balanceBetLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){this.data=t,this.timeLabel.string=o.getStringHourByTimeStamp(t.time),this.nickNameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.balanceBetLabel.string=o.numberWithCommas(t.balance_bet);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}else this.node.active=!1},onLoad:function(){}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],DragonTigerDetail:[function(t,e,i){"use strict";cc._RF.push(e,"1c5e8eXWr1IyYvFKd4WOH04","DragonTigerDetail");var o=t("../dragon-tiger/DragonTigerConstant"),n=t("../../../helper/Message"),s=t("../../../util/FormatUtil"),a=t("../../item/PaginationItem"),r=t("../dragon-tiger/DragonTigerCard");cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,loadingNode:cc.Node,dragonCardNode:cc.Node,tigerCardNode:cc.Node,cardPrefab:cc.Prefab,nextNode:cc.Node,previousNode:cc.Node,matchLabel:cc.Label,dragonTextOnNode:cc.Node,dragonTextOffNode:cc.Node,tieTextOnNode:cc.Node,tieTextOffNode:cc.Node,tigerTextOnNode:cc.Node,tigerTextOffNode:cc.Node,listDragonNode:cc.Node,listTieNode:cc.Node,listTigerNode:cc.Node,dragonTigerItemPrefab:cc.Prefab,dragonTotalBalanceBetLabel:cc.Label,tieTotalBalanceBetLabel:cc.Label,tigerTotalBalanceBetLabel:cc.Label,pageNode:cc.Node,pagePreviewPreview:a,pagePreView:a,pageNext:a,pageNextNext:a,listPageNumberItem:[a]},init:function(t){this.controller=t},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<20;t++)this.pool.put(cc.instantiate(this.dragonTigerItemPrefab));this.dialogForm=this.node.getComponent("DialogForm"),this.listPagination=[],this.sortBetListDragon,this.sortBetListTie,this.sortBetListTiger,this.sortTimeListDragon,this.sortTimeListTie,this.sortTimeListTiger},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.results&&this.initDicesEffect(this.results)},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},handleHistoryDetail:function(t){this.data=t,this.initInfo()},onNextClick:function(){for(var t=this.data.list_histories_match_game_id.length-1;t>=0;t--){if(parseInt(this.data.list_histories_match_game_id[t])===this.matchGameId){this.matchGameId=parseInt(this.data.list_histories_match_game_id[t+1]),this.showLoading();var e={match_game_id:this.matchGameId+""};this.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,e);break}}},onPreviousClick:function(){for(var t=this.data.list_histories_match_game_id.length-1;t>=0;t--){if(parseInt(this.data.list_histories_match_game_id[t])===this.matchGameId){this.matchGameId=parseInt(this.data.list_histories_match_game_id[t-1]),this.showLoading();var e={match_game_id:this.matchGameId+""};this.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,e);break}}},initInfo:function(){if(this.data){var t=this.data.history_detail;if(t){this.showContent();var e=parseInt(t.match_game_id),i=t.time,o=t.results,a=t.list_bets;this.matchLabel.string=String.format(n.TAIXIU_HISTORIES_DETAIL,e,s.getStringDateByTimeStamp(i)),this.initNextPreviousButton(e),this.initDicesSprite(o),this.initDicesEffect(o),this.initListBets(a)}}},initNextPreviousButton:function(t){if(this.nextNode.active=!0,this.previousNode.active=!0,this.data&&this.data.list_histories_match_game_id){var e=parseInt(this.data.list_histories_match_game_id[0]),i=parseInt(this.data.list_histories_match_game_id[this.data.list_histories_match_game_id.length-1]);e===t&&(this.previousNode.active=!1),i===t&&(this.nextNode.active=!1)}},initListBets:function(t){t=this.sortListBetByTimes(t);var e=0,i=0,n=0;for(var a in this.listBetDragon=[],this.listBetTie=[],this.listBetTiger=[],this.sortBetListDragon=null,this.sortBetListTie=null,this.sortTimeListTiger=null,this.sortTimeListDragon=null,this.sortTimeListTie=null,this.sortTimeListTiger=null,t)t[a].type===o.DRAGON?(this.listBetDragon.push(t[a]),e+=t[a].balance_bet):t[a].type===o.TIE?(this.listBetTie.push(t[a]),i+=t[a].balance_bet):t[a].type===o.TIGER&&(this.listBetTiger.push(t[a]),n+=t[a].balance_bet);this.sortTimeListDragon=this.listBetDragon,this.sortBetListTie=this.listBetTie,this.sortTimeListTiger=this.listBetTiger,this.dragonTotalBalanceBetLabel.string=s.numberWithCommas(e),this.tieTotalBalanceBetLabel.string=s.numberWithCommas(i),this.tigerTotalBalanceBetLabel.string=s.numberWithCommas(n),this.setPage(0)},onShowChanLeClick:function(){this.chanLeNode.active=!0,this.taiXiuNode.active=!1,this.chanLeButtonNode.active=!0,this.taiXiuButtonNode.active=!1},onShowTaiXiuClick:function(){this.chanLeNode.active=!1,this.taiXiuNode.active=!0,this.chanLeButtonNode.active=!1,this.taiXiuButtonNode.active=!0},onSortBetDragonClick:function(){this.sortBetListTai?(this.sortBetListTai.reverse(),this.listBetDragon=this.sortBetListTai,this.sortBetListChan.reverse(),this.listBetChan=this.sortBetListChan,this.setPage(this.page)):(this.sortBetListTai=this.sortListBetByBet(this.listBetDragon),this.listBetDragon=this.sortBetListTai,this.sortBetListChan=this.sortListBetByBet(this.listBetChan),this.listBetChan=this.sortBetListChan,this.setPage(this.page))},onSortBetTieClick:function(){this.sortBetListXiu?(this.sortBetListXiu.reverse(),this.listBetTie=this.sortBetListXiu,this.sortBetListLe.reverse(),this.listBetLe=this.sortBetListLe,this.setPage(this.page)):(this.sortBetListXiu=this.sortListBetByBet(this.listBetTie),this.listBetTie=this.sortBetListXiu,this.sortBetListLe=this.sortListBetByBet(this.listBetLe),this.listBetLe=this.sortBetListLe,this.setPage(this.page))},onSortTimeTaiClick:function(){this.sortTimeListTai.reverse(),this.listBetDragon=this.sortTimeListTai,this.sortTimeListChan.reverse(),this.listBetChan=this.sortTimeListChan,this.setPage(this.page)},onSortTimeXiuClick:function(){this.sortTimeListXiu.reverse(),this.listBetTie=this.sortTimeListXiu,this.sortTimeListLe.reverse(),this.listBetLe=this.sortTimeListLe,this.setPage(this.page)},sortListBetByTimes:function(t){var e=t.slice();return e.sort(function(t,e){return t.time-e.time}),e},sortListBetByBet:function(t){var e=t.slice();return e.sort(function(t,e){return e.balance_bet-t.balance_bet}),e},showDetail:function(t){this.matchGameId=parseInt(t),this.showDialog(),this.showLoading();var e={match_game_id:t};this.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,e)},showContent:function(){this.loadingNode.active=!1,this.contentNode.active=!0},showLoading:function(){this.loadingNode.active=!0,this.contentNode.active=!1},initDicesSprite:function(t){this.removeCardChild(),this.setCard(this.dragonCardNode,t[0]),this.setCard(this.tigerCardNode,t[1])},setCard:function(t,e){var i=this.instanceCard(e);i.setPosition(0,0),i.parent=t},instanceCard:function(t){var e=cc.instantiate(this.cardPrefab),i=e.getComponent("CardController"),o=new r(t);return i.init(o),i.reveal(!0),e.cardController=i,e},removeCardChild:function(){this.dragonCardNode.removeAllChildren(!0),this.tigerCardNode.removeAllChildren(!0)},initDicesEffect:function(t){this.results=t,parseInt(t[0]/100)===parseInt(t[1]/100)?this.showTieTextNode():t[0]>t[1]?this.showDragonTextNode():this.showTigerTextNode()},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.page=e,this.listPagination=[],this.listBetDragon&&this.listBetTie&&this.listBetTiger?function(){t.showListContent(e);var i=parseInt(t.listBetDragon.length/o.NUMBER_DETAIL_ITEM),n=parseInt(t.listBetTie.length/o.NUMBER_DETAIL_ITEM),s=parseInt(t.listBetTiger.length/o.NUMBER_DETAIL_ITEM),a=t.listBetDragon.length>t.listBetTie.length?t.listBetDragon.length:t.listBetTie.length;a=a>t.listBetTiger.length?a:t.listBetTiger.length;var r=i>n?i:n;if(r=(r=r>s?r:s)*o.NUMBER_DETAIL_ITEM===a?r-1:r,t.showNumberPagination(r),t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",r),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var c=0,h=t.listPageNumberItem.length;c<h;c++)t.listPageNumberItem[c].init(c+1,c),t.listPageNumberItem[c].enable(),c===e&&t.listPageNumberItem[c].disable(),t.listPagination.push(t.listPageNumberItem[c]);else if(e+2>=r){var l=r;if(r>4)for(var u=t.listPageNumberItem.length-1;u>=0;u--)t.listPageNumberItem[u].init(l+1,l),t.listPageNumberItem[u].enable(),l===e&&t.listPageNumberItem[u].disable(),t.listPagination.push(t.listPageNumberItem[u]),l--;else{for(var d=0,m=t.listPageNumberItem.length;d<m;d++)t.listPageNumberItem[d].enable();t.listPageNumberItem[e].disable()}}else for(var p=-2,f=0,g=t.listPageNumberItem.length;f<g;f++)t.listPageNumberItem[f].init(e+p+1,e+p),t.listPageNumberItem[f].enable(),0===p&&t.listPageNumberItem[f].disable(),t.listPagination.push(t.listPageNumberItem[f]),p++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e+2>=r?(t.pagePreView.init("<",e-1),t.pageNext.init(">",r)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var _=t;if(!t.isEvent){for(var S in t.listPagination){var C=t.listPagination[S].getComponent("PaginationItem").pageOffButtonNode;C.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();_.setPage(t)},C)}t.isEvent=!0}}():this.pageNode.active=!1},showNumberPagination:function(t){this.pageNode.active=!0;for(var e=0;e<this.listPageNumberItem.length;e++)this.listPageNumberItem[e].node.active=!1;if(t<4)for(var i=0;i<=t;i++)this.listPageNumberItem[i].node.active=!0;else for(var o=0;o<this.listPageNumberItem.length;o++)this.listPageNumberItem[o].node.active=!0},showListContent:function(t){this.putAllToPool(),this.addContentByPage(t,this.listBetDragon,this.listDragonNode),this.addContentByPage(t,this.listBetTie,this.listTieNode),this.addContentByPage(t,this.listBetTiger,this.listTigerNode)},addContentByPage:function(t,e,i){if(t*o.NUMBER_DETAIL_ITEM<e.length)for(var n=t*o.NUMBER_DETAIL_ITEM,s=n,a=n+o.NUMBER_DETAIL_ITEM;s<a;s++)if(s<e.length){var r=void 0;this.pool&&(r=this.pool.get()),r||(r=cc.instantiate(this.dragonTigerItemPrefab)),r.getComponent("DragonTigerDetailItem").init(e[s]),r.parent=i}},putAllToPool:function(){this.pool&&(this.putAllPoolNode(this.pool,this.listDragonNode),this.putAllPoolNode(this.pool,this.listTieNode),this.putAllPoolNode(this.pool,this.listTigerNode))},putAllPoolNode:function(t,e){if(t){var i=e.getChildren(),o=[];for(var n in i)o.push(i[n]);for(var s in o)t.put(o[s])}},showDragonTextNode:function(){this.hideAllText(),this.dragonTextOnNode.active=!0,this.dragonTextOffNode.active=!1},showTieTextNode:function(){this.hideAllText(),this.tieTextOnNode.active=!0,this.tieTextOffNode.active=!1},showTigerTextNode:function(){this.hideAllText(),this.tigerTextOnNode.active=!0,this.tigerTextOffNode.active=!1},hideAllText:function(){this.dragonTextOnNode.active=!1,this.tieTextOnNode.active=!1,this.tigerTextOnNode.active=!1,this.dragonTextOffNode.active=!0,this.tieTextOffNode.active=!0,this.tigerTextOffNode.active=!0}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../item/PaginationItem":"PaginationItem","../dragon-tiger/DragonTigerCard":"DragonTigerCard","../dragon-tiger/DragonTigerConstant":"DragonTigerConstant"}],DragonTigerDoor:[function(t,e,i){"use strict";cc._RF.push(e,"8d6b0QiR31C677cklmb58N+","DragonTigerDoor");var o=t("../../../util/FormatUtil"),n=t("../../../object/RoomType"),s=t("./DragonTigerConfig"),a=t("./DragonTigerMove"),r=t("./DragonTigerConstant"),c=t("./DragonTigerEffectCard"),h=t("../../../helper/Message");t("./DragonTigerCard");cc.Class({extends:cc.Component,properties:{dragonMyBetLabel:cc.Label,dragonTotalBetLabel:cc.Label,dragonPlayerLabel:cc.Label,dragonCardNode:cc.Node,dragonSelectNode:cc.Node,dragonEffectNode:cc.Node,tigerMyBetLabel:cc.Label,tigerTotalBetLabel:cc.Label,tigerPlayerLabel:cc.Label,tigerCardNode:cc.Node,tigerSelectNode:cc.Node,tigerEffectNode:cc.Node,tieMyBetLabel:cc.Label,tieTotalbetLabel:cc.Label,tiePlayerLabel:cc.Label,tieSelectNode:cc.Node,tieEffectNode:cc.Node,cardPrefab:cc.Prefab,nanButtonOnNode:cc.Node,nanButtonOffNode:cc.Node,nanNode:cc.Node,DragonTigerMoveD:a,DragonTigerMoveT:a,DragonTigerEffectCardD:c,DragonTigerEffectCardT:c},init:function(t){this.DragonTiger=t,this.DragonTigerChip=t.DragonTigerChip,this.DragonTigerTime=t.DragonTigerTime,this.DragonTigerMoveD.init(t),this.DragonTigerMoveT.init(t),this.DragonTigerEffectCardD.init(t),this.DragonTigerEffectCardT.init(t)},onLoad:function(){this.timeShowCard=null,this.timeShowEffect=null},onEnable:function(){},onDisable:function(){},initBetData:function(t){if(t){var e=t.gold,i=t.money;this.DragonTiger.getMoneyType()?this.initBetDataByData(i):this.initBetDataByData(e)}},initBetDataByData:function(t){var e=t.dragon,i=t.tiger,n=t.tie;this.dragonMyBetLabel.string=o.numberWithCommas(e.my_bet),this.dragonTotalBetLabel.string=o.numberWithCommas(e.total_bet),this.dragonPlayerLabel.string="("+o.numberWithCommas(e.total_players)+")",this.tigerMyBetLabel.string=o.numberWithCommas(i.my_bet),this.tigerTotalBetLabel.string=o.numberWithCommas(i.total_bet),this.tigerPlayerLabel.string="("+o.numberWithCommas(i.total_players)+")",this.tieMyBetLabel.string=o.numberWithCommas(n.my_bet),this.tieTotalbetLabel.string=o.numberWithCommas(n.total_bet),this.tiePlayerLabel.string="("+o.numberWithCommas(n.total_players)+")"},initDices:function(t,e){t&&(this.data=t,t.results?e?(this.data.results=this.data.histories[0].results,this.showEffectDragonTigerTieResult(t.results),this.DragonTigerTime.initResult(t.results)):this.isNan()?(this.showNanNode(),this.showResult(this.data.results,!1,s.TIME_NAN)):this.showResult(this.data.results,!0,s.TIME_SHOW_CARD):this.hide())},showResult:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2];this.initCardSprite(t||this.data.results,e);var o=!e;this.startTimeShowCard(i,o),e&&(clearTimeout(this.timeShowEffect),this.timeShowEffect=setTimeout(function(){this.DragonTiger.initResult(),this.showEffectDragonTigerTieResult(t||this.data.results),clearTimeout(this.timeShowEffect)}.bind(this),s.TIME_SHOW_EFFECT_CARD))},startTimeShowCard:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.TIME_SHOW_CARD,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];clearTimeout(this.timeShowCard),this.timeShowCard=setTimeout(function(){this.hideNanNode(),this.removeCardChild(),this.DragonTigerTime.initResult(this.data.results),this.showEffectDragonTigerTieResult(this.data.results),e&&this.DragonTiger.initResult(),clearTimeout(this.timeShowCard)}.bind(this),t)},initCardSprite:function(t,e){this.DragonTigerEffectCardD.showCard(t[0],e),this.DragonTigerEffectCardT.showCard(t[1],e)},onNanClick:function(){this.nanButtonOnNode.active=!this.nanButtonOnNode.active,this.nanButtonOffNode.active=!this.nanButtonOffNode.active},onDragonBetClick:function(){if(this.DragonTigerChip.getBet()){var t={amount:this.DragonTigerChip.getBet(),type:r.DRAGON,room_type:this.DragonTiger.getMoneyType()?n.MONEY_CODE:n.GOLD_CODE};this.DragonTiger.sendBet(t)}else this.DragonTiger.showMessage(h.DRAGON_TIGER_NO_BET_SELECTED)},onTigerBetClick:function(){if(this.DragonTigerChip.getBet()){var t={amount:this.DragonTigerChip.getBet(),type:r.TIGER,room_type:this.DragonTiger.getMoneyType()?n.MONEY_CODE:n.GOLD_CODE};this.DragonTiger.sendBet(t)}else this.DragonTiger.showMessage(h.DRAGON_TIGER_NO_BET_SELECTED)},onTieBetClick:function(){if(this.DragonTigerChip.getBet()){var t={amount:this.DragonTigerChip.getBet(),type:r.TIE,room_type:this.DragonTiger.getMoneyType()?n.MONEY_CODE:n.GOLD_CODE};this.DragonTiger.sendBet(t)}else this.DragonTiger.showMessage(h.DRAGON_TIGER_NO_BET_SELECTED)},isNan:function(){return this.nanButtonOffNode.active},showEffectDragonTigerTieResult:function(t){parseInt(t[0]/100)===parseInt(t[1]/100)?(this.hide(),this.tieSelectNode.active=!0,this.tieEffectNode.active=!0):t[0]>t[1]?(this.hide(),this.dragonSelectNode.active=!0,this.dragonEffectNode.active=!0):(this.hide(),this.tigerSelectNode.active=!0,this.tigerEffectNode.active=!0)},showNanNode:function(){this.nanNode.active=!0},hideNanNode:function(){this.nanNode.active=!1},hide:function(){this.dragonSelectNode.active=!1,this.tigerSelectNode.active=!1,this.tieSelectNode.active=!1,this.dragonEffectNode.active=!1,this.tigerEffectNode.active=!1,this.tieEffectNode.active=!1},removeCardChild:function(){this.DragonTigerEffectCardD.reset(),this.DragonTigerEffectCardT.reset()},reset:function(){this.hide(),this.removeCardChild(),clearTimeout(this.timeShowCard),clearTimeout(this.timeShowEffect),this.dragonMyBetLabel.string=0,this.dragonTotalBetLabel.string=0,this.dragonPlayerLabel.string="(0)",this.tigerMyBetLabel.string=0,this.tigerTotalBetLabel.string=0,this.tigerPlayerLabel.string="(0)",this.tieMyBetLabel.string=0,this.tieTotalbetLabel.string=0,this.tiePlayerLabel.string="(0)",this.nanNode.active=!1,this.DragonTigerMoveD.reset(),this.DragonTigerMoveT.reset(),this.nanNode.setPosition(0,20)}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","./DragonTigerCard":"DragonTigerCard","./DragonTigerConfig":"DragonTigerConfig","./DragonTigerConstant":"DragonTigerConstant","./DragonTigerEffectCard":"DragonTigerEffectCard","./DragonTigerMove":"DragonTigerMove"}],DragonTigerEffectCard:[function(t,e,i){"use strict";cc._RF.push(e,"31ab7B0s+lLoI9Fn3Fh74Ag","DragonTigerEffectCard");t("../../../helper/Config");var o=t("./DragonTigerConfig"),n=t("./DragonTigerCard");cc.Class({extends:cc.Component,properties:{cardNode:cc.Node,cardBackNode:cc.Node,cardPrefab:cc.Prefab},init:function(t){this.DragonTiger=t},showCard:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.instanceCard(t);this.cardNode.addChild(i),e&&this.DragonTiger.node.active?(this.cardPrefab.active=!0,this.node.getComponent(cc.Animation).play()):this.cardPrefab.active=!1},instanceCard:function(t){var e=cc.instantiate(this.cardPrefab),i=e.getComponent("CardController"),s=new n(t);return i.init(s),i.reveal(!0),e.scale=o.SCALE_CARD_1,e.setPosition(0,0),e.cardController=i,e},reset:function(){this.node.getComponent(cc.Animation).stop(),this.cardPrefab.active=!1,this.cardNode.removeAllChildren()}}),cc._RF.pop()},{"../../../helper/Config":"Config","./DragonTigerCard":"DragonTigerCard","./DragonTigerConfig":"DragonTigerConfig"}],DragonTigerHistories:[function(t,e,i){"use strict";cc._RF.push(e,"40b61aGfn5Ds5hB75xUsZ/C","DragonTigerHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyMiniPokerItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryDragonTiger(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyMiniPokerItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("DragonTigerHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],DragonTigerHistory2:[function(t,e,i){"use strict";cc._RF.push(e,"f52921fLVxMLrN+HI7uavxe","DragonTigerHistory2");var o=t("./DragonTigerConstant"),n=t("./DragonTigerHistoryItem2");cc.Class({extends:cc.Component,properties:{historyLayout:cc.Node,historyHintNode:cc.Node,historyHintLabel:cc.Label,listHistoryItem:[n]},init:function(t){for(var e in this.DragonTiger=t,this.listHistoryItem)this.listHistoryItem[e].init(t)},onLoad:function(){},initHistories:function(t){for(var e=t.length>o.NUMBER_HISTORY?o.NUMBER_HISTORY:t.length,i=0;i<this.listHistoryItem.length;i++)i<e?(this.listHistoryItem[i].node.active=!0,this.listHistoryItem[i].initData(t[i]),0==i&&this.listHistoryItem[i].showSelectedNode()):this.listHistoryItem[i].node.active=!1},showGameHint:function(t){var e=t.getResult();if(e){this.historyHintNode.active=!0,this.historyHintLabel.string=this.getResult(e);var i=this.historyHintNode.parent.convertToWorldSpaceAR(this.historyHintNode),o=t.node.convertToNodeSpaceAR(i);this.historyHintNode.x-=o.x}},stopAllAnimationHistory:function(){for(var t in this.listHistoryItem)this.listHistoryItem[t].onDisable()},hideGameHint:function(){this.historyHintNode.active=!1,this.historyHintLabel.string=""},getResult:function(t){var e="";return t[0]&&t[1]&&(e=this.getResultByTrueValue(t[0])+"-"+this.getResultByTrueValue(t[1])),e},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=11===(e=12===(e=13===e?"K":e)?"Q":e)?"J":e,t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e}}),cc._RF.pop()},{"./DragonTigerConstant":"DragonTigerConstant","./DragonTigerHistoryItem2":"DragonTigerHistoryItem2"}],DragonTigerHistoryItem1:[function(t,e,i){"use strict";cc._RF.push(e,"0164bWnoF5HqpQUENwl6LJ0","DragonTigerHistoryItem1");t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{suitSprite:cc.Sprite,trueValueLabel:cc.Label,selectNode:cc.Node,listSuitSpriteFrame:[cc.SpriteFrame]},init:function(t,e,i){this.DragonTiger=t,this.data=e,this.trueValue=i,this.selectNode.active=!1},onLoad:function(){},onEnable:function(){this.trueValue?(this.suitSprite.spriteFrame=this.getSuitSprite(this.trueValue),this.trueValueLabel.string=this.getResultByTrueValue(this.trueValue)):this.node.active=!1},showLight:function(){this.selectNode.active=!0},getSuitSprite:function(t){switch(t%4){case 0:return this.listSuitSpriteFrame[0];case 1:return this.listSuitSpriteFrame[1];case 2:return this.listSuitSpriteFrame[2];case 3:return this.listSuitSpriteFrame[3];default:return this.listSuitSpriteFrame[0]}},getResultByTrueValue:function(t){var e=parseInt(t/100);return e=11===(e=12===(e=13===(e=1===e?"A":e)?"K":e)?"Q":e)?"J":e},onClick:function(){this.DragonTiger&&this.DragonTiger.controller.MiniGame.DragonTigerDetail.showDetail(this.data.match_game_id)}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],DragonTigerHistoryItem2:[function(t,e,i){"use strict";cc._RF.push(e,"8bfbcl/zTFKHoDhIQIn3X08","DragonTigerHistoryItem2");t("./DragonTigerConstant");cc.Class({extends:cc.Component,properties:{itemSprite:cc.Sprite,dragonSpriteFrame:cc.SpriteFrame,tigerSpriteFrame:cc.SpriteFrame,tieSpriteFramme:cc.SpriteFrame,selectedNode:cc.Node,animationNode:cc.Node},init:function(t){this.DragonTiger=t,this.DragonTigerHistory=t.DragonTigerHistory2},onLoad:function(){var t=this;this.onMouseEnter=function(){t.DragonTigerHistory&&t.DragonTigerHistory.showGameHint(t)},this.onMouseLeave=function(){t.DragonTigerHistory&&t.DragonTigerHistory.hideGameHint()},this.node.getComponent("ButtonHover")&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onEnable:function(){this.DragonTiger&&this.DragonTiger.node.active&&this.selectedNode.active&&this.animationNode.getComponent(cc.Animation).play()},onDisable:function(){this.DragonTiger&&this.selectedNode.active&&this.animationNode.getComponent(cc.Animation).stop(),this.animationNode.y=0},initData:function(t){if(t){this.data=t;var e=t.results;this.hideSelectNode();var i=void 0;i=parseInt(e[0]/100)===parseInt(e[1]/100)?this.tieSpriteFramme:e[0]>e[1]?this.dragonSpriteFrame:this.tigerSpriteFrame,this.itemSprite.spriteFrame=i,this.animationNode.y=0}else this.node.active=!1},showSelectedNode:function(){this.DragonTiger&&this.DragonTiger.node.active&&this.animationNode.getComponent(cc.Animation).play(),this.selectedNode.active=!0},hideSelectNode:function(){this.animationNode.getComponent(cc.Animation).stop(),this.selectedNode.active=!1},hideLight:function(){this.selectedNode.active=!1},showLight:function(){this.selectedNode.active=!0},getResult:function(){return this.data.results},onClick:function(){this.DragonTiger&&this.DragonTiger.controller.MiniGame.DragonTigerDetail.showDetail(this.data.match_game_id)}}),cc._RF.pop()},{"./DragonTigerConstant":"DragonTigerConstant"}],DragonTigerHistoryItem3:[function(t,e,i){"use strict";cc._RF.push(e,"f1a72iZ2kNL9qk5kACD0vNA","DragonTigerHistoryItem3");t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{resultSprite:cc.Sprite,dragonSpriteFrame:cc.SpriteFrame,tigerSpriteFrame:cc.SpriteFrame,tieSpriteFrame:cc.SpriteFrame},init:function(t){this.results=t},onLoad:function(){},onEnable:function(){this.results?parseInt(this.results[0]/100)===parseInt(this.results[1]/100)?this.resultSprite.spriteFrame=this.tieSpriteFrame:this.results[0]>this.results[1]?this.resultSprite.spriteFrame=this.dragonSpriteFrame:this.resultSprite.spriteFrame=this.tigerSpriteFrame:this.node.active=!1},getType:function(){var t=this.results;return parseInt(t[0]/100)===parseInt(t[1]/100)?"tie":t[0]>t[1]?"dragon":"tiger"}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],DragonTigerHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"b42e85QqbFIyIIN+6FGsMkC","DragonTigerHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_bet_amount),this.getLabel.string=o.numberWithCommas(t.total_prize_amount),this.resultLabel.string=this.getResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){var e="";if(t)try{if((t=JSON.parse(t))[0]&&t[1])return e=this.getResultByTrueValue(t[0])+this.getResultByTrueValue(t[1])}catch(t){return e}return e},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=11===(e=12===(e=13===e?"K":e)?"Q":e)?"J":e,t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],DragonTigerHistory:[function(t,e,i){"use strict";cc._RF.push(e,"623b1UhbudKB7vFJXIo/bzC","DragonTigerHistory");var o=t("./DragonTigerConfig");cc.Class({extends:cc.Component,properties:{resultOnButtonNode:cc.Node,resultOffButtonNode:cc.Node,pointOnButtonNode:cc.Node,pointOffButtonNode:cc.Node,history1Node:cc.Node,history2Node:cc.Node,history2LayoutNode:cc.Node,numberDragonLabel:cc.Label,numberTigerLabel:cc.Label,numberTieLabel:cc.Label,listLayoutDragonNode:[cc.Node],listEclipDragonNode:[cc.Node],listLayoutTigerNode:[cc.Node],listEclipTigerNode:[cc.Node],dragonTigerHistoryItem1Prefab:cc.Prefab,dragonTigerHistoryItem2Prefab:cc.Prefab},init:function(t,e){this.DragonTiger=t,this.data=e,this.initFirst(),this.node.active&&this.initData(e)},initFirst:function(){if(!this.pool){this.pool1=new cc.NodePool,this.pool2=new cc.NodePool;for(var t=0;t<30;t++){var e=cc.instantiate(this.dragonTigerHistoryItem1Prefab);this.pool1.put(e)}for(var i=0;i<40;i++){var o=cc.instantiate(this.dragonTigerHistoryItem2Prefab);this.pool2.put(o)}}},onLoad:function(){this.onPointClick()},onEnable:function(){this.data&&this.initData(this.data)},initData:function(t){t.length>0&&(this.initFirst(),this.initHistory1(t),this.initHistory2(t))},onResultClick:function(){this.hideAll(),this.resultOffButtonNode.active=!1,this.resultOnButtonNode.active=!0,this.history2Node.active=!0},onPointClick:function(){this.hideAll(),this.pointOffButtonNode.active=!1,this.pointOnButtonNode.active=!0,this.history1Node.active=!0},onCloseClick:function(){this.node.active=!1},hideAll:function(){this.resultOffButtonNode.active=!0,this.resultOnButtonNode.active=!1,this.pointOffButtonNode.active=!0,this.pointOnButtonNode.active=!1,this.history1Node.active=!1,this.history2Node.active=!1},initHistory1:function(t){this.putAllChipToPool1();var e=[],i=[];this.showLight=!1,(e=t.slice()).length>o.MAX_LENGTH_HISTORY&&(e=e.splice(0,o.MAX_LENGTH_HISTORY)),e.length>1&&parseInt(e[0].match_game_id)>parseInt(e[1].match_game_id)&&e.reverse();for(var n=0,s=this.listEclipDragonNode.length;n<s;n++){var a=n+(n+1)*o.NUMBER_ITEM_IN_LIST;if(e[a]){i.push(e[a]);var r=this.instanceItem1(e[a],e[a].results[0]),c=this.instanceItem1(e[a],e[a].results[1]);this.listEclipDragonNode[n].addChild(r),this.listEclipTigerNode[n].addChild(c),r.setPosition(0,0),c.setPosition(0,0),a===e.length-1&&(r.getComponent("DragonTigerHistoryItem1").showLight(),c.getComponent("DragonTigerHistoryItem1").showLight(),this.showLight=!0)}}for(var h=0,l=0;l<e.length;l++)e[l]===i[h]&&(h++,e.splice(l,1),l-=1);h=0;for(var u=0;u<this.listLayoutDragonNode.length;u++)for(var d=0;d<e.length;d++){0!==d&&d%o.NUMBER_ITEM_IN_LIST==0&&u++;var m=this.instanceItem1(e[d],e[d].results[0]),p=this.instanceItem1(e[d],e[d].results[1]);this.listLayoutDragonNode[u].addChild(m),this.listLayoutTigerNode[u].addChild(p),d===e.length-1&&(this.showLight||(m.getComponent("DragonTigerHistoryItem1").showLight(),p.getComponent("DragonTigerHistoryItem1").showLight()),u=this.listLayoutDragonNode.length)}},initHistory2:function(t){var e=4,i=0,n=0,s=void 0;this.putAllChipToPool2();var a=this.instanceListAllPosition(),r=t.slice();r.length>1&&parseInt(r[0].match_game_id)<parseInt(r[1].match_game_id)&&r.reverse();for(var c=0,h=r.length;c<h;c++){var l=r[c].results,u=this.instanceItem2(l);if(0===c)s=u.getComponent("DragonTigerHistoryItem3").getType(),i=0,e=4,a[n].push(u);else{var d=u.getComponent("DragonTigerHistoryItem3").getType();s===d?(--e<0&&(i++,e=4),a[n].push(u)):(e=4,i++,a[++n].push(u)),s=d}if(this.history2LayoutNode.addChild(u),u.setPosition(0,0),i>=o.MAX_COL)break}this.sortAllPositionY(a.slice()),this.initNumberDragonTigerTie(a.slice())},instanceItem1:function(t,e){var i=void 0;return this.pool1&&(i=this.pool1.get()),i||(i=cc.instantiate(this.dragonTigerHistoryItem1Prefab)),i.getComponent("DragonTigerHistoryItem1").init(this.DragonTiger,t,e),i},instanceItem2:function(t){var e=void 0;return this.pool2&&(e=this.pool2.get()),e||(e=cc.instantiate(this.dragonTigerHistoryItem2Prefab)),e.getComponent("DragonTigerHistoryItem3").init(t),e},putAllChipToPool1:function(){if(this.pool1){for(var t=0;t<this.listLayoutDragonNode.length;t++)this.putAllChipToPoolNode(this.pool1,this.listLayoutDragonNode[t]),this.putAllChipToPoolNode(this.pool1,this.listLayoutTigerNode[t]);for(var e=0;e<this.listEclipDragonNode.length;e++)this.putAllChipToPoolNode(this.pool1,this.listEclipDragonNode[e]),this.putAllChipToPoolNode(this.pool1,this.listEclipTigerNode[e])}},putAllChipToPool2:function(){this.pool2&&this.putAllChipToPoolNode(this.pool2,this.history2LayoutNode)},putAllChipToPoolNode:function(t,e){var i=e.getChildren(),o=[];for(var n in i)o.push(i[n]);for(var s in o)t.put(o[s])},instanceListAllPosition:function(){for(var t=[],e=0,i=o.MAX_COL;e<=i;e++){t.push([])}return t},sortAllPositionY:function(t){for(var e=0,i=4,n=0,s=(t=t.reverse()).length;n<s;n++)if(t[n].length>0){for(var a=t[n].reverse(),r=0;r<a.length;r++){var c=e*o.DISTANCE_W_STATISTIC+15,h=i*o.DISTANCE_H_STATISTIC+16;a[r].x=c,a[r].y=h,--i<0&&r<a.length-1&&(e++,i=4)}e++,i=4}},initNumberDragonTigerTie:function(t){for(var e=0,i=0,o=0,n=0,s=t.length;n<s;n++)if(t[n].length>0){var a=t[n],r=a[0].getComponent("DragonTigerHistoryItem3").getType();"tie"===r&&(o+=a.length),"dragon"===r&&(e+=a.length),"tiger"===r&&(i+=a.length)}this.numberDragonLabel.string=e,this.numberTigerLabel.string=i,this.numberTieLabel.string=o}}),cc._RF.pop()},{"./DragonTigerConfig":"DragonTigerConfig"}],DragonTigerMove:[function(t,e,i){"use strict";cc._RF.push(e,"36dc1NCvClIyI2nIKgyEOQx","DragonTigerMove"),cc.Class({extends:cc.Component,properties:{moveNode:cc.Node},init:function(t){this.DragonTiger=t,this.DragonTigerDoor=t.DragonTigerDoor,this.positionX=this.moveNode.x,this.positionY=this.moveNode.y},onLoad:function(){var t=this;this.onTouchMove=function(e){var i=e.touch.getDelta();t.moveNode.x+=i.x,t.moveNode.y+=i.y,t.isShow()&&t.isHide&&(t.isHide=!1,t.DragonTigerDoor.hideNanNode(),t.DragonTiger.initResult(),t.DragonTigerDoor.startTimeShowCard()),e.stopPropagation()},this.addEventMove(),this.isHide=!0},addEventMove:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node)},reset:function(){this.isHide=!0},isShow:function(){return this.moveNode.x<=-100||this.moveNode.x>=30||(this.moveNode.y<=-10||this.moveNode.y>=160)}}),cc._RF.pop()},{}],DragonTigerState:[function(t,e,i){"use strict";cc._RF.push(e,"ca28eyicm5PwqDUdttmNoQp","DragonTigerState");e.exports={currentState:null,BETTING:"BETTING",BALANCE_DOOR:"BALANCE_DOOR",FINISH:"FINISH",setState:function(t){this.currentState=t},setBetting:function(){this.currentState=this.BETTING},setBalanceDoor:function(){this.currentState=this.BALANCE_DOOR},setFinish:function(){this.currentState=this.FINISH},isBetting:function(){return this.currentState===this.BETTING},isBalanceDoor:function(){return this.currentState===this.BALANCE_DOOR},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],DragonTigerTime:[function(t,e,i){"use strict";cc._RF.push(e,"72ceaCnhapOZrxeQM12kfrv","DragonTigerTime");var o=t("./DragonTigerCard"),n=t("./DragonTigerConfig");cc.Class({extends:cc.Component,properties:{timeBettingNode:cc.Node,timeFinishNode:cc.Node,timeBettingLabel:cc.Label,timeFinishLabel:cc.Label,cardDragonNode:cc.Node,cardTigerNode:cc.Node,cardPrefab:cc.Prefab},init:function(t){this.DragonTiger=t,this.DragonTigerState=t.DragonTigerState},onLoad:function(){this.timeInterval=null},initTime:function(t){t&&(this.data=t,this.time=this.data.time_remain,this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,this.DragonTiger&&this.DragonTiger.startTimeGetFinish(),clearInterval(this.timeInterval)),this.data&&(this.data.time_remain=this.time,this.setTimeLabel(this.time))}.bind(this),1e3))},setTimeLabel:function(t){var e=parseInt(t);this.DragonTiger&&this.DragonTiger.node.active&&(this.DragonTigerState.isBetting()?(this.timeBettingNode.active=!0,this.timeFinishNode.active=!1,this.timeBettingLabel&&(this.timeBettingLabel.string=e,e<=10?this.timeAnimation():this.timeDefault()),this.removeCardChild()):this.DragonTigerState.isFinish()&&(this.timeBettingNode.active=!1,this.timeFinishNode.active=!0,this.timeFinishLabel&&(this.timeFinishLabel.string=e)))},timeAnimation:function(){this.timeBettingLabel.node.getComponent(cc.Animation).play()},timeDefault:function(){this.timeBettingLabel.node.getComponent(cc.Animation).stop(),this.timeBettingLabel.node.opacity=255,this.timeBettingLabel.node.color=new cc.Color(252,198,60,255),this.timeBettingLabel.node.scale=1},initResult:function(t){this.removeCardChild(),this.setCard(this.cardDragonNode,t[0]),this.setCard(this.cardTigerNode,t[1])},setCard:function(t,e){var i=this.instanceCard(e);i.setPosition(0,0),i.parent=t},instanceCard:function(t){var e=cc.instantiate(this.cardPrefab),i=e.getComponent("CardController"),s=new o(t);return i.init(s),i.reveal(!0),e.scale=n.SCALE_CARD_2,e.cardController=i,e},removeCardChild:function(){this.cardDragonNode.removeAllChildren(!0),this.cardTigerNode.removeAllChildren(!0)},reset:function(){this.removeCardChild(),this.timeBettingNode.active=!0,this.timeFinishNode.active=!1,this.timeDefault()}}),cc._RF.pop()},{"./DragonTigerCard":"DragonTigerCard","./DragonTigerConfig":"DragonTigerConfig"}],DragonTiger:[function(t,e,i){"use strict";cc._RF.push(e,"b68ebNj45dK3pSsaHECQYPY","DragonTiger");var o=t("../../../base/BaseController"),n=t("./DragonTigerConstant"),s=t("./DragonTigerChip"),a=t("./DragonTigerDoor"),r=t("./DragonTigerTime"),c=t("./DragonTigerChain"),h=t("./DragonTigerHistory"),l=t("./DragonTigerHistory2"),u=t("./DragonTigerState"),d=t("./DragonTigerConfig"),m=t("../MiniGameResult"),p=t("./DragonTigerChat"),f=t("../../../helper/Config"),g=t("../../../helper/Constant"),_=t("../../../util/FormatUtil"),S=t("../../../helper/Message"),C=(t("../../../object/RoomType"),t("../MiniGameConstant"));cc.Class({extends:o,properties:{matchGameIdLabel:cc.Label,DragonTigerChip:s,DragonTigerDoor:a,DragonTigerTime:r,DragonTigerChain:c,DragonTigerHistory:h,DragonTigerHistory2:l,DragonTigerChat:p,MiniGameResult:m,toastPrefab:cc.Prefab,callDragonNode:cc.Node,callDragonNickNameLabel:cc.Label,callDragonMoneyLabel:cc.Label,callDragonSkeleton:sp.Skeleton},init:function(t){this.controller=t},onLoad:function(){this._super(),this.DragonTigerState=u,this.DragonTigerChip.init(this),this.DragonTigerDoor.init(this),this.DragonTigerChain.init(this),this.DragonTigerTime.init(this),this.DragonTigerChat.init(this),this.DragonTigerHistory2.init(this),this.dataFinish=[],this.timeOutGetFinish=null,this.timeShowCallDragon=null,this.initData()},onEnable:function(){this.sendRequest.sendNoPrefixToZone(n.ADD_EVENT),this.setTypeRoom(!0)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.sendRequest.sendNoPrefixToZone(n.REMOVE_EVENT)},onDragonTigerClick:function(){this.setShowDragonTiger(!this.isShow)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case n.REQUEST_INFO:this.handleInfo(i);break;case n.REQUEST_START:this.handleStart(i);break;case n.REQUEST_FINISH:this.handleFinish(i);break;case n.REQUEST_UPDATE:this.handleUpdate(i);break;case n.REQUEST_CALL_DRAGON:this.handleCallDragonTiger(i,!0);break;case n.REQUEST_CALL_TIGER:this.handleCallDragonTiger(i,!1);break;case n.REQUEST_MESSAGE:this.handleMessage(o);break;case n.REQUEST_CHAT:this.handleChat(i);break;case n.REQUEST_HISTORY_DETAIL:this.handleHistoryDetail(i);break;case n.CURRENT_TOP_CHAIN_2:this.controller.MiniGame.DragonTigerChains.initTopDay(i);break;case n.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataDragonTiger(i)}},handleInfo:function(t){var e=t.game_state;this.match_game_id=t.match_game_id,this.DragonTigerState.setState(e),this.data=t,this.data.histories=this.data.histories.reverse(),this.DragonTigerTime.initTime(t),this.DragonTigerDoor.initDices(t,!0),this.DragonTigerDoor.initBetData(t),this.DragonTigerChain.initChain(t),this.initHistories(),this.initChat(),this.matchGameIdLabel.string=String.format(S.MINIGAME_ID,this.match_game_id)},handleStart:function(t){this.reset(),this.DragonTigerState.setBetting(),this.DragonTigerTime.initTime(t),this.match_game_id=t.match_game_id,this.matchGameIdLabel.string=String.format(S.MINIGAME_ID,this.match_game_id)},handleUpdate:function(t){this.match_game_id=t.match_game_id,this.DragonTigerDoor.initBetData(t),this.DragonTigerTime.initTime(t),this.matchGameIdLabel.string=String.format(S.MINIGAME_ID,this.match_game_id)},handleFinish:function(t){this.dataFinish.push(t),1===this.dataFinish.length&&(this.data=t,clearTimeout(this.timeOutGetFinish),this.DragonTigerState.setFinish(),this.histories.length>=d.NUMBER_HISTORY&&this.histories.pop(),this.histories.splice(0,0,{match_game_id:this.match_game_id,results:this.data.results||this.data.result}),this.data.histories=this.histories,this.DragonTigerTime.initTime(t),this.DragonTigerDoor.initDices(t,!1))},handleCallDragonTiger:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.callDragonNode.active=!0,e?this.callDragonSkeleton.setAnimation(0,"rong",!0):this.callDragonSkeleton.setAnimation(0,"ho",!0);var i=t.prize,o=t.nick_name;this.callDragonMoneyLabel.string=_.numberWithCommas(i),this.callDragonNickNameLabel.string=o,this.startTimeCallDragon()},handleMessage:function(t){this.showMessage(t)},handleChat:function(t){this.DragonTigerChat.addChat(t)},handleHistoryDetail:function(t){this.controller.MiniGame.DragonTigerDetail.handleHistoryDetail(t)},initData:function(){var t=this.getTempData()[n.IS_SHOW_CHAT];this.DragonTigerChat.node.active=t},initHistories:function(){this.data&&this.data.histories&&(this.histories=this.data.histories,this.DragonTigerHistory2.initHistories(this.histories),this.DragonTigerHistory.init(this,this.histories))},initChat:function(){this.data&&this.DragonTigerChat.initChat(this.data.chat)},initResult:function(){if(this.data){var t=this.data;if((t.money_change||t.money_add)&&this.DragonTigerState.isFinish()){var e=parseInt(t.money_add),i="dragon"===t.result?"Long":"H\u1ed5";"tie"===t.result&&(i="H\xf2a"),0!==parseFloat(e)&&this.MiniGameResult.show(e,i)}this.initHistories(),this.DragonTigerChain.initChain(t)}},onCloseClick:function(){this.setShowDragonTiger(!1)},onHistoryGameClick:function(){this.DragonTigerHistory.node.active=!this.DragonTigerHistory.node.active},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showDragonTigerHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(C.DRAGON_TIGER),this.controller.MiniGame.GameMiniRank.showDialog()},onChatClick:function(){this.DragonTigerChat.node.active=!this.DragonTigerChat.node.active,this.getTempData()[n.IS_SHOW_CHAT]=this.DragonTigerChat.node.active},onEventChainClick:function(){this.controller.MiniGame.DragonTigerChains.showDialog()},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(g.DRAGON_TIGER)},sendBet:function(t){this.sendRequest.sendNoPrefixToZone(n.BET,t)},getMoneyType:function(){return this.isMoneyType},setShowDragonTiger:function(t){this.node.active=t,this.isShow=t,cc.sys.localStorage.setItem([n.IS_SHOW],this.isShow)},startTimeGetFinish:function(){clearTimeout(this.timeOutGetFinish),this.timeOutGetFinish=setInterval(function(){clearTimeout(this.timeOutGetFinish),this.sendRequest.sendNoPrefixToZone(n.GET_FINISH)}.bind(this),1e3*n.TIME_GET_FINISH)},startTimeCallDragon:function(){clearTimeout(this.timeShowCallDragon),this.timeShowCallDragon=setInterval(function(){this.callDragonNode.active=!1,this.callDragonSkeleton.clearTrack(0),clearTimeout(this.timeShowCallDragon)}.bind(this),1e3*n.TIME_CALL_DRAGON)},setTypeRoom:function(t){this.isMoneyType=t},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=f.MINIGAME_SCALE_TOAST,e.setPosition(f.MINIGAME_POSITION_TOAST_X,f.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},reset:function(){this.dataFinish=[],this.is_send_bet=!1,clearTimeout(this.timeOutGetFinish),clearTimeout(this.timeShowCallDragon),this.callDragonNode.active=!1,this.callDragonSkeleton.clearTrack(0),this.DragonTigerDoor.reset(),this.DragonTigerTime.reset(),this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","./DragonTigerChain":"DragonTigerChain","./DragonTigerChat":"DragonTigerChat","./DragonTigerChip":"DragonTigerChip","./DragonTigerConfig":"DragonTigerConfig","./DragonTigerConstant":"DragonTigerConstant","./DragonTigerDoor":"DragonTigerDoor","./DragonTigerHistory":"DragonTigerHistory","./DragonTigerHistory2":"DragonTigerHistory2","./DragonTigerState":"DragonTigerState","./DragonTigerTime":"DragonTigerTime"}],DropDownList2:[function(t,e,i){"use strict";cc._RF.push(e,"955e9sXPgVOIqJqS/wqiFyr","DropDownList2");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueLabel:cc.Label,expandNode:cc.Node,contentNode:cc.Node,dropboxItemPrefab:cc.Prefab},onLoad:function(){},selectByValue:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=this.contentNode.getChildren();for(var i in e){var n=e[i].getComponent("DropDownListItem");n.getValue()==t?(n.showSelectedNode(),this.value=t,this.data=n.getData(),this.selectedItem=n,this.valueLabel.string="number"==typeof t?o.numberWithCommas(t):t,this.callback&&this.callback(this)):n.hideSelectedNode()}},onItemClick:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=t.target,i=e.getComponent("DropDownListItem");i.showSelectedNode();var n=i.getValue();this.selectedItem=e,this.value=n,this.valueLabel.string="number"==typeof n?o.numberWithCommas(n):n,this.callback&&this.callback(this)},onDropDownListClick:function(){this.expandNode.active?(this.expandNode.active=!1,this.expandNode.zIndex=0):(this.expandNode.active=!0,this.expandNode.zIndex=1)},addItem:function(t,e){this.data=e;var i=cc.instantiate(this.dropboxItemPrefab),n=i.getComponent("DropDownListItem");n.init(t,e),i.on(cc.Node.EventType.TOUCH_END,this.onItemClick.bind(this),this.newItem),this.contentNode.addChild(i),this.selectedItem||(this.value=t,this.selectedItem=i,n.showSelectedNode(),this.valueLabel.string="number"==typeof t?o.numberWithCommas(t):t)},setCallback:function(t,e){this.callback=t.bind(e),this.controller=e},getValue:function(){return this.value},getData:function(){return this.data},getSelectedItem:function(){return this.selectedItem.getComponent("DropDownListItem")},removeAllItem:function(){this.contentNode.removeAllChildren(!0),this.value="",this.valueLabel.string=""}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],DropDownListItem:[function(t,e,i){"use strict";cc._RF.push(e,"0fe8cQ3a+tJ0ZDY9i+J3jrv","DropDownListItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueLabel:cc.Label,selectedNode:cc.Node},onLoad:function(){},init:function(t,e){this.value=t,this.data=e,this.valueLabel.string="number"==typeof t?o.numberWithCommas(t):t},getValue:function(){return this.value},getData:function(){return this.data},showSelectedNode:function(){this.selectedNode.active=!0},hideSelectedNode:function(){this.selectedNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],DropDownList:[function(t,e,i){"use strict";cc._RF.push(e,"bc845h2c69CK4RFOqkVuN9v","DropDownList");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{valueLabel:cc.Label,expandNode:cc.Node,dropboxItemPrefab:cc.Prefab},onLoad:function(){},selectByValue:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=this.expandNode.getChildren();for(var i in e){var n=e[i].getComponent("DropDownListItem");n.getValue()==t?(n.showSelectedNode(),this.value=t,this.data=n.getData(),this.selectedItem=n,this.valueLabel.string="number"==typeof t?o.numberWithCommas(t):t,this.callback&&this.callback(this)):n.hideSelectedNode()}},onItemClick:function(t){this.selectedItem&&this.selectedItem.getComponent("DropDownListItem").hideSelectedNode();var e=t.target,i=e.getComponent("DropDownListItem");i.showSelectedNode();var n=i.getValue();this.selectedItem=e,this.value=n,this.valueLabel.string="number"==typeof n?o.numberWithCommas(n):n,this.callback&&this.callback(this)},onDropDownListClick:function(){this.expandNode.active?(this.expandNode.active=!1,this.expandNode.zIndex=0):(this.expandNode.active=!0,this.expandNode.zIndex=1)},addItem:function(t,e){this.data=e;var i=cc.instantiate(this.dropboxItemPrefab),n=i.getComponent("DropDownListItem");n.init(t,e),i.on(cc.Node.EventType.TOUCH_END,this.onItemClick.bind(this),this.newItem),this.expandNode.addChild(i),this.selectedItem||(this.value=t,this.selectedItem=i,n.showSelectedNode(),this.valueLabel.string="number"==typeof t?o.numberWithCommas(t):t)},setCallback:function(t,e){this.callback=t.bind(e),this.controller=e},getValue:function(){return this.value},getData:function(){return this.data},getSelectedItem:function(){return this.selectedItem.getComponent("DropDownListItem")},removeAllItem:function(){this.expandNode.removeAllChildren(!0),this.value="",this.valueLabel.string=""}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],EmotionItem:[function(t,e,i){"use strict";cc._RF.push(e,"4528eITagFEXImkqcCUC+8U","EmotionItem"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCommon=t},onLoad:function(){this.textureName=this.node.getComponent(cc.Sprite).spriteFrame._name},onClick:function(){this.GameCommon.sendChat(this.textureName),this.GameCommon.hideQuickChatNode(),this.GameCommon.showHistoryChatNode(),this.GameCommon.unFocusChatEditBox()}}),cc._RF.pop()},{}],EventGame:[function(t,e,i){"use strict";cc._RF.push(e,"5bd81sGonlFWKWOB5vsPfH1","EventGame");var o=t("../../../../helper/Constant"),n=t("../../../../prefab/mini-game/MiniGameConstant"),s=t("../../../../ui/button/ButtonShowHide"),a=t("../../../../util/FormatUtil"),r=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,topNode:cc.Node,topContentScrollView:cc.ScrollView,taixiuContentScrollView:cc.ScrollView,topMiniGameItemPrefab:cc.Prefab,chainTaiXiuItemPrefab:cc.Prefab,buttonTopOnNode:cc.Node,buttonTopOffNode:cc.Node,buttonContentOnNode:cc.Node,buttonContentOffNode:cc.Node,topButtonNode:cc.Node,button1:s,button2:s,button3:s,button4:s,button5:s,button6:s,button7:s,button8:s,button9:s,button10:s,button11:s,event1ContentNode:cc.Node,event2ContentNode:cc.Node,event3ContentNode:cc.Node,event4ContentNode:cc.Node,event5ContentNode:cc.Node,event6ContentNode:cc.Node,event7ContentNode:cc.Node,event8ContentNode:cc.Node,event9ContentNode:cc.Node,event10ContentNode:cc.Node,event11ContentNode:cc.Node},init:function(t){this.GameCenter=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.initEvent()},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.onEvent1Click(),this.onContentClick()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initDataTaiXiu:function(t){this.node.active&&(this.game_name===o.CHAN_LE?this.data=t.chan_le_top_chains:this.data=t.tai_xiu_top_chains,this.initDataChain(this.data.chain_win_day))},initDataTop:function(t){if(this.node.active){var e=[];e[0]=t[2],e[1]=t[0];var i=[];i[0]=t[3],i[1]=t[1],this.data=e,this.game_name===o.BAU_CUA?this.initData(this.data[0]):this.initData(this.data[1])}},initDataChain:function(t){if(this.taixiuContentScrollView.content.removeAllChildren(!0),t&&t)for(var e=t.length>10?10:t.length,i=0;i<e;i++){var o=cc.instantiate(this.chainTaiXiuItemPrefab);o.parent=this.taixiuContentScrollView.content,o.getComponent("TaiXiuChainItem").init(t[i],i)}},initData:function(t){if(this.topContentScrollView.content.removeAllChildren(!0),t&&t)for(var e=t.length>10?10:t.length,i=0;i<e;i++){var o=cc.instantiate(this.topMiniGameItemPrefab);o.parent=this.topContentScrollView.content,o.getComponent("GameMiniRankItem").init(t[i],i)}},initEvent:function(){this.button1&&this.button1.init(this,this.onEvent1Click),this.button2&&this.button2.init(this,this.onEvent2Click),this.button3&&this.button3.init(this,this.onEvent3Click),this.button4&&this.button4.init(this,this.onEvent4Click),this.button5&&this.button5.init(this,this.onEvent5Click),this.button6&&this.button6.init(this,this.onEvent6Click),this.button7&&this.button7.init(this,this.onEvent7Click),this.button8&&this.button8.init(this,this.onEvent8Click),this.button9&&this.button9.init(this,this.onEvent9Click),this.button10&&this.button10.init(this,this.onEvent10Click),this.button11&&this.button11.init(this,this.onEvent11Click)},onContentClick:function(){this.hideAllContentTop(),this.hideAllButtonContentTop(),this.buttonContentOnNode.active=!0,this.buttonContentOffNode.active=!1,this.contentNode.active=!0},onTopClick:function(){this.hideAllContentTop(),this.hideAllButtonContentTop(),this.buttonTopOnNode.active=!0,this.buttonTopOffNode.active=!1,this.topNode.active=!0,this.getContentTopByGameName(this.game_name)},hideAllButtonContentTop:function(){this.buttonContentOffNode.active=!0,this.buttonContentOnNode.active=!1,this.buttonTopOffNode.active=!0,this.buttonTopOnNode.active=!1},hideAllContentTop:function(){this.contentNode.active=!1,this.topNode.active=!1},onEvent1Click:function(){this.hideAllButton(),this.hideAllContent(),this.button1.showItemSelect(),this.event1ContentNode.active=!0,this.game_name=o.TAI_XIU,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent2Click:function(){this.hideAllButton(),this.hideAllContent(),this.button2.showItemSelect(),this.event2ContentNode.active=!0,this.game_name=o.BAU_CUA,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent3Click:function(){this.hideAllButton(),this.hideAllContent(),this.button3.showItemSelect(),this.event3ContentNode.active=!0,this.game_name=o.CHAN_LE,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent4Click:function(){this.hideAllButton(),this.hideAllContent(),this.button4.showItemSelect(),this.event4ContentNode.active=!0,this.game_name=o.MINI_BACAY,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent5Click:function(){this.hideAllButton(),this.hideAllContent(),this.button5.showItemSelect(),this.event5ContentNode.active=!0,this.game_name=o.DIAMOND,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent6Click:function(){this.hideAllButton(),this.hideAllContent(),this.button6.showItemSelect(),this.event6ContentNode.active=!0,this.game_name=o.MINI_POKER,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent7Click:function(){this.hideAllButton(),this.hideAllContent(),this.button7.showItemSelect(),this.event7ContentNode.active=!0,this.game_name=o.DIAMOND_2,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent8Click:function(){this.hideAllButton(),this.hideAllContent(),this.button8.showItemSelect(),this.event8ContentNode.active=!0,this.game_name=o.BOM,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent9Click:function(){this.hideAllButton(),this.hideAllContent(),this.button9.showItemSelect(),this.event9ContentNode.active=!0,this.game_name=o.MODERN_SLOT,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent10Click:function(){this.hideAllButton(),this.hideAllContent(),this.button10.showItemSelect(),this.event10ContentNode.active=!0,this.game_name=o.CLASSIC1,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},onEvent11Click:function(){this.hideAllButton(),this.hideAllContent(),this.button11.showItemSelect(),this.event11ContentNode.active=!0,this.game_name=o.DRAGON,this.checkShowHideButtonTop(this.game_name),this.topNode.active&&this.getContentTopByGameName(this.game_name)},checkShowHideButtonTop:function(t){t===o.CLASSIC1||t===o.MODERN_SLOT||t===o.ZOOMBIES||t===o.ONE001||t===o.DRAGON?(this.topButtonNode.active=!1,this.onContentClick()):this.topButtonNode.active=!0},getContentTopByGameName:function(t){this.taixiuContentScrollView.node.active=!1,this.topContentScrollView.node.active=!0,this.topContentScrollView.content.removeAllChildren(!0),this.taixiuContentScrollView.content.removeAllChildren(!0),t!==o.TAI_XIU&&t!==o.CHAN_LE||this.GameCenter.MiniGame&&this.GameCenter.MiniGame.TaiXiu&&this.GameCenter.MiniGame.TaiXiuChain&&(this.GameCenter.MiniGame.TaiXiuChain.getCurrentTopChain(),this.taixiuContentScrollView.node.active=!0,this.topContentScrollView.node.active=!1),t===o.BAU_CUA&&this.GameCenter.MiniGame&&this.GameCenter.MiniGame.BauCua&&this.GameCenter.MiniGame.GameMiniRank&&this.getTopbauCua(),t===o.MINI_BACAY&&this.GameCenter.MiniGame&&this.GameCenter.MiniGame.MiniBaCay&&this.GameCenter.MiniGame.GameMiniRank&&this.GameCenter.MiniGame.GameMiniRank.setMiniGameName(n.MINI_BACAY),t===o.MINI_POKER&&this.GameCenter.MiniGame&&this.GameCenter.MiniGame.MiniPoker&&this.GameCenter.MiniGame.GameMiniRank&&this.GameCenter.MiniGame.GameMiniRank.setMiniGameName(n.MINI_POKER),t===o.DIAMOND&&this.GameCenter.MiniGame&&this.GameCenter.MiniGame.Diamond&&this.GameCenter.MiniGame.GameMiniRank&&this.GameCenter.MiniGame.GameMiniRank.setMiniGameName(n.DIAMOND),t===o.DIAMOND_2&&this.GameCenter.MiniGame&&this.GameCenter.MiniGame.Pirate&&this.GameCenter.MiniGame.GameMiniRank&&this.GameCenter.MiniGame.GameMiniRank.setMiniGameName(n.DIAMOND_2_2),t===o.BOM&&this.GameCenter.MiniGame&&this.GameCenter.MiniGame.Bom&&this.GameCenter.MiniGame.GameMiniRank&&this.GameCenter.MiniGame.GameMiniRank.setMiniGameName(n.BOM)},getTopbauCua:function(){var t=this;if(this.dataBauCua)this.initData(this.dataBauCua);else{var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.getTopWeekBauCua(e,function(e){var i=e.data.money;i&&(t.dataBauCua=a.sortDataByAmount(i.this_week),t.initData(t.dataBauCua))},function(e){t.GameCenter.showDialogMessage(r.BAU_CUA_TOP_WEEK_TITLE,e.msg)})}},hideAllButton:function(){this.button1&&this.button1.hideItemSelect(),this.button2&&this.button2.hideItemSelect(),this.button3&&this.button3.hideItemSelect(),this.button4&&this.button4.hideItemSelect(),this.button5&&this.button5.hideItemSelect(),this.button6&&this.button6.hideItemSelect(),this.button7&&this.button7.hideItemSelect(),this.button8&&this.button8.hideItemSelect(),this.button9&&this.button9.hideItemSelect(),this.button10&&this.button10.hideItemSelect(),this.button11&&this.button11.hideItemSelect()},hideAllContent:function(){this.event1ContentNode&&(this.event1ContentNode.active=!1),this.event2ContentNode&&(this.event2ContentNode.active=!1),this.event3ContentNode&&(this.event3ContentNode.active=!1),this.event4ContentNode&&(this.event4ContentNode.active=!1),this.event5ContentNode&&(this.event5ContentNode.active=!1),this.event6ContentNode&&(this.event6ContentNode.active=!1),this.event7ContentNode&&(this.event7ContentNode.active=!1),this.event8ContentNode&&(this.event8ContentNode.active=!1),this.event9ContentNode&&(this.event9ContentNode.active=!1),this.event10ContentNode&&(this.event10ContentNode.active=!1),this.event11ContentNode&&(this.event11ContentNode.active=!1)}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message","../../../../prefab/mini-game/MiniGameConstant":"MiniGameConstant","../../../../ui/button/ButtonShowHide":"ButtonShowHide","../../../../util/FormatUtil":"FormatUtil"}],Event:[function(t,e,i){"use strict";cc._RF.push(e,"81e02SeD3hDpKyTC1IsJrp8","Event"),cc.Class({extends:cc.Component,properties:{eventItemPrefab:cc.Prefab,eventListScrollView:cc.ScrollView,eventContentRichText:cc.RichText},init:function(t){this.GameCenter=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.listEvents=[],this.initData()},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.EVENT;if(e){this.eventListScrollView.content.removeAllChildren(!0);for(var i=0;i<e.length;i++){var o=cc.instantiate(this.eventItemPrefab),n=o.getComponent("EventItem");n.init(this.GameCenter,e[i]),o.parent=this.eventListScrollView.content,this.listEvents.push(n)}var s=this.currentId||0,a=!1;for(var r in this.listEvents)this.listEvents[r].data.id==s&&(this.listEvents[r].onClick(),a=!0);a||this.listEvents.length>0&&this.listEvents[0].onClick()}}},loadData:function(t){this.unSelectAllEvent(),t&&(this.eventContentRichText.string=t.content)},unSelectAllEvent:function(){for(var t in this.listEvents)this.listEvents[t].unSelect()},showEvent:function(t){if(this.currentId=t,this.listEvents)for(var e in this.listEvents)this.listEvents[e].data.id==t&&this.listEvents[e].onClick()}}),cc._RF.pop()},{}],FFEvent:[function(t,e,i){"use strict";cc._RF.push(e,"20f61UTNtZFrrtsGJwYWii7","FFEvent"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active}}),cc._RF.pop()},{}],FFGameCardsList:[function(t,e,i){"use strict";cc._RF.push(e,"8c40cDkyWxAI7tD7hvKatxI","FFGameCardsList");var o=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{previousNode:cc.Node,listGamePageView:cc.PageView},init:function(t){this.FireFish=t},onLoad:function(){this.isShow=!0,this.showX=-80,this.hideX=490},onShowClick:function(){this.FireFish.Audio.playClick(),this.isShow?(this.node.stopAllActions(),this.node.runAction(cc.scaleTo(.25,0,1)),this.previousNode.stopAllActions(),this.previousNode.runAction(cc.moveTo(.25,this.hideX,this.previousNode.y))):(this.node.stopAllActions(),this.node.runAction(cc.scaleTo(.25,1,1)),this.previousNode.stopAllActions(),this.previousNode.runAction(cc.moveTo(.25,this.showX,this.previousNode.y))),this.isShow=!this.isShow},onChangePageClick:function(){this.onShowClick()},onBaCayClick:function(){this.joinGameLobby(o.BA_CAY)},onLiengClick:function(){this.joinGameLobby(o.LIENG)},onMauBinhClick:function(){this.joinGameLobby(o.MAU_BINH)},onPhomClick:function(){this.joinGameLobby(o.PHOM)},onPokerClick:function(){this.joinGameLobby(o.POKER)},onSamClick:function(){this.joinGameLobby(o.SAM)},onSamSoloClick:function(){this.joinGameLobby(o.SAMSOLO)},onTLMNClick:function(){this.joinGameLobby(o.TLMN)},onTLMNSoloClick:function(){this.joinGameLobby(o.TLMNSOLO)},onXocDiaClick:function(){this.joinGameLobby(o.XOC_DIA)},joinGameLobby:function(t){this.FireFish.showProcessingNode();var e={game_name:t};this.FireFish.sendRequest.sendNoPrefixToZone(o.REQUEST_JOIN_GAME,e)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant"}],FFLockFish:[function(t,e,i){"use strict";cc._RF.push(e,"50651QNyG9GbKRErA08BUJh","FFLockFish"),cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,ballItemPrefab:cc.Prefab,pointFishNode:cc.Node},init:function(t){this.FireFishGame=t,this.FishManager=t.FishManager},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<10;t++){var e=cc.instantiate(this.ballItemPrefab);this.pool.put(e)}this.isCountDraw=0,this.distanceBall=90},initFish:function(t){if(this.isCountDraw++,this.isCountDraw>=10){this.isCountDraw=0;var e=this.FireFishGame.getMyPlayerNode();this.drawLockFish(e,t)}},removeLockFish:function(){this.pointFishNode.active=!1,this.putAllBallToPool()},drawLockFish:function(t,e){var i=t.parent.convertToWorldSpaceAR(t),o=this.contentNode.convertToNodeSpaceAR(i),n=t.parent.convertToWorldSpaceAR(e),s=this.contentNode.convertToNodeSpaceAR(n),a=this.getStraightLine(o,s),r=this.getListPosition(o,s,a);this.showPointFishNode(s),this.drawBall(r)},drawBall:function(t){for(var e in this.putAllBallToPool(),t){var i=this.instanceBall();i&&(this.contentNode.addChild(i),i.position=t[e])}},getStraightLine:function(t,e){var i=(t.y-e.y)/(t.x-e.x);return{a:i,b:t.y-i*t.x}},showPointFishNode:function(t){this.pointFishNode.active=!0,this.pointFishNode.position=t},getListPosition:function(t,e,i){var o=[];o.push(t);for(var n=this.getNumberBall(t,e),s=0;s<n;s++){var a=this.findPositionInLine(o[o.length-1],e,i,this.distanceBall);a&&o.push(a)}return o.splice(0,1),o},instanceBall:function(){var t=void 0;return this.pool&&(t=this.pool.get()),t||(t=cc.instantiate(this.ballItemPrefab)),t},putAllBallToPool:function(){if(this.pool){var t=this.contentNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},findPositionInLine:function(t,e,i,o){var n=t.x,s=t.y,a=i.a,r=i.b,c=Math.pow(a,2)+1,h=2*(a*r-a*s-n),l=Math.pow(n,2)+Math.pow(s-r,2)-Math.pow(o,2),u=Math.pow(h,2)-4*c*l;if(u>=0){var d=(-h+Math.sqrt(u))/(2*c),m=(-h-Math.sqrt(u))/(2*c),p=a*d+r,f=a*m+r;if(this.checkPositionInlIne(t,e,d,p))return{x:d,y:p};if(this.checkPositionInlIne(t,e,m,f))return{x:m,y:f}}return null},getNumberBall:function(t,e){var i=t.x-e.x,o=t.y-e.y,n=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),s=parseInt(n/this.distanceBall);return s-1>0?s-1:0},checkPositionInlIne:function(t,e,i,o){if(t.x<=i&&i<=e.x){if(t.y<=o&&o<=e.y)return!0;if(e.y<=o&&o<=t.y)return!0}if(e.x<=i&&i<=t.x){if(t.y<=o&&o<=e.y)return!0;if(e.y<=o&&o<=t.y)return!0}return!1}}),cc._RF.pop()},{}],FFRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"c7384wjoDRL4K7LF5v9FW5X","FFRankItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{noSprite:cc.Sprite,noSpriteFrames:[cc.SpriteFrame],noLabel:cc.Label,nameLabel:cc.Label,valueLabel:cc.Label,moneyNode:cc.Node,bgSprite:cc.Sprite,bg1SpriteFrame:cc.SpriteFrame,bg2SpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e){this.initNo(e),this.nameLabel.string=t.nick_name;var i=t.money;this.valueLabel.string=o.numberWithCommas(i),this.bgSprite.spriteFrame=e%2==1?this.bg1SpriteFrame:this.bg2SpriteFrame},initNo:function(t){if(t<3){this.noSprite.node.active=!0,this.noLabel.node.active=!1;var e=this.noSpriteFrames[t];this.noSprite.spriteFrame=e}else this.noSprite.node.active=!1,this.noLabel.node.active=!0,this.noLabel.string=parseInt(t)+1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],FFRankLuck:[function(t,e,i){"use strict";cc._RF.push(e,"1a407SnuVVMwZSiC/NEFPDz","FFRankLuck"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,ffRankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView},init:function(t){this.FireFish=t,this.FFRank=t.FFRank},onLoad:function(){},initData:function(t){if(this.hideLoadingNode(),this.rankScrollView.node.active=!0,this.data=t,t)for(var e in t){var i=cc.instantiate(this.ffRankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("FFRankItem").init(t[e],e)}},showLoadingNode:function(){this.loadingNode.active=!0,this.rankScrollView.node.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1},removeAllData:function(){this.data=null,this.rankScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{}],FFRankMegaPrize:[function(t,e,i){"use strict";cc._RF.push(e,"b7717aYiwpGfKeFYG6GcGYw","FFRankMegaPrize"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,ffRankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView},init:function(t){this.FireFish=t},onLoad:function(){},initData:function(t){if(this.hideLoadingNode(),this.rankScrollView.node.active=!0,this.data=t,t)for(var e in t){var i=cc.instantiate(this.ffRankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("FFRankItem").init(t[e],e)}},showLoadingNode:function(){this.loadingNode.active=!0,this.rankScrollView.node.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1},removeAllData:function(){this.data=null,this.rankScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{}],FFRankMiss:[function(t,e,i){"use strict";cc._RF.push(e,"bf2f4b/3H9NiYpRlnci2pr2","FFRankMiss"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,ffRankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView},init:function(t){this.FireFish=t},onLoad:function(){},initData:function(t){if(this.hideLoadingNode(),this.rankScrollView.node.active=!0,this.data=t,t)for(var e in t){var i=cc.instantiate(this.ffRankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("FFRankItem").init(t[e],e)}},showLoadingNode:function(){this.loadingNode.active=!0,this.rankScrollView.node.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1},removeAllData:function(){this.data=null,this.rankScrollView.content.removeAllChildren(!0)}}),cc._RF.pop()},{}],FFRank:[function(t,e,i){"use strict";cc._RF.push(e,"c9eebbRF7tFyZiV0COZQTtn","FFRank");var o=t("./rank/FFRankLuck"),n=t("./rank/FFRankMiss"),s=t("./rank/FFRankMegaPrize");t("./../FireFishConstant");cc.Class({extends:cc.Component,properties:{rankLuckOnNode:cc.Node,rankLuckOffNode:cc.Node,rankMissOnNode:cc.Node,rankMissOffNode:cc.Node,rankMegaPrizeOnNode:cc.Node,rankMegaPrizeOffNode:cc.Node,rankLuckContentNode:cc.Node,rankMissContentNode:cc.Node,rankMegaPrizeContentNode:cc.Node,FFRankLuck:o,FFRankMiss:n,FFRankMegaPrize:s},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI,this.FFRankLuck.init(t),this.FFRankMiss.init(t),this.FFRankMegaPrize.init(t)},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.resetAllData(),this.getData(),this.showRankMegaPrize()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.hideAllContents(),this.removeXhr()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active},getData:function(){var t=this;this.data=null;var e={token:this.FireFish.getToken(),user_id:this.FireFish.getUserId()};this.xhr=this.FireFish.api.getTopLongVuong(e,function(e){t.data=e.data;var i=t.data.big_win,o=t.data.collision_mega,n=t.data.fire;t.FFRankMegaPrize.initData(o),t.FFRankLuck.initData(i),t.FFRankMiss.initData(n)},function(t){})},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},onRankLuckClick:function(){this.FireFish.Audio.playClick(),this.initBeforeClick(),this.rankLuckOnNode.active=!0,this.rankLuckOffNode.active=!1,this.rankLuckContentNode.active=!0},onRankMissClick:function(){this.FireFish.Audio.playClick(),this.initBeforeClick(),this.rankMissOnNode.active=!0,this.rankMissOffNode.active=!1,this.rankMissContentNode.active=!0},onRankMegaPrizeClick:function(){this.FireFish.Audio.playClick(),this.initBeforeClick(),this.showRankMegaPrize()},showRankMegaPrize:function(){this.rankMegaPrizeOnNode.active=!0,this.rankMegaPrizeOffNode.active=!1,this.rankMegaPrizeContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},hideAllOnButtons:function(){this.rankLuckOnNode.active=!1,this.rankMissOnNode.active=!1,this.rankMegaPrizeOnNode.active=!1},showAllOffButtons:function(){this.rankLuckOffNode.active=!0,this.rankMissOffNode.active=!0,this.rankMegaPrizeOffNode.active=!0},hideAllContents:function(){this.rankLuckContentNode.active=!1,this.rankMissContentNode.active=!1,this.rankMegaPrizeContentNode.active=!1},resetAllData:function(){this.FFRankLuck.showLoadingNode(),this.FFRankLuck.removeAllData(),this.FFRankMegaPrize.showLoadingNode(),this.FFRankMegaPrize.removeAllData(),this.FFRankMiss.showLoadingNode(),this.FFRankMiss.removeAllData()}}),cc._RF.pop()},{"./../FireFishConstant":"FireFishConstant","./rank/FFRankLuck":"FFRankLuck","./rank/FFRankMegaPrize":"FFRankMegaPrize","./rank/FFRankMiss":"FFRankMiss"}],FFRoomItem:[function(t,e,i){"use strict";cc._RF.push(e,"490d63bwKRDrIdum/aHCBQa","FFRoomItem");var o=t("../../helper/Message"),n=t("../../util/FormatUtil"),s=t("../../object/RoomType");cc.Class({extends:cc.Component,properties:{minBetLabel:cc.Label},init:function(t,e){this.FireFish=t,this.data=e,this.minBetLabel.string=String.format(o.FIREFISH_MIN_BET,n.numberWithCommas(e.value),o.MONEY)},onLoad:function(){},onClick:function(){this.FireFish.Audio.playClick(),this.FireFish.showProcessingNode();var t=this.FireFish.getLastJoinedRoom().groupId;this.FireFish.sfsManager.joinRoom(t,this.data.value,s.MONEY_CODE)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil"}],FFTutorial:[function(t,e,i){"use strict";cc._RF.push(e,"e21e0RwtOxMf5AlHpzK4D5K","FFTutorial"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active}}),cc._RF.pop()},{}],FireFishBasePlayer:[function(t,e,i){"use strict";cc._RF.push(e,"12523NZpjxCLrdA4kHOUW7B","FireFishBasePlayer");var o=t("../../../object/fire-fish/Bullet"),n=t("../../../util/FormatUtil"),s=t("../../../util/RandomUtil"),a=t("../../../helper/FireFishConfig"),r=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label,listGunPrefab:[cc.Prefab],gunNode:cc.Node},init:function(t){this.FireFish=t.FireFish,this.FireFishGame=t,this.gameNode=t.gameNode,this.timeFireInterval=a.TIME_FITE_INTERVAL,this.bulletSpeed=this.FireFish.getBulletSpeed(),this.gameWidth=this.gameNode.width,this.gameHeight=this.gameNode.height,this.currentGun=0,this.currentMoney=0;var e=this.gunNode.parent.convertToWorldSpace(this.gunNode);this.moveX=e.x,this.moveY=e.y+50,this.lastFiredTime=Date.now(),this.changeGun(this.currentGun)},onLoad:function(){},setMoney:function(t){this.currentMoney=t,this.moneyLabel.string=n.numberWithCommas(t)},addMoney:function(t){this.currentMoney+=t,this.setMoney(this.currentMoney)},minusMoney:function(t){this.currentMoney-=t,this.setMoney(this.currentMoney)},plusGun:function(){var t=this.listGunPrefab.length,e=parseInt(this.currentGun)+1;e>t&&(e-=t),this.changeGun(e),this.FireFishGame.sendChangeGun(e)},minusGun:function(){var t=this.listGunPrefab.length,e=parseInt(this.currentGun)-1;e<1&&(e+=t),this.changeGun(e),this.FireFishGame.sendChangeGun(e)},changeGun:function(t){this.gunNode.removeAllChildren(!0);var e=cc.instantiate(this.listGunPrefab[t-1]||this.listGunPrefab[t]);e&&(e.setPosition(0,0),e.parent=this.gunNode,this.gun=e.getComponent("Gun"),this.currentGun=t)},changeGunWithAnimation:function(t){this.changeGun(t)},fire:function(t){if(this.FireFishGame.isLockFish()){var e=this.FireFishGame.fishManager.getFishLock();if(e){var i=e.node.parent.convertToWorldSpaceAR(e.node);this.moveX=i.x,this.moveY=i.y}}var o=new cc.Vec2(this.moveX,this.moveY);this.checkTimeAndFire(o,!0)},checkTimeAndFire:function(t,e){var i=Date.now();if(i-this.lastFiredTime>=this.timeFireInterval){this.FireFish.AudioFireFish.playFireByGunType(this.currentGun),this.lastFiredTime=i;var n=this.gameNode.convertToNodeSpaceAR(t);n.x+=this.gameWidth/2,n.y+=this.gameHeight/2;var a=this.gunNode.convertToWorldSpaceAR(this.gunNode),c=this.gameNode.convertToNodeSpaceAR(a);a.x-=320,a.y-=360;var h=180*Math.atan2(n.y-a.y,n.x-a.x)/Math.PI,l=75*Math.cos(h/180*Math.PI),u=75*Math.sin(h/180*Math.PI);c.x+=l,c.y+=u;var d="";if(e){var m=this.FireFish.getUser();d=r.SERVER_ID_1+"-"+m.user_id+"-"+(new Date).getTime()}else d=s.getRandomInt(1,50)+"-"+(new Date).getTime();var p=new o(this.FireFishGame,this.currentGun,c.x,c.y,h,this.bulletSpeed,d);this.FireFishGame.bulletManager.addBullet(p),this.gun.fire(),e&&(this.FireFishGame.sendFire(h,d),clearTimeout(this.timeOutAutoFire),this.FireFishGame.isAutoFire()&&(this.timeOutAutoFire=setTimeout(function(){this.fire()}.bind(this),this.timeFireInterval+50)))}},setRotateReceivedInSever:function(t){this.isPosition0()||this.isPosition1()?this.gunNode.angle=-(90-t):(this.isPosition2()||this.isPosition3())&&(this.gunNode.angle=-(270-t))},isPosition0:function(){return this.node.y<0},isPosition1:function(){return this.node.y<0},isPosition2:function(){return this.node.y>0},isPosition3:function(){return this.node.y>0}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/FireFishConfig":"FireFishConfig","../../../object/fire-fish/Bullet":"Bullet","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil"}],FireFishBulletManager:[function(t,e,i){"use strict";cc._RF.push(e,"efbf23+blZBTbBeFGEN2yUu","FireFishBulletManager");var o=t("../../util/Util"),n={bullets:[],bulletHandlerServer:[],init:function(t){this.FireFish=t.FireFish,this.FireFishGame=t,this.fishManager=t.fishManager,this.FireFishFormulaManager=t.FireFishFormulaManager},addBullet:function(t){this.bullets.push(t)},handlerBulletServer:function(t,e){var i={};i.id_bullet=t,i.sign=e,this.bulletHandlerServer.push(i)},getIdBulletFormServer:function(t){for(var e=0,i=this.bulletHandlerServer.length;e<i;e++){if(this.bulletHandlerServer[e].sign===t)return this.bulletHandlerServer.splice(e,1)[0].id_bullet}return null},update:function(t,e){for(var i=0;i<this.bullets.length;i++)this.bullets[i].update(t)},detroyAllBullet:function(){for(var t=0;t<this.bullets.length;t++)this.destroyBullet(this.bullets[t],t--)},destroyBullet:function(t,e){t.destroyNode(),this.bullets.splice(e,1)},destroyBulletWithAnimation:function(t){this.bullets[t].ScriptBaseBullet.explosion(),this.bullets.splice(t,1)},destroyBulletWithAnimationByBullet:function(t){for(var e in this.bullets)this.bullets[e].getIdBullet()==t.getIdBullet()&&(this.FireFish.AudioFireFish.playHit(),this.destroyBulletWithAnimation(e))},checkCollision:function(t,e,i,o){for(var n=0;n<e.length;n++)if(e[n].isIdle(i)&&this.FireFishFormulaManager.checkCollision(this.bullets[t],e[n],o))return this.FireFish.AudioFireFish.playHit(),this.destroyBulletWithAnimation(t),!0;return!1},reset:function(){o.clearArray(this.bullets)}};e.exports=n,cc._RF.pop()},{"../../util/Util":"Util"}],FireFishCenter:[function(t,e,i){"use strict";cc._RF.push(e,"ced6bHhKzRCDKt00YTG1xtx","FireFishCenter");var o=t("../../prefab/item/FFRoomItem"),n=t("./other/FFGameCardsList"),s=t("./other/FireFishHeader");cc.Class({extends:cc.Component,properties:{listRoomItem:[o],FFGameCardsList:n,FireFishHeader:s},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI,this.FFGameCardsList.init(t),this.FireFishHeader.init(t)},onLoad:function(){var t=this.getConfigFake();if(t&&t.length>0)for(var e in this.listRoomItem)this.listRoomItem[e].init(this.FireFish,t[e])},onRankClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showFFRankForm()},onEventClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showFFEventForm()},onHelpClick:function(){this.FireFish.Audio.playClick()},getConfigFake:function(){return[{value:1},{value:10},{value:100},{value:1e3}]}}),cc._RF.pop()},{"../../prefab/item/FFRoomItem":"FFRoomItem","./other/FFGameCardsList":"FFGameCardsList","./other/FireFishHeader":"FireFishHeader"}],FireFishConfig:[function(t,e,i){"use strict";cc._RF.push(e,"689ffY/flZHxrKf31gtSUJB","FireFishConfig");e.exports={SHOT_FISH_URL_ORBIT:"game-firefish/orbit/Orbit.json",SHOT_FISH_TIME_UPDATE:.035,SCORE_POOL:10,BULLET_POOL:25,FISH_POOL:250,MY_PLAYER_SHOW_GUN_CHOISE:.15,FRAME_RATE:60,BULLET_WIDTH:20,BULLET_HEIGHT:20,TIME_FITE_INTERVAL:100,TIME_FISH_DIE:1,TIME_DELAY_WATTING:30,TIME_UPDATE_REMAIN_TIME:3e3,TIME_ROTATE_SCREEN:.2,TIME_MAX_ACCELERATION:3,TIME_MAX_DIFFERENCE:.1,TIME_ACCELERATION:1,GUNS_TYPE:[1,1,2,3,5,10,20],ID_BULLET_MYSELF:"myself",FISH_SCALE_COLLIDER:1,FISHS:[{name:"fish1",type:1,width:55,height:23,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish2",type:2,width:60,height:22,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish3",type:3,width:66,height:33,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish4",type:4,width:69,height:36,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish5",type:5,width:73,height:32,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish6",type:6,width:72,height:37,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish7",type:7,width:87,height:68,scale:1.7,scale_width:.9,scale_height:.7},{name:"fish8",type:8,width:87,height:56,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish9",type:9,width:131,height:75,scale:1.7,scale_width:.8,scale_height:.5},{name:"fish10",type:10,width:88,height:40,scale:1.7,scale_width:.9,scale_height:.8},{name:"fish11",type:11,width:133,height:61,scale:1.5,scale_width:.9,scale_height:.8},{name:"fish12",type:12,width:132,height:162,scale:1.5,scale_width:.8,scale_height:.6},{name:"fish13",type:13,width:142,height:142,scale:1.2,scale_width:.7,scale_height:.7},{name:"fish14",type:14,width:166,height:91,scale:1.2,scale_width:.6,scale_height:.6},{name:"fish15",type:15,width:127,height:184,scale:1.5,scale_width:.9,scale_height:.8},{name:"fish16",type:16,width:395,height:188,scale:1.3,scale_width:.8,scale_height:.25},{name:"fish17",type:17,width:118,height:57,scale:1.3,scale_width:.9,scale_height:.8},{name:"fish18",type:18,width:377,height:239,scale:1.3,scale_width:.85,scale_height:.3},{name:"fish19",type:19,width:395,height:188,scale:1.3,scale_width:.8,scale_height:.25},{name:"fish200",type:200,width:377,height:239,scale:1.3,scale_width:.85,scale_height:.3}]},cc._RF.pop()},{}],FireFishConstant:[function(t,e,i){"use strict";cc._RF.push(e,"d7a1bIi05tKspc3/cOjJjXW","FireFishConstant");e.exports={WAITING:"WAITING",ROOM_INFO:"ROOM_INFO",START_ROUND:"START_ROUND",START_GAME:"START_GAME",GET_REMAIN_TIME:"GET_REMAIN_TIME",BROADCAST:"BROADCAST",NEW_MSG:"NEW_MSG",RESULT:"result",UPDATE_MEGA_PRIZE_MONEY:"UPDATE_MEGA_PRIZE_MONEY",GAME_STATUS_WAITING:"waiting",GAME_STATUS_PLAYING:"playing",ANGLE:"angle",TYPE:"type",POSITION:"position",GUN_TYPE:"gun_type",MONEY:"money",BULLET_ID:"bullet_id",SIGN_BULLET:"sign",FISH_ID:"fish_id",REQUEST_FISH_DIE:"REQUEST_FISH_DIE",REQUEST_FIRE:"REQUEST_FIRE",REQUEST_CHANGE_GUN:"REQUEST_CHANGE_GUN",REQUEST_CHANGE_POSITION:"REQUEST_CHANGE_POSITION",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_FIRE_HIT:"REQUEST_FIRE_HIT",REMAIN_TIME:"GET_REMAIN_TIME",REQUEST_ADD_FISHS:"REQUEST_ADD_FISHS",REQUEST_FISH_HIT:"REQUEST_FISH_HIT",REQUEST_FIRE_HIT_FAIL:"REQUEST_FIRE_HIT_FAIL",REQUEST_REMOVE_FISHS:"REQUEST_REMOVE_FISHS",GET_TOP:"GET_TOP"},cc._RF.pop()},{}],FireFishFormulaManager:[function(t,e,i){"use strict";cc._RF.push(e,"5b0ea3jaP1CN49iV/0KFH9v","FireFishFormulaManager"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},checkCollision:function(t,e,i){if(t.node&&e.node&&t.node._position&&e.node._position){var o=e.width*e.scale,n=e.height*e.scale,s=-e.node.angle*Math.PI/180,a=e.node.x,r=e.node.y,c=t.node.x,h=t.node.y,l=t.radius,u=this.getFowardBulletPositionByRate(t,.25,i),d=this.getFowardBulletPositionByRate(t,.5,i),m=this.getFowardBulletPositionByRate(t,.75,i);return this.checkCollisionRectangleToCircle(o,n,s,a,r,c,h,l)||this.checkCollisionRectangleToCircle(o,n,s,a,r,u.x,u.y,l)||this.checkCollisionRectangleToCircle(o,n,s,a,r,d.x,d.y,l)||this.checkCollisionRectangleToCircle(o,n,s,a,r,m.x,m.y,l)}return!1},checkCollisionRectangleToCircle:function(t,e,i,o,n,s,a,r){var c=void 0,h=void 0,l=void 0,u=void 0;return 0==i?(c=s,h=a,l=o,u=n):(c=Math.cos(i)*s-Math.sin(i)*a,h=Math.cos(i)*a+Math.sin(i)*s,l=Math.cos(i)*o-Math.sin(i)*n,u=Math.cos(i)*n+Math.sin(i)*o),this.checkCollisionRectangleToPoint(t,e,i,o,n,s,a)||this.checkCollisionRectangleToSegment(c,h,r,l-t/2,u+e/2,l+t/2,u+e/2)||this.checkCollisionRectangleToSegment(c,h,r,l+t/2,u+e/2,l+t/2,u-e/2)||this.checkCollisionRectangleToSegment(c,h,r,l+t/2,u-e/2,l-t/2,u-e/2)||this.checkCollisionRectangleToSegment(c,h,r,l-t/2,u-e/2,l-t/2,u+e/2)},checkCollisionRectangleToPoint:function(t,e,i,o,n,s,a){if(0==i)return Math.abs(o-s)<t/2&&Math.abs(n-a)<e/2;var r=Math.cos(i)*s-Math.sin(i)*a,c=Math.cos(i)*a+Math.sin(i)*s,h=Math.cos(i)*o-Math.sin(i)*n,l=Math.cos(i)*n+Math.sin(i)*o;return Math.abs(h-r)<t/2&&Math.abs(l-c)<e/2},checkCollisionRectangleToSegment:function(t,e,i,o,n,s,a){var r=Math.sqrt(Math.pow(o-s,2)+Math.pow(n-a,2)),c=void 0;if(0==r)return(c=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-n,2)))<i;var h=((t-o)*(s-o)+(e-n)*(a-n))/(r*r);if(h<0)c=Math.sqrt(Math.pow(t-o,2)+Math.pow(e-n,2));else if(h>1)c=Math.sqrt(Math.pow(t-s,2)+Math.pow(e-a,2));else{var l=o+h*(s-o),u=n+h*(a-n);c=Math.sqrt(Math.pow(t-l,2)+Math.pow(e-u,2))}return c<i},getFowardBulletPositionByRate:function(t,e,i){var o=t.node.x-t.speed*Math.cos(t.angle*Math.PI/180)*i*60*e,n=t.node.y-t.speed*Math.sin(t.angle*Math.PI/180)*i*60*e;return new cc.Vec2(o,n)}}),cc._RF.pop()},{}],FireFishGame:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"c61e2R3S9VMt7fgQVCrrs3B","FireFishGame");var s=t("../../base/BaseController"),a=t("./other/FireFishMegaPrize"),r=t("./FireFishBulletManager"),c=t("./FishManager"),h=t("./other/FFLockFish"),l=t("./FireFishFormulaManager"),u=t("../../helper/Constant"),d=t("../../helper/FireFishConfig"),m=t("./FireFishConstant");cc.Class((n(o={extends:s,properties:{soundSprite:cc.Sprite,soundOnSpriteFrame:cc.SpriteFrame,soundOffSpriteFrame:cc.SpriteFrame,centerNode:cc.Node,gameFishsNode:cc.Node,gamePlayNode:cc.Node,gameNode:cc.Node,buttonAutoFireOnNode:cc.Node,buttonAutoFireOffNode:cc.Node,scorePrefab:cc.Prefab,fishPrefab:cc.Prefab,fishMegaPrizePrefab:cc.Prefab,bulletPrefab:cc.Prefab,myPlayersNode:[cc.Node],otherPlayersNode:[cc.Node],positionNode:[cc.Node],FireFishMegaPrize:a,FireFishFormulaManager:l,FFLockFish:h},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this._super(),this.scorePool=new cc.NodePool,this.fishPool=new cc.NodePool,this.bulletPool=new cc.NodePool;for(var t=0;t<d.SCORE_POOL;t++){var e=cc.instantiate(this.scorePrefab);this.scorePool.put(e)}for(var i=0;i<d.FISH_POOL;i++){var o=cc.instantiate(this.fishPrefab);this.fishPool.put(o)}for(var n=0;n<d.BULLET_POOL;n++){var s=cc.instantiate(this.bulletPrefab);this.bulletPool.put(s)}this.FFLockFish.init(this)},onEnable:function(){cc.S.resume||(cc.S.resume=cc.game.resume.bind(cc.game),cc.S.pause=cc.game.pause.bind(cc.game));var t=this;cc.game.pause=function(){t.bulletManager.detroyAllBullet(),t.onBackClick()},cc.game.resume=function(){},this.FireFish.AudioFireFish.playMusicBackgroundGame(),this.FireFish.hideProcessingNode(),this.soundSprite.spriteFrame=this.FireFish.AudioFireFish.isSound?this.soundOnSpriteFrame:this.soundOffSpriteFrame,this.initData(),this.setLockFish(!1),this.removeLockFishs()},onDisable:function(){cc.S.resume&&(cc.game.resume=cc.S.resume,cc.game.pause=cc.S.pause),clearInterval(this.timeoutStarParticle),this.FireFish.AudioFireFish.stopAll(),this.setAutoFire(!1),this.setLockFish(!1),this.removeLockFishs()},onDestroy:function(){this.bulletManager.reset()},initData:function(){this.isMirror=!1,this.lastPosition=0,this.isPlaying=!0,this.lastTime=(new Date).getTime(),this.lastRemainTime=(new Date).getTime(),this.minBet=this.getLastJoinedRoom().variables[u.MIN_BET].value,this.time=0,this.lastDeltaTime=0,this.timeAcceleration=0,this.timeRemainAcceleration=0,this.isFirstFrameStartRound=!0,this.timeStartStamp=0,this.listPlayers=[],this.fishManager=c,this.fishManager.init(this),this.bulletManager=r,this.bulletManager.init(this),this.hideAllPlayers(),this.initMyPlayers(),this.initOtherPlayers(),this.initMyplayer(),this.initPlayers(),this.handleRoomInfo()},update:function(t){this.fishManager.update(t,this.time),this.bulletManager.update(t,this.time)},initMyPlayers:function(){for(var t in this.myPlayersNode)this.myPlayersNode[t].getComponent("FireFishMyPlayer").init(this)},initOtherPlayers:function(){for(var t in this.otherPlayersNode)this.otherPlayersNode[t].getComponent("FireFishOtherPlayer").init(this)},hideAllPlayers:function(){for(var t in this.myPlayersNode)this.myPlayersNode[t].active=!1,this.otherPlayersNode[t].active=!1},initMyplayer:function(){var t=this.getListUserInRoom();for(var e in t)if(t[e].isItMe){this.mySelf=t[e];var i=this.mySelf.variables.position.value;this.isMirror=this.checkMirrorByPosition(i),this.lastPosition=i;break}},initPlayers:function(){this.hideAllPlayers();var t=this.getListUserInRoom();for(var e in t)t[e].isItMe?this.addMyPlayer(t[e]):this.addPlayer(t[e])},addMyPlayer:function(t){var e=0,i=0;t.variables.money&&(e=t.variables.money.value),t.variables.gun_type&&(i=t.variables.gun_type.value);var o=this.getMirrorPositionByUser(t);t.node=this.myPlayersNode[o],t.node.active=!0;var n=t.node.getComponent("FireFishBasePlayer"),s=t.node.getComponent("FireFishMyPlayer");t.BasePlayer=n,t.MyPlayer=s,n.user=t,s.user=t,t.BasePlayer.setMoney(e),t.BasePlayer.changeGun(i),this.listPlayers.push(t),this.checkShowPositionButton()},addPlayer:function(t){var e=0,i=0;t.variables.money&&(e=t.variables.money.value),t.variables.gun_type&&(i=t.variables.gun_type.value);var o=this.getMirrorPositionByUser(t);t.node=this.otherPlayersNode[o],t.node.active=!0;var n=t.node.getComponent("FireFishBasePlayer"),s=t.node.getComponent("FireFishOtherPlayer");t.BasePlayer=n,t.OtherPlayer=s,n.user=t,s.user=t,t.BasePlayer.setMoney(e),t.BasePlayer.changeGun(i),this.listPlayers.push(t),this.checkShowPositionButton()},removePlayer:function(t){var e=t.variables.user_id.value,i=this.getPlayerByUserId(e);i&&(this.removePlayerFromListByPlayer(i),i.node.active=!1),this.checkShowPositionButton()},changeMoney:function(t){var e=this.getPlayerByUserId(t.variables.user_id.value),i=t.variables.money.value;e&&e.BasePlayer.setMoney(i)},changePosition:function(t){if(t.variables.position)if(this.removePlayer(t),t.isItMe){this.addMyPlayer(t);var e=this.mySelf.variables.position.value;this.isMirror=this.checkMirrorByPosition(e),this.rotateScreen(),this.lastPosition=e,this.setAutoFire(!1),this.setLockFish(!1),this.removeLockFishs()}else this.addPlayer(t)},changeGunType:function(t){if(t.variables.gun_type&&!t.isItMe){var e=this.getPlayerByUserId(t.variables.user_id.value),i=t.variables.gun_type.value;e&&e.BasePlayer.changeGun(i)}},checkShowPositionButton:function(){for(var t in this.positionNode)this.myPlayersNode[t].active||this.otherPlayersNode[t].active?this.positionNode[t].active=!1:this.positionNode[t].active=!0},onBackClick:function(){this.FireFish.AudioFireFish.playClick(),this.sendRequest.send(m.REQUEST_LEFT_ROOM),this.FireFish.showProcessingNode()},onSelectPositon0Click:function(){this.FireFish.AudioFireFish.playClick();var t=0;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSelectPositon1Click:function(){this.FireFish.AudioFireFish.playClick();var t=1;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSelectPositon2Click:function(){this.FireFish.AudioFireFish.playClick();var t=2;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSelectPositon3Click:function(){this.FireFish.AudioFireFish.playClick();var t=3;this.isMirror&&(t=this.getPositionMirror(t)),this.sendChangePosition(t)},onSoundClick:function(){this.FireFish.Audio.setSoundClick(),this.FireFish.AudioFireFish.setSound(this.FireFish.Audio.isSound),this.FireFish.AudioFireFish.playClick(),this.FireFish.AudioFireFish.playMusicBackgroundGame(),this.soundSprite.spriteFrame=this.FireFish.AudioFireFish.isSound?this.soundOnSpriteFrame:this.soundOffSpriteFrame},onAutoFireClick:function(){(this.setAutoFire(!this.isAutoFire()),this.isAutoFire())&&this.getPlayerByUserId(this.getUser().user_id).BasePlayer.fire()},onLockFish:function(){this.setLockFish(!this.isLockFish()),this.removeLockFishs(),this.isLockFish()&&(this.FireFish.showToast("Ch\u1ecdn c\xe1 \u0111\u1ec3 b\u1eafn"),this.fishManager.addAllEventClickFish())},removeLockFishs:function(){this.FFLockFish.removeLockFish(),this.fishManager.removeAllLockFish(),this.fishManager.removeAllEventClickFish()},onUserEnterRoom:function(t){this.addPlayer(t.user)},onUserExitRoom:function(t){this.removePlayer(t.user)},onPingPong:function(t){this.handlerPingPong(t)},onUserVarsUpdate:function(t){for(var e=t.user,i=t.changedVars,o=0;o<i.length;o++)switch(i[o]){case m.POSITION:this.changePosition(e);break;case m.GUN_TYPE:this.changeGunType(e);break;case m.MONEY:this.changeMoney(e)}},onResponse:function(t){var e=t.params;switch(t.cmd){case m.REQUEST_ADD_FISHS:this.handlerAddFishs(e);break;case m.REQUEST_FIRE:this.handlerFire(e);break;case m.REQUEST_FIRE_HIT_FAIL:this.handlerFireHitFail(e);break;case m.REQUEST_FISH_DIE:this.handlerFishDied(e);break;case m.REQUEST_REMOVE_FISHS:break;case m.UPDATE_MEGA_PRIZE_MONEY:this.handlerUpdateMegaPrizeMoney(e);break;case m.WAITING:this.handlerWaiting(e);break;case m.START_GAME:this.handlerStartGame(e)}},handlerWaiting:function(t){},handleRoomInfo:function(){this.reset();var t=this.getRoomInfo(),e=t.time_receive,i=(t.data||t.params.data).fishs;this.fishManager.addListFishs(i,!1,e),this.fishManager.convertListFishsByMirror(this.isMirror)},handlerFishDied:function(t){var e=t.data,i=e.fish_id,o=e.user_id,n=e.money,s=this.fishManager.getFishById(i);if(s){var a=this.getPlayerByUserId(o);if(a&&s.node){var r=a.node.getPosition(),c=s.node.getPosition();if(this.isPlaying){(this.scorePool.size()>0?this.scorePool.get():cc.instantiate(this.scorePrefab)).getComponent("Score").init(this,a,n,c,r),this.FireFish.AudioFireFish.playGem()}}this.fishManager.destroyFishWidthAnimation(s)}},handlerRemoveFish:function(t){var e=t.data.fishs;for(var i in e){var o=e[i],n=this.fishManager.getFishById(o);n&&this.fishManager.destroyFishWidthAnimation(n)}},handlerFire:function(t){if(this.isPlaying&&t.status){var e=t.data.user_id,i=t.data.angle,o=t.data.id,n=t.data.sign,s=this.getPlayerByUserId(e);this.isMirror&&(i=180+i)>360&&(i-=360),s&&(s.isItMe?this.myPlayerHandlerFire(o,n):this.playerFire(s,i))}},handlerFireHitFail:function(t){var e=t.data;this.listFireHitFail||(this.listFireHitFail=[]),this.listFireHitFail.push(e)},playerFire:function(t,e){var i=t.BasePlayer.gunNode,o=i.convertToWorldSpace(i),n=o.x+100*Math.cos(e*Math.PI/180),s=o.y+100*Math.sin(e*Math.PI/180),a=new cc.Vec2(n,s);t.BasePlayer.setRotateReceivedInSever(e),t.BasePlayer.checkTimeAndFire(a,!1,!0)},myPlayerHandlerFire:function(t,e){this.bulletManager.handlerBulletServer(t,e);for(var i=0,o=this.listDataSaveFireHit.length;i<o;i++){var n=this.listDataSaveFireHit[i];if(n[m.SIGN_BULLET]===e){(t=this.bulletManager.getIdBulletFormServer(e))&&(n[m.BULLET_ID]=t,this.sendRequest.send(m.REQUEST_FIRE_HIT,n),this.sendFireHitFail(n[m.FISH_ID])),this.listDataSaveFireHit.splice(i,1)[0];break}}},handlerAddFishs:function(t){var e=t.data.fishs;this.fishManager.addListFishs(e,this.isMirror)},handlerUpdateMegaPrizeMoney:function(t){var e=t.data.money;this.FireFishMegaPrize.setMoney(e)},sendFire:function(t,e){var i={};this.isMirror&&(t=180+t)>360&&(t-=360),i[m.ANGLE]=t,i[m.SIGN_BULLET]=e,this.sendRequest.send(m.REQUEST_FIRE,i)},sendChangeGun:function(t){var e={};e[m.TYPE]=t,this.sendRequest.send(m.REQUEST_CHANGE_GUN,e)},sendChangePosition:function(t){var e={};e[m.POSITION]=t,this.sendRequest.send(m.REQUEST_CHANGE_POSITION,e)},sendFireHit:function(t,e){var i=t.getIdFish(),o={};i&&i&&(o[m.SIGN_BULLET]=e,o[m.FISH_ID]=i,this.sendRequestFireHit(o))},sendRequestFireHit:function(t){if(this.checkDataSaveFireHit(t[m.SIGN_BULLET])){var e=this.bulletManager.getIdBulletFormServer(t[m.SIGN_BULLET]);e?(t[m.BULLET_ID]=e,this.sendRequest.send(m.REQUEST_FIRE_HIT,t),this.sendFireHitFail(t[m.FISH_ID])):this.listDataSaveFireHit.push(t),this.listDataSaveFireHit.length>50&&this.listDataSaveFireHit.splice(0,1)}},sendFireHitFail:function(t){this.listFireHitFail||(this.listFireHitFail=[]);for(var e=this.listFireHitFail.length>2?2:this.listFireHitFail.length-1,i=0;i<e;i++){var o=this.listFireHitFail[i];o&&(o[m.FISH_ID]=t,this.sendRequest.send(m.REQUEST_FIRE_HIT,o))}this.listFireHitFail.splice(0,e)},checkDataSaveFireHit:function(t){this.listDataSaveFireHit||(this.listDataSaveFireHit=[]);for(var e=0,i=this.listDataSaveFireHit.length;e<i;e++){if(this.listDataSaveFireHit[e][m.SIGN_BULLET]===t)return!1}return!0},gunLockFish:function(t){this.getMyPlayerNode().getComponent("FireFishMyPlayer").onTouchMoved()},getMirrorPositionByUser:function(t){var e=0;return t.variables.position&&(e=t.variables.position.value),this.isMirror&&(e=this.getPositionMirror(e)),e},getMyPlayerNode:function(){var t=this.getMirrorPositionByUser(this.getSFSMySelf());return this.myPlayersNode[t]},rotateScreen:function(){var t=this.mySelf.variables.position.value;this.isTop(this.lastPosition)&&this.isTop(t)||this.isBottom(this.lastPosition)&&this.isBottom(t)||(this.centerNode.stopAllActions(),this.isTop(t)?this.centerNode.runAction(cc.sequence(cc.rotateTo(d.TIME_ROTATE_SCREEN,180),cc.callFunc(function(){this.initScreen()},this))):this.isBottom(t)&&this.centerNode.runAction(cc.sequence(cc.rotateTo(d.TIME_ROTATE_SCREEN,180),cc.callFunc(function(){this.initScreen()},this))))},initScreen:function(){this.centerNode.angle=-0,this.fishManager.convertListFishsByMirror(this.isMirror),this.bulletManager.detroyAllBullet(),this.initPlayers()},isTop:function(t){return 2==t||3==t},isBottom:function(t){return 0==t||1==t},getPositionMirror:function(t){switch(t){case 0:t=2;break;case 1:t=3;break;case 2:t=0;break;case 3:t=1}return t},checkMirrorByPosition:function(t){return this.isTop(t)},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].variables.user_id.value===t)return this.listPlayers[e];return null},setAutoFire:function(t){this.buttonAutoFireOnNode.active=t,this.buttonAutoFireOffNode.active=!t},isAutoFire:function(){return this.buttonAutoFireOnNode.active},setLockFish:function(t){this.lockFish=t},isLockFish:function(){return this.lockFish},removePlayerFromListByPlayer:function(t){for(var e=0,i=this.listPlayers.length;e<i;e++)if(this.listPlayers[e]===t)return void this.listPlayers.splice(e,1)}},"hideAllPlayers",function(){for(var t in this.myPlayersNode)this.myPlayersNode[t].active=!1;for(var e in this.otherPlayersNode)this.otherPlayersNode[e].active=!1}),n(o,"reset",function(){this.time=0,this.fishManager.reset(),this.gameFishsNode.removeAllChildren(!0),this.listDataSaveFireHit=[],this.listDataSendFireHit=[]}),o)),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/FireFishConfig":"FireFishConfig","./FireFishBulletManager":"FireFishBulletManager","./FireFishConstant":"FireFishConstant","./FireFishFormulaManager":"FireFishFormulaManager","./FishManager":"FishManager","./other/FFLockFish":"FFLockFish","./other/FireFishMegaPrize":"FireFishMegaPrize"}],FireFishHeader:[function(t,e,i){"use strict";cc._RF.push(e,"74ca300xZNMc59S9dn/15zk","FireFishHeader");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Constant"),s=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label,moneyLabel:cc.Label,goldLabel:cc.Label},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){},onEnable:function(){this.loadUserInfo()},loadUserInfo:function(){var t=this.FireFish.getUser();if(t){var e=t.nick_name,i=t.avatar;this.setNicknameLabel(e),this.setAvatar(i),this.updateMoneyGold()}},setNicknameLabel:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(o.convertUrlToLocation(t),function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},updateMoneyGold:function(){var t=this.FireFish.getSFSMySelf(),e=t.variables.money.value,i=t.variables.gold.value;this.setMoneyLabel(e),this.setGoldLabel(i)},setMoneyLabel:function(t){this.moneyLabel.string=o.numberWithCommas(t)},setGoldLabel:function(t){this.goldLabel.string=o.numberWithCommas(t)},onBackClick:function(){this.FireFish.AudioFireFish.playClick(),this.FireFish.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME),this.FireFish.showProcessingNode()},onRechargeMoneyClick:function(){this.FireFish.showDialogMessage(s.RECHARGE_MONEY_TITLE,"Th\u1ebb n\u1ea1p \u0111ang b\u1ea3o tr\xec")},onRechargeGoldClick:function(){this.FireFishUI.showRechargeForm(),this.FireFish.Recharge.showRechargeGold()},onSettingClick:function(){this.FireFish.Audio.playClick(),this.FireFishUI.showSettingForm()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],FireFishMegaPrize:[function(t,e,i){"use strict";cc._RF.push(e,"34928/QdaBCR4fAQlCX0hhc","FireFishMegaPrize");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label},init:function(t){this.FireFish=t},onLoad:function(){this.timeOut=null,this._animation=this.node.getComponent(cc.Animation)},setMoney:function(t){this.moneyLabel.string=t?o.numberWithCommas(t):"???"},show:function(){clearTimeout(this.timeOut),this._animation||(this._animation=this.node.getComponent(cc.Animation)),this.node.active=!0,this.node.setPosition(0,0),this.node.opacity=255,this.node.angle=0,this._animation.play("ShowMegaPrizeAnimation")},hide:function(){clearTimeout(this.timeOut),this.node&&(this._animation||(this._animation=this.node.getComponent(cc.Animation)),this.node.active&&(this.timeOut=setTimeout(function(){this.node&&(this.node.active=!1)}.bind(this),1e3)),this._animation.play("HideMegaPrizeAnimation"))}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],FireFishMyPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"38c02/ypmtMrKSZsg4J004a","FireFishMyPlayer");var o=t("../../../helper/FireFishConfig"),n=t("../../../helper/Message"),s=t("../../../object/fire-fish/GunChoise"),a=t("../../../object/fire-fish/MyPlayerHover");cc.Class({extends:cc.Component,properties:{listGunChoise:[s],MyPlayerHover:a},onLoad:function(){},init:function(t){for(var e in this.FireFish=t.FireFish,this.FireFishUI=this.FireFish.FireFishUI,this.FireFishGame=t,this.gameNode=t.gameNode,this.BasePlayer=this.node.getComponent("FireFishBasePlayer"),this.BasePlayer.init(t),this.gunNode=this.BasePlayer.gunNode,this.listGunChoise)this.listGunChoise[e].init(t,this,parseInt(e)+1);this.MyPlayerHover&&this.MyPlayerHover.init(t,this),this.fireInterval=null,this.rotationListener=null,this.timeFireInterval=o.TIME_FITE_INTERVAL,this._onTouchBegan=this.onTouchBegan.bind(this),this._onTouchMoved=this.onTouchMoved.bind(this),this._onTouchEnded=this.onTouchEnded.bind(this),this.changeGun(1)},onEnable:function(){this.addTouchEvents()},onDisable:function(){this.removeTouchEvents(),clearInterval(this.fireInterval)},addTouchEvents:function(){this.rotationListener=cc.eventManager.addListener(cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:this._onTouchBegan,onTouchMoved:this._onTouchMoved,onTouchEnded:this._onTouchEnded}),this.gameNode)},removeTouchEvents:function(){cc.eventManager.removeListener(this.rotationListener)},onTouchBegan:function(t){if(this.FireFishGame.isLockFish()){var e=this.FireFishGame.fishManager.getFishLock();if(e){var i=e.node.parent.convertToWorldSpaceAR(e.node);this.BasePlayer.moveX=i.x,this.BasePlayer.moveY=i.y}var o=new cc.Vec2(this.BasePlayer.moveX,this.BasePlayer.moveY);this.gunNode.angle=-this.getAngleGunByTouchPosition(o)}else this.BasePlayer.moveX=t.getLocationX(),this.BasePlayer.moveY=t.getLocationY(),this.gunNode.angle=-this.getAngleGunByTouchPosition(t);return this.checkMoneyAndFire(t),this.fireInterval||(this.fireInterval=setInterval(function(){this.checkMoneyAndFire(t)}.bind(this),this.timeFireInterval+50)),!0},onTouchMoved:function(t){if(this.FireFishGame.isLockFish()){var e=this.FireFishGame.fishManager.getFishLock();if(e){var i=e.node.parent.convertToWorldSpaceAR(e.node);this.BasePlayer.moveX=i.x,this.BasePlayer.moveY=i.y}var o=new cc.Vec2(this.BasePlayer.moveX,this.BasePlayer.moveY);this.gunNode.angle=-this.getAngleGunByTouchPosition(o)}else this.BasePlayer.moveX=t.getLocationX(),this.BasePlayer.moveY=t.getLocationY(),this.gunNode.angle=-this.getAngleGunByTouchPosition(t)},onTouchEnded:function(t){this.FireFishGame.isLockFish()||(this.BasePlayer.moveX=t.getLocationX(),this.BasePlayer.moveY=t.getLocationY()),clearInterval(this.fireInterval),this.fireInterval=null},getAngleGunByTouchPosition:function(t){var e=t.getLocation?t.getLocation():t,i=this.gameNode.convertToNodeSpaceAR(e),o=this.gunNode.convertToWorldSpaceAR(this.gunNode.getPosition()),n=this.gameNode.convertToNodeSpaceAR(o),s=180*Math.atan2(i.y-n.y,i.x-n.x)/Math.PI;return s>=360&&(s-=360),s=90-s},checkMoneyAndFire:function(t){clearTimeout(this.showEnoughMoneyTimeout),this.checkEnoughMoney()?this.BasePlayer.fire(t):this.FireFish.RechargeMessage.node.active||this.FireFish.FireFishUI.showRechargeMessageForm()},checkEnoughMoney:function(){var t=this.BasePlayer.currentGun,e=o.GUNS_TYPE[t]*this.FireFishGame.minBet;return parseInt(this.FireFish.getMoney())>=e},changeGun:function(t){this.setActiveGun(t-1),this.BasePlayer.changeGun(t)},changeGunWithAnimation:function(t){this.setActiveGun(t-1),this.BasePlayer.changeGunWithAnimation(t)},setActiveGun:function(t){for(var e=0;e<this.listGunChoise.length;e++)parseInt(e)===parseInt(t)?this.listGunChoise[e].setActive():this.listGunChoise[e].setNormal()},onPlusGunClick:function(){this.FireFish.AudioFireFish.playSwitch(),this.BasePlayer.plusGun(),this.setActiveGun(this.BasePlayer.currentGun)},onMinusGunClick:function(){this.FireFish.AudioFireFish.playSwitch(),this.BasePlayer.minusGun(),this.setActiveGun(this.BasePlayer.currentGun)},onAddDiamonClick:function(){this.FireFish.showDialogMessage(n.RECHARGE_MONEY_TITLE,"Th\u1ebb n\u1ea1p \u0111ang b\u1ea3o tr\xec")},showGunChoise:function(){for(var t in this.listGunChoise)this.listGunChoise[t].show()},hideGunChoise:function(){for(var t in this.listGunChoise)this.listGunChoise[t].hide()},isShowGunChoise:function(){for(var t in this.listGunChoise)if(this.listGunChoise[t].node.active)return!0;return!1}}),cc._RF.pop()},{"../../../helper/FireFishConfig":"FireFishConfig","../../../helper/Message":"Message","../../../object/fire-fish/GunChoise":"GunChoise","../../../object/fire-fish/MyPlayerHover":"MyPlayerHover"}],FireFishOtherPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"ae673DHAuhKbo3lgk2wd4zu","FireFishOtherPlayer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(t){this.FireFish=t,this.BasePlayer=this.node.getComponent("FireFishBasePlayer"),this.BasePlayer.init(t)}}),cc._RF.pop()},{}],FireFishUI:[function(t,e,i){"use strict";cc._RF.push(e,"413cchpYPdDzJBCR5VjikCi","FireFishUI");var o=t("../../util/RandomUtil"),n=t("../../prefab/Toast"),s=t("../../ui/Processing"),a=t("../../ui/ProcessingScene"),r=t("../../ui/dialog/DialogMessage");cc.Class({extends:cc.Component,properties:{gameNode:cc.Node,centerNode:cc.Node,ffEventFormNode:cc.Node,ffRankFormNode:cc.Node,ffTutorialFormNode:cc.Node,rechageMessageFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,backgroundSprite:cc.Sprite,backgroundsSpriteFrame:[cc.SpriteFrame],Toast:n,Processing:s,ProcessingScene:a,DialogMessage:r},onLoad:function(){this.randomBackground(),this.ffEventDialogForm=this.ffEventFormNode.getComponent("DialogForm"),this.ffRankDialogForm=this.ffRankFormNode.getComponent("DialogForm"),this.ffTutorialDialogForm=this.ffTutorialFormNode.getComponent("DialogForm"),this.rechargeMessageDialogForm=this.rechageMessageFormNode.getComponent("DialogForm"),this.settingeDialogForm=this.settingFormNode.getComponent("DialogForm"),this.logOutDialogForm=this.settingFormNode.getComponent("DialogForm")},showGameNode:function(){this.gameNode.active=!0,this.centerNode.active=!1},showCenterNode:function(){this.gameNode.active=!1,this.centerNode.active=!0},randomBackground:function(){var t=this.backgroundsSpriteFrame.length,e=o.getRandomInt(0,t-1);this.backgroundSprite.spriteFrame=this.backgroundsSpriteFrame[e]},showFFEventForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffEventDialogForm.showDialog(t)},hideFFEventForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffEventDialogForm.hideDialog(t)},showFFRankForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffRankDialogForm.showDialog(t)},hideFFRankForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffRankDialogForm.hideDialog(t)},showFFTutorialForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffTutorialDialogForm.showDialog(t)},hideFFTutorialForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.ffTutorialDialogForm.hideDialog(t)},showRechargeForm:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},hideRechargeForm:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},showRechargeMessageForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.rechargeMessageDialogForm.showDialog(t)},hideRechargeMessageForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.rechargeMessageDialogForm.hideDialog(t)},showSettingForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.settingeDialogForm.showDialog(t)},hideSettingForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.settingeDialogForm.hideDialog(t)},showLogOutForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.logOutDialogForm.showDialog(t)},hideLogOutForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.logOutDialogForm.hideDialog(t)},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.DialogMessage.showMessage(t,e)},hideDialogMessage:function(){this.DialogMessage.hideDialog()},showProcessingNode:function(){this.Processing.node.active=!0},hideProcessingNode:function(){this.Processing.node.active=!1},showProcessingSceneNode:function(){this.ProcessingScene.node.active||(this.ProcessingScene.node.active=!0)},hideProcessingSceneNode:function(){this.ProcessingScene.node.active=!1}}),cc._RF.pop()},{"../../prefab/Toast":"Toast","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","../../util/RandomUtil":"RandomUtil"}],FireFish:[function(t,e,i){"use strict";cc._RF.push(e,"e6edanrTO5Gpp6cgyC6ZuMP","FireFish");var o=t("../../base/BaseScene"),n=t("./FireFishGame"),s=t("./FireFishCenter"),a=t("./FireFishUI"),r=t("./form/FFEvent"),c=t("./form/FFRank"),h=t("./form/FFTutorial"),l=t("../../prefab/form/Tutorial"),u=t("../../prefab/form/Setting"),d=t("../../prefab/form/LogOut"),m=t("../../prefab/News"),p=t("./form/RechargeMessage"),f=t("../../prefab/Toast"),g=t("../../ui/dialog/DialogMessage"),_=t("../../ui/Processing"),S=t("../../ui/ProcessingScene"),C=t("../../helper/Constant"),N=t("../../helper/Message"),E=t("../../util/FormatUtil"),T=(t("../../util/Util"),t("../../helper/FireFishConfig")),I=t("./FireFishConstant"),v=t("../../object/Audio"),y=t("../../object/AudioFireFish");cc.Class(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,FireFishUI:a,FireFishGame:n,FireFishCenter:s,FFEvent:r,FFRank:c,FFTutorial:h,Tutorial:l,RechargeMessage:p,Setting:u,LogOut:d,News:m,Audio:v,AudioFireFish:y,Toast:f,DialogMessage:g,Processing:_,ProcessingScene:S},onLoad:function(){this._super(),this.setSceneName(C.SCENE_GAME_FIRE_FISH),this.setSceneGameSlot(!1),this.sfsManager.setController(this),this.FireFishGame.init(this),this.FireFishCenter.init(this),this.FFEvent.init(this),this.FFRank.init(this),this.FFTutorial.init(this),this.Tutorial.init(this),this.RechargeMessage.init(this),this.Setting.init(this),this.LogOut.init(this),this.sfsManager.removeEventResponse(),this.addEventResponse()},start:function(){this.showProcessingNode(),this.FireFishUI.showCenterNode(),this.initOrbitFireFish()},initOrbitFireFish:function(){var t=this;this.Orbit=this.getOrbitFireFish(),this.Orbit?this.hideProcessingNode():cc.loader.loadRes(T.SHOT_FISH_URL_ORBIT,cc.JsonAsset,function(e,i){t.Orbit=i.json,t.setOrbitFireFish(t.Orbit),t.hideProcessingNode()})},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.onUserEnterRoom=this.onUserEnterRoom.bind(this),this.onUserExitRoom=this.onUserExitRoom.bind(this),this.onUserVarsUpdate=this.onUserVarsUpdate.bind(this),this.onPingPong=this.onPingPong.bind(this),this.onResponse=this.onResponse.bind(this),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventResponse:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},onUserEnterRoom:function(t){this.FireFishGame.node.active&&this.FireFishGame.onUserEnterRoom(t)},onUserExitRoom:function(t){this.FireFishGame.node.active&&this.FireFishGame.onUserExitRoom(t)},onPingPong:function(t){this.FireFishGame.node.active&&this.FireFishGame.onPingPong(t)},onUserVarsUpdate:function(t){if(this.FireFishGame.node.active)this.FireFishGame.onUserVarsUpdate(t);else{var e=t.user,i=t.changedVars;if(e.isItMe)for(var o in i)switch(i[o]){case I.MONEY:case I.GOLD:this.FireFishCenter.FireFishHeader.updateMoneyGold()}}},onResponse:function(t){t.timeReceived=(new Date).getTime();var e=t.params;switch(t.cmd){case C.ROOM_INFO:t.time_receive=(new Date).getTime(),this.setRoomInfo(t),this.setBulletSpeed(30),this.FireFishUI.showGameNode();break;case I.BROADCAST:this.handlerBroadCast(e);break;case C.MINIGAME_REQUEST:case C.GET_TOP:this.MiniGame&&this.MiniGame.handleRequest(e);break;case C.REQUEST_PLAYER_RECEIVE_ALERT:this.handleAlert(e);break;case C.REQUEST_RECHARGE_GOLD:this.handleRechargeGold(e);break;case C.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.handleReceiveNewMessage(e);break;case C.REQUEST_ACHIVEMENTED_QUEST:this.handleAchivementedQuest(e);break;case C.NEWS:this.handlerNews(e);break;case C.JOIN_ROOM_ERROR:this.handleJoinRoomError(e);break;case C.UPDATE_MINIGAME_FREE:this.MiniGame&&this.MiniGame.initNumberSpinFreeGame(e)}this.FireFishGame.node.active&&this.FireFishGame.onResponse(t)},handlerBroadCast:function(t){var e=t.data,i=String.format(N.FIREFISH_FISHED,e.nick_name,e.fish_name,E.numberWithCommas(e.amount),N.MONEY.toUpperCase());this.News.addNewsNode(i)},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(N.RECHARGE_GOLD_TITLE,t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleReceiveNewMessage:function(t){this.getUser().unread_message++,this.showNotificationMessage(N.MAIL_NOTIFICATION)},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handlerNews:function(t){this.News.addNews(t)},handleJoinRoomError:function(t){this.hideProcessingNode(),this.showDialogMessage(N.TITLE_FAILED,t.msg)},showToast:function(t){this.Toast.showToast(t)},showProcessingNode:function(){this.FireFishUI.showProcessingNode()},hideProcessingNode:function(){this.FireFishUI.hideProcessingNode()},showProcessingSceneNode:function(){this.FireFishUI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.FireFishUI.hideProcessingSceneNode()},showDialogMessage:function(t,e){this.FireFishUI.showDialogMessage(t,e)}},"showToast",function(t){this.FireFishUI.showToast(t)})),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/FireFishConfig":"FireFishConfig","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/AudioFireFish":"AudioFireFish","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util","./FireFishCenter":"FireFishCenter","./FireFishConstant":"FireFishConstant","./FireFishGame":"FireFishGame","./FireFishUI":"FireFishUI","./form/FFEvent":"FFEvent","./form/FFRank":"FFRank","./form/FFTutorial":"FFTutorial","./form/RechargeMessage":"RechargeMessage"}],FishManager:[function(t,e,i){"use strict";cc._RF.push(e,"7acd7Sf/1ZKaYtOesTvA3n2","FishManager");var o=t("../../object/fire-fish/Fish"),n=t("../../util/Util"),s={fishs:[],isMirror:!1,init:function(t){this.FireFish=t.FireFish,this.FireFishGame=t,this.gameWidth=t.gameNode.width,this.gameHeight=t.gameNode.height},addListFishs:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.isMirror=e;for(var n=0,s=t.length;n<s;n++){var a=new o(this.FireFishGame,t[n],e,n,i);this.fishs.push(a)}},convertListFishsByMirror:function(t){if(this.isMirror!==t){this.isMirror=t;for(var e=0,i=this.fishs.length;e<i;e++)this.fishs[e].convertListPointByMirror(t)}},destroyFishWidthAnimation:function(t){for(var e=0,i=this.fishs.length;e<i;e++)t===this.fishs[e]&&t.dead()},getFishById:function(t){for(var e=0,i=this.fishs.length;e<i;e++)if(this.fishs[e].getIdFish()===t)return this.fishs[e]},convertListPoint:function(t,e){for(var i=0,o=t.length;i<o;i++)e&&(t[i].y=this.gameHeight-t[i].y,t[i].x=this.gameWidth-t[i].x),t[i].x-=this.gameWidth/2,t[i].y-=this.gameHeight/2},update:function(t,e){for(var i=0,o=this.fishs.length;i<o;i++)this.fishs[i].update(t,i);this.removeFishsOutOfIdle(e)},addAllEventClickFish:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t]&&this.fishs[t].baseFishController&&this.fishs[t].baseFishController.addEventClick()},getFishLock:function(){for(var t=0,e=this.fishs.length;t<e;t++)if(this.fishs[t].isLockFish())return this.fishs[t];return null},removeAllEventClickFish:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t]&&this.fishs[t].baseFishController&&this.fishs[t].baseFishController.removeEventClick()},removeAllLockFish:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t]&&this.fishs[t].setLockFish(!1)},removeFishsOutOfIdle:function(){for(var t=this.fishs.length-1;t>=0;t--)this.fishs[t].isExpiredIdle()&&this.fishs.splice(t,1)},reset:function(){for(var t=0,e=this.fishs.length;t<e;t++)this.fishs[t].destroyNode();n.clearArray(this.fishs)},removeFishInArray:function(t){for(var e=0,i=this.fishs.length;e<i;e++)if(this.fishs[e].id===t)return void this.fishs.splice(e,1)},getTypeFishChange:function(t){switch(t){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 12;case 7:return 17;case 8:return 8;case 9:return 9;case 10:return 13;case 11:return 14;case 12:return 15;case 13:return 16;case 14:return 18;case 15:return 19;case 16:return 200;default:return t}}};e.exports=s,cc._RF.pop()},{"../../object/fire-fish/Fish":"Fish","../../util/Util":"Util"}],Fish:[function(t,e,i){"use strict";cc._RF.push(e,"5fd48pms+pJZpCGdoaiKt74","Fish");var o=t("../../helper/FireFishConfig");t("./formula/FormulaBezier");function n(t,e,i,o,n){this.FireFishGame=t,this.gameWidth=t.gameNode.width,this.gameHeight=t.gameNode.height,this.fishManager=t.fishManager,this.fishs=t.fishManager.fishs,this.fishPrefab=t.fishPrefab,this.fishMegaPrizePrefab=t.fishMegaPrizePrefab,this.fishPool=t.fishPool,this.isMirror=i,this.id=e.id,this.money=e.money||200,this.orbitId=e.orbit_id,this.dicrect=e.dicrect,this.offsetTime=e.offset_time,this.type=e.type,this.offsetX=e.offset_x,this.offsetY=e.offset_y,this.currentOrbit=e.current_orbit,this.index=o;var s=n?((new Date).getTime()-n)/1e3:0;this.orbit=this.getOrbitById(this.orbitId),this.listPointDefault=this.orbit.points,this.listPoint=this.convertListPoint(this.listPointDefault,this.isMirror),this.totalTime=this.getTotalTimeByListOrbits(this.listPointDefault),this.timeElapsed=this.getTimeElapsedByCurrentOrbit(this.currentOrbit)+s,this.isDead=!1,this.fishConfig=this.getFishConfigByType(this.type),this.width=.3*this.fishConfig.width,this.height=.3*this.fishConfig.height,this.scale=this.fishConfig.scale?this.fishConfig.scale:1,this.scale*=-1,this.isShow=!1,this.setLockFish(!1)}n.prototype.convertListPointByMirror=function(t){this.isMirror!==t&&(this.isMirror=t,this.listPoint=this.convertListPoint(this.listPointDefault,t))},n.prototype.convertListPoint=function(t,e){for(var i=[],o=0,n=t.length;o<n;o++){var s=t[o].y,a=t[o].x,r=t[o].r;e&&(s=this.gameWidth-s,a=this.gameHeight-a,r-=180),s-=this.gameWidth/2,a-=this.gameHeight/2,i.push({x:s,y:a,r:r})}return i},n.prototype.isIdle=function(){return!(this.currentOrbit>=this.listPoint.length)||(this.isShow||(this.isShow=!0),!1)},n.prototype.isExpiredIdle=function(){return this.currentOrbit>this.listPoint.length},n.prototype.update=function(t){this.timeElapsed+=t,this.currentOrbit=this.getCurrentOrbitByTime(this.timeElapsed),this.isIdle()&&!this.isOutOfScreen()?this.isDead||(this.instanceNode(this.timeElapsed),this.updatePosition(this.timeElapsed),this.updateRotate(this.timeElapsed)):this.destroyNode()},n.prototype.isOutOfScreen=function(){return!(!this.node||!this.isLockFish())&&(this.node.x<-this.gameWidth/2-this.width/2||this.node.x>this.gameWidth/2+this.width/2||this.node.y<-this.gameHeight/2-this.height/2||this.node.y>this.gameHeight/2+this.height/2)},n.prototype.instanceNode=function(t){this.node||(this.checkIsMegaPrize(this.type)?(this.node=cc.instantiate(this.fishMegaPrizePrefab),this.FireFishGame.FireFishMegaPrize.setMoney(this.money),this.FireFishGame.FireFishMegaPrize.show()):this.fishPool.size()>0?this.node=this.fishPool.get():this.node=cc.instantiate(this.fishPrefab),this.node.setPosition(0,0),this.node.scale=this.scale,this.baseFishController=this.node.getComponent("BaseFish"),this.baseFishController.init(this.FireFishGame,this),this.baseFishController.setFishCallBackCollision(this.fishCollision,this),this.node.parent=this.FireFishGame.gameFishsNode)},n.prototype.updatePosition=function(){var t=this.listPoint[this.currentOrbit];this.node.x=t.x,this.node.y=t.y,this.isLockFish()&&(this.isOutOfScreen()?(this.setLockFish(!1),this.FireFishGame.setLockFish(!1),this.FireFishGame.FFLockFish.removeLockFish()):(this.FireFishGame.gunLockFish(this.node),this.FireFishGame.FFLockFish.initFish(this.node)))},n.prototype.updateRotate=function(){var t=this.listPoint[this.currentOrbit-1];if(t){var e=this.listPoint[this.currentOrbit],i=180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI;this.node.angle=i}},n.prototype.setLockFish=function(t){this.lockFish=t,this.baseFishController&&this.baseFishController.setLockFish(t)},n.prototype.isLockFish=function(t){return this.lockFish},n.prototype.destroyNode=function(){this.node&&(this.checkIsMegaPrize(this.type)?(this.FireFishGame.FireFishMegaPrize&&this.FireFishGame.FireFishMegaPrize.hide(),this.node.destroy()):this.fishPool.put(this.node),this.isLockFish()&&(this.setLockFish(!1),this.FireFishGame.setLockFish(!1),this.FireFishGame.FFLockFish.removeLockFish()),this.node=null,this.baseFishController=null)},n.prototype.dead=function(){this.isDead=!0,this.baseFishController&&(this.checkIsMegaPrize(this.type)&&this.FireFishGame.FireFishMegaPrize&&this.FireFishGame.FireFishMegaPrize.hide(),this.isLockFish()&&(this.setLockFish(!1),this.FireFishGame.setLockFish(!1),this.FireFishGame.FFLockFish.removeLockFish()),this.baseFishController.dead())},n.prototype.getFishConfigByType=function(t){t=this.fishManager.getTypeFishChange(t);var e=o.FISHS;for(var i in e)if(e[i].type==t)return e[i]},n.prototype.checkIsMegaPrize=function(t){return 200===t},n.prototype.getOrbitById=function(t){var e=this.FireFishGame.FireFish.Orbit;for(var i in e)if(e[i].id==t)return e[i]},n.prototype.fishCollision=function(t){var e=t.node.getComponent("BaseBullet");if(e){var i=e.getIdBullet(),o="-"+this.FireFishGame.getUser().user_id+"-";this.FireFishGame.fishManager.getFishLock()?this.isLockFish()&&-1!=i.indexOf(o)&&this.FireFishGame.sendFireHit(this,i):-1!=i.indexOf(o)&&this.FireFishGame.sendFireHit(this,i)}},n.prototype.getIdFish=function(){return this.id},n.prototype.getTotalTimeByListOrbits=function(t){return 1e3*o.SHOT_FISH_TIME_UPDATE},n.prototype.getTimeElapsedByCurrentOrbit=function(t){return t*o.SHOT_FISH_TIME_UPDATE},n.prototype.getCurrentOrbitByTime=function(t){return parseInt(t/o.SHOT_FISH_TIME_UPDATE)},e.exports=n,cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig","./formula/FormulaBezier":"FormulaBezier"}],Footer:[function(t,e,i){"use strict";cc._RF.push(e,"1c1d3qhsbZLebvozOiXhxjS","Footer");var o=t("../../../helper/Message"),n=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{otpContentNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=String.format(o.CONTACT,t.HOTLINE);this.contactLabel.string=e}},onDaiLyClick:function(){this.GameCenter.isConnected()?(this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onTransferClick()):this.GameCenterUI.showLoginFormNode()},onAppleStoreClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n d\xe0nh cho IOS s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}},onAndroidStoreClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n d\xe0nh cho Android s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}},onAPKClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n d\xe0nh cho Android s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}},onTutorialClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenterUI.showTutorialFormNode():this.GameCenterUI.showLoginFormNode()},onFanpageClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getGeneralConfig();t&&cc.sys.openURL(t.FANPAGE)},onYoutubeClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()&&cc.sys.openURL("")},onGiftCodeClick:function(){(this.GameCenter.Audio.playClick(),this.GameCenter.isConnected())?1===this.GameCenter.getUser().status_value?this.GameCenterUI.showGiftCodeFormNode():this.GameCenterUI.showSecurityFormNode():this.GameCenterUI.showLoginFormNode()},onShopClick:function(){this.GameCenter.isConnected()?(this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeMoneyClick()):this.GameCenterUI.showLoginFormNode()},onOTPClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n OTP d\xe0nh cho Android s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}},onAndroidOTPClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n OTP d\xe0nh cho Android s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}this.otpContentNode.active=!1},onIosOTPClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n OTP d\xe0nh cho IOS s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}this.otpContentNode.active=!1},onPCClick:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.getGeneralConfig()){var t=n.HOST_DOWNLOAD;t&&t.length>2?cc.sys.openURL(t):this.GameCenter.showDialogMessage("T\u1ea3i game","Phi\xean b\u1ea3n OTP d\xe0nh cho IOS s\u1ebd c\xf3 trong th\u1eddi gian s\u1edbm nh\u1ea5t. Ch\xfac b\u1ea1n ch\u01a1i game vui v\u1ebb!")}},onEventClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenterUI.showEventGameNode():this.GameCenterUI.showLoginFormNode()},onTopEvent2Click:function(){if(this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()){var t=new Date("Mar 20 2020 10:00:00").getTime();(new Date).getTime()-t>0?this.GameCenterUI.showTopEvent2FormNode():this.GameCenter.showDialogMessage("","")}else this.GameCenterUI.showLoginFormNode()},onInviteFriendClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?(this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showInviteFriend()):this.GameCenterUI.showLoginFormNode()},onVippointClick:function(){this.GameCenter.isConnected()?(this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onInfoClick()):this.GameCenterUI.showLoginFormNode()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message"}],ForgetPasswordEmail:[function(t,e,i){"use strict";cc._RF.push(e,"d4d3dFrz5dLfLa3oH1lu4UV","ForgetPasswordEmail");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../util/BrowserUtil"),a=t("../../../object/Capcha");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,emailEditBox:cc.EditBox,capchaEditBox:cc.EditBox,capchaLabel:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.usernameEditBox,this.emailEditBox,this.capchaEditBox],this.capcha=new a,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&(this.node.active=!1);break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===o.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ENTER_KEY?(s.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ESC_KEY?(this.node.active=!1,t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(s.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),s.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&s.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},onConfirmClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.usernameEditBox.string,i=this.emailEditBox.string,o=this.capchaEditBox.string;if(this.checkAllEditboxNotEmpty())if(this.capcha.result==o){var s={username:e,email:i};this.GameCenter.showProcessingNode(),this.GameCenter.api.forgotPasswordEmail(s,function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,e.msg)},function(e){t.clear(),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,e.msg)})}else this.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,n.CAPCHA_NOT_CORRECT);else this.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,n.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},onResetCapchaClick:function(){this.GameCenter.Audio.playClick(),this.initCapcha()},onForgetPasswordPhoneClick:function(){this.GameCenter.Audio.playClick(),this.node.active=!1,this.GameCenterUI.showForgetPasswordPhoneFormNode()},onCloseClick:function(){this.node.active=!1},initCapcha:function(){this.capcha=new a,this.capchaLabel.string=this.capcha.text},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initCapcha()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/Capcha":"Capcha","../../../util/BrowserUtil":"BrowserUtil"}],ForgetPasswordPhone:[function(t,e,i){"use strict";cc._RF.push(e,"5f413AEF7xATZ5SuZa5A1pq","ForgetPasswordPhone");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../util/BrowserUtil"),a=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,otpEditBox:cc.EditBox,passwordEditBox:cc.EditBox,rePasswordEditBox:cc.EditBox,step1RichText:cc.RichText,usernameStep1EditBox:cc.EditBox,phoneStep1EditBox:cc.EditBox,internationPhoneLabel:cc.Label,internationPhoneScrollView:cc.ScrollView,internationPhoneNumberItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.usernameEditBox,this.otpEditBox,this.passwordEditBox,this.rePasswordEditBox]},onEnable:function(){this.clear(),this.initData(),this.initPhoneInternation(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&(this.node.active=!1);break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},keyHandle:function(t){return t.keyCode===o.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ENTER_KEY?(s.focusGame(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ESC_KEY?(this.node.active=!1,t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(s.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),s.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&s.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.OTP_FORGOT_PASS;if(e){var i=e.content,o=e.service_number,s=String.format(n.OTP_FORGET_PASSWORD,i,o);this.step1RichText.getComponent(cc.RichText).string=s}}},initPhoneInternation:function(){this.internationPhoneScrollView.content.removeAllChildren(!0);for(var t=o.LIST_INTERNATION_PHONE_NUMBER,e=0,i=t.length;e<i;e++){var n=cc.instantiate(this.internationPhoneNumberItemPrefab);n.getComponent("InternationalPhoneItem").init(this,t[e],e),this.internationPhoneScrollView.content.addChild(n),0===e&&n.getComponent("InternationalPhoneItem").onClick()}},onItemClick:function(t){this.interPhoneNumber=t.replace("+",""),this.internationPhoneLabel.string=t,this.internationPhoneScrollView.node.active=!1},onSelectInternationClick:function(){this.internationPhoneScrollView.node.active=!this.internationPhoneScrollView.node.active},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.usernameEditBox.string,e=this.otpEditBox.string,i=this.passwordEditBox.string,o=this.rePasswordEditBox.string;if(this.checkAllEditboxNotEmpty())if(i===o){var s={otp:e,username:t,password:i};this.GameCenter.CaptchaForm.node.active=!0,this.GameCenter.CaptchaForm.setCallBack(this.verifyPassword,this,s)}else this.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,n.FORGET_PASSWORD_RE_PASSWORD_NOT_CORRECT);else this.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,n.MISSING_INFO)},verifyPassword:function(t){var e=this;this.GameCenter.showProcessingNode(),this.GameCenter.api.verifyPassword(t,function(t){e.clear(),e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,t.msg)},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,t.msg)})},onConfirmStep1Click:function(){this.GameCenter.Audio.playClick();var t=this.usernameStep1EditBox.string,e=this.interPhoneNumber+a.convertPhoneNumber(this.phoneStep1EditBox.string);if(""!==t&&""!==e){var i={username:t,phone:e};this.GameCenter.CaptchaForm.node.active=!0,this.GameCenter.CaptchaForm.setCallBack(this.sendOtpForgetPass,this,i)}else this.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,n.MISSING_INFO)},sendOtpForgetPass:function(t){var e=this;this.GameCenter.showProcessingNode(),this.GameCenter.api.sendOtpForgetPassword(t,function(t){e.clear(),e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,t.msg)},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.FORGET_PASSWORD_TITLE,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},onForgetPasswordEmailClick:function(){this.GameCenter.Audio.playClick(),this.node.active=!1,this.GameCenterUI.showForgetPasswordEmailFormNode()},onCloseClick:function(){this.node.active=!1},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.usernameStep1EditBox.string="",this.phoneStep1EditBox.string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],FormMove:[function(t,e,i){"use strict";cc._RF.push(e,"f11e7ExYOlIvo9Ud4s+vT34","FormMove");var o=t("../../base/BaseController"),n=t("../../helper/Constant"),s=t("../../helper/Config");cc.Class({extends:o,properties:{isSave:!1,nameSave:"",isChangeZIndex:!0},onLoad:function(){var t=this;this._super(),this.positionX=this.node.x,this.positionY=this.node.y,this.onTouchMove=function(e){var i=e.touch.getDelta(),o=t.node.x+i.x,n=t.node.y+i.y,a=s.CANVAS_WIDTH/2,r=-s.CANVAS_WIDTH/2,c=s.GAME_HEIGHT/2,h=-(s.CANVAS_HEIGHT-s.GAME_HEIGHT/2);o>a?o=a:o<r&&(o=r),n>c?n=c:n<h&&(n=h),t.node.x=o,t.node.y=n},this.onTouchEnd=function(e){t.isSave&&t.nameSave&&t.savePosition()},this.onMouseEnter=function(e){cc.sys.isBrowser&&(t.addZIndex(),e.stopPropagation())},this.addEventMove(),this.initData()},onEnable:function(){this.addZIndex()},addEventMove:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node)},initData:function(){var t=this.getTempData()[this.nameSave];t&&(this.positionX=t.x,this.positionY=t.y),this.node.setPosition(this.positionX,this.positionY)},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[this.nameSave]=t},addZIndex:function(){if(this.isChangeZIndex){var t=this.getTempData()[n.Z_INDEX];t||(t=0),++t,this.node.zIndex=t,this.getTempData()[n.Z_INDEX]=t}}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Config":"Config","../../helper/Constant":"Constant"}],FormStopPropagation:[function(t,e,i){"use strict";cc._RF.push(e,"5c8ffMFay1KfbPwRoOmB3Ok","FormStopPropagation"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.onTouchStart=function(t){t.stopPropagation()},this.onMouseEnter=function(t){t.stopPropagation()}},onEnable:function(){this.addEventPropagation()},onDisable:function(){this.removeEventPropagation()},addEventPropagation:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.node),cc.sys.isBrowser&&this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node)},removeEventPropagation:function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.node),cc.sys.isBrowser&&this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node)}}),cc._RF.pop()},{}],FormatUtil:[function(t,e,i){"use strict";cc._RF.push(e,"12a51JyA55E46B4eLpSVhsR","FormatUtil");var o=t("../helper/Message"),n=t("./RandomUtil"),s={nFormatter:function(t,e){for(var i=[{value:1e18,symbol:"E"},{value:1e15,symbol:"P"},{value:1e12,symbol:"T"},{value:1e9,symbol:"G"},{value:1e6,symbol:"M"},{value:1e3,symbol:"k"}],o=/\.0+$|(\.[0-9]*[1-9])0+$/,n=0;n<i.length;n++)if(t>=i[n].value)return(t/i[n].value).toFixed(e).replace(o,"$1")+i[n].symbol;return t.toFixed(e).replace(o,"$1")},numberWithCommas:function(t){if(t){var e=(t=parseInt(t)).toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,"."),e.join(".")}return"0"},validateEmail:function(t){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},convertUrlToLocation:function(t){return t&&this.checkValidUrl(t)?(t=new URL(t),window.location.origin+t.pathname):t},validateUrlImage:function(t){var e=t.split("/").pop(),i=t.split(".").pop();return e.indexOf(".")>-1&&("png"===i||"jpg"===i)},replaceContent:function(t,e,i){return t?t.replaceAll(e,i):t},convertPhoneNumber:function(t){return t&&"0"===t[0]&&(t=t.substring(1)),t},checkPhoneValid:function(t){return/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})/.test(t)},checkDOBValid:function(t,e,i){var o=i+"/"+e+"/"+t,n=Date.parse(o);return!isNaN(n)},getOnlyNumberInString:function(t){var e=t.match(/\d+/g);return e?e.join(""):""},numberToTime:function(t){t<0&&(t=0),t=parseInt(t);var e=parseInt(t/60),i=t%60;return e<10&&(e="0"+e),i<10&&(i="0"+i),e+":"+i},getStringDateByTimeStamp:function(t){var e=new Date(1e3*t),i=e.getHours(),o=e.getMinutes(),n=e.getDate(),s=e.getMonth()+1,a=e.getFullYear();return i<10&&(i="0"+i),o<10&&(o="0"+o),n<10&&(n="0"+n),s<10&&(s="0"+s),i+":"+o+" "+n+"/"+s+"/"+a},getDateByTimeStamp:function(t){var e=new Date(1e3*t);return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()},getStringHourByTimeStamp:function(t){var e=new Date(1e3*t),i=e.getHours(),o=e.getMinutes(),n=e.getSeconds();return i<10&&(i="0"+i),o<10&&(o="0"+o),n<10&&(n="0"+n),i+":"+o+":"+n},getParamsInUrl:function(t,e){if(cc.sys.isBrowser){e||(e=location.href),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null==i?null:i[1]}return""},formatMessage:function(t){if(t){t=this.formatTypeMessage(t);for(var e=o.MESSAGE_FORBIDDEN,i=t.split(" "),n="",s=new RegExp("  ","g"),a=0,r=i.length;a<r;a++)for(var c=i[a].toLowerCase(),h=0,l=e.length;h<l;h++)if(-1!==c.indexOf(e[h])){i[a]="***";break}for(var u in i)n+=" "+i[u];return(n=n.replace(s," ")).trim()}return""},getStringOnlyDateByTimeStamp:function(t){var e=new Date(1e3*t),i=e.getDate(),o=e.getMonth()+1,n=e.getFullYear();return i<10&&(i="0"+i),o<10&&(o="0"+o),i+"/"+o+"/"+n},formatTypeMessage:function(t){var e=new RegExp("<","g"),i=new RegExp(">","g");return t=(t=t.replace(e,"")).replace(i,"")},sortDataTimeByTime:function(t){return t.sort(function(t,e){return e.created_at-t.created_at}),t},deduplicate:function(t){return t.filter(function(t,e,i){return i.indexOf(t)===e})},sortDataTimeByTime2:function(t){return t.sort(function(t,e){return e.time-t.time}),t},sortDataTimeByPrize:function(t){return t.sort(function(t,e){return t.total_prize_amount-e.total_prize_amount}),t},sortDataByAmount:function(t){return t.sort(function(t,e){return e.amount-t.amount}),t},filterSameItem:function(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++)t[e].nick_name===t[i].nick_name&&(t.splice(i,1),e=0,i=0);return t},filterSameItemSlot:function(t){for(var e=0;e<t.length-1;e++)for(var i=e+1;i<t.length;i++)t[e].nick_name===t[i].nick_name&&t[e].total_prize_amount===t[i].total_prize_amount&&(t.splice(i,1),e=0,i=0);return t},checkValidUrl:function(t){return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)},randomListAnget:function(t){var e=["baongoc86"],i=this.getRemainPosiotionInList(t,e),o=(new Date).getHours();if(10<o&&o<20)for(var s=0,a=e.length;s<a;s++){for(var r=0,c=0,h=t.length;c<h;c++)e[s]===t[c].nick_name&&(r=c);if(r>6){var l=n.getRandomInt(0,i.length-1),u=i.splice(l,1),d=t[r],m=t[u];t[r]=m,t[u]=d}}return t},getRemainPosiotionInList:function(t,e){for(var i=[],o=1;o<t.length;o++)if(o<9){for(var n=!1,s=0,a=e.length;s<a;s++)t[o].nick_name===e[s]&&(n=!0);n||i.push(o)}return i}};e.exports=s,cc._RF.pop()},{"../helper/Message":"Message","./RandomUtil":"RandomUtil"}],FormulaBezier:[function(t,e,i){"use strict";function o(t,e){this.time=t,this.listPoint=e,this.numberPoint=this.listPoint.length,this.convertListPointToVec2(),this.lastRenderTime=0}cc._RF.push(e,"d79e8napJJIz7lNINC36PA8","FormulaBezier"),o.prototype.convertListPointToVec2=function(){for(var t=0;t<this.numberPoint;t++)this.listPoint[t]=new cc.Vec2(this.listPoint[t].x,this.listPoint[t].y)},o.prototype.getPosition=function(t){for(var e=t/this.time,i=new cc.Vec2(0,0),o=0;o<this.numberPoint;o++)i.addSelf(this.tohop(this.numberPoint-1,o,e));return this.lastRenderTime=t,i},o.prototype.tohop=function(t,e,i){return this.listPoint[e].mul(this.J(t,e,i))},o.prototype.giaithua=function(t){for(var e=1,i=1;i<=t;i++)e*=i;return e},o.prototype.J=function(t,e,i){return this.giaithua(t)*Math.pow(i,e)*Math.pow(1-i,t-e)/(this.giaithua(e)*this.giaithua(t-e))},o.prototype.getRotate=function(t){var e=this.getPosition(this.lastRenderTime),i=this.getPosition(this.lastRenderTime+1/60);return 180-180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI},e.exports=o,cc._RF.pop()},{}],FormulaCurve:[function(t,e,i){"use strict";function o(t,e){this.p0=e[0],this.p1=e[1],this.p2=e[2],this.p3=e[3],this.time=t,this.lastRenderTime=0}cc._RF.push(e,"fc25aN4+7RGtqnvVS0lPrhK","FormulaCurve"),o.prototype.getPosition=function(t){var e=t/this.time,i=1-e,o=e*e,n=i*i,s=n*i,a=o*e,r=this.nhan(this.p0,s);return r=this.cong(r,this.nhan(this.p1,3*n*e)),r=this.cong(r,this.nhan(this.p2,3*i*o)),r=this.cong(r,this.nhan(this.p3,a)),this.lastRenderTime=t,r},o.prototype.getRotate=function(t){var e=this.getPosition(this.lastRenderTime),i=this.getPosition(this.lastRenderTime+1/60);return 180-180*Math.atan2(i.y-e.y,i.x-e.x)/Math.PI},o.prototype.nhan=function(t,e){return{x:t.x*e,y:t.y*e}},o.prototype.cong=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},e.exports=o,cc._RF.pop()},{}],FormulaDirect:[function(t,e,i){"use strict";function o(t,e){this.startX=e[0].x,this.startY=e[0].y,this.endX=e[1].x,this.endY=e[1].y,this.time=t,this.distance=Math.sqrt(Math.pow(this.endX-this.startX,2)+Math.pow(this.endY-this.startY,2))}cc._RF.push(e,"cb3aaPk1whDTJ3wqN38Af2w","FormulaDirect"),o.prototype.getPosition=function(t){return{x:(this.endX-this.startX)*t/this.time+this.startX,y:(this.endY-this.startY)*t/this.time+this.startY}},o.prototype.getRotate=function(t){var e=180*Math.atan2(this.endY-this.startY,this.endX-this.startX)/Math.PI;return e>=360&&(e-=360),180-e},e.exports=o,cc._RF.pop()},{}],GameAchivementItem:[function(t,e,i){"use strict";cc._RF.push(e,"56abdbRkdlBE5w6h5p+6UEx","GameAchivementItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{gameIconSprite:cc.Sprite,winLabel:cc.Label,drawLabel:cc.Label,loseLabel:cc.Label,bestWinLabel:cc.Label,bacaySpriteFrame:cc.SpriteFrame,chanSpriteFrame:cc.SpriteFrame,liengSpriteFrame:cc.SpriteFrame,maubinhSpriteFrame:cc.SpriteFrame,phomSpriteFrame:cc.SpriteFrame,pokerSpriteFrame:cc.SpriteFrame,samSpriteFrame:cc.SpriteFrame,samSoloSpriteFrame:cc.SpriteFrame,tlmnSpriteFrame:cc.SpriteFrame,tlmnSoloSpriteFrame:cc.SpriteFrame,xitoSpriteFrame:cc.SpriteFrame,xocdiaSpriteFrame:cc.SpriteFrame},init:function(t){this.data=t;var e=this.getSpriteFrameByGameName(t.game_short_name);e&&(this.gameIconSprite.spriteFrame=e),this.winLabel.string=t.win,this.drawLabel.string=t.republic,this.loseLabel.string=t.lost,this.bestWinLabel.string=o.numberWithCommas(t.best_money_win)},onLoad:function(){},getSpriteFrameByGameName:function(t){switch(t){case n.BA_CAY:return this.bacaySpriteFrame;case n.CHAN:return this.chanSpriteFrame;case n.LIENG:return this.liengSpriteFrame;case n.MAU_BINH:return this.maubinhSpriteFrame;case n.PHOM:return this.phomSpriteFrame;case n.POKER:return this.pokerSpriteFrame;case n.SAM:return this.samSpriteFrame;case n.SAMSOLO:return this.samSoloSpriteFrame;case n.TLMN:return this.tlmnSpriteFrame;case n.TLMNSOLO:return this.tlmnSoloSpriteFrame;case n.XITO:return this.xitoSpriteFrame;case n.XOC_DIA:return this.xocdiaSpriteFrame;default:return null}}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../util/FormatUtil":"FormatUtil"}],GameCenterHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"138a7lXGsNPDYFwryKLbn2G","GameCenterHandlerRequest");var o=t("../../helper/Constant"),n=(t("../../helper/Message"),{init:function(t){this.GameCenter=t,this.GameRoom=t.GameRoom},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case o.MONEY:case o.GOLD:this.GameCenter.updateMoneyGold(),this.GameRoom.resetAllRoom();break;case o.SAFE_AMOUNT:this.GameCenter.updateSafeAmount();break;case o.VIP_POINT_2_REMAIN_VARIBLE:case o.VIP_POINT_2_TOTAL_VARIBLE:this.GameCenter.GameInfo.InfoAccount.VipAccount.initInfo(),this.GameCenter.Header.HeaderAccount.initVip();break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params;switch(t.cmd){case o.NEWS:this.GameCenter.handlerNews(e);break;case o.ROOM_INFO:this.GameCenter.clearTempRequests(),this.GameCenter.sfsManager.onResponse(t);break;case o.JOIN_ROOM_ERROR:this.GameCenter.hideProcessingNode(),this.GameCenter.hideProcessingSceneNode(),this.GameCenter.handleJoinRoomError(t.params);break;case o.MINIGAME_REQUEST:this.GameCenter.MiniGame&&this.GameCenter.MiniGame.handleRequest(e),this.GameCenter.GameList.handleRequest(e);break;case o.REQUEST_AWARD_CARD:this.GameCenter.handleAward(e);break;case o.REQUEST_RECHARGE_GOLD:this.GameCenter.handleRechargeGold(e);break;case o.REQUEST_TRANSFER:this.GameCenter.handleTransfer(e);break;case o.REQUEST_SAFE_DEPOSIT:this.GameCenter.handleSafeDeposit(e);break;case o.REQUEST_SAFE_WITHDRAW:this.GameCenter.handleSafeWithDraw(e);break;case o.REQUEST_CHAT_GET_CHAT:this.GameCenter.handleGetChat(e);break;case o.REQUEST_CHAT_SEND_CHAT:this.GameCenter.handleSendChat(e);break;case o.REQUEST_PLAYER_RECEIVE_ALERT:this.GameCenter.handleAlert(e);break;case o.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.GameCenter.handleNewMessage(e);break;case o.REQUEST_ACHIVEMENTED_VIP_POINT:this.GameCenter.handleAlert(e);break;case o.REQUEST_INVITE:this.GameCenter.handleInvite(e);break;case o.REQUEST_ACCEPT_INVITE:this.GameCenter.handleAcceptInvite(e);break;case o.REQUEST_ACHIVEMENTED_QUEST:this.GameCenter.handleAchivementedQuest(e);break;case o.REQUEST_NOT_ENOUGH_BALANCE_STAY_ROOM:this.GameCenter.handleNotEnoughBalanceStayRoom(e);break;case o.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.GameCenter.handlePlusLuckyWheelFree(e);break;case o.REQUEST_MESSAGE:this.GameCenter.handleMessage(e);break;case o.REQUEST_GET_OTP:this.GameCenter.handleGetOtp(e);break;case o.CONVERT_DIAMOND:this.GameCenter.handleMessage(e);break;case o.UPDATE_MINIGAME_FREE:this.GameCenter.MiniGame&&this.GameCenter.MiniGame.initNumberSpinFreeGame(e);break;case o.GET_TOP:this.GameCenter.MiniGame&&this.GameCenter.MiniGame.handleRequest(e);break;case o.GIFT_CODE:this.GameCenter.handleGiftCode(e);break;case o.PLAYER_TRANSFER_VIP_POINT_2:this.GameCenter.AwardVip&&(this.GameCenter.AwardVip.initData(),this.GameCenter.handleMessage(e))}}});e.exports=n,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message"}],GameCenterUI:[function(t,e,i){"use strict";cc._RF.push(e,"1c4b7UK3kxP/KftF2Bz0W6b","GameCenterUI"),cc.Class({extends:cc.Component,properties:{headerLoginNode:cc.Node,headerAccountNode:cc.Node,shopButtonNode:cc.Node,gameNode:cc.Node,gameListNode:cc.Node,gameRoomNode:cc.Node,infoNode:cc.Node,rechargeNode:cc.Node,loginFormNode:cc.Node,registerFormNode:cc.Node,forgetPasswordPhoneFormNode:cc.Node,forgetPasswordEmailFormNode:cc.Node,updateNicknameFormNode:cc.Node,updateAvatarFormNode:cc.Node,giftCodeFormNode:cc.Node,playerInviteFormNode:cc.Node,changePasswordFormNode:cc.Node,changePasswordSuccessFormNode:cc.Node,joinRoomErrorFormNode:cc.Node,otpFirstAccountFormNode:cc.Node,otpLoginFormNode:cc.Node,confirmSecurityFormNode:cc.Node,confirmRemoveMailFormNode:cc.Node,agentFormNode:cc.Node,settingFormNode:cc.Node,turorialFormNode:cc.Node,logOutFormNode:cc.Node,buyInFormNode:cc.Node,otpFormNode:cc.Node,bannerEventFormNode:cc.Node,eventGameFormNode:cc.Node,topEvent2FormNode:cc.Node,inserestInviteFriendFoemNode:cc.Node,awardInviteFriendFormNode:cc.Node,historyAwardInviteFriendFormNode:cc.Node,rankInviteFriendFormNode:cc.Node,interestVipFormNode:cc.Node,awardVipFormNode:cc.Node,rankVip2FormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node},onLoad:function(){this.dialogFormUpdateNickname=this.updateNicknameFormNode.getComponent("DialogForm"),this.dialogFormUpdateAvatar=this.updateAvatarFormNode.getComponent("DialogForm"),this.dialogFormGiftCode=this.giftCodeFormNode.getComponent("DialogForm"),this.dialogFormPlayerInvite=this.playerInviteFormNode.getComponent("DialogForm"),this.dialogFormChangePassword=this.changePasswordFormNode.getComponent("DialogForm"),this.dialogFormChangePasswordSuccess=this.changePasswordSuccessFormNode.getComponent("DialogForm"),this.dialogFormOtpFirstAccount=this.otpFirstAccountFormNode.getComponent("DialogForm"),this.dialogFormOtpLogin=this.otpLoginFormNode.getComponent("DialogForm"),this.dialogFormConfirmSecurity=this.confirmSecurityFormNode.getComponent("DialogForm"),this.dialogFormJoinRoomError=this.joinRoomErrorFormNode.getComponent("DialogForm"),this.dialogFormConfirmRemoveMail=this.confirmRemoveMailFormNode.getComponent("DialogForm"),this.dialogFormAgent=this.agentFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormTutorial=this.turorialFormNode.getComponent("DialogForm"),this.dialogFormLogOut=this.logOutFormNode.getComponent("DialogForm"),this.dialogFormOtp=this.otpFormNode.getComponent("DialogForm"),this.dialogFormBuyIn=this.buyInFormNode.getComponent("DialogForm"),this.dialogFormBannerEvent=this.bannerEventFormNode.getComponent("DialogForm"),this.dialogFormEventGame=this.eventGameFormNode.getComponent("DialogForm"),this.dialogFormTopEvent2=this.topEvent2FormNode.getComponent("DialogForm"),this.dialogFormInserestInviteFriend=this.inserestInviteFriendFoemNode.getComponent("DialogForm"),this.dialogFormAwardInviteFriend=this.awardInviteFriendFormNode.getComponent("DialogForm"),this.dialogFormHistoryAwardInviteFriend=this.historyAwardInviteFriendFormNode.getComponent("DialogForm"),this.dialogFormRankInviteFriend=this.rankInviteFriendFormNode.getComponent("DialogForm"),this.dialogFormInterestVip=this.interestVipFormNode.getComponent("DialogForm"),this.dialogFormAwardVip=this.awardVipFormNode.getComponent("DialogForm"),this.dialogFormRankVip2=this.rankVip2FormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormLogin=this.loginFormNode.getComponent("DialogForm"),this.dialogFormRegister=this.registerFormNode.getComponent("DialogForm")},showGameNode:function(){this.hideAllNodes(),this.gameNode.active=!0},showInfoNode:function(){this.hideAllNodes(),this.infoNode.active=!0},showRechargeNode:function(){this.hideAllNodes(),this.rechargeNode.active=!0},showShopNode:function(){this.hideAllNodes(),this.rechargeNode.active=!0},hideAllNodes:function(){this.gameNode.active=!1,this.infoNode.active=!1,this.rechargeNode.active=!1},showGameListNode:function(){this.gameListNode.active=!0,this.gameRoomNode.active=!1},showGameRoomNode:function(){this.gameListNode.active=!1,this.gameRoomNode.active=!0},showHeaderLoginNode:function(){this.headerLoginNode.active=!0,this.headerAccountNode.active=!1},showHeaderAccountNode:function(){this.headerLoginNode.active=!1,this.headerAccountNode.active=!0},showShopButton:function(){this.shopButtonNode.active=!0},hideShopButton:function(){this.shopButtonNode.active=!1},showLoginFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogin.showDialog(t)},hideLoginFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogin.hideDialog(t)},showRegisterFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRegister.showDialog(t)},hideRegisterFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRegister.hideDialog(t)},showForgetPasswordPhoneFormNode:function(){this.forgetPasswordPhoneFormNode.active=!0},hideForgetPasswordPhoneFormNode:function(){this.forgetPasswordPhoneFormNode.active=!1},showForgetPasswordEmailFormNode:function(){this.forgetPasswordEmailFormNode.active=!0},hideForgetPasswordEmailFormNode:function(){this.forgetPasswordEmailFormNode.active=!1},showUpdateNicknameFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateNickname.showDialog(t)},hideUpdateNicknameFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateNickname.hideDialog(t)},showUpdateAvatarFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateAvatar.showDialog(t)},hideUpdateAvatarFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormUpdateAvatar.hideDialog(t)},showGiftCodeFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormGiftCode.showDialog(t)},hideGiftCodeFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormGiftCode.hideDialog(t)},showPlayerInviteFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPlayerInvite.showDialog(t)},hidePlayerInviteFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPlayerInvite.hideDialog(t)},showChangePasswordFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePassword.showDialog(t)},hideChangePasswordFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePassword.hideDialog(t)},showChangePasswordSuccessFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePasswordSuccess.showDialog(t)},hideChangePasswordSuccessFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormChangePasswordSuccess.hideDialog(t)},showOtpFirstAccountFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpFirstAccount.showDialog(t)},hideOtpFirstAccountFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpFirstAccount.hideDialog(t)},showOtpLoginFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpLogin.showDialog(t)},hideOtpLoginFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtpLogin.hideDialog(t)},showSecurityFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmSecurity.showDialog(t)},hideSecurityFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmSecurity.hideDialog(t)},showConfirmRemoveMailFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmRemoveMail.showDialog(t)},hideConfirmRemoveMailFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormConfirmRemoveMail.hideDialog(t)},showAgentFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAgent.showDialog(t)},hideAgentFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAgent.hideDialog(t)},showSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)},hideSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)},showJoinRoomErrorNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormJoinRoomError.showDialog(t)},hideJoinRoomErrorNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormJoinRoomError.hideDialog(t)},showTutorialFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.showDialog(t)},hideTutorialFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.hideDialog(t)},showLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.showDialog(t)},hideLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.hideDialog(t)},showOtpFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormOtp.showDialog(t)},showBuyInFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBuyIn.showDialog(t)},showBannerFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBannerEvent.showDialog(t)},showEventGameNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormEventGame.showDialog(t)},showTopEvent2FormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTopEvent2.showDialog(t)},hideBuyInFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBuyIn.hideDialog(t)},showRankInviteFriemdNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankInviteFriend.showDialog(t)},showAwardInviteFriendNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAwardInviteFriend.showDialog(t)},showHistoryAwardInviteFriendNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistoryAwardInviteFriend.showDialog(t)},showInsertestInviteFriendNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormInserestInviteFriend.showDialog(t)},showInserestVipNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormInterestVip.showDialog(t)},showAwardVipNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAwardVip.showDialog(t)},showRankVip2Node:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankVip2.showDialog(t)},showDialogMessage:function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()},hideDialogMessage:function(){this.dialogMessageForm.hideDialog()},showProcessingNode:function(){this.processingNode.active=!0},hideProcessingNode:function(){this.processingNode.active=!1},showProcessingSceneNode:function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)},hideProcessingSceneNode:function(){this.processingSceneNode.active=!1}}),cc._RF.pop()},{}],GameCenter:[function(t,e,i){"use strict";cc._RF.push(e,"a3fb8oESmxESq2/i4Mee/Zd","GameCenter");var o=t("../../base/BaseScene"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("../../util/Util"),r=t("../../util/FormatUtil"),c=t("../../util/Track"),h=t("./GameCenterHandlerRequest"),l=t("./GameCenterUI"),u=t("./GameInfo"),d=t("./GameRecharge"),m=t("./GameList"),p=t("./GameRoom"),f=t("./header/Header"),g=t("./footer/Footer"),_=t("./form/Login"),S=t("./form/Register"),C=t("./form/ForgetPasswordPhone"),N=t("./form/ForgetPasswordEmail"),E=t("./form/Bonus"),T=t("./form/UpdateNickname"),I=t("./form/UpdateAvatar"),v=t("./form/GiftCode"),y=t("./form/PlayerInvite"),B=t("./form/ChangePassword"),L=t("./form/ChangePasswordSuccess"),R=t("./form/JoinRoomError"),A=t("./form/OtpFirstAccount"),M=t("./form/OTPLogin"),b=t("./form/ConfirmSecurity"),P=t("./form/ConfirmRemoveMail"),O=t("./form/Agent"),D=t("./form/CaptchaForm"),F=t("./other/ChatEvent"),k=t("./info/vip2/AwardVip"),G=t("./info/vip2/RankVip2"),w=t("./form/event/BannerEvent"),U=t("./form/event/EventGame"),H=t("./form/event-2/TopEvent2"),x=t("../../prefab/form/LogOut"),X=t("../../prefab/form/Setting"),W=t("../../prefab/form/Tutorial"),Y=t("../../prefab/form/Otp"),V=t("../../ui/dialog/BuyInForm"),q=t("../../prefab/News"),K=t("../../prefab/Toast"),J=t("../../ui/dialog/DialogMessage"),z=t("../../ui/Processing"),j=t("../../ui/ProcessingScene"),Q=t("../../object/Audio");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,GameCenterUI:l,GameInfo:u,GameRecharge:d,GameList:m,GameRoom:p,Header:f,Footer:g,Login:_,Register:S,ForgetPasswordPhone:C,ForgetPasswordEmail:N,Bonus:E,UpdateNickname:T,UpdateAvatar:I,GiftCode:v,PlayerInvite:y,ChangePassword:B,ChangePasswordSuccess:L,JoinRoomError:R,OtpFirstAccount:A,OTPLogin:M,ConfirmSecurity:b,ConfirmRemoveMail:P,Agent:O,CaptchaForm:D,Setting:X,LogOut:x,BuyInForm:V,Tutorial:W,Otp:Y,ChatEvent:F,TopEvent2:H,BannerEvent:w,EventGame:U,AwardVip:k,RankVip2:G,News:q,Toast:K,DialogMessage:J,Processing:z,ProcessingScene:j,Audio:Q},onLoad:function(){this._super(),this.setSceneName(n.SCENE_GAME_CENTER),this.sfsManager.setController(this),this.isAddEvent=!1,this.GameInfo.init(this),this.GameRecharge.init(this),this.GameList.init(this),this.GameRoom.init(this),this.Header.init(this),this.Footer.init(this),this.Login.init(this),this.Register.init(this),this.ForgetPasswordPhone.init(this),this.ForgetPasswordEmail.init(this),this.Bonus.init(this),this.UpdateNickname.init(this),this.UpdateAvatar.init(this),this.GiftCode.init(this),this.PlayerInvite.init(this),this.ChangePassword.init(this),this.ChangePasswordSuccess.init(this),this.JoinRoomError.init(this),this.OtpFirstAccount.init(this),this.OTPLogin.init(this),this.ConfirmSecurity.init(this),this.ConfirmRemoveMail.init(this),this.Agent.init(this),this.CaptchaForm.init(this),this.Setting.init(this),this.LogOut.init(this),this.Otp.init(this),this.BuyInForm.init(this),this.ChatEvent.init(this),this.Tutorial.init(this),this.BannerEvent.init(this),this.TopEvent2.init(this),this.EventGame.init(this),this.AwardVip.init(this),this.RankVip2.init(this),this.GameCenterHandlerRequest=h,this.GameCenterHandlerRequest.init(this),this.onResponseBind=this.GameCenterHandlerRequest.onResponse.bind(this.GameCenterHandlerRequest),this.onUserVariablesUpdateBind=this.GameCenterHandlerRequest.onUserVariablesUpdate.bind(this.GameCenterHandlerRequest),this.addEventResponse(),this.initAccountNode(),this.initShopNode()},start:function(){this.initListGame(),this.initListRoomsOutGame()},onDestroy:function(){this.removeEventResponse()},updateMoneyGold:function(){this.Header.HeaderAccount.updateMoneyGold(),this.GameRecharge.updateMoneyGold()},updateSafeAmount:function(){this.GameRecharge.Safe.initMoney()},initLoginSuccess:function(){this.hideProcessingNode(),this.initBaseController(),this.Bonus.initData(),this.GameCenterUI.hideLoginFormNode(!1),this.GameCenterUI.hideRegisterFormNode(!1),this.GameCenterUI.showGameListNode(),this.GameCenterUI.showHeaderAccountNode(),this.GameCenterUI.showShopButton(),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initShowOtp(),this.ChatEvent.initLoginSuccess(),this.createMinigameNode(),this.initEvent()},initShowOtp:function(){var t=this.getUser();t.is_new&&(this.GameCenterUI.showOtpFirstAccountFormNode(!1),t.is_new=!1)},initDataAndConnectSFS:function(t){this.initData(t),this.checkNicknameAndConnectSFS()},initData:function(t){this.setUser(t.user),this.setConfig(t.config),this.setListAgent(t.list_agent),this.setBankListAmount(t.bank_list_amount),this.setBankListProvider(t.bank_list_provider),this.setFreeChip(t.free_chip),this.setLuckyWheel(t.lucky_wheel),this.setQuest(t.quest),this.setLongVuongConfig(t.lv),this.setSecurityGame(t.security_game),this.setDiamondLevelEvent(t.diamond_level),this.setDiamondEvent(t.diamond_event),this.setDiamondEventOpen(t.diamond_event_open)},initAccountNode:function(){this.sfs&&this.sfs.isConnected()&&(this.GameCenterUI.showHeaderAccountNode(),this.ChatEvent.initLoginSuccess())},initEvent:function(){this.isShowEvent()||(this.setShowEvent(!0),this.GameCenterUI.showBannerFormNode())},checkNicknameAndConnectSFS:function(){var t=this.getUser().nick_name,e=this.getUser().username;t&&t!==e?this.checkNickName()?(this.hideProcessingNode(),this.GameCenterUI.showUpdateNicknameFormNode()):this.connectSFS():(this.hideProcessingNode(),this.GameCenterUI.showUpdateNicknameFormNode(),this.GameCenterUI.hideLoginFormNode())},connectSFS:function(){this.sfsManager.init(),this.sfsManager.connect(this)},initListRoomsOutGame:function(){this.isConnected()&&(this.Audio.playOutGame(),this.initTempRequests()),this.initListRooms()},initListRooms:function(){if(this.isConnected()&&this.getLastJoinedRoom()){var t=this.getLastJoinedRoom().name;a.isLobbyGame(t)&&this.GameCenterUI.showGameRoomNode()}},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.GameCenterHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initListGame:function(){this.isSenceGameSlot()&&this.GameList.showSlotGame(),this.setSceneGameSlot(!1)},initShopNode:function(){this.isConnected()?this.GameCenterUI.showShopButton():this.GameCenterUI.hideShopButton()},initCaptcha:function(){var t=this,e={device_id:this.getDeviceID()};this.api.getCaptcha(e,function(e){t.Login.initCaptcha(e.data),t.Register.initCaptcha(e.data),t.CaptchaForm.initCaptcha(e.data)},function(e){t.showDialogMessage(s.FAILURE,e.msg)})},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initFacebook:function(){window.FB&&!window.isInitFB&&FB.init({appId:"2619861124937323",autoLogAppEvents:!0,xfbml:!0,cookie:!0,version:"v3.0"})},checkLoginFacebook:function(){if(cc.sys.isBrowser&&window.FB){var t=this;t.showProcessingNode(),t.initFacebook(),FB.getLoginStatus(function(e){if("connected"===e.status){var i=e.authResponse.userID,o=n.LOGIN_FACEBOOK_TYPE,s=e.authResponse.accessToken;t.loginSocial(i,"",o,s)}else t.setAutoLogin(!1),t.hideProcessingNode(),t.initFacebook()})}},loginFacebook:function(){if(cc.sys.isBrowser&&window.FB){var t=this;t.showProcessingNode(),window.FB&&(t.initFacebook(),FB.login(function(e){if(e.authResponse){var i=e.authResponse.userID,o=n.LOGIN_FACEBOOK_TYPE,s=e.authResponse.accessToken;t.loginSocial(i,"",o,s)}else t.setAutoLogin(!1),t.hideProcessingNode(),t.initFacebook()}))}},loginSocial:function(t,e,i,o,n){var a=this;this.showProcessingNode();var r={social_id:t,email:e,social_type:i,access_token:o,register_code:this.getRegisterCode(),mkt_code:this.getMarketingCode(),device_id:this.getDeviceID(),fid:this.getFID()};n&&(r.otp=n);this.api.registerSocial(r,function(n){0===n.data.login_status?(a.OTPLogin.setLoginFacebook(t,e,i,o),a.OTPLogin.clear(),a.hideProcessingNode(),a.GameCenterUI.showOtpLoginFormNode()):(a.setAutoLogin(!0),a.setAccountType(!0),a.initDataAndConnectSFS(n.data),a.GameCenterUI.hideOtpLoginFormNode(),n.data.user.is_new&&c.addTrackCompleteRegistration())},function(t){a.setAutoLogin(!1),a.hideProcessingNode(),a.showDialogMessage(s.LOGIN_TITLE,t.msg)})},handlerNews:function(t){this.News.addNews(t)},handleAward:function(t){this.hideProcessingNode(),this.showDialogMessage(s.AWARD_TITLE,t.msg),t.status?this.GameRecharge.RechargeUseMoney.AwardCard.clear():this.GameRecharge.RechargeUseMoney.AwardCard.initCapcha()},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg),this.GameRecharge.RechargeGold.clear()},handleTransfer:function(t){this.hideProcessingNode(),this.showDialogMessage(s.TRANSFER_TITLE,t.msg),t.status&&this.GameRecharge.RechargeUseMoney.Transfer.TransferContent.clear()},handleSafeDeposit:function(t){this.hideProcessingNode(),this.showDialogMessage(s.SAFE_TITLE,t.msg),t.status&&this.GameRecharge.Safe.clear()},handleSafeWithDraw:function(t){this.hideProcessingNode(),this.showDialogMessage(s.SAFE_TITLE,t.msg),this.GameRecharge.Safe.clear(),this.GameRecharge.Safe.initWithDrawSuccess()},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.ChatEvent.Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.ChatEvent.Chat.addChat(e)}else this.ChatEvent.Chat.addChatFail(t.msg)},handleInvite:function(t){t.status?this.PlayerInvite.node.active||(this.PlayerInvite.initData(t.data),this.GameCenterUI.showPlayerInviteFormNode()):this.showDialogMessage(s.INTIVE_TITLE,t.msg)},handleAcceptInvite:function(t){this.showDialogMessage(s.INTIVE_TITLE,t.msg)},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handleMessage:function(t){this.hideProcessingNode(),this.showToast(t.msg)},handleNotEnoughBalanceStayRoom:function(t){var e=r.numberWithCommas(t.data.balance),i=a.getRoomTypeByRoomTypeCode(t.data.room_type),o=String.format(s.NOT_ENOUGH_MONEY_TO_STAY_GAME,e,i);this.showDialogMessage(s.NOTIFICATION_TITLE,o)},handleGetOtp:function(t){this.hideProcessingNode(),this.showDialogMessage(s.NOTIFICATION_TITLE,t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleNewMessage:function(t){this.Header.HeaderAccount.plusUnreadMessage(),this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleJoinRoomError:function(t){t.msg===s.JOIN_ROOM_ERROR?(this.JoinRoomError.initMessage(t.msg),this.GameCenterUI.showJoinRoomErrorNode()):this.showDialogMessage(s.TITLE_FAILED,t.msg)},handleGiftCode:function(t){this.GiftCode.clear(),this.showDialogMessage(s.GIFTCODE_TITLE,t.msg)},checkNickName:function(){return this.getUser().nick_name===this.getUser().username},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.GameCenterUI.showDialogMessage(t,e)},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},hideDialogMessage:function(){this.GameCenterUI.hideDialogMessage()},showProcessingNode:function(){this.GameCenterUI.showProcessingNode()},hideProcessingNode:function(){this.GameCenterUI.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCenterUI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCenterUI.hideProcessingSceneNode()},loadConfig:function(){this.api.getConfig({},function(t){cc.S.general_config=t.data},function(t){})},checkLoginFacebookViaURL:function(){if(!this.isConnected()){var t=window.location.href,e=new URL(t),i=e.searchParams.get("id"),o=n.LOGIN_FACEBOOK_TYPE,s=e.searchParams.get("access_token"),a=e.searchParams.get("email");window.history.pushState({},null,"/"),i&&s&&this.loginSocial(i,a,o,s)}},getUrlLoginFacebook:function(){return(window.location.host=n.HOST_GAME_2)?n.HOST_LOGIN_FACEBOOK:n.HOST_LOGIN_FACEBOOK_2}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Otp":"Otp","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/BuyInForm":"BuyInForm","../../ui/dialog/DialogMessage":"DialogMessage","../../util/FormatUtil":"FormatUtil","../../util/Track":"Track","../../util/Util":"Util","./GameCenterHandlerRequest":"GameCenterHandlerRequest","./GameCenterUI":"GameCenterUI","./GameInfo":"GameInfo","./GameList":"GameList","./GameRecharge":"GameRecharge","./GameRoom":"GameRoom","./footer/Footer":"Footer","./form/Agent":"Agent","./form/Bonus":"Bonus","./form/CaptchaForm":"CaptchaForm","./form/ChangePassword":"ChangePassword","./form/ChangePasswordSuccess":"ChangePasswordSuccess","./form/ConfirmRemoveMail":"ConfirmRemoveMail","./form/ConfirmSecurity":"ConfirmSecurity","./form/ForgetPasswordEmail":"ForgetPasswordEmail","./form/ForgetPasswordPhone":"ForgetPasswordPhone","./form/GiftCode":"GiftCode","./form/JoinRoomError":"JoinRoomError","./form/Login":"Login","./form/OTPLogin":"OTPLogin","./form/OtpFirstAccount":"OtpFirstAccount","./form/PlayerInvite":"PlayerInvite","./form/Register":"Register","./form/UpdateAvatar":"UpdateAvatar","./form/UpdateNickname":"UpdateNickname","./form/event-2/TopEvent2":"TopEvent2","./form/event/BannerEvent":"BannerEvent","./form/event/EventGame":"EventGame","./header/Header":"Header","./info/vip2/AwardVip":"AwardVip","./info/vip2/RankVip2":"RankVip2","./other/ChatEvent":"ChatEvent"}],GameCommon:[function(t,e,i){"use strict";cc._RF.push(e,"ed8d5tBlklCp6EDz4au3hT9","GameCommon");var o=t("../base/BaseScene"),n=t("../util/BrowserUtil"),s=t("../util/Util"),a=t("../util/FormatUtil"),r=t("../helper/Constant"),c=t("../helper/Config"),h=t("../helper/Message"),l=t("../object/RoomType"),u=t("./form/Tutorial"),d=t("./form/Setting"),m=t("./form/LogOut"),p=t("./form/Invite"),f=t("../prefab/Toast"),g=t("../ui/Processing"),_=t("../ui/ProcessingScene"),S=t("../ui/dialog/DialogMessage"),C=t("../prefab/News"),N=t("../ui/dialog/BetForm"),E=t("../ui/dialog/BuyInForm"),T=t("../object/Audio");cc.Class({extends:o,properties:{quickChatNode:cc.Node,textNode:cc.Node,emotionNode:cc.Node,chatEditBox:cc.EditBox,nameTableLabel:cc.Label,betTableLabel:cc.Label,menuFormNode:cc.Node,waitingNode:cc.Node,showBuyInButtonNode:cc.Node,showHistoryChatButtonNode:cc.Node,historyChatNode:cc.Node,chatGameItemPrefab:cc.Prefab,chatGameScrollView:cc.ScrollView,Tutorial:u,Setting:d,LogOut:m,Invite:p,BetForm:N,BuyInForm:E,quickChatItemPrefab:cc.Prefab,listTextNode:cc.Node,listEmotionNode:cc.Node,questNotificationItemPrefab:cc.Prefab,emotionSpriteAtlas:cc.SpriteAtlas,Processing:g,ProcessingScene:_,Toast:f,DialogMessage:S,News:C,Audio:T},init:function(t){this.controller=t,this.Setting.init(this),this.LogOut.init(this),this.Invite.init(this),this.BetForm.init(this),this.BuyInForm.init(this)},onLoad:function(){var t=this;this._super(),this.addEvent=!1,this.room=this.getLastJoinedRoom(),this.roomType=parseInt(this.room.variables[r.ROOM_TYPE].value),this.minBet=parseInt(this.room.variables[r.MIN_BET].value),this.isMoneyType=this.roomType==l.MONEY_CODE,this.initRoomDescription(),this.initQuickChat(),this.dialogFormSetting=this.Setting.node.getComponent("DialogForm"),this.dialogFormInvite=this.Invite.node.getComponent("DialogForm"),this.onPublicMessage=function(e){var i=e.message,o=e.sender.variables.nick_name.value;t.emotionSpriteAtlas.getSpriteFrame(i)||t.instanceChatItem(o,i)}},onEnable:function(){this.getSFS()&&this.getSFS().addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage)},start:function(){this.Audio.playJoinGame()},onDisable:function(){this.getSFS()&&this.getSFS().removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage)},instanceChatItem:function(t,e){var i=cc.instantiate(this.chatGameItemPrefab);i.getComponent("ChatGameItem").init(t,e),this.chatGameScrollView.content.addChild(i),this.chatGameScrollView.scrollToBottom()},onShowHistoryChatClick:function(){this.Audio.playClick(),this.historyChatNode.active?this.hideHistoryChatNode():this.showHistoryChatNode(),this.hideQuickChatNode()},onMenuClick:function(){this.Audio.playClick(),this.menuFormNode.active=!this.menuFormNode.active},onRechargeClick:function(){this.Audio.playClick(),this.showDialogMessage(h.RECHARGE_MONEY_TITLE,"Th\u1ebb n\u1ea1p \u0111ang b\u1ea3o tr\xec")},onQuestClick:function(){this.Audio.playClick(),this.MiniGame.Quest.showDialog()},onTutorialClick:function(){this.Audio.playClick(),this.Tutorial.showDialog(),this.Tutorial.showTutorialByGameName(this.getGameName())},onSettingsClick:function(){this.Audio.playClick(),this.dialogFormSetting.showDialog()},onBackClick:function(){this.Audio.playClick(),this.sendRequest.send(r.REQUEST_LEFT_ROOM)},onShowQuickChatClick:function(){this.Audio.playClick(),this.hideHistoryChatNode(),this.historyChatNode.active?this.hideQuickChatNode():this.quickChatNode.active?this.hideQuickChatNode():this.showQuickChatNode()},onTextClick:function(){this.Audio.playClick(),this.hideEmotionNode(),this.showTextNode()},onEmotionClick:function(){this.Audio.playClick(),this.hideTextNode(),this.showEmotionNode()},onQuickChatItemClick:function(t){this.Audio.playClick();var e=t.target._children[0].getComponent(cc.Label).string;this.sendChat(e),this.hideQuickChatNode()},onEmotionItemClick:function(t){this.Audio.playClick();var e=t.target.getComponent(cc.Sprite).spriteFrame._textureFilename;this.sendChat(e),this.hideQuickChatNode()},onInviteClick:function(){this.Audio.playClick();var t=this.getGameName(),e=s.getGameConfigByRoomName(t);e&&(1==e.invite_on&&this.dialogFormInvite.showDialog())},onShowBuyInClick:function(){this.Audio.playClick();var t=this.getGameName(),e=s.getGameConfigByRoomName(t),i=this.BuyInForm,o=0,n=this.getBalance(),a=this.isAutoBuyIn();o=this.isMoneyType?this.getMoney():this.getGold();var c=e[r.MIN_BUY]*this.minBet,h=e[r.MAX_BUY]*this.minBet;c>n+o&&(c=n+o),h>o+n&&(h=o+n),i.setInvite(!1),i.setAutoBuyIn(a),i.setRound(this.minBet),i.setMinValue(c),i.setMaxValue(h),i.setValue(n),this.showBuyInForm()},onSendChatClick:function(){this.Audio.playClick();var t=this.chatEditBox.string;this.sendChat(t)},onCloseChatClick:function(){this.Audio.playClick(),this.hideQuickChatNode()},initRoomDescription:function(){var t=this.getGameName(),e=this.getTableId(),i=this.getLastJoinedRoom(),o=a.numberWithCommas(i.variables[r.MIN_BET].value),n=i.variables[r.MATCH_GAME_ID]?i.variables[r.MATCH_GAME_ID].value:"",c=i.variables[r.ROOM_TYPE].value;t=s.getGameNameByRoomName(t),c=s.getRoomTypeByRoomTypeCode(c);var l=String.format(h.GAME_DESCRIBE_TABLE_NAME,t,e,n),u=String.format(h.GAME_DESCRIBE_TABLE_BET,o,c);this.nameTableLabel.string=l,this.betTableLabel.string=u},initQuickChat:function(){this.listTextNode.removeAllChildren(!0);var t=this.getGeneralConfig();if(t){var e=t.GUIDE,i=this.getGameName();for(var o in e)if(i===e[o].short_name){var n=e[o].quick_chat;if(n){var s=n.split(";");for(var a in s){var r=cc.instantiate(this.quickChatItemPrefab);r.parent=this.listTextNode,r.getComponent("QuickChatItem").init(this,s[a])}}break}}var c=this.listEmotionNode.getChildren();for(var h in c)c[h].getComponent("EmotionItem").init(this)},initBuyIn:function(){var t=this.getGameName(),e=s.getGameConfigByRoomName(t);if(e){var i=e.is_buy_in;this.showBuyInButtonNode.active=1==i}},showPlayerInfo:function(t){},setMinMaxBetForm:function(t,e){this.BetForm.setMinValue(t),this.BetForm.setMaxValue(e)},setMinMaxBetFormAndShow:function(t,e){this.setMinMaxBetForm(t,e),this.BetForm.showDialog()},focusChatEditBox:function(){n.focusEditBox(this.chatEditBox)},unFocusChatEditBox:function(){n.unFocusEditBox(this.chatEditBox)},showQuickChatNode:function(){this.quickChatNode.active=!0},hideQuickChatNode:function(){this.quickChatNode.active=!1},showHistoryChatNode:function(){this.historyChatNode.active=!0,this.showHistoryChatButtonNode.y=c.GAME_BUTTON_HISTORY_CHAT_SHOW_Y},hideHistoryChatNode:function(){this.historyChatNode.active=!1,this.showHistoryChatButtonNode.y=c.GAME_BUTTON_HISTORY_CHAT_HIDE_Y},showTextNode:function(){this.textNode.active=!0},hideTextNode:function(){this.textNode.active=!1},showEmotionNode:function(){this.emotionNode.active=!0},hideEmotionNode:function(){this.emotionNode.active=!1},onResponse:function(t){var e=t.params;switch(t.cmd){case r.NEWS:this.handleNews(e);break;case r.REQUEST_INVITE:this.handleInvite(e);break;case r.MINIGAME_REQUEST:case r.GET_TOP:this.MiniGame&&this.MiniGame.handleRequest(e);break;case r.REQUEST_PLAYER_RECEIVE_ALERT:this.handleAlert(e);break;case r.REQUEST_RECHARGE_GOLD:this.handleRechargeGold(e);break;case r.REQUEST_ACHIVEMENTED_QUEST:this.handleAchivementedQuest(e);break;case r.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.handleReceiveNewMessage(e);break;case r.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.handlePlusLuckyWheelFree(e);break;case r.REQUEST_ACHIVEMENTED_VIP_POINT:this.handleAlert(e)}},handleNews:function(t){this.News.addNews(t)},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(h.RECHARGE_GOLD_TITLE,t.msg),this.Recharge.RechargeGoldForm.clear()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleReceiveNewMessage:function(t){this.getUser().unread_message++,this.showNotificationMessage(h.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleInvite:function(t){this.showToast(t.msg)},sendChat:function(t){if(this.unFocusChatEditBox(),""!==t){var e=cc.S.sfsManager.sfs,i=cc.S.sfsManager.SFS2X;if(e)e.send(new i.Requests.System.PublicMessageRequest(t))&&(this.chatEditBox.string=""),n.focusGame(),this.focusChatEditBox()}else n.focusGame()},showBuyInButton:function(){this.showBuyInButtonNode.active=!0},hideBuyInButton:function(){this.showBuyInButtonNode.active=!1},showBuyInForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BuyInForm.showDialog(t)},hideBuyInForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BuyInForm.hideDialog(t)},showBetForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BetForm.showDialog(t)},hideBetForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.BetForm.hideDialog(t)},showWaitingNode:function(){this.waitingNode.active=!0},hideWaitingNode:function(){this.waitingNode.active=!1},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.DialogMessage.showMessage(t,e)},hideDialogMessage:function(){this.DialogMessage.hideDialog()},showProcessingNode:function(){this.Processing.node.active=!0},hideProcessingNode:function(){this.Processing.node.active=!1},showProcessingSceneNode:function(){this.ProcessingScene.node.active||(this.ProcessingScene.node.active=!0)},hideProcessingSceneNode:function(){this.ProcessingScene.node.active=!1},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()}}),cc._RF.pop()},{"../base/BaseScene":"BaseScene","../helper/Config":"Config","../helper/Constant":"Constant","../helper/Message":"Message","../object/Audio":"Audio","../object/RoomType":"RoomType","../prefab/News":"News","../prefab/Toast":"Toast","../ui/Processing":"Processing","../ui/ProcessingScene":"ProcessingScene","../ui/dialog/BetForm":"BetForm","../ui/dialog/BuyInForm":"BuyInForm","../ui/dialog/DialogMessage":"DialogMessage","../util/BrowserUtil":"BrowserUtil","../util/FormatUtil":"FormatUtil","../util/Util":"Util","./form/Invite":"Invite","./form/LogOut":"LogOut","./form/Setting":"Setting","./form/Tutorial":"Tutorial"}],GameDecoration:[function(t,e,i){"use strict";cc._RF.push(e,"f3bc2ZUW49JyZ41O0p8ffIb","GameDecoration");var o=t("../base/BaseController"),n=t("../object/RoomType"),s=t("../helper/Constant");cc.Class({extends:o,properties:{bgSprite:cc.Sprite,bgMoneySpriteFrame:cc.SpriteFrame,bgGoldSpriteFrame:cc.SpriteFrame},onLoad:function(){this._super(),this.init()},init:function(){var t=this.getLastJoinedRoom();if(t)switch(this.roomType=t.variables[s.ROOM_TYPE].value+"",this.roomType){case n.MONEY_CODE:this.bgSprite.spriteFrame=this.bgMoneySpriteFrame;break;case n.GOLD_CODE:this.bgSprite.spriteFrame=this.bgGoldSpriteFrame}}}),cc._RF.pop()},{"../base/BaseController":"BaseController","../helper/Constant":"Constant","../object/RoomType":"RoomType"}],GameInfo:[function(t,e,i){"use strict";cc._RF.push(e,"e0f250560lCdYJ0h4pe9lDk","GameInfo");var o=t("./info/InfoAccount"),n=t("./info/InfoHistory"),s=t("./info/InfoSercurity"),a=t("./info/InfoMail"),r=t("./info/InviteFriend");cc.Class({extends:cc.Component,properties:{accountOnButtonNode:cc.Node,accountOffButtonNode:cc.Node,historyOnButtonNode:cc.Node,historyOffButtonNode:cc.Node,sercurityOnButtonNode:cc.Node,sercurityOffButtonNode:cc.Node,mailOnButtonNode:cc.Node,mailOffButtonNode:cc.Node,inviteFriendOnButtonNode:cc.Node,inviteFriendOffButtonNode:cc.Node,accountContentNode:cc.Node,historyContenNode:cc.Node,sercurityContenNode:cc.Node,mailContenNode:cc.Node,inviteFriendContenNode:cc.Node,InfoAccount:o,InfoHistory:n,InfoSercurity:s,InfoMail:a,InviteFriend:r},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.InfoAccount.init(t),this.InfoHistory.init(t),this.InfoSercurity.init(t),this.InfoMail.init(t),this.InviteFriend.init(t)},onLoad:function(){},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.hideAllContents()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.GameCenterUI.showGameNode()}},isTop:function(){return!(this.GameCenter.DialogMessage.node.active||this.GameCenter.Processing.node.active||this.GameCenter.UpdateAvatar.node.active||this.GameCenter.ChangePassword.node.active||this.GameCenter.ChangePasswordSuccess.node.active)},onInfoClick:function(){this.GameCenter.Audio.playClick(),this.showInfo()},showInfo:function(){this.initBeforeClick(),this.accountOnButtonNode.active=!0,this.accountOffButtonNode.active=!1,this.accountContentNode.active=!0},onHistoryClick:function(){this.GameCenter.Audio.playClick(),this.showHistory()},onMailClick:function(){this.GameCenter.Audio.playClick(),this.showMail()},onSercurityClick:function(){this.GameCenter.Audio.playClick(),this.showSercurity()},showSercurity:function(){this.initBeforeClick(),this.sercurityOnButtonNode.active=!0,this.sercurityOffButtonNode.active=!1,this.sercurityContenNode.active=!0},onInviteFriendClick:function(){this.GameCenter.Audio.playClick(),this.showInviteFriend()},showInviteFriend:function(){this.initBeforeClick(),this.inviteFriendOnButtonNode.active=!0,this.inviteFriendOffButtonNode.active=!1,this.inviteFriendContenNode.active=!0},showHistory:function(){this.initBeforeClick(),this.historyOnButtonNode.active=!0,this.historyOffButtonNode.active=!1,this.historyContenNode.active=!0},showMail:function(){this.initBeforeClick(),this.mailOnButtonNode.active=!0,this.mailOffButtonNode.active=!1,this.mailContenNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.accountOffButtonNode.active=!0,this.historyOffButtonNode.active=!0,this.sercurityOffButtonNode.active=!0,this.mailOffButtonNode.active=!0,this.inviteFriendOffButtonNode.active=!0},hideAllOnButtons:function(){this.accountOnButtonNode.active=!1,this.historyOnButtonNode.active=!1,this.sercurityOnButtonNode.active=!1,this.mailOnButtonNode.active=!1,this.inviteFriendOnButtonNode.active=!1},hideAllContents:function(){this.accountContentNode.active=!1,this.historyContenNode.active=!1,this.sercurityContenNode.active=!1,this.mailContenNode.active=!1,this.inviteFriendContenNode.active=!1},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showGameNode()}}),cc._RF.pop()},{"./info/InfoAccount":"InfoAccount","./info/InfoHistory":"InfoHistory","./info/InfoMail":"InfoMail","./info/InfoSercurity":"InfoSercurity","./info/InviteFriend":"InviteFriend"}],GameListAll:[function(t,e,i){"use strict";cc._RF.push(e,"23292wEFsdAb4hvilhK6vSw","GameListAll"),cc.Class({extends:cc.Component,properties:{gamePageView:cc.PageView},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onPreviousPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex(),e=this.gamePageView.getPages().length;--t<0&&(t=e-1),this.gamePageView.setCurrentPageIndex(t)},onNextPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex();++t>=this.gamePageView.getPages().length&&(t=0),this.gamePageView.setCurrentPageIndex(t)}}),cc._RF.pop()},{}],GameListBettingGame:[function(t,e,i){"use strict";cc._RF.push(e,"927c2qUTstKTbhTj99cbkm3","GameListBettingGame"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){}}),cc._RF.pop()},{}],GameListCard:[function(t,e,i){"use strict";cc._RF.push(e,"14f99q6fwdMl4WgvwmVi/fu","GameListCard"),cc.Class({extends:cc.Component,properties:{gamePageView:cc.PageView},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onPreviousPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex(),e=this.gamePageView.getPages().length;--t<0&&(t=e-1),this.gamePageView.setCurrentPageIndex(t)},onNextPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex();++t>=this.gamePageView.getPages().length&&(t=0),this.gamePageView.setCurrentPageIndex(t)}}),cc._RF.pop()},{}],GameListFavorite:[function(t,e,i){"use strict";cc._RF.push(e,"51a9dW7PotDBaTPns6gzhsh","GameListFavorite");var o=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){},initData:function(){this.hideAllNode();for(var t=this.GameCenter.getListFavorites(),e=0,i=t.length;e<i;e++){var o=this.getNodeByGameName(t[e]);null!=o&&(o.active=!0,o.zIndex=i-e)}},getNodeByGameName:function(t){switch(t){case o.BA_CAY:return this.baCayNode;case o.XOC_DIA:return this.xocDiaNode;case o.PHOM:return this.phomNode;case o.POKER:return this.pokerNode;case o.TLMN:return this.tlmnNode;case o.TLMNSOLO:return this.tlmnSoloNode;case o.LIENG:return this.liengNode;case o.MAU_BINH:return this.mauBinhNode;case o.SAM:return this.samNode;case o.SAMSOLO:return this.samSoloNode;case o.XITO:return this.xiToNode;default:return null}},hideAllNode:function(){this.baCayNode.active=!1,this.phomNode.active=!1,this.pokerNode.active=!1,this.liengNode.active=!1,this.xocDiaNode.active=!1,this.tlmnNode.active=!1,this.tlmnSoloNode.active=!1,this.samNode.active=!1,this.samSoloNode.active=!1,this.mauBinhNode.active=!1,this.xiToNode.active=!1,this.slot1Node.active=!1,this.slot2Node.active=!1,this.slot3Node.active=!1,this.baCayNode.zIndex=0,this.phomNode.zIndex=0,this.pokerNode.zIndex=0,this.liengNode.zIndex=0,this.xocDiaNode.zIndex=0,this.tlmnNode.zIndex=0,this.tlmnSoloNode.zIndex=0,this.samNode.zIndex=0,this.samSoloNode.zIndex=0,this.mauBinhNode.zIndex=0,this.xiToNode.zIndex=0,this.slot1Node.zIndex=0,this.slot2Node.zIndex=0,this.slot3Node.zIndex=0}}),cc._RF.pop()},{"../../../helper/Constant":"Constant"}],GameListMiniGame:[function(t,e,i){"use strict";cc._RF.push(e,"f15e1OV4YRCW75HCZgMWmVm","GameListMiniGame"),cc.Class({extends:cc.Component,properties:{gamePageView:cc.PageView},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onPreviousPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex(),e=this.gamePageView.getPages().length;--t<0&&(t=e-1),this.gamePageView.setCurrentPageIndex(t)},onNextPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex();++t>=this.gamePageView.getPages().length&&(t=0),this.gamePageView.setCurrentPageIndex(t)}}),cc._RF.pop()},{}],GameListSlot:[function(t,e,i){"use strict";cc._RF.push(e,"30fa8ZoFAtEQaYJEOiMC8gV","GameListSlot");var o=t("../../../prefab/item/SlotGameIconItem"),n=t("../../../prefab/mini-game/item/JackpotItem"),s=t("../../../prefab/item/TaiXiuIconItem");cc.Class({extends:cc.Component,properties:{gamePageView:cc.PageView,fireFishSlotGameIcon:o,slotSlotGameIcon:o,slot2SlotGameIcon:o,slot3SlotGameIcon:o,slot4SlotGameIcon:o,fireFishSlotGameIcon2:o,slot1SlotGameIcon2:o,slot2SlotGameIcon2:o,slot3SlotGameIcon2:o,slot4SlotGameIcon2:o,taiXiuNode1:cc.Node,taiXiuIconItem1:s,moneyFireFishNode:cc.Node,moneySlot1Node:cc.Node,moneySlot2Node:cc.Node,moneySlot3Node:cc.Node,moneySlot4Node:cc.Node,firefishNode:cc.Node,slot1Node:cc.Node,slot2Node:cc.Node,slot3Node:cc.Node,slot4Node:cc.Node,bauCuaJackpotNode1:cc.Node,bauCuaJackpotNode2:cc.Node,bauCuaJackpotNode3:cc.Node,bauCuaJackpotItem1:n,bauCuaJackpotItem2:n,bauCuaJackpotItem3:n,lottery1Node:cc.Node,lottery2Node:cc.Node,lotteryJackpotItem1:n,lotteryJackpotItem2:n,taiXiuNode2:cc.Node,taiXiuIconItem2:s,taiXiuNode3:cc.Node,taiXiuIconItem3:s},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},initData:function(t){if(this.data=t,t){t.lv;var e=t.modern_slot,i=t.one001,o=t.dragon,n=t.classic1,s=t.hooheyhow[0],a=t.tai_xiu;if(this.slotSlotGameIcon.initData(e),this.slot2SlotGameIcon.initData(o),this.slot3SlotGameIcon.initData(i),this.slot4SlotGameIcon.initData(n),this.isHide&&this.showListJackpotInAllGame(),this.slot1SlotGameIcon2.initData(e),this.slot2SlotGameIcon2.initData(o),this.slot3SlotGameIcon2.initData(i),this.slot4SlotGameIcon2.initData(n),this.bauCuaJackpotItem1.setMoney(s),this.bauCuaJackpotItem2.setMoney(s),this.bauCuaJackpotItem3.setMoney(s),t.lottery){var r=t.lottery[0];this.lotteryJackpotItem1.setMoney(r),this.lotteryJackpotItem2.setMoney(r)}a&&(this.taiXiuIconItem1.initData(a),this.taiXiuIconItem2.initData(a),this.taiXiuIconItem3.initData(a)),this.isHide&&this.showListJackpotInAllGame()}},hideListJackpotInAllGame:function(){this.isHide=!0,this.slot1Node.active=!1,this.slot2Node.active=!1,this.slot3Node.active=!1,this.slot4Node.active=!1,this.firefishNode.active=!1,this.taiXiuNode1.active=!1,this.moneySlot1Node.active=!1,this.moneySlot2Node.active=!1,this.moneySlot3Node.active=!1,this.moneySlot4Node.active=!1,this.moneyFireFishNode.active=!1,this.taiXiuNode2.active=!1,this.taiXiuNode3.active=!1,this.bauCuaJackpotNode1.active=!1,this.bauCuaJackpotNode2.active=!1,this.bauCuaJackpotNode3.active=!1,this.lottery1Node.active=!1,this.lottery2Node.active=!1},showListJackpotInAllGame:function(){this.isHide=!1,this.slot1Node.active=!0,this.slot2Node.active=!0,this.slot3Node.active=!0,this.slot4Node.active=!0,this.taiXiuNode1.active=!0,this.moneySlot1Node.active=!0,this.moneySlot2Node.active=!0,this.moneySlot3Node.active=!0,this.moneySlot4Node.active=!0,this.taiXiuNode2.active=!0,this.taiXiuNode3.active=!0,this.bauCuaJackpotNode1.active=!0,this.bauCuaJackpotNode2.active=!0,this.bauCuaJackpotNode3.active=!0,this.lottery1Node.active=!0,this.lottery2Node.active=!0,this.firefishNode.active=!1,this.moneyFireFishNode.active=!1},onPreviousPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex(),e=this.gamePageView.getPages().length;--t<0&&(t=e-1),this.gamePageView.setCurrentPageIndex(t)},onNextPageClick:function(){this.GameCenter.Audio.playClick();var t=this.gamePageView.getCurrentPageIndex();++t>=this.gamePageView.getPages().length&&(t=0),this.gamePageView.setCurrentPageIndex(t)}}),cc._RF.pop()},{"../../../prefab/item/SlotGameIconItem":"SlotGameIconItem","../../../prefab/item/TaiXiuIconItem":"TaiXiuIconItem","../../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],GameList:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"c1502eOkw9HHpKymD0FHhsY","GameList");var s=t("../../helper/Constant"),a=(t("../../helper/Message"),t("../../prefab/mini-game/MiniGameConstant")),r=t("./other/GameListAll"),c=t("./other/GameListCard"),h=t("./other/GameListFavorite"),l=t("./other/GameListSlot"),u=t("./other/GameListMiniGame"),d=t("./other/GameListBettingGame");cc.Class({extends:cc.Component,properties:(o={gameListAllOnButtonNode:cc.Node,gameListAllOffButtonNode:cc.Node,gameListCardOnButtonNode:cc.Node,gameListCardOffButtonNode:cc.Node,gameListFavoriteOnButtonNode:cc.Node,gameListFavoriteOffButtonNode:cc.Node,gameListSlotOnButtonNode:cc.Node,gameListSlotOffButtonNode:cc.Node,gameListMiniGameOnButtonNode:cc.Node,gameListMiniGameOffButtonNode:cc.Node,gameListBettingGameOnButtonNode:cc.Node,gameListBettingGameOffButtonNode:cc.Node,GameListAll:r,GameListCard:c,GameListFavorite:h,GameListSlot:l,GameListMiniGame:u},n(o,"GameListMiniGame",u),n(o,"GameListBettingGame",d),o),init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameListAll.init(t),this.GameListCard.init(t),this.GameListFavorite.init(t),this.GameListSlot.init(t),this.GameListMiniGame.init(t),this.GameListBettingGame.init(t)},onLoad:function(){this.GameListSlot.hideListJackpotInAllGame()},handleRequest:function(t){if(t.status){var e=t.data.game_name,i=t.data;switch(e){case a.JACKPOT:this.GameListSlot.initData(i.game_data)}}},onBannerClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()&&this.GameCenterUI.showBannerFormNode()},onSlotClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.MODERN_SLOT):this.GameCenterUI.showLoginFormNode()},onSlot2Click:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.DRAGON):this.GameCenterUI.showLoginFormNode()},onSlot3Click:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()||this.GameCenterUI.showLoginFormNode()},onSlot4Click:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.CLASSIC1):this.GameCenterUI.showLoginFormNode()},onXoSoClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("X\u1ed5 S\u1ed1","\u0110ang c\u1eadp nh\u1eadt"):this.GameCenterUI.showLoginFormNode()},onFireFishClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.SHOOTING_FISH):this.GameCenterUI.showLoginFormNode()},onBaCayClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.BA_CAY):this.GameCenterUI.showLoginFormNode()},onChanClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("Ch\u1eafn","\u0110ang ph\xe1t tri\u1ec3n"):this.GameCenterUI.showLoginFormNode()},onLiengClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.LIENG):this.GameCenterUI.showLoginFormNode()},onMauBinhClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.MAU_BINH):this.GameCenterUI.showLoginFormNode()},onPhomClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.PHOM):this.GameCenterUI.showLoginFormNode()},onPokerClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.POKER):this.GameCenterUI.showLoginFormNode()},onSamClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("Th\xf4ng b\xe1o","\u0110ang c\u1eadp nh\u1eadt"):this.GameCenterUI.showLoginFormNode()},onSamSoloClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.SAMSOLO):this.GameCenterUI.showLoginFormNode()},onTLMNClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("Th\xf4ng b\xe1o","\u0110ang c\u1eadp nh\u1eadt"):this.GameCenterUI.showLoginFormNode()},onTLMNSoloClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.joinGameLobby(s.TLMNSOLO):this.GameCenterUI.showLoginFormNode()},onXiToClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("Th\xf4ng b\xe1o","\u0110ang c\u1eadp nh\u1eadt"):this.GameCenterUI.showLoginFormNode()},onXocDiaClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.isConnected()?this.GameCenter.showDialogMessage("Th\xf4ng b\xe1o","\u0110ang c\u1eadp nh\u1eadt"):this.GameCenterUI.showLoginFormNode()},onVQMMClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onLuckyWheelClick():this.GameCenterUI.showLoginFormNode()},onTaiXiuClick:function(){this.GameCenter.isConnected()?(this.GameCenter.MiniGame.MiniGameCircle.onTaiXiuClick(),this.GameCenter.MiniGame.TaiXiu.onShowTaiXiuClick()):this.GameCenterUI.showLoginFormNode()},onChanLeClick:function(){this.GameCenter.isConnected()?(this.GameCenter.MiniGame.MiniGameCircle.onTaiXiuClick(),this.GameCenter.MiniGame.TaiXiu.onShowChanLeClick()):this.GameCenterUI.showLoginFormNode()},onMiniPokerClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onMiniPokerClick():this.GameCenterUI.showLoginFormNode()},onDragonTigerClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onDragonTigerClick():this.GameCenterUI.showLoginFormNode()},onMiniBaCayClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onMiniBaCayClick():this.GameCenterUI.showLoginFormNode()},onDiamondClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onDiamondClick():this.GameCenterUI.showLoginFormNode()},onPirateClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onPirateClick():this.GameCenterUI.showLoginFormNode()},onBomClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onBomClick():this.GameCenterUI.showLoginFormNode()},onWildClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onWildClick():this.GameCenterUI.showLoginFormNode()},onTrenDuoiClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onTrenDuoiClick():this.GameCenterUI.showLoginFormNode()},onBauCuaClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onBauCuaClick():this.GameCenterUI.showLoginFormNode()},onMiniXocDiaClick:function(){this.GameCenter.isConnected()?this.GameCenter.MiniGame.MiniGameCircle.onMiniXocDiaClick():this.GameCenterUI.showLoginFormNode()},joinGameLobby:function(t){if(this.GameCenter.isConnected()){this.checkChangeNewSceneGame(t)?this.GameCenter.showProcessingSceneNode():this.GameCenter.showProcessingNode();var e={game_name:t};this.GameCenter.sendRequest.sendNoPrefixToZone(s.REQUEST_JOIN_GAME,e)}else this.GameCenterUI.showLoginFormNode()},onShowAllGameClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.gameListAllOnButtonNode.active=!0,this.gameListAllOffButtonNode.active=!1,this.GameListAll.node.active=!0},onShowFavoriteGameClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.gameListFavoriteOnButtonNode.active=!0,this.gameListFavoriteOffButtonNode.active=!1,this.GameListFavorite.node.active=!0},onShowCardGameClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.gameListCardOnButtonNode.active=!0,this.gameListCardOffButtonNode.active=!1,this.GameListCard.node.active=!0},onShowSlotGameClick:function(){this.GameCenter.Audio.playClick(),this.showSlotGame()},onShowMiniGameClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.gameListMiniGameOnButtonNode.active=!0,this.gameListMiniGameOffButtonNode.active=!1,this.GameListMiniGame.node.active=!0},onShowGameBettingClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.gameListBettingGameOnButtonNode.active=!0,this.gameListBettingGameOffButtonNode.active=!1,this.GameListBettingGame.node.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showSlotGame:function(){this.initBeforeClick(),this.gameListSlotOnButtonNode.active=!0,this.gameListSlotOffButtonNode.active=!1,this.GameListSlot.node.active=!0},showAllOffButtons:function(){this.gameListAllOffButtonNode.active=!0,this.gameListCardOffButtonNode.active=!0,this.gameListFavoriteOffButtonNode.active=!0,this.gameListSlotOffButtonNode.active=!0,this.gameListMiniGameOffButtonNode.active=!0,this.gameListBettingGameOffButtonNode.active=!0},hideAllOnButtons:function(){this.gameListAllOnButtonNode.active=!1,this.gameListCardOnButtonNode.active=!1,this.gameListFavoriteOnButtonNode.active=!1,this.gameListSlotOnButtonNode.active=!1,this.gameListMiniGameOnButtonNode.active=!1,this.gameListBettingGameOnButtonNode.active=!1},hideAllContents:function(){this.GameListAll.node.active=!1,this.GameListCard.node.active=!1,this.GameListFavorite.node.active=!1,this.GameListSlot.node.active=!1,this.GameListMiniGame.node.active=!1,this.GameListBettingGame.node.active=!1},checkChangeNewSceneGame:function(t){return t===s.LOTTERY||t===s.LONGVUONG||t===s.ZOOMBIES||t===s.MODERN_SLOT||t===s.DRAGON||t===s.ONE001||t===s.CLASSIC1||t===s.ONE001}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../prefab/mini-game/MiniGameConstant":"MiniGameConstant","./other/GameListAll":"GameListAll","./other/GameListBettingGame":"GameListBettingGame","./other/GameListCard":"GameListCard","./other/GameListFavorite":"GameListFavorite","./other/GameListMiniGame":"GameListMiniGame","./other/GameListSlot":"GameListSlot"}],GameMiniHistory:[function(t,e,i){"use strict";cc._RF.push(e,"dc617DzYgFK35kPreEHoX31","GameMiniHistory");var o=t("./history/MiniBaCayHistories"),n=t("./history/MiniPokerHistories"),s=t("./history/TaiXiuHistories"),a=t("./history/DiamondHistories"),r=t("./history/BomHistories"),c=t("./history/TrenDuoiHistories"),h=t("./history/BauCuaHistories"),l=t("./history/PirateHistories"),u=t("./history/WildHistories"),d=t("./history/DragonTigerHistories");cc.Class({extends:cc.Component,properties:{MiniBaCayHistories:o,MiniPokerHistories:n,TaiXiuHistories:s,DiamondHistories:a,TrenDuoiHistories:c,BauCuaHistories:h,BomHistories:r,PirateHistories:l,DragonTigerHistories:d,WildHistories:u},init:function(t){this.controller=t,this.MiniBaCayHistories.init(t),this.MiniPokerHistories.init(t),this.TaiXiuHistories.init(t),this.DiamondHistories.init(t),this.TrenDuoiHistories.init(t),this.BauCuaHistories.init(t),this.PirateHistories.init(t),this.BomHistories.init(t),this.DragonTigerHistories.init(t),this.WildHistories.init(t)},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.hideAll()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},showMiniBaCayHistories:function(){this.hideAll(),this.MiniBaCayHistories.node.active=!0},showMiniPokerHistories:function(){this.hideAll(),this.MiniPokerHistories.node.active=!0},showTaiXiuHistories:function(){this.hideAll(),this.TaiXiuHistories.node.active=!0},showDragonTigerHistories:function(){this.hideAll(),this.DragonTigerHistories.node.active=!0},showDiamondHistories:function(){this.hideAll(),this.DiamondHistories.node.active=!0},showBomHistories:function(){this.hideAll(),this.BomHistories.node.active=!0},showTrenDuoiHistories:function(){this.hideAll(),this.TrenDuoiHistories.node.active=!0},showBauCuaHistories:function(){this.hideAll(),this.BauCuaHistories.node.active=!0},showPirateHistories:function(){this.hideAll(),this.PirateHistories.node.active=!0},showWildHistories:function(){this.hideAll(),this.WildHistories.node.active=!0},hideAll:function(){this.MiniBaCayHistories.node.active=!1,this.MiniPokerHistories.node.active=!1,this.TaiXiuHistories.node.active=!1,this.DiamondHistories.node.active=!1,this.TrenDuoiHistories.node.active=!1,this.BauCuaHistories.node.active=!1,this.PirateHistories.node.active=!1,this.BomHistories.node.active=!1,this.DragonTigerHistories.node.active=!1,this.WildHistories.node.active=!1}}),cc._RF.pop()},{"./history/BauCuaHistories":"BauCuaHistories","./history/BomHistories":"BomHistories","./history/DiamondHistories":"DiamondHistories","./history/DragonTigerHistories":"DragonTigerHistories","./history/MiniBaCayHistories":"MiniBaCayHistories","./history/MiniPokerHistories":"MiniPokerHistories","./history/PirateHistories":"PirateHistories","./history/TaiXiuHistories":"TaiXiuHistories","./history/TrenDuoiHistories":"TrenDuoiHistories","./history/WildHistories":"WildHistories"}],GameMiniJackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"0b03ef2o+BO9KAetfIIAs63","GameMiniJackpotItem");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,noSprite:cc.Sprite,accountLabel:cc.Label,timeLabel:cc.Label,valueLabel:cc.Label,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame,listRank:[cc.SpriteFrame]},init:function(t,e){if(this.reset(),t){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),e<3?(this.noSprite.node.active=!0,this.noSprite.spriteFrame=this.listRank[e]):(this.noLabel.node.active=!0,this.noLabel.string=parseInt(e)+1),this.accountLabel.string=n.getServerID(t.server_id)+t.nick_name,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.valueLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.amount);var i=e%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}else this.node.active=!1},onLoad:function(){},reset:function(){this.noLabel.node.active=!1,this.noSprite.node.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],GameMiniRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"763f751aYJBXZHFDCBnk9rU","GameMiniRankItem");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,noSprite:cc.Sprite,accountLabel:cc.Label,valueLabel:cc.Label,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame,listRankSpriteFrame:[cc.SpriteFrame]},init:function(t,e){if(t){this.data=t,this.reset(),e>2?(this.noLabel.string=parseInt(e)+1,this.noLabel.node.active=!0):(this.noSprite.spriteFrame=this.listRankSpriteFrame[e],this.noSprite.node.active=!0),this.accountLabel.string=n.getServerID(t.server_id)+t.nick_name,this.valueLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.amount);var i=e%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}},onLoad:function(){},reset:function(){this.noLabel.node.active=!1,this.noSprite.node.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],GameMiniRank:[function(t,e,i){"use strict";cc._RF.push(e,"f26e5vuvq5KjbFLdtrJr1vL","GameMiniRank");var o=t("../../../helper/Message"),n=t("../MiniGameConstant"),s=t("../../item/PaginationItem"),a=t("../tai-xiu/TaiXiuConstant"),r=t("../bau-cua/BauCuaConstant"),c=t("../diamond/DiamondConstant"),h=t("../bom/BomConstant"),l=t("../wild/WildConstant"),u=t("../mini-bacay/MiniBaCayConstant"),d=t("../mini-poker/MiniPokerConstant"),m=t("../pirate/PirateConstant"),p=t("../tren-duoi/TrenDuoiConstant"),f=t("../dragon-tiger/DragonTigerConstant"),g=t("..//mini-xoc-dia/MiniXocDiaConstant"),_=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyTypeNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,titleLabel:cc.Label,jackpotNode:cc.Node,rankNode:cc.Node,rankButtonNode:cc.Node,jackpotButtonNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,rankScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,jackpotContentNode:cc.Node,pageNode:cc.Node,pagePreviewPreview:s,pagePreView:s,pageNext:s,pageNextNext:s,listPageNumberItem:[s]},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.data=null,this.onMoneyClick(),this.onJackpotClick(),this.showLoadingNode(),this.rankScrollView.content.removeAllChildren(!0),this.jackpotContentNode.removeAllChildren(!0)},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.removeXhr()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},setMiniGameName:function(t){this.reset(),this.minigameName=t,t===n.TAIXIU||t===n.BAU_CUA||t===n.DRAGON_TIGER||this.minigameName===n.MINI_XOC_DIA?this.jackpotButtonNode.active=!1:this.rankButtonNode.active=!1,this.loadDataBuyGameName(t)},loadDataBuyGameName:function(t){var e=void 0;switch(t){case n.TAIXIU:e=a.GET_TOP;break;case n.BAU_CUA:e=r.GET_TOP;break;case n.DIAMOND:case n.DIAMOND_2:e=c.GET_TOP;break;case n.MINI_BACAY:e=u.GET_TOP;break;case n.MINI_POKER:e=d.GET_TOP;break;case n.DIAMOND_2_1:case n.DIAMOND_2_2:e=m.GET_TOP;break;case n.TREN_DUOI:e=p.GET_TOP;break;case n.DRAGON_TIGER:e=f.GET_TOP;break;case n.BOM:case n.BOM_2:e=h.GET_TOP;break;case n.WILD:case n.WILD_2:e=l.GET_TOP;break;case n.MINI_XOC_DIA:e=g.GET_TOP}this.controller.sendRequest.sendNoPrefixToZone(e)},onCloseClick:function(){this.hideDialog()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.minigameName===n.TAIXIU?this.initContentTaiXiu():this.initData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.minigameName===n.TAIXIU?this.initContentTaiXiu():this.initData()},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOnButtonNode.active=!0,this.rankOffButtonNode.active=!1,this.rankNode.active=!0},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOnButtonNode.active=!0,this.jackpotOffButtonNode.active=!1,this.jackpotNode.active=!0},initDataTaiXiu:function(t,e){e?(this.data=t.tops_chan_le,this.titleLabel.string=o.MINI_GAME_RANK_TITLE_CHAN_LE):(this.data=t.tops_tai_xiu,this.titleLabel.string=o.MINI_GAME_RANK_TITLE_TAI_XIU),this.initContentTaiXiu(),this.moneyTypeNode.active=!1},initDataDragonTiger:function(t){this.data=t,this.initContentTaiXiu(),this.moneyTypeNode.active=!1,this.titleLabel.string=o.MINI_GAME_RANK_TITLE},initDataMiniXocDia:function(t){this.data=t,this.titleLabel.string=o.MINI_GAME_RANK_TITLE,this.initContentTaiXiu()},initDataTop:function(t){var e=[];e[0]=t[2],e[1]=t[0];var i=[];i[0]=t[3],i[1]=t[1],this.data=[],this.data[0]=e,this.data[1]=i,this.initData(),this.titleLabel.string=o.MINI_GAME_RANK_TITLE,this.moneyTypeNode.active=!0},initContentTaiXiu:function(){if(this.showListNode(),this.rankScrollView.content.removeAllChildren(!0),this.jackpotContentNode.removeAllChildren(!0),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];if(t=_.filterSameItem(t))for(var e=0;e<t.length;e++){var i=cc.instantiate(this.rankItemPrefab);i.parent=this.rankScrollView.content,i.getComponent("GameMiniRankItem").init(t[e],e)}}this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType(),this.minigameName!==n.TAIXIU&&this.minigameName!==n.BAU_CUA&&this.minigameName!==n.DRAGON_TIGER&&this.minigameName!==n.MINI_XOC_DIA||this.onRankClick()},initData:function(){if(this.showListNode(),this.rankScrollView.content.removeAllChildren(!0),this.jackpotContentNode.removeAllChildren(!0),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];if(t){if(t[0])for(var e=_.sortDataTimeByTime(t[0]),i=0;i<e.length;i++){var o=cc.instantiate(this.rankItemPrefab);o.parent=this.rankScrollView.content,o.getComponent("GameMiniRankItem").init(e[i],i)}t[1]&&(this.jackpot=_.sortDataTimeByTime(t[1]),this.setPage(0))}}this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType(),this.minigameName!==n.TAIXIU&&this.minigameName!==n.BAU_CUA&&this.minigameName!==n.DRAGON_TIGER||this.onRankClick()},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},isMoneyType:function(){return this.goldButtonNode.active},isRankType:function(){return this.rankOnButtonNode.active},hideAllButton:function(){this.rankOffButtonNode.active=!0,this.jackpotOffButtonNode.active=!0,this.rankOnButtonNode.active=!1,this.jackpotOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},showListNode:function(){this.loadingNode.active=!1,this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.page=e,this.listPagination=[],this.jackpotContentNode.removeAllChildren(!0),this.jackpot&&this.jackpot.length>0?function(){t.showListContent(e);var i=parseInt(t.jackpot.length/n.NUMBER_DETAIL_ITEM);if(i=i*n.NUMBER_DETAIL_ITEM===t.jackpot.length?i-1:i,t.showNumberPagination(i),t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",i),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var o=0,s=t.listPageNumberItem.length;o<s;o++)t.listPageNumberItem[o].init(o+1,o),t.listPageNumberItem[o].enable(),o===e&&t.listPageNumberItem[o].disable(),t.listPagination.push(t.listPageNumberItem[o]);else if(e+2>=i){var a=i;if(i>4)for(var r=t.listPageNumberItem.length-1;r>=0;r--)t.listPageNumberItem[r].init(a+1,a),t.listPageNumberItem[r].enable(),a===e&&t.listPageNumberItem[r].disable(),t.listPagination.push(t.listPageNumberItem[r]),a--;else{for(var c=0,h=t.listPageNumberItem.length;c<h;c++)t.listPageNumberItem[c].enable();t.listPageNumberItem[e].disable()}}else for(var l=-2,u=0,d=t.listPageNumberItem.length;u<d;u++)t.listPageNumberItem[u].init(e+l+1,e+l),t.listPageNumberItem[u].enable(),0===l&&t.listPageNumberItem[u].disable(),t.listPagination.push(t.listPageNumberItem[u]),l++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e+2>=i?(t.pagePreView.init("<",e-1),t.pageNext.init(">",i)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var m=t;if(!t.isEvent){for(var p in t.listPagination){var f=t.listPagination[p].getComponent("PaginationItem").pageOffButtonNode;f.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();m.setPage(t)},f)}t.isEvent=!0}}():this.pageNode.active=!1},showNumberPagination:function(t){this.pageNode.active=!0;for(var e=0;e<this.listPageNumberItem.length;e++)this.listPageNumberItem[e].node.active=!1;if(t<4)for(var i=0;i<=t;i++)this.listPageNumberItem[i].node.active=!0;else for(var o=0;o<this.listPageNumberItem.length;o++)this.listPageNumberItem[o].node.active=!0},showListContent:function(t){if(t*n.NUMBER_DETAIL_ITEM<this.jackpot.length)for(var e=t*n.NUMBER_DETAIL_ITEM,i=e,o=e+n.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.jackpot.length){var s=cc.instantiate(this.jackpotItemPrefab);s.getComponent("GameMiniJackpotItem").init(this.jackpot[i],i),s.parent=this.jackpotContentNode}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},reset:function(){this.rankButtonNode.active=!0,this.jackpotButtonNode.active=!0}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../item/PaginationItem":"PaginationItem","..//mini-xoc-dia/MiniXocDiaConstant":"MiniXocDiaConstant","../MiniGameConstant":"MiniGameConstant","../bau-cua/BauCuaConstant":"BauCuaConstant","../bom/BomConstant":"BomConstant","../diamond/DiamondConstant":"DiamondConstant","../dragon-tiger/DragonTigerConstant":"DragonTigerConstant","../mini-bacay/MiniBaCayConstant":"MiniBaCayConstant","../mini-poker/MiniPokerConstant":"MiniPokerConstant","../pirate/PirateConstant":"PirateConstant","../tai-xiu/TaiXiuConstant":"TaiXiuConstant","../tren-duoi/TrenDuoiConstant":"TrenDuoiConstant","../wild/WildConstant":"WildConstant"}],GameRecharge:[function(t,e,i){"use strict";cc._RF.push(e,"ca742e6+P9PUaZE3/vTbd+Z","GameRecharge");var o=t("./recharge/RechargeGold"),n=t("./recharge/RechargeMoney"),s=t("./recharge/RechargeBanking"),a=t("./recharge/RechargeUseMoney"),r=t("./recharge/RechargeSMS"),c=t("./recharge/RechargeButtonCard"),h=t("./recharge/RechargeMomo"),l=t("./recharge/Safe");cc.Class({extends:cc.Component,properties:{rechargeMoneyOnButtonNode:cc.Node,rechargeMoneyOffButtonNode:cc.Node,rechargeGoldOnButtonNode:cc.Node,rechargeGoldOffButtonNode:cc.Node,useMoneyOnButtonNode:cc.Node,useMoneyOffButtonNode:cc.Node,safeOnButtonNode:cc.Node,safeOffButtonNode:cc.Node,awardOnButtonNode:cc.Node,awardOffButtonNode:cc.Node,tranferOnButtonNode:cc.Node,tranferOffButtonNode:cc.Node,rechargeMomoOnButtonNode:cc.Node,rechargeMomoOffButtonNode:cc.Node,rechargeAllButtonNode:cc.Node,rechargeMoneyContentNode:cc.Node,rechargeSMSContentNode:cc.Node,rechargeBankingContentNode:cc.Node,rechargeGoldContentNode:cc.Node,useMoneyContentNode:cc.Node,awardContentNode:cc.Node,transferContentNode:cc.Node,safeContentNode:cc.Node,rechargeMomoContentNode:cc.Node,RechargeGold:o,RechargeUseMoney:a,RechargeButtonCard:c,RechargeBanking:s,RechargeMoney:n,RechargeSMS:r,Safe:l,RechargeMomo:h},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.RechargeGold.init(t),this.RechargeUseMoney.init(t),this.RechargeButtonCard.init(t),this.Safe.init(t),this.RechargeMomo.init(t)},onLoad:function(){},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.hideAllContents()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.GameCenterUI.showGameNode()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},updateMoneyGold:function(){this.RechargeGold.initData(),this.RechargeUseMoney.Transfer.TransferContent.initMoney(),this.Safe.initMoney()},onRechargeMoneyClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.rechargeMoneyOnButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!1,this.rechargeMoneyContentNode.active=!0},onRechargeGoldClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.rechargeGoldOnButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!1,this.rechargeGoldContentNode.active=!0},onUseMoneyClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.useMoneyOnButtonNode.active=!0,this.useMoneyOffButtonNode.active=!1,this.useMoneyContentNode.active=!0},onTransferClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.tranferOnButtonNode.active=!0,this.tranferOffButtonNode.active=!1,this.RechargeUseMoney.showTranferContent()},onAwardClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.awardOnButtonNode.active=!0,this.awardOffButtonNode.active=!1,this.RechargeUseMoney.showAwardContent()},onRechargeMomoClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.rechargeMomoOnButtonNode.active=!0,this.rechargeMomoOffButtonNode.active=!1,this.rechargeMomoContentNode.active=!0},onSafeClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.safeOnButtonNode.active=!0,this.safeOffButtonNode.active=!1,this.safeContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rechargeMoneyOffButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!0,this.useMoneyOffButtonNode.active=!0,this.safeOffButtonNode.active=!0,this.awardOffButtonNode.active=!0,this.tranferOffButtonNode.active=!0,this.rechargeMomoOffButtonNode.active=!0},hideAllOnButtons:function(){this.rechargeMoneyOnButtonNode.active=!1,this.rechargeGoldOnButtonNode.active=!1,this.useMoneyOnButtonNode.active=!1,this.safeOnButtonNode.active=!1,this.awardOnButtonNode.active=!1,this.tranferOnButtonNode.active=!1,this.rechargeMomoOnButtonNode.active=!1},hideAllContents:function(){this.rechargeAllButtonNode.active=!1,this.rechargeMoneyContentNode.active=!1,this.rechargeSMSContentNode.active=!1,this.rechargeBankingContentNode.active=!1,this.rechargeGoldContentNode.active=!1,this.useMoneyContentNode.active=!1,this.awardContentNode.active=!1,this.transferContentNode.active=!1,this.safeContentNode.active=!1,this.rechargeMomoContentNode.active=!1},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showGameNode()}}),cc._RF.pop()},{"./recharge/RechargeBanking":"RechargeBanking","./recharge/RechargeButtonCard":"RechargeButtonCard","./recharge/RechargeGold":"RechargeGold","./recharge/RechargeMomo":"RechargeMomo","./recharge/RechargeMoney":"RechargeMoney","./recharge/RechargeSMS":"RechargeSMS","./recharge/RechargeUseMoney":"RechargeUseMoney","./recharge/Safe":"Safe"}],GameRoom:[function(t,e,i){"use strict";cc._RF.push(e,"0f3b7+jLx9IH5Rib8Bhhs81","GameRoom");var o=t("../../helper/Constant"),n=t("../../object/RoomType"),s=t("./other/Online");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,moneyOnButtonNode:cc.Node,moneyOffButtonNode:cc.Node,goldOnButtonNode:cc.Node,goldOffButtonNode:cc.Node,gameNameLabel:cc.Label,roomItemPrefab:cc.Prefab,listRoomNode:cc.Node,Online:s},init:function(t){this.GameCenter=t,this.Online.init(t)},onLoad:function(){this.minBet=0;var t=this.GameCenter.getTempData().is_vip_room;this.isVipRoom=!t},onEnable:function(){this.initListRoom(),this.backButtonNode.active=!0},onDisable:function(){this.backButtonNode.active=!1},initListRoom:function(){this.isVipRoom?(this.showMoneyButton(),this.initListRoomByType(n.MONEY_CODE)):(this.showGoldButton(),this.initListRoomByType(n.GOLD_CODE))},initListRoomByType:function(t){this.listRoomNode.removeAllChildren(!0);var e=this.getRoomData(),i=e.room_min_bets,o=e.game_name;if(this.gameNameLabel.string=o.toUpperCase(),i.sort(function(t,e){return t.min_bet-e.min_bet}),i)for(var s in i)i[s].money_type==t&&this.instanceRoomItem(i[s]);this.GameCenter.getTempData().is_vip_room=t===n.GOLD_CODE},instanceRoomItem:function(t){var e=cc.instantiate(this.roomItemPrefab);e.getComponent("RoomItem").init(this.GameCenter,t),e.parent=this.listRoomNode},getRoomData:function(){var t=this.GameCenter.getLastJoinedRoom().groupId,e=this.GameCenter.getConfig().list_game;for(var i in e)if(e[i].short_name===t)return e[i]},onMoneyRoomClick:function(){this.GameCenter.Audio.playClick(),this.isVipRoom=!0,this.showMoneyButton(),this.initListRoomByType(n.MONEY_CODE)},onGoldRoomClick:function(){this.GameCenter.Audio.playClick(),this.isVipRoom=!1,this.showGoldButton(),this.initListRoomByType(n.GOLD_CODE)},onBackClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendNoPrefixToZone(o.REQUEST_OUT_LOBBY_GAME)},getRoomType:function(){return this.isVipRoom?n.MONEY_CODE:n.GOLD_CODE},showMoneyButton:function(){this.hideAllButtons(),this.moneyOnButtonNode.active=!0,this.goldOffButtonNode.active=!0},showGoldButton:function(){this.hideAllButtons(),this.moneyOffButtonNode.active=!0,this.goldOnButtonNode.active=!0},hideAllButtons:function(){this.moneyOnButtonNode.active=!1,this.moneyOffButtonNode.active=!1,this.goldOnButtonNode.active=!1,this.goldOffButtonNode.active=!1},resetAllRoom:function(){if(this.node.active){var t=this.listRoomNode.getChildren();for(var e in t)t[e].getComponent("RoomItem").initInteracable()}}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../object/RoomType":"RoomType","./other/Online":"Online"}],GameSlot:[function(t,e,i){"use strict";cc._RF.push(e,"fac0aczYRdERY4eYv/OhYnS","GameSlot");var o=t("../../../prefab/item/SlotGameIconItem");cc.Class({extends:cc.Component,properties:{fireFishSlotGameIcon:o,slotSlotGameIcon:o,slot2SlotGameIcon:o},init:function(t){this.GameCenter=t},onLoad:function(){},initData:function(t){if(this.data=t,t){var e=t.lv,i=t.zoombies,o=t.one001;this.fireFishSlotGameIcon.initData(e),this.slotSlotGameIcon.initData(i),this.slot2SlotGameIcon.initData(o)}}}),cc._RF.pop()},{"../../../prefab/item/SlotGameIconItem":"SlotGameIconItem"}],GiftCode:[function(t,e,i){"use strict";cc._RF.push(e,"25d9dQ5PUNHq6+nJ4f/HbO/","GiftCode");var o=t("../../../util/BrowserUtil"),n=t("../../../object/Capcha"),s=t("../../../helper/Message"),a=t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{giftCodeEdibox:cc.EditBox,capchaEditBox:cc.EditBox,capchaLabel:cc.Label},init:function(t){this.GameCenter=t},onLoad:function(){this.editboxs=[this.giftCodeEdibox,this.capchaEditBox],this.capcha=new n,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&(this.node.active=!1);break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===a.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===a.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===a.ESC_KEY?(this.node.active=!1,t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},onFanpageClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getGeneralConfig();t&&cc.sys.openURL(t.FANPAGE)},onConfirmClick:function(){var t=this;this.GameCenter.Audio.playClick();var e=this.giftCodeEdibox.string,i=this.capchaEditBox.string;if(this.checkAllEditboxNotEmpty())if(this.capcha.result==i){var o={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),code:e};this.GameCenter.api.getGiftCode(o,function(e){t.clear(),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.GIFTCODE_TITLE,e.msg)},function(e){t.initCapcha(),t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.GIFTCODE_TITLE,e.msg)})}else this.GameCenter.showDialogMessage(s.GIFTCODE_TITLE,s.CAPCHA_NOT_CORRECT);else this.GameCenter.showDialogMessage(s.GIFTCODE_TITLE,s.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},onResetCapchaClick:function(){this.GameCenter.Audio.playClick(),this.initCapcha()},initCapcha:function(){this.capcha=new n,this.capchaLabel.string=this.capcha.text},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initCapcha()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/Capcha":"Capcha","../../../util/BrowserUtil":"BrowserUtil"}],GunChoise:[function(t,e,i){"use strict";cc._RF.push(e,"73c51JWljxMebdYWknIZnZI","GunChoise");var o=t("../../helper/FireFishConfig"),n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{gunSprite:cc.Sprite,gunNormalSpriteFrame:cc.SpriteFrame,gunActiveSpriteFrame:cc.SpriteFrame,gunLabel:cc.Label},init:function(t,e,i){this.FireFish=t.FireFish,this.FireFishGame=t,this.MyPlayer=e,this.index=i,this.isActive=!1;var s=o.GUNS_TYPE[i]*this.FireFishGame.minBet;this.gunLabel.string=n.numberWithCommas(s)},onLoad:function(){this.node.active=!1,this._initX=this.node.x,this._initY=this.node.y},setNormal:function(){this.isActive=!1,this.gunSprite.spriteFrame=this.gunNormalSpriteFrame},setActive:function(){this.isActive=!0,this.gunSprite.spriteFrame=this.gunActiveSpriteFrame},show:function(){this.node.active||(this.node.stopAllActions(),this.node.active=!0,this.node.setPosition(0,0),this.node.runAction(cc.moveTo(o.MY_PLAYER_SHOW_GUN_CHOISE,this._initX,this._initY)))},hide:function(){this.node.stopAllActions(),this.node.setPosition(this._initX,this._initY),this.node.runAction(cc.sequence(cc.moveTo(o.MY_PLAYER_SHOW_GUN_CHOISE,0,0),cc.callFunc(function(){this.node.active=!1},this)))},onClick:function(){this.FireFish.AudioFireFish.playSwitch(),this.MyPlayer.hideGunChoise(),this.MyPlayer.changeGunWithAnimation(this.index),this.MyPlayer.FireFishGame.sendChangeGun(this.index)}}),cc._RF.pop()},{"../../helper/FireFishConfig":"FireFishConfig","../../util/FormatUtil":"FormatUtil"}],Gun:[function(t,e,i){"use strict";cc._RF.push(e,"daae86RElBPporbXHSuLrHU","Gun"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this._animation=this.node.getComponent(cc.Animation),this._fireAnimationName="";for(var t=this._animation.getClips(),e=0,i=t.length;e<i;e++)t[e]._name.indexOf("Fire")>-1&&(this._fireAnimationName=t[e]._name);this._initX=this.node.x,this._initY=this.node.y},playShowAnimation:function(){this.node.y=this._initY-60,this.node.runAction(cc.moveTo(.15,this._initX,this._initY))},fire:function(){this._animation.play(this._fireAnimationName)}}),cc._RF.pop()},{}],HeaderAccountUI:[function(t,e,i){"use strict";cc._RF.push(e,"66fe97kbkhJXI+cA51N4Azd","HeaderAccountUI"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],HeaderAccount:[function(t,e,i){"use strict";cc._RF.push(e,"b4ed80OKfNLrI3gIFa1UPO7","HeaderAccount");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util"),s=t("../../../helper/Constant"),a=t("../../../helper/Config");cc.Class(function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label,moneyLabel:cc.Label,goldLabel:cc.Label,messageNode:cc.Node,vipNode:cc.Node,vipSprite:cc.Sprite,vipProgressBar:cc.ProgressBar,counterMailUnreadNode:cc.Node,counterMailUnreadLabel:cc.Label,listVipSprite:[cc.SpriteFrame]},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.loadUserInfo()},loadUserInfo:function(){var t=this.GameCenter.getUser();if(t){var e=n.getShowNickName(t.show_nickname,s.SERVER_ID_1_NAME),i=t.avatar;this.setNicknameLabel(e),this.initCounterUnreadMessage(),this.setAvatar(i),this.updateMoneyGold(),this.initVip()}},initVip:function(){var t=this.GameCenter.getVip2Total(),e=this.getVipPointData(t);e&&(this.vipSprite.spriteFrame=this.listVipSprite[e.position],this.vipProgressBar.progress=e.progress)},setNicknameLabel:function(t){this.nameLabel.string=t},minusUnreadMessage:function(){this.GameCenter.getUser().unread_message--,this.initCounterUnreadMessage()},plusUnreadMessage:function(){this.GameCenter.getUser().unread_message++,this.initCounterUnreadMessage(),this.showEffectNewMessage()},initCounterUnreadMessage:function(){var t=parseInt(this.GameCenter.getUser().unread_message);t>0?(this.counterMailUnreadNode.active=!0,this.counterMailUnreadLabel.string=t):this.counterMailUnreadNode.active=!1},setAvatar:function(t){var e=this;t&&cc.loader.load(o.convertUrlToLocation(t),function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},updateMoneyGold:function(){var t=this.GameCenter.getSFSMySelf(),e=t.variables.money.value,i=t.variables.gold.value;this.setMoneyLabel(e),this.setGoldLabel(i)},setMoneyLabel:function(t){this.moneyLabel.string=o.numberWithCommas(t)},setGoldLabel:function(t){this.goldLabel.string=o.numberWithCommas(t)},showEffectNewMessage:function(){this.messageNode.stopAllActions(),this.messageNode.angle=0,this.messageNode.runAction(cc.sequence(cc.rotateTo(.25,180),cc.rotateTo(.25,360),cc.callFunc(function(){this.messageNode.angle=-360},this)))},onAvatarClick:function(){this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onInfoClick()},onRechargeMoneyClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeMomoClick()},onSecurityClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onSafeClick()},onRechargeGoldClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeGoldClick()},onAwardClick:function(){this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onAwardClick()},onQuestClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.MiniGame.Quest.showDialog()},onMailClick:function(){this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.onMailClick()},onSettingClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showSettingFormNode()},hideVipNode:function(){this.vipNode.active=!1},showVipNode:function(){this.vipNode.active=!0},getVipPointData:function(t,e){for(var i=0,o=0,n=t.length;o<n;o++)t[o].from_money<=e&&(i=o);return{sprite:this.listVipSprite[i],progress:e/(i<t.length-1?t[i+1].from_money:t[i].from_money)}}},"getVipPointData",function(t){for(var e=a.VIP_2_POINT,i=0,o=0,n=0,s=0,r=0,c=0,h=e.length;c<h;c++)if(t<e[c]){e[c-1]?(i=a.VIP_2_RATE_TRANFER[c-1],o=a.VIP_2_POINT[c]-t,n=c-1,s=((r=a.VIP_2_POINT[c]-a.VIP_2_POINT[c-1])-o)/r):(i=a.VIP_2_RATE_TRANFER[0],o=a.VIP_2_POINT[1]-t,n=0,s=((r=a.VIP_2_POINT[1])-o)/r);break}return t>=e[e.length-1]&&(i=a.VIP_2_RATE_TRANFER[e.length-1],o=0,n=e.length-1,s=1),{position:n,total_prize:i,next_point:o,progress:s}})),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],HeaderLogin:[function(t,e,i){"use strict";cc._RF.push(e,"f01b9fAXrRAFKfGzp93Vt11","HeaderLogin");t("../../../util/BrowserUtil");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=(t("../../../helper/Config"),t("../../../util/FormatUtil"));cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,passwordEditBox:cc.EditBox,facebookButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.initData()},onEnable:function(){},onDisable:function(){},initData:function(){if(!this.GameCenter.isConnected()){var t=this.GameCenter.getTempData(),e=s.getParamsInUrl(o.TOKEN),i=s.getParamsInUrl(o.USER_ID);if(s.getParamsInUrl(o.TYPE)!==o.FACEBOOK||t[o.IS_AUTO_LOGIN_BY_FACEBOOK])if(e&&i)this.loginToken(e,i);else this.GameCenter.isAutoLogin();else this.onFacebookClick(),t[o.IS_AUTO_LOGIN_BY_FACEBOOK]=!0}cc.sys.isBrowser||(this.facebookButtonNode.active=!1)},checkLogin:function(){var t=this;this.GameCenter.showProcessingNode(),this.GameCenter.api.checkLogin({},function(e){t.GameCenter.initDataAndConnectSFS(e.data)},function(e){t.GameCenter.hideProcessingNode()})},loginToken:function(t,e){var i=this,o={token:t,user_id:e,register_code:this.GameCenter.getRegisterCode(),mkt_code:this.GameCenter.getMarketingCode()};this.GameCenter.showProcessingNode(),this.GameCenter.api.loginToken(o,function(t){i.GameCenter.initDataAndConnectSFS(t.data)},function(t){i.GameCenter.hideProcessingNode(),i.GameCenter.showDialogMessage(n.LOGIN_TITLE,t.msg)})},onFacebookClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.loginFacebook()},onGoogleClick:function(){this.GameCenter.Audio.playClick()},onLoginClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showLoginFormNode()},onRegisterClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showRegisterFormNode()},onForgetPasswordClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showForgetPasswordPhoneFormNode()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],Header:[function(t,e,i){"use strict";cc._RF.push(e,"b811f4WHlBItqiVRkwkA9rV","Header");var o=t("./HeaderLogin"),n=t("./HeaderAccount");cc.Class({extends:cc.Component,properties:{HeaderLogin:o,HeaderAccount:n},init:function(t){this.GameCenter=t,this.HeaderLogin.init(t),this.HeaderAccount.init(t)},onLoad:function(){}}),cc._RF.pop()},{"./HeaderAccount":"HeaderAccount","./HeaderLogin":"HeaderLogin"}],HistoryAwardInviteFriendItem:[function(t,e,i){"use strict";cc._RF.push(e,"b8e84t64fNDYLwoNaYEOY2e","HistoryAwardInviteFriendItem"),cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Node,pointAwardLabel:cc.Label,blanceMoneyLabel:cc.Label,remainpointLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}}),cc._RF.pop()},{}],HistoryAwardInviteFriend:[function(t,e,i){"use strict";cc._RF.push(e,"53b8fXdc+tN1bXztw5h61bn","HistoryAwardInviteFriend");t("../../../../util/FormatUtil"),t("../../../../util/Util");cc.Class({extends:cc.Component,properties:{historyScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo},onLoad:function(){},onEnable:function(){},onSuccessClick:function(){}}),cc._RF.pop()},{"../../../../util/FormatUtil":"FormatUtil","../../../../util/Util":"Util"}],HistoryInviteFriend:[function(t,e,i){"use strict";cc._RF.push(e,"5a69asqAqVOlaCTHbmnkV40","HistoryInviteFriend");t("../../../../util/FormatUtil"),t("../../../../util/Util");cc.Class({extends:cc.Component,properties:{listInviteScrollView:cc.ScrollView,inviteItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo},onLoad:function(){},onEnable:function(){this.loadHistory()},onDisable:function(){this.removeXhr()},loadHistory:function(){var t=this;this.listInviteScrollView.content.removeAllChildren(!0),this.loadingNode.active=!0;var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.gethistoryInviteFriend(e,function(e){t.loadingNode.active=!1;var i=e.data;t.initHistory(i)},function(e){t.loadingNode.active=!1})},initHistory:function(t){for(var e=0,i=t.length;e<i;e++){var o=cc.instantiate(this.inviteItemPrefab);o.getComponent("InviteFriendItem").init(t[e],e),this.listInviteScrollView.content.addChild(o)}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../util/FormatUtil":"FormatUtil","../../../../util/Util":"Util"}],HotUpdate:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"0beff9PBvpHup1yYbTMdOC5","HotUpdate");var s=t("../../helper/Message");cc.Class((n(o={extends:cc.Component,properties:{manifestUrl:{type:cc.Asset,default:null},retryButtonNode:cc.Node,updateProgressBar:cc.ProgressBar,messageLabel:cc.Label,_updating:!1,_canRetry:!1,_storagePath:""},init:function(t){this.Splash=t},onLoad:function(){cc.sys.isBrowser?this.Splash.loadAssets():(this.hideProgressBar(),this.initHotUpdate(),this.checkUpdate())},showProgressBar:function(){this.updateProgressBar.node.active=!0,this.messageLabel.node.active=!0},hideProgressBar:function(){this.updateProgressBar.node.active=!1,this.messageLabel.node.active=!1},initHotUpdate:function(){console.log("HOTUPDATE initHotUpdate");var t=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"60s-remote-asset";this._am=new jsb.AssetsManager(this.manifestUrl.nativeUrl,t),cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS||this._am.retain(),this._am.setVersionCompareHandle(function(t,e){console.log("JS Custom Version Compare: version A is "+t+", version B is "+e);for(var i=t.split("."),o=e.split("."),n=0;n<i.length;++n){var s=parseInt(i[n]),a=parseInt(o[n]||0);if(s!==a)return s-a}return o.length>i.length?-1:0}),this._am.setVerifyCallback(function(t,e){e.compressed;return!0}),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),this.updateProgressBar.progress=0},onDestroy:function(){this._updateListener&&(cc.eventManager.removeListener(this._updateListener),this._updateListener=null),this._am&&!cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS&&this._am.release()}},"initHotUpdate",function(){this.updateProgressBar.progress=0,this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"60s-remote-asset",this._am=new jsb.AssetsManager("",this._storagePath,this.versionCompareHandle),cc.sys.ENABLE_GC_FOR_NATIVE_OBJECTS||this._am.retain(),this._am.setVerifyCallback(function(t,e){e.compressed;return!0}.bind(this)),cc.sys.os===cc.sys.OS_ANDROID&&this._am.setMaxConcurrentTask(2),this.updateProgressBar.progress=0}),n(o,"checkUpdate",function(){console.log("HOTUPDATE checkUpdate"),this._updating?this.messageLabel.string=s.HOT_UPDATE_CHECKING_VERSION:(this._am.getState()===jsb.AssetsManager.State.UNINITED&&(console.log("HOTUPDATE loadLocalManifest"),this._am.loadLocalManifest(this.manifestUrl.nativeUrl)),this._checkListener=new jsb.EventListenerAssetsManager(this._am,this.checkCb.bind(this)),cc.eventManager.addListener(this._checkListener,1),this._am.checkUpdate(),this._updating=!0)}),n(o,"hotUpdate",function(){this._am&&!this._updating&&(this._updateListener=new jsb.EventListenerAssetsManager(this._am,this.updateCb.bind(this)),cc.eventManager.addListener(this._updateListener,1),this._am.getState()===jsb.AssetsManager.State.UNINITED&&this._am.loadLocalManifest(this.manifestUrl.nativeUrl),this._failCount=0,this._am.update(),this._updating=!0)}),n(o,"retry",function(){!this._updating&&this._canRetry&&(this.retryButtonNode.active=!1,this._canRetry=!1,this.messageLabel.string=s.HOT_UPDATE_RETRY,this._am.downloadFailedAssets())}),n(o,"checkCb",function(t){var e=!1,i=!1;switch(console.log("Code: "+t.getEventCode()),t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.messageLabel.string=s.HOT_UPDATE_NOT_FOUND;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.messageLabel.string=s.HOT_UPDATE_DOWNLOAD_MANIFEST_FAILED;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.updateProgressBar.progress=1,this.messageLabel.string=s.HOT_UPDATE_ALREADY_UP_TO_DATE,e=!0;break;case jsb.EventAssetsManager.NEW_VERSION_FOUND:this.messageLabel.string=s.HOT_UPDATE_FOUND_UPDATE,this.updateProgressBar.progress=0,i=!0;break;default:return}cc.eventManager.removeListener(this._checkListener),this._checkListener=null,this._updating=!1,e&&this.Splash.loadAssets(),i&&(this.showProgressBar(),this.hotUpdate())}),n(o,"updateCb",function(t){var e=!1,i=!1;switch(t.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:this.messageLabel.string=s.HOT_UPDATE_NOT_FOUND,i=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:this.updateProgressBar.progress=t.getPercent();t.getMessage();this.messageLabel.string=s.HOT_UPDATE_UPDATING;break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:this.messageLabel.string=s.HOT_UPDATE_DOWNLOAD_MANIFEST_FAILED,i=!0;break;case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:this.updateProgressBar.progress=1,this.messageLabel.string=s.HOT_UPDATE_ALREADY_UP_TO_DATE,i=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:this.messageLabel.string=s.HOT_UPDATE_UPDATE_SUCCESS,e=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this.messageLabel.string=s.HOT_UPDATE_UPDATE_FAILED,this.retryButtonNode.active=!0,this._updating=!1,this._canRetry=!0;break;case jsb.EventAssetsManager.ERROR_UPDATING:this.messageLabel.string=s.HOT_UPDATE_UPDATE_FAILED;break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:this.messageLabel.string=t.getMessage()}if(i&&(cc.eventManager.removeListener(this._updateListener),this._updateListener=null,this._updating=!1),e){cc.eventManager.removeListener(this._updateListener),this._updateListener=null;var o=jsb.fileUtils.getSearchPaths(),n=this._am.getLocalManifest().getSearchPaths();console.log(JSON.stringify(n)),Array.prototype.unshift(o,n),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(o)),jsb.fileUtils.setSearchPaths(o),cc.audioEngine.stopAll(),cc.game.restart()}}),n(o,"onRetryClick",function(){this.Splash.Audio.playClick(),this.retry()}),n(o,"versionCompareHandle",function(t,e){console.log("JS Custom Version Compare: version A is "+t+", version B is "+e),console.log("JS Custom Version Compare: version A is "+t+", version B is "+e);for(var i=t.split("."),o=e.split("."),n=0;n<i.length;++n){var s=parseInt(i[n]),a=parseInt(o[n]||0);if(s!==a)return s-a}return o.length>i.length?-1:0}),o)),cc._RF.pop()},{"../../helper/Message":"Message"}],InfoAccountAbout:[function(t,e,i){"use strict";cc._RF.push(e,"ad3c68wdWBMs5KVg/TOpw1/","InfoAccountAbout"),cc.Class({extends:cc.Component,properties:{contentLabel:cc.Label},init:function(t){this.GameCenter=t},onLoad:function(){this.initData()},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.POLICY;e&&e.length>1&&(this.contentLabel.string=e[1].value)}}}),cc._RF.pop()},{}],InfoAccountAchivement:[function(t,e,i){"use strict";cc._RF.push(e,"f126118b/5LLJkRq15/MKXN","InfoAccountAchivement"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t},onLoad:function(){}}),cc._RF.pop()},{}],InfoAccountClan:[function(t,e,i){"use strict";cc._RF.push(e,"b7d35vSJ2RD16fxWDdQTcO1","InfoAccountClan"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t},onLoad:function(){}}),cc._RF.pop()},{}],InfoAccount:[function(t,e,i){"use strict";cc._RF.push(e,"e4063zDjf5LjrxVMT2R1eWR","InfoAccount");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util"),s=t("../../../helper/Constant"),a=t("./account/InfoAccountAbout"),r=t("./account/InfoAccountAchivement"),c=t("./account/InfoAccountClan"),h=t("./account/VipAccount");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label,idLabel:cc.Label,emailLabel:cc.Label,phoneLabel:cc.Label,moneyLabel:cc.Label,dateCreatedLabel:cc.Label,authenticationLabel:cc.Label,ipLabel:cc.Label,achivementOnButtonNode:cc.Node,achivementOffButtonNode:cc.Node,aboutOnButtonNode:cc.Node,aboutOffButtonNode:cc.Node,clanOnButtonNode:cc.Node,clanOffButtonNode:cc.Node,vipOnButtonNode:cc.Node,vipOffButtonNode:cc.Node,achivementContentNode:cc.Node,aboutContentNode:cc.Node,clanContentNode:cc.Node,vipContentNode:cc.Node,InfoAccountAbout:a,InfoAccountAchivement:r,InfoAccountClan:c,VipAccount:h},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.InfoAccountAbout.init(t),this.InfoAccountAchivement.init(t),this.InfoAccountClan.init(t),this.VipAccount.init(t)},onLoad:function(){var t=this.GameCenter.getUser();this.dateCreatedLabel.string=o.getDateByTimeStamp(t.created_at),this.authenticationLabel.string=t.status},onEnable:function(){this.loadUserInfo()},loadUserInfo:function(){var t=this.GameCenter.getUser();if(t){var e=n.getShowNickName(t.show_nickname,s.SERVER_ID_1_NAME),i=t.avatar;if(this.setNicknameLabel(e),this.idLabel.string=t.user_id,t.email&&"null"!==t.email){var o=t.email;o=o.substring(0,3)+"***"+o.substring(o.indexOf("@")),t.email=o,this.emailLabel.string=t.email}else this.emailLabel.string="";t.phone&&"null"!==t.phone?this.phoneLabel.string="+"+t.phone:this.phoneLabel.string="",this.setAvatar(i),this.updateMoneyGold()}},setNicknameLabel:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(o.convertUrlToLocation(t),function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},updateMoneyGold:function(){var t=this.GameCenter.getSFSMySelf(),e=t.variables.money.value;t.variables.gold.value;this.setMoneyLabel(e)},setMoneyLabel:function(t){this.moneyLabel.string=o.numberWithCommas(t)},onUpdateAvatarClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showUpdateAvatarFormNode()},onLockClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showChangePasswordFormNode()},onHomeClick:function(){this.GameCenter.Audio.playClick()},onFriendClick:function(){this.GameCenter.Audio.playClick()},onRechargeMoneyClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeMoneyClick()},onAchivementClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.achivementOnButtonNode.active=!0,this.achivementOffButtonNode.active=!1,this.achivementContentNode.active=!0},onAboutClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.aboutOnButtonNode.active=!0,this.aboutOffButtonNode.active=!1,this.aboutContentNode.active=!0},onClanClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.clanOnButtonNode.active=!0,this.clanOffButtonNode.active=!1,this.clanContentNode.active=!0},onVipClick:function(){this.GameCenter.Audio.playClick(),this.initBeforeClick(),this.vipOnButtonNode.active=!0,this.vipOffButtonNode.active=!1,this.vipContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.achivementOffButtonNode.active=!0,this.aboutOffButtonNode.active=!0,this.clanOffButtonNode.active=!0,this.vipOffButtonNode.active=!0},hideAllOnButtons:function(){this.achivementOnButtonNode.active=!1,this.aboutOnButtonNode.active=!1,this.clanOnButtonNode.active=!1,this.vipOnButtonNode.active=!1},hideAllContents:function(){this.achivementContentNode.active=!1,this.aboutContentNode.active=!1,this.clanContentNode.active=!1,this.vipContentNode.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util","./account/InfoAccountAbout":"InfoAccountAbout","./account/InfoAccountAchivement":"InfoAccountAchivement","./account/InfoAccountClan":"InfoAccountClan","./account/VipAccount":"VipAccount"}],InfoAwardHistory:[function(t,e,i){"use strict";cc._RF.push(e,"abe84iF5ihN6byFc3hxFsRq","InfoAwardHistory");var o=t("../../../../helper/Config"),n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,awardHistoryItemPrefab:cc.Prefab,listNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.listNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.xhr=this.GameCenter.api.historyAward(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(n.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.listNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/o.HISTORY_PAGINATION)+1,n=o.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*o.HISTORY_PAGINATION?(e+1)*o.HISTORY_PAGINATION:t.data.length,a=n;a<s;a++){var r=cc.instantiate(t.awardHistoryItemPrefab);r.parent=t.listNode,r.getComponent("AwardHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),p=m.getComponent("PaginationItem");m.parent=t.paginationNode,p.init(d+1,d),d===e?p.disable():p.enable(),t.listPagination.push(m)}var f=cc.instantiate(t.paginationItemPrefab),g=f.getComponent("PaginationItem");f.parent=t.paginationNode,g.init(">",e+1),g.enable(),t.listPagination.push(f);var _=cc.instantiate(t.paginationItemPrefab),S=_.getComponent("PaginationItem");_.parent=t.paginationNode,S.init(">>",i-1),S.enable(),t.listPagination.push(_);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Message":"Message"}],InfoGame:[function(t,e,i){"use strict";cc._RF.push(e,"58cf2fpVWNKf4+nO/Go19XZ","InfoGame");var o=t("../../../../helper/Message");t("../../../../helper/Constant");cc.Class({extends:cc.Component,properties:{otpEditBox:cc.EditBox,xocdiaToggle:cc.Toggle,bacayToggle:cc.Toggle,maubinhToggle:cc.Toggle,phomToggle:cc.Toggle,samToggle:cc.Toggle,samsoloToggle:cc.Toggle,pokerToggle:cc.Toggle,xitoToggle:cc.Toggle,liengToggle:cc.Toggle,tlmnToggle:cc.Toggle,tlmnsoloToggle:cc.Toggle,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.initData()},initData:function(){var t=this.GameCenter.getSecurityGame();if(this.reset(),t){var e=!!t.BACAY,i=!!t.LIENG,o=!!t.MAUBINH,n=!!t.PHOM,s=!!t.POKER,a=!!t.SAM,r=!!t.SAM_SOLO,c=!!t.TLMN,h=!!t.TLMN_SOLO,l=!!t.XITO,u=!!t.XOCDIA;this.bacayToggle.isChecked=e,this.liengToggle.isChecked=i,this.maubinhToggle.isChecked=o,this.phomToggle.isChecked=n,this.samToggle.isChecked=a,this.samsoloToggle.isChecked=r,this.pokerToggle.isChecked=s,this.tlmnToggle.isChecked=c,this.tlmnsoloToggle.isChecked=h,this.xitoToggle.isChecked=l,this.xocdiaToggle.isChecked=u}else this.xocdiaToggle.isChecked=!1,this.bacayToggle.isChecked=!1,this.maubinhToggle.isChecked=!1,this.phomToggle.isChecked=!1,this.samToggle.isChecked=!1,this.samsoloToggle.isChecked=!1,this.pokerToggle.isChecked=!1,this.xitoToggle.isChecked=!1,this.liengToggle.isChecked=!1,this.tlmnToggle.isChecked=!1,this.tlmnsoloToggle.isChecked=!1},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},onSendSecurityClick:function(){var t=this.otpEditBox.string;""===t?this.GameCenter.showDialogMessage(o.SECURITY_GAME,o.OTP_NOT_EMPTY):this.security(t)},security:function(t){var e=this,i=this.getData();i.otp=t,i.token=this.GameCenter.getToken(),i.user_id=this.GameCenter.getUserId();this.GameCenter.showProcessingNode(),this.GameCenter.api.securityGame(i,function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.SECURITY_GAME,t.msg),e.GameCenter.setSecurityGame(i)},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.SECURITY_GAME,t.msg),e.otpEditBox.string=""})},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},getData:function(){var t=this.bacayToggle.isChecked?1:0,e=this.liengToggle.isChecked?1:0,i=this.maubinhToggle.isChecked?1:0,o=this.phomToggle.isChecked?1:0,n=this.pokerToggle.isChecked?1:0;return{BACAY:t,CHAN:1,LIENG:e,MAUBINH:i,PHOM:o,SAM:this.samToggle.isChecked?1:0,SAM_SOLO:this.samsoloToggle.isChecked?1:0,POKER:n,XITO:this.xitoToggle.isChecked?1:0,TLMN:this.tlmnToggle.isChecked?1:0,TLMN_SOLO:this.tlmnsoloToggle.isChecked?1:0,XOCDIA:this.xocdiaToggle.isChecked?1:0}},reset:function(){this.otpEditBox.string="",this.xocdiaToggle.isChecked=!1,this.bacayToggle.isChecked=!1,this.maubinhToggle.isChecked=!1,this.phomToggle.isChecked=!1,this.samToggle.isChecked=!1,this.samsoloToggle.isChecked=!1,this.pokerToggle.isChecked=!1,this.xitoToggle.isChecked=!1,this.liengToggle.isChecked=!1,this.tlmnToggle.isChecked=!1,this.tlmnsoloToggle.isChecked=!1}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoHistory:[function(t,e,i){"use strict";cc._RF.push(e,"a949dhBawJIUao3rZ0K/nk3","InfoHistory");var o=t("./history/InfoPlayMoneyHistory"),n=t("./history/InfoPlayGoldHistory"),s=t("./history/InfoAwardHistory"),a=t("./history/InfoRechargeMoneyHistory"),r=t("./history/InfoRechargeGoldHistory");cc.Class({extends:cc.Component,properties:{playMoneyOnButtonNode:cc.Node,playMoneyOffButtonNode:cc.Node,playGoldOnButtonNode:cc.Node,playGoldOffButtonNode:cc.Node,awardOnButtonNode:cc.Node,awardOffButtonNode:cc.Node,rechargeMoneyOnButtonNode:cc.Node,rechargeMoneyOffButtonNode:cc.Node,rechargeGoldOnButtonNode:cc.Node,rechargeGoldOffButtonNode:cc.Node,playMoneyContentNode:cc.Node,playGoldContentNode:cc.Node,awardContentNode:cc.Node,rechargeMoneyContentNode:cc.Node,rechargeGoldContentNode:cc.Node,InfoPlayMoneyHistory:o,InfoPlayGoldHistory:n,InfoAwardHistory:s,InfoRechargeMoneyHistory:a,InfoRechargeGoldHistory:r},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo,this.InfoPlayMoneyHistory.init(t),this.InfoPlayGoldHistory.init(t),this.InfoAwardHistory.init(t),this.InfoRechargeMoneyHistory.init(t),this.InfoRechargeGoldHistory.init(t)},onLoad:function(){},onEnable:function(){this.showPlayMoneyHistories()},onDisable:function(){this.InfoPlayMoneyHistory.reset(),this.InfoPlayGoldHistory.reset(),this.InfoAwardHistory.reset(),this.InfoRechargeMoneyHistory.reset(),this.InfoRechargeGoldHistory.reset(),this.hideAllContents()},onPlayMoneyClick:function(){this.GameCenter.Audio.playClick(),this.showPlayMoneyHistories()},showPlayMoneyHistories:function(){this.initBeforeClick(),this.playMoneyOnButtonNode.active=!0,this.playMoneyOffButtonNode.active=!1,this.playMoneyContentNode.active=!0,this.InfoPlayMoneyHistory.getPage()},onPlayGoldClick:function(){this.GameCenter.Audio.playClick(),this.showPlayGoldHistories()},showPlayGoldHistories:function(){this.initBeforeClick(),this.playGoldOnButtonNode.active=!0,this.playGoldOffButtonNode.active=!1,this.playGoldContentNode.active=!0,this.InfoPlayGoldHistory.getPage()},onAwardClick:function(){this.GameCenter.Audio.playClick(),this.showAwardHistories()},showAwardHistories:function(){this.initBeforeClick(),this.awardOnButtonNode.active=!0,this.awardOffButtonNode.active=!1,this.awardContentNode.active=!0,this.InfoAwardHistory.getPage()},onRechargeMoneyClick:function(){this.GameCenter.Audio.playClick(),this.showRechargeMoneyHistores()},showRechargeMoneyHistores:function(){this.initBeforeClick(),this.rechargeMoneyOnButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!1,this.rechargeMoneyContentNode.active=!0,this.InfoRechargeMoneyHistory.getPage()},onRechargeGoldClick:function(){this.GameCenter.Audio.playClick(),this.showRechargeGoldHistories()},showRechargeGoldHistories:function(){this.initBeforeClick(),this.rechargeGoldOnButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!1,this.rechargeGoldContentNode.active=!0,this.InfoRechargeGoldHistory.getPage()},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.playMoneyOffButtonNode.active=!0,this.playGoldOffButtonNode.active=!0,this.awardOffButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!0},hideAllOnButtons:function(){this.playMoneyOnButtonNode.active=!1,this.playGoldOnButtonNode.active=!1,this.awardOnButtonNode.active=!1,this.rechargeMoneyOnButtonNode.active=!1,this.rechargeGoldOnButtonNode.active=!1},hideAllContents:function(){this.playMoneyContentNode.active=!1,this.playGoldContentNode.active=!1,this.awardContentNode.active=!1,this.rechargeMoneyContentNode.active=!1,this.rechargeGoldContentNode.active=!1}}),cc._RF.pop()},{"./history/InfoAwardHistory":"InfoAwardHistory","./history/InfoPlayGoldHistory":"InfoPlayGoldHistory","./history/InfoPlayMoneyHistory":"InfoPlayMoneyHistory","./history/InfoRechargeGoldHistory":"InfoRechargeGoldHistory","./history/InfoRechargeMoneyHistory":"InfoRechargeMoneyHistory"}],InfoMail:[function(t,e,i){"use strict";cc._RF.push(e,"a2c76J6LotKaKP5EahAcwvA","InfoMail");var o=t("../../../helper/Message"),n=t("../../../helper/Config"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{backNode:cc.Node,loadingNode:cc.Node,listMailNode:cc.Node,mailDetailNode:cc.Node,noMailNode:cc.Node,mailItemPrefab:cc.Prefab,rechargeCardPrefab:cc.Prefab,mailScrollView:cc.ScrollView,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab,mailDetailTitleLabel:cc.Label,mailDetailInfoLabel:cc.Label,mailDetailContentLabel:cc.Label,mailListCardScrollView:cc.ScrollView},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onEnable:function(){this.data=null,this.showListMailNode(),this.initData()},onDisable:function(){this.backNode.active=!0},initData:function(){var t=this;this.showLoadingNode(),this.mailScrollView.content.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0);var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.getListMessage(e,function(e){t.data=e.data,t.getPage()},function(e){t.showListNode(),t.GameCenter.showDialogMessage(o.MAIL_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.currentPage=e,this.mailScrollView.content.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.data&&this.data.length>0?function(){for(var i=parseInt((t.data.length-1)/n.MAIL_PAGINATION)+1,o=n.MAIL_PAGINATION*e,s=t.data.length>(e+1)*n.MAIL_PAGINATION?(e+1)*n.MAIL_PAGINATION:t.data.length,a=o;a<s;a++){var r=cc.instantiate(t.mailItemPrefab);r.parent=t.mailScrollView.content,r.getComponent("MailItem").init(t.GameCenter,t.data[a])}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),p=m.getComponent("PaginationItem");m.parent=t.paginationNode,p.init(d+1,d),d===e?p.disable():p.enable(),t.listPagination.push(m)}var f=cc.instantiate(t.paginationItemPrefab),g=f.getComponent("PaginationItem");f.parent=t.paginationNode,g.init(">",e+1),g.enable(),t.listPagination.push(f);var _=cc.instantiate(t.paginationItemPrefab),S=_.getComponent("PaginationItem");_.parent=t.paginationNode,S.init(">>",i-1),S.enable(),t.listPagination.push(_);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():(this.listMailNode.active=!1,this.noMailNode.active=!0)},removeMail:function(t){if(this.data)for(var e in this.data)this.data[e].id===t&&(this.data.splice(e,1),this.getPage(this.currentPage))},showListMailNode:function(){this.listMailNode.active=!0,this.mailDetailNode.active=!1,this.noMailNode.active=!1},showMailDetailNode:function(t){if(this.backNode.active=!1,this.listMailNode.active=!1,this.mailDetailNode.active=!0,this.mailDetailTitleLabel.string=t.title,this.mailDetailInfoLabel.string=String.format(o.MAIL_DETAIL_TITLE,t.from_username,s.getStringDateByTimeStamp(t.created_at)),1==t.msg_type){this.mailDetailContentLabel.node.active=!1,this.mailListCardScrollView.node.active=!0,this.mailListCardScrollView.content.removeAllChildren(!0);var e=JSON.parse(t.content);if(e)for(var i in e){var n=cc.instantiate(this.rechargeCardPrefab);n.parent=this.mailListCardScrollView.content,n.getComponent("RechargeCardItem").init(this.GameCenter,e[i])}}else{this.mailDetailContentLabel.node.active=!0,this.mailListCardScrollView.node.active=!1;var a=t.content;this.mailDetailContentLabel.string=a}},onBackClick:function(){this.GameCenter.Audio.playClick(),this.showListMailNode(),this.backNode.active=!0},showLoadingNode:function(){this.loadingNode.active=!0,this.mailScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.mailScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],InfoPlayGoldHistory:[function(t,e,i){"use strict";cc._RF.push(e,"f6670jpgT9DIYV8spcQqQEN","InfoPlayGoldHistory");var o=t("../../../../helper/Constant"),n=t("../../../../helper/Message"),s=t("../../../../helper/Config");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,playMoneyHistoryItemPrefab:cc.Prefab,playMoneyLayoutNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.playMoneyLayoutNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),money_type:o.GOLD_CODE};this.xhr=this.xhr=this.GameCenter.api.getPlayHistory(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(n.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.playMoneyLayoutNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/s.HISTORY_PAGINATION)+1,o=s.HISTORY_PAGINATION*e,n=t.data.length>(e+1)*s.HISTORY_PAGINATION?(e+1)*s.HISTORY_PAGINATION:t.data.length,a=o;a<n;a++){var r=cc.instantiate(t.playMoneyHistoryItemPrefab);r.parent=t.playMoneyLayoutNode,r.getComponent("PlayHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),p=m.getComponent("PaginationItem");m.parent=t.paginationNode,p.init(d+1,d),d===e?p.disable():p.enable(),t.listPagination.push(m)}var f=cc.instantiate(t.paginationItemPrefab),g=f.getComponent("PaginationItem");f.parent=t.paginationNode,g.init(">",e+1),g.enable(),t.listPagination.push(f);var _=cc.instantiate(t.paginationItemPrefab),S=_.getComponent("PaginationItem");_.parent=t.paginationNode,S.init(">>",i-1),S.enable(),t.listPagination.push(_);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoPlayMoneyHistory:[function(t,e,i){"use strict";cc._RF.push(e,"6564foCCy9Ioq6yK2DqW+Z7","InfoPlayMoneyHistory");var o=t("../../../../helper/Constant"),n=t("../../../../helper/Config"),s=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,playMoneyHistoryItemPrefab:cc.Prefab,playMoneyLayoutNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.playMoneyLayoutNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),money_type:o.MONEY_CODE};this.xhr=this.xhr=this.GameCenter.api.getPlayHistory(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(s.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.playMoneyLayoutNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/n.HISTORY_PAGINATION)+1,o=n.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*n.HISTORY_PAGINATION?(e+1)*n.HISTORY_PAGINATION:t.data.length,a=o;a<s;a++){var r=cc.instantiate(t.playMoneyHistoryItemPrefab);r.parent=t.playMoneyLayoutNode,r.getComponent("PlayHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),p=m.getComponent("PaginationItem");m.parent=t.paginationNode,p.init(d+1,d),d===e?p.disable():p.enable(),t.listPagination.push(m)}var f=cc.instantiate(t.paginationItemPrefab),g=f.getComponent("PaginationItem");f.parent=t.paginationNode,g.init(">",e+1),g.enable(),t.listPagination.push(f);var _=cc.instantiate(t.paginationItemPrefab),S=_.getComponent("PaginationItem");_.parent=t.paginationNode,S.init(">>",i-1),S.enable(),t.listPagination.push(_);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoRechargeGoldHistory:[function(t,e,i){"use strict";cc._RF.push(e,"fe584kUBApMPbyMVNEUsF9K","InfoRechargeGoldHistory");var o=t("../../../../helper/Config"),n=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,rechargeGoldHistoryItemPrefab:cc.Prefab,listNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.listNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.xhr=this.GameCenter.api.historyRechargeGold(e,function(e){t.data=e.data,t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(n.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.listNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/o.HISTORY_PAGINATION)+1,n=o.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*o.HISTORY_PAGINATION?(e+1)*o.HISTORY_PAGINATION:t.data.length,a=n;a<s;a++){var r=cc.instantiate(t.rechargeGoldHistoryItemPrefab);r.parent=t.listNode,r.getComponent("RechargeGoldHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),p=m.getComponent("PaginationItem");m.parent=t.paginationNode,p.init(d+1,d),d===e?p.disable():p.enable(),t.listPagination.push(m)}var f=cc.instantiate(t.paginationItemPrefab),g=f.getComponent("PaginationItem");f.parent=t.paginationNode,g.init(">",e+1),g.enable(),t.listPagination.push(f);var _=cc.instantiate(t.paginationItemPrefab),S=_.getComponent("PaginationItem");_.parent=t.paginationNode,S.init(">>",i-1),S.enable(),t.listPagination.push(_);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Message":"Message"}],InfoRechargeMoneyHistory:[function(t,e,i){"use strict";cc._RF.push(e,"bf1c8OEsupGT7nr4/NFbvlb","InfoRechargeMoneyHistory");var o=t("../../../../helper/Config"),n=t("../../../../helper/Message"),s=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,contentNode:cc.Node,rechargeHistoryItemPrefab:cc.Prefab,listNode:cc.Node,paginationNode:cc.Node,paginationItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo},onLoad:function(){},onDisable:function(){this.removeXhr()},getData:function(){var t=this;this.data=null,this.isGetData=!1,this.listNode.removeAllChildren(!0),this.showLoadingNode();var e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.xhr=this.GameCenter.api.historyRechargeMoney(e,function(e){t.data=s.sortDataTimeByTime(e.data),t.isGetData=!0,t.getPage()},function(e){t.isGetData=!0,t.showListNode(),t.GameCenter.showDialogMessage(n.HISTORY_TITLE,e.msg)})},getPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.showListNode(),this.listNode.removeAllChildren(!0),this.paginationNode.removeAllChildren(!0),this.listPagination=[],this.isGetData?this.data&&this.data.length>0&&function(){for(var i=parseInt((t.data.length-1)/o.HISTORY_PAGINATION)+1,n=o.HISTORY_PAGINATION*e,s=t.data.length>(e+1)*o.HISTORY_PAGINATION?(e+1)*o.HISTORY_PAGINATION:t.data.length,a=n;a<s;a++){var r=cc.instantiate(t.rechargeHistoryItemPrefab);r.parent=t.listNode,r.getComponent("RechargeHistoryItem").init(t.data[a],a)}var c=cc.instantiate(t.paginationItemPrefab),h=c.getComponent("PaginationItem");c.parent=t.paginationNode,h.init("<<",0),h.enable(),t.listPagination.push(c);var l=cc.instantiate(t.paginationItemPrefab),u=l.getComponent("PaginationItem");l.parent=t.paginationNode,u.init("<",e-1),u.enable(),t.listPagination.push(l);for(var d=0;d<i;d++){var m=cc.instantiate(t.paginationItemPrefab),p=m.getComponent("PaginationItem");m.parent=t.paginationNode,p.init(d+1,d),d===e?p.disable():p.enable(),t.listPagination.push(m)}var f=cc.instantiate(t.paginationItemPrefab),g=f.getComponent("PaginationItem");f.parent=t.paginationNode,g.init(">",e+1),g.enable(),t.listPagination.push(f);var _=cc.instantiate(t.paginationItemPrefab),S=_.getComponent("PaginationItem");_.parent=t.paginationNode,S.init(">>",i-1),S.enable(),t.listPagination.push(_);var C=t;for(var N in t.listPagination){var E=t.listPagination[N].getComponent("PaginationItem").pageOffButtonNode;E.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();t<0&&(t=0),t>i-1&&(t=i-1),C.getPage(t)},E)}}():this.getData()},reset:function(){this.data=null,this.isGetData=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.contentNode.active=!1},showListNode:function(){this.loadingNode.active=!1,this.contentNode.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil"}],InfoSercurityAccount:[function(t,e,i){"use strict";cc._RF.push(e,"70a19vbU5dOepat6f4YMdU6","InfoSercurityAccount");var o=t("./account/InfoSercurityActivePhone"),n=t("./account/InfoSercurityUpdate"),s=t("./account/InfoSercurityInfo");cc.Class({extends:cc.Component,properties:{InfoSercurityActivePhone:o,InfoSercurityUpdate:n,InfoSercurityInfo:s},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.InfoSercurityActivePhone.init(t),this.InfoSercurityUpdate.init(t),this.InfoSercurityInfo.init(t)},onLoad:function(){},onEnable:function(){this.GameCenter.getUser().phone?this.showInfoNode():this.showUpdateNode()},showUpdateNode:function(){this.hideAll(),this.InfoSercurityUpdate.node.active=!0},showInfoNode:function(){this.hideAll(),this.InfoSercurityInfo.node.active=!0},showActivePhone:function(){this.hideAll(),this.InfoSercurityActivePhone.node.active=!0},hideAll:function(){this.InfoSercurityActivePhone.node.active=!1,this.InfoSercurityUpdate.node.active=!1,this.InfoSercurityInfo.node.active=!1}}),cc._RF.pop()},{"./account/InfoSercurityActivePhone":"InfoSercurityActivePhone","./account/InfoSercurityInfo":"InfoSercurityInfo","./account/InfoSercurityUpdate":"InfoSercurityUpdate"}],InfoSercurityActivePhone:[function(t,e,i){"use strict";cc._RF.push(e,"a6309Ln815FYYudvPAKQ8Jw","InfoSercurityActivePhone");var o=t("../../../../../util/BrowserUtil"),n=t("../../../../../helper/Constant"),s=t("../../../../../helper/Message");cc.Class({extends:cc.Component,properties:{usernameLabel:cc.Label,otpEditBox:cc.EditBox,otpRichText:cc.RichText},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.GameInfo=t.GameInfo,this.InfoSercurityAccount=this.GameInfo.InfoSercurity.InfoSercurityAccount},onLoad:function(){this.editboxs=[this.otpEditBox]},onEnable:function(){this.otpEditBox.string="",this.initData(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===n.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ESC_KEY?(this.GameCenterUI.showGameNode(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getUser();this.usernameLabel.string=t.username;var e=this.GameCenter.getGeneralConfig();if(e){var i=e.OTP;if(i){var o=i.content,n=i.service_number,a=String.format(s.OTP_ACTIVE_ACCOUNT,o,n);this.otpRichText.string=a}}},onBackClick:function(){this.GameCenter.Audio.playClick(),this.InfoSercurityAccount.showInfoNode()},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.otpEditBox.string;this.checkAllEditboxNotEmpty()?(this.GameCenter.showProcessingNode(),this.updateOtp(t)):this.GameCenter.showDialogMessage(s.UPDATE_INFO,s.MISSING_INFO)},updateOtp:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),otp:t};this.GameCenter.api.verifyOtp(i,function(t){var i=e.GameCenter.getUser();i.status_value=1,i.invite_code=t.data,e.GameCenter.hideProcessingNode(),e.InfoSercurityAccount.showInfoNode()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(s.UPDATE_INFO,t.msg)})},onGetOtpClick:function(){var t=this,e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.showProcessingNode(),this.GameCenter.api.sendOtp(e,function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.UPDATE_INFO,e.msg)},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.UPDATE_INFO,e.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0}}),cc._RF.pop()},{"../../../../../helper/Constant":"Constant","../../../../../helper/Message":"Message","../../../../../util/BrowserUtil":"BrowserUtil"}],InfoSercurityInfo:[function(t,e,i){"use strict";cc._RF.push(e,"445811BcK5Evbr8zRYJAeIw","InfoSercurityInfo");var o=t("../../../../../util/FormatUtil"),n=t("../../../../../helper/Message"),s=t("../../../../../helper/Constant");cc.Class({extends:cc.Component,properties:{usernameLabel:cc.Label,emailLabel:cc.Label,phoneLabel:cc.Label,notActiveEmailNode:cc.Node,activeEmailNode:cc.Node,emailEditBox:cc.EditBox,changeEmailNode:cc.Node,buttonEmailNode:cc.Node,notActivePhoneNode:cc.Node,activePhoneNode:cc.Node,phoneEditBox:cc.EditBox,changePhoneNode:cc.Node,buttonPhoneNode:cc.Node,internationPhoneLabel:cc.Label,internationPhoneScrollView:cc.ScrollView,internationPhoneNumberItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameInfo=t.GameInfo,this.GameInfo=t.GameInfo,this.InfoSercurityAccount=this.GameInfo.InfoSercurity.InfoSercurityAccount},onLoad:function(){},onEnable:function(){this.clear(),this.initData(),this.initPhoneInternation()},initData:function(){var t=this.GameCenter.getUser(),e=t.status_value;this.usernameLabel.string=t.username||"",this.emailLabel.string=t.email||"",this.phoneLabel.string="+"+t.phone||"",1==e?(this.notActivePhoneNode.active=!1,this.activePhoneNode.active=!0):(this.notActivePhoneNode.active=!0,this.activePhoneNode.active=!1),this.showButtonEmail(),this.showButtonPhone()},onChangeEmailClick:function(){this.GameCenter.Audio.playClick(),this.showChangeEmail()},onCancelChangeEmailClick:function(){this.GameCenter.Audio.playClick(),this.showButtonEmail()},onUpdateEmailClick:function(){this.GameCenter.Audio.playClick();var t=this.emailEditBox.string;""!==t?o.validateEmail(t)?(this.GameCenter.showProcessingNode(),this.updateEmail(t)):this.GameCenter.showDialogMessage(n.UPDATE_INFO,n.FORMAT_EMAIL_NOT_CORRECT):this.GameCenter.showDialogMessage(n.UPDATE_INFO,n.MISSING_INFO)},initPhoneInternation:function(){this.internationPhoneScrollView.content.removeAllChildren(!0);for(var t=s.LIST_INTERNATION_PHONE_NUMBER,e=0,i=t.length;e<i;e++){var o=cc.instantiate(this.internationPhoneNumberItemPrefab);o.getComponent("InternationalPhoneItem").init(this,t[e],e),this.internationPhoneScrollView.content.addChild(o),0===e&&o.getComponent("InternationalPhoneItem").onClick()}},onItemClick:function(t){this.interPhoneNumber=t.replace("+",""),this.internationPhoneLabel.string=t,this.internationPhoneScrollView.node.active=!1},onSelectInternationClick:function(){this.internationPhoneScrollView.node.active=!this.internationPhoneScrollView.node.active},updateEmail:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),email:t};this.GameCenter.api.update(i,function(i){e.GameCenter.getUser().email=t,e.emailLabel.string=t,e.GameCenter.hideProcessingNode(),e.showButtonEmail()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.UPDATE_INFO,t.msg)})},onChangePhoneClick:function(){this.GameCenter.Audio.playClick(),this.showChangePhone()},onCancelChangePhoneClick:function(){this.GameCenter.Audio.playClick(),this.showButtonPhone()},onUpdatePhoneClick:function(){this.GameCenter.Audio.playClick();var t=this.interPhoneNumber+o.convertPhoneNumber(this.phoneEditBox.string);""!==t?o.checkPhoneValid(t)?(this.GameCenter.showProcessingNode(),this.updatePhone(t)):this.GameCenter.showDialogMessage(n.UPDATE_INFO,n.FORMAT_PHONE_NOT_CORRECT):this.GameCenter.showDialogMessage(n.UPDATE_INFO,n.MISSING_INFO)},updatePhone:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),phone:t};this.GameCenter.api.update(i,function(i){e.GameCenter.getUser().phone=t,e.phoneLabel.string="+"+t,e.GameCenter.hideProcessingNode(),e.showButtonPhone()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.UPDATE_INFO,t.msg)})},onActivePhoneClick:function(){this.GameCenter.Audio.playClick(),this.InfoSercurityAccount.showActivePhone()},showChangeEmail:function(){this.changeEmailNode.active=!0,this.buttonEmailNode.active=!1},showButtonEmail:function(){this.changeEmailNode.active=!1,this.buttonEmailNode.active=!0},showChangePhone:function(){this.changePhoneNode.active=!0,this.buttonPhoneNode.active=!1},showButtonPhone:function(){this.changePhoneNode.active=!1,this.buttonPhoneNode.active=!0},clear:function(){this.emailEditBox.string="",this.phoneEditBox.string=""}}),cc._RF.pop()},{"../../../../../helper/Constant":"Constant","../../../../../helper/Message":"Message","../../../../../util/FormatUtil":"FormatUtil"}],InfoSercurityLogin:[function(t,e,i){"use strict";cc._RF.push(e,"975fc0dnftDuKXaCG+nmlM+","InfoSercurityLogin");var o=t("../../../../helper/Message"),n=t("../../../../helper/Constant");cc.Class({extends:cc.Component,properties:{statusLabel:cc.Label,syntaxSMSRichText:cc.RichText,otpEditbox:cc.EditBox,successButtonNode:cc.Node,cancelButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.initData()},initData:function(){var t=this.GameCenter.getUser();t&&(t.secure_login===n.SECURITY_LOGIN?(this.statusLabel.string="\u0110\xe3 k\xedch ho\u1ea1t",this.successButtonNode.active=!1,this.cancelButtonNode.active=!0):(this.statusLabel.string="Ch\u01b0a k\xedch ho\u1ea1t",this.successButtonNode.active=!0,this.cancelButtonNode.active=!1))},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},onSendVerifyLoginClick:function(){this.GameCenter.Audio.playClick();var t=this.otpEditbox.string;""===t?this.GameCenter.showDialogMessage(o.OTP_LOGIN_TITLE,o.MISSING_INFO):this.verifyLogin(t)},verifyLogin:function(t){var e=this,i=this.GameCenter.getUser().secure_login===n.SECURITY_LOGIN?n.SECURITY_LOGIN_STATUS_CANCEL:n.SECURITY_LOGIN_STATUS_CHOSE,s={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),otp:t,status:i};this.GameCenter.showProcessingNode(),this.GameCenter.api.getOTPLoginSecurity(s,function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.OTP_LOGIN_TITLE,t.msg),e.GameCenter.getUser().secure_login=i,e.initData(),e.clear()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.OTP_LOGIN_TITLE,t.msg),e.clear()})},clear:function(){this.otpEditbox.string=""}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message"}],InfoSercurityUpdate:[function(t,e,i){"use strict";cc._RF.push(e,"3944ddtFctK55vx1M8Hdjks","InfoSercurityUpdate");var o=t("../../../../../util/BrowserUtil"),n=t("../../../../../util/FormatUtil"),s=t("../../../../../helper/Constant"),a=t("../../../../../helper/Message");cc.Class({extends:cc.Component,properties:{usernameLabel:cc.Label,emailEditBox:cc.EditBox,phoneEditBox:cc.EditBox,internationPhoneLabel:cc.Label,internationPhoneScrollView:cc.ScrollView,internationPhoneNumberItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.GameInfo=t.GameInfo,this.InfoSercurityAccount=this.GameInfo.InfoSercurity.InfoSercurityAccount},onLoad:function(){this.editboxs=[this.emailEditBox,this.phoneEditBox]},onEnable:function(){this.initData(),this.initPhoneInternation(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===s.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ESC_KEY?(this.GameCenterUI.showGameNode(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getUser();this.usernameLabel.string=t.username,this.phoneEditBox.string="",this.emailEditBox.string=""},initPhoneInternation:function(){this.internationPhoneScrollView.content.removeAllChildren(!0);for(var t=s.LIST_INTERNATION_PHONE_NUMBER,e=0,i=t.length;e<i;e++){var o=cc.instantiate(this.internationPhoneNumberItemPrefab);o.getComponent("InternationalPhoneItem").init(this,t[e],e),this.internationPhoneScrollView.content.addChild(o),0===e&&o.getComponent("InternationalPhoneItem").onClick()}},onItemClick:function(t){this.interPhoneNumber=t.replace("+",""),this.internationPhoneLabel.string=t,this.internationPhoneScrollView.node.active=!1},onSelectInternationClick:function(){this.internationPhoneScrollView.node.active=!this.internationPhoneScrollView.node.active},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.emailEditBox.string,e=this.interPhoneNumber+n.convertPhoneNumber(this.phoneEditBox.string);this.checkAllEditboxNotEmpty()?n.checkPhoneValid(e)?n.validateEmail(t)?(this.GameCenter.showProcessingNode(),this.updateInfo(t,e)):this.GameCenter.showDialogMessage(a.UPDATE_INFO,a.FORMAT_EMAIL_NOT_CORRECT):this.GameCenter.showDialogMessage(a.UPDATE_INFO,a.FORMAT_PHONE_NOT_CORRECT):this.GameCenter.showDialogMessage(a.UPDATE_INFO,a.MISSING_INFO)},updateInfo:function(t,e,i,o){var n=this,s={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),email:t,phone:e};this.GameCenter.api.update(s,function(i){var o=n.GameCenter.getUser();o.email=t,o.phone=e,n.GameCenter.hideProcessingNode(),n.InfoSercurityAccount.showInfoNode()},function(t){n.GameCenter.hideProcessingNode(),n.GameCenter.showDialogMessage(a.UPDATE_INFO,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0}}),cc._RF.pop()},{"../../../../../helper/Constant":"Constant","../../../../../helper/Message":"Message","../../../../../util/BrowserUtil":"BrowserUtil","../../../../../util/FormatUtil":"FormatUtil"}],InfoSercurity:[function(t,e,i){"use strict";cc._RF.push(e,"bfcd8qT10NN64MFgCsm7cQJ","InfoSercurity");var o=t("./sercutiry/InfoSercurityAccount"),n=t("./sercutiry/InfoSercurityLogin"),s=t("../../../helper/Constant"),a=t("./sercutiry/InfoGame");cc.Class({extends:cc.Component,properties:{sercurityAccountButtonOnNode:cc.Node,sercurityAccountButtonOffNode:cc.Node,sercurityLoginButtonOnNode:cc.Node,sercurityLoginButtonOffNode:cc.Node,otpAppButtonOnNode:cc.Node,otpAppButtonOffNode:cc.Node,gameOnButtonNode:cc.Node,gameOffButtonNode:cc.Node,sercurityAccountContentNode:cc.Node,sercurityLoginContentNode:cc.Node,otpContentNode:cc.Node,gameContentNode:cc.Node,InfoSercurityAccount:o,InfoSercurityLogin:n,InfoGame:a},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.InfoSercurityAccount.init(t),this.InfoSercurityLogin.init(t),this.InfoGame.init(t)},onLoad:function(){},onEnable:function(){this.showSercurityAccount()},getOtpAppClick:function(){this.GameCenter.showProcessingNode();this.GameCenter.sendRequest.sendToZone(s.REQUEST_GET_OTP,{type:1})},onSercurityAccountClick:function(){this.GameCenter.Audio.playClick(),this.showSercurityAccount()},onSercurityLoginClick:function(){this.GameCenter.Audio.playClick(),this.showSercurityLogin()},onOtpAppClick:function(){this.GameCenter.Audio.playClick(),this.showOtpApp()},showSercurityAccount:function(){this.initBeforeClick(),this.sercurityAccountButtonOnNode.active=!0,this.sercurityAccountButtonOffNode.active=!1,this.sercurityAccountContentNode.active=!0},showSercurityLogin:function(){this.initBeforeClick(),this.sercurityLoginButtonOnNode.active=!0,this.sercurityLoginButtonOffNode.active=!1,this.sercurityLoginContentNode.active=!0},onSecurityGameClick:function(){this.GameCenter.Audio.playClick(),this.showGame()},showOtpApp:function(){this.initBeforeClick(),this.otpAppButtonOnNode.active=!0,this.otpAppButtonOffNode.active=!1,this.otpContentNode.active=!0},onTelegramClick:function(){this.GameCenter.Audio.playClick(),cc.sys.openURL(s.TELEGRAM_BOT)},showGame:function(){this.initBeforeClick(),this.gameOnButtonNode.active=!0,this.gameOffButtonNode.active=!1,this.gameContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.sercurityAccountButtonOffNode.active=!0,this.sercurityLoginButtonOffNode.active=!0,this.otpAppButtonOffNode.active=!0,this.gameOffButtonNode.active=!0},hideAllOnButtons:function(){this.sercurityAccountButtonOnNode.active=!1,this.sercurityLoginButtonOnNode.active=!1,this.otpAppButtonOnNode.active=!1,this.gameOnButtonNode.active=!1},hideAllContents:function(){this.sercurityAccountContentNode.active=!1,this.sercurityLoginContentNode.active=!1,this.otpContentNode.active=!1,this.gameContentNode.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","./sercutiry/InfoGame":"InfoGame","./sercutiry/InfoSercurityAccount":"InfoSercurityAccount","./sercutiry/InfoSercurityLogin":"InfoSercurityLogin"}],InserestInviteFriend:[function(t,e,i){"use strict";cc._RF.push(e,"47be8zAIORJ/JtQN0TXkTFS","InserestInviteFriend");t("../../../../util/FormatUtil"),t("../../../../util/Util");cc.Class({extends:cc.Component,properties:{},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo},onLoad:function(){},onEnable:function(){}}),cc._RF.pop()},{"../../../../util/FormatUtil":"FormatUtil","../../../../util/Util":"Util"}],InternationalPhoneItem:[function(t,e,i){"use strict";cc._RF.push(e,"8b4f5NskHZFzbnlaVHLmhI/","InternationalPhoneItem"),cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,interPhoneNumberLabel:cc.Label,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e,i){this.controller=t,this.interPhoneNumber=e,this.interPhoneNumberLabel.string=this.interPhoneNumber;var o=i%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=o},onClick:function(){this.controller.onItemClick(this.interPhoneNumber)}}),cc._RF.pop()},{}],InviteFriendItem:[function(t,e,i){"use strict";cc._RF.push(e,"cc28bWe02xAZaJgERLnS26S","InviteFriendItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,nicknameLabel:cc.Label,receiveScoreLabel:cc.Label,sendScoreLabel:cc.Label,totalScoreLabel:cc.Label},init:function(t,e){t?(this.idLabel.string=e+1,this.nicknameLabel.string=t.nick_name,this.receiveScoreLabel.string=o.numberWithCommas(t.score_received),this.sendScoreLabel.string=o.numberWithCommas(t.score_sent),this.totalScoreLabel.string=o.numberWithCommas(t.total_score)):this.node.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],InviteFriend:[function(t,e,i){"use strict";cc._RF.push(e,"429a01c32dOFbakJ17N/be/","InviteFriend");var o=t("../../../util/FormatUtil"),n=(t("../../../util/Util"),t("../../../helper/Message")),s=t("./invite/RankInviteFriend"),a=t("./invite/AwardInviteFriend"),r=t("./invite/HistoryAwardInviteFriend"),c=t("./invite/HistoryInviteFriend"),h=t("./invite/InserestInviteFriend");cc.Class({extends:cc.Component,properties:{friendNicknameNode:cc.Node,friendNickNameLabel:cc.Label,codeFromFrendNode:cc.Node,codeInviteEditbox:cc.EditBox,myCodeInviteLabel:cc.Label,nonSecurityLabelNode:cc.Node,receiveScoreLabel:cc.Label,sendScoreLabel:cc.Label,totalScoreLabel:cc.Label,InserestInviteFriend:h,HistoryInviteFriend:c,AwardInviteFriend:a,HistoryAwardInviteFriend:r,RankInviteFriend:s},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.RankInviteFriend.init(t),this.AwardInviteFriend.init(t),this.HistoryInviteFriend.init(t),this.HistoryAwardInviteFriend.init(t),this.InserestInviteFriend.init(t)},onLoad:function(){},onEnable:function(){this.initContent(),this.loadInfo()},onDisable:function(){this.removeXhr()},initContent:function(){var t=this.GameCenter.getUser(),e=t.invite_code,i=t.friend_nickname;this.codeInviteEditbox.string="",this.totalScoreLabel.string=0,e?(this.nonSecurityLabelNode.active=!1,this.myCodeInviteLabel.node.active=!0,this.myCodeInviteLabel.string=e||""):(this.nonSecurityLabelNode.active=!0,this.myCodeInviteLabel.node.active=!1,this.GameCenterUI.showInsertestInviteFriendNode()),i?(this.friendNicknameNode.active=!0,this.codeFromFrendNode.active=!1,this.friendNickNameLabel.string=i):(this.friendNicknameNode.active=!1,this.codeFromFrendNode.active=!0)},initScore:function(t){this.totalScoreLabel.string=o.numberWithCommas(t)},onCopyClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getUser().invite_code;Clipboard.copy(t)},onSuccessClick:function(){this.GameCenter.Audio.playClick();var t=this.codeInviteEditbox.string;t?this.updateCode(t):this.GameCenter.showDialogMessage(n.INTIVE_TITLE,n.CODE_INVITE_FRIEND_NOT_EMPTY)},onAwardClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showAwardInviteFriendNode()},onRankClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showRankInviteFriemdNode()},onInterestClick:function(){this.GameCenter.Audio.playClick(),this.GameCenterUI.showInsertestInviteFriendNode()},loadInfo:function(){var t=this,e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.getInfoInviteFriend(e,function(e){var i=e.data;if(i&&i.total_score){var n=i.score_received||0,s=i.score_sent,a=i.total_score;t.receiveScoreLabel.string=o.numberWithCommas(n),t.sendScoreLabel.string=o.numberWithCommas(s),t.initScore(a),t.AwardInviteFriend.initScore(n)}else t.initScore(0),t.AwardInviteFriend.initScore(0)},function(t){})},updateCode:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),invite_code:t};this.GameCenter.showProcessingNode(),this.GameCenter.api.updateCodeInviteFriend(i,function(t){e.GameCenter.getUser().friend_nickname=t.data.friend_nickname,e.initContent(),e.GameCenter.hideProcessingNode()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(n.INTIVE_TITLE,t.msg)})},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util","./invite/AwardInviteFriend":"AwardInviteFriend","./invite/HistoryAwardInviteFriend":"HistoryAwardInviteFriend","./invite/HistoryInviteFriend":"HistoryInviteFriend","./invite/InserestInviteFriend":"InserestInviteFriend","./invite/RankInviteFriend":"RankInviteFriend"}],Invite:[function(t,e,i){"use strict";cc._RF.push(e,"ee5edSG6v5H8YwgQRnJ8Pnk","Invite");var o=t("../../helper/Constant");cc.Class({extends:cc.Component,init:function(t){this.GameCommon=t},properties:{},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},onCancelClick:function(){this.GameCommon.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCommon.Audio.playClick(),this.dialogForm.hideDialog(),this.GameCommon.sendRequest.send(o.REQUEST_INVITE)}}),cc._RF.pop()},{"../../helper/Constant":"Constant"}],JackpotConstant:[function(t,e,i){"use strict";cc._RF.push(e,"2603c/jpk1La53Rp2tu4cxy","JackpotConstant");e.exports={ADD_EVENT:"jackpot.ADD_EVENT",REMOVE_EVENT:"jackpot.REMOVE_EVENT",INFO:"INFO",BET_100:100,BET_1k:1e3,BET_10k:1e4,BET_VALUE:"jackpot_bet_value"},cc._RF.pop()},{}],JackpotEffect:[function(t,e,i){"use strict";cc._RF.push(e,"e8a1233kdpJUp/ZHOXRluJV","JackpotEffect");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{jackpotSkeleton:sp.Skeleton,balanceLabel:cc.Label},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutHide)},update:function(t){var e=this.currentMoney,i=parseInt(this.balance);if(e!==i){var n=e+this.increaseValue*t*60;this.increaseValue>0&&n>i?n=i:this.increaseValue<0&&n<i&&(n=i),this.currentMoney=n,this.balanceLabel.string=o.numberWithCommas(parseInt(n))}},show:function(t,e){this.clear(),this.node.active=!0,this.node.opacity=255,e?this.jackpotSkeleton.setAnimation(0,"xu",!0):this.jackpotSkeleton.setAnimation(0,"chip",!0),this.timeoutHide=setTimeout(function(){this.node.runAction(cc.sequence(cc.fadeOut(.25),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}.bind(this),1e3*n.JACKPOT_EFFECT_SHOW),this.balance=t,this.increaseValue=(t-this.currentMoney)/(60*n.JACKPOT_TIME_INCREASE),this.increaseValue<1&&this.increaseValue>0?this.increaseValue=1:this.increaseValue>-1&&this.increaseValue<0&&(this.increaseValue=-1)},clear:function(){this.currentMoney=0,this.balance=0,this.increaseValue=0,this.balanceLabel.string=0}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],JackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"303f08Y7ZJDhKr9CAb1WmZT","JackpotItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{moneyLabel:cc.Label,time:2.5},onLoad:function(){void 0===this.increaseValue&&this.setMoneyWithoutAnimation(0),this.numberUpdatePerSecond=15,this.timeCheckUpdate=0},update:function(t){if(this.timeCheckUpdate+=t,this.timeCheckUpdate>1/this.numberUpdatePerSecond){var e=this.currentMoney,i=parseInt(this.money);if(e!==i){var n=e+60*this.increaseValue/this.numberUpdatePerSecond;this.increaseValue>0&&n>i?n=i:this.increaseValue<0&&n<i&&(n=i),this.currentMoney=n,this.moneyLabel.string=" "+o.numberWithCommas(parseInt(n))+" "}this.timeCheckUpdate=0}},addMoney:function(t){void 0===this.money?this.setMoney(t):this.setMoney(this.money+t)},setMoney:function(t){0===this.currentMoney||void 0===this.currentMoney?this.setMoneyWithoutAnimation(t):(this.money=t,this.increaseValue=(t-this.currentMoney)/(60*this.time),this.increaseValue<1&&this.increaseValue>0?this.increaseValue=1:this.increaseValue>-1&&this.increaseValue<0&&(this.increaseValue=-1))},setMoneyWithStartNumberZero:function(t){void 0!==t&&(this.money=t,this.currentMoney||(this.currentMoney=t/100),this.increaseValue=t/(60*this.time),this.increaseValue<1&&this.increaseValue>0?this.increaseValue=1:this.increaseValue>-1&&this.increaseValue<0&&(this.increaseValue=-1))},addMoneyWithoutAnimation:function(t){this.setMoneyWithoutAnimation(this.money+t)},setMoneyWithoutAnimation:function(t){this.currentMoney=t,this.money=t,this.increaseValue=0,this.moneyLabel.string=" "+o.numberWithCommas(t)+" "},getMoney:function(){return this.money}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],Jackpot:[function(t,e,i){"use strict";cc._RF.push(e,"197d8ydttxKCruOYow6B6mM","Jackpot");var o=t("../../../base/BaseController"),n=t("../../../helper/Config"),s=t("../../../util/NodeUtil"),a=t("../MiniGameConstant"),r=t("../item/JackpotItem"),c=t("./JackpotConstant"),h=t("../item/MiniGameXPer");cc.Class({extends:o,properties:{button100OnNode:cc.Node,button100OffNode:cc.Node,button1kOnNode:cc.Node,button1kOffNode:cc.Node,button10kOnNode:cc.Node,button10kOffNode:cc.Node,content100Node:cc.Node,content1kNode:cc.Node,content10kNode:cc.Node,jackpot100MiniPoker:r,jackpot100MiniBaCay:r,jackpot100Diamond:r,jackpot100TrenDuoi:r,jackpot100BauCua:r,jackpot100Slot1:r,jackpot100Slot2:r,jackpot100Slot3:r,jackpot100Slot4:r,jackpot100Firefish:r,jackpot100Pirate:r,jackpot100Bom:r,jackpot100Wild:r,jackpot100Lottery:r,jackpot1kMiniPoker:r,jackpot1kMiniBaCay:r,jackpot1kDiamond:r,jackpot1kTrenDuoi:r,jackpot1kSlot1:r,jackpot1kSlot2:r,jackpot1kSlot3:r,jackpot1kSlot4:r,jackpot1kFirefish:r,jackpot1kPirate:r,jackpot1kBom:r,jackpot1kWild:r,jackpot10kMiniPoker:r,jackpot10kMiniBaCay:r,jackpot10kDiamond:r,jackpot10kTrenDuoi:r,jackpot10kSlot1:r,jackpot10kSlot2:r,jackpot10kSlot3:r,jackpot10kSlot4:r,jackpot10kFirefish:r,jackpot10kPirate:r,jackpot10kBom:r,jackpot10kWild:r,circleButtonNode:cc.Node,contentNode:cc.Node,xper100MiniPoker:h,xper100MiniBaCay:h,xper100Diamond:h,xper100TrenDuoi:h,xper100BauCua:h,xper100Slot1:h,xper100Slot2:h,xper100Slot3:h,xper100Slot4:h,xper100FireFish:h,xper100Pirate:h,xper100Bom:h,xper100Lottery:h,xper100Wild:h,xper1kMiniPoker:h,xper1kMiniBaCay:h,xper1kDiamond:h,xper1kTrenDuoi:h,xper1kSlot1:h,xper1kSlot2:h,xper1kSlot3:h,xper1kSlot4:h,xper1kFireFish:h,xper1kBom:h,xper1kPirate:h,xper1kWild:h,xper10kMiniPoker:h,xper10kMiniBaCay:h,xper10kDiamond:h,xper10kTrenDuoi:h,xper10kSlot1:h,xper10kSlot2:h,xper10kSlot3:h,xper10kSlot4:h,xper10kFireFish:h,xper10kBom:h,xper10kPirate:h,xper10kWild:h},init:function(t){this.controller=t},onLoad:function(){var t=this;this._super(),this.number=0,this.data=null,this.isShow=!0,this.isMove=!1,this.startPosition=null,this.positionX=this.node.x,this.positionY=this.node.y,this.node.zIndex=2,this.onTouchStart=function(e){t.isMove=!1,t.startPosition=t.node.getPosition()},this.onTouchMove=function(e){t.isMove=!0;var i=e.touch.getDelta(),o=t.node.x+i.x,s=t.node.y+i.y,a=n.CANVAS_WIDTH/2,r=-n.CANVAS_WIDTH/2,c=n.GAME_HEIGHT/2,h=-(n.CANVAS_HEIGHT-n.GAME_HEIGHT/2);o>a?o=a:o<r&&(o=r),s>c?s=c:s<h&&(s=h),t.node.x=o,t.node.y=s},this.onTouchEnd=function(e){t.isMove&&t.savePosition();var i=t.node.getPosition();s.getDistanceTwoNode(t.startPosition,i)<10&&t.onJackpotButtonClick()},this.onMouseEnter=function(t){t.stopPropagation()}},update:function(t){0===this.number&&(this.initData(),this.addEventMove()),++this.number},onEnable:function(){this.sendRequest.sendNoPrefixToZone(c.ADD_EVENT)},onDestroy:function(){this.sendRequest.sendNoPrefixToZone(c.REMOVE_EVENT)},addEventMove:function(){this.circleButtonNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleButtonNode),this.circleButtonNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleButtonNode),this.circleButtonNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleButtonNode)},initData:function(){switch(this.initSaveData(),this.showContent(this.isShow),this.node.setPosition(this.positionX,this.positionY),this.getTempData()[c.BET_VALUE]){case c.BET_100:this.onButton100Click();break;case c.BET_1k:this.onButton1kClick();break;case c.BET_10k:this.onButton10kClick()}},initSaveData:function(){var t=cc.sys.localStorage.getItem(a.JACKPOT_IS_SHOW);"true"===t||!0===t?this.isShow=!0:"false"!==t&&!1!==t||(this.isShow=!1);var e=this.getTempData()[a.JACKPOT_POSITION];if(e){this.positionX=e.x,this.positionY=e.y;var i=cc.director.getWinSize();this.positionX>i.width/2?this.positionX=i.width/2:this.positionX<-i.width/2&&(this.positionX=-i.width/2),this.positionY>i.height/2?this.positionY=i.height/2:this.positionY<-i.height/2&&(this.positionY=-i.height/2)}},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[a.JACKPOT_POSITION]=t},onJackpotButtonClick:function(){this.showContentWithAnimation(!this.isShow)},showContent:function(t){this.isShow=t,this.contentNode.active=t,cc.sys.localStorage.setItem(a.JACKPOT_IS_SHOW,this.isShow)},showContentWithAnimation:function(t){this.contentNode.stopAllActions(),this.isShow=t,cc.sys.localStorage.setItem(a.JACKPOT_IS_SHOW,this.isShow),t?(this.contentNode.active=!0,this.contentNode.scaleX=0,this.initDataByBet(),this.contentNode.runAction(cc.scaleTo(n.JACKPOT_TIME_SHOW,1,this.node.scaleY))):this.contentNode.runAction(cc.sequence(cc.scaleTo(n.JACKPOT_TIME_SHOW,0,this.node.scaleY),cc.callFunc(function(){this.contentNode.active=!1},this)))},onMiniBaCayClick:function(){this.controller.MiniGame.MiniBaCay.onMiniBaCayClick()},onMiniPokerClick:function(){this.controller.MiniGame.MiniPoker.onMiniPokerClick()},onDiamondClick:function(){this.controller.MiniGame.Diamond.onDiamondClick()},onPirateClick:function(){this.controller.MiniGame.Pirate.onPirateClick()},onBomClick:function(){this.controller.MiniGame.Bom.onBomClick()},onTrenDuoiClick:function(){this.controller.MiniGame.TrenDuoi.onTrenDuoiClick()},onBauCuaClick:function(){this.controller.MiniGame.BauCua.onBauCuaClick()},onWildClick:function(){this.controller.MiniGame.Wild.onWildClick()},onLongVuongClick:function(){},onSlot1Click:function(){},onSlot2Click:function(){},onSlot3Click:function(){},onButton100Click:function(){this.initBeforeClick(),this.button100OnNode.active=!0,this.button100OffNode.active=!1,this.content100Node.active=!0,this.initDataByBet(),this.initXJackpot(),this.getTempData()[c.BET_VALUE]=c.BET_100},onButton1kClick:function(){this.initBeforeClick(),this.button1kOnNode.active=!0,this.button1kOffNode.active=!1,this.content1kNode.active=!0,this.initDataByBet(),this.initXJackpot(),this.getTempData()[c.BET_VALUE]=c.BET_1k},onButton10kClick:function(){this.initBeforeClick(),this.button10kOnNode.active=!0,this.button10kOffNode.active=!1,this.content10kNode.active=!0,this.initDataByBet(),this.initXJackpot(),this.getTempData()[c.BET_VALUE]=c.BET_10k},initBeforeClick:function(){this.showAllOffButtons(),this.hideAllOnButtons(),this.hideAllContents()},showAllOffButtons:function(){this.button100OffNode.active=!0,this.button1kOffNode.active=!0,this.button10kOffNode.active=!0},hideAllOnButtons:function(){this.button100OnNode.active=!1,this.button1kOnNode.active=!1,this.button10kOnNode.active=!1},hideAllContents:function(){this.content100Node.active=!1,this.content1kNode.active=!1,this.content10kNode.active=!1},isJackpot100:function(){return this.button100OnNode.active},isJackpot1k:function(){return this.button1kOnNode.active},isJackpot10k:function(){return this.button10kOnNode.active},handleRequest:function(t){var e=t.game_cmd,i=t.game_data;t.game_msg;switch(e){case c.INFO:this.handleInfo(i)}},handleInfo:function(t){this.data=t,this.contentNode.active&&(this.initDataByBet(),this.initXJackpot())},initDataByBet:function(){if(this.data){var t=0,e=null,i=null,o=null,n=null,s=null,a=null,r=null,c=null,h=null,l=null,u=null,d=null,m=null,p=null;this.isJackpot100()?(t=0,e=this.jackpot100MiniPoker,i=this.jackpot100MiniBaCay,o=this.jackpot100Diamond,n=this.jackpot100TrenDuoi,s=this.jackpot100BauCua,a=this.jackpot100Slot1,r=this.jackpot100Slot2,c=this.jackpot100Slot3,h=this.jackpot100Slot4,l=this.jackpot100Firefish,u=this.jackpot100Pirate,d=this.jackpot100Bom,m=this.jackpot100Lottery,p=this.jackpot100Wild):this.isJackpot1k()?(t=1,e=this.jackpot1kMiniPoker,i=this.jackpot1kMiniBaCay,o=this.jackpot1kDiamond,n=this.jackpot1kTrenDuoi,a=this.jackpot1kSlot1,r=this.jackpot1kSlot2,c=this.jackpot1kSlot3,h=this.jackpot1kSlot4,l=this.jackpot1kFirefish,u=this.jackpot1kPirate,d=this.jackpot1kBom,p=this.jackpot1kWild):this.isJackpot10k()&&(t=2,e=this.jackpot10kMiniPoker,i=this.jackpot10kMiniBaCay,o=this.jackpot10kDiamond,n=this.jackpot10kTrenDuoi,a=this.jackpot10kSlot1,r=this.jackpot10kSlot2,c=this.jackpot10kSlot3,h=this.jackpot10kSlot4,l=this.jackpot10kFirefish,u=this.jackpot10kPirate,d=this.jackpot10kBom,p=this.jackpot10kWild);var f=this.data.mini_3cay?this.data.mini_3cay[t]:null,g=this.data.mini_poker?this.data.mini_poker[t]:null,_=this.data.diamond?this.data.diamond[t]:null,S=this.data.hilo?this.data.hilo[t+3]:null,C=this.data.hooheyhow?this.data.hooheyhow[t]:null,N=this.data.modern_slot?this.data.modern_slot[t]:null,E=this.data.one001?this.data.one001[t]:null,T=this.data.dragon?this.data.dragon[t]:null,I=this.data.classic1?this.data.classic1[t]:null,v=this.data.lv?this.data.lv[t]:null,y=this.data.diamond2?this.data.diamond2[t]:null,B=this.data.bom?this.data.bom[t]:null,L=this.data.lottery?this.data.lottery[t]:null,R=this.data.wild?this.data.wild[t]:null;this.contentNode.active?(e.setMoney(g),i.setMoney(f),o.setMoney(_),n.setMoney(S),a.setMoney(N),r.setMoney(T),c.setMoney(E),h.setMoney(I),l.setMoney(v),u.setMoney(y),d.setMoney(B),p.setMoney(R),s&&s.setMoney(C),m&&m.setMoney(L)):(e.setMoneyWithoutAnimation(g),i.setMoneyWithoutAnimation(f),o.setMoneyWithoutAnimation(_),n.setMoneyWithoutAnimation(S),a.setMoneyWithoutAnimation(N),r.setMoneyWithoutAnimation(T),c.setMoneyWithoutAnimation(E),h.setMoneyWithoutAnimation(I),l.setMoneyWithoutAnimation(v),u.setMoneyWithoutAnimation(y),d.setMoneyWithoutAnimation(B),p.setMoneyWithoutAnimation(R),s&&s.setMoneyWithoutAnimation(C),m&&m.setMoneyWithoutAnimation(L));var A=[g,f,_,S,C,B,R,N,E,T,I,v,y,L];this.sortDESC(A);var M=this.getIndexByValue(A,g),b=this.getIndexByValue(A,f),P=this.getIndexByValue(A,_),O=this.getIndexByValue(A,S),D=this.getIndexByValue(A,N),F=this.getIndexByValue(A,T),k=this.getIndexByValue(A,E),G=this.getIndexByValue(A,I),w=this.getIndexByValue(A,v),U=this.getIndexByValue(A,y),H=this.getIndexByValue(A,B),x=this.getIndexByValue(A,R);if(C){var X=this.getIndexByValue(A,C);s.node.zIndex=X}if(L){var W=this.getIndexByValue(A,L);m.node.zIndex=W}e.node.zIndex=M,i.node.zIndex=b,o.node.zIndex=P,n.node.zIndex=O,a.node.zIndex=D,r.node.zIndex=F,c.node.zIndex=k,h.node.zIndex=G,l.node.zIndex=w,u.node.zIndex=U,d.node.zIndex=H,p.node.zIndex=x}},initXJackpot:function(){if(this.data){var t=this.data.mini_poker?this.data.mini_poker[3]:null,e=this.data.mini_3cay?this.data.mini_3cay[3]:null,i=this.data.diamond?this.data.diamond[3]:null,o=this.data.hooheyhow?this.data.hooheyhow[3]:null,n=this.data.hilo?this.data.hilo[6]:null,s=this.data.modern_slot?this.data.modern_slot[3]:null,a=this.data.one001?this.data.one001[3]:null,r=this.data.dragon?this.data.dragon[3]:null,c=this.data.classic1?this.data.classic1[3]:null,h=this.data.lv?this.data.lv[3]:null,l=this.data.diamond2?this.data.diamond2[3]:null,u=this.data.bom?this.data.bom[3]:null,d=this.data.lottery?this.data.lottery[3]:null,m=this.data.wild?this.data.wild[3]:null;this.initXJackpotMiniPoker(t),this.initXJackpotMini3Cay(e),this.initXJackpotDiamond(i),this.initXJackpotBauCua(o),this.initXJackpotTrenDuoi(n),this.initXJackpotSlot1(s),this.initXJackpotSlot2(r),this.initXJackpotSlot3(a),this.initXJackpotSlot4(c),this.initXJackpotFireFish(h),this.initXJackpotPirate(l),this.initXJackpotBom(u),this.initXJackpotLottery(d),this.initXJackpotWild(m)}},initXJackpotMiniPoker:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100MiniPoker.setXJackpot(e),this.xper1kMiniPoker.setXJackpot(i),this.xper10kMiniPoker.setXJackpot(o)}},initXJackpotMini3Cay:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100MiniBaCay.setXJackpot(e),this.xper1kMiniBaCay.setXJackpot(i),this.xper10kMiniBaCay.setXJackpot(o)}},initXJackpotDiamond:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Diamond.setXJackpot(e),this.xper1kDiamond.setXJackpot(i),this.xper10kDiamond.setXJackpot(o)}},initXJackpotPirate:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Pirate.setXJackpot(e),this.xper1kPirate.setXJackpot(i),this.xper10kPirate.setXJackpot(o)}},initXJackpotBom:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Bom.setXJackpot(e),this.xper1kBom.setXJackpot(i),this.xper10kBom.setXJackpot(o)}},initXJackpotWild:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Wild.setXJackpot(e),this.xper1kWild.setXJackpot(i),this.xper10kWild.setXJackpot(o)}},initXJackpotBauCua:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100BauCua.setXJackpot(e),this.xper1kBauCua.setXJackpot(i),this.xper10kBauCua.setXJackpot(o)}},initXJackpotTrenDuoi:function(t){if(t){var e=t[2]?t[2]:1,i=t[3]?t[3]:1,o=t[4]?t[4]:1;this.xper100TrenDuoi.setXJackpot(e),this.xper1kTrenDuoi.setXJackpot(i),this.xper10kTrenDuoi.setXJackpot(o)}},initXJackpotSlot1:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Slot1.setXJackpot(e),this.xper1kSlot1.setXJackpot(i),this.xper10kSlot1.setXJackpot(o)}},initXJackpotSlot2:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Slot2.setXJackpot(e),this.xper1kSlot2.setXJackpot(i),this.xper10kSlot2.setXJackpot(o)}},initXJackpotSlot3:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Slot3.setXJackpot(e),this.xper1kSlot3.setXJackpot(i),this.xper10kSlot3.setXJackpot(o)}},initXJackpotSlot4:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[1]:1,o=t[2]?t[2]:1;this.xper100Slot4.setXJackpot(e),this.xper1kSlot4.setXJackpot(i),this.xper10kSlot4.setXJackpot(o)}},initXJackpotLottery:function(t){if(t){var e=t[0]?t[0]:1;this.xper100Lottery.setXJackpot(e)}},initXJackpotFireFish:function(t){if(t){var e=t[0]?t[0]:1,i=t[1]?t[2]:1,o=t[1]?t[2]:1;this.xper100FireFish.setXJackpot(e),this.xper1kFireFish.setXJackpot(i),this.xper10kFireFish.setXJackpot(o)}},sortDESC:function(t){t.sort(function(t,e){return!(!t||!e)&&e-t})},getIndexByValue:function(t,e){for(var i=0,o=t.length;i<o;i++)if(e===t[i])return i;return 0}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../util/NodeUtil":"NodeUtil","../MiniGameConstant":"MiniGameConstant","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./JackpotConstant":"JackpotConstant"}],JoinRoomError:[function(t,e,i){"use strict";cc._RF.push(e,"5c21b48kIFB7ZQ0m9iaKJrs","JoinRoomError"),cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},initMessage:function(t){this.messageLabel.string=t},onSuccessClick:function(){this.dialogForm.hideDialog(),this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showSercurity(),this.GameCenter.GameInfo.InfoSercurity.showGame(),this.GameCenter.BuyInForm.node.active&&this.GameCenterUI.hideBuyInFormNode()}}),cc._RF.pop()},{}],LiengBetState:[function(t,e,i){"use strict";cc._RF.push(e,"504cedvmoxEiKxNk+x68Qff","LiengBetState");e.exports={NO:"NO",CHECK:"CHECK",CALL:"CALL",RAISE:"RAISE",ALL_IN:"ALL_IN",FOLD:"FOLD"},cc._RF.pop()},{}],LiengCard:[function(t,e,i){"use strict";cc._RF.push(e,"81d80OZpS9HtqPue/m4EBZ/","LiengCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;i++,this.point=e,this.suit=i,this.point=14===this.point?1:this.point,Object.defineProperties(this,{point:{value:this.point,writable:!1},suit:{value:this.suit,writable:!1},id:{value:13*(this.suit-1)+(this.point-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],LiengConfig:[function(t,e,i){"use strict";cc._RF.push(e,"abe14Gm1ORE4rQ4r5FNjSQO","LiengConfig");e.exports={NUMBER_PLAYERS:6,NUMBER_CARDS_EACH_PLAYERS:3,SCALE_CARD:.7,DISTANCE_TWO_CARDS:45,TIME_SHOW_CARDS:.5,POSITION_CENTER_MONEY_X:0,POSITION_CENTER_MONEY_Y:75,TIME_MOVE_BALANCE_CENTER:.5,POSITION_PLAYER_SUM_X:145,POSITION_PLAYER_SUM_Y:-65},cc._RF.pop()},{}],LiengConstant:[function(t,e,i){"use strict";cc._RF.push(e,"590864asjJG4rtghkS2aMYn","LiengConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",PLAYER_PLAY:"PLAYER_PLAY",PLAYER_BET:"PLAYER_BET",BUY_IN:"BUY_IN",RESULT:"RESULT",BET:"BET",FOLD:"FOLD",CHECK:"CHECK",FIRST_BET:"FIRST_BET",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER",REQUEST_CHECK:"REQUEST_CHECK",REQUEST_ALL_IN:"REQUEST_ALL_IN",REQUEST_CALL:"REQUEST_CALL",REQUEST_FOLD:"REQUEST_FOLD",REQUEST_RAISE:"REQUEST_RAISE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_IN:"REQUEST_BUY_IN"},cc._RF.pop()},{}],LiengGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"0b12aPksulKBowPoi3nIZsI","LiengGroupCardsType");e.exports={BAI_CAO:"BAI_CAO",BO_DOI:"BO_DOI",LIENG:"LIENG",SAP:"SAP"},cc._RF.pop()},{}],LiengHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"595ccJj4zxCAoNW6leFMjmr","LiengHandlerEffect");var o=t("./LiengBetState"),n=t("./LiengConfig"),s=t("../../helper/Message"),a={init:function(t){this.Lieng=t,this.LiengUI=t.LiengUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.listPlayers[e].LiengPlayer.showCards(t,!0):this.listPlayers[e].LiengPlayer.showBackCards(!0)},startGame:function(t){var e=(t.data.playing_player||t.data).user_id,i=t.data.min_first_bet,o=t.data.max_first_bet,n=this.Lieng.getPlayerByUserId(e);n&&(n.isItMe&&(this.GameCommon.setMinMaxBetFormAndShow(i,o),this.LiengUI.showRaiseButton()),this.Lieng.startCountDownPlayer(n,t.time_remain,t.time)),this.LiengUI.showTotalChip(0)},handlePlayingPlayer:function(t){var e=t.data.playing_player||t.data,i=e.user_id,o=e.balance,n=e.min_bet,s=this.Lieng.getPlayerByUserId(i);s&&(s.isItMe?(this.displayButtons(o,n),n>0?this.GameCommon.setMinMaxBetForm(n,o):this.GameCommon.setMinMaxBetForm(this.Lieng.minBet,o)):this.LiengUI.hideAllButtons(),this.Lieng.startCountDownPlayer(s,t.time_remain,t.time))},handleBetAllPlayers:function(t){var e=t.data.players;for(var i in e){var o=e[i].user_id,n=e[i].bet_amount,s=this.Lieng.getPlayerByUserId(o);s&&s.is_player&&(s.BasePlayer.showBetNode(n),s.BasePlayer.showChangeBalance(-n))}},showEffectCollectMoney:function(t){var e=t.data.bet_amount;for(var i in this.LiengUI.showTotalChip(e),this.listPlayers)this.listPlayers[i].LiengPlayer.moveToCenterTable()},showResult:function(t){var e=t.data.players;for(var i in e){var o=e[i].money_change,s=e[i].cards,a=e[i].user_id,r=e[i].group_cards,c=e[i].group_cards_name,h=this.Lieng.getPlayerByUserId(a);h&&(h.BasePlayer.showChangeBalance(o),h.LiengPlayer.isFold()||h.BasePlayer.showEffectByChangeBalance(o),c&&h.BasePlayer.showTextLight(c,!1,new cc.Vec2(n.POSITION_PLAYER_SUM_X,n.POSITION_PLAYER_SUM_Y)),r&&h.LiengPlayer.showEffectByGroupCardsType(r),h.isItMe||s&&h.LiengPlayer.showCards(s,!0),o>0&&this.showEffectWinCenterBalance(h),h.isItMe&&o>0&&this.GameCommon.Audio.playWin())}this.GameCommon.BetForm.hideDialog(!1),this.LiengUI.hideAllButtons()},showEffectWinCenterBalance:function(t){var e=cc.instantiate(this.Lieng.chipPrefab);e.parent=this.Lieng.gameNode,e.setPosition(n.POSITION_CENTER_MONEY_X,n.POSITION_CENTER_MONEY_Y),e.getComponent("Balance").init(this.Lieng.isMoneyType),e.runAction(cc.sequence(cc.moveTo(n.TIME_MOVE_BALANCE_CENTER,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.LiengUI.showTotalChip(0)},displayButtons:function(t,e){this.LiengUI.showAllButtons(),this.LiengUI.setAllInLabelValue(0),this.LiengUI.setCallLabelValue(0),e>0?(this.LiengUI.hideCheckButton(),this.LiengUI.setCallLabelValue(e)):this.LiengUI.hideCallButton(),e>=t?(this.LiengUI.hideCallButton(),this.LiengUI.hideRaiseButton(),this.LiengUI.hideCheckButton(),this.LiengUI.setAllInLabelValue(t)):this.LiengUI.setCallLabelValue(e)},resetPlayerNameAllPlayers:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].LiengPlayer.isFold()||this.listPlayers[t].BasePlayer.hideText()},resetPlayerNameAllPlayersCheck:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].BasePlayer.textLightLabel.string===s.LIENG_CHECK&&this.listPlayers[t].BasePlayer.hideText()},setPlayerStatusByBetState:function(t,e){e===o.CHECK?t.LiengPlayer.showEffectCheck():e===o.ALL_IN?t.LiengPlayer.showEffectAllIn():e===o.FOLD&&t.LiengPlayer.showEffectFold()},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1),this.listPlayers[t].is_home=!1},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutResult)}};e.exports=a,cc._RF.pop()},{"../../helper/Message":"Message","./LiengBetState":"LiengBetState","./LiengConfig":"LiengConfig"}],LiengHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"172bf0lEZ1MhoocoO4TA92+","LiengHandlerRequest");var o=t("./LiengConstant"),n=t("../../helper/Constant"),s={Lieng:null,init:function(t){this.Lieng=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Lieng.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.BALANCE:this.Lieng.initBalance(e)}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.COUNT_DOWN:this.Lieng.handleCountDown(e);break;case o.START_GAME:this.Lieng.handleStartGame(e);break;case o.PLAYER_PLAY:this.Lieng.handlePlayerPlay(e);break;case o.FIRST_BET:this.Lieng.handlePlayerFirstBet(e);break;case o.BET:this.Lieng.handlePlayerBet(e);break;case o.FOLD:this.Lieng.handlePlayerFold(e);break;case o.CHECK:this.Lieng.handlePlayerCheck(e);break;case o.BUY_IN:this.Lieng.handlePlayerBuyIn(e);break;case o.RESULT:this.Lieng.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.Lieng.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.Lieng.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.Lieng.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Lieng.showToast(e.msg)}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","./LiengConstant":"LiengConstant"}],LiengPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"9407fT405hDTLDt/ptYo/Kp","LiengPlayer");var o=t("./LiengConfig"),n=t("./LiengGroupCardsType"),s=t("./LiengCard"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},onLoad:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var n=new s(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.scale=o.SCALE_CARD,a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(n),e?(a.setPosition(0,0),r.revealWithAnimationFlipMoveScale(!0,o.TIME_SHOW_CARDS,o.DISTANCE_TWO_CARDS*i,0,o.SCALE_CARD)):(r.reveal(!0),a.setPosition(o.DISTANCE_TWO_CARDS*i,0))}},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);for(var e=o.NUMBER_CARDS_EACH_PLAYERS,i=0;i<e;i++){var n=cc.instantiate(this.cardBackPrefab);n.parent=this.cardsNode,n.scale=o.SCALE_CARD,t?(n.setPosition(0,0),n.runAction(cc.moveTo(o.TIME_SHOW_CARDS,o.DISTANCE_TWO_CARDS*i,0))):n.setPosition(o.DISTANCE_TWO_CARDS*i,0)}},moveToCenterTable:function(){var t=this.node.getComponent("BasePlayer").betNode;if(t.active){t.stopAllActions(),t.opacity=255;var e=o.POSITION_CENTER_MONEY_X-this.node.x,i=o.POSITION_CENTER_MONEY_Y-this.node.y;t.runAction(cc.sequence(cc.moveTo(o.TIME_MOVE_BALANCE_CENTER,e,i),cc.callFunc(function(){t.active=!1},this)))}},showEffectAllIn:function(){this.node.getComponent("BasePlayer").showTextLight(a.LIENG_ALL_IN)},showEffectCheck:function(){this.node.getComponent("BasePlayer").showTextLight(a.LIENG_CHECK)},showEffectCall:function(){this.node.getComponent("BasePlayer").showTextLight(a.LIENG_CALL)},showEffectFold:function(){this.fold=!0,this.node.getComponent("BasePlayer").showTextDark(a.LIENG_FOLD)},showEffectByGroupCardsType:function(t){var e="";switch(t){case n.SAP:e=a.LIENG_SAP;break;case n.LIENG:e=a.LIENG_LIENG;break;case n.BO_DOI:e=a.LIENG_BO_DOI}e&&this.node.getComponent("BasePlayer").showTextLight(e)},isFold:function(){return this.fold},reset:function(){this.fold=!1,this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./LiengCard":"LiengCard","./LiengConfig":"LiengConfig","./LiengGroupCardsType":"LiengGroupCardsType"}],LiengState:[function(t,e,i){"use strict";cc._RF.push(e,"4faf6EnXZpGo6f6GZMFNY3h","LiengState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",init:function(t){this.Lieng=t},setState:function(t){this.currentState=t,this.initShowBuyInButton()},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP,this.initShowBuyInButton()},setWaiting:function(){this.currentState=this.WAITING,this.initShowBuyInButton()},setPlaying:function(){this.currentState=this.PLAYING,this.initShowBuyInButton()},setFinish:function(){this.currentState=this.FINISH,this.initShowBuyInButton()},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH},initShowBuyInButton:function(){this.isStop()||this.isWaiting()?this.Lieng.GameCommon.showBuyInButton():this.Lieng.GameCommon.hideBuyInButton()}},cc._RF.pop()},{}],LiengUI:[function(t,e,i){"use strict";cc._RF.push(e,"3f5bdDxo5NAraBhSwS/0RYo","LiengUI");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{totalChipNode:cc.Node,totalChipLabel:cc.Label,callLabel:cc.Label,allInLabel:cc.Label,raiseButton:cc.Node,callButton:cc.Node,foldButton:cc.Node,allInButton:cc.Node,checkButton:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showTotalChip:function(t){this.valueTotalChip=t,this.totalChipNode.active=!0,this.totalChipLabel.string=t>0?o.numberWithCommas(t):0},hideTotalChip:function(){this.totalChipNode.active=!1},getTotalChip:function(){return this.valueTotalChip},setCallLabelValue:function(t){this.callLabel.string=t>0?String.format(n.LIENG_BET_TEXT,n.LIENG_CALL,o.numberWithCommas(t)):n.LIENG_CALL},setAllInLabelValue:function(t){this.allInLabel.string=t>0?String.format(n.LIENG_BET_TEXT,n.LIENG_ALL_IN,o.numberWithCommas(t)):n.LIENG_ALL_IN},showRaiseButton:function(){this.raiseButton.active=!0},hideRaiseButton:function(){this.raiseButton.active=!1},showCallButton:function(){this.callButton.active=!0},hideCallButton:function(){this.callButton.active=!1},showCheckButton:function(){this.checkButton.active=!0},hideCheckButton:function(){this.checkButton.active=!1},showFoldButton:function(){this.foldButton.active=!0},hideFoldButton:function(){this.foldButton.active=!1},showAllInButton:function(){this.allInButton.active=!0},hideAllInButton:function(){this.allInButton.active=!1},hideAllButtons:function(){this.hideFoldButton(),this.hideCheckButton(),this.hideCallButton(),this.hideRaiseButton(),this.hideAllInButton()},showAllButtons:function(){this.showFoldButton(),this.showCheckButton(),this.showCallButton(),this.showRaiseButton(),this.showAllInButton()},reset:function(){this.hideTotalChip(),this.hideAllButtons(),this.valueTotalChip=0}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Lieng:[function(t,e,i){"use strict";cc._RF.push(e,"64e13R1bUtPKqBUIwWVdwqL","Lieng");var o=t("../../base/BaseController"),n=t("./LiengConstant"),s=t("./LiengConfig"),a=t("./LiengUI"),r=t("./LiengState"),c=t("./LiengHandlerRequest"),h=t("./LiengHandlerEffect"),l=t("./LiengBetState"),u=t("../../prefab/GameCommon"),d=t("../../helper/Constant"),m=t("../../helper/Message"),p=t("../../object/RoomType");cc.Class({extends:o,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,gameNode:cc.Node,iconSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,LiengUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(d.SCENE_GAME_Lieng),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[d.MIN_BET].value),this.roomType=parseInt(this.room.variables[d.ROOM_TYPE].value),this.isMoneyType=this.roomType==p.MONEY_CODE,this.iconSprite.spriteFrame=this.isMoneyType?this.moneySpriteFrame:this.goldSpriteFrame,this.playersNode=this.LiengUI.playersNode,this.isMoneyType||this.LiengUI.disableAllPlaceHolder(),this.LiengConstant=n,this.LiengConfig=s,this.LiengState=r,this.LiengState.init(this),this.LiengHandlerRequest=c,this.LiengHandlerRequest.init(this),this.LiengHandlerEffect=h,this.LiengHandlerEffect.init(this),this.GameCommon.init(this),this.GameCommon.BetForm.setRound(this.minBet/2),this.GameCommon.BetForm.setHideWhenClick(!0),this.GameCommon.BuyInForm.setRound(this.minBet/2),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.LiengHandlerRequest.onPublicMessage.bind(this.LiengHandlerRequest),this.onRoomVarsUpdate=this.LiengHandlerRequest.onRoomVarsUpdate.bind(this.LiengHandlerRequest),this.onUserVarsUpdate=this.LiengHandlerRequest.onUserVarsUpdate.bind(this.LiengHandlerRequest),this.onResponse=this.LiengHandlerRequest.onResponse.bind(this.LiengHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a),a.active=!1}this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("LiengPlayer");t.BasePlayer=o,t.LiengPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRoomMaster(!1),o.setRequestLeftRoom(t.request_left_room),o.setPlayerName(t.nick_name),o.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.LiengState.setState(e),this.LiengState.isStop()?this.reset():this.LiengState.isWaiting()?this.resumeStateWaiting(t):this.LiengState.isPlaying()?this.resumeStatePlaying(t):this.LiengState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.LiengHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players,i=t.data.cards,o=t.data.bet_amount_first_bet,n=t.data.min_first_bet,s=t.data.max_first_bet;for(var a in e){var r=e[a].user_id,c=e[a].bet_amount,h=e[a].bet_state,l=this.getPlayerByUserId(r);l&&(c>0&&l.BasePlayer.showBetNodeWithoutAnimation(c),this.LiengHandlerEffect.setPlayerStatusByBetState(l,h),l.isItMe?l.is_home&&0===o&&this.GameCommon.setMinMaxBetFormAndShow(n,s):l.LiengPlayer.showBackCards(!1))}this.LiengUI.showTotalChip(o),this.myPlayer.LiengPlayer.showCards(i,!1),this.LiengHandlerEffect.handlePlayingPlayer(t)},resumeStateFinish:function(t){var e=t.data.players,i=t.data.bet_amount_first_bet;for(var o in e){var n=e[o].user_id,a=e[o].bet_amount,r=e[o].cards,c=e[o].money_change,h=e[o].group_cards,l=e[o].group_cards_name,u=this.getPlayerByUserId(n);u&&(a>0&&u.BasePlayer.showBetNodeWithoutAnimation(a),u.BasePlayer.showChangeBalance(c),u.BasePlayer.showEffectByChangeBalance(c),l&&u.BasePlayer.showTextLight(l,!1,new cc.Vec2(s.POSITION_PLAYER_SUM_X,s.POSITION_PLAYER_SUM_Y)),h&&u.LiengPlayer.showEffectByGroupCardsType(h),u.LiengPlayer.showCards(r,!1))}this.LiengUI.showTotalChip(i),this.LiengUI.hideAllButtons()},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.LiengHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initBalance:function(t){var e=t.variables.user_id.value;if(t.variables.balance){var i=t.variables.balance.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)}},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.LiengState.setWaiting(),this.GameCommon.hideWaitingNode(),this.LiengHandlerEffect.startCountDownAllPlayers(t)):(this.LiengState.setStop(),this.LiengHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){var e=t.data.cards;this.LiengState.setPlaying(),this.LiengHandlerEffect.stopCountDownAllPlayers(),this.LiengHandlerEffect.dealCards(e),this.LiengHandlerEffect.startGame(t)},handlePlayerPlay:function(t){t.data.bet_state===l.CHECK&&this.LiengHandlerEffect.resetPlayerNameAllPlayersCheck(),this.LiengHandlerEffect.stopCountDownAllPlayers(),this.LiengHandlerEffect.handlePlayingPlayer(t)},handlePlayerFirstBet:function(t){this.LiengHandlerEffect.stopCountDownAllPlayers(),this.LiengHandlerEffect.handleBetAllPlayers(t),this.LiengHandlerEffect.handlePlayingPlayer(t),this.LiengHandlerEffect.showEffectCollectMoney(t)},handlePlayerBet:function(t){var e=t.data.user_id,i=t.data.bet_amount,o=t.data.balance,n=this.getPlayerByUserId(e);n&&(n.BasePlayer.hideText(),n.BasePlayer.showChangeBalance(-i),i>0&&n.BasePlayer.showBetNode(i),0==o&&n.LiengPlayer.showEffectAllIn()),this.LiengHandlerEffect.stopCountDownAllPlayers(t)},handlePlayerFold:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.LiengPlayer.showEffectFold()},handlePlayerCheck:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.LiengPlayer.showEffectCheck()},handleResult:function(t){this.LiengState.setFinish(),this.LiengHandlerEffect.stopCountDownAllPlayers(t),this.LiengHandlerEffect.resetPlayerNameAllPlayers(),this.LiengHandlerEffect.showResult(t),this.setViewersToPlayers()},handlePlayerBuyIn:function(t){var e=t.data.min_balance,i=t.data.max_balance;this.GameCommon.BuyInForm.setMinValue(e),this.GameCommon.BuyInForm.setMaxValue(i),this.GameCommon.BuyInForm.showDialog()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.LiengState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.LiengHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(m.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(m.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onAllInClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_ALL_IN)},onCheckClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_CHECK)},onRaiseClick:function(){this.GameCommon.Audio.playClick(),this.GameCommon.BetForm.showDialog()},onCallClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_CALL)},onFoldClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_FOLD)},onBetConfirmClick:function(){this.GameCommon.Audio.playClick();var t={bet_amount:this.GameCommon.BetForm.getBalanceSlider()};this.sendRequest.send(n.REQUEST_RAISE,t),this.GameCommon.BetForm.hideDialog()},onBuyInConfirmClick:function(){this.GameCommon.Audio.playClick();var t=this.GameCommon.BuyInForm.getBalanceSlider(),e=this.GameCommon.BuyInForm.isBuyIn(),i={balance:parseInt(t),is_auto_buy_in:e};this.sendRequest.send(n.REQUEST_BUY_IN,i),this.GameCommon.BuyInForm.hideDialog()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getNumberCardInTable:function(){return this.tableCardNode.getChildren().length},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(this.util.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.LiengHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.GameCommon.BetForm.hideDialog(!1),this.LiengUI.reset(),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].LiengPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./LiengBetState":"LiengBetState","./LiengConfig":"LiengConfig","./LiengConstant":"LiengConstant","./LiengHandlerEffect":"LiengHandlerEffect","./LiengHandlerRequest":"LiengHandlerRequest","./LiengState":"LiengState","./LiengUI":"LiengUI"}],LogOut:[function(t,e,i){"use strict";cc._RF.push(e,"b9eb6URb2ZF0pZ2lqLMs9uh","LogOut");t("../../helper/Message"),t("../../helper/Constant");cc.Class({extends:cc.Component,init:function(t){this.controller=t},properties:{},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmLogoutClick()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},onCancelClick:function(){this.controller.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmLogoutClick:function(){this.controller.Audio.playClick(),this.controller.showProcessingNode(),this.logout()},logout:function(){var t={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.controller.api.logout(t,function(t){},function(t){}),this.controller.setAutoLogin(!1),this.controller.sfsManager.sfs.disconnect(),window.history.replaceState(null,null,"/")}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message"}],Login:[function(t,e,i){"use strict";cc._RF.push(e,"66e215PJtRC2Z4BydJ4VKjm","Login");var o=t("../../../helper/Constant"),n=(t("../../../helper/Config"),t("../../../helper/Message")),s=t("../../../util/BrowserUtil"),a=t("../../../lib/md5"),r=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,passwordEditBox:cc.EditBox,captchaEditBox:cc.EditBox,captchaSprite:cc.Sprite,rememberAccountToggle:cc.Toggle,facebookButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.usernameEditBox,this.passwordEditBox,this.captchaEditBox],this.dialogForm=this.node.getComponent("DialogForm"),cc.sys.isBrowser||(this.facebookButtonNode.active=!1)},onEnable:function(){this.GameCenter.initCaptcha(),cc.sys.isBrowser&&this.addEventKeyPress()},onResetCaptchaClick:function(){this.GameCenter.initCaptcha()},initCaptcha:function(t){this.data=t,this.session_id=t.session_id,this.checksum=t.checksum;var e=t.code,i=o.BASE64_TO_SPRITE+e;r.loadImageBase64(i,this.captchaSprite)},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&(this.node.active=!1);break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onLoginClick()}},keyHandle:function(t){return t.keyCode===o.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ENTER_KEY?(s.focusGame(),this.onLoginClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ESC_KEY?(this.node.active=!1,t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(s.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),s.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&s.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},onLoginClick:function(){this.GameCenter.Audio.playClick();var t=this.usernameEditBox.string,e=this.passwordEditBox.string,i=this.captchaEditBox.string.trim();""===t?this.GameCenter.showDialogMessage(n.LOGIN_TITLE,n.LOGIN_MISSING_USERNAME):""===e?this.GameCenter.showDialogMessage(n.LOGIN_TITLE,n.LOGIN_MISSING_PASSWORD):""===i?this.GameCenter.showDialogMessage(n.LOGIN_TITLE,n.LOGIN_MISSING_CAPTCHA):a(i.toUpperCase())!=this.checksum?this.GameCenter.showDialogMessage(n.LOGIN_TITLE,n.LOGIN_CAPTCHA_ERROR):this.login(t,e,"",i)},login:function(t,e,i,o){var s=this,a={username:t,password:e,register_code:this.GameCenter.getRegisterCode(),device_id:this.GameCenter.getDeviceID(),mkt_code:"",captcha:o,session_id:this.session_id||0};i&&(a.otp=i),this.getSign&&this.getSign(a,t);this.GameCenter.showProcessingNode(),this.GameCenter.api.login(a,function(i){0===i.data.change_pass?(s.passwordEditBox.string="",s.GameCenter.hideProcessingNode(),s.GameCenterUI.hideLoginFormNode(),s.GameCenter.setUser(i.data)):0===i.data.login_status?(s.GameCenter.OTPLogin.setAccount(t,e,o,s.session_id),s.GameCenter.OTPLogin.clear(),s.GameCenter.hideProcessingNode(),s.GameCenterUI.showOtpLoginFormNode()):(s.GameCenter.setAutoLogin(!0),s.GameCenter.setAccountType(!1),s.GameCenter.initDataAndConnectSFS(i.data),s.GameCenterUI.hideOtpLoginFormNode())},function(t){s.GameCenter.setAutoLogin(!1),s.GameCenter.hideProcessingNode(),s.GameCenter.showDialogMessage(n.LOGIN_TITLE,t.msg)})},onRegiserClick:function(){this.GameCenter.Audio.playClick(),this.node.active=!1,this.GameCenterUI.showRegisterFormNode()},onForgetPasswordClick:function(){this.GameCenter.Audio.playClick(),this.node.active=!1,this.GameCenterUI.showForgetPasswordPhoneFormNode()},onFacebookClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.loginFacebook()},onGoogleClick:function(){this.GameCenter.Audio.playClick()},onCloseClick:function(){this.node.active=!1},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""},getSign:function(t,e){var i=parseInt((new Date).getTime()/1e3),o=a(e+i+"JeDrwhYsTzGPswr3kJEfw7PjXqRYsJMLt886FXjGXUG4jW7TBd9pHZmWy52Q");t.time=i,t.sign=o}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../lib/md5":"md5","../../../util/BrowserUtil":"BrowserUtil","../../../util/Util":"Util"}],LotteryBetItem:[function(t,e,i){"use strict";cc._RF.push(e,"9d19bZxDcxL07oB8nkrnYdw","LotteryBetItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message"),s=t("../../scene/game-lottery/LotteryBetType");cc.Class({extends:cc.Component,properties:{betRichText:cc.RichText},init:function(t){this.data=t},start:function(){if(this.data){var t=this.data.bets,e=this.data.amount||0,i=this.data.type;i===s.CHAN&&this.showDataNotBets(n.LOTTERY_BET_CHAN,e),i===s.LE&&this.showDataNotBets(n.LOTTERY_BET_LE,e),i===s.DO&&this.showDataNotBets(n.LOTTERY_BET_DO,e),i===s.TRANG&&this.showDataNotBets(n.LOTTERY_BET_TRANG,e),i===s.DE&&this.showDataBets(n.LOTTERY_BET_DE,t,e,n.LOTTERY_BET_DE_2),i===s.LO&&this.showDataBets(n.LOTTERY_BET_LO,t,e,n.LOTTERY_BET_LO),i===s.XIEN_2&&this.showDataBets(n.LOTTERY_BET_XIEN_2,t,e,n.LOTTERY_BET_XIEN_2),i===s.XIEN_3&&this.showDataBets(n.LOTTERY_BET_XIEN_3,t,e,n.LOTTERY_BET_XIEN_3),i===s.XIEN_4&&this.showDataBets(n.LOTTERY_BET_XIEN_4,t,e,n.LOTTERY_BET_XIEN_4),i===s.DAU&&this.showDataBets(n.LOTTERY_BET_DAU,t,e,n.LOTTERY_BET_DAU,!0),i===s.DUOI&&this.showDataBets(n.LOTTERY_BET_DUOI,t,e,n.LOTTERY_BET_DUOI,!0),i===s.HU&&this.showDataBets(n.LOTTERY_BET_HU,t,e,n.LOTTERY_BET_HU_2)}},showDataBets:function(t,e,i,n){var s="";s=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?this.getTxtBetsDauDuoi(e):this.getTxtBets(e);var a=String.format(t,s,o.nFormatter(i));this.setBetMessgae(a),this.txtBet=s,this.message2=n},showEffectBetsWin:function(t,e,i){var n=this.message2,a=this.data.amount,r=this.data.type,c="";if(this.checkTypeBest()){r===s.DAU&&(c=this.getTxtDau(this.txtBet,t)),r===s.DUOI&&(c=this.getTxtDuoi(this.txtBet,t)),r===s.DE&&(c=e?this.getTxtLoDeHu(this.txtBet,t):this.txtBet),this.checkTypeBestLoHu()&&(c=this.getTxtLoDeHu(this.txtBet,t));var h=String.format(n,c,o.nFormatter(a));this.setBetMessgae(h),this.txtBet=c}if(e&&this.checkTypeChanLeDoTrang())for(var l=0,u=i.length;l<u;l++)if(i[l].type===this.data.type){var d=this.betRichText.string;this.betRichText.string="<color = RED>"+d+"</color>"}},getTxtDau:function(t,e){var i=parseInt(e/10),o=new RegExp(i,"g");return-1===t.indexOf(i+"<")&&(t=t.replace(o,"<color = RED>"+i+"</color>")),t},getTxtDuoi:function(t,e){var i=e%10,o=new RegExp(i,"g");return-1===t.indexOf(i+"<")&&(t=t.replace(o,"<color = RED>"+i+"</color>")),t},getTxtLoDeHu:function(t,e){var i=e<10?"0"+e:e,o=new RegExp(i,"g");return-1===t.indexOf(i+"<")&&(t=t.replace(o,"<color = RED>"+i+"</color>")),t},checkTypeBest:function(){if(this.data){var t=this.data.type;return t===s.DE||t===s.LO||t===s.XIEN_2||t===s.XIEN_3||t===s.XIEN_4||t===s.DAU||t===s.DUOI||t===s.HU}},checkTypeChanLeDoTrang:function(){if(this.data){var t=this.data.type;return t===s.CHAN||t===s.LE||t===s.DO||t===s.TRANGF}},checkTypeBestLoHu:function(){if(this.data){var t=this.data.type;return t===s.LO||t===s.XIEN_2||t===s.XIEN_3||t===s.XIEN_4||t===s.HU}},showDataNotBets:function(t,e){var i=String.format(t,o.nFormatter(e));this.setBetMessgae(i)},setBetMessgae:function(t){this.betRichText.string=t},getTxtBets:function(t){for(var e="",i=0,o=t.length;i<o;i++){e+=(t[i]<10?"0"+t[i]:t[i])+"-"}return e=e.substring(0,e.length-1)},getTxtBetsDauDuoi:function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=t[i]+"-";return e=e.substring(0,e.length-1)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../scene/game-lottery/LotteryBetType":"LotteryBetType","../../util/FormatUtil":"FormatUtil"}],LotteryBetType:[function(t,e,i){"use strict";cc._RF.push(e,"7f513BRSZVD2bpo9dgw4yF1","LotteryBetType");var o={currentType:"",IS_CHANGE_BET:"IS_CHANGE_BET",CHAN:"CHAN",LE:"LE",DO:"DO",TRANG:"TRANG",DAU:"DAU",DUOI:"DUOI",XIEN_2:"XIEN_2",XIEN_3:"XIEN_3",XIEN_4:"XIEN_4",LO:"LO",DE:"DE",HU:"HU",RE_BETS:"RE_BETS",setType:function(t){this.currentType=t},getType:function(){return currentType},isTypeChan:function(){return this.currentType===this.CHAN},isTypeLe:function(){return this.currentType===this.LE},isTypeDo:function(){return this.currentType===this.DO},isTypeTrang:function(){return this.currentType===this.TRANG},isTypeDau:function(){return this.currentType===this.DAU},isTypeDuoi:function(){return this.currentType===this.DUOI},isTypeXien2:function(){return this.currentType===this.XIEN_2},isTypeXien3:function(){return this.currentType===this.XIEN_3},isTypeXien4:function(){return this.currentType===this.XIEN_4},isTypeLo:function(){return this.currentType===this.LO},isTypeDe:function(){return this.currentType===this.DE},isTypeHu:function(){return this.currentType===this.HU},isTypeReBets:function(){return this.currentType===this.RE_BETS},isChangeBet:function(){return this.currentType===this.IS_CHANGE_BET||""===this.currentType},isTypeBets:function(){return!(this.isTypeChan()||this.isTypeLe()||this.isTypeDo()||this.isTypeTrang()||this.isTypeReBets()||this.isChangeBet())}};e.exports=o,cc._RF.pop()},{}],LotteryBets:[function(t,e,i){"use strict";cc._RF.push(e,"6893bRWntxOaq3C2+NPDiHp","LotteryBets");var o=t("../../util/FormatUtil");t("./LotteryBetType");cc.Class({extends:cc.Component,properties:{playerBetsLabel:cc.Label,moneyBetsLabel:cc.Label,totalMyBetsLabel:cc.Label,betsScrollView:cc.ScrollView,historybetItemPrefab:cc.Prefab},init:function(t){this.Lottery=t,this.LotteryInfo=t.LotteryInfo},onLoad:function(){},initBets:function(t){var e=t.bets;if(e){this.removeAllContent(),this.listBetsItem=[];for(var i=0,o=0;o<e.length;o++){i+=e[o].total_bets;var n=this.getItem(e[o]);this.betsScrollView.content.addChild(n),this.listBetsItem.push(n)}this.setTotaMyBets(i)}},initUpdate:function(t){var e=t.jackpot,i=t.number_bets,o=t.total_bets;e&&(this.removeAllLabel(),this.LotteryInfo.setJackpot(e),this.setNumberBets(i),this.setTotalBets(o))},handleFinish:function(){for(var t=0,e=this.listBetsItem.length;t<e;t++)this.listBetsItem[t].getComponent("LotteryBetItem").showEffectBetsWin(100,!1)},showEffectBetsResult:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],o=0,n=this.listBetsItem.length;o<n;o++)this.listBetsItem[o].getComponent("LotteryBetItem").showEffectBetsWin(t,e,i)},getItem:function(t){var e=cc.instantiate(this.historybetItemPrefab);return e.getComponent("LotteryBetItem").init(t),e},removeAllContent:function(){this.betsScrollView.content.removeAllChildren(!0)},setTotaMyBets:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.totalMyBetsLabel.string=o.numberWithCommas(t)},setNumberBets:function(t){this.playerBetsLabel.string=o.numberWithCommas(t)},setTotalBets:function(t){this.moneyBetsLabel.string=o.numberWithCommas(t)},removeAllLabel:function(){this.setNumberBets(0),this.setTotalBets(0)},reset:function(){this.removeAllLabel(),this.removeAllContent(),this.setTotaMyBets(0)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./LotteryBetType":"LotteryBetType"}],LotteryBoard:[function(t,e,i){"use strict";cc._RF.push(e,"1a183URLFJCzJI4I1HaTDFE","LotteryBoard");var o=t("./LotteryConfig"),n=t("./LotteryBetType"),s=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{boardLayOutNode:cc.Node,numberItemPrefab:cc.Prefab,selectAllChanNode:cc.Node,selectAllLeNode:cc.Node,selectAllDoNode:cc.Node,selectAllTrangNode:cc.Node},init:function(t){this.Lottery=t,this.LotteryBetType=t.LotteryBetType,this.LotteryEvent=t.LotteryEvent,this.LotteryState=this.Lottery.LotteryState},onLoad:function(){this.listLoXien=[],this.data=null,this.initBoard()},initBoard:function(){this.listBoard=[];for(var t=0;t<o.MAX_NUMBER_LOTTERY_ITEM;t++){var e=cc.instantiate(this.numberItemPrefab);e.getComponent("LotteryNumberItem").init(this.Lottery,t),this.boardLayOutNode.addChild(e),this.listBoard.push(e)}},setDataBet:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];this.data||(this.data=[],this.data.bets=[]),this.data.type=t,e&&this.data.bets.push(i),o&&(this.data.bets=n),this.LotteryEvent.initMessageBet(this.data)},getDataBet:function(){return this.LotteryBetType.isTypeBets()?this.data&&this.data.bets.length>0?this.data:null:this.data},getListBoard:function(){return this.listBoard},getListNumberTrang:function(){return this.listNumberTrang||this.showListTrangItem(!1),this.listNumberTrang},getListNumberDo:function(){return this.listNumberDo||this.showListDoItem(!1),this.listNumberDo},onItemSelected:function(t){if(this.LotteryState.isBetting()){if(this.LotteryBetType.isTypeDau()){var e=parseInt(t/10);this.setDataBet(n.DAU,!0,e),this.showListDauItem(t,!0)}if(this.LotteryBetType.isTypeDuoi()){var i=t%10;this.setDataBet(n.DUOI,!0,i),this.showListDuoiItem(t,!0)}if(this.LotteryBetType.isTypeLo()){var a=this.handleLo(t);this.setDataBet(n.LO,!1,t,!0,a)}if(this.LotteryBetType.isTypeXien2()){var r=this.handleLoXien(o.XIEN_2,t);this.setDataBet(n.XIEN_2,!1,t,!0,r)}if(this.LotteryBetType.isTypeXien3()){var c=this.handleLoXien(o.XIEN_3,t);this.setDataBet(n.XIEN_3,!1,t,!0,c)}if(this.LotteryBetType.isTypeXien4()){var h=this.handleLoXien(o.XIEN_4,t);this.setDataBet(n.XIEN_4,!1,t,!0,h)}if(this.LotteryBetType.isTypeDe()){var l=this.handleDe(t);this.setDataBet(n.DE,!1,t,!0,l)}if(this.LotteryBetType.isTypeHu()){var u=this.handleHu(o.HU,t);this.setDataBet(n.HU,!1,t,!0,u)}this.LotteryBetType.isTypeReBets()&&this.Lottery.showToast(s.LOTTERY_SELECT_REBETS),this.LotteryBetType.isChangeBet()&&this.Lottery.showToast(s.LOTTERY_SELECT_TYPE)}},onMouseEnterItem:function(t){this.LotteryBetType.isTypeDau()&&this.showListDauItem(t),this.LotteryBetType.isTypeDuoi()&&this.showListDuoiItem(t)},onMouseLeaveItem:function(t){this.LotteryBetType.isTypeDau()&&this.hideListDauItem(t),this.LotteryBetType.isTypeDuoi()&&this.hideListDuoiItem(t)},handleLo:function(t){return this.listBoard[t].getComponent("LotteryNumberItem").isLoDeSelected()?(this.listBoard[t].getComponent("LotteryNumberItem").setLoDeSelected(!1),this.listBoard[t].getComponent("LotteryNumberItem").hideSelectLoNode(),this.listLoDe=this.removeItemInListItem(this.listLoDe,t)):(this.listBoard[t].getComponent("LotteryNumberItem").showSelectLoNode(),this.listBoard[t].getComponent("LotteryNumberItem").setLoDeSelected(!0),this.listLoDe.push(this.listBoard[t])),this.getListBetsInListItem(this.listLoDe)},handleDe:function(t){return this.listBoard[t].getComponent("LotteryNumberItem").isLoDeSelected()?(this.listBoard[t].getComponent("LotteryNumberItem").setLoDeSelected(!1),this.listBoard[t].getComponent("LotteryNumberItem").hideSelectDeNode(),this.listLoDe=this.removeItemInListItem(this.listLoDe,t)):(this.listBoard[t].getComponent("LotteryNumberItem").showSelectDeNode(),this.listBoard[t].getComponent("LotteryNumberItem").setLoDeSelected(!0),this.listLoDe.push(this.listBoard[t])),this.getListBetsInListItem(this.listLoDe)},handleLoXien:function(t,e){return this.listBoard[e].getComponent("LotteryNumberItem").isLoXienSelected()?(this.listBoard[e].getComponent("LotteryNumberItem").setLoXienSelected(!1),this.listBoard[e].getComponent("LotteryNumberItem").hideSelectLoXienNode(),this.listLoXien=this.removeItemInListItem(this.listLoXien,e)):(this.listBoard[e].getComponent("LotteryNumberItem").setLoXienSelected(!0),this.listBoard[e].getComponent("LotteryNumberItem").showSelectLoXienNode(),this.listLoXien.push(this.listBoard[e]),this.listLoXien.length>t&&(this.listLoXien[0].getComponent("LotteryNumberItem").hideSelectLoXienNode(),this.listLoXien[0].getComponent("LotteryNumberItem").setLoXienSelected(!1),this.listLoXien.splice(0,1))),this.getListBetsInListItem(this.listLoXien)},handleHu:function(t,e){return this.listBoard[e].getComponent("LotteryNumberItem").isHuSelected()?(this.listBoard[e].getComponent("LotteryNumberItem").setHuSelected(!1),this.listBoard[e].getComponent("LotteryNumberItem").hideSelectHuNode(),this.listHu=this.removeItemInListItem(this.listHu,e)):(this.listBoard[e].getComponent("LotteryNumberItem").setHuSelected(!0),this.listBoard[e].getComponent("LotteryNumberItem").showSelectHuNode(),this.listHu.push(this.listBoard[e]),this.listHu.length>t&&(this.listHu[0].getComponent("LotteryNumberItem").hideSelectHuNode(),this.listHu[0].getComponent("LotteryNumberItem").setHuSelected(!1),this.listHu.splice(0,1))),this.getListBetsInListItem(this.listHu)},showListDauItem:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=parseInt(t/10),o=0;o<10;o++){var n=parseInt(i+""+o);this.listBoard[n].getComponent("LotteryNumberItem").showSelectDauNode(),e&&this.listBoard[n].getComponent("LotteryNumberItem").setDauSelected(e)}},hideListDauItem:function(t){for(var e=parseInt(t/10),i=0;i<10;i++){var o=parseInt(e+""+i);this.listBoard[o].getComponent("LotteryNumberItem").hideSelectDauNode()}},showListDuoiItem:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t%10,o=0;o<10;o++){var n=parseInt(o+""+i);this.listBoard[n].getComponent("LotteryNumberItem").showSelectDuoiNode(),e&&this.listBoard[n].getComponent("LotteryNumberItem").setDuoiSelected(e)}},hideListDuoiItem:function(t){for(var e=t%10,i=0;i<10;i++){var o=parseInt(i+""+e);this.listBoard[o].getComponent("LotteryNumberItem").hideSelectDuoiNode()}},showListChanItem:function(){this.selectAllChanNode.active=!0},showListLeItem:function(){this.selectAllLeNode.active=!0},showListDoItem:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.listNumberDo){this.listNumberDo=[];for(var e=!1,i=0,o=this.listBoard.length;i<o;i++)(e=0!==i&&i%10==0?!e:e)?i%2!=0&&this.listNumberDo.push(i):i%2==0&&this.listNumberDo.push(i)}t&&(this.selectAllDoNode.active=!0)},showListTrangItem:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this.listNumberTrang){this.listNumberTrang=[];for(var e=!1,i=0,o=this.listBoard.length;i<o;i++)(e=0!==i&&i%10==0?!e:e)?i%2==0&&this.listNumberTrang.push(i):i%2!=0&&this.listNumberTrang.push(i)}t&&(this.selectAllTrangNode.active=!0)},getListBetsInListItem:function(t){for(var e=[],i=0,o=t.length;i<o;i++){var n=t[i].getComponent("LotteryNumberItem").getNumberItem();e.push(n)}return e},removeNumberInListNumber:function(t,e){for(;-1!==t.indexOf(e);){var i=t.indexOf(e);t.splice(i,1)}return t},removeItemInListItem:function(t,e){for(var i=this.listBoard[e];-1!==t.indexOf(i);){var o=t.indexOf(i);t.splice(o,1)}return t},resetAllItem:function(){for(var t=0,e=this.listBoard.length;t<e;t++)this.listBoard[t].getComponent("LotteryNumberItem").reset()},reset:function(){this.listLoXien=[],this.listLoDe=[],this.listHu=[],this.data=null,this.resetAllItem(),this.selectAllChanNode.active=!1,this.selectAllLeNode.active=!1,this.selectAllDoNode.active=!1,this.selectAllTrangNode.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","./LotteryBetType":"LotteryBetType","./LotteryConfig":"LotteryConfig"}],LotteryButtonItem:[function(t,e,i){"use strict";cc._RF.push(e,"867d516CK9HF70lCrqYSG3W","LotteryButtonItem"),cc.Class({extends:cc.Component,properties:{selectNode:cc.Node,contentLabel:cc.Label},init:function(t){this.Lottery=t},start:function(){this.hideSelectNode()},onClick:function(){},showSelectNode:function(){this.selectNode.active=!0},hideSelectNode:function(){this.selectNode.active=!1}}),cc._RF.pop()},{}],LotteryChipItem:[function(t,e,i){"use strict";cc._RF.push(e,"25d46bqgTdCV4ceanJSLHlt","LotteryChipItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{chipSprite:cc.Sprite,chipLabel:cc.Label,selectBgNode:cc.Node},init:function(t,e,i,o){this.Lottery=t,this.LotteryFooter=t.LotteryFooter,this.bet=e,this.is_hu=o},onLoad:function(){this.hideSelectNode(),this.chipLabel.string=o.nFormatter(this.bet)},onClick:function(){this.Lottery.LotteryBetType.isTypeHu()?this.is_hu&&(this.LotteryFooter.hideAllItem(),this.showSelectNode(),this.LotteryFooter.setBet(this.bet)):this.isSelect()?this.LotteryFooter.addBets(this.bet):(this.LotteryFooter.hideAllItem(),this.showSelectNode(),this.LotteryFooter.setBet(this.bet))},getBet:function(){return this.bet},showSelectNode:function(){this.selectBgNode.active=!0},hideSelectNode:function(){this.selectBgNode.active=!1},isSelect:function(){return this.selectBgNode.active}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],LotteryConfig:[function(t,e,i){"use strict";cc._RF.push(e,"d7ed5WnNQtBlLbLvl/bcRMY","LotteryConfig");e.exports={XIEN_2:2,XIEN_3:3,XIEN_4:4,HU:10,MAX_NUMBER_LOTTERY_ITEM:100,LIST_CHIP_LOTTERY:[1e3,5e3,1e4,5e4,1e5,5e5,1e6,5e6],MAX_HISTORY:4,TIME_SCROLL_PAGEVIEW:.5,TIME_START_SHOW_EFFECT:1,TIME_SHOW_EFFECT:.75,BET_HU:1e4,NUMBER_DETAIL_ITEM:8},cc._RF.pop()},{}],LotteryConstant:[function(t,e,i){"use strict";cc._RF.push(e,"38278G1zZJB5I+jbKjgBuTj","LotteryConstant");e.exports={BET:"BET",CHAT:"CHAT",START:"START",UPDATE:"UPDATE",FINISH:"FINISH",GET_TOP:"GET_TOPS"},cc._RF.pop()},{}],LotteryDetailsHistory:[function(t,e,i){"use strict";cc._RF.push(e,"cf0c7xmz+dG9br9U/8nRAkV","LotteryDetailsHistory");t("../../helper/Constant"),t("../../prefab/item/PaginationItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{matchGameIdLabel:cc.Label,totalBetLabel:cc.Label,contentPageNode:cc.Node,contentPageviewItemPrefab:cc.Prefab,betsScrollView:cc.ScrollView,historybetItemPrefab:cc.Prefab},init:function(t){this.Lottery=t},initData:function(t){this.data=t},onLoad:function(){},onEnable:function(){this.data&&(this.setMatchGameId(this.data.match_game_id),this.createContentResult(this.data),this.createContentBets(this.data))},createContentResult:function(t){this.contentPageNode.removeAllChildren(!0);var e=cc.instantiate(this.contentPageviewItemPrefab);e.getComponent("LotteryPageViewItem").init(this.Lottery,t,!0),this.contentPageNode.addChild(e)},createContentBets:function(t){this.betsScrollView.content.removeAllChildren(!0);var e=t.bets;if(e){for(var i=0,o=0;o<e.length;o++){i+=e[o].total_bets;var n=this.instantiteItem(e[o]);this.betsScrollView.content.addChild(n)}this.setTotaMyBets(i)}},instantiteItem:function(t){var e=cc.instantiate(this.historybetItemPrefab);return e.getComponent("LotteryBetItem").init(t),e},setTotaMyBets:function(t){this.totalBetLabel.string=o.numberWithCommas(t)},setMatchGameId:function(t){this.matchGameIdLabel.string="#"+t}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../prefab/item/PaginationItem":"PaginationItem","../../util/FormatUtil":"FormatUtil"}],LotteryEffect:[function(t,e,i){"use strict";cc._RF.push(e,"88201r0REpKfpW5b7rSEyed","LotteryEffect");var o=t("../../helper/Message"),n=t("../../util/FormatUtil"),s=t("./LotteryBetType"),a=t("./LotteryConfig");cc.Class({extends:cc.Component,properties:{jackpotEffectSkeleton:sp.Skeleton,allPlayerJackpotSkeleton:sp.Skeleton,nickNameLabel:cc.Label},init:function(t){this.Lottery=t,this.LotteryBoard=t.LotteryBoard,this.LotteryResult=t.LotteryResult,this.LotteryFooter=t.LotteryFooter,this.LotteryBets=t.LotteryBets},onLoad:function(){this.hideEffectNode()},initResult:function(t){this.listBoard||(this.listBoard=this.LotteryBoard.getListBoard());var e=t.result,i=t.bets_win;this.currentIndexItem=1,this.showAll=!1;var o=this.instanceNewData(t);this.LotteryResult.addResult(o),this.clearTimeOutEffect(),this.timeOutShowEffect=setTimeout(function(){this.intervalShowEffect=setInterval(function(){if(this.showAll)this.showAllResult(t),this.clearTimeOutEffect();else if(e.length>this.currentIndexItem&&this.currentIndexItem>0){var n=e[this.currentIndexItem];o.result.push(n),this.LotteryResult.addResult(o,!1);var s=e[this.currentIndexItem-1];this.listBoard[s].getComponent("LotteryNumberItem").reset(),this.showItemEffectWinResult(n,i),this.listBoard[n].getComponent("LotteryNumberItem").showEffectNode(),this.LotteryBets.showEffectBetsResult(n,!1),this.currentIndexItem++,this.currentIndexItem===e.length&&(this.currentIndexItem=0)}else{this.LotteryBoard.resetAllItem();var a=e[this.currentIndexItem];this.showItemEffectWinResult(a,i),this.listBoard[a].getComponent("LotteryNumberItem").showEffectDeNode();var r=[a];o.result=r.concat(o.result),this.LotteryResult.addResult(o,!0),this.LotteryBets.showEffectBetsResult(a,!0,i),this.showMyEffectTypeHu(t),this.showEffectAllPlayer(t),this.LotteryFooter.showChangeBalance(t.amount_change),this.showAll=!0}}.bind(this),1e3*a.TIME_SHOW_EFFECT)}.bind(this),1e3*a.TIME_START_SHOW_EFFECT)},showEffectAllPlayer:function(t){for(var e=t.big_wins,i=0,a=e.length;i<a;i++){var r=e[i].nick_name,c=e[i].amount_change,h=e[i].type;if(r!==this.Lottery.getUser().nick_name){h===s.HU&&(this.nickNameLabel.string=r,this.showPlayerEffectTypeHu());var l=String.format(o.LOTTERY_CHAT,r,n.numberWithCommas(c),this.getNameType(h));this.Lottery.LotteryRoomChat.addChat(l)}}},instanceNewData:function(t){var e=t;return e.result=[],e},showAllResult:function(t){this.LotteryBoard.reset();var e=t.result,i=t.bets_win;this.showSelectAllBets(e),this.showAllItemWinResult(e,i)},showAllItemWinResult:function(t,e){var i=t[0];if(e.length>0)for(var o=0,n=e.length;o<n;o++){var a=e[o],r=a.type;r===s.DE?this.listBoard[i].getComponent("LotteryNumberItem").showSelectDeNode():(this.checkTypeWinLo(r)&&this.showAllLoBetWin(t,a),r===s.DAU&&this.showAllDauBetWin(t,a),r===s.DUOI&&this.showAllDuoiBetWin(t,a),r===s.CHAN&&this.showAllChanLeBetWin(t,s.CHAN),r===s.LE&&this.showAllChanLeBetWin(t,s.LE),r===s.DO&&this.showAllDoTrangBetWin(t,s.DO),r===s.TRANG&&this.showAllDoTrangBetWin(t,s.TRANG))}},showSelectAllBets:function(t){this.listBoard||(this.listBoard=this.LotteryBoard.getListBoard());for(var e=0,i=t.length;e<i;e++){var o=parseInt(t[e]);0===e?this.listBoard[o].getComponent("LotteryNumberItem").showEffectDeNode():this.listBoard[o].getComponent("LotteryNumberItem").showSelectBetsNode()}},showAllDauBetWin:function(t,e){for(var i=e.bets,o=0,n=i.length;o<n;o++)for(var s=i[o],a=0,r=t.length;a<r;a++){var c=t[a];s===parseInt(c/10)&&this.listBoard[c].getComponent("LotteryNumberItem").showSelectLoNode()}},showAllDuoiBetWin:function(t,e){for(var i=e.bets,o=0,n=i.length;o<n;o++)for(var s=i[o],a=0,r=t.length;a<r;a++){var c=t[a];s===c%10&&this.listBoard[c].getComponent("LotteryNumberItem").showSelectLoNode()}},showAllLoBetWin:function(t,e){for(var i=e.bets,o=0,n=i.length;o<n;o++)for(var s=0,a=t.length;s<a;s++)if(i[o]===t[s]){var r=i[o];this.listBoard[r].getComponent("LotteryNumberItem").showSelectLoNode();break}},showAllChanLeBetWin:function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];e===s.CHAN?n%2==0&&this.listBoard[n].getComponent("LotteryNumberItem").showSelectChanNode():n%2!=0&&this.listBoard[n].getComponent("LotteryNumberItem").showSelectLeNode()}},showAllDoTrangBetWin:function(t,e){for(var i=0,o=t.length;i<o;i++){var n=t[i];this.checkNumberInDoTrang(n,e)&&this.listBoard[n].getComponent("LotteryNumberItem").showSelectDoNode()}},showItemEffectWinResult:function(t,e){if(e.length>0)for(var i=0,o=e.length;i<o;i++){var n=e[i],a=n.type,r=n.bets;a===s.DE?this.showDeBetWin(t,r):(this.checkTypeWinLo(a)&&this.showLoBetWin(t,r),a===s.DAU&&this.showDauBetWin(t,r),a===s.DUOI&&this.showDuoiBetWin(t,r))}},showDeBetWin:function(t,e){t===e[0]&&this.listBoard[t].getComponent("LotteryNumberItem").showSelectDeNode()},showLoBetWin:function(t,e){for(var i=0,o=e.length;i<o;i++)t===e[i]&&this.showNumberWinByNumberItem(t)},showDauBetWin:function(t,e){for(var i=parseInt(t/10),o=0,n=e.length;o<n;o++)i===e[o]&&this.showNumberWinByNumberItem(t)},showDuoiBetWin:function(t,e){for(var i=t%10,o=0,n=e.length;o<n;o++)i===e[o]&&this.showNumberWinByNumberItem(t)},showChanLeBetWin:function(t,e){e===s.CHAN?t%2==0&&this.showNumberWinByNumberItem(t):t%2!=0&&this.showNumberWinByNumberItem(t)},showDoTrangBetWin:function(t,e){if(this.listNumberTrang||(this.listNumberTrang=this.LotteryBoard.getListNumberTrang(),this.listNumberDo=this.LotteryBoard.getListNumberDo()),e===s.DO){for(var i=0,o=this.listNumberDo.length;i<o;i++)if(t===this.listNumberDo[i])return void this.showNumberWinByNumberItem(t)}else for(var n=0,a=this.listNumberTrang.length;n<a;n++)if(t===this.listNumberTrang[n])return void this.showNumberWinByNumberItem(t)},showNumberWinByNumberItem:function(t){this.listBoard[t].getComponent("LotteryNumberItem").showSelectLoNode()},checkNumberInDoTrang:function(t,e){if(this.listNumberTrang||(this.listNumberTrang=this.LotteryBoard.getListNumberTrang(),this.listNumberDo=this.LotteryBoard.getListNumberDo()),e===s.DO){for(var i=0,o=this.listNumberDo.length;i<o;i++)if(t===this.listNumberDo[i])return!0}else for(var n=0,a=this.listNumberTrang.length;n<a;n++)if(t===this.listNumberTrang[n])return!0;return!1},showMyEffectTypeHu:function(t){for(var e=t.bets_win,i=0,o=e.length;i<o;i++){e[i].type===s.HU&&(this.jackpotEffectSkeleton.node.active=!0,this.jackpotEffectSkeleton.setAnimation(0,"nohu2",!0),this.node.runAction(cc.sequence(cc.delayTime(4),cc.callFunc(function(){this.hideEffectNode()},this))))}},showPlayerEffectTypeHu:function(){this.allPlayerJackpotSkeleton.node.active=!0,this.allPlayerJackpotSkeleton.setAnimation(0,"nohu1",!0),this.node.runAction(cc.sequence(cc.delayTime(4),cc.callFunc(function(){this.hideEffectNode()},this)))},hideEffectNode:function(){this.node.stopAllActions(!0),this.jackpotEffectSkeleton.clearTrack(0),this.allPlayerJackpotSkeleton.clearTrack(0),this.jackpotEffectSkeleton.node.active=!1,this.allPlayerJackpotSkeleton.node.active=!1},checkTypeWinLo:function(t){switch(t){case s.LO:case s.XIEN_2:case s.XIEN_3:case s.XIEN_4:return!0;default:return!1}},getNameType:function(t){var e="";switch(t){case s.HU:e="H\u0169";break;case s.DE:e="\u0110\u1ec1";break;case s.DAU:e="\u0110\u1ea7u";break;case s.DUOI:e="\u0110u\xf4i";break;case s.CHAN:e="Ch\u1eb5n";break;case s.LE:e="L\u1ebb";break;case s.DO:e="\u0110\u1ecf";break;case s.TRANG:e="Tr\u1eafng";break;case s.LO:e="L\xf4";break;case s.XIEN_2:e="Xi\xean 2";break;case s.XIEN_3:e="Xi\xean 3";break;case s.XIEN_4:e="Xi\xean 4"}return e},clearTimeOutEffect:function(){clearTimeout(this.timeOutShowEffect),clearInterval(this.intervalShowEffect)},onDisable:function(){this.hideEffectNode(),this.clearTimeOutEffect()}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","./LotteryBetType":"LotteryBetType","./LotteryConfig":"LotteryConfig"}],LotteryEvent:[function(t,e,i){"use strict";cc._RF.push(e,"2d18bqPrjJCvq5DYMZzW++s","LotteryEvent");var o=t("./LotteryBetType"),n=(t("./LotteryConstant"),t("../../helper/Message"));t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label,messageEffectNode:cc.Node,contentBetNode:cc.Node,betItemPrefab:cc.Prefab,selectChanNode:cc.Node,selectLeNode:cc.Node,selectDauNode:cc.Node,selectDuoiNode:cc.Node,selectDoNode:cc.Node,selectTrangNode:cc.Node,selectXien2Node:cc.Node,selectXien3Node:cc.Node,selectXien4Node:cc.Node,selectLoNode:cc.Node,selectDeNode:cc.Node,selectCuocLaiNode:cc.Node},init:function(t){this.Lottery=t,this.LotteryBoard=t.LotteryBoard,this.LotteryBetType=t.LotteryBetType,this.LotteryFooter=t.LotteryFooter,this.LotteryState=t.LotteryState},onLoad:function(){},onChanClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectChanNode.active=!0,this.LotteryBetType.setType(o.CHAN),this.LotteryBoard.setDataBet(o.CHAN),this.LotteryBoard.showListChanItem(),this.setMessage(n.LOTTERY_SELECT_CHAN)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onLeClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectLeNode.active=!0,this.LotteryBetType.setType(o.LE),this.LotteryBoard.setDataBet(o.LE),this.LotteryBoard.showListLeItem(),this.setMessage(n.LOTTERY_SELECT_LE)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onDauClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectDauNode.active=!0,this.LotteryBetType.setType(o.DAU),this.setMessage(n.LOTTERY_SELECT_DAU)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onDuoiClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectDuoiNode.active=!0,this.LotteryBetType.setType(o.DUOI),this.setMessage(n.LOTTERY_SELECT_DUOI)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onDoClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectDoNode.active=!0,this.LotteryBetType.setType(o.DO),this.LotteryBoard.setDataBet(o.DO),this.LotteryBoard.showListDoItem(),this.setMessage(n.LOTTERY_SELECT_DO)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onTrangClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectTrangNode.active=!0,this.LotteryBetType.setType(o.TRANG),this.LotteryBoard.setDataBet(o.TRANG),this.LotteryBoard.showListTrangItem(),this.setMessage(n.LOTTERY_SELECT_TRANG)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onXien2Click:function(){this.LotteryState.isBetting()?(this.hideAll(),this.LotteryBetType.setType(o.XIEN_2),this.selectXien2Node.active=!0,this.setMessage(n.LOTTERY_SELECT_XIEN_2)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onXien3Click:function(){this.LotteryState.isBetting()?(this.hideAll(),this.LotteryBetType.setType(o.XIEN_3),this.selectXien3Node.active=!0,this.setMessage(n.LOTTERY_SELECT_XIEN_3)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onXien4Click:function(){this.LotteryState.isBetting()?(this.hideAll(),this.LotteryBetType.setType(o.XIEN_4),this.selectXien4Node.active=!0,this.setMessage(n.LOTTERY_SELECT_XIEN_4)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onLoClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectLoNode.active=!0,this.LotteryBetType.setType(o.LO),this.setMessage(n.LOTTERY_SELECT_LO)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onDeClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectDeNode.active=!0,this.LotteryBetType.setType(o.DE),this.setMessage(n.LOTTERY_SELECT_DE)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onJackpotClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.LotteryBetType.setType(o.HU),this.setMessage(n.LOTTERY_SELECT_HU),this.LotteryFooter.onHuSelected()):this.Lottery.showToast(n.LOTTERY_NOT_START)},onCuocLaiClick:function(){this.LotteryState.isBetting()?(this.hideAll(),this.selectCuocLaiNode.active=!0,this.LotteryBoard.reset(),this.LotteryBetType.setType(o.RE_BETS),this.setMessage(n.LOTTERY_SELECT_REBETS)):this.Lottery.showToast(n.LOTTERY_NOT_START)},onSendBetsClick:function(){this.Lottery.send()},initMessageBet:function(t){this.contentBetNode.removeAllChildren(!0);var e=this.LotteryFooter.getBet();t.amount=e;var i=this.getBetItem(t);this.contentBetNode.addChild(i)},getBetItem:function(t){var e=cc.instantiate(this.betItemPrefab);return e.getComponent("LotteryBetItem").init(t),e},setMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.messageLabel.string=t,this.messageEffectNode.active=""!==t},hideAll:function(){this.setMessage(),this.LotteryBoard.reset(),this.LotteryBetType.setType(o.IS_CHANGE_BET),this.contentBetNode.removeAllChildren(!0),this.selectChanNode.active=!1,this.selectLeNode.active=!1,this.selectDauNode.active=!1,this.selectDuoiNode.active=!1,this.selectDoNode.active=!1,this.selectTrangNode.active=!1,this.selectXien2Node.active=!1,this.selectXien3Node.active=!1,this.selectXien4Node.active=!1,this.selectLoNode.active=!1,this.selectDeNode.active=!1,this.selectCuocLaiNode.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","./LotteryBetType":"LotteryBetType","./LotteryConstant":"LotteryConstant"}],LotteryFooter:[function(t,e,i){"use strict";cc._RF.push(e,"a5ee1PM4QREXLEZ9xAKqxdY","LotteryFooter");t("../../helper/Config");var o=t("./LotteryConfig");cc.Class({extends:cc.Component,properties:{chipLayOutNode:cc.Node,chipItemPrefab:cc.Prefab,changeBalanceNode:cc.Node,changeBalancePrefab:cc.Prefab},init:function(t){this.Lottery=t,this.LotteryBoard=t.LotteryBoard,this.LotteryEvent=t.LotteryEvent},onLoad:function(){this.bet=0,this.initChip()},initChip:function(){this.listItem=[],this.chipLayOutNode.removeAllChildren(!0);for(var t=o.LIST_CHIP_LOTTERY,e=0,i=t.length;e<i;e++){var n=cc.instantiate(this.chipItemPrefab),s=t[e]===o.BET_HU;t&&n.getComponent("LotteryChipItem").init(this.Lottery,t[e],e,s),this.chipLayOutNode.addChild(n),this.listItem.push(n)}this.listItem[0]&&this.listItem[0].getComponent("LotteryChipItem").onClick()},initFinishGame:function(){this.hideAllItem(),this.listItem[0]&&this.listItem[0].getComponent("LotteryChipItem").onClick()},onHuSelected:function(){for(var t=0,e=this.listItem.length;t<e;t++){if(this.listItem[t].getComponent("LotteryChipItem").getBet()===o.BET_HU)return void this.listItem[t].getComponent("LotteryChipItem").onClick()}},hideAllItem:function(){for(var t=0,e=this.listItem.length;t<e;t++)this.listItem[t].getComponent("LotteryChipItem").hideSelectNode()},addBets:function(t){this.bet+=t,this.initMessageBet()},setBet:function(t){this.bet=t,this.initMessageBet()},getBet:function(){return this.bet},initMessageBet:function(){var t=this.LotteryBoard.getDataBet();t&&this.LotteryEvent.initMessageBet(t)},showChangeBalance:function(t){if(0!==t){t>0&&this.changeBalanceNode.removeAllChildren(!0);var e=cc.instantiate(this.changeBalancePrefab);e.setPosition(0,0),e.parent=this.changeBalanceNode,e.getComponent("ChangeBalance").showChangeBalance(t)}}}),cc._RF.pop()},{"../../helper/Config":"Config","./LotteryConfig":"LotteryConfig"}],LotteryHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"0dacdFFLIpD+Kw/zCd4pRd2","LotteryHandlerRequest");var o=t("./LotteryConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{Lottery:null,init:function(t){this.Lottery=t},onPublicMessage:function(t){this.Lottery.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var o=0;o<i.length;o++)switch(i[o]){case n.MONEY:this.Lottery.initMoney(e)}},onRoomVarsUpdate:function(t){for(var e=t.changedVars,i=0;i<e.length;i++)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.BET:this.Lottery.handleBet(e);break;case o.CHAT:this.Lottery.handleChat(e);break;case o.START:this.Lottery.handleStart(e);break;case o.UPDATE:this.Lottery.handleUpdate(e);break;case o.FINISH:this.Lottery.handleFinish(e);break;case o.GET_TOP:this.Lottery.handleGetTop(e);break;case n.REQUEST_CHAT_SEND_CHAT:this.Lottery.handleSendChat(e);break;case n.REQUEST_CHAT_GET_CHAT:this.Lottery.handleGetChat(e);break;case n.MINIGAME_REQUEST:case n.GET_TOP:this.Lottery.MiniGame&&this.Lottery.MiniGame.handleRequest(e)}else{switch(s){case o.BET:this.Lottery.handleBetFail(e)}this.Lottery.showToast(e.msg)}}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./LotteryConstant":"LotteryConstant"}],LotteryHeader:[function(t,e,i){"use strict";cc._RF.push(e,"b6f74cwX5xIlI9It8Lpi1TG","LotteryHeader");var o=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Lottery=t,this.LotteryUI=t.LotteryUI},onLoad:function(){},onBackClick:function(){this.Lottery.showProcessingSceneNode(),this.Lottery.sendRequest.send(o.REQUEST_LEFT_ROOM)},onRankClick:function(){this.LotteryUI.showRankFormNode()},onMenuClick:function(){this.LotteryUI.showHideMenuButton()},onSettingClick:function(){this.LotteryUI.showSettingFormNode()},onTutorialClick:function(){this.LotteryUI.showTutorialFormNode(),this.Lottery.Tutorial.showTutorialByGameName(o.LOTTERY)}}),cc._RF.pop()},{"../../helper/Constant":"Constant"}],LotteryHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"3ca6cK1pQtMJYlV9ado3F0w","LotteryHistoryItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,matchGameIdLabel:cc.Label,totalBetLabel:cc.Label,totalBlanceLabel:cc.Label,detailsButtonNode:cc.Node,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e,i){if(this.LotteryHistory=t,e){this.data=e,e.created_at>=1e10&&(e.created_at=parseInt(e.created_at/1e3)),e.time>=1e10&&(e.time=parseInt(e.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(e.created_at),this.matchGameIdLabel.string=e.match_game_id,this.totalBlanceLabel.string=o.numberWithCommas(e.amount_change),this.totalBetLabel.string=o.numberWithCommas(this.getTotalBet(e));var n=i%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=n}else this.node.active=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.LotteryHistory.onMouseEnterItem(t.data)},this.onMouseLeave=function(){t.LotteryHistory.onMouseLeaveItem()},cc.sys.isBrowser&&(this.detailsButtonNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.detailsButtonNode.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},getTotalBet:function(t){for(var e=t.bets,i=0,o=0,n=e.length;o<n;o++)i+=e[o].total_bets;return i}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],LotteryHistory:[function(t,e,i){"use strict";cc._RF.push(e,"7a9c5IN/UVEDJFRSV0pGxqY","LotteryHistory");t("../../helper/Constant");var o=t("../../prefab/item/PaginationItem"),n=t("../../helper/Message"),s=t("../../scene/game-lottery/LotteryConfig"),a=t("./LotteryDetailsHistory");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,historyItemPrefab:cc.Prefab,historyContentNode:cc.Node,pageNode:cc.Node,pagePreviewPreview:o,pagePreView:o,pageNext:o,pageNextNext:o,listPageNumberItem:[o],LotteryDetailsHistory:a},init:function(t){this.Lottery=t,this.LotteryUI=t.LotteryUI,this.LotteryDetailsHistory.init(t)},onLoad:function(){this.data=null},onEnable:function(){this.LotteryDetailsHistory.node.active=!1,this.loadData()},onMouseEnterItem:function(t){this.LotteryDetailsHistory.initData(t),this.LotteryDetailsHistory.node.active=!0},onMouseLeaveItem:function(){this.LotteryDetailsHistory.node.active=!1},loadData:function(){var t=this;if(this.data)this.setPage(0);else{var e={token:this.Lottery.getToken(),user_id:this.Lottery.getUserId()};this.Lottery.api.getHistoryLottery(e,function(e){t.data=t.changeData(e.data[0]),t.setPage(0)},function(e){t.hideLoadingNode(),t.Lottery.showDialogMessage(n.HISTORY_TITLE,e.msg)})}},showLoadingNode:function(){this.loadingNode.active=!0,this.historyContentNode.active=!1,this.pageNode.active=!1},hideLoadingNode:function(){this.loadingNode.active=!1,this.historyContentNode.active=!0,this.pageNode.active=!0},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.hideLoadingNode(),this.page=e,this.listPagination=[],this.historyContentNode.removeAllChildren(!0),this.data&&this.data.length>0?function(){t.showListContent(e);var i=parseInt(t.data.length/s.NUMBER_DETAIL_ITEM);if(i=i*s.NUMBER_DETAIL_ITEM===t.data.length?i-1:i,t.showNumberPagination(i),t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",i),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var o=0,n=t.listPageNumberItem.length;o<n;o++)t.listPageNumberItem[o].init(o+1,o),t.listPageNumberItem[o].enable(),o===e&&t.listPageNumberItem[o].disable(),t.listPagination.push(t.listPageNumberItem[o]);else if(e+2>=i){var a=i;if(i>4)for(var r=t.listPageNumberItem.length-1;r>=0;r--)t.listPageNumberItem[r].init(a+1,a),t.listPageNumberItem[r].enable(),a===e&&t.listPageNumberItem[r].disable(),t.listPagination.push(t.listPageNumberItem[r]),a--;else{for(var c=0,h=t.listPageNumberItem.length;c<h;c++)t.listPageNumberItem[c].enable();t.listPageNumberItem[e].disable()}}else for(var l=-2,u=0,d=t.listPageNumberItem.length;u<d;u++)t.listPageNumberItem[u].init(e+l+1,e+l),t.listPageNumberItem[u].enable(),0===l&&t.listPageNumberItem[u].disable(),t.listPagination.push(t.listPageNumberItem[u]),l++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e+2>=i?(t.pagePreView.init("<",e-1),t.pageNext.init(">",i)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var m=t;if(!t.isEvent){for(var p in t.listPagination){var f=t.listPagination[p].getComponent("PaginationItem").pageOffButtonNode;f.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();m.setPage(t)},f)}t.isEvent=!0}}():this.pageNode.active=!1},showNumberPagination:function(t){this.pageNode.active=!0;for(var e=0;e<this.listPageNumberItem.length;e++)this.listPageNumberItem[e].node.active=!1;if(t<4)for(var i=0;i<=t;i++)this.listPageNumberItem[i].node.active=!0;else for(var o=0;o<this.listPageNumberItem.length;o++)this.listPageNumberItem[o].node.active=!0},showListContent:function(t){if(t*s.NUMBER_DETAIL_ITEM<this.data.length)for(var e=t*s.NUMBER_DETAIL_ITEM,i=e,o=e+s.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.data.length){var n=cc.instantiate(this.historyItemPrefab);n.getComponent("LotteryHistoryItem").init(this,this.data[i],i),n.parent=this.historyContentNode}},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},changeData:function(t){for(var e=0,i=t.length;e<i;e++)t[e].bets=[JSON.parse(t[e].bets)],t[e].result=JSON.parse(t[e].result);for(var o=this.initBets(t),n=this.initResult(t),s=0,a=o.length;s<a;s++)n[s].bets=o[s].bets;return n},initResult:function(t){for(var e=[],i=0,o=t.length;i<o;i++)if(0===i)e[0]={},e[0].match_game_id=t[i].match_game_id,e[0].result=t[i].result,e[0].created_at=t[i].created_at,e[0].amount_change=t[i].result_amount;else{var n=e.length;e[n-1].match_game_id===t[i].match_game_id?e[n-1].amount_change+=t[i].result_amount:(e[n]={},e[n].match_game_id=t[i].match_game_id,e[n].result=t[i].result,e[n].created_at=t[i].created_at,e[n].amount_change=t[i].result_amount)}return e},initBets:function(t){for(var e=[],i=0,o=t.length;i<o;i++)if(0===i){e[0]={},e[0].bets=[],e[0].match_game_id=t[i].match_game_id;var n=this.instantiateBet(t[i]);e[0].bets.push(n)}else{var s=e.length;if(e[s-1].match_game_id===t[i].match_game_id){var a=this.instantiateBet(t[i]);e[s-1].bets.push(a)}else{e[s]={},e[s].bets=[],e[s].match_game_id=t[i].match_game_id;var r=this.instantiateBet(t[i]);e[s].bets.push(r)}}return e},instantiateBet:function(t){var e={};return e.type=t.type,e.bets=t.bets[0],e.total_bets=t.amount,e.amount=t.amount,e}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../prefab/item/PaginationItem":"PaginationItem","../../scene/game-lottery/LotteryConfig":"LotteryConfig","./LotteryDetailsHistory":"LotteryDetailsHistory"}],LotteryInfo:[function(t,e,i){"use strict";cc._RF.push(e,"e10761kN2tFLrm6FxeyCRnD","LotteryInfo");var o=t("../../prefab/mini-game/item/JackpotItem"),n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{timeBettingLabel:cc.Label,timeFinishLabel:cc.Label,avatarSprite:cc.Sprite,nameLabel:cc.Label,moneyLabel:cc.Label,jackpotItem:o},init:function(t){this.Lottery=t},onLoad:function(){},initUser:function(t){if(t){var e=t.avatar,i=t.nick_name,o=this.Lottery.getSFSMySelf().variables.money.value;this.setNicknameLabel(i),this.setAvatar(e),this.setMoney(o)}},onDestroy:function(){clearInterval(this.timeInterval)},initTime:function(t){t&&(this.time=t.time_remain,this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.setTimeLabel(this.time)}.bind(this),1e3))},setTimeLabel:function(t){var e=n.numberToTime(t);this.Lottery.LotteryState.isBetting()?(this.timeBettingLabel.node.active=!0,this.timeFinishLabel.node.active=!1,this.timeBettingLabel.string=e):this.Lottery.LotteryState.isFinish()&&(this.timeBettingLabel.node.active=!1,this.timeFinishLabel.node.active=!0,this.timeFinishLabel.string=e)},setNicknameLabel:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(n.convertUrlToLocation(t),function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},setMoney:function(t){this.moneyLabel.string=n.numberWithCommas(t)},setJackpotWithoutAnimation:function(t){this.jackpotItem.setMoneyWithoutAnimation(t)},setJackpot:function(t){this.jackpotItem.setMoney(t)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],LotteryJackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"7869car6QZEt5eHzIDVxfHm","LotteryJackpotItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,noSprite:cc.Sprite,accountLabel:cc.Label,timeLabel:cc.Label,valueLabel:cc.Label,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame,listRank:[cc.SpriteFrame]},init:function(t,e){if(this.reset(),t){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),t.time>=1e10&&(t.time=parseInt(t.created_at/1e3)),e<3?(this.noSprite.node.active=!0,this.noSprite.spriteFrame=this.listRank[e]):(this.noLabel.node.active=!0,this.noLabel.string=parseInt(e)+1),this.accountLabel.string=t.nick_name,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at||t.time),this.valueLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.amount);var i=e%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}else this.node.active=!1},onLoad:function(){},reset:function(){this.noLabel.node.active=!1,this.noSprite.node.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],LotteryNumberItem:[function(t,e,i){"use strict";cc._RF.push(e,"db9b6at/19D2rUuKliUQZrF","LotteryNumberItem");t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label,selectBetsNode:cc.Node,selectBetsDe:cc.Node,selectDauNode:cc.Node,selectDuoiNode:cc.Node,selectXienNode:cc.Node,selectDeNode:cc.Node,effectNode:cc.Node},init:function(t,e){this.Lottery=t,this.LotteryBoard=t.LotteryBoard,this.number=e},onLoad:function(){var t=this;this.onMouseEnter=function(){t.LotteryBoard.onMouseEnterItem(t.number)},this.onMouseLeave=function(){t.LotteryBoard.onMouseLeaveItem(t.number)},this.onMouseDown=function(){t.onClick()},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node),this.node.on(cc.Node.EventType.MOUSE_DOWN,this.onMouseDown,this.node)),this.reset(),this.numberLabel.node.active=!1},start:function(){},onClick:function(){this.isDauSelected()||this.isDuoiSelected()||this.LotteryBoard.onItemSelected(this.number)},getNumberItem:function(){return this.number},isDauSelected:function(){return this.is_dau},isDuoiSelected:function(){return this.is_duoi},isLoXienSelected:function(){return this.is_loxien},isLoDeSelected:function(){return this.is_lode},isHuSelected:function(){return this.is_Hu},setDauSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_dau=t},setDuoiSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_duoi=t},setLoXienSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_loxien=t},setLoDeSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_lode=t},setHuSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_Hu=t},showSelectBetsNode:function(){this.selectBetsNode.active=!0},showSelectChanNode:function(){this.selectXienNode.active=!0},showSelectLeNode:function(){this.selectXienNode.active=!0},showSelectDoNode:function(){this.selectXienNode.active=!0},showSelectTrangNode:function(){this.selectXienNode.active=!0},showSelectDauNode:function(){this.isDauSelected()||(this.selectDauNode.active=!0)},hideSelectDauNode:function(){this.isDauSelected()||(this.selectDauNode.active=!1)},showSelectDuoiNode:function(){this.isDuoiSelected()||(this.selectDuoiNode.active=!0)},hideSelectDuoiNode:function(){this.isDuoiSelected()||(this.selectDuoiNode.active=!1)},showSelectLoXienNode:function(){this.selectXienNode.active=!0},hideSelectLoXienNode:function(){this.selectXienNode.active=!1},showSelectLoNode:function(){this.selectXienNode.active=!0},hideSelectLoNode:function(){this.selectXienNode.active=!1},showSelectDeNode:function(){this.selectDeNode.active=!0},hideSelectDeNode:function(){this.selectDeNode.active=!1},showSelectHuNode:function(){this.selectDeNode.active=!0},hideSelectHuNode:function(){this.selectDeNode.active=!1},showEffectNode:function(){this.effectNode.active=!0,this.selectBetsNode.active=!0},showEffectDeNode:function(){this.effectNode.active=!0,this.selectBetsDe.active=!0},reset:function(){this.setDauSelected(!1),this.setDuoiSelected(!1),this.setLoXienSelected(!1),this.setLoDeSelected(!1),this.setHuSelected(!1),this.selectDauNode.active=!1,this.selectDuoiNode.active=!1,this.selectXienNode.active=!1,this.selectDeNode.active=!1,this.selectBetsNode.active=!1,this.effectNode.active=!1,this.selectBetsDe.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],LotteryPageViewItem:[function(t,e,i){"use strict";cc._RF.push(e,"45ae9BoqiZBmLB6XLS8NRao","LotteryPageViewItem");var o=t("./LotteryResultItem");cc.Class({extends:cc.Component,properties:{listResultItem:[o]},init:function(t,e,i){this.Lottery=t,this.histories=e,this.isDau=i;for(var o=0;o<this.listResultItem.length;o++)this.listResultItem[o].init(this.Lottery,o)},onLoad:function(){this.initResult(this.histories)},initResult:function(t){if(t){for(var e=t.result||t.results,i=0,o=this.listResultItem.length;i<o;i++)this.listResultItem[i].reset();for(var n=0,s=e.length;n<s;n++){var a=this.isDau?parseInt(e[n]/10):e[n]%10,r=this.isDau?e[n]%10:parseInt(e[n]/10),c=0===n&&e.length>1;this.listResultItem[a].addResult(r,c)}for(var h=0,l=this.listResultItem.length;h<l;h++)this.listResultItem[h].editResult()}},addResult:function(t,e){if(t){for(var i=t.result||t.results,o=0,n=this.listResultItem.length;o<n;o++)this.listResultItem[o].reset();for(var s=0,a=i.length;s<a;s++){var r=this.isDau?parseInt(i[s]/10):i[s]%10,c=this.isDau?i[s]%10:parseInt(i[s]/10),h=!(0!==s||!e);this.listResultItem[r].addResult(c,h)}for(var l=0,u=this.listResultItem.length;l<u;l++)this.listResultItem[l].editResult()}},getMatchGameId:function(){return this.histories.match_game_id}}),cc._RF.pop()},{"./LotteryResultItem":"LotteryResultItem"}],LotteryRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"6f91fkYKXRIi68LvTDdsYMA","LotteryRankItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,noSprite:cc.Sprite,accountLabel:cc.Label,valueLabel:cc.Label,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame,listRankSpriteFrame:[cc.SpriteFrame]},init:function(t,e){if(t){this.data=t,this.reset(),e>2?(this.noLabel.string=parseInt(e)+1,this.noLabel.node.active=!0):(this.noSprite.spriteFrame=this.listRankSpriteFrame[e],this.noSprite.node.active=!0),this.accountLabel.string=t.nick_name,this.valueLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount||t.amount);var i=e%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}},onLoad:function(){},reset:function(){this.noLabel.node.active=!1,this.noSprite.node.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],LotteryResultItem:[function(t,e,i){"use strict";cc._RF.push(e,"bb39d7fGKhKg4TqlL344HuC","LotteryResultItem");t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberResultRickText:cc.RichText},init:function(t,e){this.Lottery=t,this.index=e},start:function(){},addResult:function(t,e){this.is_de_select=!1,this.listNumber||(this.listNumber=[]),this.listNumber.push(t),e&&(this.numberDe=t,this.isDe=!0);var i=this.getTxt();this.numberResultRickText.string=i,this.txt=i},getTxt:function(){for(var t=this.listNumber.sort(function(t,e){return t-e}),e="",i=0,o=t.length;i<o;i++){var n=t[i];this.isDe&&this.numberDe===t[i]&&!this.is_de_select?(e+="<color = RED>"+n+"</color>-",this.is_de_select=!0):e+=n+"-"}return e},editResult:function(){var t=this.numberResultRickText.string;this.numberResultRickText.string=t.substring(0,t.length-1),this.txt=this.numberResultRickText.string},setIsDe:function(){},reset:function(){this.numberResultRickText.string="",this.txt="",this.numberDe=null,this.listNumber=[]}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],LotteryResult:[function(t,e,i){"use strict";cc._RF.push(e,"bab84dN+gBGWb1nmnL7h8Ni","LotteryResult");t("../../util/FormatUtil"),t("../../prefab/lottery/LotteryResultItem");var o=t("../../scene/game-lottery/LotteryConfig");cc.Class({extends:cc.Component,properties:{contentPageView:cc.PageView,contentPageViewDuoi:cc.PageView,nextButtonNode:cc.Node,previewButtonNode:cc.Node,matchGameIdLabel:cc.Label,dauButtonNode:cc.Node,duoiButtonNode:cc.Node,contentPageviewItemPrefab:cc.Prefab},init:function(t){this.Lottery=t,this.LotteryUI=t.LotteryUI},onLoad:function(){},start:function(){},update:function(t){this.is_update||(this.scrollToIndex(this.index,0),this.contentPageViewDuoi.node.active=!1,this.showMatchGameId(),this.is_update=!0)},initHistory:function(t){if(t.length>6?this.histories=t.splice(t.length-3):this.histories=t,this.index=this.histories.length-1,this.contentPageView.node.active=!0,this.contentPageViewDuoi.node.active=!0,this.contentPageView.content.removeAllChildren(!0),this.contentPageViewDuoi.content.removeAllChildren(!0),this.histories)for(var e=0,i=this.histories.length;e<i;e++)this.createContentPage(this.histories[e])},initResult:function(t){},addResult:function(t,e){t&&(this.histories||(this.histories=[]),this.histories.length<0&&this.histories.push(t),this.index=this.histories.length-1,t.match_game_id===this.histories[this.index].match_game_id?(this.histories[this.index]=t,this.listPageViewItem[this.index].addResult(t,e),this.listPageViewItemDuoi[this.index].addResult(t,e)):(this.histories.push(t),this.createContentPage(t)),this.histories.length>o.MAX_HISTORY&&(this.histories.splice(0,1),this.listPageViewItem.splice(0,1),this.listPageViewItemDuoi.splice(0,1),this.contentPageView.removePageAtIndex(0),this.contentPageViewDuoi.removePageAtIndex(0)),this.scrollToIndex(this.index,o.TIME_SCROLL_PAGEVIEW))},createContentPage:function(t){var e=cc.instantiate(this.contentPageviewItemPrefab),i=cc.instantiate(this.contentPageviewItemPrefab),o=e.getComponent("LotteryPageViewItem"),n=i.getComponent("LotteryPageViewItem");o.init(this.Lottery,t,!0),n.init(this.Lottery,t,!1),this.contentPageView.addPage(e),this.contentPageViewDuoi.addPage(i),this.listPageViewItem||(this.listPageViewItem=[],this.listPageViewItemDuoi=[]),this.listPageViewItem.push(o),this.listPageViewItemDuoi.push(n)},onPageviewChange:function(){this.index=this.contentPageView.getCurrentPageIndex(),this.showMatchGameId()},onPageviewDuoiChange:function(){this.index=this.contentPageViewDuoi.getCurrentPageIndex(),this.showMatchGameId()},onBackClick:function(){this.index>0&&(this.index--,this.scrollToIndex(this.index,o.TIME_SCROLL_PAGEVIEW))},onNextClick:function(){var t=this.histories.length;this.index<t&&(this.index++,this.scrollToIndex(this.index,o.TIME_SCROLL_PAGEVIEW))},onHistoryClick:function(){this.LotteryUI.showHistoryFormNode()},onDauClick:function(){this.dauButtonNode.active=!0,this.duoiButtonNode.active=!1,this.contentPageView.node.active=!0,this.contentPageViewDuoi.node.active=!1,this.scrollToIndex(this.index,0)},onDuoiClick:function(){this.dauButtonNode.active=!1,this.duoiButtonNode.active=!0,this.contentPageView.node.active=!1,this.contentPageViewDuoi.node.active=!0,this.scrollToIndex(this.index,0)},showMatchGameId:function(){var t=this.contentPageView.getPages()[this.index];if(t){var e=t.getComponent("LotteryPageViewItem").getMatchGameId();this.setMatchGameId(e),this.checkShowHideButtonNode()}},scrollToIndex:function(t,e){var i=this.contentPageView.node.active?e:0,o=this.contentPageViewDuoi.node.active?e:0;this.contentPageView.scrollToPage(t,i),this.contentPageViewDuoi.scrollToPage(t,o)},setMatchGameId:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.matchGameIdLabel.string="#"+t},checkShowHideButtonNode:function(){0===this.index?this.previewButtonNode.active=!1:this.previewButtonNode.active=!0,this.index===this.histories.length-1?this.nextButtonNode.active=!1:this.nextButtonNode.active=!0}}),cc._RF.pop()},{"../../prefab/lottery/LotteryResultItem":"LotteryResultItem","../../scene/game-lottery/LotteryConfig":"LotteryConfig","../../util/FormatUtil":"FormatUtil"}],LotteryRoomChat:[function(t,e,i){"use strict";cc._RF.push(e,"d59eaGuVsFFi4GrjeoKZfTX","LotteryRoomChat");var o=t("../../helper/Constant"),n=t("../../util/BrowserUtil"),s=t("./LotteryConstant");cc.Class({extends:cc.Component,properties:{roomNode:cc.Node,wordNode:cc.Node,onChatRoomButtonNode:cc.Node,offChatRoomButtonNode:cc.Node,onChatWordButtonNode:cc.Node,offChatWordButtonNode:cc.Node,quickChatNode:cc.Node,chatEditBox:cc.EditBox,chatRoomScrollView:cc.ScrollView,chatWordScrollView:cc.ScrollView,chatItemPrefab:cc.Prefab},init:function(t){this.Lottery=t},onLoad:function(){},start:function(){this.Lottery.sendRequest.sendNoPrefixToZone("CHAT."+o.REQUEST_CHAT_GET_CHAT)},initChatWord:function(t){var e=t.chat;e&&(this.instanceChatItem(this.chatWordScrollView,e),this.chatWordScrollView.scrollToBottom(0))},initChatRoom:function(t){var e=t.chats;e&&(this.instanceChatItem(this.chatRoomScrollView,e),this.chatRoomScrollView.scrollToBottom(0))},handleAddChatWord:function(t){t&&(this.instanceChatItem(this.chatWordScrollView,t),this.chatWordScrollView.scrollToBottom(.25))},handleFailChatWord:function(t){t&&(this.instanceChatItem(this.chatWordScrollView,t,!0),this.chatWordScrollView.scrollToBottom(.25))},handleChatRoom:function(t){var e=t.chat;e&&(this.instanceChatItem(this.chatRoomScrollView,e),this.chatRoomScrollView.scrollToBottom(.25))},addChat:function(t){if(t){var e={msg:t,nick_name:"H\u1ec7 Th\u1ed1ng"};this.instanceAddChatItem(this.chatRoomScrollView,e),this.chatRoomScrollView.scrollToBottom(.25)}},instanceAddChatItem:function(t,e,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)this.createChatItem(t,e[o]);else this.createChatItem(t,e)},instanceChatItem:function(t,e,i){if(i)this.createChatItem(t,e,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)this.createChatItem(t,e[o]);else this.createChatItem(t,e)},createChatItem:function(t,e,i){var o=cc.instantiate(this.chatItemPrefab);i?o.getComponent("ChatItem").initFail(e):o.getComponent("ChatItem").init(e),o.parent=t.content},scrollToBottom:function(){},onSendChatClick:function(){var t=this.chatEditBox.string;this.isChatRoom()?this.sendChatRoom(t):this.sendChatWord(t)},sendChatRoom:function(t){if(this.unFocusChatEditBox(),""!==t.trim()){var e={msg:t};this.Lottery.sendRequest.send(s.CHAT,e),this.chatEditBox.string=""}},sendChatWord:function(t){if(this.unFocusChatEditBox(),""!==t.trim()){var e={msg:t};this.chatEditBox.string="",n.focusGame(),this.focusChatEditBox(),this.Lottery.sendRequest.sendNoPrefixToZone("CHAT."+o.REQUEST_CHAT_SEND_CHAT,e)}},onChatRoomClick:function(){this.roomNode.active=!0,this.wordNode.active=!1,this.onChatRoomButtonNode.active=!0,this.offChatRoomButtonNode.active=!1,this.onChatWordButtonNode.active=!1,this.offChatWordButtonNode.active=!0,this.chatRoomScrollView.scrollToBottom(0)},onChatWordClick:function(){this.roomNode.active=!1,this.wordNode.active=!0,this.onChatRoomButtonNode.active=!1,this.offChatRoomButtonNode.active=!0,this.onChatWordButtonNode.active=!0,this.offChatWordButtonNode.active=!1,this.chatWordScrollView.scrollToBottom(0)},isChatRoom:function(){return this.onChatRoomButtonNode.active}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../util/BrowserUtil":"BrowserUtil","./LotteryConstant":"LotteryConstant"}],LotteryState:[function(t,e,i){"use strict";cc._RF.push(e,"e83bdfdcqdKN7w4tA9Idlw6","LotteryState");e.exports={currentState:null,IS_CHANGE_BET:"IS_CHANGE_BET",BETTING:"BETTING",FINISH:"FINISH",setState:function(t){this.currentState=t},setBetting:function(){this.currentState=this.BETTING},setFinish:function(){this.currentState=this.FINISH},isBetting:function(){return this.currentState===this.BETTING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],LotteryTop:[function(t,e,i){"use strict";cc._RF.push(e,"9fc22QlNqpPMIShdKEdw7fr","LotteryTop");var o=t("../../prefab/item/PaginationItem"),n=t("../../util/FormatUtil"),s=t("./LotteryConfig"),a=t("./LotteryConstant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,jackpotNode:cc.Node,rankNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,contentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab,jackpotItemPrefab:cc.Prefab,jackpotContentNode:cc.Node,pageNode:cc.Node,pagePreviewPreview:o,pagePreView:o,pageNext:o,pageNextNext:o,listPageNumberItem:[o]},init:function(t){this.Lottery=t},onLoad:function(){},onEnable:function(){this.showLoadingNode(),this.onJackpotClick(),this.Lottery.sendRequest.send(a.GET_TOP)},handleGetTop:function(t){this.hideLoadingNode();var e=t.tops_win,i=t.tops_jackpot;this.contentScrollView.content.removeAllChildren(!0),this.jackpotContentNode.removeAllChildren(!0);for(var o=0,s=e.length;o<s;o++){var a=cc.instantiate(this.rankItemPrefab);a.getComponent("LotteryRankItem").init(e[o],o),this.contentScrollView.content.addChild(a)}i&&(this.jackpot=n.sortDataTimeByTime2(i),this.setPage(0))},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOnButtonNode.active=!0,this.rankOffButtonNode.active=!1,this.rankNode.active=!0},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOnButtonNode.active=!0,this.jackpotOffButtonNode.active=!1,this.jackpotNode.active=!0},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.page=e,this.listPagination=[],this.jackpotContentNode.removeAllChildren(!0),this.jackpot&&this.jackpot.length>0?function(){t.showListContent(e);var i=parseInt(t.jackpot.length/s.NUMBER_DETAIL_ITEM);if(i=i*s.NUMBER_DETAIL_ITEM===t.jackpot.length?i-1:i,t.showNumberPagination(i),t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",i),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var o=0,n=t.listPageNumberItem.length;o<n;o++)t.listPageNumberItem[o].init(o+1,o),t.listPageNumberItem[o].enable(),o===e&&t.listPageNumberItem[o].disable(),t.listPagination.push(t.listPageNumberItem[o]);else if(e+2>=i){var a=i;if(i>4)for(var r=t.listPageNumberItem.length-1;r>=0;r--)t.listPageNumberItem[r].init(a+1,a),t.listPageNumberItem[r].enable(),a===e&&t.listPageNumberItem[r].disable(),t.listPagination.push(t.listPageNumberItem[r]),a--;else{for(var c=0,h=t.listPageNumberItem.length;c<h;c++)t.listPageNumberItem[c].enable();t.listPageNumberItem[e].disable()}}else for(var l=-2,u=0,d=t.listPageNumberItem.length;u<d;u++)t.listPageNumberItem[u].init(e+l+1,e+l),t.listPageNumberItem[u].enable(),0===l&&t.listPageNumberItem[u].disable(),t.listPagination.push(t.listPageNumberItem[u]),l++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e+2>=i?(t.pagePreView.init("<",e-1),t.pageNext.init(">",i)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var m=t;if(!t.isEvent){for(var p in t.listPagination){var f=t.listPagination[p].getComponent("PaginationItem").pageOffButtonNode;f.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();m.setPage(t)},f)}t.isEvent=!0}}():this.pageNode.active=!1},showListContent:function(t){if(t*s.NUMBER_DETAIL_ITEM<this.jackpot.length)for(var e=t*s.NUMBER_DETAIL_ITEM,i=e,o=e+s.NUMBER_DETAIL_ITEM;i<o;i++)if(i<this.jackpot.length){var n=cc.instantiate(this.jackpotItemPrefab);n.getComponent("LotteryJackpotItem").init(this.jackpot[i],i),n.parent=this.jackpotContentNode}},showNumberPagination:function(t){this.pageNode.active=!0;for(var e=0;e<this.listPageNumberItem.length;e++)this.listPageNumberItem[e].node.active=!1;if(t<4)for(var i=0;i<=t;i++)this.listPageNumberItem[i].node.active=!0;else for(var o=0;o<this.listPageNumberItem.length;o++)this.listPageNumberItem[o].node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},hideAllButton:function(){this.rankOffButtonNode.active=!0,this.jackpotOffButtonNode.active=!0,this.rankOnButtonNode.active=!1,this.jackpotOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1}}),cc._RF.pop()},{"../../prefab/item/PaginationItem":"PaginationItem","../../util/FormatUtil":"FormatUtil","./LotteryConfig":"LotteryConfig","./LotteryConstant":"LotteryConstant"}],LotteryUI:[function(t,e,i){"use strict";cc._RF.push(e,"a58c8tknwxD1YV1O7WuJs7G","LotteryUI"),cc.Class({extends:cc.Component,properties:{roomChatNode:cc.Node,matchGameIdLabel:cc.Label,menuButtonNode:cc.Node,rankFormNode:cc.Node,historyFormNode:cc.Node,tutorialFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node,lotoSkeleton:sp.Skeleton},onLoad:function(){this.dialogRank=this.rankFormNode.getComponent("DialogForm"),this.dialogHistory=this.historyFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormTutorial=this.tutorialFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormLogOut=this.logOutFormNode.getComponent("DialogForm")},setMatchGameId:function(t){this.matchGameIdLabel.string="#"+t},showLotoSkeleton:function(){this.lotoSkeleton.clearTracks(),this.lotoSkeleton.setAnimation(0,"spin",!0)},hideLotoSkeleton:function(){this.lotoSkeleton.clearTracks(),this.lotoSkeleton.setAnimation(0,"idle",!1)},showHideMenuButton:function(){this.menuButtonNode.active=!this.menuButtonNode.active},showRankFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogRank.showDialog(t)},showHistoryFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogHistory.showDialog(t)},showTutorialFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.showDialog(t)},hideTutorialFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.hideDialog(t)},showSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)},hideSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)},showLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.showDialog(t)},hideLogOutFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormLogOut.hideDialog(t)},showDialogMessage:function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()},hideDialogMessage:function(){this.dialogMessageForm.hideDialog()},showProcessingNode:function(){this.processingNode.active=!0},hideProcessingNode:function(){this.processingNode.active=!1},showProcessingSceneNode:function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)},hideProcessingSceneNode:function(){this.processingSceneNode.active=!1},showHideRoomChatNode:function(){this.roomChatNode.active=!this.roomChatNode.active}}),cc._RF.pop()},{}],Lottery:[function(t,e,i){"use strict";cc._RF.push(e,"561e29rgv5I9pQbIz92rwLQ","Lottery");var o=t("../../base/BaseScene"),n=t("./LotteryEvent"),s=t("./LotteryHeader"),a=t("./LotteryFooter"),r=t("./LotteryRoomChat"),c=t("./LotteryHandlerRequest"),h=t("./LotteryState"),l=t("./LotteryBoard"),u=t("./LotteryInfo"),d=t("./LotteryBetType"),m=t("./LotteryResult"),p=t("./LotteryBets"),f=t("./LotteryTop"),g=t("./LotteryEffect"),_=t("./LotteryHistory"),S=t("./LotteryUI"),C=t("../../prefab/form/Tutorial"),N=t("../../prefab/form/Setting"),E=t("../../prefab/form/LogOut"),T=t("../../prefab/News"),I=t("../../prefab/Toast"),v=t("../../ui/dialog/DialogMessage"),y=t("../../ui/Processing"),B=t("../../ui/ProcessingScene"),L=t("./LotteryConfig"),R=t("./LotteryConstant"),A=t("../../helper/Constant"),M=t("../../helper/Message"),b=t("../../object/Audio");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,minigamePrefab:cc.Prefab,minigameContainerNode:cc.Node,LotteryHeader:s,LotteryEvent:n,LotteryBoard:l,LotteryInfo:u,LotteryRoomChat:r,LotteryFooter:a,LotteryResult:m,LotteryBets:p,LotteryEffect:g,LotteryUI:S,LotteryTop:f,LotteryHistory:_,Tutorial:C,Setting:N,LogOut:E,News:T,Toast:I,DialogMessage:v,Processing:y,ProcessingScene:B,Audio:b},onLoad:function(){this._super(),this.setSceneName(A.SCENE_GAME_LOTTERY),this.sfsManager.setController(this),this.LotteryHandlerRequest=c,this.LotteryState=h,this.LotteryBetType=d,this.LotteryEvent.init(this),this.LotteryHeader.init(this),this.LotteryBoard.init(this),this.LotteryInfo.init(this),this.LotteryFooter.init(this),this.LotteryRoomChat.init(this),this.LotteryResult.init(this),this.LotteryEffect.init(this),this.LotteryBets.init(this),this.LotteryTop.init(this),this.LotteryHistory.init(this),this.Tutorial.init(this),this.Setting.init(this),this.LogOut.init(this),this.LotteryHandlerRequest.init(this),this.onPublicMessage=this.LotteryHandlerRequest.onPublicMessage.bind(this.LotteryHandlerRequest),this.onRoomVarsUpdate=this.LotteryHandlerRequest.onRoomVarsUpdate.bind(this.LotteryHandlerRequest),this.onUserVarsUpdate=this.LotteryHandlerRequest.onUserVarsUpdate.bind(this.LotteryHandlerRequest),this.onResponse=this.LotteryHandlerRequest.onResponse.bind(this.LotteryHandlerRequest),this.reset(),this.initPlayers(),this.initRoomInfo()},onEnable:function(){this.sfsManager.removeEventResponse(),this.addEventListeners(),this.initTempRequests(),this.initMinigame(),this.LotteryState.isFinish()&&this.historyTypeFinish&&this.LotteryEffect.showSelectAllBets(this.historyTypeFinish.results),this.LotteryBetType.setType(d.IS_CHANGE_BET)},onDestroy:function(){this.removeEventListeners(),this.clearAllTimeout()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initMinigame:function(){this.sfs&&this.sfs.isConnected()&&this.createMinigameNode()},createMinigameNode:function(){if(!this.MiniGame){var t=cc.instantiate(this.minigamePrefab);t.parent=this.minigameContainerNode,this.MiniGame=t.getComponent("MiniGame"),this.MiniGame.init(this)}},initPlayers:function(){this.LotteryInfo.initUser(this.getUser())},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.state||t.data.game_state,i=t.data.number_bets,o=t.data.total_bets,n=t.data.histories;this.LotteryState.setState(e),this.LotteryInfo.initTime(t.data),this.LotteryBets.initBets(t.data),this.LotteryBets.setNumberBets(i),this.LotteryBets.setTotalBets(o),this.LotteryResult.initHistory(n),this.LotteryRoomChat.initChatRoom(t.data),this.setMatchGameId(t.data.match_game_id||0),this.LotteryInfo.setJackpotWithoutAnimation(t.data.jackpot),this.LotteryState.isBetting()?(this.resumeStateBetting(t),this.LotteryUI.hideLotoSkeleton()):this.LotteryState.isFinish()&&(this.resumeStateFinish(t),this.historyTypeFinish=n[n.length-1],this.LotteryUI.showLotoSkeleton())},resumeStateBetting:function(t){},resumeStateFinish:function(t){},initTempRequests:function(){for(var t=this.getTempRequests(),e=0;e<t.length;e++)this.LotteryHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initMoney:function(t){var e=this.getSFSMySelf().variables.money.value;this.LotteryInfo.setMoney(e)},handleGetChat:function(t){this.LotteryRoomChat.initChatWord(t.data)},handleChat:function(t){this.LotteryRoomChat.handleChatRoom(t.data)},handleSendChat:function(t){if(t.status){var e=t.data;this.LotteryRoomChat.handleAddChatWord(e)}else this.LotteryRoomChat.handleFailChatWord(t.msg)},handleStart:function(t){this.LotteryState.setBetting(),this.setMatchGameId(t.data.match_game_id),this.LotteryInfo.initTime(t.data),this.LotteryEvent.hideAll(),this.LotteryBets.reset(),this.LotteryBoard.reset(),this.setSendBets(!1),this.LotteryUI.hideLotoSkeleton()},handleBet:function(t){this.LotteryBets.initBets(t.data),this.saveDataCurrentBets(t.data),this.LotteryEvent.hideAll(),this.setSendBets(!1)},handleBetFail:function(){this.setSendBets(!1)},handleUpdate:function(t){this.LotteryBets.initUpdate(t.data)},handleFinish:function(t){t.data.match_game_id=this.getMatchGameId(),this.LotteryState.setFinish(),this.LotteryEvent.hideAll(),this.LotteryInfo.initTime(t.data),this.LotteryResult.initResult(t.data),this.LotteryEffect.initResult(t.data),this.LotteryBets.handleFinish(),this.LotteryFooter.initFinishGame(),this.setDataFirstBets(this.getDataCurrentBets()),this.LotteryUI.showLotoSkeleton(),this.setSendBets(!1)},handleGetTop:function(t){this.LotteryTop.handleGetTop(t.data)},send:function(){var t=this.LotteryFooter.getBet(),e=this.LotteryBoard.getDataBet();if(!this.getSendBets())if(this.LotteryState.isFinish())this.showToast(M.LOTTERY_NOT_START);else if(this.LotteryBetType.isTypeReBets())this.sendDataFirstbet();else if(e)if(t){var i={bets:e.bets,type:e.type,amount:t};this.checkTypeBetsLoXienHu(e.type)?this.sendDataLoXienHu(i):this.sendBestRequest(i)}else this.showToast(M.LOTTERY_NOT_BET);else this.showToast(M.LOTTERY_NOT_NUMBER)},sendDataFirstbet:function(){var t=this.getDataFirstBets();if(t)for(var e=t.bets,i=0,o=e.length;i<o;i++){var n=e[i];n.bets||(n.bets=[]),this.sendBestRequest(n)}else this.showToast(M.LOTTERY_FIRST_BETS_NOT_SELECT)},sendDataLoXienHu:function(t){var e=t.type,i=t.bets,o=!1;e===d.XIEN_2&&(o=i.length===L.XIEN_2),e===d.XIEN_3&&(o=i.length===L.XIEN_3),e===d.XIEN_4&&(o=i.length===L.XIEN_4),e===d.HU&&(o=i.length===L.HU),o?this.sendBestRequest(t):this.showToast(M.LOTTERY_BETS_NOT_FORMAT)},sendBestRequest:function(t){this.sendRequest.send(R.BET,t),this.setSendBets(!0)},checkTypeBetsLoXienHu:function(t){return t===d.XIEN_2||t===d.XIEN_3||t===d.XIEN_4||t===d.HU},saveDataCurrentBets:function(t){this.currentDataBets||(this.currentDataBets={}),this.currentDataBets.match_game_id=this.getMatchGameId(),this.currentDataBets.bets=t.bets},setDataFirstBets:function(t){t&&(this.firstDataBets=JSON.parse(JSON.stringify(t)))},getDataCurrentBets:function(){return this.currentDataBets},getDataFirstBets:function(){return this.firstDataBets},setSendBets:function(t){this.is_send_bet=t},getSendBets:function(){return this.is_send_bet},setType:function(t){},setMatchGameId:function(t){this.match_game_id=t,this.LotteryUI.setMatchGameId(t)},getMatchGameId:function(){return this.match_game_id},onShowHideRoomChatClick:function(){this.LotteryUI.showHideRoomChatNode()},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.LotteryUI.showDialogMessage(t,e)},hideDialogMessage:function(){this.LotteryUI.hideDialogMessage()},showProcessingNode:function(){this.LotteryUI.showProcessingNode()},hideProcessingNode:function(){this.LotteryUI.hideProcessingNode()},showProcessingSceneNode:function(){this.LotteryUI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.LotteryUI.hideProcessingSceneNode()},clearAllTimeout:function(){},reset:function(){}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","./LotteryBetType":"LotteryBetType","./LotteryBets":"LotteryBets","./LotteryBoard":"LotteryBoard","./LotteryConfig":"LotteryConfig","./LotteryConstant":"LotteryConstant","./LotteryEffect":"LotteryEffect","./LotteryEvent":"LotteryEvent","./LotteryFooter":"LotteryFooter","./LotteryHandlerRequest":"LotteryHandlerRequest","./LotteryHeader":"LotteryHeader","./LotteryHistory":"LotteryHistory","./LotteryInfo":"LotteryInfo","./LotteryResult":"LotteryResult","./LotteryRoomChat":"LotteryRoomChat","./LotteryState":"LotteryState","./LotteryTop":"LotteryTop","./LotteryUI":"LotteryUI"}],LuckyWheelConfig:[function(t,e,i){"use strict";cc._RF.push(e,"0e8a96CH2ZHX7/0meUpC29N","LuckyWheelConfig");e.exports={TIME_SPIN:8,NUMBER_SPIN_TIME:10},cc._RF.pop()},{}],LuckyWheelConstant:[function(t,e,i){"use strict";cc._RF.push(e,"10621YpinlP/7PX+67Q3Qeh","LuckyWheelConstant");e.exports={GOLD_TYPE:1,MONEY_TYPE:0,FREE_SPIN_TYPE:2,FREE_SPIN_TYPE_SLOT_1:100,FREE_SPIN_TYPE_SLOT_2:101,FREE_SPIN_TYPE_SLOT_3:102,FREE_SPIN_TYPE_SLOT_4:103,MISS:5,MISS_2:6,ADD_TURN:3,CARD:4,REQUEST_SPIN:"lucky_wheel.SPIN",SPIN:"SPIN",MESSAGE:"MESSAGE"},cc._RF.pop()},{}],LuckyWheelItem:[function(t,e,i){"use strict";cc._RF.push(e,"629732sbmhEnoFJe0bBdOMY","LuckyWheelItem");var o=t("../lucky-wheel/LuckyWheelConstant"),n=t("../MiniGameConstant");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,goldNode:cc.Node,freeSpinNode:cc.Node,missNode:cc.Node,addTurnNode:cc.Node,moneyLabel:cc.Label,goldLabel:cc.Label,freeSpinLabel:cc.Label,freeSpinGameLabel:cc.Label,freeSpinGameSrite:cc.Sprite,freeDiamondSpriteFrame:cc.SpriteFrame,freeDiamond2SpriteFrame:cc.SpriteFrame,freeMini3CaySpriteFrame:cc.SpriteFrame,freeMiniPokerSpriteFrame:cc.SpriteFrame,freeSlot1SpriteFrame:cc.SpriteFrame,freeSlot2SpriteFrame:cc.SpriteFrame,freeSlot3SpriteFrame:cc.SpriteFrame,freeSlot4SpriteFrame:cc.SpriteFrame},init:function(t){this.data=t,this.iniData(t)},onLoad:function(){},iniData:function(t){switch(this.hideAllNode(),t.type){case o.GOLD_TYPE:this.showGoldNode(t);break;case o.MONEY_TYPE:this.showMoneyNode(t);break;case o.FREE_SPIN_TYPE:case o.FREE_SPIN_TYPE_SLOT_1:case o.FREE_SPIN_TYPE_SLOT_2:case o.FREE_SPIN_TYPE_SLOT_3:case o.FREE_SPIN_TYPE_SLOT_4:this.showFreeSpinNode(t);break;case o.MISS:this.showMissNode(t);break;case o.ADD_TURN:this.showAddTurnNode(t);break;default:this.showMissNode(t)}},showMoneyNode:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t.name},showGoldNode:function(t){this.goldNode.active=!0,this.goldLabel.string=t.name},showFreeSpinNode:function(t){this.freeSpinNode.active=!0,this.freeSpinLabel.string=t.amount;t.game_name;var e=t.id,i=this.getSpriteGame(e);i&&this.freeSpinGameSrite?(this.freeSpinGameLabel.node.active=!1,this.freeSpinGameSrite.node.active=!0,this.freeSpinGameSrite.spriteFrame=i):(this.freeSpinGameSrite.node.active=!1,this.freeSpinGameLabel.node.active=!0)},showMissNode:function(t){this.missNode.active=!0},showAddTurnNode:function(t){this.addTurnNode.active=!0},isFreeMiniGame:function(){return this.data.type===o.FREE_SPIN_TYPE},getSpriteGame:function(t){switch(t){case n.MINI_GAME_ID_MINI_POKER:case n.MINI_GAME_ID_MINI_POKER_2:case n.MINI_GAME_ID_MINI_POKER_3:return this.freeMiniPokerSpriteFrame;case n.MINI_GAME_ID_MINI_3_CAY:case n.MINI_GAME_ID_MINI_3_CAY_2:return this.freeMini3CaySpriteFrame;case n.MINI_GAME_ID_DIAMOND:case n.MINI_GAME_ID_DIAMOND_2X:case n.MINI_GAME_ID_DIAMOND_3:return this.freeDiamondSpriteFrame;case n.MINI_GAME_ID_DIAMOND_2:case n.MINI_GAME_ID_DIAMOND_2_2:return this.freeDiamond2SpriteFrame;case 100:case"H\u1eb1ng nga":return this.freeSlot1SpriteFrame;case 101:case"Ninjafruit":return this.freeSlot4SpriteFrame;case 102:case"Ti\xean C\xe1":return this.freeSlot3SpriteFrame}return null},getGameName:function(t){switch(t){case n.MINI_GAME_ID_MINI_POKER:case n.MINI_GAME_ID_MINI_POKER_2:case n.MINI_GAME_ID_MINI_POKER_3:return n.NAME_MINI_POKER;case n.MINI_GAME_ID_DIAMOND:case n.MINI_GAME_ID_DIAMOND_2:case n.MINI_GAME_ID_DIAMOND_3:return n.NAME_DIAMOND;case n.MINI_GAME_ID_MINI_3_CAY:case n.MINI_GAME_ID_MINI_3_CAY_2:return n.NAME_MINI_3CAY;case n.MINI_GAME_ID_WILD:return n.NAME_WILD;case n.MINI_GAME_ID_BOM:case n.NAME_BOM:return n.NAME_BOM}return t},hideAllNode:function(){this.moneyNode.active=!1,this.goldNode.active=!1,this.freeSpinNode.active=!1,this.missNode.active=!1,this.addTurnNode.active=!1}}),cc._RF.pop()},{"../MiniGameConstant":"MiniGameConstant","../lucky-wheel/LuckyWheelConstant":"LuckyWheelConstant"}],LuckyWheelResult:[function(t,e,i){"use strict";cc._RF.push(e,"47216uk4FtDNJeSEAMkHV9E","LuckyWheelResult");var o=t("../lucky-wheel/LuckyWheelConstant");cc.Class({extends:cc.Component,properties:{content1Label:cc.Label,content2Label:cc.Label,content3Label:cc.Label},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},initData:function(t,e,i){if(this.hideAllContent(),this.is_show=!1,t.data.type!==o.MISS&&t.data.type!==o.MISS_2&&(this.content1Label.node.active=!0,this.content1Label.string=t.data.amount+" "+t.data.name,this.is_show=!0),e.data.type!==o.MISS&&e.data.type!==o.MISS_2){this.content2Label.node.active=!0;var n=e.data.name;this.content2Label.string=n.toLocaleUpperCase(),this.is_show=!0}},hideAllContent:function(){this.content1Label.node.active=!1,this.content2Label.node.active=!1,this.content3Label.node.active=!1},showDialog:function(){this.is_show&&(this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog())},onCloseClick:function(){0===this.controller.getUser().lucky_wheel_free&&this.controller.MiniGame.LuckyWheel.onCloseClick(),this.dialogForm.hideDialog()}}),cc._RF.pop()},{"../lucky-wheel/LuckyWheelConstant":"LuckyWheelConstant"}],LuckyWheel:[function(t,e,i){"use strict";cc._RF.push(e,"b179fqQeL5J86+P8qjq0PH7","LuckyWheel");var o=t("../../../base/BaseController"),n=t("../item/LuckyWheelItem"),s=t("./LuckyWheelConstant"),a=t("./LuckyWheelConfig"),r=t("../../../util/FormatUtil"),c=t("../../../helper/Message"),h=t("../../../helper/Constant");t("../../../util/RandomUtil");cc.Class({extends:o,properties:{spin1Node:cc.Node,spin2Node:cc.Node,spin3Node:cc.Node,numberSpinRichText:cc.RichText,luckyWheelItems1:[n],luckyWheelItems2:[n],luckyWheelItems3:[n]},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){this._super(),this.isSpining=!1,this.initData()},onEnable:function(){this.timeOutSpin=null},onDisable:function(){clearTimeout(this.timeOutLuckyWheel),clearTimeout(this.timeOutSpin)},initData:function(){var t=this.getLuckyWheel(),e=this.getLuckyWheelItemBuyRoundType(t,2),i=this.getLuckyWheelItemBuyRoundType(t,0);for(var o in this.luckyWheelItems1)this.luckyWheelItems1[o].init(e[o]);for(var n in this.luckyWheelItems2)this.luckyWheelItems2[n].init(i[n]);this.initLuckyWheelFree()},initLuckyWheelFree:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.getUserLuckyWheelFree();this.getUser().lucky_wheel_free=e;var i=e>0?r.numberWithCommas(e):0;t=t||i;var o=String.format(c.LUCKY_WHEEL_MESSAGE,t);this.numberSpinRichText.string=o;var n=e>0;this.MiniGameCircleNotification&&this.MiniGameCircleNotification.initShowNotificationLuckyWheel(n,i)},getLuckyWheelItemBuyRoundType:function(t,e){for(var i=0;i<t.length;i++){var o=t[i];if(o&&o[0]&&o[0].round_type===e)return t[i]}return null},minusLuckyWheelFree:function(){var t=this.getUserLuckyWheelFree()-1;t=t>=0?t:0,this.initLuckyWheelFree(t)},plusLuckyWheelFree:function(){},addLuckyWheelFree:function(t){this.getUser().lucky_wheel_free=t,this.initLuckyWheelFree()},onCloseClick:function(){this.isSpining?this.controller.showToast(c.LUCKY_WHEEL_IS_SPINING):this.node.active=!1},onTutorialClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(h.LUCK_WHEEL)},onGetSpinClick:function(){},onSpinClick:function(){this.isSpining?this.controller.showToast(c.LUCKY_WHEEL_IS_SPINING):this.sendRequest.sendNoPrefixToZone(s.REQUEST_SPIN)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case s.SPIN:this.handleSpin(i);break;case s.MESSAGE:this.handleMessage(o)}},handleSpin:function(t){this.minusLuckyWheelFree(),this.timeOutSpin=null,this.timeShowGame=null,this.isSpining=!0;var e=t.data,i=void 0,o=void 0,n=this.getDataSpinbuyRoundType(e,2),s=this.getDataSpinbuyRoundType(e,0),r=n.id,c=s.id;for(var h in this.luckyWheelItems1)this.luckyWheelItems1[h].data.id==r&&(i=this.luckyWheelItems1[h]);for(var l in this.luckyWheelItems2)this.luckyWheelItems2[l].data.id==c&&(o=this.luckyWheelItems2[l]);this.roundLuckyWheel(i,this.spin1Node),this.roundLuckyWheel(o,this.spin2Node,!0),this.timeOutSpin=setTimeout(function(){i&&o&&(this.controller.MiniGame.LuckyWheelResult.initData(i,o),this.controller.MiniGame.LuckyWheelResult.showDialog())}.bind(this),1e3*a.TIME_SPIN),i&&i.isFreeMiniGame()&&(this.timeShowGame=setTimeout(function(){this.controller.MiniGame.showMiniGameBuyGameId(i.data.id)}.bind(this),1e3*(a.TIME_SPIN+5)))},getDataSpinbuyRoundType:function(t,e){for(var i=0;i<t.length;i++)if(t[i]&&t[i].round_type===e)return t[i];return null},roundLuckyWheel:function(t,e,i){var o=t?-1*t.node.angle:0,n=360*a.NUMBER_SPIN_TIME-o,s=-(360*a.NUMBER_SPIN_TIME+o);n=i?s:n,e.runAction(cc.sequence(cc.rotateTo(a.TIME_SPIN,n).easing(cc.easeCircleActionOut()),cc.callFunc(function(){this.initLuckyWheelFree(),this.isSpining=!1},this)))},handleMessage:function(t){this.controller.showToast(t)}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil","../item/LuckyWheelItem":"LuckyWheelItem","./LuckyWheelConfig":"LuckyWheelConfig","./LuckyWheelConstant":"LuckyWheelConstant"}],MailItem:[function(t,e,i){"use strict";cc._RF.push(e,"d98345ZpGZGcKpWaCCIUcp8","MailItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{mailNode:cc.Node,titleLabel:cc.Label,timeLabel:cc.Label,receiveButtonNode:cc.Node,readButtonNode:cc.Node},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo,this.ConfirmRemoveMail=t.ConfirmRemoveMail,this.InfoMail=this.GameInfo.InfoMail,this.data=e,this.titleLabel.string=e.title,this.setReaded(e.is_read),e.created_at>=1e10&&(e.created_at=parseInt(e.created_at/1e3)),this.timeLabel.string=String.format(n.MAIL_DETAIL_TITLE,e.from_username,o.getStringDateByTimeStamp(e.created_at)),this.receiveButtonNode.active=!1},onLoad:function(){},isReaded:function(){return 0!=this.data.is_read&&null!==this.data.is_read},setReaded:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.mailNode.opacity=0==t||null===t?255:150},onReceiveClick:function(){},onDeleteClick:function(){this.GameCenter.Audio.playClick(),this.ConfirmRemoveMail.setId(this.data.id,this.isReaded()),this.GameCenterUI.showConfirmRemoveMailFormNode()},onReadClick:function(){this.GameCenter.Audio.playClick(),this.readMail()},readMail:function(){if(this.InfoMail.showMailDetailNode(this.data),!this.isReaded()){var t={id:this.data.id,token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.readMessage(t,function(t){},function(t){}),this.setReaded(1),this.data.is_read=1,this.GameCenter.Header.HeaderAccount.minusUnreadMessage()}}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],MauBinhCardController:[function(t,e,i){"use strict";cc._RF.push(e,"72c7e2uItJKaq7xqjnceNNu","MauBinhCardController");var o=t("../MauBinhConfig");cc.Class({extends:cc.Component,properties:{},init:function(t){this.MauBinhMove=t},onLoad:function(){var t=this;this.nearestCard=null,this.initX=this.node.x,this.initY=this.node.y,this.cardController=this.node.getComponent("CardController"),this.resetInAction=cc.callFunc(function(){t.MauBinhMove.setInAction(!1)},this),this.onTouchDown=function(e){t.MauBinhMove.isInAction||t.MauBinhMove.isSelected||(this.zIndex=1,t.MauBinhMove.setSelected(!0),t.initX=this.x,t.initY=this.y,t.cardController.showHighLight())},this.onTouchMove=function(e){if(!t.MauBinhMove.isInAction&&t.MauBinhMove.isSelected){var i=e.touch.getDelta();this.x+=i.x,this.y+=i.y;var o=t.MauBinhMove.getNearestCard(this);o?t.nearestCard?t.nearestCard.trueValue!==o.trueValue?(t.nearestCard.cardController.hideHighLight(),t.nearestCard=o):t.nearestCard.cardController.showHighLight():(t.nearestCard=o,t.nearestCard.cardController.showHighLight()):t.nearestCard&&(t.nearestCard.cardController.hideHighLight(),t.nearestCard=null)}},this.onTouchUp=function(e){if(!t.MauBinhMove.isInAction&&t.MauBinhMove.isSelected){this.zIndex=0,t.MauBinhMove.setSelected(!1),t.cardController.hideHighLight();var i=t.MauBinhMove.getNearestCard(this);i?(t.MauBinhMove.setInAction(!0),i.cardController.hideHighLight(),this.runAction(cc.sequence(cc.moveTo(o.TIME_CHANGE_TWO_CARDS,i.x,i.y),t.resetInAction)),i.runAction(cc.sequence(cc.moveTo(o.TIME_CHANGE_TWO_CARDS,t.initX,t.initY),t.resetInAction)),t.MauBinhMove.swapTwoCards(this,i)):(t.MauBinhMove.setInAction(!0),this.runAction(cc.sequence(cc.moveTo(o.TIME_CHANGE_TWO_CARDS,t.initX,t.initY),t.resetInAction)))}}},onEnable:function(){this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchUp,this.node)}}),cc._RF.pop()},{"../MauBinhConfig":"MauBinhConfig"}],MauBinhCard:[function(t,e,i){"use strict";cc._RF.push(e,"e596cXpeD9GGJq3Mo5XqF/u","MauBinhCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;++i,e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],MauBinhConfig:[function(t,e,i){"use strict";cc._RF.push(e,"973b5l36k9FZJDbKsL+D2hU","MauBinhConfig");e.exports={NUMBER_PLAYERS:4,DISTANCE_TWO_COLS_CARDS_IN_HAND:75,DISTANCE_TWO_ROWS_CARDS_IN_HAND:65,TIME_SHOW_CARDS:.5,SCALE_CARD_IN_HAND:.85,DISTANCE_MIN_TO_CHANGE_TWO_CARD:50,TIME_CHANGE_TWO_CARDS:.25,SCALE_CARD_IN_MOVE:.75,DISTANCE_TWO_COLS_CARDS_IN_MOVE:80,DISTANCE_TWO_ROWS_CARDS_IN_MOVE:110,NUMBER_CARDS_EACH_PLAYERS:13,NUMBER_CARDS_CHI_DAU:5,NUMBER_CARDS_CHI_GIUA:5,NUMBER_CARDS_CHI_CUOI:3,VALUE_MAU_THAU:0,VALUE_DOI:1,VALUE_THU:2,VALUE_SAM:3,VALUE_SANH_THUONG:4,VALUE_SANH_NHI:5,VALUE_SANH_DAI:6,VALUE_THUNG:7,VALUE_CU_LU:8,VALUE_TU_QUY:9,VALUE_THUNG_PHA_SANH:10,VALUE_THUNG_PHA_SANH_LON:11,TIME_SHOW_THANG_TRANG:1,TIME_SHOW_COMPARE_CHI_CUOI:3,TIME_SHOW_COMPARE_CHI_GIUA:6,TIME_SHOW_COMPARE_CHI_DAU:9,TIME_SHOW_COMPARE_BA_CHI:12,TIME_SHOW_LAST_MONEY_CHANGE:15},cc._RF.pop()},{}],MauBinhConstant:[function(t,e,i){"use strict";cc._RF.push(e,"7639e3kO01CEbRPHm61oCiM","MauBinhConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",READY:"READY",MOVE:"MOVE",COMPLETE:"COMPLETE",DEALING_CARD:"DEALING_CARD",START:"START",RESULT:"RESULT",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_LEFT_ROOM_WITH_CHANGE_HOME:"REQUEST_LEFT_ROOM_WITH_CHANGE_HOME",ROOM_INFO:"ROOM_INFO",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],MauBinhGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"19a33pI39xFgKnsmE1Xmft7","MauBinhGroupCardsType");var o=cc.Enum({KhongHopLe:1,ThungPhaSanhLon:2,ThungPhaSanh:3,TuQuy:4,CuLu:5,Thung:6,SanhDai:7,SanhNhi:8,SanhThuong:9,Sam:10,Thu:11,Doi:12,MauThau:13});e.exports=o,cc._RF.pop()},{}],MauBinhHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"ac814MAsetFAoHc5Wz/U9NP","MauBinhHandlerEffect");t("./MauBinhCard");var o=t("./MauBinhWinType"),n={init:function(t){this.MauBinh=t,this.MauBinhUI=t.MauBinhUI,this.listPlayers=t.listPlayers},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe||this.listPlayers[e].MauBinhPlayer.showBackCards(!0)},showResult:function(t){var e=t.data.players;for(var i in e){var n=e[i].user_id,s=this.MauBinh.getPlayerByUserId(n);s&&(s.MauBinhPlayer.showCards(e[i].cards,!1,!0),s.MauBinhPlayer.isBinhLung=e[i].is_binh_lung,s.MauBinhPlayer.winType=e[i].win_type,e[i].win_type!==o.KHONG_THANG_TRANG&&(s.MauBinhPlayer.isThangTrang=!0),s.MauBinhPlayer.thangTrangMoneyChange=e[i].thang_trang_money_change,s.MauBinhPlayer.chiDauMoneyChange=e[i].chi_cuoi_money_change,s.MauBinhPlayer.chiGiuaMoneyChange=e[i].chi_giua_money_change,s.MauBinhPlayer.chiCuoiMoneyChange=e[i].chi_dau_money_change,s.MauBinhPlayer.loseAllChiMoneyChange=e[i].lose_all_chi_money_change,s.MauBinhPlayer.moneyChange=e[i].money_change,s.MauBinhPlayer.showResult())}},clearCompleteAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].MauBinhPlayer.setComplete(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){}};e.exports=n,cc._RF.pop()},{"./MauBinhCard":"MauBinhCard","./MauBinhWinType":"MauBinhWinType"}],MauBinhHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"0e2ebC5cuhBD5dMHrnunzqH","MauBinhHandlerRequest");var o=t("./MauBinhConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.MauBinh=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.MauBinh.showChat(t)},onUserVarsUpdate:function(t){for(var e=t.user,i=t.changedVars,o=0,s=i.length;o<s;o++)switch(i[o]){case n.GOLD:this.MauBinh.initGold(e);break;case n.MONEY:this.MauBinh.initMoney(e);break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){for(var e=t.changedVars,i=0,o=e.length;i<o;i++)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.ROOM_INFO:this.MauBinh.handleRoomInfo(e);break;case o.START:this.MauBinh.handleStart(e);break;case o.COUNT_DOWN:this.MauBinh.handleCountDown(e);break;case o.DEALING_CARD:this.MauBinh.handleDealingCard(e);break;case o.COMPLETE:this.MauBinh.handleComplete(e);break;case o.RESULT:this.MauBinh.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.MauBinh.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.MauBinh.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.MauBinh.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.MauBinh.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./MauBinhConstant":"MauBinhConstant"}],MauBinhMove:[function(t,e,i){"use strict";cc._RF.push(e,"9a586buUwFJSZS/DyRM8aUJ","MauBinhMove");var o=t("../MauBinhConstant"),n=t("../MauBinhConfig"),s=t("../MauBinhUtil"),a=t("../MauBinhCard"),r=t("../item/MauBinhCardController"),c=t("../../../util/NodeUtil"),h=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{binhLungNode:cc.Node,chiDauLabel:cc.Label,chiGiuaLabel:cc.Label,chiCuoiLabel:cc.Label,cardPrefab:cc.Prefab,moveCardsNode:cc.Node},init:function(t){this.MauBinh=t,this.isInAction=!1,this.isSelected=!1,this.isBinhLung=!1,this.listCardsNode=[]},onLoad:function(){},onEnable:function(){},showCards:function(t){for(var e in this.moveCardsNode.removeAllChildren(!0),this.node.active=!0,t){var i=cc.instantiate(this.cardPrefab);i.scale=n.SCALE_CARD_IN_MOVE,i.setPosition(this.getPositionCardByIndex(e)),i.trueValue=t[e],i.parent=this.moveCardsNode;var o=i.getComponent("CardController"),s=new a(t[e]);o.init(s),i.cardController=o;var c=i.addComponent(r);c.init(this),i.maubinhCardController=c,this.listCardsNode.push(i)}this.checkGroupCards()},getNearestCard:function(t){var e=null,i=n.DISTANCE_MIN_TO_CHANGE_TWO_CARD,o=this.getListCardsNode();for(var s in o)if(t.trueValue!==o[s].trueValue){var a=c.getDistanceTwoNode(t,o[s]);a<=i&&(i=a,e=o[s])}return e},swapTwoCards:function(t,e){for(var i=this.getListCardsNode(),o=void 0,n=void 0,s=0;s<i.length;s++)i[s].trueValue===t.trueValue?o=s:i[s].trueValue===e.trueValue&&(n=s);this.swapIndexTwoCard(o,n),this.checkGroupCards(),this.sendRequestMove()},swapIndexTwoCard:function(t,e){var i=this.listCardsNode[t];this.listCardsNode[t]=this.listCardsNode[e],this.listCardsNode[e]=i},checkGroupCards:function(){var t=this.getListCards(),e=s.getCardsChiDau(t),i=s.getCardsChiGiua(t),o=s.getCardsChiCuoi(t),n=String.format(h.MAU_BINH_CHI_TYPE,1,s.getGroupCardsText(e)),a=String.format(h.MAU_BINH_CHI_TYPE,2,s.getGroupCardsText(i)),r=String.format(h.MAU_BINH_CHI_TYPE,3,s.getGroupCardsText(o));this.isBinhLung=s.checkBinhLung(t),this.binhLungNode.active=this.isBinhLung,this.chiDauLabel.string=n,this.chiGiuaLabel.string=a,this.chiCuoiLabel.string=r},sendRequestMove:function(){var t={data:this.getListCards()};this.MauBinh.sendRequest.send(o.MOVE,t)},getPositionCardByIndex:function(t){var e=void 0,i=void 0;return t<3?(e=(t-1)*n.DISTANCE_TWO_COLS_CARDS_IN_MOVE,i=n.DISTANCE_TWO_ROWS_CARDS_IN_MOVE):t<8?(e=(t-5)*n.DISTANCE_TWO_COLS_CARDS_IN_MOVE,i=0):(e=(t-10)*n.DISTANCE_TWO_COLS_CARDS_IN_MOVE,i=-n.DISTANCE_TWO_ROWS_CARDS_IN_MOVE),new cc.Vec2(e,i)},getListCardsNode:function(){return this.listCardsNode},getListCards:function(){var t=[];for(var e in this.listCardsNode)t.push(this.listCardsNode[e].trueValue);return t},setSelected:function(t){this.isSelected=t},setInAction:function(t){this.isInAction=t},hide:function(){this.node.active=!1},reset:function(){this.moveCardsNode.removeAllChildren(!0),this.listCardsNode=[],this.isInAction=!1,this.isSelected=!1,this.isBinhLung=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/NodeUtil":"NodeUtil","../MauBinhCard":"MauBinhCard","../MauBinhConfig":"MauBinhConfig","../MauBinhConstant":"MauBinhConstant","../MauBinhUtil":"MauBinhUtil","../item/MauBinhCardController":"MauBinhCardController"}],MauBinhPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"47173UwdQxJzqEOJ9FyZIjM","MauBinhPlayer");var o=t("./MauBinhCard"),n=t("./MauBinhConfig"),s=t("./MauBinhWinType"),a=t("./MauBinhGroupCardsType"),r=t("./MauBinhUtil"),c=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},init:function(t){this.MauBinh=t,this.GameCommon=t.GameCommon},onLoad:function(){this.isBinhLung=!1,this.isThangTrang=!1,this.winType=null,this.thangTrangMoneyChange=0,this.chiDauMoneyChange=0,this.chiGiuaMoneyChange=0,this.chiCuoiMoneyChange=0,this.loseAllChiMoneyChange=0,this.moneyChange=0,this.listCardsNode=[]},onEnable:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var s in this.cardsNode.removeAllChildren(!0),this.listCardsNode=[],t){var a=new o(t[s]),r=cc.instantiate(this.cardPrefab);r.scale=n.SCALE_CARD_IN_HAND,r.trueValue=t[s],r.parent=this.cardsNode;var c=r.getComponent("CardController");c.init(a),c.reveal(e),r.cardController=c;var h=this.getXPlayerCard(s),l=this.getYPlayerCard(s);i?(r.setPosition(0,0),r.runAction(cc.moveTo(n.TIME_SHOW_CARDS,h,l))):r.setPosition(h,l),this.listCardsNode.push(r)}},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);for(var e=n.NUMBER_CARDS_EACH_PLAYERS,i=0;i<e;i++){var o=cc.instantiate(this.cardBackPrefab);o.scale=n.SCALE_CARD_IN_HAND,o.parent=this.cardsNode;var s=this.getXPlayerCard(i),a=this.getYPlayerCard(i);t?(o.setPosition(0,0),o.runAction(cc.moveTo(n.TIME_SHOW_CARDS,s,a))):o.setPosition(s,a)}},showResult:function(){this.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){this.isThangTrang&&(this.revealBaChi(),this.showEffectThangTrang(this.winType))},this),cc.delayTime(2),cc.callFunc(function(){this.isThangTrang||(this.isBinhLung?(this.revealBaChi(),this.showEffectBinhLung()):this.revealChiCuoi())},this),cc.delayTime(3),cc.callFunc(function(){this.isThangTrang||this.isBinhLung||this.revealChiGiua()},this),cc.delayTime(3),cc.callFunc(function(){this.isThangTrang||this.isBinhLung||this.revealChiDau()},this),cc.delayTime(3),cc.callFunc(function(){this.isThangTrang||(this.loseAllChiMoneyChange<0?(this.showEffectSapBaChi(),this.node.getComponent("BasePlayer").showChangeBalance(this.loseAllChiMoneyChange)):this.loseAllChiMoneyChange>0&&(this.showEffectThangBaChi(),this.node.getComponent("BasePlayer").showChangeBalance(this.loseAllChiMoneyChange)))},this),cc.delayTime(3),cc.callFunc(function(){this.hideDarkEffectByListNode(this.listCardsNode),this.node.getComponent("BasePlayer").showChangeBalance(this.moneyChange),this.node.getComponent("BasePlayer").showEffectByChangeBalance(this.moneyChange),this.node.getComponent("BasePlayer").hideText(),this.node.isItMe&&this.moneyChange>0&&this.GameCommon.Audio.playWin()},this)))},revealBaChi:function(){for(var t in this.listCardsNode)this.listCardsNode[t].cardController.revealWithAnimationFlip(!0,n.TIME_SHOW_CARDS)},revealChiDau:function(){var t=this.getListChiDauNode(),e=this.getListChiGiuaNode(),i=this.getCardsByListNode(t);for(var o in t)t[o].cardController.revealWithAnimationFlip(!0,n.TIME_SHOW_CARDS);this.showEffectKhoanPhat(i,0),this.showResultChiText(i),this.node.getComponent("BasePlayer").showChangeBalance(this.chiDauMoneyChange),this.showDarkEffectByListNode(e)},revealChiGiua:function(){var t=this.getListChiGiuaNode(),e=this.getListChiCuoiNode(),i=this.getCardsByListNode(t);for(var o in t)t[o].cardController.revealWithAnimationFlip(!0,n.TIME_SHOW_CARDS);this.showEffectKhoanPhat(i,1),this.showResultChiText(i),this.node.getComponent("BasePlayer").showChangeBalance(this.chiGiuaMoneyChange),this.showDarkEffectByListNode(e)},revealChiCuoi:function(){var t=this.getListChiCuoiNode(),e=this.getCardsByListNode(t);for(var i in t)t[i].cardController.revealWithAnimationFlip(!0,n.TIME_SHOW_CARDS);this.showEffectKhoanPhat(e,2),this.showResultChiText(e),this.node.getComponent("BasePlayer").showChangeBalance(this.chiCuoiMoneyChange)},showEffectKhoanPhat:function(t,e){this.node.getComponent("BasePlayer").hideWinEffect(),this.isBinhLung||this.showTextEffectByKhoanPhat(t,e)},showResultChiText:function(t){if(!this.isBinhLung){var e=r.getGroupCardsText(t);this.showResultChi(e)}},getListChiDauNode:function(){var t=[];for(var e in this.listCardsNode)e<3&&t.push(this.listCardsNode[e]);return t},getListChiGiuaNode:function(){var t=[];for(var e in this.listCardsNode)e>2&&e<8&&t.push(this.listCardsNode[e]);return t},getListChiCuoiNode:function(){var t=[];for(var e in this.listCardsNode)e>7&&t.push(this.listCardsNode[e]);return t},getCardsByListNode:function(t){var e=[];for(var i in t)e.push(t[i].trueValue);return e},getXPlayerCard:function(t){var e=void 0;return e=t<3?t*n.DISTANCE_TWO_COLS_CARDS_IN_HAND:t<8?(t-3)*n.DISTANCE_TWO_COLS_CARDS_IN_HAND:(t-8)*n.DISTANCE_TWO_COLS_CARDS_IN_HAND,this.cardsNode.x<0&&(e*=-1),e},getYPlayerCard:function(t){return t<3?2*n.DISTANCE_TWO_ROWS_CARDS_IN_HAND:t<8?n.DISTANCE_TWO_ROWS_CARDS_IN_HAND:0},showResultChi:function(t){this.node.getComponent("BasePlayer").showTextLight(t)},showEffectThangTrang:function(t){var e="";switch(t){case s.RONG_CUON:e=c.MAU_BINH_RONG_CUON;break;case s.SANH_RONG:e=c.MAU_BINH_SANH_RONG;break;case s.MUOI_BA_LA_CUNG_MAU:e=c.MAU_BINH_MUOI_BA_LA_CUNG_MAU;break;case s.NAM_DOI_MOT_SAM:e=c.MAU_BINH_NAM_DOI_MOT_SAM;break;case s.LUC_PHE_BON:e=c.MAU_BINH_LUC_PHE_BON;break;case s.BA_THUNG_TAI_BA_CHI:e=c.MAU_BINH_BA_THUNG_TAI_BA_CHI;break;case s.BA_SANH_TAI_BA_CHI:e=c.MAU_BINH_BA_SANH_TAI_BA_CHI}e&&this.node.getComponent("BasePlayer").showWinEffect(e)},showTextEffectByKhoanPhat:function(t,e){var i="",o=r.getGroupCardsType(t);if(2===e)switch(o){case a.ThungPhaSanhLon:case a.ThungPhaSanh:i=c.MAU_BINH_THUNG_PHA_SANH_CHI_DAU;break;case a.TuQuy:i=c.MAU_BINH_TU_QUY_CHI_DAU}else if(1===e)switch(o){case a.ThungPhaSanh:i=c.MAU_BINH_THUNG_PHA_SANH_CHI_GIUA;break;case a.TuQuy:i=c.MAU_BINH_TU_QUY_CHI_GIUA;break;case a.CuLu:i=c.MAU_BINH_CU_LU_CHI_GIUA}else 0===e&&o===a.Sam&&(i=c.MAU_BINH_SAM_CHI_CUOI);i&&(this.node.getComponent("BasePlayer").hideText(),this.node.getComponent("BasePlayer").showWinEffect(i))},showEffectBinhLung:function(){this.node.getComponent("BasePlayer").showTextDark(c.MAU_BINH_BINH_LUNG)},showEffectSapBaChi:function(){this.node.getComponent("BasePlayer").showTextDark(c.MAU_BINH_SAP_BA_CHI)},showEffectThangBaChi:function(){this.node.getComponent("BasePlayer").showTextLight(c.MAU_BINH_THANG_BA_CHI)},setComplete:function(t){t?this.showComplete():this.hideComplete()},showComplete:function(){this.node.getComponent("BasePlayer").showTextLight(c.MAU_BINH_COMPLETED)},hideComplete:function(){this.node.getComponent("BasePlayer").hideText()},showDarkEffectByListNode:function(t){for(var e=0,i=t.length;e<i;e++)t[e].cardController.showDarkEffect()},hideDarkEffectByListNode:function(t){for(var e=0,i=t.length;e<i;e++)t[e].cardController.hideDarkEffect()},reset:function(){this.isBinhLung=!1,this.isThangTrang=!1,this.winType=null,this.thangTrangMoneyChange=0,this.chiDauMoneyChange=0,this.chiGiuaMoneyChange=0,this.chiCuoiMoneyChange=0,this.loseAllChiMoneyChange=0,this.moneyChange=0,this.node.getComponent("BasePlayer").hideText(),this.cardsNode.removeAllChildren(!0),this.node.stopAllActions()}}),cc._RF.pop()},{"../../helper/Message":"Message","./MauBinhCard":"MauBinhCard","./MauBinhConfig":"MauBinhConfig","./MauBinhGroupCardsType":"MauBinhGroupCardsType","./MauBinhUtil":"MauBinhUtil","./MauBinhWinType":"MauBinhWinType"}],MauBinhState:[function(t,e,i){"use strict";cc._RF.push(e,"8eee6ky5cRNAaqM5eaAP5cG","MauBinhState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],MauBinhUI:[function(t,e,i){"use strict";cc._RF.push(e,"5d23990GYtGb4qgAAPjNlSS","MauBinhUI"),cc.Class({extends:cc.Component,properties:{playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1}}),cc._RF.pop()},{}],MauBinhUtil:[function(t,e,i){"use strict";cc._RF.push(e,"13435eIb29MS4wQZoIjyFop","MauBinhUtil");var o=t("./MauBinhGroupCardsType"),n=t("./MauBinhConfig"),s=t("../../object/CompareType"),a=t("../../helper/Message"),r={checkBinhLung:function(t){var e=this.getCardsChiDau(t),i=this.getCardsChiGiua(t),o=this.getCardsChiCuoi(t);return this.compareTwoChi(e,i)==s.NHO_HON||this.compareTwoChi(i,o)==s.NHO_HON},compareTwoChi:function(t,e){var i=this.getGroupCardsType(t),n=this.getGroupCardsType(e),a=this.getValueGroupCards(i),r=this.getValueGroupCards(n),c=s.KHONG_HOP_LE;if(i===n)switch(i){case o.KhongHopLe:break;case o.MauThau:c=this.compareMauThau(t,e);break;case o.Doi:c=this.compareDoi(t,e);break;case o.Thu:c=this.compareThu(t,e);break;case o.Sam:c=this.compareSam(t,e);break;case o.SanhThuong:c=this.compareSanhThuong(t,e);break;case o.SanhNhi:case o.SanhDai:c=s.BANG_NHAU;break;case o.Thung:c=this.compareThung(t,e);break;case o.CuLu:c=this.compareCuLu(t,e);break;case o.TuQuy:c=this.compareTuQuy(t,e);break;case o.ThungPhaSanh:c=this.compareThungPhaSanh(t,e);break;case o.ThungPhaSanhLon:c=s.BANG_NHAU}else c=a>r?s.LON_HON:s.NHO_HON;return c},compareMauThau:function(t,e){var i=this.cloneCards(t),o=this.cloneCards(e);this.sortCardsDESC(i),this.sortCardsDESC(o);for(var n=0;n<i.length;n++)if(i[n]&&o[n]){var a=this.compareTwoCard(i[n],o[n]);if(a!=s.BANG_NHAU)return a}else{if(i[n])return s.LON_HON;if(o[n])return s.NHO_HON}return s.BANG_NHAU},compareDoi:function(t,e){var i=this.cloneCards(t),o=this.cloneCards(e);this.sortCardsASC(i),this.sortCardsASC(o);var n=this.getPairCardsInCards(i)[0],a=this.getPairCardsInCards(o)[0];if(n&&a){var r=this.compareTwoCard(n,a);return r!=s.BANG_NHAU?r:this.compareMauThau(i,o)}return s.KHONG_HOP_LE},compareThu:function(t,e){var i=this.cloneCards(t),o=this.cloneCards(e),n=this.getPairCardsInCards(i)[0],a=this.getPairCardsInCards(o)[0],r=this.getPairCardsInCards(i)[1],c=this.getPairCardsInCards(o)[1];if(n&&a&&r&&c){var h=this.compareTwoCard(r,c);if(h!=s.BANG_NHAU)return h;var l=this.compareTwoCard(n,a);return l!=s.BANG_NHAU?l:this.compareMauThau(i,o)}return s.KHONG_HOP_LE},compareSam:function(t,e){var i=this.getSamDauTien(t),o=this.getSamDauTien(e);return i&&o?this.compareTwoCard(i,o):s.KHONG_HOP_LE},compareSanhThuong:function(t,e){var i=t[0],o=e[0];return this.compareTwoCard(i,o)},compareThung:function(t,e){return this.compareMauThau(t,e)},compareCuLu:function(t,e){return this.compareSam(t,e)},compareTuQuy:function(t,e){var i=this.getTuQuyDauTien(t),o=this.getTuQuyDauTien(e);return i&&o?this.compareTwoCard(i,o):s.KHONG_HOP_LE},compareThungPhaSanh:function(t,e){var i=this.cloneCards(t),o=this.cloneCards(e);this.sortCardsDESC(i),this.sortCardsDESC(o);var n=i[0],s=o[0];return this.compareTwoCard(n,s)},getTuQuyDauTien:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0;i<e.length-3;i++)if(this.getValueCard(e[i])==this.getValueCard(e[i+1])&&this.getValueCard(e[i])==this.getValueCard(e[i+2])&&this.getValueCard(e[i])==this.getValueCard(e[i+3]))return e[i];return null},getSamDauTien:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0;i<e.length-2;i++)if(this.getValueCard(e[i])==this.getValueCard(e[i+1])&&this.getValueCard(e[i])==this.getValueCard(e[i+2]))return e[i]},getPairCardsInCards:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=[],o=0,n=0;n<e.length-1;n++)this.getValueCard(e[n])==this.getValueCard(e[n+1])&&this.getValueCard(e[n])!=o&&(o=this.getValueCard(e[n]),i.push(e[n]),n++);return i},compareTwoCard:function(t,e){if(t&&e){var i=parseInt(t/100),o=parseInt(e/100);return i>o?s.LON_HON:i<o?s.NHO_HON:s.BANG_NHAU}return s.KHONG_HOP_LE},getGroupCardsText:function(t){var e=this.getGroupCardsType(t);return this.getTextByTypeGroupCards(e)},getGroupCardsType:function(t){return 5==t.length?this.getGroupCardsTypeFor5Cards(t):3==t.length?this.getGroupCardsTypeFor3Cards(t):o.KhongHopLe},getGroupCardsTypeFor5Cards:function(t){var e=o.MauThau,i=this.cloneCards(t);return this.checkThungPhaSanhLon(i)?e=o.ThungPhaSanhLon:this.checkThungPhaSanh(i)?e=o.ThungPhaSanh:this.checkTuQuy(i)?e=o.TuQuy:this.checkCuLu(i)?e=o.CuLu:this.checkThung(i)?e=o.Thung:this.checkSanhDai(i)?e=o.SanhDai:this.checkSanhNhi(i)?e=o.SanhNhi:this.checkSanhThuong(i)?e=o.SanhThuong:this.checkSam(i)?e=o.Sam:this.checkThu(i)?e=o.Thu:this.checkDoi(i)&&(e=o.Doi),e},getGroupCardsTypeFor3Cards:function(t){var e=o.MauThau,i=this.cloneCards(t);return this.checkSam(i)?e=o.Sam:this.checkDoi(i)&&(e=o.Doi),e},checkThungPhaSanhLon:function(t){return this.checkMotDay(t)&&this.checkSameTypeCards(t)&&this.checkCoLaAt(t)},checkThungPhaSanh:function(t){return this.checkSanh(t)&&this.checkSameTypeCards(t)},checkTuQuy:function(t){for(var e=void 0,i=0,o=t.length-4;i<=o;i++)if(t[i]&&t[i+1]&&t[i+2]&&t[i+3]&&(e=this.getValueCard(t[i]))==this.getValueCard(t[i+1])&&e==this.getValueCard(t[i+2])&&e==this.getValueCard(t[i+3]))return!0;return!1},checkCuLu:function(t){return this.checkSam(t)&&this.checkSoLuongDoi(t)>=2},checkThung:function(t){return this.checkSameTypeCards(t)},checkSanh:function(t){return this.checkSanhThuong(t)||this.checkSanhNhi(t)},checkSanhDai:function(t){return this.checkMotDay(t)&&this.checkCoLaAt(t)},checkSanhNhi:function(t){for(var e=this.cloneCards(t),i=0,o=e.length;i<o;i++)if(14===this.getValueCard(e[i]))return e[i]-=1300,this.sortCardsASC(e),this.checkMotDay(e);return!1},checkSanhThuong:function(t){return this.checkMotDay(t)},checkSam:function(t){return 1==this.checkSoLuongSam(t)},checkSoLuongDoi:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,o=0,n=0,s=e.length-1;n<s;n++)this.getValueCard(e[n])===this.getValueCard(e[n+1])&&this.getValueCard(e[n])!=o&&(o=this.getValueCard(e[n]),i++,n++);return i},checkSoLuongSam:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,o=0,n=e.length-2;o<n;o++){var s=[e[o],e[o+1],e[o+2]];this.checkMotBoBa(s)&&i++}return i},checkMotBoBa:function(t){return 3==t.length&&this.checkSameValueCards(t)},checkThu:function(t){return 2==this.checkSoLuongDoi(t)},checkDoi:function(t){return 1==this.checkSoLuongDoi(t)},checkMotDay:function(t){if(t.length>=3){this.sortCardsASC(t);for(var e=0,i=0,o=t.length;i<o;i++){var n=t[i];if(0==e)e=this.getValueCard(n);else{if(this.getValueCard(n)!=e+1)return!1;++e}}return!0}return!1},checkSameValueCards:function(t){for(var e=0,i=t.length;e<i-1;e++)if(this.getValueCard(t[e])!=this.getValueCard(t[e+1]))return!1;return!0},checkSameTypeCards:function(t){for(var e=0,i=t.length;e<i-1;e++)if(this.getTypeCard(t[e])!=this.getTypeCard(t[e+1]))return!1;return!0},checkCoLaAt:function(t){for(var e=0,i=t.length;e<i;e++)if(14===this.getValueCard(t[e]))return!0;return!1},getValueCard:function(t){return parseInt(t/100)},getTypeCard:function(t){return t%4},sortCardsASC:function(t){t.sort(function(t,e){return t-e})},sortCardsDESC:function(t){t.sort(function(t,e){return e-t})},cloneCards:function(t){for(var e=[],i=0,o=t.length;i<o;i++){var n=t[i];e.push(n)}return e},getTextByTypeGroupCards:function(t){switch(t){case 1:return a.MAU_BINH_KHONG_HOP_LE;case 2:return a.MAU_BINH_THUNG_PHA_SANH_LON;case 3:return a.MAU_BINH_THUNG_PHA_SANH;case 4:return a.MAU_BINH_TU_QUY;case 5:return a.MAU_BINH_CU_LU;case 6:return a.MAU_BINH_THUNG;case 7:return a.MAU_BINH_SANH_DAI;case 8:return a.MAU_BINH_SANH_NHI;case 9:return a.MAU_BINH_SANH_THUONG;case 10:return a.MAU_BINH_SAM;case 11:return a.MAU_BINH_THU;case 12:return a.MAU_BINH_DOI;case 13:return a.MAU_BINH_MAU_THAU;default:return a.MAU_BINH_KHONG_HOP_LE}},getValueGroupCards:function(t){var e=-1;switch(t){case o.KhongHopLe:break;case o.MauThau:e=n.VALUE_MAU_THAU;break;case o.Doi:e=n.VALUE_DOI;break;case o.Thu:e=n.VALUE_THU;break;case o.Sam:e=n.VALUE_SAM;break;case o.SanhThuong:e=n.VALUE_SANH_THUONG;break;case o.SanhNhi:e=n.VALUE_SANH_NHI;break;case o.SanhDai:e=n.VALUE_SANH_DAI;break;case o.Thung:e=n.VALUE_THUNG;break;case o.CuLu:e=n.VALUE_CU_LU;break;case o.TuQuy:e=n.VALUE_TU_QUY;break;case o.ThungPhaSanh:e=n.VALUE_THUNG_PHA_SANH;break;case o.ThungPhaSanhLon:e=n.VALUE_THUNG_PHA_SANH_LON}return e},getCardsChiDau:function(t){for(var e=[],i=0;i<n.NUMBER_CARDS_CHI_DAU;i++)e.push(t[n.NUMBER_CARDS_EACH_PLAYERS-n.NUMBER_CARDS_CHI_DAU+i]);return e},getCardsChiGiua:function(t){for(var e=[],i=0;i<n.NUMBER_CARDS_CHI_GIUA;i++)e.push(t[n.NUMBER_CARDS_EACH_PLAYERS-n.NUMBER_CARDS_CHI_DAU-n.NUMBER_CARDS_CHI_GIUA+i]);return e},getCardsChiCuoi:function(t){for(var e=[],i=0;i<n.NUMBER_CARDS_CHI_CUOI;i++)e.push(t[i]);return e}};e.exports=r,cc._RF.pop()},{"../../helper/Message":"Message","../../object/CompareType":"CompareType","./MauBinhConfig":"MauBinhConfig","./MauBinhGroupCardsType":"MauBinhGroupCardsType"}],MauBinhWinType:[function(t,e,i){"use strict";cc._RF.push(e,"f7b3fPDbzJPxKc+YXWv4Tnl","MauBinhWinType");e.exports={KHONG_THANG_TRANG:"KHONG_THANG_TRANG",RONG_CUON:"RONG_CUON",SANH_RONG:"SANH_RONG",MUOI_BA_LA_CUNG_MAU:"MUOI_BA_LA_CUNG_MAU",NAM_DOI_MOT_SAM:"NAM_DOI_MOT_SAM",LUC_PHE_BON:"LUC_PHE_BON",BA_THUNG_TAI_BA_CHI:"BA_THUNG_TAI_BA_CHI",BA_SANH_TAI_BA_CHI:"BA_SANH_TAI_BA_CHI"},cc._RF.pop()},{}],MauBinh:[function(t,e,i){"use strict";cc._RF.push(e,"151ffmHoclPlJL6zAxyzAkG","MauBinh");var o=t("../../base/BaseController"),n=t("./MauBinhConstant"),s=t("./MauBinhConfig"),a=t("./MauBinhUI"),r=t("./MauBinhState"),c=t("./MauBinhHandlerRequest"),h=t("./MauBinhHandlerEffect"),l=t("./other/MauBinhMove"),u=t("../../prefab/GameCommon"),d=t("../../object/RoomType"),m=t("../../helper/Constant"),p=t("../../helper/Message");cc.Class({extends:o,properties:{cardPrefab:cc.Prefab,MauBinhUI:a,MauBinhMove:l,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_MAUBINH),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==d.MONEY_CODE,this.playersNode=this.MauBinhUI.playersNode,this.isMoneyType||this.MauBinhUI.disableAllPlaceHolder(),this.MauBinhConstant=n,this.MauBinhConfig=s,this.MauBinhState=r,this.MauBinhHandlerRequest=c,this.MauBinhHandlerRequest.init(this),this.MauBinhHandlerEffect=h,this.MauBinhHandlerEffect.init(this),this.MauBinhMove.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.MauBinhHandlerRequest.onPublicMessage.bind(this.MauBinhHandlerRequest),this.onRoomVarsUpdate=this.MauBinhHandlerRequest.onRoomVarsUpdate.bind(this.MauBinhHandlerRequest),this.onUserVarsUpdate=this.MauBinhHandlerRequest.onUserVarsUpdate.bind(this.MauBinhHandlerRequest),this.onResponse=this.MauBinhHandlerRequest.onResponse.bind(this.MauBinhHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.getComponent("MauBinhPlayer").init(this),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a),a.active=!1}this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.isItMe=t.isItMe,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("MauBinhPlayer");t.BasePlayer=o,t.MauBinhPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRequestLeftRoom(t.request_left_room),o.setRoomMaster(t.is_home),o.setPlayerName(t.nick_name),o.setBalance(t.balance),n.setComplete(t.is_completed),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.MauBinhState.setState(e),this.MauBinhState.isStop()?this.reset():this.MauBinhState.isWaiting()?this.resumeStateWaiting(t):this.MauBinhState.isPlaying()?this.resumeStatePlaying(t):this.MauBinhState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.MauBinhHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players;for(var i in e)if(e[i].is_player)if(e[i].isItMe){var o=e[i].cards;e[i].is_completed||this.MauBinhMove.showCards(o)}else e[i].MauBinhPlayer.showBackCards(!1);this.MauBinhHandlerEffect.startCountDownAllPlayers(t)},resumeStateFinish:function(t){if(t.data.result){var e=t.data.result.players;for(var i in e){var o=e[i].user_id,n=e[i].cards,s=e[i].money_change,a=this.getPlayerByUserId(o);a&&(a.MauBinhPlayer.setComplete(!1),a.MauBinhPlayer.showCards(n,!0,!1),a.BasePlayer.showChangeBalance(s),a.BasePlayer.showEffectByChangeBalance(s))}this.MauBinhHandlerEffect.startCountDownAllPlayers(t)}},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.MauBinhHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.MauBinhState.setWaiting(),this.GameCommon.hideWaitingNode(),this.MauBinhHandlerEffect.startCountDownAllPlayers(t)):(this.MauBinhState.setStop(),this.MauBinhHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){var e=t.data.player.cards;this.MauBinhState.setPlaying(),this.MauBinhHandlerEffect.dealCards(e),this.MauBinhMove.showCards(e),this.MauBinhHandlerEffect.stopCountDownAllPlayers(),this.MauBinhHandlerEffect.startCountDownAllPlayers(t)},handleComplete:function(t){var e=t.data.player,i=t.data.is_completed,o=this.getPlayerByUserId(e);o&&(o.is_completed=i,o.MauBinhPlayer.setComplete(i),o.isItMe&&this.MauBinhMove.hide())},handleResult:function(t){this.MauBinhState.setFinish(),this.MauBinhMove.hide(),this.MauBinhHandlerEffect.clearCompleteAllPlayers(),this.MauBinhHandlerEffect.showResult(t),this.MauBinhHandlerEffect.stopCountDownAllPlayers(),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.MauBinhState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.MauBinhHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(p.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(p.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onCompleteClick:function(){this.GameCommon.Audio.playClick(),this.MauBinhMove.isBinhLung?this.showToast(p.MAU_BINH_BINH_LUNG_NOT_COMPLETE):this.sendRequest.send(n.COMPLETE)},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.MauBinhHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.MauBinhMove.reset(),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].MauBinhPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./MauBinhConfig":"MauBinhConfig","./MauBinhConstant":"MauBinhConstant","./MauBinhHandlerEffect":"MauBinhHandlerEffect","./MauBinhHandlerRequest":"MauBinhHandlerRequest","./MauBinhState":"MauBinhState","./MauBinhUI":"MauBinhUI","./other/MauBinhMove":"MauBinhMove"}],Message:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"ab5f6SBt1RELaLx6JLF8Pdx","Message");var s=(n(o={TITLE_SUCCESS:"Th\xe0nh c\xf4ng",TITLE_FAILED:"L\u1ed7i",TIME_OUT_LOADING:"C\xf3 l\u1ed7i trong qu\xe1 tr\xecnh th\u1ef1c hi\u1ec7n, vui l\xf2ng th\u1eed l\u1ea1i",CONNECT_SFS_ERROR:"Kh\xf4ng th\u1ec3 k\u1ebft n\u1ed1i t\u1edbi Server",MISSING_INFO:"Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 c\xe1c th\xf4ng tin",SUCCESS:"Th\xe0nh c\xf4ng",FAILURE:"Th\u1ea5t b\u1ea1i",VERSION:"Phi\xean b\u1ea3n: {0}",CONTACT:"{0}",OLD_MONEY_1:"VIP",OLD_MONEY_2:"Vip",OLD_MONEY_3:"Zen",OLD_MONEY_4:"ZEN",NEW_MONEY:"$",OTP_FIRST_ACCOUNT:"K\xedch ho\u1ea1t s\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\u1ea3o m\u1eadt \u0111\u1ec3 b\u1ea3o v\u1ec7 t\xe0i kho\u1ea3n b\u1ea1n nh\xe9!",OTP_ACTIVE_ACCOUNT:"Vui l\xf2ng so\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color> \u0111\u1ec3 k\xedch ho\u1ea1t OTP",OTP_FORGET_PASSWORD:"B\u01b0\u1edbc 1: So\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color> \u0111\u1ec3 l\u1ea5y m\xe3 x\xe1c th\u1ef1c",LOGIN_TITLE:"\u0110\u0103ng nh\u1eadp",LOGIN_MISSING_USERNAME:"Thi\u1ebfu th\xf4ng tin t\xe0i kho\u1ea3n",LOGIN_MISSING_PASSWORD:"Thi\u1ebfu th\xf4ng tin m\u1eadt kh\u1ea9u",LOGIN_MISSING_CAPTCHA:"Thi\u1ebfu th\xf4ng tin m\xe3 x\xe1c nh\u1eadn",LOGIN_CAPTCHA_ERROR:"M\xe3 x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",LOGIN_SECURITY_SMS:"\u0110\u1ec3 \u0111\u0103ng k\xfd b\u1ea3o m\u1eadt \u0111\u0103ng nh\u1eadp vui l\xf2ng so\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color>\n\u0110\u1ec3 h\u1ee7y b\u1ea3o m\u1eadt \u0111\u0103ng nh\u1eadp vui l\xf2ng so\u1ea1n tin <color=yellow>{2}</color> g\u1eedi <color=yellow>{3}</color>",LOGIN_SECURITY_SMS_2:"So\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color> \u0111\u1ec3 l\u1ea5y m\xe3 OTP",SECURITY_GAME:"Qu\u1ea3n l\xfd game",TIME_LOGIN:"B\u1ea1n \u0111\xe3 \u0111\u0103ng nh\u1eadp qu\xe1 nhi\u1ec1u\nVui l\xf2ng th\u1eed l\u1ea1i sau \xedt ph\xfat",CAPTCHA_MISSING:"Vui l\xf2ng nh\u1eadp \u0111\xfang m\xe3 b\u1ea3o m\u1eadt",REGISTER_TITLE:"\u0110\u0103ng k\xfd",REGISTER_MISSING_USERNAME:"Vui l\xf2ng nh\u1eadp t\xean t\xe0i kho\u1ea3n",REGISTER_MISSING_PASSWORD:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u",REGISTER_MISSING_REPASSWORD:"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u x\xe1c nh\u1eadn",REGISTER_REPASSWORD_NOT_CORRECT:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u ch\u01b0a ch\xednh x\xe1c. Vui l\xf2ng th\u1eed l\u1ea1i",REGISTER_NOT_AGREE_TERM:"Vui l\xf2ng x\xe1c nh\u1eadn l\u1ea1i c\xe1c \u0111i\u1ec1u kho\u1ea3n s\u1eed d\u1ee5ng",FORGET_PASSWORD_TITLE:"Qu\xean m\u1eadt kh\u1ea9u",FORGET_PASSWORD_MISSING_USERNAME_EMAIL:"Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 t\xean t\xe0i kho\u1ea3n v\xe0 Email",FORGET_PASSWORD_NOT_SUPPORT_FORGET_PASSWORD_BY_PHONE:"Ch\xfang t\xf4i hi\u1ec7n ch\u01b0a h\u1ed7 tr\u1ee3 l\u1ea5y l\u1ea1i m\u1eadt kh\u1ea9u b\u1eb1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",FORGET_PASSWORD_SUCCESS:"G\u1eedi email th\xe0nh c\xf4ng. Vui l\xf2ng ki\u1ec3m tra email \u0111\u1ec3 l\u1ea5y th\xf4ng tin v\u1ec1 m\u1eadt kh\u1ea9u m\u1edbi",FORGET_PASSWORD_RE_PASSWORD_NOT_CORRECT:"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",CHANGE_PASSWORD_TITLE:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",CHANGE_PASSWORD_RE_PASSWORD_NOT_CORRECT:"M\u1eadt kh\u1ea9u x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",CHANGE_PASSWORD_GET_OTP:"B\u1ea1n vui l\xf2ng s\u1eed d\u1ee5ng OTP App \u0111\u1ec3 nh\u1eadn OTP ho\u1eb7c li\xean h\u1ec7 v\u1edbi QTV \u0111\u1ec3 bi\u1ebft th\xeam th\xf4ng tin",SET_NICKNAME_TITLE:"T\u1ea1o nh\xe2n v\u1eadt",SET_NICKNAME_NICKNAME_NOT_EMPTY:"T\xean nh\u1eadn v\u1eadt kh\xf4ng \u0111\u01b0\u1ee3c tr\u1ed1ng",OTP_NOT_EMPTY:"M\xe3 OTP kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p tr\u1ed1ng",NICKNAME_DIFFERENT_USERNAME:"T\xean nh\xe2n v\u1eadt kh\xf4ng \u0111\u01b0\u1ee3c tr\xf9ng v\u1edbi t\xe0i kho\u1ea3n",OTP_LOGIN_TITLE:"B\u1ea3o m\u1eadt \u0111\u0103ng nh\u1eadp",REGISTER_GIFTCODE_WELCOME:"Xin ch\xe0o <color=yellow>{0}</color>",UPDATE_DIAMOND:"B\u1ea1n \u0111\u01b0\u1ee3c t\u1eb7ng KIM C\u01af\u01a0NG. Xem ngay t\u1ea1i S\u1ef0 KI\u1ec6N L\xcaN \u0110\u1edcI SI\xcaU XE",LOGOUT_TITLE:"\u0110\u0103ng xu\u1ea5t",UPDATE_INFO:"C\u1eadp nh\u1eadt th\xf4ng tin c\xe1 nh\xe2n",UPDATE_AVATAR_TITLE:"\u0110\u1ed5i avatar",UPDATE_PASSWORD_TITLE:"\u0110\u1ed5i m\u1eadt kh\u1ea9u",FORMAT_PHONE_NOT_CORRECT:"\u0110\u1ecbnh d\u1ea1ng s\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng ch\xednh x\xe1c",FORMAT_DOB_NOT_CORRECT:"\u0110\u1ecbnh d\u1ea1ng ng\xe0y sinh kh\xf4ng ch\xednh x\xe1c",FORMAT_EMAIL_NOT_CORRECT:"\u0110\u1ecbnh d\u1ea1ng Email kh\xf4ng ch\xednh x\xe1c",INFO_DOB:"{0}/{1}/{2}",PLAYER_INFO_TITLE:"Th\xf4ng tin ng\u01b0\u1eddi ch\u01a1i",MAIL_TITLE:"H\xf2m th\u01b0",MAIL_DETAIL_TITLE:"Ngu\u1eddi g\u1eedi: {0} - Th\u1eddi gian: {1}",MAIL_NOTIFICATION:"B\u1ea1n c\xf3 tin nh\u1eafn m\u1edbi",RECHARGE_MONEY_SUCCESS:"B\u1ea1n \u0111\xe3 n\u1ea1p th\xe0nh c\xf4ng {0} {1}",RECHARGE_MONEY_TITLE:"N\u1ea1p th\u1ebb",RECHARGE_MONEY_HISTORY_NAME:"N\u1ea1p th\u1ebb {0}",RECHARGE_MONEY_HISTORY_NOTE:"Code: {0} - Seri: {1}",NUMBER_MONEY_LARGER_ZERO:"S\u1ed1 $ ph\u1ea3i > 0",RECHARGE_GOLD_SUCCESS:"\u0110\u1ed5i th\xe0nh c\xf4ng",RECHARGE_GOLD_TITLE:"\u0110\u1ed5i Xu",RECHARGE_GOLD_HISTORY_NAME:"\u0110\u1ed5i Xu",RECHARGE_GOLD_HISTORY_NOTE:"S\u1ed1 Xu nh\u1eadn \u0111\u01b0\u1ee3c: {0}",RECHARGE_SMS_NOTE:"<color=#A17E1A><i>N\u1ea1p {0} nh\u1eadn ngay {1} $</i></c>",RECHARGE_SMS_MSG:"So\u1ea1n <color=yellow>{0}</color> g\u1eedi <color=green>{1}</color>",RECHARGE_SMS_TENDANGNHAP:"tendangnhap",RECHARGE_SMS_HISTORY_NAME:"N\u1ea1p SMS",RECHARGE_BANKING_TITLE:"N\u1ea1p Banking",AWARD_TITLE:"\u0110\u1ed5i th\u01b0\u1edfng",AWARD_DESCRIBE:"\u0110\u1ed5i th\u1ebb {0}",NUMBER_CARDS_LARGER_ZERO:"S\u1ed1 l\u01b0\u1ee3ng th\u1ebb ph\u1ea3i > 0",TRANSFER_TITLE:"Chuy\u1ec3n kho\u1ea3n",VALUE_LARGER_ZERO:"S\u1ed1 $ ph\u1ea3i > 0",RE_NICKNAME_NOT_CORRECT:"X\xe1c nh\u1eadn nickname kh\xf4ng ch\xednh x\xe1c",TRANSFER_LOCKED:"Ch\u1ee9c n\u0103ng chuy\u1ec3n kho\u1ea3n \u0111ang t\u1ea1m kh\xf3a",TRANSFER_OTP:"So\u1ea1n tin <color=yellow>{0}</color> g\u1eedi <color=yellow>{1}</color>",SAFE_TITLE:"K\xe9t s\u1eaft",SAFE_NOT_ACTIVE_PHONE:"Vui l\xf2ng b\u1ea3o m\u1eadt t\xe0i kho\u1ea3n b\u1eb1ng S\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\u1ec3 r\xfat ti\u1ec1n",SAFE_GET_OTP:"So\u1ea1n tin: <color = #F0FF40>{0}</color> g\u1eedi <color = #F0FF40>{1}</color> \u0111\u1ec3 l\u1ea5y m\xe3 x\xe1c th\u1ef1c",HISTORY_TITLE:"L\u1ecbch s\u1eed",TOP_TITLE:"B\u1ea3ng x\u1ebfp h\u1ea1ng",GIFTCODE_TITLE:"Gift Code",GIFTCODE_NOT_ACTIVE:"Vui l\xf2ng b\u1ea3o m\u1eadt \u0111\u1ec3 s\u1eed d\u1ee5ng Gift Code",CAPCHA_NOT_CORRECT:"M\xe3 x\xe1c nh\u1eadn kh\xf4ng ch\xednh x\xe1c",CHAT_MESSAGE:"<color=4bcaee><b>{0}: </b></color>{1}",CHAT_VIP_MESSAGE:"<color=4bcaee><b>{0}: </b></color>{1}",CHAT_MESSAGE_FAIL:"<color=red><i>{0}</i></color>",CHAT_GAME_MESSAGE:"<color=fecb6e><b>{0}: </b></color>{1}",CHAT_TAI_XIU_MESSAGE:"<color=04fd4a><b>{0}: </b></color>{1}",CHAT_TAI_XIU_VIP_MESSAGE:"<color=orange><b>{0}: </b></color><color= yellow>{1}</color>",CHAT_SLOT_2_MESSAGE:"<color=#DE9100><b>{0}: </b></color><color=#C3C2C3>{1}</color>",TAIXIU_YOU_ONLE_BET_A_DOOR:"B\u1ea1n ch\u1ec9 \u0111\u01b0\u1ee3c \u0111\u1eb7t m\u1ed9t c\u1eeda",JOIN_ROOM_TITLE:"Ch\u1ecdn ph\xf2ng",NOT_ENOUGH_MONEY_TO_JOIN_GAME:"B\u1ea1n c\u1ea7n t\u1ed1i thi\u1ec3u {0} {1} \u0111\u1ec3 tham gia ch\u01a1i game",NOT_ENOUGH_MONEY_TO_STAY_GAME:"B\u1ea1n c\u1ea7n {0} {1} \u0111\u1ec3 ti\u1ebfp t\u1ee5c ch\u01a1i game!",JOIN_ROOM_ERROR:"Ph\xf2ng ch\u01a1i hi\u1ec7n t\u1ea1i \u0111ang b\u1ecb kh\xf3a",INTIVE_TITLE:"M\u1eddi b\u1ea1n",CODE_INVITE_FRIEND_NOT_EMPTY:"M\xe3 gi\u1edbi thi\u1ec7u kh\xf4ng \u0111\u01b0\u1ee3c tr\u1ed1ng",SCORE_INVITE_FRIEND_NOT_EMPTY:"S\u1ed1 \u0111i\u1ec3m \u0111\u1ed5i kh\xf4ng \u0111\u01b0\u1ee3c tr\u1ed1ng",SCORE_INVITE_FRIEND_FAIL:"S\u1ed1 \u0111i\u1ec3m \u0111\u1ed5i ch\u01b0a \u0111\xfang",NOTIFICATION_TITLE:"Th\xf4ng b\xe1o",MONEY:"$",GOLD:"XU",VIETTEL:"Vietel",MOBIFONE:"Mobifone",VINAPHONE:"Vinaphone",GATE:"Gate",TOP_UP_ITEM_VALUE:"Th\u1ebb {0}",CHARGE_CARD_ITEM_VALUE:"{0}\u0110",TAI_XIU:"T\xe0i X\u1ec9u",MINI_POKER:"Mini Poker",MINI_BACAY:"Mini Ba C\xe2y",DIAMOND:"N\xf4ng Tr\u1ea1i",DIAMOND_2:"H\u1ea3i T\u1eb7c",BAU_CUA:"B\u1ea7u Cua",LUCK_WHEEL:"V\xf2ng Quay May M\u1eafn",TREN_DUOI:"Tr\xean D\u01b0\u1edbi",BOM:"PUBG",INVITE_MESSAGE:"Ng\u01b0\u1eddi ch\u01a1i <color=green>{0}</color> m\u1eddi b\u1ea1n v\xe0o game <color=green>{1}</color>\nM\u1ee9c c\u01b0\u1ee3c: <color=yellow>{2} {3}</color>",GAME_DESCRIBE_TABLE_NAME:"{0} - B\xe0n {1} - Phi\xean ch\u01a1i {2}",GAME_DESCRIBE_TABLE_BET:"M\u1ee9c c\u01b0\u1ee3c: {0} {1}",REQUEST_LEFT_ROOM:"\u0110\u0103ng k\xfd r\u1eddi b\xe0n th\xe0nh c\xf4ng",IGNORE_REQUEST_LEFT_ROOM:"H\u1ee7y r\u1eddi b\xe0n th\xe0nh c\xf4ng",BACAY_WIN_ALL:"B\u1eaeT C\u1ea2 L\xc0NG",BACAY_LOSE_ALL:"PH\xc1T L\u01af\u01a0NG",BACAY_BET_PRIVATE_BUTTON:"\u0110\xc1NH BI\xcaN T\u1ea4T C\u1ea2 ({0})",MAU_BINH_BINH_LUNG_NOT_COMPLETE:"Binh l\u1ee7ng kh\xf4ng th\u1ec3 ho\xe0n th\xe0nh",MAU_BINH_KHONG_HOP_LE:"KH\xd4NG H\u1ee2P L\u1ec6",MAU_BINH_THUNG_PHA_SANH_LON:"TH\xd9NG PH\xc1 S\u1ea2NH \u0110\u1ea0I",MAU_BINH_THUNG_PHA_SANH:"TH\xd9NG PH\xc1 S\u1ea2NH",MAU_BINH_TU_QUY:"T\u1ee8 QU\xdd",MAU_BINH_CU_LU:"C\xd9 L\u0168",MAU_BINH_THUNG:"TH\xd9NG",MAU_BINH_SANH_DAI:"S\u1ea2NH \u0110\u1ea0I",MAU_BINH_SANH_NHI:"S\u1ea2NH NH\u1eca",MAU_BINH_SANH_THUONG:"S\u1ea2NH",MAU_BINH_SAM:"S\xc1M",MAU_BINH_THU:"TH\xda",MAU_BINH_DOI:"\u0110\xd4I",MAU_BINH_MAU_THAU:"M\u1eacU TH\u1ea6U",MAU_BINH_COMPLETED:"HO\xc0N TH\xc0NH",MAU_BINH_RONG_CUON:"R\u1ed2NG CU\u1ed0N",MAU_BINH_SANH_RONG:"S\u1ea2NH R\u1ed2NG",MAU_BINH_MUOI_BA_LA_CUNG_MAU:"\u0110\u1ed2NG HOA",MAU_BINH_NAM_DOI_MOT_SAM:"N\u0102M \u0110\xd4I M\u1ed8T S\xc1M",MAU_BINH_LUC_PHE_BON:"L\u1ee4C PH\xc9 B\xd4N",MAU_BINH_BA_THUNG_TAI_BA_CHI:"BA TH\xd9NG BA CHI",MAU_BINH_BA_SANH_TAI_BA_CHI:"BA S\u1ea2NH BA CHI",MAU_BINH_THUNG_PHA_SANH_CHI_DAU:"TH\xd9NG PH\xc1 S\u1ea2NH CHI \u0110\u1ea6U",MAU_BINH_TU_QUY_CHI_DAU:"T\u1ee8 QU\xdd CHI \u0110\u1ea6U",MAU_BINH_THUNG_PHA_SANH_CHI_GIUA:"TH\xd9NG PH\xc1 S\u1ea2NH CHI GI\u1eeeA",MAU_BINH_TU_QUY_CHI_GIUA:"T\u1ee8 QU\xdd CHI GI\u1eeeA",MAU_BINH_CU_LU_CHI_GIUA:"C\xd9 L\u0168 CHI GI\u1eeeA",MAU_BINH_SAM_CHI_CUOI:"S\xc1M CHI CU\u1ed0I",MAU_BINH_BINH_LUNG:"BINH L\u1ee6NG",MAU_BINH_SAP_BA_CHI:"S\u1eacP BA CHI",MAU_BINH_THANG_BA_CHI:"TH\u1eaeNG BA CHI",MAU_BINH_CHI_TYPE:"{0} . {1}",TLMN_IGNORE_TURN:"B\u1ece L\u01af\u1ee2T",TLMN_BA_DOI_THONG:"BA \u0110\xd4I TH\xd4NG",TLMN_BON_DOI_THONG:"B\u1ed0N \u0110\xd4I TH\xd4NG",TLMN_MOT_TU_QUY:"T\u1ee8 QU\xdd",TLMN_CONG:"C\xd3NG",TLMN_THOI_HAI:"TH\u1ed0I HAI",TLMN_THOI_BA_DOI_THONG:"TH\u1ed0I BA \u0110\xd4I TH\xd4NG",TLMN_THOI_TU_QUY:"TH\u1ed0I T\u1ee8 QU\xdd",TLMN_THOI_BON_DOI_THONG:"TH\u1ed0I B\u1ed0N \u0110\xd4I TH\xd4NG",TLMN_SANH_RONG:"S\u1ea2NH R\u1ed2NG",TLMN_SAU_DOI_THONG:"S\xc1U \u0110\xd4I TH\xd4NG",TLMN_BON_BO_BA:"B\u1ed0N B\u1ed8 BA",TLMN_HAI_BO_TU_QUY:"HAI B\u1ed8 T\u1ee8 QU\xdd",TLMN_MUOI_HAI_CON_DONG_CHAT:"\u0110\u1ed2NG HOA",TLMN_NAM_DOI_THONG:"N\u0102M \u0110\xd4I TH\xd4NG",TLMN_TU_HAI:"T\u1ee8 QU\xdd HAI",TLMN_SAU_DOI:"S\xc1U \u0110\xd4I",TLMN_CHAN_KET_BA_BICH:"CH\u1eb6N K\u1ebeT BA B\xcdCH",TLMN_KET_BA_BICH:"K\u1ebeT BA B\xcdCH",SAM_BAO_MOT:"B\xc1O 1",SAM_THANG_BAO_MOT:"TH\u1eaeNG B\xc1O 1",SAM_THUA_BAO_MOT:"THUA B\xc1O 1",SAM_IGNORE_TURN:"B\u1ece L\u01af\u1ee2T",SAM_XIN_SAM:"XIN S\xc2M",SAM_CONG:"C\xd3NG",SAM_THOI_HAI:"TH\u1ed0I HAI",SAM_THUA_SAM:"THUA S\xc2M",SAM_THANG_SAM:"TH\u1eaeNG S\xc2M",POKER_CHECK:"XEM",POKER_FOLD:"B\u1ece B\xc0I",POKER_ALL_IN:"ALL IN",POKER_RAISE:"T\u1ed0",POKER_CALL:"THEO",POKER_THUNG_PHA_SANH_LON:"TH\xd9NG PH\xc1 S\u1ea2NH \u0110\u1ea0I",POKER_THUNG_PHA_SANH:"TH\xd9NG PH\xc1 S\u1ea2NH",POKER_TU_QUY:"T\u1ee8 QU\xdd",POKER_CU_LU:"C\xd9 L\u0168",POKER_THUNG:"TH\xd9NG",POKER_SANH_DAI:"S\u1ea2NH \u0110\u1ea0I",POKER_SANH_NHI:"S\u1ea2NH NH\u1eca",POKER_SANH_THUONG:"S\u1ea2NH",POKER_SAM:"S\xc1M",POKER_THU:"TH\xda",POKER_DOI:"\u0110\xd4I",POKER_BAI_CAO:"B\xc0I CAO",LIENG_CHECK:"XEM",LIENG_FOLD:"B\u1ece B\xc0I",LIENG_ALL_IN:"ALL IN",LIENG_RAISE:"T\u1ed0",LIENG_CALL:"THEO",LIENG_SAP:"S\xc1P",LIENG_LIENG:"LI\xcaNG",LIENG_BO_DOI:"B\u1ed8 \u0110\u1ed8I",LIENG_BET_TEXT:"{0} ({1})",XOC_DIA_REGISTER_FORM_MESSAGE_HOME:"C\xe1i",XOC_DIA_REGISTER_FORM_MESSAGE_WAITING:"\u0110ang ch\u1edd",XOC_DIA_REGISTER_FORM_MESSAGE_IGNORE:"Ngh\u1ec9 l\xe0m c\xe1i",XOC_DIA_START_REGISTER_HOST:"B\u1eaft \u0111\u1ea7u \u0111\u0103ng k\xfd l\xe0m host",XOC_DIA_WAIT_NEXT_GAME:"Ch\u1edd \u0111\u1ec3 b\u1eaft \u0111\u1ea7u v\xe1n ch\u01a1i m\u1edbi",XOC_DIA_START_BET:"Vui l\xf2ng \u0111\u1eb7t c\u01b0\u1ee3c",XOC_DIA_BUY_SELL_DOOR:"Th\u1eddi gian mua b\xe1n c\u1eeda",XOC_DIA_NOT_TIME_TO_BET:"Kh\xf4ng ph\u1ea3i th\u1eddi gian \u0111\u1ec3 \u0111\u1eb7t c\u1eeda",XOC_DIA_NOT_SELECT_CHIP:"B\u1ea1n ch\u01b0a ch\u1ecdn ti\u1ec1n c\u01b0\u1ee3c",XOC_DIA_BALANCE_DOOR:"C\xe2n c\u1eeda",XOC_DIA_RESULT:"V\xe1n ch\u01a1i k\u1ebft th\xfac",XOC_DIA_NOT_BET_NO_HOST:"Kh\xf4ng th\u1ec3 \u0111\u1eb7t c\u1eeda n\xe0y khi kh\xf4ng c\xf3 C\xe1i",XOC_DIA_HOST_NOT_BET:"C\xe1i kh\xf4ng th\u1ec3 \u0111\u1eb7t",XOC_DIA_ID:"#{0}",PHOM_SELECT_ONE_CARD:"B\u1ea1n ch\u01b0a ch\u1ecdn b\xe0i",PHOM_PLEASE_BOC_BAI:"B\u1ea1n ch\u01b0a b\u1ed1c b\xe0i",PHOM_PLEASE_SELECT_CARDS_HA:"Vui l\xf2ng ch\u1ecdn ph\u1ecfm c\u1ea7n h\u1ea1",PHOM_AN_CHOT:"\u0102N CH\u1ed0T",PHOM_BI_AN_CHOT:"B\u1eca \u0102N CH\u1ed0T",PHOM_U:"\xd9",PHOM_U_KHAN:"\xd9 KHAN",PHOM_U_TRON:"\xd9 TR\xd2N",PHOM_U_DEN:"\xd9 \u0110\u1ec0N",PHOM_DEN:"\u0110\u1ec0N L\xc0NG",PHOM_NHAT:"NH\u1ea4T",PHOM_NHI:"NH\xcc",PHOM_BA:"BA",PHOM_BET:"B\xc9T",PHOM_MOM:"M\xd3M",PHOM_SCORE:"{0} \u0110I\u1ec2M",XITO_CHECK:"XEM",XITO_FOLD:"B\u1ece B\xc0I",XITO_ALL_IN:"ALL IN",XITO_RAISE:"T\u1ed0",XITO_CALL:"THEO",XITO_THUNG_PHA_SANH:"TH\xd9NG PH\xc1 S\u1ea2NH",XITO_TU_QUY:"T\u1ee8 QU\xdd",XITO_CU_LU:"C\xd9 L\u0168",XITO_THUNG:"TH\xd9NG",XITO_SANH:"S\u1ea2NH",XITO_SAM:"S\xc1M",XITO_THU:"TH\xda",XITO_DOI:"\u0110\xd4I",XITO_BAI_CAO:"B\xc0I CAO",SLOT_NOT_CHANGE_BET:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 thay \u0111\u1ed5i m\u1ee9c c\u01b0\u1ee3c",SLOT_NOT_AUTO_SPIN:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 t\u1ef1 \u0111\u1ed9ng quay",SLOT_NOT_TEST:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 ch\u01a1i th\u1eed",SLOT_BONUS_GAME_FINISH:"Ch\xfac m\u1eebng b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c <color=yellow>{0} $ </color>",SLOT_CANCEL_BACK:"Vui l\xf2ng \u0111\u1ee3i v\xf2ng ch\u01a1i k\u1ebft th\xfac",SLOT_NOT_CHANGE_SELECT_LINE:"Tr\u1ea1ng th\xe1i hi\u1ec7n t\u1ea1i kh\xf4ng th\u1ec3 ch\u1ecdn d\xf2ng c\u01b0\u1ee3c",PLAYING_NOT_CHANGE_BET:"Ch\u1edd h\u1ebft l\u01b0\u1ee3t \u0111\u1ec3 \u0111\u1ed5i c\u1eeda \u0111\u1eb7t",PLAYING_NOT_CHANGE_MONEY_TYPE:"Ch\u1edd h\u1ebft l\u01b0\u1ee3t \u0111\u1ec3 \u0111\u1ed5i lo\u1ea1i ti\u1ec1n",AUTO_SPIN_NOT_CHANGE_BET:"\u0110ang t\u1ef1 \u0111\u1ed9ng quay kh\xf4ng \u0111\u01b0\u1ee3c thay \u0111\u1ed5i c\u1eeda \u0111\u1eb7t",AUTO_SPIN_NOT_CHANGE_MONEY_TYPE:"\u0110ang t\u1ef1 \u0111\u1ed9ng quay kh\xf4ng \u0111\u01b0\u1ee3c thay \u0111\u1ed5i lo\u1ea1i ti\u1ec1n",SPIN_TOO_FAST:"Quay qu\xe1 nhanh",GAME_STOP_SPIN:"Vui l\xf2ng ch\u1edd v\xf2ng quay k\u1ebft th\xfac",MINIGAME_ID:"#{0}",TAIXIU_HISTORIES_DETAIL:"Phi\xean ch\u01a1i {0} - {1}",TAIXIU_BALANCE_DOOR:"Tr\u1ea3 ti\u1ec1n c\xe2n c\u1eeda",TAIXIU_YOU_NOT_BET:"Vui l\xf2ng nh\u1eadp ti\u1ec1n c\u01b0\u1ee3c",TAIXIU_CHAIN_WIN:"Chu\u1ed7i th\u1eafng: {0}",TAIXIU_CHAIN_LOSE:"Chu\u1ed7i thua: {0}",TRENDUOI_CLICK_PLAY:"B\u1ea5m v\xe0o PLAY \u0111\u1ec3 b\u1eaft \u0111\u1ea7u ch\u01a1i",TRENDUOI_STOP_SPINING:"Vui l\xf2ng ch\u1edd v\xf2ng quay k\u1ebft th\xfac",TRENDUOI_FINISH:"K\u1ebft th\xfac",TRENDUOI_LOSE:"B\u1ea1n \u0111\xe3 thua. Ch\xfac b\u1ea1n may m\u1eafn l\u1ea7n sau",BAU_CUA_NEXT_TURN:"L\u01b0\u1ee3t ti\u1ebfp theo",BAU_CUA_BET:"\u0110\u1eb7t c\u01b0\u1ee3c",BAU_CUA_TOP_WEEK_TITLE:"Top tu\u1ea7n"},"TAIXIU_CHAIN_WIN","D\xe2y hi\u1ec7n t\u1ea1i: {0}"),n(o,"TAIXIU_CHAIN_LOSE","D\xe2y hi\u1ec7n t\u1ea1i: {0}"),n(o,"TAIXIU_CHAIN","S\u1ef1 ki\u1ec7n \u0111ua d\xe2y t\xe0i x\u1ec9u"),n(o,"TAIXIU_CURRENT_CHAIN_WIN","D\xe2y d\xe0i nh\u1ea5t: {0}"),n(o,"TAIXIU_CURRENT_CHAIN_LOSE","D\xe2y d\xe0i nh\u1ea5t: {0}"),n(o,"DRAGON_TIGER_CHAIN_WIN","D\xe0i nh\u1ea5t: {0}"),n(o,"DRAGON_TIGER_CHAIN_LOSE","D\xe0i nh\u1ea5t: {0}"),n(o,"DRAGON_TIGER_CURRENT_CHAIN_WIN","Hi\u1ec7n t\u1ea1i: {0}"),n(o,"DRAGON_TIGER_CURRENT_CHAIN_LOSE","Hi\u1ec7n t\u1ea1i: {0}"),n(o,"DRAGON_TIGER_CHAIN","S\u1ef1 ki\u1ec7n \u0111ua d\xe2y long h\u1ed5"),n(o,"DRAGON_TIGER_NO_BET_SELECTED","Vui l\xf2ng ch\u1ecdn m\u1ee9c c\u01b0\u1ee3c"),n(o,"MINI_GAME_RANK_TITLE","B\u1ea2NG X\u1ebeP H\u1ea0NG"),n(o,"MINI_GAME_RANK_TITLE_TAI_XIU","B\u1ea2NG X\u1ebeP H\u1ea0NG T\xc0I X\u1ec8U"),n(o,"MINI_GAME_RANK_TITLE_CHAN_LE","B\u1ea2NG X\u1ebeP H\u1ea0NG CH\u1eb4N L\u1eba"),n(o,"DIAMOND_NO_LINE_SELECTED","B\u1ea1n ch\u01b0a ch\u1ecdn d\xf2ng \u0111\u1eb7t c\u01b0\u1ee3c"),n(o,"PIRATE_NO_LINE_SELECTED","B\u1ea1n ch\u01b0a ch\u1ecdn d\xf2ng \u0111\u1eb7t c\u01b0\u1ee3c"),n(o,"LUCKY_WHEEL_IS_SPINING","Vui l\xf2ng ch\u1edd v\xf2ng quay k\u1ebft th\xfac"),n(o,"LUCKY_WHEEL_MESSAGE","B\u1ea1n c\xf3<color = B95100> {0} </color>l\u01b0\u1ee3t quay mi\u1ec5n ph\xed"),n(o,"LUCKY_WHEEL_CONGRATULATION","Ch\xfac m\u1eebng b\u1ea1n nh\u1eadn \u0111\u01b0\u1ee3c ph\u1ea7n th\u01b0\u1edfng t\u1eeb V\xf2ng Quay May M\u1eafn"),n(o,"FIREFISH_MIN_BET","MIN = {0} {1}"),n(o,"FIREFISH_FISHED","Ng\u01b0\u1eddi ch\u01a1i <color=#FA3030>{0}</color> v\u1eeba gi\u1ebft ch\u1ebft <color=#56EA00>{1}</color> nh\u1eadn \u0111\u01b0\u1ee3c <color=#FAFF1A>{2}</color> {3}"),n(o,"FORGET_PASSWORD_NOTIFICATION","Vui l\xf2ng li\xean h\u1ec7 v\u1edbi BQT qua Fanpage ho\u1eb7c Hotline: 097 171 4012 \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3 ngay b\u1ea1n nh\xe9!"),n(o,"SLOT_NOT_CHANGE_SPIN","Vui l\xf2ng \u0111\u1ee3i v\xf2ng ch\u01a1i k\u1ebft th\xfac"),n(o,"SLOT2_NOT_SELECT_LINE","Vui l\xf2ng ch\u1ecdn d\xf2ng c\u01b0\u1ee3c."),n(o,"SLOT2_AUTOSPIN_NOT_CHANGE","\u0110ang \u1edf ch\u1ebf \u0111\u1ed9 quay t\u1ef1 \u0111\u1ed9ng. B\u1ea1n kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao th\xe1c n\xe0y"),n(o,"SLOT2_RANK_1","Ch\xfac m\u1eebng <color = #F7A200>{0}</color> \u0111\xe3 d\xe0nh \u0111\u01b0\u1ee3c H\u0169 <color = #F7A200>{1}</color> $ v\xe0o l\xfac {2}"),n(o,"SLOT2_RANK_2","TK <color = #F7A200>{0}</color> th\u1eafng <color = #F7A200>{1}</color> $ {2} tr\u01b0\u1edbc"),n(o,"SLOT2_HISTORY","B\u1ea1n ch\u01a1i ph\xf2ng {0} v\xe0 nh\u1eadn \u0111\u01b0\u1ee3c <color = #F7A200>{1}</color> {2} tr\u01b0\u1edbc"),n(o,"SLOT2_NOT_PLAY","Vui l\xf2ng \u0111\u1ee3i v\xf2ng quay k\u1ebft th\xfac"),n(o,"SLOT3_NOT_SELECT_LINE","Vui l\xf2ng ch\u1ecdn d\xf2ng c\u01b0\u1ee3c."),n(o,"SLOT3_AUTOSPIN_NOT_CHANGE","\u0110ang \u1edf ch\u1ebf \u0111\u1ed9 quay t\u1ef1 \u0111\u1ed9ng. B\u1ea1n kh\xf4ng th\u1ec3 th\u1ef1c hi\u1ec7n thao th\xe1c n\xe0y"),n(o,"SLOT3_RANK_1","Ch\xfac m\u1eebng <color = #F7A200>{0}</color> \u0111\xe3 d\xe0nh \u0111\u01b0\u1ee3c h\u0169 <color = #F7A200>{1}</color> $ v\xe0o l\xfac {2}"),n(o,"SLOT3_RANK_2","TK <color = #F7A200>{0}</color> th\u1eafng <color = #F7A200>{1}</color> $ {2} tr\u01b0\u1edbc"),n(o,"SLOT3_HISTORY","B\u1ea1n ch\u01a1i ph\xf2ng {0} v\xe0 nh\u1eadn \u0111\u01b0\u1ee3c <color = #F7A200>{1}</color> {2} tr\u01b0\u1edbc"),n(o,"MESSAGE_FORBIDDEN",["napthe","adm","admin","naptien","bantienao","http","com","vn","net","org","doithe","vuasanhu","coby","kon","zon","xeng","zipo","0tp","club","pay","napthe"]),n(o,"NICK_NAME_ADMIN",["gm_chuanvip","gm_kingtop","gm_tx79"]),n(o,"SPLASH_GET_GET_DATA","\u0110ang l\u1ea5y d\u1eef li\u1ec7u game ..."),n(o,"SPLASH_GET_CONFIG_FAILED","L\u1ea5y d\u1eef li\u1ec7u th\u1ea5t b\u1ea1i"),n(o,"HOT_UPDATE_CHECKING_VERSION","\u0110ang ki\u1ec3m tra phi\xean b\u1ea3n ..."),n(o,"HOT_UPDATE_RETRY","Th\u1eed l\u1ea1i ..."),n(o,"HOT_UPDATE_NOT_FOUND","Kh\xf4ng t\xecm th\u1ea5y Hot Update ..."),n(o,"HOT_UPDATE_DOWNLOAD_MANIFEST_FAILED","T\u1ea3i manifest th\u1ea5t b\u1ea1i ..."),n(o,"HOT_UPDATE_ALREADY_UP_TO_DATE","Phi\xean b\u1ea3n m\u1edbi nh\u1ea5t ..."),n(o,"HOT_UPDATE_FOUND_UPDATE","T\xecm th\u1ea5y phi\xean b\u1ea3n c\u1eadp nh\u1eadt ..."),n(o,"HOT_UPDATE_UPDATING","\u0110ang c\u1eadp nh\u1eadt ..."),n(o,"LOTTERY_NOT_NUMBER","Vui l\xf2ng ch\u1ecdn s\u1ed1"),n(o,"LOTTERY_NOT_BET","Vui l\xf2ng ch\u1ecdn m\u1ee9c c\u01b0\u1ee3c"),n(o,"LOTTERY_SELECT_LO","Ch\u1ecdn 1 s\u1ed1 b\u1ea5t k\u1ef3. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi s\u1ed1 \u0111\xf3 c\xf3 trong b\u1ea3ng k\u1ebft qu\u1ea3"),n(o,"LOTTERY_SELECT_DE","Ch\u1ecdn 1 s\u1ed1 b\u1ea5t k\u1ef3. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi s\u1ed1 \u0111\xf3 v\u1ec1 v\xe0o gi\u1ea3i \u0111\u1eb7c bi\u1ec7t ( gi\u1ea3i cu\u1ed1i c\xf9ng)"),n(o,"LOTTERY_SELECT_CHAN","C\u01b0\u1ee3c t\u1ea5t c\u1ea3 c\xe1c s\u1ed1 ch\u1eb5n. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi k\u1ebft qu\u1ea3 v\u1ec1 c\xf3 \xedt nh\u1ea5t 14 s\u1ed1 ch\u1eb5n"),n(o,"LOTTERY_SELECT_LE","C\u01b0\u1ee3c t\u1ea5t c\u1ea3 c\xe1c s\u1ed1 l\u1ebb. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi k\u1ebft qu\u1ea3 v\u1ec1 c\xf3 \xedt nh\u1ea5t 14 s\u1ed1 l\u1ebb"),n(o,"LOTTERY_SELECT_DAU","Ch\u1ecdn d\xe3y s\u1ed1 b\u1eaft \u0111\u1ea7u b\u1eb1ng s\u1ed1 b\u1ea1n ch\u1ecdn. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi c\xf3 c\xe1c k\u1ebft qu\u1ea3 b\u1eaft \u0111\u1ea7u b\u1eb1ng s\u1ed1 b\u1ea1n \u0111\xe3 ch\u1ecdn"),n(o,"LOTTERY_SELECT_DUOI","Ch\u1ecdn d\xe3y s\u1ed1 k\u1ebft th\xfac b\u1eb1ng s\u1ed1 b\u1ea1n ch\u1ecdn. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi c\xf3 c\xe1c k\u1ebft qu\u1ea3 k\u1ebft th\xfac b\u1eb1ng s\u1ed1 b\u1ea1n \u0111\xe3 ch\u1ecdn"),n(o,"LOTTERY_SELECT_TRANG"," Ch\u1ecdn t\xe2t c\u1ea3 c\xe1c s\u1ed1 trong \xf4 tr\u1eafng. B\u1ea1n s\u1ebd th\u1eafng khi k\u1ebft qu\u1ea3 v\u1ec1 \xedt nh\u1ea5t c\xf3 14 s\u1ed1 trong \xf4 tr\u1eafng"),n(o,"LOTTERY_SELECT_DO","Ch\u1ecdn t\xe2t c\u1ea3 c\xe1c s\u1ed1 trong \xf4 \u0111\u1ecf. B\u1ea1n s\u1ebd th\u1eafng khi k\u1ebft qu\u1ea3 v\u1ec1 \xedt nh\u1ea5t c\xf3 14 s\u1ed1 trong \xf4 \u0111\u1ecf"),n(o,"LOTTERY_SELECT_XIEN_2","Ch\u1ecdn 2 s\u1ed1 b\u1ea5t k\u1ef3. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi c\u1ea3 2 s\u1ed1 \u0111\xf3 c\xf3 trong b\u1ea3ng k\u1ebft qu\u1ea3"),n(o,"LOTTERY_SELECT_XIEN_3","Ch\u1ecdn 3 s\u1ed1 b\u1ea5t k\u1ef3. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi c\u1ea3 3 s\u1ed1 \u0111\xf3 c\xf3 trong b\u1ea3ng k\u1ebft qu\u1ea3"),n(o,"LOTTERY_SELECT_XIEN_4","Ch\u1ecdn 4 s\u1ed1 b\u1ea5t k\u1ef3. B\u1ea1n s\u1ebd th\u1eafng c\u01b0\u1ee3c khi c\u1ea3 4 s\u1ed1 \u0111\xf3 c\xf3 trong b\u1ea3ng k\u1ebft qu\u1ea3"),n(o,"LOTTERY_SELECT_HU","Ch\u1ecdn 10 s\u1ed1 b\u1ea5t k\u1ef3. B\u1ea1n s\u1ebd th\u1eafng 50% h\u0169 khi k\u1ebft qu\u1ea3 v\u1ec1 kh\xf4ng c\xf3 10 s\u1ed1 \u0111\xe3 ch\u1ecdn (l\xf4 tr\u01b0\u1ee3t), ph\xed c\u01b0\u1ee3c 10k"),n(o,"LOTTERY_SELECT_REBETS","C\u01b0\u1ee3c l\u1ea1i to\xe0n b\u1ed9 th\xf4ng tin \u0111\u1eb7t c\u1ee7a b\u1ea1n phi\xean ch\u01a1i tr\u01b0\u1edbc"),n(o,"LOTTERY_FIRST_BETS_NOT_SELECT","Phi\xean tr\u01b0\u1edbc b\u1ea1n ch\u01b0a c\u01b0\u1ee3c g\xec"),n(o,"LOTTERY_BETS_NOT_FORMAT","S\u1ed1 l\u01b0\u1ee3ng s\u1ed1 kh\xf4ng \u0111\xfang v\u1edbi ki\u1ec3u c\u01b0\u1ee3c"),n(o,"LOTTERY_NOT_CHANGE_BET","Vui l\xf2ng \u0111\u1eb7t c\u01b0\u1ee3c song ho\u1eb7c \u0111\u1eb7t c\u01b0\u1ee3c l\u1ea1i"),n(o,"LOTTERY_NOT_START","V\xf2ng quay m\u1edbi ch\u01b0a \u0111\u01b0\u1ee3c b\u1eaft \u0111\u1ea7u"),n(o,"LOTTERY_SELECT_TYPE","Vui l\xf2ng ch\u1ecdn ki\u1ec3u c\u01b0\u1ee3c"),n(o,"LOTTERY_BET_DE","<b>\u0110\u1ec1</b>: {0} - ({1})"),n(o,"LOTTERY_BET_LO","<b>L\xf4</b>: {0} - ({1})"),n(o,"LOTTERY_BET_XIEN_2","<b>Xi\xean 2</b>: {0} - ({1})"),n(o,"LOTTERY_BET_XIEN_3","<b>Xi\xean 3</b>: {0} - ({1})"),n(o,"LOTTERY_BET_XIEN_4","<b>Xi\xean 4</b>: {0} - ({1})"),n(o,"LOTTERY_BET_CHAN","<b>Ch\u1eb5n</b>: ({0})"),n(o,"LOTTERY_BET_LE","<b>L\u1ebb</b>: ({0})"),n(o,"LOTTERY_BET_DAU","<b>\u0110\u1ea7u</b>: {0} - ({1})"),n(o,"LOTTERY_BET_DUOI","<b>\u0110u\xf4i</b>: {0} - ({1})"),n(o,"LOTTERY_BET_DO","<b>\u0110\u1ecf</b>: ({0})"),n(o,"LOTTERY_BET_TRANG","<b>Tr\u1eafng</b>: ({0})"),n(o,"LOTTERY_BET_HU","<b>H\u0169</b>: {0} - ({1})"),n(o,"LOTTERY_BET_DE_2","<b>\u0110\u1ec1</b>: {0} - ({1})"),n(o,"LOTTERY_BET_HU_2","<b>H\u0169</b>: {0} - ({1})"),n(o,"LOTTERY_CHAT"," <color = #FCC63C>Ch\xfac m\u1eebng t\xe0i kho\u1ea3n {0} \u0111\xe3 th\u1eafng {1} ({2})</color>"),o);e.exports=s,cc._RF.pop()},{}],MiniBaCayCard:[function(t,e,i){"use strict";cc._RF.push(e,"00e7ah3NfVE2KMMQnwsaL1J","MiniBaCayCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],MiniBaCayConstant:[function(t,e,i){"use strict";cc._RF.push(e,"dbf0bAXLmFCYpC31i6JhGjo","MiniBaCayConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"mini_3cay.ADD_EVENT",REMOVE_EVENT:"mini_3cay.REMOVE_EVENT",SPIN:"mini_3cay.SPIN",IS_SHOW:"mini_3cay_is_show",POSITION:"mini_3cay_position",IS_AUTO_SPIN:"mini_3cay_auto_spin",IS_SPIN_FAST:"mini_3cay_spin_fast",BET_VALUE:"mini_3cay_bet_value",IS_SPIN_ONE_REEL:"mini_3cay_one_reel",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"mini_3cay_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"mini_3cay.GET_TOP",MINIGAME_CONFIG_ID:7},cc._RF.pop()},{}],MiniBaCayHistories:[function(t,e,i){"use strict";cc._RF.push(e,"69b11gPzOhAW4b8h5A0iyCw","MiniBaCayHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyMiniBaCayItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryMiniBaCay(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyMiniBaCayItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("MiniPokerHistoryItem").init(t[e],e,!1)}}},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],MiniBaCayReel:[function(t,e,i){"use strict";cc._RF.push(e,"c2a35BzKExNwZELdDXYID+0","MiniBaCayReel");var o=t("./MiniBaCayCard"),n=t("../MiniGameConstant"),s=t("../../../util/RandomUtil"),a=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab},init:function(t){this.MiniBaCay=t,this.MiniBaCayUI=t.MiniBaCayUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<20;t++)this.pool.put(cc.instantiate(this.cardPrefab))},spin:function(t,e,i,o,s,r,c,h){if(this.MiniBaCay){this.reset(),this.setCard(this.trueValue),this.trueValue=t;for(var l=1;l<e;l++){var u=t;l!=e-1&&(u=this.getRandomTrueValue());var d=this.instanceCard(u);d.setPosition(0,l*a.MINIBACAY_DISTANCE_TWO_CARD),d.parent=this.node}var m=(e-1)*a.MINIBACAY_DISTANCE_TWO_CARD*this.node.scale,p=m/a.MINIBACAY_SPEED_SPIN_CARD,f=cc.moveTo(p,this.node.x,-m).easing(cc.easeInOut(3)),g=cc.callFunc(function(){this.resetPositionReel(),this.setCard(t),i&&this.MiniBaCay.node.active&&(r===n.WIN_TYPE_JACKPOT?this.MiniBaCayUI.showJackPot(o,c):(this.MiniBaCayUI.showEffectWinReel(h),this.MiniGameResult.show(o,this.getGroupTypeCard(s,h))))},this),_=this.MiniBaCay.isSpinFast()?cc.delayTime(0):cc.delayTime(a.MINIBACAY_DELAY_SPIN),S=cc.callFunc(function(){i&&this.MiniBaCay.node.active&&this.MiniBaCay.isAutoSpin()&&this.MiniBaCay.spin()},this);this.node.runAction(cc.sequence(f,g,_,S)),r!==n.WIN_TYPE_JACKPOT||this.MiniBaCay.node.active||(this.MiniBaCay.node.active=!0,this.MiniBaCayUI.showJackPot(o,c))}},getGroupTypeCard:function(t,e){var i=[];return t&&e&&(e[0]&&e[0]>0&&t[0]&&i.push(t[0]),e[1]&&e[1]>0&&t[1]&&i.push(t[1]),e[2]&&e[2]>0&&t[2]&&i.push(t[2])),i.join("-")},getRandomTrueValue:function(){return 100*s.getRandomInt(2,14)+s.getRandomInt(0,3)},randomCard:function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},setCard:function(t){this.trueValue=t,this.trueValue||(this.trueValue=this.getRandomTrueValue());var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},instanceCard:function(t){var e=void 0;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var i=e.getComponent("Card2Controller"),n=new o(t);return i.init(n),i.reveal(!0),e.scale=a.MINIBACAY_SCALE_CARD,e.cardController=i,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},resetPositionReel:function(){this.node.setPosition(this.node.x,0),this.putAllChipToPool()},reset:function(){this.node.stopAllActions(!0),this.resetPositionReel()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./MiniBaCayCard":"MiniBaCayCard"}],MiniBaCayUI:[function(t,e,i){"use strict";cc._RF.push(e,"5f179NuymBBObFu53nM6Fre","MiniBaCayUI");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{stopAutoSpinNode:cc.Node,spinNode:cc.Node,bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,bg1Node:cc.Node,bg3Node:cc.Node,headerNode:cc.Node,footerNode:cc.Node,centerNode:cc.Node,reels2Node:cc.Node,reels3Node:cc.Node,lightWinReel1Node:cc.Node,lightWinReel2Node:cc.Node,lightWinReel3Node:cc.Node,moneyWinLabelReel1:cc.Label,moneyWinLabelReel2:cc.Label,moneyWinLabelReel3:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOn1Sprite:cc.Sprite,betOn2Sprite:cc.Sprite,betOn3Sprite:cc.Sprite,betMoneySpriteFrame:cc.SpriteFrame,betGoldSpriteFrame:cc.SpriteFrame,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},show1GameNode:function(){this.bg1Node.active=!0,this.bg3Node.active=!1,this.reels2Node.active=!1,this.reels3Node.active=!1,this.headerNode.y=-13,this.footerNode.y=-5,this.centerNode.y=0},show3GameNode:function(){this.bg1Node.active=!1,this.bg3Node.active=!0,this.reels2Node.active=!0,this.reels3Node.active=!0,this.headerNode.y=122,this.footerNode.y=-137,this.centerNode.y=0},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?(this.setBetMoney(),this.betOn1Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn2Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn3Sprite.spriteFrame=this.betMoneySpriteFrame):(this.setBetGold(),this.betOn1Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn2Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn3Sprite.spriteFrame=this.betGoldSpriteFrame)},showEffectWinReel:function(t){this.hideEffectWinReel(),t&&(t[0]&&t[0]>0&&(this.lightWinReel1Node.active=!0,this.moneyWinLabelReel1.string=o.numberWithCommas(t[0])),t[1]&&t[1]>0&&(this.lightWinReel2Node.active=!0,this.moneyWinLabelReel2.string=o.numberWithCommas(t[1])),t[2]&&t[2]>0&&(this.lightWinReel3Node.active=!0,this.moneyWinLabelReel3.string=o.numberWithCommas(t[2])))},hideEffectWinReel:function(){this.lightWinReel1Node.active=!1,this.lightWinReel2Node.active=!1,this.lightWinReel3Node.active=!1,this.moneyWinLabelReel1.string=0,this.moneyWinLabelReel2.string=0,this.moneyWinLabelReel3.string=0},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetMoney:function(){var t=n.MINIBACAY_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=n.MINIBACAY_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=o.nFormatter(t),this.bet2Label.string=o.nFormatter(e),this.bet3Label.string=o.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},showStopAutoSpinNode:function(){this.stopAutoSpinNode.active=!0,this.spinNode.active=!1},hideStopAutoSpinNode:function(){this.stopAutoSpinNode.active=!1,this.spinNode.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],MiniBaCay:[function(t,e,i){"use strict";cc._RF.push(e,"dbd01NYvvxMeLQwSYzge2Jc","MiniBaCay");var o=t("../../../base/BaseController"),n=t("./MiniBaCayConstant"),s=t("./MiniBaCayUI"),a=t("./MiniBaCayReel"),r=t("../MiniGameResult"),c=t("../item/JackpotItem"),h=t("../../../helper/Config"),l=t("../../../helper/Constant"),u=t("../../../helper/Message"),d=t("../../../object/RoomType"),m=t("../MiniGameConstant"),p=t("../item/MiniGameXPer"),f=t("../../../util/RandomUtil");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,autoSpinToggle:cc.Toggle,spinFastToggle:cc.Toggle,onReelButtonNode:cc.Node,threeReelButtonNode:cc.Node,reels:[a],reels2:[a],reels3:[a],JackpotItem:c,toastPrefab:cc.Prefab,MiniBaCayUI:s,MiniGameResult:r,MiniGameXPer:p},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){this._super(),this.data=null,this.isMoneyType=!0,this.betOrder=0,this.intervalSpin=null;var t=this.getRandomListTrueValue(),e=t.slice(0,3),i=t.slice(3,6),o=t.slice(6,9);for(var n in this.reels)this.reels[n].init(this),this.reels[n].setCard(e[n]);for(var s in this.reels2)this.reels2[s].init(this),this.reels2[s].setCard(i[s]);for(var a in this.reels3)this.reels3[a].init(this),this.reels3[a].setCard(o[a]);this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(n.ADD_EVENT)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(n.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[n.MONEY_TYPE]===n.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().mini_3cay_free,i=t[n.IS_AUTO_SPIN],o=t[n.IS_SPIN_FAST],s=t[n.BET_VALUE],a=t[n.IS_SPIN_ONE_REEL];switch(o&&this.spinFastToggle.check(),a?this.onOneReelClick():this.onThreeReelClick(),i?(this.autoSpinToggle.check(),this.spin(),this.MiniBaCayUI.showStopAutoSpinNode()):this.MiniBaCayUI.hideStopAutoSpinNode(),s){case n.BET_100:this.setBet1();break;case n.BET_1k:this.setBet2();break;case n.BET_10k:this.setBet3();break;default:this.setBet1()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(n.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationMini3Cay(!0,e):this.MiniGameCircleNotification.initShowNotificationMini3Cay(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationMini3Cay(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,o=t[e].quantity;i===n.MINIGAME_CONFIG_ID&&(o>0?this.MiniBaCayUI.showMiniGameSpinFree(o):this.MiniBaCayUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case n.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i),this.controller.EventGame&&this.controller.EventGame.initDataTop(i);break;case n.REQUEST_INFO:this.handleInfo(i);break;case n.REQUEST_SPIN:this.handleSpin(i);break;case n.REQUEST_MESSAGE:this.handleMessage(o)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.showMessage(t),this.MiniBaCayUI.showStopAutoSpinNode()},handleSpin:function(t){this.setSendSpin(!1),this.MiniBaCayUI.hideEffectWinReel();var e=t.group_cards_type,i=t.slot_data,o=t.total_prize_value,n=t.win_type,s=t.money_type,a=t.spin_id,r=t.array_win_prize,c=s==d.MONEY_CODE;this.idLabel.string=String.format(u.MINIGAME_ID,a);var h=i.slice(0,3),l=i.slice(3,6),m=i.slice(6,9);this.isSpinOneReel()?this.spinReels(h,o,e,n,c,r,this.reels,!0):(this.spinReels(h,o,e,n,c,r,this.reels),this.spinReels(l,o,e,n,c,r,this.reels2),this.spinReels(m,o,e,n,c,r,this.reels3,!0)),this.isAutoSpin()?this.MiniBaCayUI.showStopAutoSpinNode():this.MiniBaCayUI.hideStopAutoSpinNode()},spinReels:function(t,e,i,o,n,s,a,r){for(var c in a)c==a.length-1&&r?a[c].spin(t[c],h.MINIBACAY_NUMBER_CARDS_SPIN+2*c,!0,e,i,o,n,s):a[c].spin(t[c],h.MINIBACAY_NUMBER_CARDS_SPIN+2*c)},onSpinClick:function(){this.isSpinning()||this.spin()},isSpinning:function(){return this.isSpinOneReel()?0!==cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node):0!==cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[2].node)},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t=this.isSpinOneReel()?1:3,e={money_type:this.isMoneyType?d.MONEY_CODE:d.GOLD_CODE,money_value:this.getCurrentBet(),number_line:t};this.sendRequest.sendNoPrefixToZone(n.SPIN,e),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(l.MINI_BACAY)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showMiniBaCayHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(m.MINI_BACAY),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowMiniBaCay(!1)},onGoldClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.MiniBaCayUI.enableBet1Button(),this.getTempData()[n.BET_VALUE]=n.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.MiniBaCayUI.enableBet2Button(),this.getTempData()[n.BET_VALUE]=n.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.MiniBaCayUI.enableBet3Button(),this.getTempData()[n.BET_VALUE]=n.BET_10k},onMiniBaCayClick:function(){this.setShowMiniBaCay(!this.isShow)},onStopAutoSpinClick:function(){this.autoSpinToggle.isChecked=!1,this.onAutoSpinToggle()},onAutoSpinToggle:function(){var t=this.isAutoSpin();this.getTempData()[n.IS_AUTO_SPIN]=t,t||this.MiniBaCayUI.hideStopAutoSpinNode(),t&&!this.isSpinning()&&this.spin()},onOneReelClick:function(){this.isSpinning()?this.showMessage(u.GAME_STOP_SPIN):(this.onReelButtonNode.active=!1,this.threeReelButtonNode.active=!0,this.showContentGame())},onThreeReelClick:function(){this.isSpinning()?this.showMessage(u.GAME_STOP_SPIN):(this.onReelButtonNode.active=!0,this.threeReelButtonNode.active=!1,this.showContentGame())},showContentGame:function(){var t=this.isSpinOneReel();this.getTempData()[n.IS_SPIN_ONE_REEL]=t,t?this.MiniBaCayUI.show1GameNode():this.MiniBaCayUI.show3GameNode()},onSpinFastToggle:function(){var t=this.isSpinFast();this.getTempData()[n.IS_SPIN_FAST]=t},setShowMiniBaCay:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().mini_3cay_free;cc.sys.localStorage.setItem(n.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin();var t=this.isSpinFast()?h.MINIBACAY_TIME_FAST_SPIN:h.MINIBACAY_TIME_SPIN;this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*t)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=h.MINIGAME_SCALE_TOAST,e.setPosition(h.MINIGAME_POSITION_TOAST_X,h.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.MiniBaCayUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?n.MONEY_TYPE_MONEY:n.MONEY_TYPE_GOLD;this.getTempData()[n.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?h.MINIBACAY_LIST_BET_MONEY:h.MINIBACAY_LIST_BET_GOLD)[this.betOrder]},isSpinOneReel:function(){return this.onReelButtonNode.active},isAutoSpin:function(){return this.autoSpinToggle.isChecked},isSpinFast:function(){return this.spinFastToggle.isChecked},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},getRandomListTrueValue:function(){for(var t=[];t.length<9;){var e=100*f.getRandomInt(2,14)+f.getRandomInt(0,3);-1===t.indexOf(e)&&t.push(e)}return t},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./MiniBaCayConstant":"MiniBaCayConstant","./MiniBaCayReel":"MiniBaCayReel","./MiniBaCayUI":"MiniBaCayUI"}],MiniGameChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"cdc36jet+hN96APTHmjzEnK","MiniGameChatItem");var o=t("../../../helper/Message"),n=t("../../../util/FormatUtil"),s=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,messageLabel:cc.Label},onLoad:function(){},init:function(t){if(t.nick_name){this.nameLabel.string=s.getServerID(t.server_id)+t.nick_name+":",this.nameLabel._updateRenderData(!0);for(var e=this.nameLabel.node.width,i=Math.floor(e/4.5)+2,o=n.formatMessage(t.message||t.msg),a=0;a<i;a++)o=" "+o;this.messageLabel.string=o,this.messageLabel._updateRenderData(!0),this.node.height=this.messageLabel.node.height,this.checkIsAgent(t.nick_name)&&(this.nameLabel.node.color=cc.Color.YELLOW)}else this.node.active=!1},checkIsAgent:function(t){for(var e=o.NICK_NAME_ADMIN,i=0,n=e.length;i<n;i++)if(t===e[i])return!0;return!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],MiniGameCircleNotification:[function(t,e,i){"use strict";cc._RF.push(e,"aaf175JrO9JVI1Y8oUTA2he","MiniGameCircleNotification"),cc.Class({extends:cc.Component,properties:{bomNotificationNode:cc.Node,bomNotificationLabel:cc.Label,diamondNotificationNode:cc.Node,diamondNotificationLabel:cc.Label,diamond2NotificationNode:cc.Node,diamond2NotificationLabel:cc.Label,luckyWheelNotificationNode:cc.Node,luckyWheelNotificationLabel:cc.Label,mini3CayNotificationNode:cc.Node,mini3CayNotificationLabel:cc.Label,miniPokerNotificationNode:cc.Node,miniPokerNotificationLabel:cc.Label,wildNotificationNode:cc.Node,wildNotificationLabel:cc.Label},init:function(t){this.MiniGame=t,this.controller=t.controller},initShowNotificationBom:function(t,e){this.bomNotificationNode&&this.bomNotificationLabel&&(this.bomNotificationNode.active=t,this.bomNotificationLabel.string=e)},initShowNotificationDiamond:function(t,e){this.diamondNotificationNode&&this.diamondNotificationLabel&&(this.diamondNotificationNode.active=t,this.diamondNotificationLabel.string=e)},initShowNotificationDiamond2:function(t,e){this.diamond2NotificationNode&&this.diamond2NotificationLabel&&(this.diamond2NotificationNode.active=t,this.diamond2NotificationLabel.string=e)},initShowNotificationLuckyWheel:function(t,e){this.luckyWheelNotificationNode&&this.luckyWheelNotificationLabel&&(this.luckyWheelNotificationNode.active=t,this.luckyWheelNotificationLabel.string=e)},initShowNotificationMini3Cay:function(t,e){this.mini3CayNotificationNode&&this.mini3CayNotificationLabel&&(this.mini3CayNotificationNode.active=t,this.mini3CayNotificationLabel.string=e)},initShowNotificationMiniPoker:function(t,e){this.miniPokerNotificationNode&&this.miniPokerNotificationLabel&&(this.miniPokerNotificationNode.active=t,this.miniPokerNotificationLabel.string=e)},initShowNotificationWild:function(t,e){this.wildNotificationNode&&this.wildNotificationLabel&&(this.wildNotificationNode.active=t,this.wildNotificationLabel.string=e)}}),cc._RF.pop()},{}],MiniGameCircle:[function(t,e,i){"use strict";cc._RF.push(e,"a4783J/PKxMzYPMDSDa5aOh","MiniGameCircle");var o=t("../../base/BaseController"),n=t("../../helper/Config"),s=t("../../util/NodeUtil"),a=t("./MiniGameConstant"),r=t("./tai-xiu/TaiXiuTime");cc.Class({extends:o,properties:{circleButtonNode:cc.Node,circleGamesNode:cc.Node,TaiXiuTime:r},init:function(t){this.MiniGame=t,this.controller=t.controller},onLoad:function(){var t=this;this._super(),this.isShow=!1,this.isMove=!1,this.startPosition=null,this.positionX=this.node.x,this.positionY=this.node.y,this.node.zIndex=2,this.onTouchStart=function(e){t.isMove=!1,t.startPosition=t.node.getPosition()},this.onTouchMove=function(e){t.isMove=!0;var i=e.touch.getDelta(),o=t.node.x+i.x,s=t.node.y+i.y,a=n.CANVAS_WIDTH/2,r=-n.CANVAS_WIDTH/2,c=n.GAME_HEIGHT/2,h=-(n.CANVAS_HEIGHT-n.GAME_HEIGHT/2);o>a?o=a:o<r&&(o=r),s>c?s=c:s<h&&(s=h),t.node.x=o,t.node.y=s},this.onTouchEnd=function(e){t.isMove&&t.savePosition();var i=t.node.getPosition();s.getDistanceTwoNode(t.startPosition,i)<10&&t.onCircleButtonClick()},this.onMouseEnter=function(t){t.stopPropagation()},this.initData()},onEnable:function(){this.addEventMove()},addEventMove:function(){this.circleButtonNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleButtonNode),this.circleGamesNode.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleGamesNode),this.circleButtonNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleButtonNode),this.circleGamesNode.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleGamesNode),this.circleButtonNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleButtonNode),this.circleGamesNode.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleGamesNode),cc.sys.isBrowser&&this.circleGamesNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.circleGamesNode)},removeEventMove:function(){this.circleButtonNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleButtonNode),this.circleGamesNode.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this.circleGamesNode),this.circleButtonNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleButtonNode),this.circleGamesNode.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.circleGamesNode),this.circleButtonNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleButtonNode),this.circleGamesNode.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this.circleGamesNode),cc.sys.isBrowser&&this.circleGamesNode.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.circleGamesNode)},initData:function(){this.initSaveData(),this.setShowCircleGames(this.isShow),this.node.setPosition(this.positionX,this.positionY)},initSaveData:function(){var t=cc.sys.localStorage.getItem(a.MINIGAME_IS_SHOW);"true"!==t&&!0!==t||(this.isShow=!0);var e=this.getTempData()[a.MINIGAME_POSITION];if(e){this.positionX=e.x,this.positionY=e.y;var i=cc.director.getWinSize();this.positionX>i.width/2?this.positionX=i.width/2:this.positionX<-i.width/2&&(this.positionX=-i.width/2),this.positionY>i.height/2?this.positionY=i.height/2:this.positionY<-i.height/2&&(this.positionY=-i.height/2)}},savePosition:function(){var t={x:this.node.x,y:this.node.y};this.getTempData()[a.MINIGAME_POSITION]=t},onCircleButtonClick:function(){this.setShowCircleGamesWithAnimation(!this.isShow)},setShowCircleGames:function(t){this.circleGamesNode.active=t,this.isShow=t,cc.sys.localStorage.setItem(a.MINIGAME_IS_SHOW,this.isShow),t&&(this.circleGamesNode.opacity=255,this.circleGamesNode.angle=0,this.circleGamesNode.scale=1),this.TaiXiuTime.setPositionBymoveByMiniGameCircleShow(t)},setShowCircleGamesWithAnimation:function(t){this.circleGamesNode.stopAllActions(),this.isShow=t,cc.sys.localStorage.setItem(a.MINIGAME_IS_SHOW,this.isShow),t?(this.circleGamesNode.active=!0,this.circleGamesNode.opacity=0,this.circleGamesNode.angle=360,this.circleGamesNode.scale=0,this.circleGamesNode.runAction(cc.spawn(cc.scaleTo(n.MINIGAME_TIME_SHOW,1),cc.fadeIn(n.MINIGAME_TIME_SHOW),cc.rotateBy(n.MINIGAME_TIME_SHOW,360)))):this.circleGamesNode.runAction(cc.sequence(cc.spawn(cc.scaleTo(n.MINIGAME_TIME_SHOW,0),cc.fadeOut(n.MINIGAME_TIME_SHOW),cc.rotateBy(n.MINIGAME_TIME_SHOW,-360)),cc.callFunc(function(){this.circleGamesNode.active=!1},this))),this.TaiXiuTime.moveByMiniGameCircleShow(t)},onTaiXiuClick:function(){this.MiniGame.TaiXiu.onTaiXiuClick()},onLuckyWheelClick:function(){this.MiniGame.LuckyWheel?this.MiniGame.LuckyWheel.node.active=!0:this.MiniGame.createLuckyWheel()},onMiniPokerClick:function(){this.MiniGame.MiniPoker?this.MiniGame.MiniPoker.onMiniPokerClick():this.MiniGame.createMiniPoker()},onPirateClick:function(){this.MiniGame.Pirate?this.MiniGame.Pirate.onPirateClick():this.MiniGame.createPirate()},onBomClick:function(){this.MiniGame.Bom?this.MiniGame.Bom.onBomClick():this.MiniGame.createBom()},onMiniBaCayClick:function(){this.MiniGame.MiniBaCay?this.MiniGame.MiniBaCay.onMiniBaCayClick():this.MiniGame.createMini3Cay()},onDiamondClick:function(){this.MiniGame.Diamond?this.MiniGame.Diamond.onDiamondClick():this.MiniGame.createDiamond()},onTrenDuoiClick:function(){this.MiniGame.TrenDuoi?this.MiniGame.TrenDuoi.onTrenDuoiClick():this.MiniGame.createTrenDuoi()},onWildClick:function(){this.MiniGame.Wild?this.MiniGame.Wild.onWildClick():this.MiniGame.createWild()},onBauCuaClick:function(){this.MiniGame.BauCua?this.MiniGame.BauCua.onBauCuaClick():this.MiniGame.createBauCua()},onDragonTigerClick:function(){this.MiniGame.DragonTiger?this.MiniGame.DragonTiger.onDragonTigerClick():this.MiniGame.createDragonTiger()},onMiniXocDiaClick:function(){this.MiniGame.MiniXocDia?this.MiniGame.MiniXocDia.onMiniXocDiaClick():this.MiniGame.createMiniXocDia()},onQuestClick:function(){this.MiniGame.Quest.showDialog()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Config":"Config","../../util/NodeUtil":"NodeUtil","./MiniGameConstant":"MiniGameConstant","./tai-xiu/TaiXiuTime":"TaiXiuTime"}],MiniGameConstant:[function(t,e,i){"use strict";cc._RF.push(e,"09d1bQBbfpKw5vHATLCnIJ0","MiniGameConstant");e.exports={MINIGAME_IS_SHOW:"minigame_is_show",MINIGAME_POSITION:"minigame_position",JACKPOT_IS_SHOW:"jackpot_is_show",JACKPOT_POSITION:"jackpot_position",LUCKY_WHEEL_LAST_DATE_SHOW:"luckywheel_last_date_show",TAIXIU:"tai_xiu",LUCKY_WHEEL:"lucky_wheel",JACKPOT:"jackpot",DIAMOND_2:"diamond",DIAMOND:"DIAMOND",DIAMOND_2_1:"diamond2",DIAMOND_2_2:"DIAMOND2",BOM:"bom",BOM_2:"BOM",TREN_DUOI:"hilo",BAU_CUA:"hooheyhow",DRAGON_TIGER:"dragon_tiger",TAIXIU_3:"taixiu",MINI_POKER:"mini_poker",MINI_POKER_2:"MINIPOKER",MINI_POKER_3:"minipoker",MINI_BACAY:"MINI3CAY",MINI_BACAY_2:"mini_3cay",MINI_BACAY_3:"mini3cay",WILD:"wild",WILD_2:"WILD",MINI_XOC_DIA:"minigame_xocdia",INFO:"INFO",WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_JACKPOT:3,NAME_MINI_3CAY:"Mini Ba C\xe2y",NAME_MINI_POKER:"Mini Poker",NAME_DIAMOND:"N\xf4ng Tr\u1ea1i",NAME_PIRATE:"H\u1ea3i T\u1eb7c",NAME_BOM:"Pubg",NAME_WILD:"X\xe8ng Hoa Qu\u1ea3",URL_MINIGAME_BAU_CUA:"prefab/mini-game/bau-cua-node",URL_MINIGAME_BOM:"prefab/mini-game/bom-node",URL_MINIGAME_DIAMOND:"prefab/mini-game/diamond-node",URL_MINIGAME_DRAGON_TIGER:"prefab/mini-game/dragon-tiger-node",URL_MINIGAME_LUCKY_WHEEL:"prefab/mini-game/lucky-wheel-node",URL_MINIGAME_MINI_3_CAY:"prefab/mini-game/mini-bacay-node",URL_MINIGAME_MINI_POKER:"prefab/mini-game/mini-poker-node",URL_MINIGAME_XOC_DIA:"prefab/mini-game/mini-xoc-dia",URL_MINIGAME_PIRATE:"prefab/mini-game/pirate-node",URL_MINIGAME_TREN_DUOI:"prefab/mini-game/tren-duoi-node",URL_MINIGAME_WILD:"prefab/mini-game/wild-node",MINI_GAME_ID_BOM:222,MINI_GAME_ID_DIAMOND:16,MINI_GAME_ID_DIAMOND_2X:110000018,MINI_GAME_ID_DIAMOND_3:110000023,MINI_GAME_ID_MINI_3_CAY:14,MINI_GAME_ID_MINI_3_CAY_2:110000021,MINI_GAME_ID_MINI_POKER:12,MINI_GAME_ID_MINI_POKER_2:110000024,MINI_GAME_ID_MINI_POKER_3:110000016,MINI_GAME_ID_MINI_GAME_XOC_DIA:259,MINI_GAME_ID_WILD:242,MINI_GAME_ID_DIAMOND_2:17,MINI_GAME_ID_DIAMOND_2_2:110000019,MINI_GAME_ID_DRAGON_TIGER:182,MINI_GAME_ID_HILO:81,MINI_GAME_ID_HOO_HEY_HOW:82,MINI_GAME_ID_LUCK_WHEEL:15,MINI_GAME_ID_BOM_CONFIG_100:47,MINI_GAME_ID_BOM_CONFIG_1k:48,MINI_GAME_ID_DIAMOND_CONFIG_100:13,MINI_GAME_ID_DIAMOND_CONFIG_100_2:110000018,MINI_GAME_ID_DIAMOND_CONFIG_1k:14,MINI_GAME_ID_DIAMOND_CONFIG_1k_2:110000023,MINI_GAME_ID_MINI_3CAY_CONFIG_100:7,MINI_GAME_ID_MINI_3CAY_CONFIG_100_2:110000021,MINI_GAME_ID_MINI_3CAY_CONFIG_1k:8,MINI_GAME_ID_MINI_POKER_CONFIG_100:1,MINI_GAME_ID_MINI_POKER_CONFIG_100_2:110000024,MINI_GAME_ID_MINI_POKER_CONFIG_1k:2,MINI_GAME_ID_MINI_POKER_CONFIG_1k_2:110000016,MINI_GAME_ID_DIAMOND_2_CONFIG_100:41,MINI_GAME_ID_DIAMOND_2_CONFIG_100_2:110000019,MINI_GAME_ID_DIAMOND_2_CONFIG_1k:42,MINI_GAME_ID_WILD_CONFIG_100:53,MINI_GAME_ID_WID_CONFIG_1k:54,NUMBER_DETAIL_ITEM:8,TIME_AUTO_SPIN_WHEN_HIDE_TAB:5e3,GET_TOP:"GET_TOP"},cc._RF.pop()},{}],MiniGameResultTaiXiu:[function(t,e,i){"use strict";cc._RF.push(e,"2dc52PxWFpGvo+UASeNLV5+","MiniGameResultTaiXiu");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{effectNode:cc.Node,winNode:cc.Node,loseNode:cc.Node,addBalanceLabel:cc.Label,minusBalanceLabel:cc.Label,messageLabel:cc.Label,messageNode:cc.Node,resultAnimation:cc.Animation,winSkeleton:sp.Skeleton},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutHide)},show:function(t,e){this.reset(),(t=parseInt(t))>0?(this.node.active=!0,this.winNode.active=!0,this.winSkeleton.setAnimation(0,"animation",!0),this.addBalanceLabel.node.active=!0,this.addBalanceLabel.string="+"+o.numberWithCommas(t),this.node.active&&this.resultAnimation.play(),this.initTimeout()):(this.node.active=!0,this.loseNode.active=!0,this.minusBalanceLabel.node.active=!0,this.minusBalanceLabel.string=o.numberWithCommas(t),this.node.active&&this.resultAnimation.play(),this.initTimeout())},initTimeout:function(){clearTimeout(this.timeoutHide),this.timeoutHide=setTimeout(function(){this.node.active=!1}.bind(this),1e3*this.resultAnimation.defaultClip.duration)},reset:function(){clearTimeout(this.timeoutHide),this.node.active=!1,this.loseNode.active=!1,this.winNode.active=!1,this.addBalanceLabel.node.active=!1,this.minusBalanceLabel.node.active=!1,this.messageNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],MiniGameResult:[function(t,e,i){"use strict";cc._RF.push(e,"4c92cMAdRtMU6hKWV2jlhwH","MiniGameResult");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{addBalanceLabel:cc.Label,minusBalanceLabel:cc.Label,messageLabel:cc.Label,messageNode:cc.Node,resultAnimation:cc.Animation},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeoutHide)},show:function(t,e){this.reset(),(t=parseInt(t))>0?(this.node.active=!0,this.addBalanceLabel.node.active=!0,this.addBalanceLabel.string="+"+o.numberWithCommas(t),e&&(this.messageNode.active=!0,this.messageLabel.string=e),this.node.active&&this.resultAnimation.play(),this.initTimeout()):0!==t&&(this.node.active=!0,this.minusBalanceLabel.node.active=!0,this.minusBalanceLabel.string=o.numberWithCommas(t),e&&(this.messageNode.active=!0,this.messageLabel.string=e),this.node.active&&this.resultAnimation.play(),this.initTimeout())},initTimeout:function(){clearTimeout(this.timeoutHide),this.timeoutHide=setTimeout(function(){this.node.active=!1}.bind(this),1e3*this.resultAnimation.defaultClip.duration)},reset:function(){clearTimeout(this.timeoutHide),this.node.active=!1,this.addBalanceLabel.node.active=!1,this.minusBalanceLabel.node.active=!1,this.messageNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],MiniGameXPer:[function(t,e,i){"use strict";cc._RF.push(e,"7e0b92F/zhLXa0ZGXFKwZnQ","MiniGameXPer"),cc.Class({extends:cc.Component,properties:{bgSprite:cc.Node,xperSprite:cc.Sprite,x2Mini:cc.SpriteFrame,x3Mini:cc.SpriteFrame,x4Mini:cc.SpriteFrame,x5Mini:cc.SpriteFrame,x6Mini:cc.SpriteFrame,x7Mini:cc.SpriteFrame,x8Mini:cc.SpriteFrame,x9Mini:cc.SpriteFrame,x10Mini:cc.SpriteFrame,x2Game:cc.SpriteFrame,x3Game:cc.SpriteFrame,x4Game:cc.SpriteFrame,x5Game:cc.SpriteFrame,x6Game:cc.SpriteFrame,x7Game:cc.SpriteFrame,x8Game:cc.SpriteFrame,x9Game:cc.SpriteFrame,x10Game:cc.SpriteFrame},onLoad:function(){this.hideX()},setXJackpot:function(t){1===t?this.hideX():(this.bgSprite.active=!1,this.xperSprite.node.scale=.9,this.showXJackpot(t))},setXMiniGame:function(t){1===t?this.hideX():(this.bgSprite.active=!0,this.showXGame(t))},showXGame:function(t){this.showX();var e=void 0;switch(t){case 2:e=this.x2Game;break;case 3:e=this.x3Game;break;case 4:e=this.x4Game;break;case 5:e=this.x5Game;break;case 6:e=this.x6Game;break;case 7:e=this.x7Game;break;case 8:e=this.x8Game;break;case 9:e=this.x9Game;break;case 10:e=this.x10Game}e&&(this.xperSprite.spriteFrame=e)},showXJackpot:function(t){this.showX();var e=void 0;switch(t){case 2:e=this.x2Mini;break;case 3:e=this.x3Mini;break;case 4:e=this.x4Mini;break;case 5:e=this.x5Mini;break;case 6:e=this.x6Mini;break;case 7:e=this.x7Mini;break;case 8:e=this.x8Mini;break;case 9:e=this.x9Mini;break;case 10:e=this.x10Mini}e&&(this.xperSprite.spriteFrame=e)},hideX:function(){this.xperSprite.node.scale=1,this.xperSprite.node.active=!1,this.bgSprite.active=!1},showX:function(){this.node.active||(this.node.active=!0),this.xperSprite.node.active=!0}}),cc._RF.pop()},{}],MiniGame:[function(t,e,i){"use strict";cc._RF.push(e,"719e2f8spZEQokfMWimbxvq","MiniGame");var o=t("../../base/BaseController"),n=t("../../helper/Constant"),s=t("./MiniGameCircle"),a=t("./MiniGameConstant"),r=t("./tai-xiu/TaiXiu"),c=t("./mini-poker/MiniPoker"),h=t("./mini-bacay/MiniBaCay"),l=t("./diamond/Diamond"),u=t("./pirate/Pirate"),d=t("./bom/Bom"),m=t("./wild/Wild"),p=t("./tren-duoi/TrenDuoi"),f=t("./bau-cua/BauCua"),g=t("./dragon-tiger/DragonTiger"),_=t("./mini-xoc-dia/MiniXocDia"),S=(t("./lucky-wheel/LuckyWheel"),t("./jackpot/Jackpot")),C=t("./form/TaiXiuDetail"),N=t("./form/TaiXiuChain"),E=t("./form/BauCuaRank"),T=t("./form/GameMiniRank"),I=t("./form/GameMiniHistory"),v=t("./form/LuckyWheelResult"),y=t("./form/DragonTigerDetail"),B=t("./form/DragonTigerChains"),L=t("./tai-xiu/TaiXiuConstant"),R=t("./mini-poker/MiniPokerConstant"),A=t("./mini-bacay/MiniBaCayConstant"),M=t("./diamond/DiamondConstant"),b=t("./bom/BomConstant"),P=t("./wild/WildConstant"),O=t("./pirate/PirateConstant"),D=t("./tren-duoi/TrenDuoiConstant"),F=t("./bau-cua/BauCuaConstant"),k=t("./dragon-tiger/DragonTigerConstant"),G=t("./mini-xoc-dia/MiniXocDiaConstant"),w=t("./jackpot/JackpotConstant"),U=t("./MiniGameCircleNotification");cc.Class({extends:o,properties:{TaiXiu:r,DragonTiger:g,BauCua:f,Pirate:u,MiniBaCay:h,MiniPoker:c,Diamond:l,Bom:d,Wild:m,TrenDuoi:p,MiniXocDia:_,bauCuaContainerNode:cc.Node,bomContainerNode:cc.Node,diamondContainerNode:cc.Node,dragonTigerContainerNode:cc.Node,luckyWheelContainerNode:cc.Node,mini3CayContainerNode:cc.Node,miniPokerContainerNode:cc.Node,pirateContainerNode:cc.Node,trenduoiContainerNode:cc.Node,wildContainerNode:cc.Node,miniXocDiaContainerNode:cc.Node,Jackpot:S,MiniGameCircle:s,TaiXiuDetail:C,TaiXiuChain:N,BauCuaRank:E,GameMiniRank:T,GameMiniHistory:I,LuckyWheelResult:v,DragonTigerDetail:y,DragonTigerChains:B,MiniGameCircleNotification:U},init:function(t){this.controller=t,this.TaiXiu.init(t),this.BauCua&&this.BauCua.init(t),this.Bom&&this.Bom.init(t),this.Diamond&&this.Diamond.init(t),this.DragonTiger&&this.DragonTiger.init(t),this.LuckyWheel&&this.LuckyWheel.init(t),this.MiniBaCay&&this.MiniBaCay.init(t),this.MiniPoker&&this.MiniPoker.init(t),this.Pirate&&this.Pirate.init(t),this.TrenDuoi&&this.TrenDuoi.init(t),this.Wild&&this.Wild.init(t),this.MiniXocDia&&this.MiniXocDia.init(t),this.Jackpot.init(t),this.MiniGameCircle.init(this),this.MiniGameCircleNotification.init(this),this.TaiXiuDetail.init(t),this.TaiXiuChain.init(t),this.BauCuaRank.init(t),this.GameMiniRank.init(t),this.GameMiniHistory.init(t),this.LuckyWheelResult.init(t),this.DragonTigerDetail.init(t),this.DragonTigerChains.init(t)},onLoad:function(){this._super(),this.isPlaying=!0,this.timeOutLuckyWheel=null,this.initShowLuckyWheel(),this.initShowMiniGame(),this.sendRequest.sendNoPrefixToZone(L.GET_STATE),this.getSceneName()!==n.SCENE_GAME_FIRE_FISH&&this.addGameEvent()},onEnable:function(){var t=this;cc.S.miniGamePause||(cc.S.miniGamePause=cc.game.pause.bind(cc.game),cc.S.miniGameResume=cc.game.resume.bind(cc.game),cc.game.resume=function(){t.disenableAutoSpinWhenHideTab()},cc.game.pause=function(){t.autoSpinMiniGameWhenHideTab()})},onDestroy:function(){cc.S.miniGamePause=null,clearTimeout(this.timeOutLuckyWheel),this.getSceneName()!==n.SCENE_GAME_FIRE_FISH&&this.removeGameEvent()},addGameEvent:function(){cc.S.resume||(cc.S.resume=cc.game.resume.bind(cc.game),cc.S.pause=cc.game.pause.bind(cc.game));var t=this;cc.game.pause=function(){cc.S.pause&&cc.S.pause(),t.isPlaying=!1,t.removeEventMiniGame()},cc.game.resume=function(){cc.S.resume&&cc.S.resume(),t.isPlaying=!0,t.addEventMiniGame()}},removeGameEvent:function(){cc.S.resume&&(cc.game.resume=cc.S.resume,cc.game.pause=cc.S.pause)},addEventMiniGame:function(){this.TaiXiu&&(this.TaiXiu.node.active?this.sendRequest.sendNoPrefixToZone(L.ADD_EVENT):this.sendRequest.sendNoPrefixToZone(L.GET_STATE)),this.MiniPoker&&this.MiniPoker.node.active&&this.sendRequest.sendNoPrefixToZone(R.ADD_EVENT),this.MiniBaCay&&this.MiniBaCay.node.active&&this.sendRequest.sendNoPrefixToZone(A.ADD_EVENT),this.Diamond&&this.Diamond.node.active&&this.sendRequest.sendNoPrefixToZone(M.ADD_EVENT),this.Pirate&&this.Pirate.node.active&&this.sendRequest.sendNoPrefixToZone(O.ADD_EVENT),this.Bom&&this.Bom.node.active&&this.sendRequest.sendNoPrefixToZone(b.ADD_EVENT),this.Wild&&this.Wild.node.active&&this.sendRequest.sendNoPrefixToZone(P.ADD_EVENT),this.TrenDuoi&&this.TrenDuoi.node.active&&this.sendRequest.sendNoPrefixToZone(D.ADD_EVENT),this.BauCua&&this.BauCua.node.active&&this.sendRequest.sendNoPrefixToZone(F.ADD_EVENT),this.DragonTiger&&this.DragonTiger.node.active&&this.sendRequest.sendNoPrefixToZone(k.ADD_EVENT),this.MiniXocDia&&this.MiniXocDia.node.active&&this.sendRequest.sendNoPrefixToZone(G.ADD_EVENT),this.Jackpot&&this.Jackpot.node.active&&this.sendRequest.sendNoPrefixToZone(w.ADD_EVENT)},removeEventMiniGame:function(){this.TaiXiu.node.active&&this.sendRequest.sendNoPrefixToZone(L.REMOVE_EVENT),this.MiniPoker.node.active&&this.sendRequest.sendNoPrefixToZone(R.REMOVE_EVENT),this.MiniBaCay.node.active&&this.sendRequest.sendNoPrefixToZone(A.REMOVE_EVENT),this.Diamond.node.active&&this.sendRequest.sendNoPrefixToZone(M.REMOVE_EVENT),this.Pirate&&this.Pirate.node.active&&this.sendRequest.sendNoPrefixToZone(O.REMOVE_EVENT),this.Bom.node.active&&this.sendRequest.sendNoPrefixToZone(b.REMOVE_EVENT),this.Wild.node.active&&this.sendRequest.sendNoPrefixToZone(P.REMOVE_EVENT),this.TrenDuoi.node.active&&this.sendRequest.sendNoPrefixToZone(D.REMOVE_EVENT),this.BauCua.node.active&&this.sendRequest.sendNoPrefixToZone(F.REMOVE_EVENT),this.DragonTiger.node.active&&this.sendRequest.sendNoPrefixToZone(k.REMOVE_EVENT),this.MiniXocDia.node.active&&this.sendRequest.sendNoPrefixToZone(G.REMOVE_EVENT),this.Jackpot.node.active&&this.sendRequest.sendNoPrefixToZone(w.REMOVE_EVENT)},initShowMiniGame:function(){this.BauCua&&this.getTempData()[F.IS_SHOW]&&this.BauCua.setShowBauCua(!0),this.Diamond&&this.getTempData()[M.IS_SHOW]&&this.Diamond.setShowDiamond(!0),this.Pirate&&"true"===cc.sys.localStorage.getItem([O.IS_SHOW])&&this.Pirate.setShowPirate(!0),this.Bom&&"true"===cc.sys.localStorage.getItem([b.IS_SHOW])&&this.Bom.setShowBom(!0),this.Wild&&"true"===cc.sys.localStorage.getItem([P.IS_SHOW])&&this.Wild.setShowWild(!0),this.MiniBaCay&&this.getTempData()[A.IS_SHOW]&&this.MiniBaCay.setShowMiniBaCay(!0),this.MiniPoker&&this.getTempData()[R.IS_SHOW]&&this.MiniPoker.setShowMiniPoker(!0),this.TrenDuoi&&this.getTempData()[D.IS_SHOW]&&this.TrenDuoi.setShowTrenDuoi(!0),this.DragonTiger&&this.getTempData()[k.IS_SHOW]&&this.DragonTiger.setShowDragonTiger(!0),this.TaiXiu&&"true"===this.getTempData()[L.IS_SHOW]&&this.TaiXiu.setShowTaiXiu(!0),"true"===cc.sys.localStorage.getItem([G.IS_SHOW])&&this.MiniXocDia&&this.MiniXocDia.setShowMiniXocDia(!0),this.getShowChanLe()&&this.TaiXiu.onShowChanLeClick()},initShowLuckyWheel:function(){if(this.getUser().is_new)this.showLuckyWheel();else{var t=cc.sys.localStorage.getItem(a.LUCKY_WHEEL_LAST_DATE_SHOW);if(t)t!==(new Date).toDateString()&&this.showLuckyWheel();else this.showLuckyWheel()}},showLuckyWheel:function(){this.LuckyWheel?this.LuckyWheel.node.active=!0:this.createLuckyWheel();var t=(new Date).toDateString();cc.sys.localStorage.setItem(a.LUCKY_WHEEL_LAST_DATE_SHOW,t)},handleRequest:function(t){if(this.isPlaying&&t.status){var e=t.data.game_name,i=t.data;switch(e){case a.TAIXIU:case a.TAIXIU_3:this.TaiXiu&&this.TaiXiu.handleRequest(i);break;case a.MINI_POKER:case a.MINI_POKER_2:case a.MINI_POKER_3:this.MiniPoker&&this.MiniPoker.handleRequest(i);break;case a.MINI_BACAY:case a.MINI_BACAY_2:case a.MINI_BACAY_3:this.MiniBaCay&&this.MiniBaCay.handleRequest(i);break;case a.LUCKY_WHEEL:this.LuckyWheel&&this.LuckyWheel.handleRequest(i);break;case a.JACKPOT:this.Jackpot&&this.Jackpot.handleRequest(i);break;case a.DIAMOND:case a.DIAMOND_2:this.Diamond&&this.Diamond.handleRequest(i);break;case a.DIAMOND_2_1:case a.DIAMOND_2_2:this.Pirate&&this.Pirate.handleRequest(i);break;case a.BOM:case a.BOM_2:this.Bom&&this.Bom.handleRequest(i);break;case a.WILD:case a.WILD_2:this.Wild&&this.Wild.handleRequest(i);break;case a.TREN_DUOI:this.TrenDuoi&&this.TrenDuoi.handleRequest(i);break;case a.BAU_CUA:this.BauCua&&this.BauCua.handleRequest(i);break;case a.DRAGON_TIGER:this.DragonTiger&&this.DragonTiger.handleRequest(i);break;case a.MINI_XOC_DIA:this.MiniXocDia&&this.MiniXocDia.handleRequest(i)}}},showMiniGameBuyGameId:function(t){switch(console.log(t),t){case a.MINI_GAME_ID_MINI_3_CAY:case a.MINI_GAME_ID_MINI_3_CAY_2:this.MiniBaCay?this.MiniBaCay.node.active=!0:this.createMini3Cay();break;case a.MINI_GAME_ID_MINI_POKER:case a.MINI_GAME_ID_MINI_POKER_2:case a.MINI_GAME_ID_MINI_POKER_3:this.MiniPoker?this.MiniPoker.node.active=!0:this.createMiniPoker();break;case a.MINI_GAME_ID_DIAMOND:case a.MINI_GAME_ID_DIAMOND_2X:case a.MINI_GAME_ID_DIAMOND_3:this.Diamond?this.Diamond.node.active=!0:this.createDiamond();break;case a.MINI_GAME_ID_BOM:this.Bom?this.Bom.node.active=!0:this.createBom();break;case a.MINI_GAME_ID_DIAMOND_2:case a.MINI_GAME_ID_DIAMOND_2_2:this.Pirate?this.Pirate.node.active=!0:this.createPirate();break;case a.MINI_GAME_ID_WILD:this.Wild?this.Wild.node.active=!0:this.createWild()}},showBauCuaRankForm:function(){this.BauCuaRank.showDialog()},initNumberSpinFreeGame:function(t){var e=t.data;clearTimeout(this.timeOutLuckyWheel),this.timeOutLuckyWheel=setTimeout(function(){this.getUser().minigame_free=e.minigame_free,this.MiniPoker&&this.MiniPoker.initMiniGameSpinFree(e.minigame_free),this.MiniBaCay&&this.MiniBaCay.initMiniGameSpinFree(e.minigame_free),this.Diamond&&this.Diamond.initMiniGameSpinFree(e.minigame_free),this.Pirate&&this.Pirate.initMiniGameSpinFree(e.minigame_free),this.Bom&&this.Bom.initMiniGameSpinFree(e.minigame_free),this.Wild&&this.Wild.initMiniGameSpinFree(e.minigame_free)}.bind(this),4e3)},autoSpinMiniGameWhenHideTab:function(){clearTimeout(this.autoSpinHideTab),this.autoSpinHideTab=setInterval(function(){this.Diamond&&this.Diamond.isAutoSpin()&&this.Diamond.spin(),this.MiniBaCay&&this.MiniBaCay.isAutoSpin()&&this.MiniBaCay.spin(),this.MiniPoker&&this.MiniPoker.isAutoSpin()&&this.MiniPoker.spin(),this.Bom&&this.Bom.isAutoSpin()&&this.Bom.spin(),this.Wild&&this.Wild.isAutoSpin()&&this.Wild.spin(),this.controller&&this.controller.isSenceGameSlot&&this.controller.isSenceGameSlot()&&this.controller.isAutoSpin&&this.controller.isAutoSpin()&&this.controller.spin()}.bind(this),a.TIME_AUTO_SPIN_WHEN_HIDE_TAB)},disenableAutoSpinWhenHideTab:function(){this.autoSpinHideTab&&clearTimeout(this.autoSpinHideTab)},createBauCua:function(){var t=this;if(!this.BauCua&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_BAU_CUA;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.BauCua=o.getComponent("BauCua"),t.BauCua.init(t.controller),o.parent=t.bauCuaContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createBom:function(){var t=this;if(!this.Bom&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0,console.log("createbom");var e=a.URL_MINIGAME_BOM;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.Bom=o.getComponent("Bom"),t.Bom.init(t.controller),o.parent=t.bomContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createDiamond:function(){var t=this;if(!this.Diamond&&!this.isLoadCreateMiniGame){console.log("createDiamond"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_DIAMOND;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.Diamond=o.getComponent("Diamond"),t.Diamond.init(t.controller),o.parent=t.diamondContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createDragonTiger:function(){var t=this;if(!this.DragonTiger&&!this.isLoadCreateMiniGame){this.isLoadCreateMiniGame=!0,console.log("createDragonTiger");var e=a.URL_MINIGAME_DRAGON_TIGER;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.DragonTiger=o.getComponent("DragonTiger"),t.DragonTiger.init(t.controller),o.parent=t.dragonTigerContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createLuckyWheel:function(){var t=this;if(!this.LuckyWheel&&this.controller.getSceneName()===n.SCENE_GAME_CENTER&&!this.isLoadCreateMiniGame){console.log("createLuckyWheel"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_LUCKY_WHEEL;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.LuckyWheel=o.getComponent("LuckyWheel"),t.LuckyWheel.init(t.controller),o.parent=t.luckyWheelContainerNode,o.position=cc.v2(0,0),t.LuckyWheel.initLuckyWheelFree()):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createMini3Cay:function(){var t=this;if(!this.MiniBaCay&&!this.isLoadCreateMiniGame){console.log("createMini3Cay"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_MINI_3_CAY;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.MiniBaCay=o.getComponent("MiniBaCay"),t.MiniBaCay.init(t.controller),o.parent=t.mini3CayContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createMiniPoker:function(){var t=this;if(!this.MiniPoker&&!this.isLoadCreateMiniGame){console.log("createMiniPoker"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_MINI_POKER;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.MiniPoker=o.getComponent("MiniPoker"),t.MiniPoker.init(t.controller),o.parent=t.miniPokerContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createMiniXocDia:function(){var t=this;if(!this.MiniXocDia&&!this.isLoadCreateMiniGame){console.log("createMiniXocDia"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_XOC_DIA;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.MiniXocDia=o.getComponent("MiniXocDia"),t.MiniXocDia.init(t.controller),o.parent=t.miniXocDiaContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createPirate:function(){var t=this;if(!this.Pirate&&!this.isLoadCreateMiniGame){console.log("createPirate"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_PIRATE;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.Pirate=o.getComponent("Pirate"),t.Pirate.init(t.controller),o.parent=t.pirateContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createTrenDuoi:function(){var t=this;if(!this.TrenDuoi&&!this.isLoadCreateMiniGame){console.log("createTrenDuoi"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_TREN_DUOI;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.TrenDuoi=o.getComponent("TrenDuoi"),t.TrenDuoi.init(t.controller),o.parent=t.trenduoiContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}},createWild:function(){var t=this;if(!this.Wild&&!this.isLoadCreateMiniGame){console.log("createWild"),this.isLoadCreateMiniGame=!0;var e=a.URL_MINIGAME_WILD;cc.loader.loadRes(e,cc.Prefab,function(e,i){cc.loader.setAutoRelease(i,!0);var o=cc.instantiate(i);o?(t.Wild=o.getComponent("Wild"),t.Wild.init(t.controller),o.parent=t.wildContainerNode,o.active=!0):console.log("create mini game error. check url"),t.isLoadCreateMiniGame=!1})}}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","./MiniGameCircle":"MiniGameCircle","./MiniGameCircleNotification":"MiniGameCircleNotification","./MiniGameConstant":"MiniGameConstant","./bau-cua/BauCua":"BauCua","./bau-cua/BauCuaConstant":"BauCuaConstant","./bom/Bom":"Bom","./bom/BomConstant":"BomConstant","./diamond/Diamond":"Diamond","./diamond/DiamondConstant":"DiamondConstant","./dragon-tiger/DragonTiger":"DragonTiger","./dragon-tiger/DragonTigerConstant":"DragonTigerConstant","./form/BauCuaRank":"BauCuaRank","./form/DragonTigerChains":"DragonTigerChains","./form/DragonTigerDetail":"DragonTigerDetail","./form/GameMiniHistory":"GameMiniHistory","./form/GameMiniRank":"GameMiniRank","./form/LuckyWheelResult":"LuckyWheelResult","./form/TaiXiuChain":"TaiXiuChain","./form/TaiXiuDetail":"TaiXiuDetail","./jackpot/Jackpot":"Jackpot","./jackpot/JackpotConstant":"JackpotConstant","./lucky-wheel/LuckyWheel":"LuckyWheel","./mini-bacay/MiniBaCay":"MiniBaCay","./mini-bacay/MiniBaCayConstant":"MiniBaCayConstant","./mini-poker/MiniPoker":"MiniPoker","./mini-poker/MiniPokerConstant":"MiniPokerConstant","./mini-xoc-dia/MiniXocDia":"MiniXocDia","./mini-xoc-dia/MiniXocDiaConstant":"MiniXocDiaConstant","./pirate/Pirate":"Pirate","./pirate/PirateConstant":"PirateConstant","./tai-xiu/TaiXiu":"TaiXiu","./tai-xiu/TaiXiuConstant":"TaiXiuConstant","./tren-duoi/TrenDuoi":"TrenDuoi","./tren-duoi/TrenDuoiConstant":"TrenDuoiConstant","./wild/Wild":"Wild","./wild/WildConstant":"WildConstant"}],MiniPokerCard:[function(t,e,i){"use strict";cc._RF.push(e,"3b844lr/0lNgbVg5r5XjXQP","MiniPokerCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],MiniPokerConstant:[function(t,e,i){"use strict";cc._RF.push(e,"3d167c0jsdANYwX2lRXQ2+3","MiniPokerConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"mini_poker.ADD_EVENT",REMOVE_EVENT:"mini_poker.REMOVE_EVENT",SPIN:"mini_poker.SPIN",IS_SHOW:"mini_poker_is_show",POSITION:"mini_poker_position",IS_AUTO_SPIN:"mini_poker_auto_spin",IS_SPIN_FAST:"mini_poker_spin_fast",BET_VALUE:"mini_poker_bet_value",IS_SPIN_ONE_REEL:"mini_poker_one_reel",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"mini_poker_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"mini_poker.GET_TOP",MINIGAME_CONFIG_ID:1},cc._RF.pop()},{}],MiniPokerHistories:[function(t,e,i){"use strict";cc._RF.push(e,"4788d7Qh1pMC5iqcI549fVe","MiniPokerHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyMiniPokerItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryMiniPoker(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyMiniPokerItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("MiniPokerHistoryItem").init(t[e],e,!0)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],MiniPokerHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"db801KkLnVFhZFt7jNpXAnC","MiniPokerHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e,i){if(t){this.data=t,this.isMiniPoker=i,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_bet_value),this.resultLabel.string=this.getResultBySlotData(t.slot_data),this.getLabel.string=o.numberWithCommas(t.total_prize_value);var n=e%2==0?this.onSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=n}else this.node.active=!1},onLoad:function(){},getResultBySlotData:function(t){for(var e="",i=0,o=(t=JSON.parse(t)).length;i<o;i++){this.isMiniPoker&&0!==i?i%5==0&&(e+="\n"):0!==i&&i%3==0&&(e+="\n"),e+=" ",e+=this.getResultByTrueValue(t[i])}return e},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=11===(e=12===(e=13===(e=14===e?"A":e)?"K":e)?"Q":e)?"J":e,t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],MiniPokerReel:[function(t,e,i){"use strict";cc._RF.push(e,"90bf9xbmQhNeow9z/HlKWat","MiniPokerReel");var o=t("./MiniPokerCard"),n=t("../MiniGameConstant"),s=t("../../../util/RandomUtil"),a=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab},init:function(t){this.MiniPoker=t,this.MiniPokerUI=t.MiniPokerUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.cardPrefab);this.pool.put(e)}},spin:function(t,e,i,o,s,r,c,h){if(this.MiniPoker){this.reset(),this.setCard(this.trueValue),this.trueValue=t;for(var l=1;l<e;l++){var u=t;l!=e-1&&(u=this.getRandomTrueValue());var d=this.instanceCard(u);d.setPosition(0,l*a.MINIPOKER_DISTANCE_TWO_CARD),d.parent=this.node}var m=(e-1)*a.MINIPOKER_DISTANCE_TWO_CARD*this.node.scale,p=m/a.MINIPOKER_SPEED_SPIN_CARD,f=cc.moveTo(p,this.node.x,-m).easing(cc.easeInOut(3)),g=cc.callFunc(function(){this.resetPositionReel(),this.setCard(t),i&&this.MiniPoker.node.active&&(r===n.WIN_TYPE_JACKPOT?this.MiniPokerUI.showJackPot(o,c):(this.MiniPokerUI.showEffectWinReel(h),this.MiniGameResult.show(o,this.getGroupTypeCard(s,h))))},this),_=this.MiniPoker.isSpinFast()?cc.delayTime(0):cc.delayTime(a.MINIPOKER_DELAY_SPIN),S=cc.callFunc(function(){i&&this.MiniPoker.node.active&&this.MiniPoker.isAutoSpin()&&this.MiniPoker.spin()},this);this.node.runAction(cc.sequence(f,g,_,S)),r!==n.WIN_TYPE_JACKPOT||this.MiniPoker.node.active||(this.MiniPoker.node.active=!0,this.MiniPokerUI.showJackPot(o,c))}},getGroupTypeCard:function(t,e){var i=[];return t&&e&&(e[0]&&e[0]>0&&t[0]&&i.push(t[0]),e[1]&&e[1]>0&&t[1]&&i.push(t[1]),e[2]&&e[2]>0&&t[2]&&i.push(t[2])),i.join("-")},getRandomTrueValue:function(){return 100*s.getRandomInt(2,14)+s.getRandomInt(0,3)},randomCard:function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},setCard:function(t){this.trueValue=t,this.trueValue||(this.trueValue=this.getRandomTrueValue());var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},instanceCard:function(t){var e=void 0;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var i=e.getComponent("Card2Controller"),n=new o(t);return i.init(n),i.reveal(!0),e.scale=a.MINIPOKER_SCALE_CARD,e.cardController=i,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},resetPositionReel:function(){this.node.setPosition(this.node.x,0),this.putAllChipToPool()},reset:function(){this.node.stopAllActions(!0),this.resetPositionReel()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./MiniPokerCard":"MiniPokerCard"}],MiniPokerUI:[function(t,e,i){"use strict";cc._RF.push(e,"11859dR/fNBRZ281RbwHHTm","MiniPokerUI");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{stopAutoSpinNode:cc.Node,spinNode:cc.Node,bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,bg1Node:cc.Node,bg3Node:cc.Node,headerNode:cc.Node,footerNode:cc.Node,reels2Node:cc.Node,reels3Node:cc.Node,lightWinReel1Node:cc.Node,lightWinReel2Node:cc.Node,lightWinReel3Node:cc.Node,moneyWinLabelReel1:cc.Label,moneyWinLabelReel2:cc.Label,moneyWinLabelReel3:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOn1Sprite:cc.Sprite,betOn2Sprite:cc.Sprite,betOn3Sprite:cc.Sprite,betMoneySpriteFrame:cc.SpriteFrame,betGoldSpriteFrame:cc.SpriteFrame,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},show1GameNode:function(){this.bg1Node.active=!0,this.bg3Node.active=!1,this.reels2Node.active=!1,this.reels3Node.active=!1,this.headerNode.y=-20,this.footerNode.y=15},show3GameNode:function(){this.bg1Node.active=!1,this.bg3Node.active=!0,this.reels2Node.active=!0,this.reels3Node.active=!0,this.headerNode.y=110,this.footerNode.y=-110},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?(this.setBetMoney(),this.betOn1Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn2Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn3Sprite.spriteFrame=this.betMoneySpriteFrame):(this.setBetGold(),this.betOn1Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn2Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn3Sprite.spriteFrame=this.betGoldSpriteFrame)},showEffectWinReel:function(t){this.hideEffectWinReel(),t&&(t[0]&&t[0]>0&&(this.lightWinReel1Node.active=!0,this.moneyWinLabelReel1.string=o.numberWithCommas(t[0])),t[1]&&t[1]>0&&(this.lightWinReel2Node.active=!0,this.moneyWinLabelReel2.string=o.numberWithCommas(t[1])),t[2]&&t[2]>0&&(this.lightWinReel3Node.active=!0,this.moneyWinLabelReel3.string=o.numberWithCommas(t[2])))},hideEffectWinReel:function(){this.lightWinReel1Node.active=!1,this.lightWinReel2Node.active=!1,this.lightWinReel3Node.active=!1,this.moneyWinLabelReel1.string=0,this.moneyWinLabelReel2.string=0,this.moneyWinLabelReel3.string=0},setBetMoney:function(){var t=n.MINIPOKER_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetGold:function(){var t=n.MINIPOKER_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=o.nFormatter(t),this.bet2Label.string=o.nFormatter(e),this.bet3Label.string=o.nFormatter(i)},showStopAutoSpinNode:function(){this.stopAutoSpinNode.active=!0,this.spinNode.active=!1},hideStopAutoSpinNode:function(){this.stopAutoSpinNode.active=!1,this.spinNode.active=!0},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],MiniPoker:[function(t,e,i){"use strict";cc._RF.push(e,"93290oJAe5H2Y7Is3BhEFnC","MiniPoker");var o=t("../../../base/BaseController"),n=t("./MiniPokerConstant"),s=t("./MiniPokerUI"),a=t("./MiniPokerReel"),r=t("../MiniGameResult"),c=t("../item/JackpotItem"),h=t("../../../helper/Config"),l=t("../../../helper/Constant"),u=t("../../../helper/Message"),d=t("../../../object/RoomType"),m=t("../MiniGameConstant"),p=t("../item/MiniGameXPer"),f=t("../../../util/RandomUtil");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,autoSpinToggle:cc.Toggle,spinFastToggle:cc.Toggle,onReelButtonNode:cc.Node,threeReelButtonNode:cc.Node,reels:[a],reels2:[a],reels3:[a],JackpotItem:c,toastPrefab:cc.Prefab,MiniPokerUI:s,MiniGameResult:r,MiniGameXPer:p},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){this._super(),this.data=null,this.isShow=!0,this.isMoneyType=!0,this.betOrder=0,this.intervalSpin=null;var t=this.getRandomListTrueValue(),e=t.slice(0,5),i=t.slice(5,10),o=t.slice(10,15);for(var n in this.reels)this.reels[n].init(this),this.reels[n].setCard(e[n]);for(var s in this.reels2)this.reels2[s].init(this),this.reels2[s].setCard(i[s]);for(var a in this.reels3)this.reels3[a].init(this),this.reels3[a].setCard(o[a]);this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(n.ADD_EVENT)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(n.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[n.MONEY_TYPE]===n.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().mini_poker_free,i=t[n.IS_AUTO_SPIN],o=t[n.IS_SPIN_FAST],s=t[n.BET_VALUE],a=t[n.IS_SPIN_ONE_REEL];switch(o&&this.spinFastToggle.check(),a?this.onThreeReelClick():this.onOneReelClick(),i?(this.autoSpinToggle.check(),this.spin(),this.MiniPokerUI.showStopAutoSpinNode()):this.MiniPokerUI.hideStopAutoSpinNode(),s){case n.BET_100:this.setBet1();break;case n.BET_1k:this.setBet2();break;case n.BET_10k:this.setBet3();break;default:this.setBet1()}this.initMiniGameNotification(i,e)},initSaveData:function(){var t=cc.sys.localStorage.getItem(n.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationMiniPoker(!0,e):this.MiniGameCircleNotification.initShowNotificationMiniPoker(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationMiniPoker(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,o=t[e].quantity;i===n.MINIGAME_CONFIG_ID&&(o>0?this.MiniPokerUI.showMiniGameSpinFree(o):this.MiniPokerUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case n.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i),this.controller.EventGame&&this.controller.EventGame.initDataTop(i);break;case n.REQUEST_INFO:this.handleInfo(i);break;case n.REQUEST_SPIN:this.handleSpin(i);break;case n.REQUEST_MESSAGE:this.handleMessage(o)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.showMessage(t),this.MiniPokerUI.showStopAutoSpinNode()},handleSpin:function(t){this.setSendSpin(!1),this.MiniPokerUI.hideEffectWinReel();var e=t.group_cards_type,i=t.slot_data,o=t.total_prize_value,n=t.win_type,s=t.money_type,a=t.spin_id,r=t.array_win_prize,c=s==d.MONEY_CODE;this.idLabel.string=String.format(u.MINIGAME_ID,a);var h=i.slice(0,5),l=i.slice(5,10),m=i.slice(10,15);this.isSpinOneReel()?this.spinReels(h,o,e,n,c,r,this.reels,!0):(this.spinReels(h,o,e,n,c,r,this.reels),this.spinReels(l,o,e,n,c,r,this.reels2),this.spinReels(m,o,e,n,c,r,this.reels3,!0)),this.isAutoSpin()?this.MiniPokerUI.showStopAutoSpinNode():this.MiniPokerUI.hideStopAutoSpinNode()},spinReels:function(t,e,i,o,n,s,a,r){for(var c in a)c==a.length-1&&r?a[c].spin(t[c],h.MINIPOKER_NUMBER_CARDS_SPIN+2*c,!0,e,i,o,n,s):a[c].spin(t[c],h.MINIPOKER_NUMBER_CARDS_SPIN+2*c)},onSpinClick:function(){this.isSpinning()||this.spin()},isSpinning:function(){return this.isSpinOneReel()?0!==cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node):0!==cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[2].node)},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t=this.isSpinOneReel()?1:3,e={money_type:this.isMoneyType?d.MONEY_CODE:d.GOLD_CODE,money_value:this.getCurrentBet(),number_line:t};this.sendRequest.sendNoPrefixToZone(n.SPIN,e),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(l.MINI_POKER)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showMiniPokerHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(m.MINI_POKER),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowMiniPoker(!1)},onGoldClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isSpinning()||this.isAutoSpin()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.MiniPokerUI.enableBet1Button(),this.getTempData()[n.BET_VALUE]=n.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.MiniPokerUI.enableBet2Button(),this.getTempData()[n.BET_VALUE]=n.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()||this.isSpinning()?this.showMessage(u.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.MiniPokerUI.enableBet3Button(),this.getTempData()[n.BET_VALUE]=n.BET_10k},onMiniPokerClick:function(){this.setShowMiniPoker(!this.isShow)},onStopAutoSpinClick:function(){this.autoSpinToggle.isChecked=!1,this.onAutoSpinToggle()},onOneReelClick:function(){this.isSpinning()?this.showMessage(u.GAME_STOP_SPIN):(this.onReelButtonNode.active=!1,this.threeReelButtonNode.active=!0,this.showContentGame())},onThreeReelClick:function(){this.isSpinning()?this.showMessage(u.GAME_STOP_SPIN):(this.onReelButtonNode.active=!0,this.threeReelButtonNode.active=!1,this.showContentGame())},showContentGame:function(){var t=this.isSpinOneReel();this.getTempData()[n.IS_SPIN_ONE_REEL]=t,t?this.MiniPokerUI.show1GameNode():this.MiniPokerUI.show3GameNode()},onAutoSpinToggle:function(){var t=this.isAutoSpin();this.getTempData()[n.IS_AUTO_SPIN]=t,t||this.MiniPokerUI.hideStopAutoSpinNode(),t&&!this.isSpinning()&&this.spin()},onSpinFastToggle:function(){var t=this.isSpinFast();this.getTempData()[n.IS_SPIN_FAST]=t},setShowMiniPoker:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().mini_poker_free;cc.sys.localStorage.setItem(n.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin();var t=this.isSpinFast()?h.MINIPOKER_TIME_FAST_SPIN:h.MINIPOKER_TIME_SPIN;this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*t)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=h.MINIGAME_SCALE_TOAST,e.setPosition(h.MINIGAME_POSITION_TOAST_X,h.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.MiniPokerUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?n.MONEY_TYPE_MONEY:n.MONEY_TYPE_GOLD;this.getTempData()[n.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?h.MINIPOKER_LIST_BET_MONEY:h.MINIPOKER_LIST_BET_GOLD)[this.betOrder]},isSpinOneReel:function(){return this.onReelButtonNode.active},isAutoSpin:function(){return this.autoSpinToggle.isChecked},isSpinFast:function(){return this.spinFastToggle.isChecked},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},getRandomListTrueValue:function(){for(var t=[];t.length<15;){var e=100*f.getRandomInt(2,14)+f.getRandomInt(0,3);-1===t.indexOf(e)&&t.push(e)}return t},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./MiniPokerConstant":"MiniPokerConstant","./MiniPokerReel":"MiniPokerReel","./MiniPokerUI":"MiniPokerUI"}],MiniXocDiaBet:[function(t,e,i){"use strict";cc._RF.push(e,"c2bbdjkkhRILJdpuO9baSDX","MiniXocDiaBet");var o=t("../../../ui/button/ButtonShowHide"),n=t("./MiniXocDiaConstant");cc.Class({extends:cc.Component,properties:{buttonBet5K:o,buttonBet10K:o,buttonBet50K:o,buttonBet100K:o,buttonBet500K:o,buttonBetAll:o},init:function(t){this.MiniXocDia=t},onLoad:function(){this.initBetButton()},initBetButton:function(){this.buttonBet5K.init(this,this.onBet5k),this.buttonBet10K.init(this,this.onBet10K),this.buttonBet50K.init(this,this.onBet50K),this.buttonBet100K.init(this,this.onBet100K),this.buttonBet500K.init(this,this.onBet500K),this.buttonBetAll.init(this,this.onBetAll)},onBet5k:function(){this.hideAllButton(),this.buttonBet5K.showItemSelect(),this.MiniXocDia.setBet(n.BET_5k)},onBet10K:function(){this.hideAllButton(),this.buttonBet10K.showItemSelect(),this.MiniXocDia.setBet(n.BET_10K)},onBet50K:function(){this.hideAllButton(),this.buttonBet50K.showItemSelect(),this.MiniXocDia.setBet(n.BET_50K)},onBet100K:function(){this.hideAllButton(),this.buttonBet100K.showItemSelect(),this.MiniXocDia.setBet(n.BET_100K)},onBet500K:function(){this.hideAllButton(),this.buttonBet500K.showItemSelect(),this.MiniXocDia.setBet(n.BET_500K)},onBetAll:function(){this.hideAllButton(),this.buttonBetAll.showItemSelect(),this.MiniXocDia.setBet(n.BET_ALL)},hideAllButton:function(){this.buttonBet5K.hideItemSelect(),this.buttonBet10K.hideItemSelect(),this.buttonBet50K.hideItemSelect(),this.buttonBet100K.hideItemSelect(),this.buttonBet500K.hideItemSelect(),this.buttonBetAll.hideItemSelect()}}),cc._RF.pop()},{"../../../ui/button/ButtonShowHide":"ButtonShowHide","./MiniXocDiaConstant":"MiniXocDiaConstant"}],MiniXocDiaConfig:[function(t,e,i){"use strict";cc._RF.push(e,"835efK7gcJLypxSgUSboaaD","MiniXocDiaConfig");e.exports={LIST_CHIP:[1e3,5e3,1e4,5e4,1e5,5e5,1e6,5e6,1e7],TIME_NAN:1e4,TIME_SHOW_CARD:3500,TIME_SHOW_EFFECT_CARD:1e3,SCALE_CARD_1:1.3,SCALE_CARD_2:.85,MAX_LENGTH_HISTORY:24,NUMBER_ITEM_IN_LIST:4,NUMBER_HISTORY:40,DISTANCE_W_STATISTIC:30.9,DISTANCE_H_STATISTIC:30.5,MAX_COL:18,TIME_SHAKE_PLATE:.05,TIME_SHOW_COIN:2.5,DISTANCE_MOVE_BOWL_X:-60,DISTANCE_MOVE_BOWL_Y:-60,NUMBER_CELL_SMALL:114},cc._RF.pop()},{}],MiniXocDiaConstant:[function(t,e,i){"use strict";cc._RF.push(e,"a6a009ZVHlJT6AKDTDRB647","MiniXocDiaConstant");e.exports={ICON_WHILE:1,ICON_BLACK:0,DOOR_ID_EVEN:1,DOOR_ID_ODD:0,DOOR_ID_BLACK_0_CODE:2,DOOR_ID_BLACK_1_CODE:3,DOOR_ID_BLACK_3_CODE:4,DOOR_ID_BLACK_4_CODE:5,REQUEST_START:"START",REQUEST_BALANCE_DOOR:"BALANCE_DOOR",REQUEST_FINISH:"FINISH",REQUEST_UPDATE:"UPDATE",REQUEST_CALL_DRAGON:"DRAGON",REQUEST_CALL_TIGER:"TIGER",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_CHANGE_STATE:"CHANGE_STATE",REQUEST_CHAT:"CHAT",REQUEST_HISTORY_DETAIL:"HISTORY_DETAIL",CURRENT_TOP_CHAIN_2:"CURRENT_TOP_CHAIN",GET_TOP_2:"GET_TOP",ADD_EVENT:"minigame_xocdia.ADD_EVENT",REMOVE_EVENT:"minigame_xocdia.REMOVE_EVENT",GET_STATE:"minigame_xocdia.GET_STATE",BET:"minigame_xocdia.BET",HISTORY_DETAIL:"minigame_xocdia.HISTORY_DETAIL",IS_SHOW:"minigame_xocdia_is_show",IS_SHOW_CHAT:"minigame_xocdia_is_show_chat",POSITION:"minigame_xocdia_position",IS_NAN:"minigame_xocdia_nan",CURRENT_TOP_CHAIN:"minigame_xocdia.CURRENT_TOP_CHAIN",GET_TOP:"minigame_xocdia.GET_TOP",GET_FINISH:"minigame_xocdia.FINISH",BET_VALUE:"minigame_xocdia.BET_VALUE",TIME_GET_FINISH:3,BET_5k:5e3,BET_10K:1e4,BET_50K:5e4,BET_100K:1e5,BET_500K:5e5,BET_ALL:"ALL"},cc._RF.pop()},{}],MiniXocDiaDoors:[function(t,e,i){"use strict";cc._RF.push(e,"88b352auxxC/6FD50wyRzTX","MiniXocDiaDoors");var o=t("./item/MiniXocDiaDoor"),n=t("./MiniXocDiaConstant");cc.Class({extends:cc.Component,properties:{doorEven:o,doorOdd:o,doorBlack_0:o,doorBlack_4:o,doorBlack_1:o,doorBlack_3:o},init:function(t){this.MiniXocDia=t,this.doorEven.init(t,n.DOOR_ID_EVEN),this.doorOdd.init(t,n.DOOR_ID_ODD),this.doorBlack_0.init(t,n.DOOR_ID_BLACK_0_CODE),this.doorBlack_4.init(t,n.DOOR_ID_BLACK_4_CODE),this.doorBlack_1.init(t,n.DOOR_ID_BLACK_1_CODE),this.doorBlack_3.init(t,n.DOOR_ID_BLACK_3_CODE)},initDoors:function(t){var e=t.even,i=t.odd,o=t.black_0,n=t.black_4,s=t.black_1,a=t.black_3;this.doorEven.initData(e),this.doorOdd.initData(i),this.doorBlack_0.initData(o),this.doorBlack_4.initData(n),this.doorBlack_1.initData(s),this.doorBlack_3.initData(a)},initResult:function(t){if(t){var e=this.convertResult(t);this.doorEven.showEffectDoor(e.is_chan),this.doorOdd.showEffectDoor(e.is_le),this.doorBlack_0.showEffectDoor(e.is_black_0),this.doorBlack_4.showEffectDoor(e.is_black_4),this.doorBlack_1.showEffectDoor(e.is_black_1),this.doorBlack_3.showEffectDoor(e.is_black_3)}},isBet:function(){return this.doorEven.isBet()||this.doorOdd.isBet()||this.doorBlack_0.isBet()||this.doorBlack_4.isBet()||this.doorBlack_1.isBet()||this.doorBlack_3.isBet()},convertResult:function(t){for(var e={},i=0,o=0,s=t.length;o<s;o++)t[o]===n.ICON_BLACK&&(i+=1);return e.is_chan=i%2==0,e.is_le=i%2!=0,e.is_black_0=0===i,e.is_black_4=4===i,e.is_black_1=1===i,e.is_black_3=3===i,e},reset:function(){this.doorEven.reset(),this.doorOdd.reset(),this.doorBlack_0.reset(),this.doorBlack_4.reset(),this.doorBlack_1.reset(),this.doorBlack_3.reset()}}),cc._RF.pop()},{"./MiniXocDiaConstant":"MiniXocDiaConstant","./item/MiniXocDiaDoor":"MiniXocDiaDoor"}],MiniXocDiaDoor:[function(t,e,i){"use strict";cc._RF.push(e,"870e8ItiDlB7bUxaNJKBKgu","MiniXocDiaDoor");var o=t("../../../../util/FormatUtil"),n=t("../../../../object/RoomType"),s=t("../../../../util/BrowserUtil"),a=t("../../../../helper/Message");t("../MiniXocDiaConstant");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,bgNormalSpriteFrame:cc.SpriteFrame,bgHoverSpriteFrame:cc.SpriteFrame,bgWinSpriteFrame:cc.SpriteFrame,totalMoneyLabel:cc.Label,myMoneyLabel:cc.Label,numberPlayerLabel:cc.Label},init:function(t,e){this.MiniXocDia=t,this.MiniXocDiaState=t.MiniXocDiaState,this.doorId=e},onLoad:function(){var t=this;this.onMouseEnter=function(){t.initBgSprite()},this.onMouseLeave=function(){t.MiniXocDiaState.isFinish()?t.bgSprite.spriteFrame!==t.bgWinSpriteFrame&&(t.bgSprite.spriteFrame=t.bgNormalSpriteFrame,s.showCursorAuto()):(t.bgSprite.spriteFrame=t.bgNormalSpriteFrame,s.showCursorAuto())},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},initData:function(t){this.data=t;var e=t.my_bet,i=t.total_bet,o=t.total_players;this.setMyChip(e),this.setTotalChip(i),this.setPlayer(o)},setMyChip:function(t){this.myMoneyLabel.string=o.numberWithCommas(t)},setTotalChip:function(t){this.totalMoneyLabel.string=o.numberWithCommas(t)},setPlayer:function(t){this.numberPlayerLabel.string="("+o.numberWithCommas(t)+")"},onBetDoorClick:function(){var t=this.MiniXocDia.getBet();if(!this.MiniXocDiaState.isFinish())if(this.MiniXocDiaState.isBetting()&&t){var e={amount:t,type:this.doorId,room_type:this.MiniXocDia.getMoneyType()?n.MONEY_CODE:n.GOLD_CODE};this.MiniXocDia.sendBet(e)}else this.MiniXocDia.showMessage(a.MINI_GAME_XOC_DIA_NO_BET_SELECTED)},initBgSprite:function(){this.MiniXocDiaState.isBetting()?(this.bgSprite.spriteFrame=this.bgHoverSpriteFrame,s.showCursorPointer()):this.MiniXocDiaState.isFinish()||(this.bgSprite.spriteFrame=this.bgNormalSpriteFrame,s.showCursorAuto())},showEffectDoor:function(t){t&&(this.bgSprite.spriteFrame=this.bgWinSpriteFrame)},isBet:function(){return parseInt(this.totalMoneyLabel.string)>0},reset:function(){this.bgSprite.spriteFrame=this.bgNormalSpriteFrame,this.setPlayer(0),this.setTotalChip(0),this.setMyChip(0)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../object/RoomType":"RoomType","../../../../util/BrowserUtil":"BrowserUtil","../../../../util/FormatUtil":"FormatUtil","../MiniXocDiaConstant":"MiniXocDiaConstant"}],MiniXocDiaHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"dafaa4XzztJb6q7Ag+YnChG","MiniXocDiaHistoryItem");var o=t("../MiniXocDiaConstant");cc.Class({extends:cc.Component,properties:{chanNode:cc.Node,leNode:cc.Node,chanLabel:cc.Label,leLabel:cc.Label},onLoad:function(){},init:function(t,e){this.MiniXocDia=t,this.data=e,this.reset();var i=this.getNumberBlackCoin(e.results);this.chanLabel.string=i,this.leLabel.string=i,i%2==0?this.chanNode.active=!0:this.leNode.active=!0},showScaleAnimation:function(){},hideScaleAnimation:function(){},onClick:function(){if(this.MiniXocDia){var t={match_game_id:this.data.match_game_id};this.MiniXocDia.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,t)}},getNumberBlackCoin:function(t){for(var e=0,i=0,n=t.length;i<n;i++)t[i]===o.ICON_BLACK&&(e+=1);return e=0===e?4:e},reset:function(){this.chanNode.active=!1,this.leNode.active=!1}}),cc._RF.pop()},{"../MiniXocDiaConstant":"MiniXocDiaConstant"}],MiniXocDiaHistory:[function(t,e,i){"use strict";cc._RF.push(e,"43fc06W0sNKZ4yA7SD536nc","MiniXocDiaHistory");t("./MiniXocDiaConfig"),t("../../../helper/Message");var o=t("./MiniXocDiaConstant");cc.Class({extends:cc.Component,properties:{historyLayoutNode:cc.Node,historyItemPrefab:cc.Prefab},init:function(t){this.MiniXocDia=t},onLoad:function(){for(var t in this.listItem=this.historyLayoutNode.getChildren(),this.listComponentSmall=[],this.listItem)this.listComponentSmall.push(this.listItem[t].getComponent("MiniXocDiaHistoryItem"));this.MAX_ROW=7,this.MAX_COL=19,this.DISTANCE_X=24.5,this.DISTANCE_Y=-25.3,this.START_X=13.5,this.START_Y=-13.5},onEnable:function(){},initHistories:function(t){this.reset();var e=this.changeListHistory(t);this.showHistory(e)},showHistory:function(t){if(this.listComponentSmall)for(var e=0,i=0,o=t.length>this.MAX_COL?t.length-this.MAX_COL:0,n=t.length;o<n;o++){for(var s=0,a=t[o].length;s<a;s++)this.listComponentSmall[e]||this.instanceHistoryItem(),this.listComponentSmall[e].init(this.MiniXocDia,t[o][s]),this.listComponentSmall[e].node.x=this.START_X+this.DISTANCE_X*i,this.listComponentSmall[e].node.y=this.START_Y+this.DISTANCE_Y*s,e++;i++}},instanceHistoryItem:function(){var t=cc.instantiate(this.historyItemPrefab);this.listComponentSmall.push(t.getComponent("MiniXocDiaHistoryItem")),this.historyLayoutNode.addChild(t)},changeListHistory:function(t){for(var e=t.slice(),i=[],o=!1,n=0,s=0,a=e.length;s<a;s++){var r=this.getNumberBlackCoin(e[s].results);if(0===s)o=r%2==0,i[n]||(i[n]=[]),i[n].push(e[s]);else o===(r%2==0)?(i[n].length>=this.MAX_ROW&&n++,i[n]||(i[n]=[]),i[n].push(e[s])):(o=!o,i[++n]||(i[n]=[]),i[n].push(e[s]))}return i},getNumberBlackCoin:function(t){for(var e=0,i=0,n=t.length;i<n;i++)t[i]===o.ICON_BLACK&&(e+=1);return e=0===e?4:e},reset:function(){if(this.listComponentSmall)for(var t in this.listComponentSmall)this.listComponentSmall[t].reset()}}),cc._RF.pop()},{"../../../helper/Message":"Message","./MiniXocDiaConfig":"MiniXocDiaConfig","./MiniXocDiaConstant":"MiniXocDiaConstant"}],MiniXocDiaPlate:[function(t,e,i){"use strict";cc._RF.push(e,"f620chP1i1FdLOmsJJYYHxq","MiniXocDiaPlate");var o=t("./MiniXocDiaConfig");cc.Class({extends:cc.Component,properties:{bowlNode:cc.Node,xocNode:cc.Node,item1Sprite:cc.Sprite,item2Sprite:cc.Sprite,item3Sprite:cc.Sprite,item4Sprite:cc.Sprite,xocSpine:sp.Skeleton,listSpriteFrame:[cc.SpriteFrame]},init:function(t){this.MiniXocDia=t},onLoad:function(){this.isOnLoad=!0,this.duration=1.4,this.bowlInitX=this.bowlNode.x,this.bowlInitY=this.bowlNode.y,this.timeEachShake=o.TIME_SHAKE_PLATE,this.timeShowCoin=o.TIME_SHOW_COIN,this.distanceMoveBowlX=o.DISTANCE_MOVE_BOWL_X,this.distanceMoveBowlY=o.DISTANCE_MOVE_BOWL_Y},onEnable:function(){this.reset()},onDisable:function(){clearTimeout(this.timeoutHideXoc)},initPlate:function(t){this.reset(),t&&(this.node.active=!0,this.bowlNode.active=!1,this.xocNode.active=!1,this.item1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2]),this.item4Sprite.spriteFrame=this.getSpriteFrameByDice(t[3]))},shakePlate:function(t){this.reset(),this.node.active=!0,this.item1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.item2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.item3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2]),this.item4Sprite.spriteFrame=this.getSpriteFrameByDice(t[3]),this.xocNode.active=!0,this.xocSpine.setAnimation(0,"animation",!0),clearTimeout(this.timeoutHideXoc),this.timeoutHideXoc=setTimeout(function(){this.xocNode.active=!1,this.bowlNode.runAction(cc.moveBy(this.timeShowCoin,this.distanceMoveBowlX,this.distanceMoveBowlY))}.bind(this),1e3*this.duration)},getSpriteFrameByDice:function(t){return this.listSpriteFrame[t]},reset:function(){this.isOnLoad&&(this.bowlNode.stopAllActions(),this.bowlNode.setPosition(this.bowlInitX,this.bowlInitY),this.bowlNode.setPosition(0,0),this.xocNode.active=!1)}}),cc._RF.pop()},{"./MiniXocDiaConfig":"MiniXocDiaConfig"}],MiniXocDiaState:[function(t,e,i){"use strict";cc._RF.push(e,"7bd6cy+E9dFDoSzDVyEbNOz","MiniXocDiaState");e.exports={currentState:null,BETTING:"BETTING",BALANCE_DOOR:"BALANCE_DOOR",FINISH:"FINISH",setState:function(t){this.currentState=t},setBetting:function(){this.currentState=this.BETTING},setBalanceDoor:function(){this.currentState=this.BALANCE_DOOR},setFinish:function(){this.currentState=this.FINISH},isBetting:function(){return this.currentState===this.BETTING},isBalanceDoor:function(){return this.currentState===this.BALANCE_DOOR},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],MiniXocDiaTime:[function(t,e,i){"use strict";cc._RF.push(e,"b04518l2plJM6FTuyGHBRzk","MiniXocDiaTime");t("./MiniXocDiaConfig");cc.Class({extends:cc.Component,properties:{timeBettingNode:cc.Node,timeFinishNode:cc.Node,timeBettingLabel:cc.Label,timeFinishLabel:cc.Label},init:function(t){this.MiniXocDia=t,this.MiniXocDiaState=t.MiniXocDiaState},onLoad:function(){},initTime:function(t){t&&(this.data=t,this.time=this.data.time_remain,this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,this.MiniXocDia&&this.MiniXocDia.startTimeGetFinish(),clearInterval(this.timeInterval)),this.data&&(this.data.time_remain=this.time,this.setTimeLabel(this.time))}.bind(this),1e3))},setTimeLabel:function(t){var e=parseInt(t);this.MiniXocDia&&this.MiniXocDia.node.active&&(this.MiniXocDiaState.isBetting()?(this.timeBettingNode.active=!0,this.timeFinishNode.active=!1,this.timeBettingLabel&&(this.timeBettingLabel.string=e,e<=10?this.timeAnimation():this.timeDefault())):this.MiniXocDiaState.isFinish()&&(this.timeBettingNode.active=!1,this.timeFinishNode.active=!0,this.timeFinishLabel&&(this.timeFinishLabel.string=e)))},timeAnimation:function(){this.timeBettingLabel.node.getComponent(cc.Animation).play()},timeDefault:function(){this.timeBettingLabel.node.getComponent(cc.Animation).stop(),this.timeBettingLabel.node.opacity=255,this.timeBettingLabel.node.color=new cc.Color(252,198,60,255),this.timeBettingLabel.node.scale=1},initResult:function(t){},reset:function(){this.timeBettingNode.active=!0,this.timeFinishNode.active=!1,this.timeDefault()}}),cc._RF.pop()},{"./MiniXocDiaConfig":"MiniXocDiaConfig"}],MiniXocDia:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"f9dfaDrlV5FpYNthupqSW9Y","MiniXocDia");var s=t("../../../base/BaseController"),a=(t("../../../util/RandomUtil"),t("../../../util/FormatUtil")),r=t("../../../helper/Config"),c=t("../../../helper/Constant"),h=t("./MiniXocDiaConstant"),l=t("./MiniXocDiaState"),u=t("./MiniXocDiaDoors"),d=t("./MiniXocDiaTime"),m=t("./MiniXocDiaBet"),p=t("./MiniXocDiaPlate"),f=t("./MiniXocDiaHistory"),g=t("../MiniGameResult"),_=t("../MiniGameConstant");cc.Class((n(o={extends:s,properties:{idLabel:cc.Label,MiniXocDiaDoors:u,MiniXocDiaTime:d,MiniXocDiaBet:m,MiniXocDiaPlate:p,MiniXocDiaHistory:f,MiniGameResult:g,toastPrefab:cc.Prefab},init:function(t){this.controller=t},onLoad:function(){this._super(),this.MiniXocDiaState=l,this.MiniXocDiaDoors.init(this),this.MiniXocDiaTime.init(this),this.MiniXocDiaBet.init(this),this.MiniXocDiaPlate.init(this),this.MiniXocDiaHistory.init(this)},onEnable:function(){this.sendRequest.sendNoPrefixToZone(h.ADD_EVENT),this.setTypeRoom(!0),this.initTempData()},onDisable:function(){this.destroyGame()},destroyGame:function(){this.sendRequest.sendNoPrefixToZone(h.REMOVE_EVENT)},initTempData:function(){switch(this.getTempData()[h.BET_VALUE]){case h.BET_5k:this.MiniXocDiaBet.onBet5k();break;case h.BET_10K:this.MiniXocDiaBet.onBet10K();break;case h.BET_50K:this.MiniXocDiaBet.onBet50K();break;case h.BET_100K:this.MiniXocDiaBet.onBet100K();break;case h.BET_500K:this.MiniXocDiaBet.onBet500K();break;case h.BET_ALL:this.MiniXocDiaBet.onBetAll();break;default:this.MiniXocDiaBet.onBet5k()}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case h.REQUEST_INFO:this.handleInfo(i);break;case h.REQUEST_START:this.handleStart(i);break;case h.REQUEST_FINISH:this.handleFinish(i);break;case h.REQUEST_UPDATE:this.handleUpdate(i);break;case h.REQUEST_MESSAGE:this.handleMessage(o);break;case h.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataMiniXocDia(i)}},handleInfo:function(t){this.reset(),this.data=t;var e=this.getMoneyType()?t.money:t.gold,i=t.game_state;this.histories=t.histories,this.match_game_id=t.match_game_id,this.setMatchGameId(this.match_game_id),this.MiniXocDiaState.setState(i),this.MiniXocDiaDoors.initDoors(e),this.MiniXocDiaTime.initTime(t),this.MiniXocDiaHistory.initHistories(this.histories),this.MiniXocDiaState.isFinish()&&(this.MiniXocDiaPlate.initPlate(t.results),this.MiniXocDiaDoors.initResult(t.results))},handleStart:function(t){this.reset(),this.match_game_id=t.match_game_id,this.MiniXocDiaState.setBetting(),this.MiniXocDiaTime.initTime(t),this.setMatchGameId(this.match_game_id)},handleFinish:function(t){this.MiniXocDiaState.setFinish(),this.MiniXocDiaPlate.shakePlate(t.results),this.initFinish(t);var e={match_game_id:this.match_game_id,results:t.results};this.histories.push(e)},handleUpdate:function(t){var e=this.getMoneyType()?t.money:t.gold;this.MiniXocDiaDoors.initDoors(e)},handleMessage:function(t){this.showMessage(t)},initFinish:function(t){clearTimeout(this.resultTimeout),this.resultTimeout=setTimeout(function(){if(t){this.MiniXocDiaDoors.initResult(t.results),this.MiniXocDiaHistory.initHistories(this.histories);var e=this.getMoneyType()?t.money_change:t.gold_change,i=(this.getMoneyType()?t.money_bet:t.gold_bet,"");e>0?i="Th\u1eafng":e<0&&(i="Thua"),this.MiniXocDiaDoors.isBet()&&this.MiniGameResult.show(e,i)}}.bind(this),3500)},startTimeGetFinish:function(){clearTimeout(this.timeOutGetFinish),this.timeOutGetFinish=setInterval(function(){clearTimeout(this.timeOutGetFinish),this.sendRequest&&this.sendRequest.sendNoPrefixToZone(h.GET_FINISH)}.bind(this),1e3*h.TIME_GET_FINISH)},sendBet:function(t){this.sendRequest.sendNoPrefixToZone(h.BET,t)},setBet:function(t){this.bet=t,t===h.BET_ALL&&(this.bet=this.getMoney()),this.getTempData()[h.BET_VALUE]=t},setMatchGameId:function(t){this.idLabel.string="#"+a.numberWithCommas(t)}},"setMatchGameId",function(t){this.idLabel.string="#"+a.numberWithCommas(t)}),n(o,"setShowMiniXocDia",function(t){this.node.active=t,this.isShow=t,cc.sys.localStorage.setItem([h.IS_SHOW],this.isShow)}),n(o,"setTypeRoom",function(t){this.isMoneyType=t}),n(o,"getBet",function(){return this.bet}),n(o,"getMoneyType",function(){return this.isMoneyType}),n(o,"showMessage",function(t){var e=cc.instantiate(this.toastPrefab);e.setScale(r.MINIGAME_SCALE_TOAST),e.setPosition(r.MINIGAME_POSITION_TOAST_X,r.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)}),n(o,"onMiniXocDiaClick",function(){this.setShowMiniXocDia(!this.isShow)}),n(o,"onCloseClick",function(){this.setShowMiniXocDia(!1)}),n(o,"onHistoryClick",function(){this.controller.showToast("\u0110ang c\u1eadp nh\u1eadt")}),n(o,"onRankClick",function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(_.MINI_XOC_DIA),this.controller.MiniGame.GameMiniRank.showDialog()}),n(o,"onTutorialClick",function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(c.MINIGAME_XOCDIA)}),n(o,"reset",function(){this.MiniXocDiaPlate.node.active=!1,this.MiniXocDiaDoors.reset()}),o)),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","./MiniXocDiaBet":"MiniXocDiaBet","./MiniXocDiaConstant":"MiniXocDiaConstant","./MiniXocDiaDoors":"MiniXocDiaDoors","./MiniXocDiaHistory":"MiniXocDiaHistory","./MiniXocDiaPlate":"MiniXocDiaPlate","./MiniXocDiaState":"MiniXocDiaState","./MiniXocDiaTime":"MiniXocDiaTime"}],MomoItem:[function(t,e,i){"use strict";cc._RF.push(e,"2dc97gZBOxLM6f0jQ6hV9dZ","MomoItem");t("../../util/FormatUtil"),t("../../helper/Message");cc.Class({extends:cc.Component,properties:{phoneLabel:cc.Label,nameLabel:cc.Label},init:function(t,e){this.GameCenter=t,e&&(this.data=e,this.phoneLabel.string=e.phone||"",this.nameLabel.string=e.name||"")},onCopyClick:function(){this.GameCenter.Audio.playClick();var t=this.data.phone||"0";Clipboard.copy(t)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Music:[function(t,e,i){"use strict";cc._RF.push(e,"cfc70xpgJJBtpj6odIIeQPI","Music");var o=t("../helper/Constant");cc.Class({extends:cc.Component,properties:{slotMusic:{type:cc.AudioClip,default:null},winNormalAudio:{type:cc.AudioClip,default:null},bigWinAudio:{type:cc.AudioClip,default:null},megaWinAudio:{type:cc.AudioClip,default:null},jackpotAudio:{type:cc.AudioClip,default:null}},onLoad:function(){this.isSound=!0,this.loadConfig(),this.startMusic()},onDisable:function(){cc.audioEngine.stopAll()},loadConfig:function(){var t=cc.sys.localStorage.getItem(o.IS_SOUND);t="true"===t||!0===t||"false"!==t&&!1!==t,this.isSound=t},setSoundClick:function(){this.setSound(!this.isSound),this.isSound?this.resumeMusic():this.pauseMusic()},startMusic:function(){cc.audioEngine.stopAll(),this.isSound&&(this.music_id=cc.audioEngine.play(this.slotMusic,!0,.6))},pauseMusic:function(){this.music_id?cc.audioEngine.pause(this.music_id):cc.audioEngine.stopAll()},resumeMusic:function(){this.music_id?cc.audioEngine.resume(this.music_id):this.startMusic()},stopMusic:function(){this.music_id&&cc.audioEngine.stop(this.music_id)},setSound:function(t){this.isSound=t},soundWinNormal:function(){this.isSound&&cc.audioEngine.playEffect(this.winNormalAudio,!1)},soundBigWin:function(){this.isSound&&cc.audioEngine.playEffect(this.bigWinAudio,!1)},soundMegaWin:function(){this.isSound&&cc.audioEngine.playEffect(this.megaWinAudio,!1)},soundJackpot:function(){this.isSound&&cc.audioEngine.playEffect(this.jackpotAudio,!1)}}),cc._RF.pop()},{"../helper/Constant":"Constant"}],MyPlayerHover:[function(t,e,i){"use strict";cc._RF.push(e,"38978egV/tKCqJvaVDzzslc","MyPlayerHover");var o=t("../../util/BrowserUtil");cc.Class({extends:cc.Component,properties:{baseSprite:cc.Sprite,baseNormalSpriteFrame:cc.SpriteFrame,baseActiveSpriteFrame:cc.SpriteFrame},init:function(t,e){this.FireFishGame=t,this.FireFish=t.FireFish,this.MyPlayer=e,this.listGunChoise=e.listGunChoise},onLoad:function(){var t=this;this.onMouseEnter=function(){t.baseSprite.spriteFrame=t.baseActiveSpriteFrame,o.showCursorPointer()},this.onMouseLeave=function(){t.baseSprite.spriteFrame=t.baseNormalSpriteFrame,o.showCursorAuto()}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.FireFish.AudioFireFish.playClick(),this.MyPlayer.isShowGunChoise()?this.MyPlayer.hideGunChoise():this.MyPlayer.showGunChoise()}}),cc._RF.pop()},{"../../util/BrowserUtil":"BrowserUtil"}],NewsItem:[function(t,e,i){"use strict";cc._RF.push(e,"09ca9rttK5Av4AotsiJp1bK","NewsItem");var o=t("../../helper/Constant"),n=t("../../util/FormatUtil"),s=t("../../util/Util");cc.Class({extends:cc.Component,properties:{newRickTextNode:cc.Node,newLabelNode:cc.Node,newsRichText:cc.RichText,nickNameLabel:cc.Label,moneylabel:cc.Label,moneyNameLabel:cc.Label,gameNameLabel:cc.Label},init:function(t,e,i,a){this.News=t,a&&"big_win"===a.type?this.isShowGame(a.server_id,a.game_name)?(this.newLabelNode.active=!0,this.newRickTextNode.active=!1,this.nickNameLabel.string=s.getServerID(a.server_id)+a.nick_name.toLowerCase()||"",this.nickNameLabel._updateRenderData(!0),this.moneylabel.string=n.numberWithCommas(a.amount),this.moneylabel._updateRenderData(!0),a.server_id===o.SERVER_ID_1?(this.gameNameLabel.string=s.getNameByGameName(a.game_name),this.moneyNameLabel.string=o.SERVER_ID_1_MONEY_NAME):(this.gameNameLabel.string=s.getNameByGameName(a.game_name),this.moneyNameLabel.string=o.SERVER_ID_2_MONEY_NAME),this.gameNameLabel._updateRenderData(!0),this.node.width=this.nickNameLabel.node.width+this.nickNameLabel.node.width+this.gameNameLabel.node.width+100):this.node.active=!1:(this.newRickTextNode.active=!0,this.newLabelNode.active=!1,this.newsRichText.string=e,this.node.width=this.newsRichText.node.width),this.url=i},isShowGame:function(t,e){if(t==o.SERVER_ID_2)switch(e){case o.MINI_BACAY:case o.WILD:case o.DIAMOND_2:case o.BAU_CUA:case o.ZOOMBIES:case o.LONGVUONG:case o.ONE001:case o.DRAGON_TIGER:case o.CHAN_LE:return!1;default:return!0}return!0},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],News:[function(t,e,i){"use strict";cc._RF.push(e,"4863a4o7cVHEZJfI+HuFdAw","News");var o=t("../base/BaseController"),n=t("../helper/Config"),s=t("../helper/Constant");cc.Class({extends:o,properties:{newsItemPrefab:cc.Prefab,newsContent:cc.Node,checkShowNode:cc.Node},onLoad:function(){this._super(),this.listNews=[],this.pool=new cc.NodePool;for(var t=0;t<n.NEWS_MAX;t++){var e=cc.instantiate(this.newsItemPrefab);this.pool.put(e)}this.getSceneName()!==s.SCENE_GAME_CENTER||this.isConnected()?this.node.active=!1:this.addDefaultTextMarquee()},addNews:function(t){if(this.getSceneName()===s.SCENE_GAME_CENTER){var e=t.data.msg,i=t.data.url,o=t.data.order;this.addNewsNode(e,i,o,t.data)}},addNewsNode:function(t,e,i,o){if(this.checkShowNode&&!this.checkShowNode.active);else if(t&&!cc.game.isPaused()&&(this.listNews.length<=n.NEWS_MAX||i)){var s=void 0;this.pool&&(s=this.pool.get()),s||(s=cc.instantiate(this.newsItemPrefab)),s.getComponent("NewsItem").init(this,t,e,o),s.parent=this.newsContent,this.moveItem(s),this.listNews.push(s)}},moveItem:function(t){this.node.active=!0,t.y=0;var e=0,i=-t.width-this.newsContent.width/2-250;0===this.listNews.length?e=this.newsContent.width/2:(e+=this.listNews[this.listNews.length-1].x,e+=this.listNews[this.listNews.length-1].width,(e+=n.DISTANCE_TWO_NEWS)<this.newsContent.width/2&&(e=this.newsContent.width/2)),t.x=e;var o=(e-i)/n.SPEED_MOVE_NEWS;t.runAction(cc.sequence(cc.moveTo(o,i,0),cc.callFunc(function(){this.pool.put(t),this.removeItemFromListItems(t),0===this.listNews.length&&(this.getSceneName()!==s.SCENE_GAME_CENTER||this.isConnected()?this.node.active=!1:this.addDefaultTextMarquee())},this)))},addDefaultTextMarquee:function(){var t=this.getGeneralConfig();if(t){var e={data:{msg:t.DEFAULT_TEXT_MARQUEE.content,url:t.DEFAULT_TEXT_MARQUEE.url}};this.addNews(e)}else this.node.active=!1},removeItemFromListItems:function(t){for(var e=0,i=this.listNews.length;e<i;e++)if(this.listNews[e]===t)return void this.listNews.splice(e,1)}}),cc._RF.pop()},{"../base/BaseController":"BaseController","../helper/Config":"Config","../helper/Constant":"Constant"}],NodeUtil:[function(t,e,i){"use strict";cc._RF.push(e,"17792Be7J9O5pw0vd39rBfR","NodeUtil");var o={getDistanceTwoNode:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}};e.exports=o,cc._RF.pop()},{}],OTPLogin:[function(t,e,i){"use strict";cc._RF.push(e,"2e510Lz3WVIcrHgiOEZD5H8","OTPLogin");var o=t("../../../util/BrowserUtil"),n=t("../../../helper/Constant"),s=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{otpEditBox:cc.EditBox},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.otpEditBox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===n.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ESC_KEY?(this.dialogForm.hideDialog(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.OTP_FORGOT_PASS;if(e){var i=e.content,o=e.service_number,n=String.format(s.LOGIN_SECURITY_SMS_2,i,o);this.syntaxSMSRichText.getComponent(cc.RichText).string=n}}},setAccount:function(t,e,i,o){this.isLoginFacebook=!1,this.username=t,this.password=e,this.captcha=i,this.session_id=o},setLoginFacebook:function(t,e,i,o){this.isLoginFacebook=!0,this.socialId=t,this.email=e,this.socialType=i,this.accessToken=o},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.otpEditBox.string;t?this.isLoginFacebook?(this.GameCenter.showProcessingNode(),this.GameCenter.loginSocial(this.socialId,this.email,this.socialType,this.accessToken,t),this.clear()):this.username&&(this.GameCenter.showProcessingNode(),this.GameCenter.Login.login(this.username,this.password,t,this.captcha),this.clear()):this.GameCenter.showDialogMessage(s.OTP_LOGIN_TITLE,s.MISSING_INFO)},onGetOTPClick:function(){var t=this,e=void 0;this.isLoginFacebook?e={social_id:this.socialId,email:this.email,social_type:this.socialType,access_token:this.accessToken,captcha:this.captcha,session_id:this.session_id}:(e={username:this.username,password:this.password,captcha:this.captcha,session_id:this.session_id},this.GameCenter.Login.getSign&&this.GameCenter.Login.getSign(e,this.username));var i=function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.OTP_LOGIN_TITLE,e.msg),t.clear()},o=function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.OTP_LOGIN_TITLE,e.msg),t.clear()};this.GameCenter.showProcessingNode(),this.isLoginFacebook?this.GameCenter.api.getOTPLoginSocial(e,i,o):this.GameCenter.api.getOTPLogin(e,i,o)},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil"}],Online:[function(t,e,i){"use strict";cc._RF.push(e,"782e9Y26gJNabU6bEjinbsa","Online");var o=t("../../../base/BaseController"),n=t("../../../helper/Constant");cc.Class({extends:o,properties:{playerOnlineItemPrefab:cc.Prefab,listPlayersScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){var t=this;this._super(),this.onUserEnterRoom=function(e){e.room.name.indexOf(n.LOBBY)>-1&&t.addPlayer(e.user)},this.onUserExitRoom=function(e){e.room.name.indexOf(n.LOBBY)>-1&&(e.user.isItMe||t.removePlayer(e.user))}},onEnable:function(){this.listPlayers=[],this.initPlayersOnline(),this.GameCenter.getSFS()&&(this.GameCenter.getSFS().addEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.GameCenter.getSFS().addEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom))},onDisable:function(){this.GameCenter.getSFS()&&(this.GameCenter.getSFS().removeEventListener(this.SFS2X.SFSEvent.USER_ENTER_ROOM,this.onUserEnterRoom),this.GameCenter.getSFS().removeEventListener(this.SFS2X.SFSEvent.USER_EXIT_ROOM,this.onUserExitRoom))},initPlayersOnline:function(){this.listPlayersScrollView.content.removeAllChildren(!0);var t=this.GameCenter.getListUserByRoom();for(var e in t)this.addPlayer(t[e])},addPlayer:function(t){var e=this.GameCenter.getSFSMySelf();if(t.variables.user_id.value!==e.variables.user_id.value&&!this.getPlayerByUserId(t.variables.user_id.value)){var i=cc.instantiate(this.playerOnlineItemPrefab),o=i.getComponent("PlayerOnlineItem"),n=t.variables.avatar.value,s=t.variables.nick_name.value;o.setAvatar(n),o.setNickname(s),i.parent=this.listPlayersScrollView.content,t.playerNode=i,this.listPlayers.push(t)}},removePlayer:function(t){var e=t.variables.user_id.value,i=this.getPlayerByUserId(e);i&&(this.removePlayerFromListByPlayer(i),i.playerNode.removeFromParent(!0))},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].variables.user_id.value===t)return this.listPlayers[e];return null},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t)return void this.listPlayers.splice(e,1)}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Constant":"Constant"}],OtpFirstAccount:[function(t,e,i){"use strict";cc._RF.push(e,"b9a57qg7fpK5KIxX9Vb1Bc3","OtpFirstAccount");var o=t("../../../helper/Message");t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{messageLable:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.initData()},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active&&!this.GameCenter.Bonus.node.active},initData:function(){if(this.GameCenter.getGeneralConfig()){var t=o.OTP_FIRST_ACCOUNT;this.messageLable.string=t}},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog(),this.GameCenterUI.showInfoNode(),this.GameCenter.GameInfo.showSercurity()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message"}],Otp:[function(t,e,i){"use strict";cc._RF.push(e,"a8decOx0mNChb09xP6XyLoh","Otp");t("../../helper/Message");var o=t("../../helper/Constant");cc.Class({extends:cc.Component,init:function(t){this.controller=t},properties:{},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},onGetOtpSMSClick:function(){this.controller.Processing.node.active=!0,this.controller.sendRequest.sendToZone(o.REQUEST_GET_OTP)},onGetOtpTelegramClick:function(){cc.sys.openURL(o.TELEGRAM_BOT)},onGetOtpAppClick:function(){cc.sys.openURL(o.HOST_DOWNLOAD)},onLinkClick:function(){cc.sys.openURL(o.HOST_DOWNLOAD)}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message"}],PaginationItem:[function(t,e,i){"use strict";cc._RF.push(e,"ce9e4ewsI9EbpuZcPFCXtiN","PaginationItem"),cc.Class({extends:cc.Component,properties:{pageOnButtonNode:cc.Node,pageOffButtonNode:cc.Node,pageOnLabel:cc.Label,pageOffLabel:cc.Label},init:function(t,e){this.pageOnLabel.string=t,this.pageOffLabel.string=t,this.page=e},onLoad:function(){},enable:function(){this.pageOnButtonNode.active=!1,this.pageOffButtonNode.active=!0},disable:function(){this.pageOnButtonNode.active=!0,this.pageOffButtonNode.active=!1},getPage:function(){return this.page}}),cc._RF.pop()},{}],PhomCardController:[function(t,e,i){"use strict";cc._RF.push(e,"6ed9a6W30dDsrOMCSOhIXNz","PhomCardController");var o=t("../PhomConfig"),n=t("../../../util/NodeUtil");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.cardController=this.node.getComponent("CardController"),this.startZIndex=this.node.zIndex},onEnable:function(){},init:function(t){var e=this;this.Phom=t,this.PhomUI=t.PhomUI,this.isSelected=!1,this.isInAction=!1,this._initScale=1,this.startPosition=null,this._moveUpAction=cc.moveBy(o.TIME_TOUCH_CARD,0,o.DISTANCE_SELECTED_CARD),this._moveDownaction=cc.moveBy(o.TIME_TOUCH_CARD,0,-o.DISTANCE_SELECTED_CARD),this._resetInAction=cc.callFunc(function(){e.isInAction=!1},this),this._onMouseEnter=function(t){e.isAn()&&!e.PhomUI.isShowHaButton()||e.cardController.showHighLight()},this._onMouseLeave=function(t){e.isAn()&&!e.PhomUI.isShowHaButton()||e.cardController.hideHighLight()},this._onTouchDown=function(t){e.isInAction||(e.startPosition=e.node.getPosition(),e.isAn()&&!e.PhomUI.isShowHaButton()||(this.stopAllActions(),this.cardController.showHighLight()))},this._onTouchMove=function(t){if(!e.isInAction){var i=t.touch.getDelta();this.x+=i.x;var o=e.node.getPosition();n.getDistanceTwoNode(e.startPosition,o)>=5&&0===e.node.zIndex&&(e.node.zIndex=1e3,e.cardController.hideHighLight(),e.cardController.showDarkEffect())}},this._onTouchUp=function(t){if(!e.isInAction){var i=e.node.getPosition();if(n.getDistanceTwoNode(e.startPosition,i)>=5){for(var o=e.Phom.PhomHandlerEffect.getListCards(),s=e.Phom.PhomHandlerEffect.getListCardsAn(),a=e.Phom.getLeftNearestNode(e.node),r=0;r<o.length;r++)if(o[r]===e.node.trueValue){o.splice(r,1);break}if(a){for(var c=0;c<o.length;c++)if(o[c]===a.trueValue){o.splice(c+1,0,e.node.trueValue);break}}else o.splice(0,0,e.node.trueValue);e.Phom.PhomHandlerEffect.initMyCards(o,!1,s)}else{if(e.isAn()&&!e.PhomUI.isShowHaButton())return;this.stopAllActions(),e.node.zIndex=e.startZIndex,e.node.setPosition(e.startPosition),this.cardController.hideHighLight(),this.cardController.hideDarkEffect(),e.isInAction=!0,e.isSelected?(e.isSelected=!1,this.runAction(cc.sequence(e._moveDownaction,e._resetInAction))):(e.isSelected=!0,this.runAction(cc.sequence(e._moveUpAction,e._resetInAction))),e.Phom.PhomHandlerEffect.checkShowButtons()}}},this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},disableEvents:function(){this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMove,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},moveTo:function(t,e){this.isSelected&&(e+=o.DISTANCE_SELECTED_CARD),this.node.stopAllActions(),this.cardController.reveal(!0),this.isAn()||this.cardController.hideHighLight(),this.isInAction=!0,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(o.TIME_TOUCH_CARD,this._initScale),cc.moveTo(o.TIME_TOUCH_CARD,t,e)),cc.callFunc(function(){this.isInAction=!1},this)))},selectCard:function(){this.isInAction||(this.node.stopAllActions(),this.isInAction=!0,this.isSelected?(this.isSelected=!1,this.node.runAction(cc.sequence(this._moveDownaction,this._resetInAction))):(this.isSelected=!0,this.node.runAction(cc.sequence(this._moveUpAction,this._resetInAction))),this.cardController.hideHighLight())},getSelected:function(){return this.isSelected},setAn:function(t){this.an=t,this.node.getComponent("CardController").showHighLightBlue()},isAn:function(){return this.an}}),cc._RF.pop()},{"../../../util/NodeUtil":"NodeUtil","../PhomConfig":"PhomConfig"}],PhomCard:[function(t,e,i){"use strict";cc._RF.push(e,"6cad5DXW5dHJoZHNf7PYhAb","PhomCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;3===++i?i=4:4===i&&(i=3),e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{trueValue:{value:t,writable:!1},point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],PhomConfig:[function(t,e,i){"use strict";cc._RF.push(e,"491e7ExZ1pHWoY/RPGYApuA","PhomConfig");e.exports={NUMBER_PLAYERS:4,TIME_SORT_CARDS_IN_HAND:.5,DISTANCE_TWO_CARDS_IN_HAND:75,SCALE_CARDS_IN_HAND:1,TIME_TOUCH_CARD:.1,SCALE_TOUCH_CARD:1.1,DISTANCE_SELECTED_CARD:40,POSITION_MY_CARDS_X:-305,POSITION_MY_CARDS_Y:-220,DISTANCE_CARD_IN_TABLE:30,DISTANCE_TWO_CARDS_IN_TABLE:40,DISTANCE_Y_TWO_CARDS_IN_TABLE:30,TIME_MOVE_CARDS_TO_TABLE:.25,DISTANCE_MAX_RANDOM_POSITION_CARD_X:100,DISTANCE_MAX_RANDOM_POSITION_CARD_Y:50,SCALE_CARD_IN_TABLE:.5,TIME_FLIP_CARD_IN_TABLE:.25,POSITION_TABLE_CARDS_X:0,POSITION_TABLE_CARDS_Y:35,TIME_SORT_CARDS_IN_OTHER_PLAYER:.5,DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:25,DISTANCE_BACK_CARD_OTHER_PLAYER:60,SCALE_CARDS_IN_OTHER_PLAYER:.5,TIME_SHOW_CARDS_OTHER_PLAYERS:.5,POSITION_PLAYER_SCORE_X:0,POSITION_PLAYER_SCORE_Y:-100},cc._RF.pop()},{}],PhomConstant:[function(t,e,i){"use strict";cc._RF.push(e,"e9acbULx+ZLir0K/a3DoeZQ","PhomConstant");e.exports={START:"START",COUNT_DOWN:"COUNT_DOWN",DANH_BAI:"DANH_BAI",GUI_BAI:"GUI_BAI",AN_BAI:"AN_BAI",BOC_BAI:"BOC_BAI",U:"U",HA_BAI:"HA_BAI",RESULT:"RESULT",AUTO_HA_BAI:"AUTO_HA_BAI",ROOM_INFO:"ROOM_INFO",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],PhomHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"c2b40ju711LPLgNCHNslg0B","PhomHandlerEffect");var o=t("./PhomCard"),n=t("./item/PhomCardController"),s=t("./PhomConfig"),a=t("./PhomWinType"),r=t("./PhomUtil"),c={init:function(t){this.Phom=t,this.PhomUI=t.PhomUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers,this.lastCardPlay=null,this.lastPlayerId=null},dealCards:function(t){for(var e=0;e<this.listPlayers.length;e++)this.listPlayers[e].isItMe?(t=r.sortCards(t),this.initMyCards(t)):this.listPlayers[e].PhomPlayer.showCardBack()},initMyCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments[2];this.Phom.myCardsNode.removeAllChildren(!0),this.PhomUI.showXepButton();for(var o=0;o<t.length;o++){var a=this.initNewCardNode(t[o]);a.parent=this.Phom.myCardsNode,a.scale=s.SCALE_CARDS_IN_HAND;var r=a.addComponent(n);r.init(this.Phom),a.phomCardController=r;var c=s.DISTANCE_TWO_CARDS_IN_HAND*o+s.POSITION_MY_CARDS_X,h=s.POSITION_MY_CARDS_Y;if(e?(a.setPosition(s.POSITION_MY_CARDS_X,s.POSITION_MY_CARDS_Y),a.runAction(cc.moveTo(s.TIME_SORT_CARDS_IN_HAND,c,h))):a.setPosition(c,h),i)for(var l=0;l<i.length;l++)if(t[o]===i[l]){r.setAn(!0);break}}},initNewCardNode:function(t){var e=cc.instantiate(this.Phom.cardPrefab);e.trueValue=t;var i=new o(t),n=e.getComponent("CardController");return n.init(i),e.cardController=n,e},handleStartGame:function(t){var e=t.data.id_playing,i=this.Phom.getPlayerByUserId(e);i&&i.PhomPlayer.showChotHa()},handlePlayingPlayer:function(t){var e=t.data.id_playing,i=t.data.is_boc_bai,o=t.data.is_ha,n=t.data.is_chot_ha,s=this.Phom.getPlayerByUserId(e);s&&(this.Phom.idPlaying=e,this.Phom.isBocBai=i,this.Phom.isHa=o,this.Phom.isGui=n&&!i,this.Phom.isChotHa=n,s.isItMe?this.checkShowButtons():(this.PhomUI.hideAllButtons(),this.Phom.myPlayer.is_player&&this.PhomUI.showXepButton()),this.Phom.startCountDownPlayer(s,t.time_remain,t.time))},handlePlayedPlayer:function(t){var e=t.data.card,i=t.data.id_played;this.lastCardPlay=e,this.lastPlayerId=i;var n=this.Phom.getPlayerByUserId(i);if(n)if(this.showDarkEffectAllCardsPlay(n),n.isItMe){var a=this.Phom.getCardsNodeByCard(e);if(a){var r=a.x-n.node.x-n.PhomPlayer.cardPlayNode.x,c=a.y-n.node.y-n.PhomPlayer.cardPlayNode.y;a.stopAllActions(),a.setPosition(r,c),a.scale=s.SCALE_CARDS_IN_HAND,a.cardController.hideHighLight(),a.cardController.hideDarkEffect(),a.phomCardController.disableEvents(),a.zIndex=0;var h=n.PhomPlayer.cardPlayNode.getChildrenCount();a.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,h*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE))),a.parent=n.PhomPlayer.cardPlayNode}this.sortMyCards(),this.checkShowButtons()}else{var l=n.PhomPlayer.cardBackNode.x-n.PhomPlayer.cardPlayNode.x,u=n.PhomPlayer.cardBackNode.y-n.PhomPlayer.cardPlayNode.y,d=n.PhomPlayer.cardPlayNode.getChildrenCount(),m=cc.instantiate(this.Phom.cardPrefab);m.trueValue=e,m.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,m.parent=n.PhomPlayer.cardPlayNode,m.setPosition(l,u);var p=m.getComponent("CardController"),f=new o(e);p.init(f),m.cardController=p,m.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,d*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.hideTextAllPlayers()},handleBocBai:function(t){var e=t.data.id_playing,i=t.data.card,a=this.Phom.getPlayerByUserId(e);if(a)if(a.isItMe){var r=this.Phom.myCardsNode.getChildrenCount(),c=cc.instantiate(this.Phom.cardPrefab);c.trueValue=i,c.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,c.parent=this.Phom.myCardsNode,c.setPosition(s.POSITION_TABLE_CARDS_X,s.POSITION_TABLE_CARDS_Y);var h=c.getComponent("CardController"),l=new o(i);h.init(l),c.cardController=h;var u=c.addComponent(n);u.init(this.Phom),c.phomCardController=u;var d=r*s.DISTANCE_TWO_CARDS_IN_HAND+s.POSITION_MY_CARDS_X,m=s.POSITION_MY_CARDS_Y;c.cardController.revealWithAnimationFlipMoveScale(!0,s.TIME_MOVE_CARDS_TO_TABLE,d,m,s.SCALE_CARDS_IN_HAND),this.PhomUI.hideAnButton()}else{var p=cc.instantiate(this.Phom.cardBackPrefab);p.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,p.parent=this.Phom.tableCardsNode,p.setPosition(s.POSITION_TABLE_CARDS_X,s.POSITION_TABLE_CARDS_Y);var f=a.node.getPosition().x+a.PhomPlayer.cardBackNode.x,g=a.node.getPosition().y+a.PhomPlayer.cardBackNode.y;p.runAction(cc.sequence(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,f,g),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARDS_IN_OTHER_PLAYER)),cc.callFunc(function(){p.removeFromParent(!0)},this)))}this.minusNumberTableCards()},handleAnBai:function(t){var e=t.data.id_an_bai,i=t.data.id_chot_ha,o=this.Phom.getPlayerByUserId(this.lastPlayerId),a=this.Phom.getPlayerByUserId(e),r=this.Phom.getPlayerByUserId(i);if(a&&o){var c=o.PhomPlayer.cardPlayNode.getChildren();for(var h in c)if(c[h].getComponent("CardController").trueValue===this.lastCardPlay){var l=c[h];if(a.isItMe){var u=this.Phom.myCardsNode.getChildrenCount()*s.DISTANCE_TWO_CARDS_IN_HAND+s.POSITION_MY_CARDS_X,d=s.POSITION_MY_CARDS_Y,m=o.PhomPlayer.cardPlayNode.convertToWorldSpace(l.getPosition()),p=this.Phom.myCardsNode.convertToNodeSpace(m),f=l.addComponent(n);f.init(this.Phom),f.setAn(!0),l.phomCardController=f,l.setPosition(p),l.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,u,d),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARDS_IN_HAND))),l.parent=this.Phom.myCardsNode}else{var g=a.PhomPlayer.cardAnNode.getChildrenCount()*s.DISTANCE_BACK_CARD_OTHER_PLAYER,_=o.PhomPlayer.cardPlayNode.convertToWorldSpace(l.getPosition()),S=a.PhomPlayer.cardAnNode.convertToNodeSpace(_);l.setPosition(S),l.runAction(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,g,0)),l.parent=a.PhomPlayer.cardAnNode}break}}this.clearChotHaAllPlayers(),r&&r.PhomPlayer.showChotHa(),this.lastCardPlay=null,this.showAnBaiMoneyChange(t)},handleHaBai:function(t){var e=t.data.id_playing,i=t.data.cards,n=this.Phom.getPlayerByUserId(e);if(n){var a=n.PhomPlayer.getCardsHa().length;if(n.PhomPlayer.addCardsHa(i),n.isItMe){for(var r=0;r<i.length;r++)for(var c=i[r],h=this.Phom.getCardsNodeByCards(c),l=0;l<h.length;l++){var u=this.Phom.myCardsNode.convertToWorldSpace(h[l].getPosition()),d=n.PhomPlayer.cardHaNode.convertToNodeSpace(u);h[l].stopAllActions(),h[l].parent=n.PhomPlayer.cardHaNode,h[l].scale=s.SCALE_CARDS_IN_HAND,h[l].setPosition(d),h[l].cardController.hideHighLight(),h[l].cardController.hideDarkEffect(),h[l].phomCardController.disableEvents(),h[l].zIndex=r+1+a,h[l].runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,l*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-s.DISTANCE_Y_TWO_CARDS_IN_TABLE*(r+a)),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.sortMyCards(),this.checkShowButtons()}else for(var m=n.PhomPlayer.cardAnNode.getChildren(),p=0;p<i.length;p++)for(var f=i[p],g=0;g<f.length;g++){var _=null;for(var S in m)m[S].getComponent("CardController").trueValue===f[g]&&(_=m[S]);if(_){var C=n.PhomPlayer.cardAnNode.convertToWorldSpace(_.getPosition()),N=n.PhomPlayer.cardHaNode.convertToNodeSpace(C);_.stopAllActions(),_.parent=n.PhomPlayer.cardHaNode,_.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,_.setPosition(N),_.cardController.hideHighLight(),_.zIndex=p+1+a,_.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,g*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-s.DISTANCE_Y_TWO_CARDS_IN_TABLE*(p+a)),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}else{var E=n.PhomPlayer.cardBackNode.convertToWorldSpace(new cc.Vec2(0,0)),T=n.PhomPlayer.cardHaNode.convertToNodeSpace(E),I=cc.instantiate(this.Phom.cardPrefab),v=I.getComponent("CardController"),y=new o(f[g]);v.init(y),I.trueValue=f[g],I.cardController=v,I.parent=n.PhomPlayer.cardHaNode,I.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,I.setPosition(T),I.zIndex=p+1,I.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,g*s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-s.DISTANCE_Y_TWO_CARDS_IN_TABLE*(p+a)),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}}}},handleGuiBai:function(t){var e=t.data.id_playing,i=t.data.card,n=t.data.cards,a=t.data.id_nhan,r=this.Phom.getPlayerByUserId(e),c=this.Phom.getPlayerByUserId(a);if(r&&c)if(r.isItMe){var h=this.Phom.getCardsNodeByCard(i),l=this.Phom.myCardsNode.convertToWorldSpace(h.getPosition()),u=c.PhomPlayer.cardHaNode.convertToNodeSpace(l);h.stopAllActions(),h.setPosition(u),h.cardController.hideHighLight(),h.cardController.hideDarkEffect(),h.phomCardController.disableEvents(),h.zIndex=0;var d=this.getGuiPositonData(c,i,n);h.zIndex=d.zIndex,h.runAction(cc.sequence(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,d.position),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)),cc.callFunc(function(){},this))),h.parent=c.PhomPlayer.cardHaNode,this.sortMyCards(),this.checkShowButtons()}else{var m=r.PhomPlayer.cardBackNode.convertToWorldSpace(new cc.Vec2(0,0)),p=c.PhomPlayer.cardHaNode.convertToNodeSpace(m),f=cc.instantiate(this.Phom.cardPrefab);f.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,f.setPosition(p),f.trueValue=i;var g=f.getComponent("CardController"),_=new o(i);g.init(_),f.cardController=g;var S=this.getGuiPositonData(c,i,n);f.zIndex=S.zIndex,f.runAction(cc.sequence(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,S.position),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)),cc.callFunc(function(){},this))),f.parent=c.PhomPlayer.cardHaNode}},getGuiPositonData:function(t,e,i){var o=t.PhomPlayer.getCardsHa();if(o){for(var n=0,a=!1,c=0;c<o.length;c++){for(var h=0;h<o[c].length;h++)if(o[c][h]===i[0]){n=c,a=!0;break}if(a)break}var l=-n*s.DISTANCE_Y_TWO_CARDS_IN_TABLE;if(r.checkPhomNgang(i)){var u=t.PhomPlayer.getMaxXCardHaByPositionY(l)+s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS;return{position:new cc.Vec2(u,l),zIndex:n+1}}if(r.checkPhomDoc(i)){var d=0,m=0;return e<i[0]?(d=t.PhomPlayer.getMinXCardHaByPositionY(l)-s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,m=n):(d=t.PhomPlayer.getMaxXCardHaByPositionY(l)+s.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,m=n+1),{position:new cc.Vec2(d,l),zIndex:m}}}},handleResult:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.showOtherPlayerCards(t,e),this.showResultMoneyChange(t)},sort:function(){var t=this.getListCards(),e=this.getListCardsAn();this.initMyCards(r.sortCards(t,e),!0,e)},getListCards:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)e.push(t[i].getComponent("CardController").getTrueValue());return e},getListMyCards:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)t[i].getComponent("PhomCardController").isAn()||e.push(t[i].getComponent("CardController").getTrueValue());return e},getListCardsAn:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)t[i].getComponent("PhomCardController").isAn()&&e.push(t[i].getComponent("CardController").getTrueValue());return e},getListPhomHa:function(){for(var t=[],e=0;e<this.listPlayers.length;e++)if(!this.listPlayers[e].isItMe){for(var i=this.listPlayers[e].PhomPlayer.cardHaNode.getChildren(),o=[],n=0;n<i.length;n++)o.push(i[n].getComponent("CardController").getTrueValue());o.length>0&&t.push(o)}return t},sortMyCards:function(){for(var t=this.Phom.myCardsNode.getChildren(),e=0;e<t.length;e++){var i=s.DISTANCE_TWO_CARDS_IN_HAND*e+s.POSITION_MY_CARDS_X,o=s.POSITION_MY_CARDS_Y;t[e].phomCardController.isSelected=!1,t[e].phomCardController.moveTo(i,o)}},showDarkEffectAllCardsPlay:function(t){for(var e=t.PhomPlayer.cardPlayNode.getChildren(),i=0;i<e.length;i++)e[i].cardController.showDarkEffect()},checkShowButtons:function(){if(this.Phom.PhomState.isPlaying()){for(var t=!1,e=this.Phom.myCardsNode.getChildren(),i=0;i<e.length;i++)if(e[i].phomCardController.isSelected){t=!0;break}this.Phom.checkIsMyTurn()&&(t?this.PhomUI.showDanhButton():this.PhomUI.hideDanhButton(),this.Phom.isBocBai?this.PhomUI.showBocButton():this.PhomUI.hideBocButton(),this.Phom.isBocBai&&this.checkCanAn()?this.PhomUI.showAnButton():this.PhomUI.hideAnButton(),!this.Phom.isBocBai&&this.Phom.isChotHa&&this.checkCanHa()?(this.PhomUI.showHaButton(),this.PhomUI.showHaTuDongButton()):(this.PhomUI.hideHaButton(),this.PhomUI.hideHaTuDongButton()),this.Phom.isGui&&!this.PhomUI.isShowHaButton()&&this.checkCanGui()&&!this.Phom.myPlayer.PhomPlayer.isMom()?this.PhomUI.showGuiButton():this.PhomUI.hideGuiButton(),!this.Phom.isBocBai&&this.checkU()?this.PhomUI.showUButton():this.PhomUI.hideUButton())}},checkCanAn:function(){if(this.lastCardPlay){var t=this.getListMyCards(),e=this.getListCardsAn();return e.push(this.lastCardPlay),r.checkCardAnValid(e,t)}return!1},checkCanHa:function(){var t=this.getListMyCards();return this.getListCardsAn().length>0||r.checkCoPhom(t)},checkCanGui:function(){var t=this.getListMyCards(),e=this.getListPhomHa();if(e.length>0&&t.length>0)for(var i=0;i<e.length;i++)for(var o=0;o<t.length;o++){var n=r.cloneCards(e[i]),s=t[o];if(n.push(s),0===r.getMaxCardsData([],n).cardsRemain.length)return!0}return!1},checkU:function(){var t=this.getListCards(),e=r.getMaxCardsData([],t),i=0;for(var o in e.listPhom)for(var n in e.listPhom[o])i++;return i>=3&&i>=t.length-1},resumeCards:function(t){for(var e=t.data.players,i=0;i<e.length;i++)if(e[i].is_player){var o=e[i].cards_play,n=e[i].cards_ha;if(e[i].isItMe){var s=e[i].cards,a=e[i].cards_an;s=s.concat(a),this.initMyCards(r.sortCards(s,a),!1,a)}else e[i].PhomPlayer.showCardBack();e[i].PhomPlayer.showCardsPlay(o),e[i].PhomPlayer.showCardsHa(n)}},showOtherPlayerCards:function(t,e){var i=t.cards||t.data.cards,o=t.win_type||t.data.win_type;for(var n in i){var s=i[n].cards,c=i[n].cards_an,h=i[n].user_id,l=i[n].is_mom,u=i[n].score,d=i[n].rank,m=this.Phom.getPlayerByUserId(h);m&&(m.isItMe||(m.PhomPlayer.cardAnNode.removeAllChildren(!0),m.PhomPlayer.showCards(r.sortCards(s),c,e)),l&&d>1?m.PhomPlayer.showEffectMom():(m.PhomPlayer.showEffectByRank(d),o===a.TINH_DIEM&&m.PhomPlayer.showScore(u)))}},showAnBaiMoneyChange:function(t){var e=t.data.is_chot_ha,i=t.data.money_change;for(var o in i){var n=i[o].user_id,s=i[o].money_change,a=this.Phom.getPlayerByUserId(n);a&&(a.BasePlayer.showChangeBalance(s),e&&(s>0?a.PhomPlayer.showEffectAnChot():s<0&&a.PhomPlayer.showEffectBiAnChot()))}},showResultMoneyChange:function(t){var e=t.data||t,i=e.win_type,o=e.money_change;for(var n in o){var s=o[n].user_id,a=o[n].money_change,r=this.Phom.getPlayerByUserId(s);r&&(r.BasePlayer.showChangeBalance(a),r.PhomPlayer.showEffectResultByMoneyChange(a,i),r.isItMe&&a>0&&this.GameCommon.Audio.playWin())}},minusNumberTableCards:function(){var t=this.PhomUI.numberCards;--t,this.PhomUI.showTableCard(t)},hideTextAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.hideText(),this.listPlayers[t].BasePlayer.hideWinLoseEffect()},clearChotHaAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].PhomPlayer.setChotHa(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){for(var e=t.time,i=t.time_remain,o=0;o<this.listPlayers.length;o++)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){},reset:function(){this.lastCardPlay=null,this.lastPlayerId=null}};e.exports=c,cc._RF.pop()},{"./PhomCard":"PhomCard","./PhomConfig":"PhomConfig","./PhomUtil":"PhomUtil","./PhomWinType":"PhomWinType","./item/PhomCardController":"PhomCardController"}],PhomHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"e435fT40PFPQLdATP9wcbMs","PhomHandlerRequest");var o=t("./PhomConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{Phom:null,init:function(t){this.Phom=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Phom.showChat(t)},onUserVarsUpdate:function(t){for(var e=t.user,i=t.changedVars,o=0;o<i.length;o++)switch(i[o]){case n.GOLD:this.Phom.initGold(e);break;case n.MONEY:this.Phom.initMoney(e);break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){for(var e=t.changedVars,i=0;i<e.length;i++)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.ROOM_INFO:this.Phom.handleRoomInfo(e);break;case o.START:this.Phom.handleStart(e);break;case o.COUNT_DOWN:this.Phom.handleCountDown(e);break;case o.DANH_BAI:this.Phom.handleDanhBai(e);break;case o.BOC_BAI:this.Phom.handleBocBai(e);break;case o.AN_BAI:this.Phom.handleAnBai(e);break;case o.HA_BAI:this.Phom.handleHaBai(e);break;case o.GUI_BAI:this.Phom.handleGuiBai(e);break;case o.RESULT:this.Phom.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.Phom.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.Phom.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.Phom.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Phom.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./PhomConstant":"PhomConstant"}],PhomPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"00708ZDte1HPL12f/c4t3Yi","PhomPlayer");var o=t("./PhomCard"),n=t("./PhomConfig"),s=t("../../helper/Message"),a=t("./PhomWinType");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node,cardBackNode:cc.Node,chotHaNode:cc.Node,cardPlayNode:cc.Node,cardAnNode:cc.Node,cardHaNode:cc.Node},onLoad:function(){},isMom:function(){return 0===this.cardHaNode.getChildrenCount()},showCards:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.cardsNode.removeAllChildren(!0),t=t.concat(e);for(var s=0;s<t.length;s++){var a=new o(t[s]),r=cc.instantiate(this.cardPrefab);r.trueValue=t[s],r.parent=this.cardsNode,r.scale=n.SCALE_CARDS_IN_OTHER_PLAYER;var c=r.getComponent("CardController");c.init(a),r.cardController=c;var h=0;for(var l in h=this.cardsNode.x>0?s*n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:(t.length-s-1)*-n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,i?(r.setPosition(0,0),r.runAction(cc.moveTo(n.TIME_SHOW_CARDS_OTHER_PLAYERS,h,0))):r.setPosition(h,0),e)if(t[s]===e[l]){c.showHighLightBlue();break}}},showCardsAn:function(t){this.cardAnNode.removeAllChildren(!0);for(var e=0;e<t.length;e++){var i=new o(t[e]),s=cc.instantiate(this.cardPrefab);s.trueValue=t[e],s.parent=this.cardAnNode,s.scale=n.SCALE_CARDS_IN_OTHER_PLAYER;var a=s.getComponent("CardController");a.init(i),s.cardController=a,s.setPosition(e*n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0)}},showCardsPlay:function(t){this.cardPlayNode.removeAllChildren(!0);for(var e=0;e<t.length;e++){var i=new o(t[e]),s=cc.instantiate(this.cardPrefab);s.trueValue=t[e],s.parent=this.cardPlayNode,s.scale=n.SCALE_CARDS_IN_OTHER_PLAYER;var a=s.getComponent("CardController");a.init(i),s.cardController=a,s.setPosition(e*n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,0),e!==t.length-1&&a.showDarkEffect()}},showCardsHa:function(t){this.cardHaNode.removeAllChildren(!0);for(var e=0;e<t.length;e++)for(var i=t[e],s=0;s<i.length;s++){var a=new o(i[s]),r=cc.instantiate(this.cardPrefab);r.trueValue=i[s],r.parent=this.cardHaNode,r.scale=n.SCALE_CARDS_IN_OTHER_PLAYER;var c=r.getComponent("CardController");c.init(a),r.cardController=c,r.setPosition(s*n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,-n.DISTANCE_Y_TWO_CARDS_IN_TABLE*e)}},getMinXCardHaByPositionY:function(t){var e=this.cardHaNode.getChildren(),i=1e3;for(var o in e)Math.abs(e[o].y-t<1)&&e[o].x<i&&(i=e[o].x);return i},getMaxXCardHaByPositionY:function(t){var e=this.cardHaNode.getChildren(),i=-1e3;for(var o in e)Math.abs(e[o].y-t<1)&&e[o].x>i&&(i=e[o].x);return i},addCardsHa:function(t){this.cardsHa=this.cardsHa.concat(t)},getCardsHa:function(){return this.cardsHa},showCardBack:function(){this.cardBackNode.active=!0},hideCardBack:function(){this.cardBackNode.active=!1},setChotHa:function(t){this.chotHaNode.active=t},showChotHa:function(){this.chotHaNode.active=!0},hideChotHa:function(){this.chotHaNode.active=!1},showEffectAnChot:function(){this.node.getComponent("BasePlayer").showTextLight(s.PHOM_AN_CHOT)},showEffectBiAnChot:function(){this.node.getComponent("BasePlayer").showTextDark(s.PHOM_BI_AN_CHOT)},showEffectMom:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.PHOM_MOM)},showEffectByRank:function(t){var e="";switch(t){case 1:e=s.PHOM_NHAT;break;case 2:e=s.PHOM_NHI;break;case 3:e=s.PHOM_BA;break;case 4:e=s.PHOM_BET}0===t||(1===t?this.node.getComponent("BasePlayer").showWinEffect(e):this.node.getComponent("BasePlayer").showLoseEffect(e))},showScore:function(t){var e=String.format(s.PHOM_SCORE,t);this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(n.POSITION_PLAYER_SCORE_X,n.POSITION_PLAYER_SCORE_Y))},showEffectResultByMoneyChange:function(t,e){switch(e){case a.TINH_DIEM:break;case a.U:t>0&&this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U);break;case a.U_DEN:t>0?this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_DEN):t<0&&this.node.getComponent("BasePlayer").showLoseEffect(s.PHOM_DEN);break;case a.U_TRON_DEN:t>0?this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_TRON):t<0&&this.node.getComponent("BasePlayer").showLoseEffect(s.PHOM_DEN);break;case a.U_TRON:t>0&&this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_TRON);break;case a.U_KHAN:t>0&&this.node.getComponent("BasePlayer").showWinEffect(s.PHOM_U_KHAN)}},reset:function(){this.listPhom=null,this.cardsHa=[],this.hideChotHa(),this.hideCardBack(),this.cardsNode.removeAllChildren(!0),this.cardPlayNode.removeAllChildren(!0),this.cardAnNode.removeAllChildren(!0),this.cardHaNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./PhomCard":"PhomCard","./PhomConfig":"PhomConfig","./PhomWinType":"PhomWinType"}],PhomState:[function(t,e,i){"use strict";cc._RF.push(e,"295fdbohvNGVZkMrtE0sQSN","PhomState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],PhomUI:[function(t,e,i){"use strict";cc._RF.push(e,"9e7fbj4STxLBI2L3tAo86b9","PhomUI"),cc.Class({extends:cc.Component,properties:{xepButton:cc.Node,anButton:cc.Node,bocButton:cc.Node,uButton:cc.Node,haButton:cc.Node,haTuDongButton:cc.Node,guiButton:cc.Node,danhButton:cc.Node,tableCardNode:cc.Node,tableCardLabel:cc.Label,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},hideAllPlayers:function(){for(var t=0;t<this.playersNode.length;t++)this.playersNode[t].active=!1},showTableCard:function(t){this.numberCards=t,this.tableCardLabel.string=t,this.tableCardNode.active=!(t<=0)},hideTableCard:function(){this.tableCardNode.active=!1},showXepButton:function(){this.xepButton.active=!0},hideXepButton:function(){this.xepButton.active=!1},showAnButton:function(){this.anButton.active=!0},hideAnButton:function(){this.anButton.active=!1},isShowBocButton:function(){return this.bocButton.active},showBocButton:function(){this.bocButton.active=!0},hideBocButton:function(){this.bocButton.active=!1},showUButton:function(){this.uButton.active=!0},hideUButton:function(){this.uButton.active=!1},isShowHaButton:function(){return this.haButton.active},showHaButton:function(){this.haButton.active=!0},hideHaButton:function(){this.haButton.active=!1},showHaTuDongButton:function(){this.haTuDongButton.active=!0},hideHaTuDongButton:function(){this.haTuDongButton.active=!1},showGuiButton:function(){this.guiButton.active=!0},hideGuiButton:function(){this.guiButton.active=!1},showDanhButton:function(){this.danhButton.active=!0},hideDanhButton:function(){this.danhButton.active=!1},disableAllPlaceHolder:function(){for(var t=0;t<this.playersPlaceHolderNode.length;t++)this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},hideAllButtons:function(){this.hideAnButton(),this.hideBocButton(),this.hideDanhButton(),this.hideGuiButton(),this.hideHaButton(),this.hideHaTuDongButton(),this.hideUButton(),this.hideXepButton()},reset:function(){this.hideTableCard(),this.hideAllButtons()}}),cc._RF.pop()},{}],PhomUtil:[function(t,e,i){"use strict";cc._RF.push(e,"d80b0bEOztHw7qSo7tr9ZLm","PhomUtil");var o={checkCoPhom:function(t){var e=this.cloneCards(t),i=this.cloneCards(t);this.sortCardsASC(e),this.sortCardsTypeASC(i);for(var o=0;o<e.length-2;o++){var n=[];if(n.push(e[o]),n.push(e[o+1]),n.push(e[o+2]),this.checkPhomNgang(n))return!0}for(var s=0;s<i.length-2;s++){var a=[];if(a.push(i[s]),a.push(i[s+1]),a.push(i[s+2]),this.checkPhomDoc(a))return!0}return!1},checkCardAnValid:function(t,e){var i=this.cloneCards(e),o=this.cloneCards(e);this.sortCardsASC(i),this.sortCardsTypeASC(o);var n=!1,s=!1;if(0===t.length)return!0;for(var a=0;a<t.length;a++)for(var r=0;r<i.length-1;r++){var c=[];if(c.push(i[r]),c.push(i[r+1]),c.push(t[a]),this.checkPhomNgang(c)){var h=this.cloneCards(t);if(0===(h=this.removeCard(h,t[a])).length)return!0;var l=this.cloneCards(i);l=this.removeCards(l,c),n=this.checkCardAnValid(h,l)}}for(var u=0;u<t.length;u++)for(var d=0;d<o.length-1;d++){var m=[];if(m.push(o[d]),m.push(o[d+1]),m.push(t[u]),this.checkPhomDoc(m)){var p=this.cloneCards(t);if(0===(p=this.removeCard(p,t[u])).length)return!0;var f=this.cloneCards(o);f=this.removeCards(f,m),s=this.checkCardAnValid(p,f)}}return n||s},sortCards:function(t,e){t=this.cloneCards(t),this.sortCardsASC(t);for(var i=[],o=this.getMaxCardsData([],t,e),n=o.listPhom,s=o.cardsRemain,a=0;a<n.length;a++)for(var r=0;r<n[a].length;r++)i.push(n[a][r]);var c=this.sortCa([],s).cardsCa;return i=i.concat(c)},sortCa:function(t,e){var i=this.cloneCards(t),o=this.cloneCards(e);this.sortCardsASC(o);var n=this.getArrayCa(i,o);return i=n.cardsCa,(o=n.cardsRemain).length>0?this.sortCa(i,o):{cardsCa:i,cardsRemain:o}},getArrayCa:function(t,e){var i=this.cloneCards(t),o=this.cloneCards(e);this.sortCardsASC(o);for(var n=0;n<o.length;n++)for(var s=0;s<i.length;s++)if(this.checkCa(o[n],i[s])){i.push(o[n]),o.splice(n,1),n--;break}for(var a=!1,r=0;r<o.length-1&&!a;r++)for(var c=r+1;c<o.length;c++)if(this.checkCa(o[r],o[c])){i.push(o[r]),o.splice(r,1),a=!0;break}for(var h=0;h<o.length;h++)if(a){for(var l=0;l<i.length;l++)if(this.checkCa(o[h],i[l])){i.push(o[h]),o.splice(h,1),h--;break}}else i.push(o[h]),o.splice(h,1),h--;return{cardsCa:i,cardsRemain:o}},checkCa:function(t,e){return this.getValue(t)===this.getValue(e)||Math.abs(this.getValue(t)-this.getValue(e))<3&&this.getType(t)===this.getType(e)},getMaxCardsData:function(t,e,i){var o=this.cloneListPhom(t),n=this.cloneCards(e);this.sortCardsASC(n);var s=this.cloneCards(e);this.sortCardsTypeASC(s);var a=this.getScoreByCards(e),r=this.cloneListPhom(t),c=this.cloneCards(e);if(n.length>=3)for(var h=0;h<n.length-2;h++)for(var l=h+3;l<=n.length;l++){var u=this.cloneListPhom(o),d=this.cloneCards(n),m=d.slice(h,l);if(!this.checkPhomNgang(m))break;var p=this.cloneListPhom(u),f=this.cloneCards(d);p.push(m),f=this.removeCards(f,m);var g=this.getMaxCardsData(p,f,i);this.checkListPhomValid(g,i)&&g.maxScore<a&&(a=g.maxScore,r=g.listPhom,c=g.cardsRemain)}if(s.length>=3)for(var _=0;_<s.length-2;_++)for(var S=_+3;S<=s.length;S++){var C=this.cloneListPhom(o),N=this.cloneCards(s),E=(N=this.sortCardsTypeASC(N)).slice(_,S);if(!this.checkPhomDoc(E))break;var T=this.cloneListPhom(C),I=this.cloneCards(N);T.push(E),I=this.removeCards(I,E);var v=this.getMaxCardsData(T,I,i);this.checkListPhomValid(v,i)&&v.maxScore<a&&(a=v.maxScore,r=v.listPhom,c=v.cardsRemain)}return{maxScore:a,listPhom:r,cardsRemain:c}},checkListPhomValid:function(t,e){for(var i in e){var o=!1;for(var n in t.listPhom){var s=0;for(var a in t.listPhom[n])t.listPhom[n][a]===e[i]&&(s++,o=!0);if(s>1)return!1}if(!o)return!1}return!0},removeCard:function(t,e){return this.removeCards(t,[e])},removeCards:function(t,e){return t.filter(function(t){return-1==e.indexOf(t)})},checkPhom:function(t){return this.checkPhomNgang(t)||this.checkPhomDoc(t)},checkPhomNgang:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,o=0,n=0;n<e.length;n++)if(o++,0===i)i=e[n];else if(this.getValue(e[n])!==this.getValue(i))return!1;return o>=3},checkPhomDoc:function(t){var e=this.cloneCards(t);this.sortCardsTypeASC(e);for(var i=0,o=0,n=0;n<e.length;n++)if(o++,0===i)i=e[n];else{if(this.getValue(e[n])!==this.getValue(i)+1||this.getType(e[n])!==this.getType(i))return!1;i=e[n]}return o>=3},getScoreByCards:function(t){for(var e=0,i=0;i<t.length;i++)e+=this.getValue(t[i]);return e},sortCardsASC:function(t){return t.length>1?t.sort(function(t,e){return t-e}):t},sortCardsTypeASC:function(t){if(t.length>1){var e=this;return t.sort(function(t,i){return e.getValue(t)+100*e.getType(t)-(e.getValue(i)+100*e.getType(i))})}return t},cloneListPhom:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.cloneCards(t[i]));return e},cloneCards:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e},getValue:function(t){return parseInt(t/100)},getType:function(t){return t%4},arrayDiff:function(t,e){for(var i=[],o=[],n=0;n<t.length;n++)i[t[n]]=!0;for(var s=0;s<e.length;s++)i[e[s]]?delete i[e[s]]:i[e[s]]=!0;for(var a in i)o.push(a);return o}};e.exports=o,cc._RF.pop()},{}],PhomWinType:[function(t,e,i){"use strict";cc._RF.push(e,"e7c16m7CjxIu6OQjrlMZHut","PhomWinType");e.exports={KHONG_U:"KHONG_U",TINH_DIEM:"TINH_DIEM",U:"U",U_KHAN:"U_KHAN",U_TRON:"U_TRON",U_DEN:"U_DEN",U_TRON_DEN:"U_TRON_DEN"},cc._RF.pop()},{}],Phom:[function(t,e,i){"use strict";cc._RF.push(e,"2eb98yZ+Z9Psr5xqaQxfV4n","Phom");var o=t("../../base/BaseController"),n=t("./PhomConstant"),s=t("./PhomConfig"),a=t("./PhomUI"),r=t("./PhomState"),c=t("./PhomHandlerRequest"),h=t("./PhomHandlerEffect"),l=t("./PhomWinType"),u=t("../../prefab/GameCommon"),d=t("../../object/RoomType"),m=t("../../helper/Constant"),p=t("../../helper/Message");cc.Class({extends:o,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,tableCardsNode:cc.Node,myCardsNode:cc.Node,PhomUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_PHOM),this.sfsManager.setController(this),this.myPlayer=null,this.myPosition=0,this.idPlaying=-1,this.isBocBai=!1,this.isHa=!1,this.isGui=!1,this.isChotHa=!1,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==d.MONEY_CODE,this.playersNode=this.PhomUI.playersNode,this.isMoneyType||this.PhomUI.disableAllPlaceHolder(),this.PhomConstant=n,this.PhomConfig=s,this.PhomState=r,this.PhomHandlerRequest=c,this.PhomHandlerRequest.init(this),this.PhomHandlerEffect=h,this.PhomHandlerEffect.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.PhomHandlerRequest.onPublicMessage.bind(this.PhomHandlerRequest),this.onRoomVarsUpdate=this.PhomHandlerRequest.onRoomVarsUpdate.bind(this.PhomHandlerRequest),this.onUserVarsUpdate=this.PhomHandlerRequest.onUserVarsUpdate.bind(this.PhomHandlerRequest),this.onResponse=this.PhomHandlerRequest.onResponse.bind(this.PhomHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners(),this.clearAllTimeout()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){for(var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value,s=0;s<this.playersNode.length;s++){var a=this.playersNode[s];a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a)}this.PhomUI.hideAllPlayers(),this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i=0;i<t.length;i++)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e=0;e<t.length;e++)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;if((i-=this.myPosition)<0)i+=this.isRoomSolo()?s.NUMBER_SOLO_PLAYERS:s.NUMBER_PLAYERS;t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("PhomPlayer");t.BasePlayer=o,t.PhomPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRequestLeftRoom(t.request_left_room),o.setRoomMaster(!1),o.setPlayerName(t.nick_name),o.setBalance(t.balance),n.setChotHa(t.is_chot_ha),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.PhomState.setState(e),this.PhomState.isStop()?this.reset():this.PhomState.isWaiting()?this.resumeStateWaiting(t):this.PhomState.isPlaying()?this.resumeStatePlaying(t):this.PhomState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.PhomHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.number_table_cards;this.PhomUI.showTableCard(e),this.PhomHandlerEffect.handlePlayingPlayer(t),this.PhomHandlerEffect.resumeCards(t)},resumeStateFinish:function(t){this.PhomHandlerEffect.resumeCards(t),this.PhomHandlerEffect.handleResult(t.data.result,!1)},initTempRequests:function(){for(var t=this.getTempRequests(),e=0;e<t.length;e++)this.PhomHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.PhomState.setWaiting(),this.GameCommon.hideWaitingNode(),this.PhomHandlerEffect.startCountDownAllPlayers(t)):(this.PhomState.setStop(),this.PhomHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){var e=t.data.cards,i=t.data.number_table_cards;this.PhomState.setPlaying(),this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.dealCards(e),this.PhomUI.showTableCard(i),this.PhomHandlerEffect.handlePlayingPlayer(t),this.PhomHandlerEffect.handleStartGame(t)},handleDanhBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handlePlayedPlayer(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleBocBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleBocBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleAnBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleAnBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleHaBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleHaBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleGuiBai:function(t){this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomHandlerEffect.handleGuiBai(t),this.PhomHandlerEffect.handlePlayingPlayer(t)},handleResult:function(t){var e=t.data.win_type;this.PhomState.setFinish(),this.PhomHandlerEffect.stopCountDownAllPlayers(),this.PhomUI.hideAllButtons(),e===l.U_KHAN?this.timeoutResult=setTimeout(function(){this.PhomHandlerEffect.handleResult(t)}.bind(this),2e3):this.PhomHandlerEffect.handleResult(t),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.PhomState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){for(var e=t.data.players,i=0;i<e.length;i++)this.removePlayerByUserId(e[i])},handlePlayersLeftRoomWithChangeHome:function(t){var e=t.data.user_id_home_player,i=this.getPlayerByUserId(e);i&&i.BasePlayer.setRoomMaster(!0),this.handlerPlayersLeftRoom(t)},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.PhomHandlerEffect.clearRequestLeftRoomAllPlayers();for(var i=!1,o=t.data.players,n=0;n<o.length;n++){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(p.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(p.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onXepClick:function(){this.GameCommon.Audio.playClick(),this.PhomHandlerEffect.sort()},onAnClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.AN_BAI)},onBocClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.BOC_BAI)},onUClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.U)},onHaClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected();if(t.length>=3){var e={},i=[];for(var o in t)i.push(t[o].trueValue);e.cards=i,this.sendRequest.send(n.HA_BAI,e)}else this.showToast(p.PHOM_PLEASE_SELECT_CARDS_HA)},onHaTuDongClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.AUTO_HA_BAI)},onGuiClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected();if(1===t.length){var e={};e.card=t[0].trueValue,this.sendRequest.send(n.GUI_BAI,e)}else this.showToast(p.PHOM_SELECT_ONE_CARD)},onDanhClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected();if(this.PhomUI.isShowBocButton())this.showToast(p.PHOM_PLEASE_BOC_BAI);else if(1===t.length){var e={};e.card=t[0].trueValue,this.sendRequest.send(n.DANH_BAI,e)}else this.showToast(p.PHOM_SELECT_ONE_CARD)},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},isRoomSolo:function(){return this.getLastJoinedRoom().maxUsers===s.NUMBER_SOLO_PLAYERS},getMyCardsByPlayersCards:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].user_id===this.getSFSMySelf().variables.user_id.value)return t[e].cards},getLeftNearestNode:function(t){for(var e=this.myCardsNode.getChildren(),i=0,o=null,n=0;n<e.length;n++)e[n]!=t&&t.x-e[n].x>0&&(0===i?(i=t.x-e[n].x,o=e[n]):t.x-e[n].x<i&&(i=t.x-e[n].x,o=e[n]));return o},getListCardsSelected:function(){for(var t=this.myCardsNode.getChildren(),e=[],i=0;i<t.length;i++)t[i].phomCardController.isSelected&&e.push(t[i]);return e},getCardsNodeByCard:function(t){for(var e=this.myCardsNode.getChildren(),i=0;i<e.length;i++)if(e[i].trueValue===t)return e[i];return null},getCardsNodeByCards:function(t){for(var e=this.myCardsNode.getChildren(),i=[],o=0;o<e.length;o++)for(var n in t)if(e[o].trueValue===t[n]){i.push(e[o]);break}return i},checkIsMyTurn:function(){return this.idPlaying===this.getSFSMySelf().variables.user_id.value},getFirstPlayer:function(){for(var t=0;t<this.listPlayers.length;t++)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e=0;e<this.listPlayers.length;e++)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e=0;e<this.listPlayers.length;e++)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e=0;e<this.listPlayers.length;e++)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){clearTimeout(this.timeoutResult),this.PhomHandlerEffect.clearAllTimeout()},reset:function(){this.idPlaying=-1,this.isBocBai=!1,this.isHa=!1,this.isGui=!1,this.isChotHa=!1,this.PhomUI.reset(),this.PhomHandlerEffect.reset(),this.clearAllTimeout(),this.myCardsNode.removeAllChildren(!0),this.tableCardsNode.removeAllChildren(!0);for(var t=0;t<this.listPlayers.length;t++)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].PhomPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./PhomConfig":"PhomConfig","./PhomConstant":"PhomConstant","./PhomHandlerEffect":"PhomHandlerEffect","./PhomHandlerRequest":"PhomHandlerRequest","./PhomState":"PhomState","./PhomUI":"PhomUI","./PhomWinType":"PhomWinType"}],PirateConstant:[function(t,e,i){"use strict";cc._RF.push(e,"79a53tGVshBqbacUUjzEWJN","PirateConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"diamond2.ADD_EVENT",REMOVE_EVENT:"diamond2.REMOVE_EVENT",SPIN:"diamond2.SPIN",IS_SHOW:"diamond2_is_show",POSITION:"diamond2_position",LIST_LINES:"diamond2_list",IS_AUTO_SPIN:"diamond2_auto_spin",BET_VALUE:"diamond2_bet_value",BET_100:100,BET_1k:1e3,BET_10k:1e4,MONEY_TYPE:"diamond2_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"diamond2.GET_TOP",MINIGAME_CONFIG_ID:41,PRIVATE_LIST_ICON:["A","B","C","D","E","W"]},cc._RF.pop()},{}],PirateHistories:[function(t,e,i){"use strict";cc._RF.push(e,"aad31i/9lpA6qJ5UwUv6BSi","PirateHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyDiamondItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryDiamond2(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyDiamondItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("DiamondHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],PirateItem:[function(t,e,i){"use strict";cc._RF.push(e,"36ae5UFHlVLC7bDOognoD0D","PirateItem"),cc.Class({extends:cc.Component,properties:{iconWNode:cc.Node,iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),t){case"W":this.iconWNode.active=!0;break;case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0}},reset:function(){this.iconWNode.active=!1,this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1}}),cc._RF.pop()},{}],PirateLine:[function(t,e,i){"use strict";cc._RF.push(e,"65da7MlODBGcrEgW+1hHyfq","PirateLine");var o=t("../item/PirateNumberLineItem");cc.Class({extends:cc.Component,properties:{listNumberLineItem:[o],listLine:[cc.Node]},init:function(t){for(var e in this.Pirate=t,this.PirateSelectForm=t.PirateSelectForm,this.listNumberLineItem)this.listNumberLineItem[e].init(this)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in this.listLine)for(var i in t)if(e==t[i].line-1){this.listLine[e].active=!0;break}},showLine:function(t){for(var e in this.listLine)this.listLine[e].active=parseInt(t)-1==e},initNumberLine:function(){var t=0;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t++;this.Pirate.numberLineLabel.string=t+" D\xd2NG"},getLineData:function(){var t=[];for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t.push(parseInt(e)+1);return t},select:function(t){this.listNumberLineItem[t-1].select()},unSelect:function(t){this.listNumberLineItem[t-1].unSelect()},getListLines:function(){var t=[];for(var e in this.listNumberLineItem)this.listNumberLineItem[e].isSelected&&t.push(parseInt(e)+1);return t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1}}),cc._RF.pop()},{"../item/PirateNumberLineItem":"PirateNumberLineItem"}],PirateNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"1898eHpdPVGZYk1kwZdSfUG","PirateNumberLineItem");var o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{numberLine:0,bgSprite:cc.Sprite,bgDefaultSpriteFrame:cc.SpriteFrame,bgSelectedSpriteFrame:cc.SpriteFrame,bgHoverSpriteFrame:cc.SpriteFrame},init:function(t){this.PirateLine=t,this.Pirate=t.Pirate,this.PirateSelectForm=t.PirateSelectForm,this.line=this.numberLine,this.isSelected=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.bgSprite.spriteFrame=t.bgHoverSpriteFrame,t.PirateLine.showLine(t.line)},this.onMouseLeave=function(){t.bgSprite.spriteFrame=t.isSelected?t.bgSelectedSpriteFrame:t.bgDefaultSpriteFrame,t.PirateLine.showLine(0)},this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Pirate.isSpinning()||this.Pirate.isAutoSpin()?this.Pirate.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET):(this.isSelected=!this.isSelected,this.isSelected?this.PirateSelectForm.select(this.line):this.PirateSelectForm.unSelect(this.line),this.Pirate.saveListLines())},select:function(){this.isSelected=!0,this.bgSprite.spriteFrame=this.bgSelectedSpriteFrame,this.PirateLine.initNumberLine()},unSelect:function(){this.isSelected=!1,this.bgSprite.spriteFrame=this.bgDefaultSpriteFrame,this.PirateLine.initNumberLine()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],PirateReel:[function(t,e,i){"use strict";cc._RF.push(e,"18d0avtdm5Hda+JhS+Ckn5U","PirateReel");var o=t("../../../util/RandomUtil"),n=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./PirateConstant");cc.Class({extends:cc.Component,properties:{pirateItemPrefab:cc.Prefab},init:function(t){this.Pirate=t,this.PirateUI=t.PirateUI,this.PirateLine=t.PirateLine,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.pirateItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,o,a,r,c){this.reset(),this.setChips(this.chips),this.chips=t;for(var h=1;h<e;h++){var l=this.getRandomChip();h===e-1&&(l=t[0]),h===e-2&&(l=t[1]),h===e-3&&(l=t[2]);var u=this.instanceChip(l);u.setPosition(0,(h+1)*n.PIRATE_DISTANCE_TWO_CHIPS),u.parent=this.node}var d=(e-1)*n.PIRATE_DISTANCE_TWO_CHIPS,m=d/n.PIRATE_SPEED_SPIN_CARD,p=cc.moveTo(m,this.node.x,-d).easing(cc.easeInOut(3)),f=cc.callFunc(function(){this.setChips(t),i&&this.Pirate.node.active&&(r===s.WIN_TYPE_JACKPOT?this.PirateUI.showJackPot(o,c):a&&this.MiniGameResult.show(o),this.PirateLine.showLines(a))},this),g=cc.delayTime(n.PIRATE_DELAY_SPIN),_=cc.callFunc(function(){i&&this.Pirate.node.active&&this.Pirate.isAutoSpin()&&this.Pirate.spin()},this);this.node.runAction(cc.sequence(p,f,g,_)),r!==s.WIN_TYPE_JACKPOT||this.Pirate.node.active||(this.Pirate.node.active=!0,this.PirateUI.showJackPot(o,c))},randomChips:function(){for(var t=[],e=0;e<n.PIRATE_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=o.getRandomInt(0,a.PRIVATE_LIST_ICON.length-1);return a.PRIVATE_LIST_ICON[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*n.PIRATE_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.pirateItemPrefab)),e.getComponent("PirateItem").init(t),e.scale=n.PIRATE_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.PirateLine.reset(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./PirateConstant":"PirateConstant"}],PirateSelectForm:[function(t,e,i){"use strict";cc._RF.push(e,"39dd3YyUL9Ks5m6uV+zDzMc","PirateSelectForm");var o=t("../item/PirateSelectItem"),n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{listSelectItem:[o]},init:function(t){for(var e in this.Pirate=t,this.PirateLine=t.PirateLine,this.listSelectItem)this.listSelectItem[e].init(this,parseInt(e)+1)},onLoad:function(){},initData:function(){},select:function(t){this.listSelectItem[t-1].select()},unSelect:function(t){this.listSelectItem[t-1].unSelect()},onCloseClick:function(){this.node.active=!1},onIgnoreAllClick:function(){if(this.Pirate.isSpinning()||this.Pirate.isAutoSpin())this.Pirate.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].unSelect(),this.PirateLine.unSelect(parseInt(t)+1);this.Pirate.saveListLines()}},onSelectAllClick:function(){if(this.Pirate.isSpinning()||this.Pirate.isAutoSpin())this.Pirate.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)this.listSelectItem[t].select(),this.PirateLine.select(parseInt(t)+1);this.Pirate.saveListLines()}},onSelectEvenClick:function(){if(this.Pirate.isSpinning()||this.Pirate.isAutoSpin())this.Pirate.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].select(),this.PirateLine.select(parseInt(t)+1)):(this.listSelectItem[t].unSelect(),this.PirateLine.unSelect(parseInt(t)+1));this.Pirate.saveListLines()}},onSelectOddClick:function(){if(this.Pirate.isSpinning()||this.Pirate.isAutoSpin())this.Pirate.controller.showToast(n.AUTO_SPIN_NOT_CHANGE_BET);else{for(var t in this.listSelectItem)(parseInt(t)+1)%2==0?(this.listSelectItem[t].unSelect(),this.PirateLine.unSelect(parseInt(t)+1)):(this.listSelectItem[t].select(),this.PirateLine.select(parseInt(t)+1));this.Pirate.saveListLines()}}}),cc._RF.pop()},{"../../../helper/Message":"Message","../item/PirateSelectItem":"PirateSelectItem"}],PirateSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"ad41d4Sz2RBLaAX0+k7inIT","PirateSelectItem");var o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{pirateSprite:cc.Sprite,pirateOnSpriteFrame:cc.SpriteFrame,pirateOffSpriteFrame:cc.SpriteFrame},init:function(t,e){this.PirateSelectForm=t,this.Pirate=t.Pirate,this.PirateLine=t.PirateLine,this.line=e,this.isSelected=!1},onLoad:function(){var t=this;this.onMouseEnter=function(){t.pirateSprite.spriteFrame=t.pirateOnSpriteFrame},this.onMouseLeave=function(){t.pirateSprite.spriteFrame=t.isSelected?t.pirateOnSpriteFrame:t.pirateOffSpriteFrame},this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Pirate.isSpinning()||this.Pirate.isAutoSpin()?this.Pirate.controller.showToast(o.AUTO_SPIN_NOT_CHANGE_BET):(this.isSelected=!this.isSelected,this.isSelected?this.PirateLine.select(this.line):this.PirateLine.unSelect(this.line),this.Pirate.saveListLines())},select:function(){this.isSelected=!0,this.pirateSprite.spriteFrame=this.pirateOnSpriteFrame,this.PirateLine.initNumberLine()},unSelect:function(){this.isSelected=!1,this.pirateSprite.spriteFrame=this.pirateOffSpriteFrame,this.PirateLine.initNumberLine()}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],PirateUI:[function(t,e,i){"use strict";cc._RF.push(e,"55ea1Tnr0hEqrgxukFRRjIT","PirateUI");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOn1Sprite:cc.Sprite,betOn2Sprite:cc.Sprite,betOn3Sprite:cc.Sprite,betMoneySpriteFrame:cc.SpriteFrame,betGoldSpriteFrame:cc.SpriteFrame,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?(this.setBetMoney(),this.betOn1Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn2Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn3Sprite.spriteFrame=this.betMoneySpriteFrame):(this.setBetGold(),this.betOn1Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn2Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn3Sprite.spriteFrame=this.betGoldSpriteFrame)},setBetMoney:function(){var t=n.PIRATE_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=n.PIRATE_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=o.nFormatter(t),this.bet2Label.string=o.nFormatter(e),this.bet3Label.string=o.nFormatter(i)},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil"}],Pirate:[function(t,e,i){"use strict";cc._RF.push(e,"0662aUFGOBL0axmSD5s9ojo","Pirate");var o=t("../../../base/BaseController"),n=t("./PirateLine"),s=t("./PirateSelectForm"),a=t("./PirateUI"),r=t("./PirateConstant"),c=t("./PirateReel"),h=t("../MiniGameResult"),l=t("../item/JackpotItem"),u=t("../../../helper/Config"),d=t("../../../helper/Constant"),m=t("../../../helper/Message"),p=t("../../../object/RoomType"),f=t("../MiniGameConstant"),g=t("../item/MiniGameXPer");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:l,toastPrefab:cc.Prefab,numberLineLabel:cc.Label,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,diamonFormNode:cc.Node,reels:[c],PirateLine:n,PirateSelectForm:s,PirateUI:a,MiniGameResult:h,MiniGameXPer:g},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.betOrder=0,this.intervalSpin=null,this.reels)this.reels[t].init(this);this.PirateLine.init(this),this.PirateSelectForm.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(r.ADD_EVENT)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(r.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,o=t[e].quantity;i===r.MINIGAME_CONFIG_ID&&(o>0?this.PirateUI.showMiniGameSpinFree(o):this.PirateUI.hideMiniGameSpinFree())}},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[r.MONEY_TYPE]===r.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){var t=this.getTempData(),e=this.getUser().diamond_free,i=t[r.IS_AUTO_SPIN],o=t[r.BET_VALUE];switch(i&&this.onAutoSpinClick(),o){case r.BET_100:this.setBet1();break;case r.BET_1k:this.setBet2();break;case r.BET_10k:this.setBet3()}this.initMiniGameNotification(i,e)},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationDiamond2(!0,e):this.MiniGameCircleNotification.initShowNotificationDiamond2(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationDiamond2(!1,""))},initSaveData:function(){var t=cc.sys.localStorage.getItem(r.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y);var e=cc.sys.localStorage.getItem(r.LIST_LINES);for(var i in e=e?JSON.parse(e):[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])this.PirateLine.select(parseInt(e[i])),this.PirateSelectForm.select(parseInt(e[i]))},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case r.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i),this.controller.EventGame&&this.controller.EventGame.initDataTop(i);break;case r.REQUEST_INFO:this.handleInfo(i);break;case r.REQUEST_SPIN:this.handleSpin(i);break;case r.REQUEST_MESSAGE:this.handleMessage(o)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onStopAutoSpinClick()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,o=t.total_prize_value,n=t.win_type,s=t.money_type,a=t.spin_id,r=s==p.MONEY_CODE;this.idLabel.string=String.format(m.MINIGAME_ID,a),this.spinReels(i,o,e,n,r)},spinReels:function(t,e,i,o,n){for(var s=[],a=[],r=[],c=0;c<t.length;c++)switch(c%u.PIRATE_NUMBER_REELS){case 0:s.push(t[c]);break;case 1:a.push(t[c]);break;case 2:r.push(t[c])}this.reels[0].spin(s,u.PIRATE_NUMBER_CHIP_SPIN),this.reels[1].spin(a,u.PIRATE_NUMBER_CHIP_SPIN+3),this.reels[2].spin(r,u.PIRATE_NUMBER_CHIP_SPIN+6,!0,e,i,o,n)},onAutoSpinClick:function(){this.PirateLine.getLineData().length>0?(this.autoSpinButtonNode.active=!1,this.stopAutoSpinButtonNode.active=!0,this.spinButtonNode.active=!1,this.getTempData()[r.IS_AUTO_SPIN]=!0,this.spin()):this.showMessage(m.PIRATE_NO_LINE_SELECTED)},onStopAutoSpinClick:function(){this.PirateLine.getLineData().length>0?(this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.getTempData()[r.IS_AUTO_SPIN]=!1):this.showMessage(m.PIRATE_NO_LINE_SELECTED)},onSpinClick:function(){this.isSpinning()?this.showMessage(m.SPIN_TOO_FAST):this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t=this.PirateLine.getLineData();if(t.length>0){var e={money_type:this.isMoneyType?p.MONEY_CODE:p.GOLD_CODE,money_value:this.getCurrentBet(),line_data:t};this.sendRequest.sendNoPrefixToZone(r.SPIN,e),this.MiniGameResult.reset()}else this.showMessage(m.PIRATE_NO_LINE_SELECTED)}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(d.DIAMOND_2)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showPirateHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(f.DIAMOND_2_2),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowPirate(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.PirateUI.enableBet1Button(),this.getTempData()[r.BET_VALUE]=r.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.PirateUI.enableBet2Button(),this.getTempData()[r.BET_VALUE]=r.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(m.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.PirateUI.enableBet3Button(),this.getTempData()[r.BET_VALUE]=r.BET_10k},onPirateClick:function(){this.setShowPirate(!this.isShow)},onShowDiamonFormClick:function(){this.diamonFormNode.active=!0},setShowPirate:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().Pirate_free;cc.sys.localStorage.setItem(r.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),1e3*u.PIRATE_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=u.MINIGAME_SCALE_TOAST,e.setPosition(u.MINIGAME_POSITION_TOAST_X,u.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.PirateUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?r.MONEY_TYPE_MONEY:r.MONEY_TYPE_GOLD;this.getTempData()[r.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?u.PIRATE_LIST_BET_MONEY:u.PIRATE_LIST_BET_GOLD)[this.betOrder]},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0},isAutoSpin:function(){return this.stopAutoSpinButtonNode.active},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},saveListLines:function(){var t=this.PirateLine.getListLines();cc.sys.localStorage.setItem(r.LIST_LINES,JSON.stringify(t))},reset:function(){this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./PirateConstant":"PirateConstant","./PirateLine":"PirateLine","./PirateReel":"PirateReel","./PirateSelectForm":"PirateSelectForm","./PirateUI":"PirateUI"}],PlasticityPositionType:[function(t,e,i){"use strict";cc._RF.push(e,"d096fGDKbZE/496bkCmgIn6","PlasticityPositionType");e.exports={NO:0,TOP:1,BOTTOM:2,LEFT:3,RIGHT:4},cc._RF.pop()},{}],PlayHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"f9907hg641KIq7nVtlLFbeL","PlayHistoryItem");var o=t("../../util/FormatUtil"),n=t("../../util/Util"),s=t("../../helper/Config"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.playBalanceLabel.string=o.numberWithCommas(t.money_change),this.remainBalanceLabel.string=o.numberWithCommas(t.balance);var i=t.content||"",r=t.game_name||"";i.length>s.MAX_LENGTH_CONTENT&&(i=i.substring(0,s.MAX_LENGTH_CONTENT-3)+"...",i=o.replaceContent(i,a.OLD_MONEY_1,a.NEW_MONEY),i=o.replaceContent(i,a.OLD_MONEY_2,a.NEW_MONEY),i=o.replaceContent(i,a.OLD_MONEY_3,a.NEW_MONEY),i=o.replaceContent(i,a.OLD_MONEY_4,a.NEW_MONEY)),r.length>s.MAX_LENGTH_CONTENT-3&&(r=r.substring(0,s.MAX_LENGTH_CONTENT-10)+"..."),r=o.replaceContent(r,a.OLD_MONEY_1,a.NEW_MONEY),r=o.replaceContent(r,a.OLD_MONEY_2,a.NEW_MONEY),r=o.replaceContent(r,a.OLD_MONEY_3,a.NEW_MONEY),r=o.replaceContent(r,a.OLD_MONEY_4,a.NEW_MONEY),this.noteLabel.string=i,this.nameLabel.string=n.getNameByGameName(r);var c=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=c},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],PlayerInfo:[function(t,e,i){"use strict";cc._RF.push(e,"b25acuzdNlKx5z8xXOlmwMa","PlayerInfo");var o=t("../../helper/Message"),n=t("../../helper/Constant"),s=t("../../util/FormatUtil"),a=function(t){this.game_short_name=t,this.win=0,this.republic=0,this.lost=0,this.best_money_win=0};cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label,loadingNode:cc.Node,listScrollView:cc.ScrollView,gameAchivementItemPrefab:cc.Prefab},init:function(t){this.controller=t},onLoad:function(){this.defaultSpriteFrame=this.avatarSprite.spriteFrame,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.avatarSprite.spriteFrame=this.defaultSpriteFrame,cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.removeXhr()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},show:function(t){var e=this;this.reset(),this.showLoadingNode();var i={token:this.controller.getToken(),user_id:t};this.controller.api.getPlayerInfo(i,function(t){e.data=t.data,e.initData()},function(t){e.showListNode(),e.controller.showDialogMessage(o.PLAYER_INFO_TITLE,t.msg)})},initData:function(){if(this.showListNode(),this.data){var t=this.data.info,e=this.data.list;this.setAvatar(t.avatar),this.nameLabel.string=t.nick_name;var i=[];i.push(new a(n.BA_CAY)),i.push(new a(n.LIENG)),i.push(new a(n.MAU_BINH)),i.push(new a(n.POKER)),i.push(new a(n.XOC_DIA)),i.push(new a(n.SAM)),i.push(new a(n.SAMSOLO)),i.push(new a(n.TLMN)),i.push(new a(n.TLMNSOLO));for(var o=0;o<i.length;o++)this.initDataItem(i[o],e)}},initDataItem:function(t,e){if(e)for(var i=0;i<e.length;i++)e[i].game_short_name===t.game_short_name&&(t=e[i]);var o=cc.instantiate(this.gameAchivementItemPrefab);o.parent=this.listScrollView.content,o.getComponent("GameAchivementItem").init(t)},setAvatar:function(t){var e=this;(t=s.convertUrlToLocation(t))&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},reset:function(){this.nameLabel.string="",this.listScrollView.content.getChildren().length>0&&(this.listScrollView.content.removeAllChildren(!0),this.listScrollView.stopAutoScroll(),this.listScrollView.scrollToTop())},showLoadingNode:function(){this.loadingNode.active=!0,this.listScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.listScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],PlayerInvite:[function(t,e,i){"use strict";cc._RF.push(e,"17e39TMQWFOsr+oSPhEHQcu","PlayerInvite");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../util/Util"),a=t("../../../util/FormatUtil"),r=t("../../../object/RoomType");cc.Class({extends:cc.Component,init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},properties:{contentRichText:cc.RichText,inviteToggle:cc.Toggle},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},initData:function(t){this.data=t;var e=s.getGameNameByRoomName(t.game_name),i=a.numberWithCommas(t.min_bet),o=t.nick_name,r=s.getRoomTypeByRoomTypeCode(t.room_type+"");this.contentRichText.string=String.format(n.INVITE_MESSAGE,o,e,i,r),this.inviteToggle.isChecked=!0},onInviteToggle:function(){var t={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.updateInviteGame(t,function(t){},function(t){}),this.GameCenter.getUser().invite_on=1==this.GameCenter.getUser().invite_on?0:1},onCancelClick:function(){this.GameCenter.Audio.playClick(),this.dialogForm.hideDialog()},onConfirmClick:function(){if(this.GameCenter.Audio.playClick(),this.data.is_buy_in)this.initBuyInForm(),this.GameCenterUI.showBuyInFormNode();else{var t={room_name:this.data.room_name};this.GameCenter.sendRequest.sendNoPrefixToZone(o.REQUEST_ACCEPT_INVITE,t)}this.saveInvite(),this.dialogForm.hideDialog()},initBuyInForm:function(){var t=this.data.game_name,e=this.data.min_bet,i=this.GameCenter.BuyInForm,c=0;this.data.room_type==r.GOLD_CODE?c=this.GameCenter.getGold():this.data.room_type==r.MONEY_CODE&&(c=this.GameCenter.getMoney());var h=this.getGameDataByGameList(t),l=h[o.MIN_BUY]*e,u=h[o.MAX_BUY]*e,d=s.getRoomTypeByRoomTypeCode(this.data.room_type);if(l>c){var m=String.format(n.NOT_ENOUGH_MONEY_TO_JOIN_GAME,a.numberWithCommas(l),d);this.GameCenter.showDialogMessage(n.JOIN_ROOM_TITLE,m)}else u>c&&(u=c),i.setInvite(!0),i.initDataInvite(this.data),i.setRound(e),i.setMinValue(l),i.setMaxValue(u),this.GameCenterUI.showBuyInFormNode()},getGameDataByGameList:function(t){var e=this.GameCenter.getConfig().list_game;for(var i in e)if(e[i][o.SHORT_NAME]===t)return e[i]},saveInvite:function(){if(!this.inviteToggle.isChecked){var t={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.api.updateInviteGame(t,function(t){},function(t){}),this.GameCenter.getUser().invite_on=1==this.GameCenter.getUser().invite_on?0:1}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],PlayerOnlineItem:[function(t,e,i){"use strict";cc._RF.push(e,"97a92qpC6VNI6MSnccS5KID","PlayerOnlineItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nameLabel:cc.Label},onLoad:function(){},init:function(t,e){this.setNickname(t),this.setAvatar(e)},setNickname:function(t){this.nameLabel.string=t},setAvatar:function(t){var e=this;(t=o.convertUrlToLocation(t))&&cc.loader.load(t,function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],PokerBetState:[function(t,e,i){"use strict";cc._RF.push(e,"6db845IwhJEmbVltqCXSmXN","PokerBetState");e.exports={NO:"NO",CHECK:"CHECK",CALL:"CALL",RAISE:"RAISE",ALL_IN:"ALL_IN",FOLD:"FOLD"},cc._RF.pop()},{}],PokerCard:[function(t,e,i){"use strict";cc._RF.push(e,"92b86eAQmpD5qd/8mauG98o","PokerCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],PokerConfig:[function(t,e,i){"use strict";cc._RF.push(e,"69ddbQHtfFEpa1vA+Vxdvfa","PokerConfig");e.exports={NUMBER_CARDS_EACH_PLAYERS:2,NUMBER_CARDS_TABLE:5,NUMBER_PLAYERS:6,SCALE_CARD:.7,DISTANCE_TWO_CARDS:45,TIME_SHOW_CARDS:.5,POSITION_CARDS_DEALDER_X:0,POSITION_CARDS_DEALDER_Y:150,SCALE_CARD_DEALDER:.7,SCALE_CARD_IN_TABLE:.85,TIME_SHOW_TABLE_CARDS:.5,DISTANCE_TWO_CARDS_TABLE:95,POSITION_CENTER_MONEY_X:0,POSITION_CENTER_MONEY_Y:75,TIME_MOVE_BALANCE_CENTER:.5,POSITION_PLAYER_RESULT_X:115,POSITION_PLAYER_RESULT_Y:-75},cc._RF.pop()},{}],PokerConstant:[function(t,e,i){"use strict";cc._RF.push(e,"9b2644o8ehGGrFHNEphDI2k","PokerConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",PLAYER_PLAY:"PLAYER_PLAY",PLAYER_BET:"PLAYER_BET",BUY_IN:"BUY_IN",RESULT:"RESULT",BET:"BET",FLOP:"FLOP",TURN:"TURN",RIVER:"RIVER",FOLD:"FOLD",CHECK:"CHECK",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER",REQUEST_CHECK:"REQUEST_CHECK",REQUEST_ALL_IN:"REQUEST_ALL_IN",REQUEST_CALL:"REQUEST_CALL",REQUEST_FOLD:"REQUEST_FOLD",REQUEST_RAISE:"REQUEST_RAISE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_IN:"REQUEST_BUY_IN"},cc._RF.pop()},{}],PokerGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"1416e229idE8KRwUx8cYckk","PokerGroupCardsType");e.exports={KHONG_HOP_LE:"KHONG_HOP_LE",THUNG_PHA_SANH_LON:"THUNG_PHA_SANH_LON",THUNG_PHA_SANH:"THUNG_PHA_SANH",TU_QUY:"TU_QUY",CU_LU:"CU_LU",THUNG:"THUNG",SANH_DAI:"SANH_DAI",SANH_NHI:"SANH_NHI",SANH_THUONG:"SANH_THUONG",SAM:"SAM",THU:"THU",DOI:"DOI",BAI_CAO:"BAI_CAO"},cc._RF.pop()},{}],PokerHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"1dc8fBS1rxMMakKyDAJoQH/","PokerHandlerEffect");var o=t("./PokerConfig"),n=t("./PokerBetState"),s=t("./PokerCard"),a=t("../../helper/Message"),r={init:function(t){this.Poker=t,this.PokerUI=t.PokerUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers,this.timeoutResult=null},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.listPlayers[e].PokerPlayer.showCards(t,!0):this.listPlayers[e].PokerPlayer.showBackCards(!0)},startGame:function(t){this.PokerUI.hideAllButtons();var e=t.data.big_blind,i=e.user_id,o=e.bet_amount_round,n=this.Poker.getPlayerByUserId(i);n&&n.BasePlayer.showBetNode(o);var s=t.data.small_blind,a=s.user_id,r=s.bet_amount_round,c=this.Poker.getPlayerByUserId(a);c&&c.BasePlayer.showBetNode(r),this.PokerUI.showTotalChip(0)},handlePlayingPlayer:function(t){this.stopCountDownAllPlayers();var e=t.data.playing_player||t.data,i=e.user_id,o=e.balance,n=e.min_bet,s=this.Poker.getPlayerByUserId(i);s&&(s.isItMe?(this.PokerUI.showAllButtons(),this.displayButtons(o,n),n>0?this.GameCommon.setMinMaxBetForm(n,o):this.GameCommon.setMinMaxBetForm(this.Poker.minBet,o)):this.PokerUI.hideAllButtons(),this.Poker.startCountDownPlayer(s,t.time_remain,t.time))},showFirstResponseTableCards:function(t){var e=t.data.cards;for(var i in e){var n=cc.instantiate(this.Poker.cardPrefab);n.setPosition(o.POSITION_CARDS_DEALDER_X,o.POSITION_CARDS_DEALDER_Y),n.scale=o.SCALE_CARD_DEALDER,n.parent=this.Poker.tableCardNode;var a=n.getComponent("CardController"),r=new s(e[i]);n.trueValue=e[i],a.init(r),a.revealWithAnimationFlipMoveScale(!0,o.TIME_SHOW_TABLE_CARDS,(i-2)*o.DISTANCE_TWO_CARDS_TABLE,0,o.SCALE_CARD_IN_TABLE)}},showEffectCollectMoney:function(t){var e=t.data.bet_amount;this.PokerUI.showTotalChip(e);for(var i=0,o=this.listPlayers.length;i<o;i++)this.listPlayers[i].PokerPlayer.moveToCenterTable()},showCards:function(t,e){var i=t.data.cards[0],n=cc.instantiate(this.Poker.cardPrefab);n.setPosition(o.POSITION_CARDS_DEALDER_X,o.POSITION_CARDS_DEALDER_Y),n.scale=o.SCALE_CARD_DEALDER,n.parent=this.Poker.tableCardNode;var a=n.getComponent("CardController"),r=new s(i);n.trueValue=i,a.init(r),a.revealWithAnimationFlipMoveScale(!0,o.TIME_SHOW_TABLE_CARDS,e*o.DISTANCE_TWO_CARDS_TABLE,0,o.SCALE_CARD_IN_TABLE)},showResult:function(t){var e=t.data.players,i=t.data.cards;this.showCardsInTable(i),this.GameCommon.BetForm.hideDialog(!1),this.PokerUI.hideAllButtons(),this.timeoutResult=setTimeout(function(){for(var t in e){var i=e[t].money_change,o=e[t].user_id,n=e[t].cards,s=e[t].cards_high,a=e[t].type_cards_high,r=this.Poker.getPlayerByUserId(o);r&&(r.BasePlayer.showChangeBalance(i),r.PokerPlayer.isFold()||r.BasePlayer.showEffectByChangeBalance(i),r.PokerPlayer.showEffectByGroupCardsType(a),r.isItMe?(this.showEffectHighCards(s),i>0&&this.GameCommon.Audio.playWin()):n&&r.PokerPlayer.showCards(n),i>0&&this.PokerUI.getTotalChip()>0&&this.showEffectWinCenterBalance(r))}}.bind(this),1500)},showEffectWinCenterBalance:function(t){var e=cc.instantiate(this.Poker.chipPrefab);e.parent=this.Poker.gameNode,e.setPosition(o.POSITION_CENTER_MONEY_X,o.POSITION_CENTER_MONEY_Y),e.getComponent("Balance").init(this.Poker.isMoneyType),e.runAction(cc.sequence(cc.moveTo(o.TIME_MOVE_BALANCE_CENTER,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.PokerUI.showTotalChip(0)},showCardsInTable:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)for(var i in t)if(this.Poker.getNumberCardInTable()<=i){var n=cc.instantiate(this.Poker.cardPrefab);n.parent=this.Poker.tableCardNode;var a=n.getComponent("CardController"),r=new s(t[i]);n.trueValue=t[i],a.init(r),e?(n.setPosition(o.POSITION_CARDS_DEALDER_X,o.POSITION_CARDS_DEALDER_Y),n.scale=o.SCALE_CARD_DEALDER,a.revealWithAnimationFlipMoveScale(!0,o.TIME_SHOW_TABLE_CARDS,(i-2)*o.DISTANCE_TWO_CARDS_TABLE,0,o.SCALE_CARD_IN_TABLE)):(a.reveal(!0),n.scale=o.SCALE_CARD_IN_TABLE,n.setPosition((i-2)*o.DISTANCE_TWO_CARDS_TABLE,0))}},showEffectHighCards:function(t){if(t&&t.length>0){this.showDarkEffectAllCards();var e=this.Poker.myPlayer.PokerPlayer.cardsNode.getChildren(),i=this.Poker.tableCardNode.getChildren();for(var o in e)for(var n in t)if(e[o].trueValue===t[n]){var s=e[o].getComponent("CardController");s.hideDarkEffect(),s.showHighLight();break}for(var a in i)for(var r in t)if(i[a].trueValue===t[r]){var c=i[a].getComponent("CardController");c.hideDarkEffect(),c.showHighLight();break}}},showDarkEffectAllCards:function(){var t=this.Poker.myPlayer.PokerPlayer.cardsNode.getChildren(),e=this.Poker.tableCardNode.getChildren();for(var i in e){e[i].getComponent("CardController").showDarkEffect()}for(var o in t){t[o].getComponent("CardController").showDarkEffect()}},displayButtons:function(t,e){this.PokerUI.showAllButtons(),this.PokerUI.setAllInLabelValue(0),this.PokerUI.setCallLabelValue(0),e>0?(this.PokerUI.hideCheckButton(),this.PokerUI.setCallLabelValue(e)):this.PokerUI.hideCallButton(),e>=t?(this.PokerUI.hideCallButton(),this.PokerUI.hideRaiseButton(),this.PokerUI.hideCheckButton(),this.PokerUI.setAllInLabelValue(t)):this.PokerUI.setCallLabelValue(e)},resetPlayerNameAllPlayers:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].PokerPlayer.isFold()||this.listPlayers[t].BasePlayer.hideText()},resetPlayerNameAllPlayersCheck:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].BasePlayer.textLightLabel.string===a.POKER_CHECK&&this.listPlayers[t].BasePlayer.hideText()},setPlayerStatusByBetState:function(t,e){e===n.CHECK?t.PokerPlayer.showEffectCheck():e===n.ALL_IN?t.PokerPlayer.showEffectAllIn():e===n.FOLD&&t.PokerPlayer.showEffectFold()},setRoomMasterPlayer:function(t){this.clearRoomMasterAllPlayers();var e=this.Poker.getPlayerByUserId(t);e&&e.BasePlayer.setRoomMaster(!0)},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutResult)}};e.exports=r,cc._RF.pop()},{"../../helper/Message":"Message","./PokerBetState":"PokerBetState","./PokerCard":"PokerCard","./PokerConfig":"PokerConfig"}],PokerHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"fde23yrKg9EHaFWjbrWjscs","PokerHandlerRequest");var o=t("./PokerConstant"),n=t("../../helper/Constant"),s={Poker:null,init:function(t){this.Poker=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Poker.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.BALANCE:this.Poker.initBalance(e)}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.COUNT_DOWN:this.Poker.handleCountDown(e);break;case o.START_GAME:this.Poker.handleStartGame(e);break;case o.PLAYER_PLAY:this.Poker.handlePlayerPlay(e);break;case o.BET:this.Poker.handlePlayerBet(e);break;case o.FLOP:this.Poker.handlePlayerFlop(e);break;case o.TURN:this.Poker.handlePlayerTurn(e);break;case o.RIVER:this.Poker.handlePlayerRiver(e);break;case o.FOLD:this.Poker.handlePlayerFold(e);break;case o.CHECK:this.Poker.handlePlayerCheck(e);break;case o.BUY_IN:this.Poker.handlePlayerBuyIn(e);break;case o.RESULT:this.Poker.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.Poker.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.Poker.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.Poker.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Poker.showToast(e.msg)}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","./PokerConstant":"PokerConstant"}],PokerPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"5f2ba31uE5JnZjSnVSG5nRo","PokerPlayer");var o=t("./PokerConfig"),n=t("./PokerGroupCardsType"),s=t("./PokerCard"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},onLoad:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var n=new s(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.scale=o.SCALE_CARD,a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(n),e?(a.setPosition(0,0),r.revealWithAnimationFlipMoveScale(!0,o.TIME_SHOW_CARDS,o.DISTANCE_TWO_CARDS*i,0,o.SCALE_CARD)):(r.reveal(!0),a.setPosition(o.DISTANCE_TWO_CARDS*i,0))}},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);for(var e=o.NUMBER_CARDS_EACH_PLAYERS,i=0;i<e;i++){var n=cc.instantiate(this.cardBackPrefab);n.parent=this.cardsNode,n.scale=o.SCALE_CARD,t?(n.setPosition(0,0),n.runAction(cc.moveTo(o.TIME_SHOW_CARDS,o.DISTANCE_TWO_CARDS*i,0))):n.setPosition(o.DISTANCE_TWO_CARDS*i,0)}},moveToCenterTable:function(){var t=this.node.getComponent("BasePlayer").betNode;if(t.active){t.stopAllActions(),t.opacity=255;var e=o.POSITION_CENTER_MONEY_X-this.node.x,i=o.POSITION_CENTER_MONEY_Y-this.node.y;t.runAction(cc.sequence(cc.moveTo(.5,e,i),cc.callFunc(function(){t.active=!1},this)))}},showEffectAllIn:function(){this.node.getComponent("BasePlayer").showTextLight(a.POKER_ALL_IN)},showEffectCheck:function(){this.node.getComponent("BasePlayer").showTextLight(a.POKER_CHECK)},showEffectCall:function(){this.node.getComponent("BasePlayer").showTextLight(a.POKER_CALL)},showEffectFold:function(){this.fold=!0,this.node.getComponent("BasePlayer").showTextDark(a.POKER_FOLD)},showEffectByGroupCardsType:function(t){var e="";switch(t){case n.THUNG_PHA_SANH_LON:e=a.POKER_THUNG_PHA_SANH_LON;break;case n.THUNG_PHA_SANH:e=a.POKER_THUNG_PHA_SANH;break;case n.TU_QUY:e=a.POKER_TU_QUY;break;case n.CU_LU:e=a.POKER_CU_LU;break;case n.THUNG:e=a.POKER_THUNG;break;case n.SANH_DAI:e=a.POKER_SANH_DAI;break;case n.SANH_NHI:e=a.POKER_SANH_NHI;break;case n.SANH_THUONG:e=a.POKER_SANH_THUONG;break;case n.SAM:e=a.POKER_SAM;break;case n.THU:e=a.POKER_THU;break;case n.DOI:e=a.POKER_DOI;break;case n.BAI_CAO:e=a.POKER_BAI_CAO}e&&this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(o.POSITION_PLAYER_RESULT_X,o.POSITION_PLAYER_RESULT_Y))},isFold:function(){return this.fold},reset:function(){this.fold=!1,this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./PokerCard":"PokerCard","./PokerConfig":"PokerConfig","./PokerGroupCardsType":"PokerGroupCardsType"}],PokerState:[function(t,e,i){"use strict";cc._RF.push(e,"c6af7RoaPlEHYZmtFGFp6jL","PokerState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",init:function(t){this.Poker=t},setState:function(t){this.currentState=t,this.initShowBuyInButton()},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP,this.initShowBuyInButton()},setWaiting:function(){this.currentState=this.WAITING,this.initShowBuyInButton()},setPlaying:function(){this.currentState=this.PLAYING,this.initShowBuyInButton()},setFinish:function(){this.currentState=this.FINISH,this.initShowBuyInButton()},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH},initShowBuyInButton:function(){this.isStop()||this.isWaiting()?this.Poker.GameCommon.showBuyInButton():this.Poker.GameCommon.hideBuyInButton()}},cc._RF.pop()},{}],PokerUI:[function(t,e,i){"use strict";cc._RF.push(e,"4f054BlE/lBMbZ5gZltpasW","PokerUI");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{tableCardsNode:cc.Node,totalChipNode:cc.Node,totalChipLabel:cc.Label,callLabel:cc.Label,allInLabel:cc.Label,raiseButton:cc.Node,callButton:cc.Node,foldButton:cc.Node,allInButton:cc.Node,checkButton:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showTotalChip:function(t){this.totalChip=t,this.totalChipNode.active=!0,this.totalChipLabel.string=t>0?o.numberWithCommas(t):0},hideTotalChip:function(){this.totalChipNode.active=!1},getTotalChip:function(){return this.totalChip},setCallLabelValue:function(t){this.callLabel.string=t>0?String.format(n.LIENG_BET_TEXT,n.LIENG_CALL,o.numberWithCommas(t)):n.LIENG_CALL},setAllInLabelValue:function(t){this.allInLabel.string=t>0?String.format(n.LIENG_BET_TEXT,n.LIENG_ALL_IN,o.numberWithCommas(t)):n.LIENG_ALL_IN},showRaiseButton:function(){this.raiseButton.active=!0},hideRaiseButton:function(){this.raiseButton.active=!1},showCallButton:function(){this.callButton.active=!0},hideCallButton:function(){this.callButton.active=!1},showCheckButton:function(){this.checkButton.active=!0},hideCheckButton:function(){this.checkButton.active=!1},showFoldButton:function(){this.foldButton.active=!0},hideFoldButton:function(){this.foldButton.active=!1},showAllInButton:function(){this.allInButton.active=!0},hideAllInButton:function(){this.allInButton.active=!1},hideAllButtons:function(){this.hideFoldButton(),this.hideCheckButton(),this.hideCallButton(),this.hideRaiseButton(),this.hideAllInButton()},showAllButtons:function(){this.showFoldButton(),this.showCheckButton(),this.showCallButton(),this.showRaiseButton(),this.showAllInButton()},reset:function(){this.totalChip=0,this.hideTotalChip(),this.hideAllButtons(),this.tableCardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Poker:[function(t,e,i){"use strict";cc._RF.push(e,"4770119rqlOz4QXQB36dC8i","Poker");var o=t("../../base/BaseController"),n=t("./PokerConstant"),s=t("./PokerConfig"),a=t("./PokerUI"),r=t("./PokerState"),c=t("./PokerHandlerRequest"),h=t("./PokerHandlerEffect"),l=t("./PokerBetState"),u=t("../../prefab/GameCommon"),d=t("../../helper/Constant"),m=t("../../helper/Message"),p=t("../../object/RoomType");cc.Class({extends:o,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,tableCardNode:cc.Node,gameNode:cc.Node,iconSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,PokerUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(d.SCENE_GAME_POKER),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[d.MIN_BET].value),this.roomType=parseInt(this.room.variables[d.ROOM_TYPE].value),this.isMoneyType=this.roomType==p.MONEY_CODE,this.iconSprite.spriteFrame=this.isMoneyType?this.moneySpriteFrame:this.goldSpriteFrame,this.playersNode=this.PokerUI.playersNode,this.isMoneyType||this.PokerUI.disableAllPlaceHolder(),this.PokerConstant=n,this.PokerConfig=s,this.PokerState=r,this.PokerState.init(this),this.PokerHandlerRequest=c,this.PokerHandlerRequest.init(this),this.PokerHandlerEffect=h,this.PokerHandlerEffect.init(this),this.GameCommon.init(this),this.GameCommon.BetForm.setRound(this.minBet/2),this.GameCommon.BetForm.setHideWhenClick(!0),this.GameCommon.BuyInForm.setRound(this.minBet/2),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.PokerHandlerRequest.onPublicMessage.bind(this.PokerHandlerRequest),this.onRoomVarsUpdate=this.PokerHandlerRequest.onRoomVarsUpdate.bind(this.PokerHandlerRequest),this.onUserVarsUpdate=this.PokerHandlerRequest.onUserVarsUpdate.bind(this.PokerHandlerRequest),this.onResponse=this.PokerHandlerRequest.onResponse.bind(this.PokerHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a),a.active=!1}this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("PokerPlayer");t.BasePlayer=o,t.PokerPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRoomMaster(t.is_small_blind),o.setRequestLeftRoom(t.request_left_room),o.setPlayerName(t.nick_name),o.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.PokerState.setState(e),this.PokerState.isStop()?this.reset():this.PokerState.isWaiting()?this.resumeStateWaiting(t):this.PokerState.isPlaying()?this.resumeStatePlaying(t):this.PokerState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.PokerHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players,i=t.data.cards,o=t.data.bet_amount,n=t.data.table_cards;for(var s in e){var a=e[s].user_id,r=e[s].bet_amount,c=e[s].bet_state,h=this.getPlayerByUserId(a);h&&(r>0&&h.BasePlayer.showBetNodeWithoutAnimation(r),this.PokerHandlerEffect.setPlayerStatusByBetState(h,c),h.isItMe||h.PokerPlayer.showBackCards(!1))}this.PokerUI.showTotalChip(o),this.myPlayer.PokerPlayer.showCards(i,!1),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showCardsInTable(n,!1)},resumeStateFinish:function(t){var e=t.data.players,i=t.data.cards,o=t.data.bet_amount,n=t.data.table_cards;for(var s in e){var a=e[s].user_id,r=e[s].bet_amount,c=e[s].bet_state,h=e[s].money_change,l=this.getPlayerByUserId(a);l&&(r>0&&l.BasePlayer.showBetNodeWithoutAnimation(r),l.BasePlayer.showChangeBalance(h),l.BasePlayer.showEffectByChangeBalance(h),this.PokerHandlerEffect.setPlayerStatusByBetState(l,c),l.isItMe||l.PokerPlayer.showBackCards(!1))}this.PokerUI.showTotalChip(o),this.myPlayer.PokerPlayer.showCards(i,!1),this.PokerUI.hideAllButtons(),this.PokerHandlerEffect.showCardsInTable(n,!1)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.PokerHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initBalance:function(t){var e=t.variables.user_id.value;if(t.variables.balance){var i=t.variables.balance.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)}},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.PokerState.setWaiting(),this.GameCommon.hideWaitingNode(),this.PokerHandlerEffect.startCountDownAllPlayers(t)):(this.PokerState.setStop(),this.PokerHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){var e=t.data.cards,i=t.data.small_blind.user_id;this.PokerState.setPlaying(),this.PokerHandlerEffect.setRoomMasterPlayer(i),this.PokerHandlerEffect.dealCards(e),this.PokerHandlerEffect.startGame(t),this.PokerHandlerEffect.handlePlayingPlayer(t)},handlePlayerPlay:function(t){t.data.bet_state===l.CHECK&&this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.handlePlayingPlayer(t)},handlePlayerBet:function(t){var e=t.data.user_id,i=t.data.bet_amount_round,o=t.data.is_all_in,n=this.getPlayerByUserId(e);n&&(n.BasePlayer.hideText(),n.BasePlayer.showChangeBalance(-i),i>0&&n.BasePlayer.showBetNode(i),o&&n.PokerPlayer.showEffectAllIn()),this.PokerHandlerEffect.stopCountDownAllPlayers()},handlePlayerFlop:function(t){this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.showFirstResponseTableCards(t),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showEffectCollectMoney(t)},handlePlayerTurn:function(t){this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.showCards(t,1),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showEffectCollectMoney(t)},handlePlayerRiver:function(t){this.PokerHandlerEffect.resetPlayerNameAllPlayersCheck(),this.PokerHandlerEffect.showCards(t,2),this.PokerHandlerEffect.handlePlayingPlayer(t),this.PokerHandlerEffect.showEffectCollectMoney(t)},handlePlayerFold:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.PokerPlayer.showEffectFold()},handlePlayerCheck:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.PokerPlayer.showEffectCheck()},handleResult:function(t){this.PokerState.setFinish(),this.PokerHandlerEffect.stopCountDownAllPlayers(),this.PokerHandlerEffect.resetPlayerNameAllPlayers(),this.PokerHandlerEffect.showResult(t),this.setViewersToPlayers()},handlePlayerBuyIn:function(t){var e=t.data.min_balance,i=t.data.max_balance;this.GameCommon.BuyInForm.setMinValue(e),this.GameCommon.BuyInForm.setMaxValue(i),this.GameCommon.BuyInForm.showDialog()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.PokerState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.PokerHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(m.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(m.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onAllInClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_ALL_IN)},onCheckClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_CHECK)},onRaiseClick:function(){this.GameCommon.Audio.playClick(),this.GameCommon.BetForm.showDialog()},onCallClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_CALL)},onFoldClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_FOLD)},onBetConfirmClick:function(){this.GameCommon.Audio.playClick();var t={bet_amount:this.GameCommon.BetForm.getBalanceSlider()};this.sendRequest.send(n.REQUEST_RAISE,t),this.GameCommon.BetForm.hideDialog()},onBuyInConfirmClick:function(){this.GameCommon.Audio.playClick();var t=this.GameCommon.BuyInForm.getBalanceSlider(),e=this.GameCommon.BuyInForm.isBuyIn(),i={balance:parseInt(t),is_auto_buy_in:e};this.sendRequest.send(n.REQUEST_BUY_IN,i),this.GameCommon.BuyInForm.hideDialog()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getNumberCardInTable:function(){return this.tableCardNode.getChildren().length},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(this.util.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.PokerHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.GameCommon.BetForm.hideDialog(!1),this.PokerUI.reset(),this.clearAllTimeout(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].PokerPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./PokerBetState":"PokerBetState","./PokerConfig":"PokerConfig","./PokerConstant":"PokerConstant","./PokerHandlerEffect":"PokerHandlerEffect","./PokerHandlerRequest":"PokerHandlerRequest","./PokerState":"PokerState","./PokerUI":"PokerUI"}],ProcessingScene:[function(t,e,i){"use strict";cc._RF.push(e,"e4ac05+Jp1B7KuxeMTvk8zp","ProcessingScene");t("../helper/Config");cc.Class({extends:cc.Component,properties:{fadeNode:cc.Node,imageNode:cc.Node},start:function(){},onEnable:function(){var t=this;this.timeoutProcessing=null,this.timeoutCallback=function(){t.node&&(t.node.active=!1)},this.fadeNode.acive=!0,this.fadeNode.opacity=255,this.imageNode.opacity=200,this.showProgressingNode(),clearTimeout(this.timeoutProcessing),this.timeoutProcessing=setTimeout(this.timeoutCallback,1e4)},onDisable:function(){this.node.stopAllActions(),clearTimeout(this.timeoutProcessing)},clearTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){clearTimeout(this.timeoutProcessing)}),showProgressingNode:function(){var t=cc.callFunc(function(){this.fadeNode.runAction(cc.fadeTo(.2,150)),this.imageNode.runAction(cc.fadeTo(.2,255))},this),e=cc.callFunc(function(){this.fadeNode.runAction(cc.fadeTo(.2,0))},this),i=cc.sequence(t,e);this.node.runAction(i)}}),cc._RF.pop()},{"../helper/Config":"Config"}],Processing:[function(t,e,i){"use strict";cc._RF.push(e,"bb9764pvXJAsbMOgTzWN97c","Processing");var o=t("../helper/Config");cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.timeoutProcessing=null,this.timeoutCallback=function(){t.node.active=!1}},onEnable:function(){clearTimeout(this.timeoutProcessing),this.timeoutProcessing=setTimeout(this.timeoutCallback,1e3*o.PROCESSING_TIME_OUT)},onDisable:function(){clearTimeout(this.timeoutProcessing)},clearTimeout:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){clearTimeout(this.timeoutProcessing)})}),cc._RF.pop()},{"../helper/Config":"Config"}],QuestNotificationItem:[function(t,e,i){"use strict";cc._RF.push(e,"ec1a2VO1DNN74u89Se3mN+o","QuestNotificationItem");var o=t("../../helper/Config"),n=t("../../helper/Message"),s=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label},onLoad:function(){this.initY=this.node.parent.height/2;var t=this.initY+200;this.node.y=t,this.node.runAction(cc.moveTo(.5,this.node.x,this.initY)),this.hideAction=cc.sequence(cc.moveTo(.5,this.node.x,t),cc.callFunc(function(){this.node.removeFromParent(!0)},this)),this.hideTimeout=setTimeout(function(){this.node.runAction(this.hideAction)}.bind(this),1e3*o.QUEST_TIME_SHOW_NOTIFICATION)},onDestroy:function(){clearTimeout(this.hideTimeout)},setMessage:function(t){t=s.replaceContent(t,n.OLD_MONEY_1,n.NEW_MONEY),t=s.replaceContent(t,n.OLD_MONEY_2,n.NEW_MONEY),t=s.replaceContent(t,n.OLD_MONEY_3,n.NEW_MONEY),t=s.replaceContent(t,n.OLD_MONEY_4,n.NEW_MONEY),this.messageLabel.string=t},onCloseClick:function(){clearTimeout(this.hideTimeout),this.node.runAction(this.hideAction)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],QuickChatItem:[function(t,e,i){"use strict";cc._RF.push(e,"133edh2JF5Pl70SZEFuICJM","QuickChatItem"),cc.Class({extends:cc.Component,properties:{textLabel:cc.Label},init:function(t,e){this.GameCommon=t,this.textLabel.string=e},onLoad:function(){},onClick:function(){this.GameCommon.sendChat(this.textLabel.string),this.GameCommon.hideQuickChatNode(),this.GameCommon.unFocusChatEditBox()}}),cc._RF.pop()},{}],RandomUtil:[function(t,e,i){"use strict";cc._RF.push(e,"96681onZOpKKqSVyoK05Khb","RandomUtil");var o={getRandom:function(t,e){return Math.random()*(e-t)+t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},getRandomToken:function(){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".split(""),e=[],i=0;i<32;i++){var o=(Math.random()*(t.length-1)).toFixed(0);e[i]=t[o]}return e.join("")}};e.exports=o,cc._RF.pop()},{}],RankInviteFriendItem:[function(t,e,i){"use strict";cc._RF.push(e,"b5306CnR1ZNmJ0++gUGZNbL","RankInviteFriendItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nicknameLabel:cc.Label,scoreReceiveLabel:cc.Label,scoreSendLabel:cc.Label,totalScoreLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){var i=t.nick_name,n=t.created_at,s=t.total_score,a=t.score_sent,r=t.score_received;this.idLabel.string=e+1,this.timeLabel.string=o.getDateByTimeStamp(n),this.nicknameLabel.string=i,this.scoreReceiveLabel.string=o.numberWithCommas(r),this.scoreSendLabel.string=o.numberWithCommas(a),this.totalScoreLabel.string=o.numberWithCommas(s);var c=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=c}else this.node.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],RankInviteFriend:[function(t,e,i){"use strict";cc._RF.push(e,"8d9310SgKVMKZ/z0rejC3mA","RankInviteFriend");t("../../../../util/FormatUtil"),t("../../../../util/Util");cc.Class({extends:cc.Component,properties:{rankScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameInfo=t.GameInfo},onLoad:function(){},onEnable:function(){this.loadData()},onDisable:function(){this.removeXhr()},loadData:function(t){var e=this;this.reset(),this.showLoadingNode();var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.getTopInviteFriend(i,function(t){e.hideLoadingNode(),e.initData(t.data)},function(t){})},initData:function(t){for(var e=0,i=t.length;e<i;e++){var o=cc.instantiate(this.rankItemPrefab);o.getComponent("RankInviteFriendItem").init(t[e],e),this.rankScrollView.content.addChild(o)}},reset:function(){this.rankScrollView.content.removeAllChildren()},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../util/FormatUtil":"FormatUtil","../../../../util/Util":"Util"}],RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"b7888h/DQ1JHbhoQLHq9BQs","RankItem");var o=t("../../util/FormatUtil"),n=t("../../util/Util");cc.Class({extends:cc.Component,properties:{noSprite:cc.Sprite,noSpriteFrames:[cc.SpriteFrame],noLabel:cc.Label,nameLabel:cc.Label,valueLabel:cc.Label,avatarSprite:cc.Sprite},onLoad:function(){},init:function(t,e){this.initNo(e),this.nameLabel.string=n.getServerID(t.server_id)+t.nick_name;var i=t.sum_total_amount||t.best_money_win;this.valueLabel.string=o.numberWithCommas(i),this.setAvatar(t.avatar)},initNo:function(t){if(t<3){this.noSprite.node.active=!0,this.noLabel.node.active=!1;var e=this.noSpriteFrames[t];this.noSprite.spriteFrame=e}else this.noSprite.node.active=!1,this.noLabel.node.active=!0,this.noLabel.string=parseInt(t)+1},setAvatar:function(t){var e=t,i=this;e&&o.validateUrlImage(e)&&cc.loader.load(o.convertUrlToLocation(e),function(t,e){if(e instanceof cc.Texture2D){var o=new cc.SpriteFrame(e,cc.Rect(0,0,90,128));i.avatarSprite.spriteFrame=o}})}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],RankVip2Item:[function(t,e,i){"use strict";cc._RF.push(e,"c9128m1845PnYE3cjgFL13u","RankVip2Item");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,noSprite:cc.Sprite,nicknameLabel:cc.Label,totalVip:cc.Label,remainVip:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame,listRankSpriteFrame:[cc.SpriteFrame]},init:function(t,e){if(t){var i=t.nick_name||t.nickname||"",n=t.total||0,s=t.remain||0;this.nicknameLabel.string=i.toLowerCase(),this.totalVip.string=o.numberWithCommas(n),this.remainVip.string=o.numberWithCommas(s),e>2?(this.noLabel.string=parseInt(e)+1,this.noLabel.node.active=!0,this.noSprite.node.active=!1):(this.noSprite.spriteFrame=this.listRankSpriteFrame[e],this.noSprite.node.active=!0,this.noLabel.node.active=!1);var a=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=a}else this.node.active=!1}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],RankVip2:[function(t,e,i){"use strict";cc._RF.push(e,"8f95fRFW55IjLsdYO3Hn0SV","RankVip2"),cc.Class({extends:cc.Component,properties:{rankScrollView:cc.ScrollView,rankVip2ItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.loadData()},onDisable:function(){this.removeXhr()},loadData:function(t){var e=this;this.reset(),this.showLoadingNode();var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.xhr=this.GameCenter.api.getLogTopVip2(i,function(t){e.hideLoadingNode(),e.initData(t.data)},function(t){})},initData:function(t){for(var e=0,i=t.length;e<i;e++){var o=cc.instantiate(this.rankVip2ItemPrefab);o.getComponent("RankVip2Item").init(t[e],e),this.rankScrollView.content.addChild(o)}},reset:function(){this.rankScrollView.content.removeAllChildren()},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{}],RechargeBankingForm:[function(t,e,i){"use strict";cc._RF.push(e,"e1fdfmh+Z1C6ZIfrbGyDSFJ","RechargeBankingForm");t("../../../util/BrowserUtil"),t("../../../helper/Constant");var o=t("../../../helper/Message"),n=t("../../../ui/drop-down-list/DropDownList"),s=t("../../../ui/drop-down-list/DropDownList2"),a=t("../../../util/FormatUtil"),r=t("../../../object/Capcha");cc.Class({extends:cc.Component,properties:{bankDropDownList2:s,valueDropDownList:n,bankSprite:cc.Sprite,banksSpriteFrame:[cc.SpriteFrame],moneyLabel:cc.Label,capchaEditBox:cc.EditBox,capchaLabel:cc.Label,redirectNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.editboxs=[this.capchaEditBox],this.capcha=null,this.initData()},onEnable:function(){this.clear()},onDisable:function(){},initData:function(){var t=this.controller.getBankListProvider(),e=this.controller.getBankListAmount(),i={};for(var o in Object.keys(t).sort().forEach(function(e){i[e]=t[e]}),this.listBankProvider=[],this.listBankAmount=e,i)i.hasOwnProperty(o)&&this.listBankProvider.push({name:i[o],bank:o});this.initListProvider(this.listBankProvider),this.initListAmount(this.listBankAmount)},initListAmount:function(t){for(var e=0;e<t.length;e++)this.valueDropDownList.addItem(t[e].amount,t[e]),this.valueDropDownList.setCallback(this.selectAmountCallback,this),0===e&&(this.moneyLabel.string=a.numberWithCommas(t[e].money))},initListProvider:function(t){for(var e=0;e<t.length;e++)this.bankDropDownList2.addItem(t[e].name,t[e]),this.bankDropDownList2.setCallback(this.selectProviderCallback,this),0===e&&(this.moneyLabel.string=a.numberWithCommas(e))},initCapcha:function(){this.capcha=new r,this.capchaLabel.string=this.capcha.text,this.capchaEditBox.string=""},selectAmountCallback:function(t){for(var e=t.getValue(),i=0;i<this.listBankAmount.length;i++)if(this.listBankAmount[i].amount===e){this.moneyLabel.string=a.numberWithCommas(this.listBankAmount[i].money);break}},selectProviderCallback:function(t){for(var e=t.getValue(),i=0;i<this.listBankProvider.length;i++)if(this.listBankProvider[i].name===e){this.bankSprite.spriteFrame=this.banksSpriteFrame[i];break}},onConfirmClick:function(){this.controller.Audio.playClick();var t=this.valueDropDownList.getSelectedItem().getValue(),e=this.bankDropDownList2.getSelectedItem().getData().bank,i=this.capchaEditBox.string;this.checkAllEditboxNotEmpty()?this.capcha.result==i?this.rechargeBanking(t,e):this.controller.showDialogMessage(o.RECHARGE_BANKING_TITLE,o.CAPCHA_NOT_CORRECT):this.controller.showDialogMessage(o.RECHARGE_BANKING_TITLE,o.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},rechargeBanking:function(t,e){var i=this;this.controller.showProcessingNode();var n={token:this.controller.getToken(),user_id:this.controller.getUserId(),amount:t,bank:e};this.controller.api.rechargeBanking(n,function(t){i.controller.hideProcessingNode(),i.clear(),i.url=t.data.url,cc.sys.openURL(i.url),i.redirectNode.active=!0},function(t){i.redirectNode.active=!1,i.initCapcha(),i.controller.hideProcessingNode(),i.controller.showDialogMessage(o.RECHARGE_BANKING_TITLE,t.msg)})},onResetCapchaClick:function(){this.initCapcha()},onRedirectClick:function(){window&&this.url&&(window.location.href=this.url)},clear:function(){this.url="",this.capchaEditBox.string="",this.initCapcha(),this.redirectNode.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/Capcha":"Capcha","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../ui/drop-down-list/DropDownList2":"DropDownList2","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeBanking:[function(t,e,i){"use strict";cc._RF.push(e,"e92408yNZNNSZnEc5J5fOt+","RechargeBanking");t("../../../util/BrowserUtil");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../ui/drop-down-list/DropDownList"),a=t("../../../ui/drop-down-list/DropDownList2"),r=t("../../../util/FormatUtil"),c=t("../../../object/Capcha");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,bankDropDownList2:a,valueDropDownList:s,bankSprite:cc.Sprite,banksSpriteFrame:[cc.SpriteFrame],moneyLabel:cc.Label,bankPageView:cc.PageView,capchaEditBox:cc.EditBox,capchaLabel:cc.Label,redirectNode:cc.Node,rechargeAllButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.capchaEditBox],this.capcha=null,this.initData()},onEnable:function(){this.clear(),this.backButtonNode.active=!1},onDisable:function(){this.backButtonNode.active=!0},initData:function(){var t=this.GameCenter.getBankListProvider(),e=this.GameCenter.getBankListAmount(),i={};for(var o in Object.keys(t).sort().forEach(function(e){i[e]=t[e]}),this.listBankProvider=[],this.listBankAmount=e,i)i.hasOwnProperty(o)&&this.listBankProvider.push({name:i[o],bank:o});this.initListProvider(this.listBankProvider),this.initListAmount(this.listBankAmount)},initListAmount:function(t){for(var e=0;e<t.length;e++)this.valueDropDownList.addItem(t[e].amount,t[e]),this.valueDropDownList.setCallback(this.selectAmountCallback,this),0===e&&(this.moneyLabel.string=r.numberWithCommas(t[e].money))},initListProvider:function(t){for(var e=0;e<t.length;e++)this.bankDropDownList2.addItem(t[e].name,t[e]),this.bankDropDownList2.setCallback(this.selectProviderCallback,this),0===e&&(this.moneyLabel.string=r.numberWithCommas(e))},initCapcha:function(){this.capcha=new c,this.capchaLabel.string=this.capcha.text,this.capchaEditBox.string=""},selectAmountCallback:function(t){for(var e=t.getValue(),i=0;i<this.listBankAmount.length;i++)if(this.listBankAmount[i].amount===e){this.moneyLabel.string=r.numberWithCommas(this.listBankAmount[i].money);break}},selectProviderCallback:function(t){for(var e=t.getValue(),i=0;i<this.listBankProvider.length;i++)if(this.listBankProvider[i].name===e){this.bankSprite.spriteFrame=this.banksSpriteFrame[i];break}},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.valueDropDownList.getSelectedItem().getValue(),e=this.bankDropDownList2.getSelectedItem().getData().bank,i=this.capchaEditBox.string;this.checkAllEditboxNotEmpty()?this.capcha.result==i?this.rechargeBanking(t,e):this.GameCenter.showDialogMessage(n.RECHARGE_BANKING_TITLE,n.CAPCHA_NOT_CORRECT):this.GameCenter.showDialogMessage(n.RECHARGE_BANKING_TITLE,n.MISSING_INFO)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},rechargeBanking:function(t,e){var i=this;this.GameCenter.showProcessingNode();var o={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),amount:t,bank:e};this.GameCenter.api.rechargeBanking(o,function(t){i.GameCenter.hideProcessingNode(),i.clear(),i.url=t.data.url,cc.sys.openURL(i.url),i.redirectNode.active=!0},function(t){i.redirectNode.active=!1,i.initCapcha(),i.GameCenter.hideProcessingNode(),i.GameCenter.showDialogMessage(n.RECHARGE_BANKING_TITLE,t.msg)})},onPreviousPageClick:function(){var t=this.bankPageView.getCurrentPageIndex(),e=this.bankPageView.getPages().length;--t<0&&(t=e-1),this.bankPageView.setCurrentPageIndex(t)},onNextPageClick:function(){var t=this.bankPageView.getCurrentPageIndex();++t>=this.bankPageView.getPages().length&&(t=0),this.bankPageView.setCurrentPageIndex(t)},onResetCapchaClick:function(){this.initCapcha()},onRedirectClick:function(){window&&this.url&&(window.location.href=this.url)},clear:function(){this.url="",this.capchaEditBox.string="",this.initCapcha(),this.redirectNode.active=!1},onACBBankClick:function(){this.selectBank(o.BANK_ACB)},onAgriBankClick:function(){this.selectBank(o.BANK_AGRI)},onAnBinhBankClick:function(){this.selectBank(o.BANK_AN_BINH)},onBacABankClick:function(){this.selectBank(o.BANK_BAC_A)},onBIDVBankClick:function(){this.selectBank(o.BANK_BIDV)},onDaiABankClick:function(){this.selectBank(o.BANK_DAI_A)},onDongABankClick:function(){this.selectBank(o.BANK_DONG_A)},onEximBankClick:function(){this.selectBank(o.BANK_EXIM)},onGPBankClick:function(){this.selectBank(o.BANK_GP)},onHDBankClick:function(){this.selectBank(o.BANK_HD)},onMaritimeBankClick:function(){this.selectBank(o.BANK_MARITIME)},onMBBankClick:function(){this.selectBank(o.BANK_MB)},onNamABankClick:function(){this.selectBank(o.BANK_NAM_A)},onNaviBankClick:function(){this.selectBank(o.BANK_NAVI)},onOceanBankClick:function(){this.selectBank(o.BANK_OCEAN)},onPGBankClick:function(){this.selectBank(o.BANK_PG)},onSaComBankClick:function(){this.selectBank(o.BANK_SACOM)},onSaiGonBankClick:function(){this.selectBank(o.BANK_SAI_GON)},onSeaBankClick:function(){this.selectBank(o.BANK_SEA)},onSHBBankClick:function(){this.selectBank(o.BANK_SHB)},onTechComBankClick:function(){this.selectBank(o.BANK_TECHCOM)},onTienPhongBankClick:function(){this.selectBank(o.BANK_TIEN_PHONG)},onVIBBankClick:function(){this.selectBank(o.BANK_VIB)},onVietABankClick:function(){this.selectBank(o.BANK_VIET_A)},onVietComBankClick:function(){this.selectBank(o.BANK_VIETCOM)},onViettinBankClick:function(){this.selectBank(o.BANK_VIETTIN)},onVPBankClick:function(){this.selectBank(o.BANK_VP)},selectBank:function(t){for(var e=0;e<this.listBankProvider.length;e++)if(this.listBankProvider[e].bank===t){this.bankDropDownList2.selectByValue(this.listBankProvider[e].name),this.bankSprite.spriteFrame=this.banksSpriteFrame[e];break}},onBackClick:function(){this.rechargeAllButtonNode.active=!0,this.node.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/Capcha":"Capcha","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../ui/drop-down-list/DropDownList2":"DropDownList2","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeButtonCard:[function(t,e,i){"use strict";cc._RF.push(e,"b014eqtrHZE56GuF3nPQDit","RechargeButtonCard");var o=t("./RechargeMoney"),n=t("./RechargeBanking"),s=t("./RechargeSMS"),a=t("../../../helper/Constant");t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{rechargeMoneyContentNode:cc.Node,rechargeSMSContentNode:cc.Node,rechargeBankingContentNode:cc.Node,vietteBonusNode:cc.Node,mobiBonusNode:cc.Node,vinaBonusNode:cc.Node,megaBonusNode:cc.Node,gateBonusNode:cc.Node,viettelBonusLabel:cc.Label,mobiBonusLabel:cc.Label,vinaBonusLabel:cc.Label,megaBonusLabel:cc.Label,gateBonusLabel:cc.Label,RechargeMoney:o,RechargeBanking:n,RechargeSMS:s},init:function(t){this.GameCenter=t,this.GameRecharge=t.GameRecharge,this.RechargeMoney.init(t),this.RechargeBanking.init(t),this.RechargeSMS.init(t)},onLoad:function(){this.reset(),this.initBonus()},initBonus:function(){var t=this.GameCenter.getConfig().telco;for(var e in t){var i=t[e].name;if(0!==t[e].bonus){var o=100*t[e].bonus+"%";this.showCard(i,o)}}},showCard:function(t,e){var i=void 0,o=void 0;switch(t){case a.VIETEL:i=this.vietteBonusNode,o=this.viettelBonusLabel;break;case a.MOBIFONE:i=this.mobiBonusNode,o=this.mobiBonusLabel;break;case a.VINAPHONE:i=this.vinaBonusNode,o=this.vinaBonusLabel;break;case a.GATE:i=this.gateBonusNode,o=this.gateBonusLabel;break;case a.MEGACARD:i=this.megaBonusNode,o=this.megaBonusLabel}i&&(i.active=!0,o.string=e)},onRechargeCardViettelClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(),this.RechargeMoney.selectVietel()},onRechargeCardVinaPhoneClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(),this.RechargeMoney.selectVinaphone()},onRechargeCardMobifoneClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(),this.RechargeMoney.selectMobifone()},onRechargeCardMegaCardClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(!1),this.RechargeMoney.selectMegaCard()},onRechargeCardGateCardClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeMoneyContentNode.active=!0,this.RechargeMoney.showCardPhone(!1),this.RechargeMoney.selectGate()},onRechargeCardSMSClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeSMSContentNode.active=!0},onRechargeCardBankingClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContents(),this.rechargeBankingContentNode.active=!0},showRechargeMoneyContentNode:function(){this.hideAllContents(),this.rechargeMoneyContentNode.active=!0},hideAllContents:function(){this.node.active=!1,this.rechargeMoneyContentNode.active=!1,this.rechargeSMSContentNode.active=!1,this.rechargeBankingContentNode.active=!1},reset:function(){this.vietteBonusNode.active=!1,this.mobiBonusNode.active=!1,this.vinaBonusNode.active=!1,this.gateBonusNode.active=!1,this.megaBonusNode.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","./RechargeBanking":"RechargeBanking","./RechargeMoney":"RechargeMoney","./RechargeSMS":"RechargeSMS"}],RechargeCardItem:[function(t,e,i){"use strict";cc._RF.push(e,"33c67dny9FJv6OpDYqHaxmP","RechargeCardItem");var o=t("../../util/BrowserUtil"),n=t("../../util/FormatUtil"),s=t("../../helper/Message");t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,valueLabel:cc.Label,seriEditBox:cc.EditBox,codeEditBox:cc.EditBox},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.data=e,this.nameLabel.string=e.type_card,this.valueLabel.string=String.format(s.CHARGE_CARD_ITEM_VALUE,n.numberWithCommas(e.amount)),this.seriEditBox.string=e.seri_card||e.serial,this.codeEditBox.string=e.number_card||e.pin_code,this.data.seri_card=e.seri_card?e.seri_card:e.serial,this.data.number_card=e.number_card?e.number_card:e.pin_code,console.log(this.data)},onLoad:function(){this.editboxs=[this.seriEditBox,this.codeEditBox],this.initReadOnlyAllEditBox()},initReadOnlyAllEditBox:function(){for(var t in this.editboxs){var e=o.getHTMLElementByEditBox(this.editboxs[t]);e&&o.readOnlyEditBox(e)}},onRechargeClick:function(){this.rechargeCard()},rechargeCard:function(){this.data&&(this.GameCenter.GameRecharge.RechargeMoney.initDataRechargeCard(this.data),this.GameCenterUI.showRechargeNode(),this.GameCenter.GameRecharge.onRechargeMoneyClick())}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],RechargeGoldForm:[function(t,e,i){"use strict";cc._RF.push(e,"f35e4CEs8VCxrNcs26gh0p5","RechargeGoldForm");var o=t("../../../util/BrowserUtil"),n=t("../../../util/FormatUtil"),s=t("../../../helper/Constant"),a=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{valueEditBox:cc.EditBox,moneyLabel:cc.Label,goldLabel:cc.Label},init:function(t){this.controller=t},onLoad:function(){this.editboxs=[this.valueEditBox]},onEnable:function(){this.clear(),this.initData(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===s.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode!==s.ESC_KEY&&void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},initData:function(){this.moneyLabel.string=n.numberWithCommas(this.controller.getMoney())},onChangeValue:function(){this.initTotalGold()},initTotalGold:function(){var t=parseInt(this.controller.getConfig().RATE_CONVERT_MONEY_TO_GOLD),e=parseInt(this.valueEditBox.string||0);this.goldLabel.string=n.numberWithCommas(e*t)},onConfirmClick:function(){this.controller.Audio.playClick();var t=this.valueEditBox.string;this.checkAllEditboxNotEmpty()?(t=parseInt(t))>0?this.rechargeGold(t):this.controller.showDialogMessage(a.RECHARGE_GOLD_TITLE,a.NUMBER_MONEY_LARGER_ZERO):this.controller.showDialogMessage(a.RECHARGE_GOLD_TITLE,a.MISSING_INFO)},rechargeGold:function(t){this.controller.showProcessingNode();var e={money:t};this.controller.sendRequest.sendToZone(s.REQUEST_RECHARGE_GOLD,e)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initTotalGold(),this.initData()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeGoldHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"b8e082sJ7xN5LJkDf6k7Uky","RechargeGoldHistoryItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.nameLabel.string=n.RECHARGE_GOLD_HISTORY_NAME,this.playBalanceLabel.string=o.numberWithCommas(t.money),this.remainBalanceLabel.string="",this.noteLabel.string=String.format(n.RECHARGE_GOLD_HISTORY_NOTE,o.numberWithCommas(t.gold));var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],RechargeGold:[function(t,e,i){"use strict";cc._RF.push(e,"c7c1cLiWf5Nr4H2VaX/Gkv5","RechargeGold");t("../../../util/BrowserUtil");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Constant"),s=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{valueEditBox:cc.EditBox,moneyLabel:cc.Label,goldLabel:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.valueEditBox]},onEnable:function(){this.clear(),this.initData()},initData:function(){this.moneyLabel.string=o.numberWithCommas(this.GameCenter.getMoney())},onChangeValue:function(){this.initTotalGold()},initTotalGold:function(){var t=parseInt(this.GameCenter.getConfig().RATE_CONVERT_MONEY_TO_GOLD),e=parseInt(this.valueEditBox.string||0);this.goldLabel.string=o.numberWithCommas(e*t)},onConfirmClick:function(){this.GameCenter.Audio.playClick();var t=this.valueEditBox.string;this.checkAllEditboxNotEmpty()?(t=parseInt(t))>0?this.rechargeGold(t):this.GameCenter.showDialogMessage(s.RECHARGE_GOLD_TITLE,s.NUMBER_MONEY_LARGER_ZERO):this.GameCenter.showDialogMessage(s.RECHARGE_GOLD_TITLE,s.MISSING_INFO)},rechargeGold:function(t){this.GameCenter.showProcessingNode();var e={money:t};this.GameCenter.sendRequest.sendToZone(n.REQUEST_RECHARGE_GOLD,e)},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string="";this.initData(),this.initTotalGold()}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"9fa7frrAH5AgY2ujfEygUiH","RechargeHistoryItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,nameLabel:cc.Label,playBalanceLabel:cc.Label,remainBalanceLabel:cc.Label,noteLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at)||"",this.nameLabel.string=t.service_name||t.type_card,this.playBalanceLabel.string=o.numberWithCommas(t.amount),this.remainBalanceLabel.string=o.numberWithCommas(t.money);var i=1==t.status?"Th\xe0nh c\xf4ng":"Th\u1ea5t b\u1ea1i";this.noteLabel.string=i;var n=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=n},onLoad:function(){}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],RechargeMessage:[function(t,e,i){"use strict";cc._RF.push(e,"bd7afZR0ZRAk54t5djrt3H1","RechargeMessage"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.FireFish=t,this.FireFishUI=t.FireFishUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.FireFish.DialogMessage.node.active&&!this.FireFish.Processing.node.active},onConfirmClick:function(){this.dialogForm.hideDialog(!1),this.FireFishUI.showRechargeForm()}}),cc._RF.pop()},{}],RechargeMomo:[function(t,e,i){"use strict";cc._RF.push(e,"8ca51MGr+5OHo46Et6y98Lp","RechargeMomo");t("../../../util/BrowserUtil"),t("../../../util/FormatUtil"),t("../../../helper/Constant"),t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{myContentLabel:cc.Label,containerNode:cc.Node,momoItemPrefab:cc.Prefab},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.showMyContent(),this.loadInfo()},loadInfo:function(){var t=this,e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.GameCenter.showProcessingNode(),this.GameCenter.api.getInfoMomo(e,function(e){t.GameCenter.hideProcessingNode(),t.initData(e.data.info)},function(e){t.GameCenter.hideProcessingNode()})},initData:function(t){this.containerNode.removeAllChildren();for(var e=0,i=t.length;e<i;e++){var o=cc.instantiate(this.momoItemPrefab);o.getComponent("MomoItem").init(this.GameCenter,t[e]),o.parent=this.containerNode}},showMyContent:function(){this.myContentLabel.string=this.GameCenter.getUser().nick_name},onCopyMyInfoClick:function(){this.GameCenter.Audio.playClick();var t=this.myContentLabel.string;Clipboard.copy(t)}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil"}],RechargeMoneyForm:[function(t,e,i){"use strict";cc._RF.push(e,"5fe59XsPKpIg7bgKe5ZBO/o","RechargeMoneyForm");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../util/BrowserUtil"),a=t("../../../util/Track"),r=t("../../../util/Util"),c=t("../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{rechargeCardRateItemPrefab:cc.Prefab,listCardRateNode:cc.Node,listCardRateBonusNode:cc.Node,seriEditBox:cc.EditBox,codeEditBox:cc.EditBox,cardTypeDropDownList:c},init:function(t){this.controller=t},onLoad:function(){this.editboxs=[this.seriEditBox,this.codeEditBox],this.pool=new cc.NodePool;for(var t=0;t<5;t++){var e=cc.instantiate(this.rechargeCardRateItemPrefab);this.pool.put(e)}this.initData()},onEnable:function(){this.clear(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===o.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ENTER_KEY?(s.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode!==o.ESC_KEY&&void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(s.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),s.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&s.focusEditBox(this.editboxs[0])}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},initData:function(){var t=this.controller.getConfig().telco;for(var e in t){var i=t[e].name;i!==o.MEGACARD&&(0!==t[e].bonus&&(i+=" (+ "+100*t[e].bonus+"%)"),i===o.GATE&&(this.cardTypeDropDownList.addItem(i),this.cardTypeDropDownList.setCallback(this.resetListCardRate,this)))}var n=this.controller.getConfig().recharge_config;this.initListRate(n)},resetListCardRate:function(t){var e=this.convertCardName(t.value),i=this.controller.getConfig().telco;for(var o in i)if(e===i[o].name){var n=i[o].bonus;if(0!==n)return this.onOffListRate(!0),void this.initListRateBonus(n)}this.onOffListRate()},initListRate:function(t){for(var e in this.listCardRateNode.removeAllChildren(!0),t){var i=cc.instantiate(this.rechargeCardRateItemPrefab);i.getComponent("AwardCardRateItem").init(t[e]),i.parent=this.listCardRateNode}},initListRateBonus:function(t){this.putAllChipToPool();var e=this.controller.getConfig().recharge_config;for(var i in e){var o=void 0;this.pool&&(o=this.pool.get()),o||(o=cc.instantiate(this.rechargeCardRateItemPrefab)),o.getComponent("AwardCardRateItem").initSale(e[i],t),o.parent=this.listCardRateBonusNode}},onOffListRate:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(this.listCardRateNode.active=!1,this.listCardRateBonusNode.active=!0):(this.listCardRateNode.active=!0,this.listCardRateBonusNode.active=!1)},convertCardName:function(t){var e=this.controller.getConfig().telco;for(var i in e){var o=e[i].name;if(0!==e[i].bonus&&t===(o+=" (+ "+100*e[i].bonus+"%)"))return e[i].name}return t},putAllChipToPool:function(){if(this.pool){var t=this.listCardRateBonusNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},onConfirmClick:function(){this.controller.Audio.playClick();var t=this.seriEditBox.string,e=this.codeEditBox.string;this.checkAllEditboxNotEmpty()?this.rechargeCard(t,e):this.controller.showDialogMessage(n.RECHARGE_MONEY_TITLE,n.MISSING_INFO)},rechargeCard:function(t,e){var i=this;this.controller.showProcessingNode();var o=this.convertCardName(this.cardTypeDropDownList.getValue()),s={token:this.controller.getToken(),user_id:this.controller.getUserId(),seri_card:t,number_card:e,type_card:r.getShortNameTelcoByName(o),register_code:this.controller.getRegisterCode(),mkt_code:this.controller.getMarketingCode()};this.controller.api.rechargeCard(s,function(t){i.controller.hideProcessingNode(),i.clear();var e=t.data.amount,o=String.format(n.RECHARGE_MONEY_SUCCESS,e,n.MONEY);i.controller.showDialogMessage(n.RECHARGE_MONEY_TITLE,o),a.addTrackPurchase(),a.addTrackLead()},function(t){i.controller.hideProcessingNode(),i.clear(),i.controller.showDialogMessage(n.RECHARGE_MONEY_TITLE,t.msg)})},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../util/BrowserUtil":"BrowserUtil","../../../util/Track":"Track","../../../util/Util":"Util"}],RechargeMoney:[function(t,e,i){"use strict";cc._RF.push(e,"83c47094F5CMqtjgtLhhP8C","RechargeMoney");t("../../../util/BrowserUtil");var o=t("../../../util/Util"),n=(t("../../../util/FormatUtil"),t("../../../util/Track"),t("../../../helper/Constant")),s=t("../../../helper/Message"),a=t("../../../ui/drop-down-list/DropDownList");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,seriEditBox:cc.EditBox,codeEditBox:cc.EditBox,captchaEditBox:cc.EditBox,captchaSprite:cc.Sprite,cardTypeDropDownList:a,moneyCardDropDownList:a,rechargeAllButtonNode:cc.Node,tutorialNode:cc.Node,rateNode:cc.Node,listCardRateNode:cc.Node,awardCardRateItemPrefab:cc.Prefab,successButtonStep1:cc.Node,step2Node:cc.Node,otpNode:cc.Node,bonusNode:cc.Node,bonus1Label:cc.Label,bonus2Label:cc.Label},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameRecharge=this.GameCenter.GameRecharge},onLoad:function(){this.editboxs=[this.seriEditBox,this.codeEditBox,this.captchaEditBox],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.awardCardRateItemPrefab);this.pool.put(e)}this.reset(),this.initData()},onEnable:function(){if(this.reset(),this.backButtonNode.active=!1,this.dataRechargeCard){var t=this.dataRechargeCard.seri_card,e=this.dataRechargeCard.number_card,i=o.getNameTelcoByShortName(this.dataRechargeCard.type_card),n=this.dataRechargeCard.amount;this.cardTypeDropDownList.selectByValue(i),this.moneyCardDropDownList.selectByValue(n),this.seriEditBox.string=t,this.codeEditBox.string=e}},onDisable:function(){this.backButtonNode.active=!0,this.dataRechargeCard=null},initData:function(){var t=this.GameCenter.getConfig().recharge_config,e=this.GameCenter.getConfig().recharge_provider;for(var i in this.initListRate(t),e){var o=e[i].name;this.cardTypeDropDownList.addItem(o,e[i]),this.cardTypeDropDownList.setCallback(this.resetListCardRate,this)}this.initMoneyDropList(),e&&e[0]&&this.cardTypeDropDownList.selectByValue(e[0].name)},initMoneyDropList:function(){this.moneyCardDropDownList.removeAllItem();var t=this.GameCenter.getConfig().recharge_config,e=o.getShortNameRechargeProviderByName(this.selectedCard);for(var i in t)if(e===n.ZING&&5e4===t[i].money);else{var s=t[i].vnd;this.moneyCardDropDownList.addItem(s,t[i]),this.moneyCardDropDownList.setCallback(this.resetListMoneyCard,this)}e===n.ZING?t&&t[1]&&this.moneyCardDropDownList.selectByValue(t[1].vnd):t&&t[0]&&this.moneyCardDropDownList.selectByValue(t[0].vnd)},initListRate:function(t){for(var e in this.putAllChipToPool(),t){var i=void 0;this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.awardCardRateItemPrefab)),i.getComponent("AwardCardRateItem").init(t[e]),i.parent=this.listCardRateNode}},initDataRechargeCard:function(t){this.dataRechargeCard=t},resetListCardRate:function(t){if(this.selectedCard!==t.value){var e=t.value;this.setCardSelected(e),this.initMoneyDropList()}},resetListMoneyCard:function(t){if(this.moneyCard!==t.value){var e=t.value;this.setMoneyCardSelected(e)}},onRechargeStep1Click:function(){this.GameCenter.Audio.playClick(),this.rechargeStep1()},onRechargeStep2Click:function(){this.GameCenter.Audio.playClick();var t=this.seriEditBox.string,e=this.codeEditBox.string,i=this.captchaEditBox.string;this.otpNode.active?this.checkAllEditboxNotEmpty()?"0"!==i?this.rechargeStep2(t,e,i):this.GameCenter.showDialogMessage(s.RECHARGE_MONEY_TITLE,s.CAPTCHA_MISSING):this.GameCenter.showDialogMessage(s.RECHARGE_MONEY_TITLE,s.MISSING_INFO):t&&e?this.rechargeStep2(t,e,i):this.GameCenter.showDialogMessage(s.RECHARGE_MONEY_TITLE,s.MISSING_INFO)},onBackClick:function(){this.GameRecharge.onBackClick()},rechargeStep1:function(){var t=this;this.GameCenter.Audio.playClick();var e={token:this.GameCenter.getToken(),type_card:o.getShortNameRechargeProviderByName(this.selectedCard),user_id:this.GameCenter.getUserId(),amount:this.moneyCard};this.GameCenter.showProcessingNode(),this.GameCenter.api.rechargeCardStep1(e,function(e){t.GameCenter.hideProcessingNode(),t.data=e.data,t.initCaptcha(t.data.data),t.successButtonStep1.active=!1,t.step2Node.active=!0},function(e){t.GameCenter.hideProcessingNode(),t.GameCenter.showDialogMessage(s.RECHARGE_MONEY_TITLE,e.msg)})},rechargeStep2:function(t,e,i){var n=this,a={token:this.GameCenter.getToken(),type_card:o.getShortNameRechargeProviderByName(this.selectedCard),user_id:this.GameCenter.getUserId(),amount:this.moneyCard,seri_card:t,number_card:e};this.GameCenter.showProcessingNode(),this.GameCenter.api.rechargeCard(a,function(t){n.GameCenter.hideProcessingNode(),n.GameCenter.showDialogMessage(s.RECHARGE_MONEY_TITLE,t.msg),n.reset()},function(t){n.GameCenter.hideProcessingNode(),n.GameCenter.showDialogMessage(s.RECHARGE_MONEY_TITLE,t.msg),n.reset()})},initCaptcha:function(t){if("false"===t||!1===t)this.otpNode.active=!1;else{this.otpNode.active=!0;var e=this,i=t,o=new Image;o.src=i,o.width=200,o.height=45,setTimeout(function(){var t=new cc.Texture2D;t.initWithElement(o),t.handleLoadedTexture();var i=new cc.SpriteFrame(t);e.captchaSprite.spriteFrame=i,e.captchaSprite.node.width=150,e.captchaSprite.node.height=40},100)}},setCardSelected:function(t){this.selectedCard=t,this.checkCardBonus(t)},setMoneyCardSelected:function(t){this.moneyCard=t},checkCardBonus:function(t){var e=this.GameCenter.getConfig().recharge_provider;for(var i in e)if(e[i].name===t){var o=e[i].bonus;0!==o?(this.bonusNode.active=!0,this.bonus1Label.string=100*o+"%",this.bonus2Label.string=100*o+"%"):this.bonusNode.active=!1}},putAllChipToPool:function(){if(this.pool){var t=this.listCardRateNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},onEditBoxBegan:function(){this.rateNode.active=!1,this.tutorialNode.active=!0},onEditBoxDidEnded:function(){this.rateNode.active=!0,this.tutorialNode.active=!1},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},isStep2:function(){return this.step2Node.active},reset:function(){this.successButtonStep1.active=!1,this.step2Node.active=!0,this.data=null,this.clear()},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../ui/drop-down-list/DropDownList":"DropDownList","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil","../../../util/Track":"Track","../../../util/Util":"Util"}],RechargeSMSForm:[function(t,e,i){"use strict";cc._RF.push(e,"9c3a2+LJ45CvI9bUNmlY/rg","RechargeSMSForm"),cc.Class({extends:cc.Component,properties:{smsItemPrefab:cc.Prefab,listSMSNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.initListData()},initListData:function(){this.listSMSNode.removeAllChildren(!0);var t=this.controller.getGeneralConfig();if(t){var e=t.SMS_RECHARGE;if(e){var i=e.service_number,o=e.content.MOBIFONE;if(o)for(var n in o){var s=cc.instantiate(this.smsItemPrefab);s.getComponent("SMSItem").init(this.controller,o[n],i),s.parent=this.listSMSNode}}}}}),cc._RF.pop()},{}],RechargeSMS:[function(t,e,i){"use strict";cc._RF.push(e,"445b8zu4FpNbIKaDxD8T6J1","RechargeSMS"),cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,smsItemPrefab:cc.Prefab,listSMSNode:cc.Node,listSMSViettelNode:cc.Node,vinaButtonOnNode:cc.Node,mobiButtonOnNode:cc.Node,viettelButtonOnNode:cc.Node,vinaButtonOffNode:cc.Node,mobiButtonOffNode:cc.Node,viettelButtonOffNode:cc.Node,contentSMSVinaMobiNode:cc.Node,contentSMSViettelNode:cc.Node,rechargeAllButtonNode:cc.Node},init:function(t){this.GameCenter=t},onLoad:function(){this.initListData()},onEnable:function(){this.backButtonNode.active=!1},onDisable:function(){this.backButtonNode.active=!0},initListData:function(){this.listSMSNode.removeAllChildren(!0);var t=this.GameCenter.getGeneralConfig();if(t){var e=t.SMS_RECHARGE;if(e){var i=e.service_number,o=e.content.MOBIFONE;if(o)for(var n in o){var s=cc.instantiate(this.smsItemPrefab);s.getComponent("SMSItem").init(this.GameCenter,o[n],i),s.parent=this.listSMSNode}}}},initViettel:function(){this.listSMSViettelNode.removeAllChildren(!0);var t=cc.instantiate(this.smsItemPrefab);t.getComponent("SMSItem").init(this.GameCenter,{CODE:"NAP ROY tendangnhap",MONEY:6e3,TELCO:"VIETTEL",VND:15e3},7778),t.parent=this.listSMSViettelNode},onVinaClick:function(){this.hideAllButton(),this.hideAllContent(),this.contentSMSVinaMobiNode.active=!0,this.vinaButtonOnNode.active=!0,this.vinaButtonOffNode.active=!1},onMobiClick:function(){this.hideAllButton(),this.hideAllContent(),this.contentSMSVinaMobiNode.active=!0,this.mobiButtonOnNode.active=!0,this.mobiButtonOffNode.active=!1},onViettelClick:function(){this.hideAllButton(),this.hideAllContent(),this.contentSMSViettelNode.active=!0,this.viettelButtonOnNode.active=!0,this.viettelButtonOffNode.active=!1},hideAllButton:function(){this.vinaButtonOnNode.active=!1,this.mobiButtonOnNode.active=!1,this.viettelButtonOnNode.active=!1,this.vinaButtonOffNode.active=!0,this.mobiButtonOffNode.active=!0,this.viettelButtonOffNode.active=!0},hideAllContent:function(){this.contentSMSViettelNode.active=!1,this.contentSMSVinaMobiNode.active=!1},onBackClick:function(){this.rechargeAllButtonNode.active=!0,this.node.active=!1}}),cc._RF.pop()},{}],RechargeUseMoney:[function(t,e,i){"use strict";cc._RF.push(e,"98904F2Gf1KWoy0vDPRVZJv","RechargeUseMoney");var o=t("./AwardCard"),n=t("./Transfer");t("../../../helper/Constant");cc.Class({extends:cc.Component,properties:{transferButtonNode:cc.Node,awardCardNode:cc.Node,transferNode:cc.Node,AwardCard:o,Transfer:n},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.AwardCard.init(t),this.Transfer.init(t)},onLoad:function(){this.initServiceConfig()},initServiceConfig:function(){var t=this.GameCenter.getConfig().SHOW_AGENT;this.transferButtonNode.active=!0===t||"true"===t},onAwardCardClick:function(){this.GameCenter.Audio.playClick(),this.hideAllContent(),this.awardCardNode.active=!0,this.AwardCard.showCardPhone(!0)},onAwardCardGameClick:function(){this.GameCenter.Audio.playClick(),this.showAwardContent()},showAwardContent:function(){this.hideAllContent(),this.awardCardNode.active=!0,this.AwardCard.showCardPhone(!1)},onTopUpClick:function(){this.GameCenterUI.showShopNode(),this.GameRecharge.onTopUpClick()},onTransferMoneyClick:function(){this.GameCenter.Audio.playClick(),this.showTranferContent()},showTranferContent:function(){this.hideAllContent(),this.transferNode.active=!0},hideAllContent:function(){this.awardCardNode.active=!1,this.transferNode.active=!1,this.node.active=!1}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","./AwardCard":"AwardCard","./Transfer":"Transfer"}],Recharge:[function(t,e,i){"use strict";cc._RF.push(e,"b03eetU7VRJsJMPrppIkE/f","Recharge");var o=t("./recharge/RechargeMoneyForm"),n=t("./recharge/RechargeSMSForm"),s=t("./recharge/RechargeBankingForm"),a=t("./recharge/RechargeGoldForm");cc.Class({extends:cc.Component,properties:{rechargeMoneyOnButtonNode:cc.Node,rechargeMoneyOffButtonNode:cc.Node,rechargeSMSOnButtonNode:cc.Node,rechargeSMSOffButtonNode:cc.Node,rechargeBankingOnButtonNode:cc.Node,rechargeBankingOffButtonNode:cc.Node,rechargeGoldOnButtonNode:cc.Node,rechargeGoldOffButtonNode:cc.Node,rechargeMoneyContentNode:cc.Node,rechargeSMSContentNode:cc.Node,rechargeBankingContentNode:cc.Node,rechargeGoldContentNode:cc.Node,RechargeMoneyForm:o,RechargeSMSForm:n,RechargeBankingForm:s,RechargeGoldForm:a},init:function(t){this.controller=t,this.RechargeMoneyForm.init(t),this.RechargeSMSForm.init(t),this.RechargeBankingForm.init(t),this.RechargeGoldForm.init(t)},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.showRechargeMoney()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},onRechargeMoneyClick:function(){this.controller.Audio.playClick(),this.showRechargeMoney()},showRechargeMoney:function(){this.initBeforeClick(),this.rechargeMoneyOnButtonNode.active=!0,this.rechargeMoneyOffButtonNode.active=!1,this.rechargeMoneyContentNode.active=!0},onRechargeSMSClick:function(){this.controller.showDialogMessage("N\u1ea1p SMS","H\u1ec7 th\u1ed1ng n\u1ea1p th\u1ebb \u0111ang b\u1ea3o tr\xec")},showRechargeSMS:function(){this.initBeforeClick(),this.rechargeSMSOnButtonNode.active=!0,this.rechargeSMSOffButtonNode.active=!1,this.rechargeSMSContentNode.active=!0},onRechargeBankingClick:function(){this.controller.Audio.playClick(),this.showRechargeBanking()},showRechargeBanking:function(){this.initBeforeClick(),this.rechargeBankingOnButtonNode.active=!0,this.rechargeBankingOffButtonNode.active=!1,this.rechargeBankingContentNode.active=!0},onRechargeGoldClick:function(){this.controller.Audio.playClick(),this.showRechargeGold()},showRechargeGold:function(){this.initBeforeClick(),this.rechargeGoldOnButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!1,this.rechargeGoldContentNode.active=!0},initBeforeClick:function(){this.hideAllOnButtons(),this.hideAllContents(),this.showAllOffButtons()},showAllOffButtons:function(){this.rechargeMoneyOffButtonNode.active=!0,this.rechargeSMSOffButtonNode.active=!0,this.rechargeBankingOffButtonNode.active=!0,this.rechargeGoldOffButtonNode.active=!0},hideAllOnButtons:function(){this.rechargeMoneyOnButtonNode.active=!1,this.rechargeSMSOnButtonNode.active=!1,this.rechargeBankingOnButtonNode.active=!1,this.rechargeGoldOnButtonNode.active=!1},hideAllContents:function(){this.rechargeMoneyContentNode.active=!1,this.rechargeSMSContentNode.active=!1,this.rechargeBankingContentNode.active=!1,this.rechargeGoldContentNode.active=!1}}),cc._RF.pop()},{"./recharge/RechargeBankingForm":"RechargeBankingForm","./recharge/RechargeGoldForm":"RechargeGoldForm","./recharge/RechargeMoneyForm":"RechargeMoneyForm","./recharge/RechargeSMSForm":"RechargeSMSForm"}],Register:[function(t,e,i){"use strict";cc._RF.push(e,"748dbaXS1lFlaig4jtYa+tA","Register");var o=t("../../../helper/Constant"),n=t("../../../helper/Message"),s=t("../../../util/BrowserUtil"),a=t("../../../util/Track"),r=t("../../../lib/md5"),c=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{usernameEditBox:cc.EditBox,passwordEditBox:cc.EditBox,rePasswordEditBox:cc.EditBox,captchaEditBox:cc.EditBox,captchaSprite:cc.Sprite,agreeLiscenceToggle:cc.Toggle},init:function(t){this.GameCenter=t},onLoad:function(){this.editboxs=[this.usernameEditBox,this.passwordEditBox,this.rePasswordEditBox,this.captchaEditBox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear(),this.GameCenter.initCaptcha(),cc.sys.isBrowser&&this.addEventKeyPress()},onResetCaptchaClick:function(){this.GameCenter.initCaptcha()},initCaptcha:function(t){this.data=t,this.session_id=t.session_id,this.checksum=t.checksum;var e=t.code,i=o.BASE64_TO_SPRITE+e;c.loadImageBase64(i,this.captchaSprite)},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){s.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onRegisterClick()}},keyHandle:function(t){return t.keyCode===o.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ENTER_KEY?(s.focusGame(),this.onRegisterClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ESC_KEY?(this.dialogForm.hideDialog(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(s.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),s.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&s.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},onRegisterClick:function(){this.GameCenter.Audio.playClick();var t=this.usernameEditBox.string,e=this.passwordEditBox.string,i=this.rePasswordEditBox.string,o=this.captchaEditBox.string.trim(),s=this.agreeLiscenceToggle.isChecked;""===t?this.GameCenter.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_MISSING_USERNAME):""===e?this.GameCenter.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_MISSING_PASSWORD):""===i?this.GameCenter.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_MISSING_REPASSWORD):e!==i?this.GameCenter.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_REPASSWORD_NOT_CORRECT):""===o?this.GameCenter.showDialogMessage(n.REGISTER_TITLE,n.LOGIN_MISSING_CAPTCHA):r(o.toUpperCase())!=this.checksum?this.GameCenter.showDialogMessage(n.LOGIN_TITLE,n.LOGIN_CAPTCHA_ERROR):s?this.register(t,e,o):this.GameCenter.showDialogMessage(n.REGISTER_TITLE,n.REGISTER_NOT_AGREE_TERM)},register:function(t,e,i){var o=this;this.GameCenter.showProcessingNode();var s={username:t,password:e,captcha:i,session_id:this.session_id||0,register_code:this.GameCenter.getRegisterCode(),mkt_code:this.GameCenter.getMarketingCode(),device_id:this.GameCenter.getDeviceID(),fid:this.GameCenter.getFID()};this.GameCenter.Login.getSign&&this.GameCenter.Login.getSign(s,t);this.GameCenter.api.register(s,function(t){o.GameCenter.GameCenterUI.hideRegisterFormNode(),o.GameCenter.initDataAndConnectSFS(t.data),a.addTrackCompleteRegistration()},function(t){o.GameCenter.hideProcessingNode(),o.GameCenter.showDialogMessage(n.REGISTER_TITLE,t.msg)})},onFacebookClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.loginFacebook()},onGoogleClick:function(){this.GameCenter.Audio.playClick()},onCloseClick:function(){this.node.active=!1},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../lib/md5":"md5","../../../util/BrowserUtil":"BrowserUtil","../../../util/Track":"Track","../../../util/Util":"Util"}],RoomItem:[function(t,e,i){"use strict";cc._RF.push(e,"760c4v9ytFLl7yvACeZGVDR","RoomItem");var o=t("../../object/RoomType"),n=t("../../util/FormatUtil"),s=t("../../helper/Constant"),a=t("../../helper/Message"),r=t("../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,moneyBgSpriteFrame:cc.SpriteFrame,goldBgSpriteFrame:cc.SpriteFrame,minBetLabel:cc.Label,enableColor:cc.Color,disableColor:cc.Color},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.GameRoom=t.GameRoom,this.data=e,this.minBet=e.min_bet,this.moneyType=e.money_type,this.status=e.status,this.moneyType==o.GOLD_CODE?this.bgSprite.spriteFrame=this.goldBgSpriteFrame:this.moneyType==o.MONEY_CODE&&(this.bgSprite.spriteFrame=this.moneyBgSpriteFrame),this.minBetLabel.string=n.nFormatter(this.minBet).replace("k","K"),this.initInteracable()},onLoad:function(){},onClick:function(){this.GameCenter.Audio.playClick();var t=this.GameCenter.getLastJoinedRoom().groupId,e=r.getGameConfigByRoomName(t),i=0;this.moneyType==o.GOLD_CODE?i=this.GameCenter.getGold():this.moneyType==o.MONEY_CODE&&(i=this.GameCenter.getMoney());var c=e[s.MIN_BUY]*this.minBet,h=e[s.MAX_BUY]*this.minBet,l=r.getRoomTypeByRoomTypeCode(this.moneyType),u=String.format(a.NOT_ENOUGH_MONEY_TO_JOIN_GAME,n.numberWithCommas(c),l);if(1==e[s.IS_BUY_IN]){var d=this.GameCenter.BuyInForm;c>i?this.GameCenter.showDialogMessage(a.JOIN_ROOM_TITLE,u):(h>i&&(h=i),d.setInvite(!1),d.setRound(this.minBet),d.setMinValue(c),d.setMaxValue(h),this.GameCenterUI.showBuyInFormNode())}else c>i?this.GameCenter.showDialogMessage(a.JOIN_ROOM_TITLE,u):(this.GameCenter.showProcessingSceneNode(),this.GameCenter.sfsManager.joinRoom(t,this.minBet,this.moneyType));this.GameRoom.minBet=this.minBet},initInteracable:function(){var t=this.GameCenter.getLastJoinedRoom().groupId,e=r.getGameConfigByRoomName(t);if(e){var i=e[s.MIN_BUY]*this.minBet;if(this.moneyType==o.GOLD_CODE)this.GameCenter.getGold()>=i?this.enableButton():this.disableButton();else this.GameCenter.getMoney()>=i?this.enableButton():this.disableButton()}},enableButton:function(){this.node.getComponent(cc.Button).interactable=!0,this.node.getComponent("ButtonHover").setEnable(!0),this.minBetLabel.node.color=this.enableColor},disableButton:function(){this.node.getComponent(cc.Button).interactable=!1,this.node.getComponent("ButtonHover").setEnable(!1),this.minBetLabel.node.color=this.disableColor}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],RoomType:[function(t,e,i){"use strict";cc._RF.push(e,"7a8caNDKwpE5qVeREkdyI05","RoomType");e.exports={MONEY:"MONEY",GOLD:"GOLD",MONEY_CODE:"0",GOLD_CODE:"1"},cc._RF.pop()},{}],Room:[function(t,e,i){"use strict";cc._RF.push(e,"2dc07cGtxVMYJEsyPipirBS","Room"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],SFS2X_API_JS:[function(t,e,i){"use strict";cc._RF.push(e,"7de7cJ2DC9NILawOF+fuBVN","SFS2X_API_JS");var o,n,s,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r={};n=(o={SmartFox:function(t){this._majVersion=1,this._minVersion=2,this._subVersion=0,this._socketEngine=new o.SocketEngine,this._eventDispatcher=new o.EventDispatcher,this._lagMonitor=null,this._log=o.Logger,this._inited=this._isJoining=!1,this._currentZone=null,this._clientDetails="JavaScript",this.version=this._majVersion+"."+this._minVersion+"."+this._subVersion,this.config=t,this.debug=!1,null!=this.config&&this.config.debug&&(this.debug=!0),this.logger=this._log,this.lastJoinedRoom=this.mySelf=this.buddyManager=this.userManager=this.roomManager=this.sessionToken=null,this._controllers={},this._initialize(),this._log.info("SmartFox instance ready!")}}).SmartFox,o.SmartFox.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},o.SmartFox.prototype.removeEventListener=function(t,e){this._eventDispatcher.removeEventListener(t,e)},o.SmartFox.prototype.setClientDetails=function(t,e){this.isConnected()?this._log.warn("SetClientDetails must be called before the connection is started"):(this._clientDetails=null!=t?t.replace(":"," "):"",this._clientDetails+=":",this._clientDetails+=null!=e?e.replace(":"," "):"")},o.SmartFox.prototype.connect=function(t,e,i){if(this.isConnected())this._log.warn("Already connected");else if(this._socketEngine.isConnecting)this._log.warn("A connection attempt is already in progress");else{var o=null!=this.config&&null!=this.config.host?this.config.host:null,n=null!=this.config&&null!=this.config.port?this.config.port:null,s=null!=this.config&&this.config.useSSL;null!=t&&(o=t),null!=e&&(n=e),null!=i&&(s=i),null==o||0==o.length?this._log.error("Invalid connection host/address"):"number"!=typeof n||0>n||65535<n?this._log.error("Invalid TCP port"):("boolean"!=typeof s&&(s=!1),this._socketEngine.connect(o,n,s))}},o.SmartFox.prototype.disconnect=function(){this.isConnected()?(0<this._socketEngine.reconnectionSeconds&&this.send(new o.Requests.System.ManualDisconnectionRequest),setTimeout(function(t){t._handleClientDisconnection(o.Utils.ClientDisconnectionReason.MANUAL)},100,this)):this._log.info("You are not connected")},o.SmartFox.prototype.enableLagMonitor=function(t,e,i){null==this.mySelf?this._log.warn("Lag Monitoring requires that you are logged in a Zone; please retry after completing the login process"):(null!=this._lagMonitor&&this._lagMonitor.destroy(),t&&(this._lagMonitor=new o.Utils.LagMonitor(this,e,i),this._lagMonitor.start()))},o.SmartFox.prototype.isConnected=function(){return null!=this._socketEngine&&this._socketEngine.isConnected},o.SmartFox.prototype.getMaxMessageSize=function(){return null!=this._socketEngine?this._socketEngine._maxMessageSize:0},o.SmartFox.prototype.send=function(t){if(this.isConnected()){if(null!=t.validate&&null!=t.execute){try{t.validate(this),t.execute(this)}catch(i){if(!(i instanceof o.Exceptions.SFSValidationError&&null!=i.getMessage))throw i;if(t=i.getMessage(),null!=i.getErrors()){t=t+":";for(var e=0;e<i.getErrors().length;e++)1<i.getErrors().length&&(t+=" "+(e+1)+")"),t+=" "+i.getErrors()[e]}return this._log.error("Request failed | "+t),!1}return this.debug&&(this._log.info("OUTGOING DATA\n"+o.DebugHelper.getDump(t.getMessage())),this._log.info("OUT > "+o.Requests.getRequestNameFromId(t._id))),this._socketEngine.send(t.getMessage()),!0}this._log.error("An invalid request was passed: "+t),this._log.debug("Object dump:\n"+o.DebugHelper.getDump(t))}else this._log.error("You are not connected. Request cannot be sent: "+o.Requests.getRequestNameFromId(t._id))},o.SmartFox.prototype.getRoomById=function(t){return this.roomManager.getRoomById(t)},o.SmartFox.prototype.getRoomByName=function(t){return this.roomManager.getRoomByName(t)},o.SmartFox.prototype.getRoomList=function(){return this.roomManager.getRoomList()},o.SmartFox.prototype.getRoomListFromGroup=function(t){return this.roomManager.getRoomListFromGroup(t)},o.SmartFox.prototype.getJoinedRooms=function(){return this.roomManager.getJoinedRooms()},o.SmartFox.prototype._initialize=function(){this._inited||(this._socketEngine=new o.SocketEngine(this),this._socketEngine.addEventListener(o.SocketEvent.CONNECT,this._onSocketConnect,this),this._socketEngine.addEventListener(o.SocketEvent.DISCONNECT,this._onSocketDisconnect,this),this._socketEngine.addEventListener(o.SocketEvent.DATA,this._onSocketData,this),this._socketEngine.addEventListener(o.SocketEvent.IOERROR,this._onSocketIOError,this),this._controllers[0]=new o.Controllers.SystemController(this),this._controllers[1]=new o.Controllers.ExtensionController(this),this._inited=!0,this._reset())},o.SmartFox.prototype._reset=function(t){null!=this.buddyManager&&this.buddyManager._clearAll(),this.userManager=new o.Managers.GlobalUserManager(this),this.roomManager=new o.Managers.RoomManager(this),this.buddyManager=new o.Managers.BuddyManager(this),null!=this._lagMonitor&&this._lagMonitor.destroy(),this._isJoining=!1,this.mySelf=this.lastJoinedRoom=this._currentZone=null,t&&(this.sessionToken=null)},o.SmartFox.prototype._dispatchEvent=function(t,e){this._eventDispatcher.dispatchEvent(t,e)},o.SmartFox.prototype._onSocketConnect=function(t){t.success?(t=new o.Requests.System.HandshakeRequest(this.version,this._clientDetails,t.isReconnection?this.sessionToken:null),this.send(t)):this._dispatchEvent(o.SFSEvent.CONNECTION,{success:!1})},o.SmartFox.prototype._onSocketDisconnect=function(t){this._dispatchEvent(o.SFSEvent.CONNECTION_LOST,{reason:t.reason}),this._reset(!0)},o.SmartFox.prototype._onSocketData=function(t){this.debug&&this._log.info("INCOMING DATA\n"+o.DebugHelper.getDump(t));var e=t[o.Controllers.CONTROLLER_ID],i=t[o.Controllers.ACTION_ID];t=t[o.Controllers.PARAM_ID];null==e?this._log.error("Message rejected: Controller ID is missing"):null==e?this._log.error("Message rejected: Action ID missing"):this._controllers[e].handleMessage(t,i)},o.SmartFox.prototype._onSocketIOError=function(t){this._dispatchEvent(o.SFSEvent.SOCKET_ERROR,{message:t})},o.SmartFox.prototype._handleHandShake=function(t){var e=t[o.Controllers.KEY_ERROR_CODE];null==e?(this.sessionToken=t[o.Requests.System.HandshakeRequest.KEY_SESSION_TOKEN],this._socketEngine._maxMessageSize=t[o.Requests.System.HandshakeRequest.KEY_MAX_MESSAGE_SIZE],this._socketEngine._isReconnecting?this._socketEngine._isReconnecting=!1:this._dispatchEvent(o.SFSEvent.CONNECTION,{success:!0})):(t={success:!1,errorMessage:o.ErrorCodes.getErrorMessage(e,t[o.Controllers.KEY_ERROR_PARAMS]),errorCode:e},this._dispatchEvent(o.SFSEvent.CONNECTION,t))},o.SmartFox.prototype._handleLogout=function(){this._reset(!1)},o.SmartFox.prototype._handleClientDisconnection=function(t){this.isConnected()&&this._socketEngine.disconnect(t)},function(){var t=!1,e=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},this.Class.extend=function i(o){function n(){!t&&this.init&&this.init.apply(this,arguments)}var s=this.prototype;t=!0;var a=new this;for(var r in t=!1,o)a[r]="function"==typeof o[r]&&"function"==typeof s[r]&&e.test(o[r])?function(t,e){return function(){var i=this._super;this._super=s[t];var o=e.apply(this,arguments);return this._super=i,o}}(r,o[r]):o[r];return n.prototype=a,n.prototype.constructor=n,n.extend=i,n}}.bind(r)();var c=0,h="";function l(t){return d(u(m(t)))}function u(t){return f(g(p(t),8*t.length))}function d(t){for(var e,i=c?"0123456789ABCDEF":"0123456789abcdef",o="",n=0;n<t.length;n++)e=t.charCodeAt(n),o+=i.charAt(e>>>4&15)+i.charAt(15&e);return o}function m(t){for(var e,i,o="",n=-1;++n<t.length;)e=t.charCodeAt(n),i=n+1<t.length?t.charCodeAt(n+1):0,55296<=e&&56319>=e&&56320<=i&&57343>=i&&(e=65536+((1023&e)<<10)+(1023&i),n++),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o}function p(t){for(var e=Array(t.length>>2),i=0;i<e.length;i++)e[i]=0;for(i=0;i<8*t.length;i+=8)e[i>>5]|=(255&t.charCodeAt(i/8))<<i%32;return e}function f(t){for(var e="",i=0;i<32*t.length;i+=8)e+=String.fromCharCode(t[i>>5]>>>i%32&255);return e}function g(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,o=-271733879,n=-1732584194,s=271733878,a=0;a<t.length;a+=16){var r=i,c=o,h=n,l=s;o=E(o=E(o=E(o=E(o=N(o=N(o=N(o=N(o=C(o=C(o=C(o=C(o=S(o=S(o=S(o=S(o,n=S(n,s=S(s,i=S(i,o,n,s,t[a+0],7,-680876936),o,n,t[a+1],12,-389564586),i,o,t[a+2],17,606105819),s,i,t[a+3],22,-1044525330),n=S(n,s=S(s,i=S(i,o,n,s,t[a+4],7,-176418897),o,n,t[a+5],12,1200080426),i,o,t[a+6],17,-1473231341),s,i,t[a+7],22,-45705983),n=S(n,s=S(s,i=S(i,o,n,s,t[a+8],7,1770035416),o,n,t[a+9],12,-1958414417),i,o,t[a+10],17,-42063),s,i,t[a+11],22,-1990404162),n=S(n,s=S(s,i=S(i,o,n,s,t[a+12],7,1804603682),o,n,t[a+13],12,-40341101),i,o,t[a+14],17,-1502002290),s,i,t[a+15],22,1236535329),n=C(n,s=C(s,i=C(i,o,n,s,t[a+1],5,-165796510),o,n,t[a+6],9,-1069501632),i,o,t[a+11],14,643717713),s,i,t[a+0],20,-373897302),n=C(n,s=C(s,i=C(i,o,n,s,t[a+5],5,-701558691),o,n,t[a+10],9,38016083),i,o,t[a+15],14,-660478335),s,i,t[a+4],20,-405537848),n=C(n,s=C(s,i=C(i,o,n,s,t[a+9],5,568446438),o,n,t[a+14],9,-1019803690),i,o,t[a+3],14,-187363961),s,i,t[a+8],20,1163531501),n=C(n,s=C(s,i=C(i,o,n,s,t[a+13],5,-1444681467),o,n,t[a+2],9,-51403784),i,o,t[a+7],14,1735328473),s,i,t[a+12],20,-1926607734),n=N(n,s=N(s,i=N(i,o,n,s,t[a+5],4,-378558),o,n,t[a+8],11,-2022574463),i,o,t[a+11],16,1839030562),s,i,t[a+14],23,-35309556),n=N(n,s=N(s,i=N(i,o,n,s,t[a+1],4,-1530992060),o,n,t[a+4],11,1272893353),i,o,t[a+7],16,-155497632),s,i,t[a+10],23,-1094730640),n=N(n,s=N(s,i=N(i,o,n,s,t[a+13],4,681279174),o,n,t[a+0],11,-358537222),i,o,t[a+3],16,-722521979),s,i,t[a+6],23,76029189),n=N(n,s=N(s,i=N(i,o,n,s,t[a+9],4,-640364487),o,n,t[a+12],11,-421815835),i,o,t[a+15],16,530742520),s,i,t[a+2],23,-995338651),n=E(n,s=E(s,i=E(i,o,n,s,t[a+0],6,-198630844),o,n,t[a+7],10,1126891415),i,o,t[a+14],15,-1416354905),s,i,t[a+5],21,-57434055),n=E(n,s=E(s,i=E(i,o,n,s,t[a+12],6,1700485571),o,n,t[a+3],10,-1894986606),i,o,t[a+10],15,-1051523),s,i,t[a+1],21,-2054922799),n=E(n,s=E(s,i=E(i,o,n,s,t[a+8],6,1873313359),o,n,t[a+15],10,-30611744),i,o,t[a+6],15,-1560198380),s,i,t[a+13],21,1309151649),n=E(n,s=E(s,i=E(i,o,n,s,t[a+4],6,-145523070),o,n,t[a+11],10,-1120210379),i,o,t[a+2],15,718787259),s,i,t[a+9],21,-343485551),i=T(i,r),o=T(o,c),n=T(n,h),s=T(s,l)}return[i,o,n,s]}function _(t,e,i,o,n,s){return T(I(T(T(e,t),T(o,s)),n),i)}function S(t,e,i,o,n,s,a){return _(e&i|~e&o,t,e,n,s,a)}function C(t,e,i,o,n,s,a){return _(e&o|i&~o,t,e,n,s,a)}function N(t,e,i,o,n,s,a){return _(e^i^o,t,e,n,s,a)}function E(t,e,i,o,n,s,a){return _(i^(e|~o),t,e,n,s,a)}function T(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function I(t,e){return t<<e|t>>>32-e}o.Utils={},o.Utils.md5_crypt=function(t,e){"undefined"!=typeof VarType&&(t=VarType.toStr(t),e=VarType.toStr(e));var i=h;h="";var o=chrsz;chrsz=8,"$1$"==e.substr(0,3)&&(e=e.substr(3)),(0>(a=e.indexOf("$"))||8<a)&&(a=8);for(var n=t+"$1$"+(e=e.substr(0,a)),s=str_md5(t+e+t),a=t.length;0<a;a-=16)n=16<=a?n+s:n+s.substr(0,a);for(a=t.length;0!=a;a>>=1)n=0!=(1&a)?n+String.fromCharCode(0):n+t.charAt(0);var r="$1$"+e+"$";for(s=str_md5(n),a=0;1e3>a;a++)n="",n=0!=(1&a)?n+t:n+s,0!=a%3&&(n+=e),0!=a%7&&(n+=t),n=0!=(1&a)?n+s:n+t,s=str_md5(n);for(s+=s.charAt(5),a=0;5>a;a++)n=s.charCodeAt(a)<<16|s.charCodeAt(a+6)<<8|s.charCodeAt(a+12),r+=md5_to64(n,4);return n=s.charCodeAt(11),r+=md5_to64(n,2),h=i,chrsz=o,r},o.Utils.ClientDisconnectionReason={IDLE:"idle",KICK:"kick",BAN:"ban",MANUAL:"manual",UNKNOWN:"unknown"},o.Utils.ClientDisconnectionReason.getReason=function(t){switch(t){case 0:return this.IDLE;case 1:return this.KICK;case 2:return this.BAN;case 3:return this.MANUAL;case 4:return this.UNKNOWN}},o.Utils.ArrayUtil={},o.Utils.ArrayUtil.objToArray=function(t){var e,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i},o.Utils.ArrayUtil.removeItem=function(t,e){var i=t.indexOf(e);-1<i&&t.splice(i,1)},o.Utils.HashTable=function(t){for(var e in this.length=0,this.items={},t)t.hasOwnProperty(e)&&(this.items[e]=t[e],this.length++)},o.Utils.HashTable.prototype.setItem=function(t,e){var i=void 0;return this.hasItem(t)?i=this.items[t]:this.length++,this.items[t]=e,i},o.Utils.HashTable.prototype.getItem=function(t){return this.hasItem(t)?this.items[t]:void 0},o.Utils.HashTable.prototype.hasItem=function(t){return this.items.hasOwnProperty(t)},o.Utils.HashTable.prototype.removeItem=function(t){if(this.hasItem(t))return s=this.items[t],this.length--,delete this.items[t],s},o.Utils.HashTable.prototype.keys=function(){var t,e=[];for(t in this.items)this.hasItem(t)&&e.push(t);return e},o.Utils.HashTable.prototype.values=function(){var t,e=[];for(t in this.items)this.hasItem(t)&&e.push(this.items[t]);return e},o.Utils.HashTable.prototype.each=function(t){for(var e in this.items)this.hasItem(e)&&t(e,this.items[e])},o.Utils.HashTable.prototype.clear=function(){this.items={},this.length=0},o.Utils.LagMonitor=function(t,e,i){(null==e||1>e)&&(e=4),(null==i||1>i)&&(i=10),this._sfs=t,this._valueQueue=[],this._interval=e,this._queueSize=i,this._thread=null,this._lastReqTime=-1},o.Utils.LagMonitor.prototype.start=function(){!this.isRunning()&&null!=this._sfs&&(this._thread=setInterval(this._threadRunner,1e3*this._interval,this))},o.Utils.LagMonitor.prototype.stop=function(){this.isRunning()&&(clearInterval(this._thread),this._thread=null,this._valueQueue=[])},o.Utils.LagMonitor.prototype.destroy=function(){this.stop(),this._sfs=null},o.Utils.LagMonitor.prototype.isRunning=function(){return null!=this._thread},o.Utils.LagMonitor.prototype.getLastPingTime=function(){return 0<this._valueQueue.length?this._valueQueue[this._valueQueue.length-1]:0},o.Utils.LagMonitor.prototype._threadRunner=function(t){t._lastReqTime=(new Date).getTime(),t._sfs.send(new o.Requests.System.PingPongRequest)},o.Utils.LagMonitor.prototype._onPingPong=function(){var t=(new Date).getTime()-this._lastReqTime;return this._valueQueue.length>=this._queueSize&&this._valueQueue.shift(),this._valueQueue.push(t),this._getAveragePingTime()},o.Utils.LagMonitor.prototype._getAveragePingTime=function(){if(0==this._valueQueue.length)return 0;for(var t=0,e=0;e<this._valueQueue.length;e++)t+=this._valueQueue[e];return t/this._valueQueue.length},o.Utils.BuddyOnlineState={ONLINE:0,OFFLINE:1,LEFT_THE_SERVER:2},o.Controllers={},o.Controllers.CONTROLLER_ID="c",o.Controllers.ACTION_ID="a",o.Controllers.PARAM_ID="p",o.Controllers.KEY_ERROR_CODE="ec",o.Controllers.KEY_ERROR_PARAMS="ep",o.Controllers.ROOM_PARAM="r",o.Controllers.USER_PARAM="u",o.Controllers.USER_COUNT_PARAM="uc",o.Controllers.SPECT_COUNT_PARAM="sc",o.Controllers.SystemController=function(t){this._sfs=t,this._id=0,this._requestHandlers={},this._initRequestHandlers(),this._log=o.Logger},o.Controllers.SystemController.prototype.getId=function(){return this._id},o.Controllers.SystemController.prototype.handleMessage=function(t,e){this._sfs.debug&&this._log.info("IN < "+this._getEvtName(e));var i=this._requestHandlers[e];null!=i?this[i](t):this._log.warn("Unknown message id: "+t.id)},o.Controllers.SystemController.prototype._initRequestHandlers=function(){this._requestHandlers[o.Requests.Handshake]="_fnHandshake",this._requestHandlers[o.Requests.Login]="_fnLogin",this._requestHandlers[o.Requests.Logout]="_fnLogout",this._requestHandlers[o.Requests.JoinRoom]="_fnJoinRoom",this._requestHandlers[o.Requests.CreateRoom]="_fnCreateRoom",this._requestHandlers[o.Requests.ChangeRoomName]="_fnChangeRoomName",this._requestHandlers[o.Requests.ChangeRoomPassword]="_fnChangeRoomPassword",this._requestHandlers[o.Requests.ChangeRoomCapacity]="_fnChangeRoomCapacity",this._requestHandlers[o.Requests.GenericMessage]="_fnGenericMessage",this._requestHandlers[o.Requests.SetRoomVariables]="_fnSetRoomVariables",this._requestHandlers[o.Requests.SetUserVariables]="_fnSetUserVariables",this._requestHandlers[o.Requests.SubscribeRoomGroup]="_fnSubscribeRoomGroup",this._requestHandlers[o.Requests.UnsubscribeRoomGroup]="_fnUnsubscribeRoomGroup",this._requestHandlers[o.Requests.SpectatorToPlayer]="_fnSpectatorToPlayer",this._requestHandlers[o.Requests.PlayerToSpectator]="_fnPlayerToSpectator",this._requestHandlers[o.Requests.InitBuddyList]="_fnInitBuddyList",this._requestHandlers[o.Requests.AddBuddy]="_fnAddBuddy",this._requestHandlers[o.Requests.RemoveBuddy]="_fnRemoveBuddy",this._requestHandlers[o.Requests.BlockBuddy]="_fnBlockBuddy",this._requestHandlers[o.Requests.GoOnline]="_fnGoOnline",this._requestHandlers[o.Requests.SetBuddyVariables]="_fnSetBuddyVariables",this._requestHandlers[o.Requests.FindRooms]="_fnFindRooms",this._requestHandlers[o.Requests.FindUsers]="_fnFindUsers",this._requestHandlers[o.Requests.InviteUsers]="_fnInviteUsers",this._requestHandlers[o.Requests.InvitationReply]="_fnInvitationReply",this._requestHandlers[o.Requests.QuickJoinGame]="_fnQuickJoinGame",this._requestHandlers[o.Requests.PingPong]="_fnPingPong",this._requestHandlers[o.Requests.SetUserPosition]="_fnSetUserPosition",this._requestHandlers[1e3]="_fnUserEnterRoom",this._requestHandlers[1001]="_fnUserCountChange",this._requestHandlers[1002]="_fnUserLost",this._requestHandlers[1003]="_fnRoomLost",this._requestHandlers[1004]="_fnUserExitRoom",this._requestHandlers[1005]="_fnClientDisconnection",this._requestHandlers[1007]="_fnSetMMOItemVariables"},o.Controllers.SystemController.prototype._getEvtName=function(t){return this._requestHandlers[t].substr(3)},o.Controllers.SystemController.prototype._fnHandshake=function(t){this._sfs._handleHandShake(t)},o.Controllers.SystemController.prototype._fnLogin=function(t){if(null==t[o.Controllers.KEY_ERROR_CODE]){this._populateRoomList(t[o.Requests.System.LoginRequest.KEY_ROOMLIST]),this._sfs.mySelf=new o.Entities.SFSUser(t[o.Requests.System.LoginRequest.KEY_ID],t[o.Requests.System.LoginRequest.KEY_USER_NAME],!0),this._sfs.mySelf._setUserManager(this._sfs.userManager),this._sfs.mySelf.privilegeId=t[o.Requests.System.LoginRequest.KEY_PRIVILEGE_ID],this._sfs.userManager._addUser(this._sfs.mySelf),this._sfs._socketEngine.reconnectionSeconds=t[o.Requests.System.LoginRequest.KEY_RECONNECTION_SECONDS];var e={};e.zone=t[o.Requests.System.LoginRequest.KEY_ZONE_NAME],e.user=this._sfs.mySelf,e.data=t[o.Requests.System.LoginRequest.KEY_PARAMS],this._sfs._dispatchEvent(o.SFSEvent.LOGIN,e)}else e=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(e,t[o.Controllers.KEY_ERROR_PARAMS]),this._sfs._dispatchEvent(o.SFSEvent.LOGIN_ERROR,{errorMessage:t,errorCode:e})},o.Controllers.SystemController.prototype._fnLogout=function(t){this._sfs._handleLogout();var e={};e.zone=t[o.Requests.System.LogoutRequest.KEY_ZONE_NAME],this._sfs._dispatchEvent(o.SFSEvent.LOGOUT,e)},o.Controllers.SystemController.prototype._fnJoinRoom=function(t){var e=this._sfs.roomManager,i={};this._sfs._isJoining=!1;var n=t[o.Controllers.KEY_ERROR_CODE];if(null==n){for(n=t[o.Requests.System.JoinRoomRequest.KEY_USER_LIST],(t=o.Entities.SFSRoom.fromArray(t[o.Requests.System.JoinRoomRequest.KEY_ROOM]))._setRoomManager(e),t=e._replaceRoom(t,e.containsGroup(t.groupId)),e=0;e<n.length;e++){var s=n[e],a=this._getOrCreateUser(s,!0,t);a._setPlayerId(s[3],t),t._addUser(a)}t.isJoined=!0,this._sfs.lastJoinedRoom=t,i.room=t,this._sfs._dispatchEvent(o.SFSEvent.ROOM_JOIN,i)}else t=o.ErrorCodes.getErrorMessage(n,t[o.Controllers.KEY_ERROR_PARAMS]),i.errorMessage=t,i.errorCode=n,this._sfs._dispatchEvent(o.SFSEvent.ROOM_JOIN_ERROR,i)},o.Controllers.SystemController.prototype._fnCreateRoom=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager;(t=o.Entities.SFSRoom.fromArray(t[o.Requests.System.CreateRoomRequest.KEY_ROOM]))._setRoomManager=i,i._addRoom(t),e.room=t,this._sfs._dispatchEvent(o.SFSEvent.ROOM_ADD,e)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_CREATION_ERROR,e)},o.Controllers.SystemController.prototype._fnChangeRoomName=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager.getRoomById(t[o.Requests.System.ChangeRoomNameRequest.KEY_ROOM]);null!=i?(e.oldName=i.name,this._sfs.roomManager._changeRoomName(i,t[o.Requests.System.ChangeRoomNameRequest.KEY_NAME]),e.room=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_NAME_CHANGE,e)):this._log.warn("RoomNameChange event, unknown Room id: "+rId)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_NAME_CHANGE_ERROR,e)},o.Controllers.SystemController.prototype._fnChangeRoomPassword=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager.getRoomById(t[o.Requests.System.ChangeRoomNameRequest.KEY_ROOM]);null!=i?(this._sfs.roomManager._changeRoomPasswordState(i,t[o.Requests.System.ChangeRoomPasswordStateRequest.KEY_PASS]),e.room=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_PASSWORD_STATE_CHANGE,e)):this._log.warn("RoomPasswordChange event, unknown Room id: "+rId)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_PASSWORD_STATE_CHANGE_ERROR,e)},o.Controllers.SystemController.prototype._fnChangeRoomCapacity=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=this._sfs.roomManager.getRoomById(t[o.Requests.System.ChangeRoomNameRequest.KEY_ROOM]);null!=i?(this._sfs.roomManager._changeRoomCapacity(i,t[o.Requests.System.ChangeRoomCapacityRequest.KEY_USER_SIZE],t[o.Requests.System.ChangeRoomCapacityRequest.KEY_SPEC_SIZE]),e.room=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_CAPACITY_CHANGE,e)):this._log.warn("RoomPasswordChange event, unknown Room id: "+rId)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_CAPACITY_CHANGE_ERROR,e)},o.Controllers.SystemController.prototype._fnGenericMessage=function(t){switch(t[o.Requests.System.GenericMessageRequest.KEY_MESSAGE_TYPE]){case o.Requests.GenericMessageType.PUBLIC_MSG:this._handlePublicMessage(t);break;case o.Requests.GenericMessageType.PRIVATE_MSG:this._handlePrivateMessage(t);break;case o.Requests.GenericMessageType.BUDDY_MSG:this._handleBuddyMessage(t);break;case o.Requests.GenericMessageType.MODERATOR_MSG:this._handleModMessage(t);break;case o.Requests.GenericMessageType.ADMING_MSG:this._handleAdminMessage(t);break;case o.Requests.GenericMessageType.OBJECT_MSG:this._handleObjectMessage(t)}},o.Controllers.SystemController.prototype._handlePublicMessage=function(t){var e={},i=t[o.Requests.System.GenericMessageRequest.KEY_ROOM_ID],n=this._sfs.roomManager.getRoomById(i);null!=n?(e.room=n,e.sender=this._sfs.userManager.getUserById(t[o.Requests.System.GenericMessageRequest.KEY_USER_ID]),e.message=t[o.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(o.SFSEvent.PUBLIC_MESSAGE,e)):this._log.warn("Unexpected, public message target Room doesn't exist; Room id: "+i)},o.Controllers.SystemController.prototype._handlePrivateMessage=function(t){var e={},i=this._sfs.userManager.getUserById(t[o.Requests.System.GenericMessageRequest.KEY_USER_ID]);if(null==i){if(null==t[o.Requests.System.GenericMessageRequest.KEY_SENDER_DATA])return void this._log.warn("Unexpected, private message has no sender details");i=o.Entities.SFSUser.fromArray(t[o.Requests.System.GenericMessageRequest.KEY_SENDER_DATA])}e.sender=i,e.message=t[o.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(o.SFSEvent.PRIVATE_MESSAGE,e)},o.Controllers.SystemController.prototype._handleBuddyMessage=function(t){var e={},i=t[o.Requests.System.GenericMessageRequest.KEY_USER_ID],n=this._sfs.buddyManager.getBuddyById(i);e.isItMe=this._sfs.mySelf.id==i,e.buddy=n,e.message=t[o.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_MESSAGE,e)},o.Controllers.SystemController.prototype._handleModMessage=function(t){var e={};e.sender=o.Entities.SFSUser.fromArray(t[o.Requests.System.GenericMessageRequest.KEY_SENDER_DATA]),e.message=t[o.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(o.SFSEvent.MODERATOR_MESSAGE,e)},o.Controllers.SystemController.prototype._handleAdminMessage=function(t){var e={};e.sender=o.Entities.SFSUser.fromArray(t[o.Requests.System.GenericMessageRequest.KEY_SENDER_DATA]),e.message=t[o.Requests.System.GenericMessageRequest.KEY_MESSAGE],e.data=t[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(o.SFSEvent.ADMIN_MESSAGE,e)},o.Controllers.SystemController.prototype._handleObjectMessage=function(t){var e={};e.sender=this._sfs.userManager.getUserById(t[o.Requests.System.GenericMessageRequest.KEY_USER_ID]),e.message=t[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS],this._sfs._dispatchEvent(o.SFSEvent.OBJECT_MESSAGE,e)},o.Controllers.SystemController.prototype._fnSetRoomVariables=function(t){var e=t[o.Requests.System.SetRoomVariablesRequest.KEY_VAR_ROOM],i=t[o.Requests.System.SetRoomVariablesRequest.KEY_VAR_LIST],n=[];if(null!=(t=this._sfs.roomManager.getRoomById(e))){for(e=0;e<i.length;e++){var s=o.Entities.Variables.SFSRoomVariable.fromArray(i[e]);t._setVariable(s),n.push(s.name)}(i={}).changedVars=n,i.room=t,this._sfs._dispatchEvent(o.SFSEvent.ROOM_VARIABLES_UPDATE,i)}else this._log.warn("RoomVariablesUpdate event, unknown Room id: "+e)},o.Controllers.SystemController.prototype._fnSetUserVariables=function(t){var e=t[o.Requests.System.SetUserVariablesRequest.KEY_USER],i=t[o.Requests.System.SetUserVariablesRequest.KEY_VAR_LIST],n=[];if(null!=(t=this._sfs.userManager.getUserById(e))){for(e=0;e<i.length;e++){var s=o.Entities.Variables.SFSUserVariable.fromArray(i[e]);t._setVariable(s),n.push(s.name)}(i={}).changedVars=n,i.user=t,this._sfs._dispatchEvent(o.SFSEvent.USER_VARIABLES_UPDATE,i)}else this._log.warn("UserVariablesUpdate event, unknown User id: "+e)},o.Controllers.SystemController.prototype._fnSubscribeRoomGroup=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.System.SubscribeRoomGroupRequest.KEY_GROUP_ID];t=t[o.Requests.System.SubscribeRoomGroupRequest.KEY_ROOM_LIST];this._sfs.roomManager.containsGroup(i)&&this._log.warn("Subscribe Group error: Group '"+i+"' already subscribed"),this._populateRoomList(t),e.groupId=i,e.newRooms=this._sfs.roomManager.getRoomListFromGroup(i),this._sfs._dispatchEvent(o.SFSEvent.ROOM_GROUP_SUBSCRIBE,e)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_GROUP_SUBSCRIBE_ERROR,e)},o.Controllers.SystemController.prototype._fnUnsubscribeRoomGroup=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.System.UnsubscribeRoomGroupRequest.KEY_GROUP_ID];this._sfs.roomManager.containsGroup(i)||this._log.warn("Unsubscribe Group error: Group '"+i+"' not found (maybe never subscribed, or the Room Manager doesn't contain Rooms belonging to that Group)"),this._sfs.roomManager._removeGroup(i),e.groupId=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_GROUP_UNSUBSCRIBE,e)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_GROUP_UNSUBSCRIBE_ERROR,e)},o.Controllers.SystemController.prototype._fnSpectatorToPlayer=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.System.SpectatorToPlayerRequest.KEY_ROOM_ID],n=t[o.Requests.System.SpectatorToPlayerRequest.KEY_USER_ID],s=(t=t[o.Requests.System.SpectatorToPlayerRequest.KEY_PLAYER_ID],this._sfs.userManager.getUserById(n)),a=this._sfs.roomManager.getRoomById(i);null!=a?null!=s?s.isJoinedInRoom(a)?(s._setPlayerId(t,a),e.room=a,e.user=s,e.playerId=t,this._sfs._dispatchEvent(o.SFSEvent.SPECTATOR_TO_PLAYER,e)):this._log.warn("SpectatorToPlayer event, user "+s+" not joined in Room ",a):this._log.warn("SpectatorToPlayer event, unknown User id: "+n):this._log.warn("SpectatorToPlayer event, unknown Room id: "+i)}else i=t[o.Controllers.KEY_ERROR_CODE],n=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=n,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.SPECTATOR_TO_PLAYER_ERROR,e)},o.Controllers.SystemController.prototype._fnPlayerToSpectator=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.System.PlayerToSpectatorRequest.KEY_ROOM_ID],n=(t=t[o.Requests.System.PlayerToSpectatorRequest.KEY_USER_ID],this._sfs.userManager.getUserById(t)),s=this._sfs.roomManager.getRoomById(i);null!=s?null!=n?n.isJoinedInRoom(s)?(n._setPlayerId(-1,s),e.room=s,e.user=n,this._sfs._dispatchEvent(o.SFSEvent.PLAYER_TO_SPECTATOR,e)):this._log.warn("PlayerToSpectator event, user "+n+" not joined in Room ",s):this._log.warn("PlayerToSpectator event, unknown User id: "+t):this._log.warn("PlayerToSpectator event, unknown Room id: "+i)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.PLAYER_TO_SPECTATOR_ERROR,e)},o.Controllers.SystemController.prototype._fnFindRooms=function(t){for(var e={},i=(t=t[o.Requests.System.FindRoomsRequest.KEY_FILTERED_ROOMS],[]),n=0;n<t.length;n++){var s=o.Entities.SFSRoom.fromArray(t[n]),a=this._sfs.roomManager.getRoomById(s.id);null!=a&&(s.isJoined=a.isJoined),i.push(s)}e.rooms=i,this._sfs._dispatchEvent(o.SFSEvent.ROOM_FIND_RESULT,e)},o.Controllers.SystemController.prototype._fnFindUsers=function(t){for(var e={},i=(t=t[o.Requests.System.FindUsersRequest.KEY_FILTERED_USERS],[]),n=this._sfs.mySelf,s=0;s<t.length;s++){var a=o.Entities.SFSUser.fromArray(t[s]);a.id==n.id&&(a=n),i.push(a)}e.users=i,this._sfs._dispatchEvent(o.SFSEvent.USER_FIND_RESULT,e)},o.Controllers.SystemController.prototype._fnInviteUsers=function(t){var e={},i=null!=t[o.Requests.Game.InviteUsersRequest.KEY_USER_ID]?this._sfs.userManager.getUserById(t[o.Requests.Game.InviteUsersRequest.KEY_USER_ID]):o.Entities.SFSUser.fromArray(t[o.Requests.Game.InviteUsersRequest.KEY_USER]),n=t[o.Requests.Game.InviteUsersRequest.KEY_INVITATION_ID];(t=new o.Entities.Invitation.SFSInvitation(i,this._sfs.mySelf,t[o.Requests.Game.InviteUsersRequest.KEY_TIME],t[o.Requests.Game.InviteUsersRequest.KEY_PARAMS])).id=n,e.invitation=t,this._sfs._dispatchEvent(o.SFSEvent.INVITATION,e)},o.Controllers.SystemController.prototype._fnInvitationReply=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=null,n=(i=null!=t[o.Requests.Game.InviteUsersRequest.KEY_USER_ID]?this._sfs.userManager.getUserById(t[o.Requests.Game.InviteUsersRequest.KEY_USER_ID]):o.Entities.SFSUser.fromArray(t[o.Requests.Game.InviteUsersRequest.KEY_USER]),t[o.Requests.Game.InviteUsersRequest.KEY_REPLY_ID]);t=t[o.Requests.Game.InviteUsersRequest.KEY_PARAMS];e.invitee=i,e.reply=n,e.data=t,this._sfs._dispatchEvent(o.SFSEvent.INVITATION_REPLY,e)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSEvent.INVITATION_REPLY_ERROR,e)},o.Controllers.SystemController.prototype._fnQuickJoinGame=function(t){if(null!=t[o.Controllers.KEY_ERROR_CODE]){var e=t[o.Controllers.KEY_ERROR_CODE],i=(t=o.ErrorCodes.getErrorMessage(e,t[o.Controllers.KEY_ERROR_PARAMS]),{});i.errorMessage=t,i.errorCode=e,this._sfs._dispatchEvent(o.SFSEvent.ROOM_JOIN_ERROR,i)}},o.Controllers.SystemController.prototype._fnPingPong=function(){var t=this._sfs._lagMonitor._onPingPong(),e={};e.lagValue=t,this._sfs._dispatchEvent(o.SFSEvent.PING_PONG,e)},o.Controllers.SystemController.prototype._fnSetUserPosition=function(t){var e={},i=this._sfs.roomManager.getRoomById(t[o.Requests.MMO.SetUserPositionRequest.KEY_ROOM]),n=t[o.Requests.MMO.SetUserPositionRequest.KEY_MINUS_USER_LIST],s=t[o.Requests.MMO.SetUserPositionRequest.KEY_PLUS_USER_LIST],a=t[o.Requests.MMO.SetUserPositionRequest.KEY_MINUS_ITEM_LIST],r=(t=t[o.Requests.MMO.SetUserPositionRequest.KEY_PLUS_ITEM_LIST],[]),c=[],h=[],l=[],u=0;if(null!=n)for(u=0;u<n.length;u++){var d=i.getUserById(n[u]);null!=d&&(i._removeUser(d),c.push(d))}if(null!=s)for(u=0;u<s.length;u++)d=s[u],n=this._getOrCreateUser(d,!0,i),r.push(n),i._addUser(n),null!=(d=d[5])&&(n.aoiEntryPoint=o.Entities.Data.Vec3D.fromArray(d));if(null!=a)for(u=0;u<a.length;u++)null!=(s=i.getMMOItem(a[u]))&&(i._removeItem(s),l.push(s));if(null!=t)for(u=0;u<t.length;u++)s=t[u],a=o.Entities.MMOItem.fromArray(s),h.push(a),i._addMMOItem(a),null!=(s=s[2])&&(a.aoiEntryPoint=o.Entities.Data.Vec3D.fromArray(s));e.addedItems=h,e.removedItems=l,e.removedUsers=c,e.addedUsers=r,e.room=i,this._sfs._dispatchEvent(o.SFSEvent.PROXIMITY_LIST_UPDATE,e)},o.Controllers.SystemController.prototype._fnSetMMOItemVariables=function(t){var e={},i=this._sfs.roomManager.getRoomById(t[o.Requests.MMO.SetMMOItemVariables.KEY_ROOM_ID]),n=t[o.Requests.MMO.SetMMOItemVariables.KEY_ITEM_ID],s=(t=t[o.Requests.MMO.SetMMOItemVariables.KEY_VAR_LIST],[]);if(null!=i&&null!=(n=i.getMMOItem(n))){for(var a=0;a<t.length;a++){var r=o.Entities.Variables.MMOItemVariable.fromArray(t[a]);n._setVariable(r),s.push(r.name)}e.changedVars=s,e.mmoItem=n,e.room=i,this._sfs._dispatchEvent(o.SFSEvent.MMOITEM_VARIABLES_UPDATE,e)}},o.Controllers.SystemController.prototype._fnUserEnterRoom=function(t){var e=this._sfs.roomManager.getRoomById(t[o.Controllers.ROOM_PARAM]);if(null!=e){t=this._getOrCreateUser(t[o.Controllers.USER_PARAM],!0,e),e._addUser(t);var i={};i.user=t,i.room=e,this._sfs._dispatchEvent(o.SFSEvent.USER_ENTER_ROOM,i)}},o.Controllers.SystemController.prototype._fnUserCountChange=function(t){var e=this._sfs.roomManager.getRoomById(t[o.Controllers.ROOM_PARAM]);if(null!=e){var i=t[o.Controllers.USER_COUNT_PARAM],n=0;null!=t.sc&&(n=t[o.Controllers.SPECT_COUNT_PARAM]),e._userCount=i,e._specCount=n,(t={}).room=e,t.uCount=i,t.sCount=n,this._sfs._dispatchEvent(o.SFSEvent.USER_COUNT_CHANGE,t)}},o.Controllers.SystemController.prototype._fnUserLost=function(t){if(null!=(t=this._sfs.userManager.getUserById(t[o.Controllers.USER_PARAM]))){var e=this._sfs.roomManager.getUserRooms(t);this._sfs.roomManager._removeUser(t),this._sfs.userManager._removeUser(t);for(var i=0;i<e.length;i++){var n={};n.user=t,n.room=e[i],this._sfs._dispatchEvent(o.SFSEvent.USER_EXIT_ROOM,n)}}},o.Controllers.SystemController.prototype._fnRoomLost=function(t){t=this._sfs.roomManager.getRoomById(t[o.Controllers.ROOM_PARAM]);var e=this._sfs.userManager;if(null!=t){this._sfs.roomManager._removeRoom(t);for(var i=t.getUserList(),n=0;n<i.length;n++)e._removeUser(i[n]);(e={}).room=t,this._sfs._dispatchEvent(o.SFSEvent.ROOM_REMOVE,e)}},o.Controllers.SystemController.prototype._fnUserExitRoom=function(t){var e=this._sfs.roomManager.getRoomById(t[o.Controllers.ROOM_PARAM]);t=this._sfs.userManager.getUserById(t[o.Controllers.USER_PARAM]);if(null!=e&&null!=t){e._removeUser(t),this._sfs.userManager._removeUser(t),t.isItMe&&e.isJoined&&(e.isJoined=!1,0==this._sfs.roomManager.getJoinedRooms().length&&(this._sfs.lastJoinedRoom=null),e._isManaged||this._sfs.roomManager._removeRoom(e));var i={};i.user=t,i.room=e,this._sfs._dispatchEvent(o.SFSEvent.USER_EXIT_ROOM,i)}else this._log.debug("Failed to handle UserExit event. Room: "+e+", User: "+t)},o.Controllers.SystemController.prototype._fnClientDisconnection=function(t){this._sfs._handleClientDisconnection(o.Utils.ClientDisconnectionReason.getReason(t.dr))},o.Controllers.SystemController.prototype._fnInitBuddyList=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.BuddyList.InitBuddyListRequest.KEY_BLIST],n=t[o.Requests.BuddyList.InitBuddyListRequest.KEY_MY_VARS],s=t[o.Requests.BuddyList.InitBuddyListRequest.KEY_BUDDY_STATES];for(this._sfs.buddyManager._clearAll(),t=0;t<i.length;t++){var a=o.Entities.SFSBuddy.fromArray(i[t]);this._sfs.buddyManager._addBuddy(a)}for(null!=s&&this._sfs.buddyManager._setBuddyStates(s),i=[],t=0;t<n.length;t++)s=o.Entities.Variables.SFSBuddyVariable.fromArray(n[t]),i.push(s);this._sfs.buddyManager._setMyVariables(i),this._sfs.buddyManager._setInited(),e.buddyList=this._sfs.buddyManager.getBuddyList(),e.myVariables=this._sfs.buddyManager.getMyVariables(),this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_LIST_INIT,e)}else n=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(n,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=n,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ERROR,e)},o.Controllers.SystemController.prototype._fnAddBuddy=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=o.Entities.SFSBuddy.fromArray(t[o.Requests.BuddyList.AddBuddyRequest.KEY_BUDDY_NAME]);this._sfs.buddyManager._addBuddy(i),e.buddy=i,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ADD,e)}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ERROR,e)},o.Controllers.SystemController.prototype._fnRemoveBuddy=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.BuddyList.RemoveBuddyRequest.KEY_BUDDY_NAME];null!=(t=this._sfs.buddyManager._removeBuddyByName(i))?(e.buddy=t,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_REMOVE,e)):this._log.warn("Unexpected: buddy removal failed, can't find "+i+" in local buddy list")}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ERROR,e)},o.Controllers.SystemController.prototype._fnBlockBuddy=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_NAME],n=this._sfs.buddyManager.getBuddyByName(i);null!=n?(n.blocked=t[o.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_BLOCK_STATE],e.buddy=n,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_BLOCK,e)):this._log.warn("Unexpected: buddy blocking/unblocking failed, can't find "+i+" in local buddy list")}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ERROR,e)},o.Controllers.SystemController.prototype._fnGoOnline=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){var i=t[o.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_NAME],n=this._sfs.buddyManager.getBuddyByName(i),s=i==this._sfs.mySelf.name,a=t[o.Requests.BuddyList.GoOnlineRequest.KEY_ONLINE],r=a==o.Utils.BuddyOnlineState.ONLINE,c=!0;if(s)this._sfs.buddyManager.getMyOnlineState()!=r&&(this._log.warn("Unexpected: myOnlineState is not in synch with the server; resynching to: "+r),this._sfs.buddyManager._setMyOnlineState(r));else{if(null==n)return void this._log.warn("Unexpected:  buddy '"+i+"' not found in local Buddy List when trying to set his online state");n.id=t[o.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_ID],n._setVariable(new o.Entities.Variables.SFSBuddyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_ONLINE,r)),a==o.Utils.BuddyOnlineState.LEFT_THE_SERVER&&n._clearVolatileVariables(),c=this._sfs.buddyManager.getMyOnlineState()}c&&(e.buddy=n,e.isItMe=s,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ONLINE_STATE_CHANGE,e))}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ERROR,e)},o.Controllers.SystemController.prototype._fnSetBuddyVariables=function(t){var e={};if(null==t[o.Controllers.KEY_ERROR_CODE]){for(var i=t[o.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_NAME],n=(t=t[o.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_VARS],this._sfs.buddyManager.getBuddyByName(i)),s=i==this._sfs.mySelf.name,a=[],r=[],c=!0,h=0;h<t.length;h++){var l=o.Entities.Variables.SFSBuddyVariable.fromArray(t[h]);r.push(l),a.push(l.name)}if(s)this._sfs.buddyManager._setMyVariables(r);else{if(null==n)return void this._log.warn("Unexpected:  buddy '"+i+"' not found in local Buddy List when trying to set his Buddy Variables");n._setVariables(r),c=sfs.buddyManager.getMyOnlineState()}c&&(e.buddy=n,e.isItMe=s,e.changedVars=a,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_VARIABLES_UPDATE,e))}else i=t[o.Controllers.KEY_ERROR_CODE],t=o.ErrorCodes.getErrorMessage(i,t[o.Controllers.KEY_ERROR_PARAMS]),e.errorMessage=t,e.errorCode=i,this._sfs._dispatchEvent(o.SFSBuddyEvent.BUDDY_ERROR,e)},o.Controllers.SystemController.prototype._populateRoomList=function(t){for(var e=this._sfs.roomManager,i=0;i<t.length;i++){var n=o.Entities.SFSRoom.fromArray(t[i]);e._replaceRoom(n)}},o.Controllers.SystemController.prototype._getOrCreateUser=function(t,e,i){null==e&&(e=!1);var n=this._sfs.userManager.getUserById(t[0]);if(null==n)(n=o.Entities.SFSUser.fromArray(t,i))._setUserManager(this._sfs.userManager);else if(null!=i)for(n._setPlayerId(t[3],i),t=t[4],i=0;i<t.length;i++)n._setVariable(o.Entities.Variables.SFSUserVariable.fromArray(t[i]));return e&&this._sfs.userManager._addUser(n),n},o.Controllers.ExtensionController=function(t){this.KEY_CMD="c",this.KEY_PARAMS="p",this.KEY_ROOM="r",this._sfs=t,this._id=1,this._log=o.Logger},o.Controllers.ExtensionController.prototype.getId=function(){return this._id},o.Controllers.ExtensionController.prototype.handleMessage=function(t){this._sfs.debug&&this._log.info("IN < ExtensionResponse");var e={};e.cmd=t[this.KEY_CMD],e.params=t[this.KEY_PARAMS],null!=t[this.KEY_ROOM]&&(e.sourceRoom=t[this.KEY_ROOM]),this._sfs._dispatchEvent(o.SFSEvent.EXTENSION_RESPONSE,e)},o.DebugHelper={},o.DebugHelper.getDump=function(t){return void 0==t?"<Null>":t instanceof Object?this._dumpObject(t):"<Not An Object>"},o.DebugHelper._dumpObject=function(t){var e=[];return function t(e,i,n){var s=null;for(var a in o.DebugHelper._getTabs(n),e){var r=e[a];if(null==r)s="Null";else{var c=r.constructor,h=void 0;c===Array||c===Object?(s=null,h=c===Array?"[Array]":"[Object]",t(r,i,n+1)):s=r.constructor===Number?"Num":r.constructor===Boolean?"Bool":r.constructor===String?"Str":"Unsupported"}i.push(o.DebugHelper._getTabs(n)+a+": "+(void 0==h?r:h)+(void 0==s?"":" ("+s+")"))}}(t,e,0),o.DebugHelper._prettyPrint(e)},o.DebugHelper._getTabs=function(t){if(0>=t)return"";if(1==t)return"\t";for(var e="",i=0;i<t;i++)e+="\t";return e},o.DebugHelper._prettyPrint=function(t){for(var e="",i=t.length-1;-1<i;i--)e+=t[i]+"\n";return e},o.Entities={},o.Entities.Data={},o.Entities.Variables={},o.Entities.Match={},o.Entities.Invitation={},o.Entities.SFSRoom=r.Class.extend({init:function(t,e,i){this.id=t,this.name=e,this.groupId=null!=i?i:"default",this.isPasswordProtected=this.isJoined=this.isHidden=this.isGame=!1,this._specCount=this._userCount=this.maxSpectators=this.maxUsers=0,this._isManaged=!0,this.variables={},this.properties={},this._userManager=new o.Managers.UserManager,this._roomManager=null},toString:function(){return"[Room: "+this.name+", Id: "+this.id+", Group id: "+this.groupId+"]"},getUserCount:function(){return this.isJoined?this.isGame?this.getPlayerList().length:this._userManager.getUserCount():this._userCount},getSpectatorCount:function(){return this.isGame?this.isJoined?this.getSpectatorList().length:this._specCount:0},getCapacity:function(){return this.maxUsers+this.maxSpectators},getUserByName:function(t){return this._userManager.getUserByName(t)},getUserById:function(t){return this._userManager.getUserById(t)},containsUser:function(t){return this._userManager.containsUser(t)},getUserList:function(){return this._userManager.getUserList()},getPlayerList:function(){for(var t=[],e=this._userManager.getUserList(),i=0;i<e.length;i++){var o=e[i];o.isPlayerInRoom(this)&&t.push(o)}return t},getSpectatorList:function(){for(var t=[],e=this._userManager.getUserList(),i=0;i<e.length;i++){var o=e[i];o.isSpectatorInRoom(this)&&t.push(o)}return t},getVariable:function(t){return this.variables[t]},containsVariable:function(t){return null!=this.variables[t]},getVariables:function(){return o.Utils.ArrayUtil.objToArray(this.variables)},getRoomManager:function(){return this._roomManager},_addUser:function(t){this._userManager._addUser(t)},_removeUser:function(t){this._userManager._removeUser(t)},_setVariables:function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},_setVariable:function(t){t.isNull()?delete this.variables[t.name]:this.variables[t.name]=t},_setRoomManager:function(t){if(null!=this._roomManager)throw new o.Exceptions.SFSError("Room Manager already assigned to Room "+this.toString());this._roomManager=t},_merge:function(t){for(var e in this.variables=[],t.variables)this.variables[e]=t.variables[e];for(this._userManager._clearAll(),t=t.getUserList(),e=0;e<t.length;e++)this._userManager._addUser(t[e])}}),o.Entities.SFSRoom.fromArray=function(t){var e=14==t.length,i=null;(i=e?new o.Entities.MMORoom(t[0],t[1],t[2]):new o.Entities.SFSRoom(t[0],t[1],t[2])).isGame=t[3],i.isHidden=t[4],i.isPasswordProtected=t[5],i._userCount=t[6],i.maxUsers=t[7];var n=t[8];if(null!=n)for(var s=0;s<n.length;s++){var a=o.Entities.Variables.SFSRoomVariable.fromArray(n[s]);i._setVariable(a)}return i.isGame&&(i._specCount=t[9],i.maxSpectators=t[10]),e&&(i.defaultAOI=o.Entities.Data.Vec3D.fromArray(t[11]),null!=t[13]&&(i.lowerMapLimit=o.Entities.Data.Vec3D.fromArray(t[12]),i.higherMapLimit=o.Entities.Data.Vec3D.fromArray(t[13]))),i},o.Entities.MMORoom=o.Entities.SFSRoom.extend({init:function(t,e,i){this._super(t,e,i),this.higherMapLimit=this.lowerMapLimit=this.defaultAOI=null,this._itemsById={}},getMMOItem:function(t){return this._itemsById[t]},getMMOItems:function(){return o.Utils.ArrayUtil.objToArray(this._itemsById)},_addMMOItem:function(t){this._itemsById[t.id]=t},_removeItem:function(t){delete this._itemsById[t]}}),o.Entities.SFSUser=function(t,e,i){this.id=t,this.name=e,this.isItMe=null!=i&&i,this.privilegeId=0,this.properties={},this.aoiEntryPoint=null,this.variables={},this._playerIdByRoomId={},this._userManager=null},o.Entities.SFSUser.fromArray=function(t,e){var i=new o.Entities.SFSUser(t[0],t[1]);i.privilegeId=t[2],null!=e&&i._setPlayerId(t[3],e);var n=t[4];if(null!=n)for(var s=0;s<n.length;s++){var a=o.Entities.Variables.SFSUserVariable.fromArray(n[s]);i._setVariable(a)}return i},o.Entities.SFSUser.prototype.toString=function(){return"[User: "+this.name+", Id: "+this.id+", Is me: "+this.isItMe+"]"},o.Entities.SFSUser.prototype.isJoinedInRoom=function(t){return t.containsUser(this)},o.Entities.SFSUser.prototype.isGuest=function(){return this.privilegeId==o.Entities.UserPrivileges.GUEST},o.Entities.SFSUser.prototype.isStandardUser=function(){return this.privilegeId==o.Entities.UserPrivileges.STANDARD},o.Entities.SFSUser.prototype.isModerator=function(){return this.privilegeId==o.Entities.UserPrivileges.MODERATOR},o.Entities.SFSUser.prototype.isAdmin=function(){return this.privilegeId==o.Entities.UserPrivileges.ADMINISTRATOR},o.Entities.SFSUser.prototype.isPlayer=function(){return this.isPlayerInRoom(this._userManager._sfs.lastJoinedRoom)},o.Entities.SFSUser.prototype.isSpectator=function(){return this.isSpectatorInRoom(this._userManager._sfs.lastJoinedRoom)},o.Entities.SFSUser.prototype.getPlayerId=function(t){var e=0;return null!=this._playerIdByRoomId[t.id]&&(e=this._playerIdByRoomId[t.id]),e},o.Entities.SFSUser.prototype.isPlayerInRoom=function(t){return!(null==t||!t.isGame)&&0<this._playerIdByRoomId[t.id]},o.Entities.SFSUser.prototype.isSpectatorInRoom=function(t){return!(null==t||!t.isGame)&&0>this._playerIdByRoomId[t.id]},o.Entities.SFSUser.prototype.getVariable=function(t){return this.variables[t]},o.Entities.SFSUser.prototype.containsVariable=function(t){return null!=this.variables[t]},o.Entities.SFSUser.prototype.getVariables=function(){return o.Utils.ArrayUtil.objToArray(this.variables)},o.Entities.SFSUser.prototype.getUserManager=function(){return this._userManager},o.Entities.SFSUser.prototype._setPlayerId=function(t,e){this._playerIdByRoomId[e.id]=t},o.Entities.SFSUser.prototype._removePlayerId=function(t){delete this._playerIdByRoomId[t.id]},o.Entities.SFSUser.prototype._setVariables=function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},o.Entities.SFSUser.prototype._setVariable=function(t){t.isNull()?delete this.variables[t.name]:this.variables[t.name]=t},o.Entities.SFSUser.prototype._setUserManager=function(t){if(null!=this._userManager)throw new o.Exceptions.SFSError("User Manager already assigned to user "+this.toString());this._userManager=t},o.Entities.SFSBuddy=function(t,e,i,o){this.id=t,this.name=e,this.blocked=null!=i&&i,this.temp=null!=o&&o,this.variables={}},o.Entities.SFSBuddy.fromArray=function(t){for(var e=new o.Entities.SFSBuddy(t[0],t[1],t[2],4<t.length&&t[4]),i=(t=t[3],0);i<t.length;i++){var n=o.Entities.Variables.SFSBuddyVariable.fromArray(t[i]);e._setVariable(n)}return e},o.Entities.SFSBuddy.prototype.toString=function(){return"[Buddy: "+this.name+", Id: "+this.id+"]"},o.Entities.SFSBuddy.prototype.isBlocked=function(){return this.blocked},o.Entities.SFSBuddy.prototype.isTemp=function(){return this.temp},o.Entities.SFSBuddy.prototype.isOnline=function(){var t=!0,e=o.Entities.Variables.ReservedBuddyVariables.BV_ONLINE;return this.containsVariable(e)&&(t=this.getVariable(e).value),t&&-1<this.id},o.Entities.SFSBuddy.prototype.getState=function(){var t=o.Entities.Variables.ReservedBuddyVariables.BV_STATE;return this.containsVariable(t)?this.getVariable(t).value:null},o.Entities.SFSBuddy.prototype.getNickName=function(){var t=o.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME;return this.containsVariable(t)?this.getVariable(t).value:null},o.Entities.SFSBuddy.prototype.getVariable=function(t){return this.variables[t]},o.Entities.SFSBuddy.prototype.containsVariable=function(t){return null!=this.variables[t]},o.Entities.SFSBuddy.prototype.getVariables=function(){return o.Utils.ArrayUtil.objToArray(this.variables)},o.Entities.SFSBuddy.prototype.getOfflineVariables=function(){var t,e=[];for(t in this.variables){var i=this.variables[t];i.name.charAt(0)==o.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX&&e.push(i)}return e},o.Entities.SFSBuddy.prototype.getOnlineVariables=function(){var t,e=[];for(t in this.variables){var i=this.variables[t];i.name.charAt(0)!=o.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX&&e.push(i)}return e},o.Entities.SFSBuddy.prototype._setVariables=function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},o.Entities.SFSBuddy.prototype._setVariable=function(t){t.isNull()?this._removeVariable(t.name):this.variables[t.name]=t},o.Entities.SFSBuddy.prototype._removeVariable=function(t){delete this.variables[t]},o.Entities.SFSBuddy.prototype._clearVolatileVariables=function(){for(var t in this.variables){var e=this.variables[t];e.name.charAt(0)!=o.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX&&this._removeVariable(e.name)}},o.Entities.MMOItem=function(t){this.id=t,this.aoiEntryPoint=null,this.variables={}},o.Entities.MMOItem.fromArray=function(t){var e=new o.Entities.MMOItem(t[0]);if(null!=(t=t[1]))for(var i=0;i<t.length;i++){var n=o.Entities.Variables.MMOItemVariable.fromArray(t[i]);e._setVariable(n)}return e},o.Entities.MMOItem.prototype.toString=function(){return"[Item: "+this.id+"]"},o.Entities.MMOItem.prototype.getVariable=function(t){return this.variables[t]},o.Entities.MMOItem.prototype.containsVariable=function(t){return null!=this.variables[t]},o.Entities.MMOItem.prototype.getVariables=function(){return o.Utils.ArrayUtil.objToArray(this.variables)},o.Entities.MMOItem.prototype._setVariables=function(t){for(var e=0;e<t.length;e++)this._setVariable(t[e])},o.Entities.MMOItem.prototype._setVariable=function(t){null!=t&&(t.isNull()?delete this.variables[t.name]:this.variables[t.name]=t)},o.Entities.Variables.SFSUserVariable=r.Class.extend({init:function(t,e,i){this.name=t,this.value=e,this._setType(i)},toString:function(){return"[UserVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"},toArray:function(){return[this.name,o.Entities.Variables.VariableType.getTypeIdFromName(this.type),this.value]},isNull:function(){return o.Entities.Variables.VariableType.getTypeIdFromName(this.type)==o.Entities.Variables.VariableType.NULL},_setType:function(t){null==t&&(t=-1),-1<t?this.type=this.getTypeName(t):null==this.value?this.type=this.getTypeName(o.Entities.Variables.VariableType.NULL):"boolean"==(t=a(this.value))?this.type=this.getTypeName(o.Entities.Variables.VariableType.BOOL):"number"==t?this.type=this.value===+this.value&&this.value===(0|this.value)?this.getTypeName(o.Entities.Variables.VariableType.INT):this.getTypeName(o.Entities.Variables.VariableType.DOUBLE):"string"==t?this.type=this.getTypeName(o.Entities.Variables.VariableType.STRING):"object"==t&&(this.type=this.value instanceof Array?this.getTypeName(o.Entities.Variables.VariableType.ARRAY):this.getTypeName(o.Entities.Variables.VariableType.OBJECT))},getTypeName:function(t){return o.Entities.Variables.VariableType.getTypeName(t)}}),o.Entities.Variables.SFSUserVariable.fromArray=function(t){return new o.Entities.Variables.SFSUserVariable(t[0],t[2],t[1])},o.Entities.Variables.SFSRoomVariable=o.Entities.Variables.SFSUserVariable.extend({init:function(t,e,i){this._super(t,e,i),this.isPersistent=this.isPrivate=!1},toString:function(){return"[RoomVar: "+this.name+", Type: "+this.type+", Value: "+this.value+", Is private: "+this.isPrivate+"]"},toArray:function(){var t=this._super();return t.push(this.isPrivate),t.push(this.isPersistent),t}}),o.Entities.Variables.SFSRoomVariable.fromArray=function(t){var e=new o.Entities.Variables.SFSRoomVariable(t[0],t[2],t[1]);return e.isPrivate=t[3],e.isPersistent=t[4],e},o.Entities.Variables.SFSBuddyVariable=o.Entities.Variables.SFSUserVariable.extend({init:function(t,e,i){this._super(t,e,i)},toString:function(){return"[BuddyVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"},isOffline:function(){return this.name.charAt(0)==o.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX}}),o.Entities.Variables.SFSBuddyVariable.OFFLINE_PREFIX="$",o.Entities.Variables.SFSBuddyVariable.fromArray=function(t){return new o.Entities.Variables.SFSBuddyVariable(t[0],t[2],t[1])},o.Entities.Variables.MMOItemVariable=o.Entities.Variables.SFSUserVariable.extend({init:function(t,e,i){this._super(t,e,i)},toString:function(){return"[ItemVar: "+this.name+", Type: "+this.type+", Value: "+this.value+"]"}}),o.Entities.Variables.MMOItemVariable.fromArray=function(t){return new o.Entities.Variables.MMOItemVariable(t[0],t[2],t[1])},o.Entities.Variables.VariableType={_typeStrings:"Null Bool Int Double String Object Array".split(" "),NULL:0,BOOL:1,INT:2,DOUBLE:3,STRING:4,OBJECT:5,ARRAY:6},o.Entities.Variables.VariableType.getTypeName=function(t){return this._typeStrings[t]},o.Entities.Variables.VariableType.getTypeIdFromName=function(t){return this._typeStrings.indexOf(t)},o.Entities.Variables.ReservedBuddyVariables={},o.Entities.Variables.ReservedBuddyVariables.BV_ONLINE="$__BV_ONLINE__",o.Entities.Variables.ReservedBuddyVariables.BV_STATE="$__BV_STATE__",o.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME="$__BV_NICKNAME__",o.Entities.Variables.ReservedRoomVariables={},o.Entities.Variables.ReservedRoomVariables.RV_GAME_STARTED="$GS",o.Entities.UserPrivileges={},o.Entities.UserPrivileges.GUEST=0,o.Entities.UserPrivileges.STANDARD=1,o.Entities.UserPrivileges.MODERATOR=2,o.Entities.UserPrivileges.ADMINISTRATOR=3,o.Entities.Match.MatchExpression=function(t,e,i){this.varName=t,this.condition=e,this.value=i,this._parent=this.next=this.logicOp=null},o.Entities.Match.MatchExpression.chainedMatchExpression=function(t,e,i,n,s){return(t=new o.Entities.Match.MatchExpression(t,e,i)).logicOp=n,t._parent=s,t},o.Entities.Match.MatchExpression.prototype.and=function(t,e,i){return this.next=o.Entities.Match.MatchExpression.chainedMatchExpression(t,e,i,o.Entities.Match.LogicOperator.AND,this)},o.Entities.Match.MatchExpression.prototype.or=function(t,e,i){return this.next=o.Entities.Match.MatchExpression.chainedMatchExpression(t,e,i,o.Entities.Match.LogicOperator.OR,this)},o.Entities.Match.MatchExpression.prototype.hasNext=function(){return null!=this.next},o.Entities.Match.MatchExpression.prototype.rewind=function(){for(var t=this;null!=t._parent;)t=t._parent;return t},o.Entities.Match.MatchExpression.prototype.toString=function(){for(var t=this.rewind(),e=t._asString();t.hasNext();)e+=(t=t.next)._asString();return e},o.Entities.Match.MatchExpression.prototype._asString=function(){var t="";return null!=this.logicOp&&(t+=" "+this.logicOp.id+" "),(t=t+"("+this.varName+" "+this.condition.symbol+" "+("string"==typeof this.value?"'"+this.value+"'":this.value))+")"},o.Entities.Match.MatchExpression.prototype._toArray=function(){var t=this.rewind(),e=[];for(e.push(t._expressionAsArray());t.hasNext();)t=t.next,e.push(t._expressionAsArray());return e},o.Entities.Match.MatchExpression.prototype._expressionAsArray=function(){var t=[];return null!=this.logicOp?t.push(this.logicOp.id):t.push(null),t.push(this.varName),t.push(this.condition.type),t.push(this.condition.symbol),t.push(this.value),t},o.Entities.Match.LogicOperator=function(t){this.id=t},o.Entities.Match.LogicOperator.AND=new o.Entities.Match.LogicOperator("AND"),o.Entities.Match.LogicOperator.OR=new o.Entities.Match.LogicOperator("OR"),o.Entities.Match.BoolMatch=function(t){this.type=0,this.symbol=t},o.Entities.Match.BoolMatch.EQUALS=new o.Entities.Match.BoolMatch("=="),o.Entities.Match.BoolMatch.NOT_EQUALS=new o.Entities.Match.BoolMatch("!="),o.Entities.Match.NumberMatch=function(t){this.type=1,this.symbol=t},o.Entities.Match.NumberMatch.EQUALS=new o.Entities.Match.NumberMatch("=="),o.Entities.Match.NumberMatch.NOT_EQUALS=new o.Entities.Match.NumberMatch("!="),o.Entities.Match.NumberMatch.GREATER_THAN=new o.Entities.Match.NumberMatch(">"),o.Entities.Match.NumberMatch.GREATER_THAN_OR_EQUAL_TO=new o.Entities.Match.NumberMatch(">="),o.Entities.Match.NumberMatch.LESS_THAN=new o.Entities.Match.NumberMatch("<"),o.Entities.Match.NumberMatch.LESS_THAN_OR_EQUAL_TO=new o.Entities.Match.NumberMatch("<="),o.Entities.Match.StringMatch=function(t){this.type=2,this.symbol=t},o.Entities.Match.StringMatch.EQUALS=new o.Entities.Match.StringMatch("=="),o.Entities.Match.StringMatch.NOT_EQUALS=new o.Entities.Match.StringMatch("!="),o.Entities.Match.StringMatch.CONTAINS=new o.Entities.Match.StringMatch("contains"),o.Entities.Match.StringMatch.STARTS_WITH=new o.Entities.Match.StringMatch("startsWith"),o.Entities.Match.StringMatch.ENDS_WITH=new o.Entities.Match.StringMatch("endsWith"),o.Entities.Match.RoomProperties={},o.Entities.Match.RoomProperties.NAME="${N}",o.Entities.Match.RoomProperties.GROUP_ID="${G}",o.Entities.Match.RoomProperties.MAX_USERS="${MXU}",o.Entities.Match.RoomProperties.MAX_SPECTATORS="${MXS}",o.Entities.Match.RoomProperties.USER_COUNT="${UC}",o.Entities.Match.RoomProperties.SPECTATOR_COUNT="${SC}",o.Entities.Match.RoomProperties.IS_GAME="${ISG}",o.Entities.Match.RoomProperties.IS_PRIVATE="${ISP}",o.Entities.Match.RoomProperties.HAS_FREE_PLAYER_SLOTS="${HFP}",o.Entities.Match.RoomProperties.IS_TYPE_SFSGAME="${IST}",o.Entities.Match.UserProperties={},o.Entities.Match.UserProperties.NAME="${N}",o.Entities.Match.UserProperties.IS_PLAYER="${ISP}",o.Entities.Match.UserProperties.IS_SPECTATOR="${ISS}",o.Entities.Match.UserProperties.IS_NPC="${ISN}",o.Entities.Match.UserProperties.PRIVILEGE_ID="${PRID}",o.Entities.Match.UserProperties.IS_IN_ANY_ROOM="${IAR}",o.Entities.Invitation.SFSInvitation=function(t,e,i,o){this.id=-1,this.inviter=t,this.invitee=e,this.secondsForAnswer=null!=i?i:15,this.params=o},o.Entities.Invitation.InvitationReply={},o.Entities.Invitation.InvitationReply.ACCEPT=0,o.Entities.Invitation.InvitationReply.REFUSE=1,o.Entities.Data.Vec3D=function(t,e,i){this.px=null!=t?t:0,this.py=null!=e?e:0,this.pz=null!=i?i:0},o.Entities.Data.Vec3D.fromArray=function(t){return new o.Entities.Data.Vec3D(t[0],t[1],t[2])},o.Entities.Data.Vec3D.prototype.isFloat=function(){return!(this.px===parseInt(this.px)&&this.py===parseInt(this.py)&&this.pz===parseInt(this.pz))},o.Entities.Data.Vec3D.prototype._toString=function(){return"("+this.px+", "+this.py+", "+this.pz+")"},o.Entities.Data.Vec3D.prototype._toArray=function(){return[this.px,this.py,this.pz]},o.ErrorCodes={},o.ErrorCodes._errorsByCode=["Phi\xean b\u1ea3n c\u1ee7a ng\u01b0\u1eddi d\xf9ng \u0111\xe3 l\u1ed7i th\u1eddi: {0}; Phi\xean b\u1ea3n y\xeau c\u1ea7u: {1}","Y\xeau c\u1ea7u Zone {0} kh\xf4ng t\u1ed3n t\u1ea1i","Ng\u01b0\u1eddi d\xf9ng {0} kh\xf4ng t\u1ed3n t\u1ea1i","Sai m\u1eadt kh\u1ea9u {0}","Ng\u01b0\u1eddi d\xf9ng {0} \u0111\xe3 b\u1ecb x\xf3a","Zone {0} \u0111\xe3 \u0111\u1ea7y","T\xe0i kho\u1ea3n n\xe0y \u0111ang \u0111\u0103ng nh\u1eadp tr\xean thi\u1ebft b\u1ecb kh\xe1c ","Server \u0111\xe3 \u0111\u1ea7y","Zone {0} hi\u1ec7n kh\xf4ng ho\u1ea1t \u0111\u1ed9ng","Ng\u01b0\u1eddi d\xf9ng {0} ch\u1ee9a t\u1eeb nh\u1ea1y c\u1ea3m; L\u1ecdc ra: {1}","Ng\u01b0\u1eddi d\xf9ng kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p v\xe0o Zone {0}","\u0110\u1ecba ch\u1ec9 {0} \u0111\xe3 b\u1ecb x\xf3a","Room \u0111\xe3 t\u1ed3n t\u1ea1i: {0}","Y\xeau c\u1ea7u Group kh\xf4ng c\xf3 s\u1eb5n - Room: {0}; Group: {1}","Chi\u1ec1u d\xe0i t\xean Room kh\xf4ng h\u1ee3p l\u1ec7 -  Min: {0}; max: {1}; \u0111\xe3 v\u01b0\u1ee3t qua: {2} k\xfd t\u1ef1","T\xean Room ch\u1ee9a t\u1eeb ng\u1eef kh\xf4ng h\u1ee3p l\u1ec7: {0}","Zone \u0111\xe3 \u0111\u1ea7y; Kh\xf4ng th\u1ec3 th\xeam Room Game","B\u1ea1n kh\xf4ng th\u1ec3 t\u1ea1o th\xeam Room cho phi\xean l\xe0n vi\u1ec7c hi\u1ec7n t\u1ea1i: {0}","T\u1ea1o Room kh\xf4ng th\xe0nh c\xf4ng, sai th\xf4ng s\u1ed1: {0}","Ng\u01b0\u1eddi d\xf9ng {0} \u0111\xe3 v\xe0o Room","Room {0} \u0111\xe3 \u0111\u1ea7y","M\u1eadt kh\u1ea9u sai cho Room {0}","Y\xeau c\u1ea7u Room kh\xf4ng t\u1ed3n t\u1ea1i","Room {0} \u0111\xe3 kh\xf3a","Group {0} \u0111\xe3 \u0111\u0103ng \u0111\u01b0\u1ee3c \u0111\u0103ng k\xfd","Group {0} kh\xf4ng t\u1ed3n t\u1ea1i","Group {0} kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u0103ng k\xfd","Group {0} kh\xf4ng t\u1ed3n t\u1ea1i","{0}","L\u1ed7i quy\u1ec1n c\u1ee7a Room; Room {0} kh\xf4ng th\u1ec3 \u0111\u1ed5i t\xean","L\u1ed7i quy\u1ec1n c\u1ee7a Room; Room {0} kh\xf4ng th\u1ec3 thay \u0111\u1ed5i m\u1eadt kh\u1ea9u hi\u1ec7n t\u1ea1i","L\u1ed7i quy\u1ec1n c\u1ee7a Room; Room {0} kh\xf4ng th\u1ec3 thay \u0111\u1ed5i s\u1ee9c ch\u1ee9a","Chuy\u1ec3n l\u1ed7i ng\u01b0\u1eddi d\xf9ng; kh\xf4ng c\xf3 'slot' n\xe0o cho ng\u01b0\u1eddi d\xf9ng trong Room {0}","Chuy\u1ec3n l\u1ed7i ng\u01b0\u1eddi d\xf9ng; Kh\xf4ng c\xf3 kh\xe1n gi\u1ea3 trong Room {0}","Chuy\u1ec3n l\u1ed7i ng\u01b0\u1eddi d\xf9ng; Room {0} kh\xf4ng ph\u1ea3i Game Room","Chuy\u1ec3n h\u01b0\u1edbng ng\u01b0\u1eddi d\xf9ng; B\u1ea1n kh\xf4ng th\u1ec3 tham gia Room {0}","Buddy Manager initialization error, could not load buddy list: {0}","Buddy Manager error, your buddy list is full; size is {0}","Buddy Manager error, was not able to block buddy {0} because offline","Buddy Manager error, you are attempting to set too many Buddy Variables; limit is {0}","Game {0} access denied, user does not match access criteria","QuickJoinGame action failed: no matching Rooms were found","Your previous invitation reply was invalid or arrived too late"],o.ErrorCodes.setErrorMessage=function(t,e){this._errorsByCode[t]=e},o.ErrorCodes.getErrorMessage=function(t,e){return this.stringFormat(this._errorsByCode[t],e)},o.ErrorCodes.stringFormat=function(t,e){if(null==t)return"";if(null!=e)for(var i=0;i<e.length;i++)t=t.replace("{"+i+"}",e[i]);return t},o.EventDispatcher=function(){this.listenersByEvent={}},o.EventDispatcher.prototype.addEventListener=function(t,e,i){null==this.listenersByEvent[t]&&(this.listenersByEvent[t]=[]),this.listenersByEvent[t].push({listener:e,scope:i})},o.EventDispatcher.prototype.removeEventListener=function(t,e){var i=this.listenersByEvent[t];if(null!=i)for(var o=0;o<i.length;o++)if(i[o].listener===e){i.splice(o,1);break}},o.EventDispatcher.prototype.dispatchEvent=function(t,e){var i=this.listenersByEvent[t];if(i&&0<i.length)for(var o=0;o<i.length;o++)i[o].listener.call(i[o].scope,e)},o.EventDispatcher.prototype.getListeners=function(t){return listeners[t]},o.SFSEvent={HANDSHAKE:"handshake",CONNECTION:"connection",CONNECTION_LOST:"connectionLost",CONNECTION_RETRY:"connectionRetry",CONNECTION_RESUME:"connectionResume",LOGIN:"login",LOGIN_ERROR:"loginError",LOGOUT:"logout",ROOM_ADD:"roomAdd",ROOM_CREATION_ERROR:"roomCreationError",ROOM_REMOVE:"roomRemove",ROOM_JOIN:"roomJoin",ROOM_JOIN_ERROR:"roomJoinError",USER_ENTER_ROOM:"userEnterRoom",USER_EXIT_ROOM:"userExitRoom",USER_COUNT_CHANGE:"userCountChange",PROXIMITY_LIST_UPDATE:"proximityListUpdate",PLAYER_TO_SPECTATOR:"playerToSpectator",PLAYER_TO_SPECTATOR_ERROR:"playerToSpectatorError",SPECTATOR_TO_PLAYER:"spectatorToPlayer",SPECTATOR_TO_PLAYER_ERROR:"spectatorToPlayerError",ROOM_NAME_CHANGE:"roomNameChange",ROOM_NAME_CHANGE_ERROR:"roomNameChangeError",ROOM_PASSWORD_STATE_CHANGE:"roomPasswordStateChange",ROOM_PASSWORD_STATE_CHANGE_ERROR:"roomPasswordStateChangeError",ROOM_CAPACITY_CHANGE:"roomCapacityChange",ROOM_CAPACITY_CHANGE_ERROR:"roomCapacityChangeError",PUBLIC_MESSAGE:"publicMessage",PRIVATE_MESSAGE:"privateMessage",OBJECT_MESSAGE:"objectMessage",MODERATOR_MESSAGE:"moderatorMessage",ADMIN_MESSAGE:"adminMessage",EXTENSION_RESPONSE:"extensionResponse",ROOM_VARIABLES_UPDATE:"roomVariablesUpdate",USER_VARIABLES_UPDATE:"userVariablesUpdate",MMOITEM_VARIABLES_UPDATE:"mmoItemVariablesUpdate",ROOM_GROUP_SUBSCRIBE:"roomGroupSubscribe",ROOM_GROUP_SUBSCRIBE_ERROR:"roomGroupSubscribeError",ROOM_GROUP_UNSUBSCRIBE:"roomGroupUnsubscribe",ROOM_GROUP_UNSUBSCRIBE_ERROR:"roomGroupUnsubscribeError",ROOM_FIND_RESULT:"roomFindResult",USER_FIND_RESULT:"userFindResult",INVITATION:"invitation",INVITATION_REPLY:"invitationReply",INVITATION_REPLY_ERROR:"invitationReplyError",PING_PONG:"pingPong",SOCKET_ERROR:"socketError"},o.SFSBuddyEvent={BUDDY_LIST_INIT:"buddyListInit",BUDDY_ADD:"buddyAdd",BUDDY_REMOVE:"buddyRemove",BUDDY_BLOCK:"buddyBlock",BUDDY_ERROR:"buddyError",BUDDY_ONLINE_STATE_CHANGE:"buddyOnlineStateChange",BUDDY_VARIABLES_UPDATE:"buddyVariablesUpdate",BUDDY_MESSAGE:"buddyMessage"},o.Exceptions={},o.Exceptions.SFSError=r.Class.extend({init:function(t){this._messsage=t},getMessage:function(){return this._messsage}}),o.Exceptions.SFSValidationError=o.Exceptions.SFSError.extend({init:function(t,e){this._super(t),this._errrors=e},getErrors:function(){return this._errrors}}),o.LogLevel={DEBUG:0,INFO:1,WARN:2,ERROR:3},o._Logger=function(){this.isAvailable=void 0!=console,this.level=o.LogLevel.INFO},o.Logger=new o._Logger,o._Logger.prototype.setLevel=function(t){t<o.LogLevel.DEBUG||t>o.LogLevel.ERROR||(this.level=t)},o._Logger.prototype.debug=function(t){},o._Logger.prototype.info=function(t){},o._Logger.prototype.warn=function(t){},o._Logger.prototype.error=function(t){},o.Managers={},o.Managers.UserManager=r.Class.extend({init:function(t){this._sfs=t,this._usersById=new o.Utils.HashTable,this._usersByName=new o.Utils.HashTable},containsUserName:function(t){return this._usersByName.hasItem(t)},containsUserId:function(t){return this._usersById.hasItem(t)},containsUser:function(t){return this._usersById.hasItem(t.id)},getUserById:function(t){return this._usersById.getItem(t)},getUserByName:function(t){return this._usersByName.getItem(t)},getUserCount:function(){return this._usersById.length},getUserList:function(){return this._usersById.values()},_addUser:function(t){this._usersById.hasItem(t.id)&&o.Logger.warn("Unexpected, duplicate user in UserManager: "+t.toString()),this.__addUser(t)},__addUser:function(t){this._usersByName.setItem(t.name,t),this._usersById.setItem(t.id,t)},_removeUser:function(t){this.__removeUser(t)},__removeUser:function(t){this._usersById.removeItem(t.id),this._usersByName.removeItem(t.name)},_removeUserById:function(){this._usersById.removeItem(user.id),this._usersByName.removeItem(user.name)},_clearAll:function(){this._usersById.clear(),this._usersByName.clear()}}),o.Managers.GlobalUserManager=o.Managers.UserManager.extend({init:function(t){this._super(t),this._roomRefCount=[]},_addUser:function(t){null==this._roomRefCount[t]?this._roomRefCount[t]=1:this._roomRefCount[t]++,this.__addUser(t)},_removeUser:function(t){null!=this._roomRefCount?1>this._roomRefCount[t]?o.Logger.warn("GlobalUserManager RefCount is already at zero. User: "+t):(this._roomRefCount[t]--,0==this._roomRefCount[t]&&(this.__removeUser(t),delete this._roomRefCount[t])):o.Logger.warn("Can't remove User from GlobalUserManager. RefCount missing. User: "+t)},dumpRefCount:function(){}}),o.Managers.RoomManager=function(t){this._sfs=t,this._ownerZone=null,this._groups=[],this._roomsById=new o.Utils.HashTable,this._roomsByName=new o.Utils.HashTable},o.Managers.RoomManager.prototype.getRoomGroups=function(){return this._groups},o.Managers.RoomManager.prototype.containsGroup=function(t){return-1<this._groups.indexOf(t)},o.Managers.RoomManager.prototype.containsRoom=function(t){return"number"==typeof t?this._roomsById.hasItem(t):this._roomsByName.hasItem(t)},o.Managers.RoomManager.prototype.containsRoomInGroup=function(t,e){var i,n=this.getRoomListFromGroup(e),s=!1,a="number"==typeof t;for(i in n){var r=n[i];if(r instanceof o.Entities.SFSRoom)if(a){if(r.id==t){s=!0;break}}else if(r.name==t){s=!0;break}}return s},o.Managers.RoomManager.prototype.getRoomById=function(t){return this._roomsById.getItem(t)},o.Managers.RoomManager.prototype.getRoomByName=function(t){return this._roomsByName.getItem(t)},o.Managers.RoomManager.prototype.getRoomList=function(){return this._roomsById.values()},o.Managers.RoomManager.prototype.getRoomCount=function(){return this._roomsById.length},o.Managers.RoomManager.prototype.getRoomListFromGroup=function(t){var e,i=[];for(e in this._roomsById.items){var n=this._roomsById.items[e];n instanceof o.Entities.SFSRoom&&n.groupId==t&&i.push(n)}return i},o.Managers.RoomManager.prototype.getJoinedRooms=function(){var t,e=[];for(t in this._roomsById.items){var i=this._roomsById.items[t];i instanceof o.Entities.SFSRoom&&i.isJoined&&e.push(i)}return e},o.Managers.RoomManager.prototype.getUserRooms=function(t){var e,i=[];for(e in this._roomsById.items){var n=this._roomsById.items[e];n instanceof o.Entities.SFSRoom&&n.containsUser(t)&&i.push(n)}return i},o.Managers.RoomManager.prototype._addRoom=function(t,e){null==e&&(e=!0),this._roomsById.setItem(t.id,t),this._roomsByName.setItem(t.name,t),e?this.containsGroup(t.groupId)||this._addGroup(t.groupId):t._isManaged=!1},o.Managers.RoomManager.prototype._replaceRoom=function(t,e){null==e&&(e=!0);var i=this.getRoomById(t.id);return null!=i?(i._merge(t),i):(this._addRoom(t,e),t)},o.Managers.RoomManager.prototype._removeRoom=function(t){this._roomsById.removeItem(t.id),this._roomsByName.removeItem(t.name)},o.Managers.RoomManager.prototype._removeRoomById=function(t){null!=(t=this.getRoomById(t))&&this._removeRoom(t)},o.Managers.RoomManager.prototype._removeRoomByName=function(t){null!=(t=this.getRoomByName(t))&&this._removeRoom(t)},o.Managers.RoomManager.prototype._changeRoomName=function(t,e){var i=t.name;t.name=e,this._roomsByName.setItem(e,t),this._roomsByName.removeItem(i)},o.Managers.RoomManager.prototype._changeRoomPasswordState=function(t,e){t.isPasswordProtected=e},o.Managers.RoomManager.prototype._changeRoomCapacity=function(t,e,i){t.maxUsers=e,t.maxSpectators=i},o.Managers.RoomManager.prototype._addGroup=function(t){this._groups.push(t)},o.Managers.RoomManager.prototype._removeGroup=function(t){o.Utils.ArrayUtil.removeItem(this._groups,t);var e;t=this.getRoomListFromGroup(t);for(e in t){var i=t[e];i instanceof o.Entities.SFSRoom&&(i.isJoined?i._isManaged=!1:this._removeRoom(i))}},o.Managers.RoomManager.prototype._removeUser=function(t){for(var e in this._roomsById.items){var i=this._roomsById.items[e];i instanceof o.Entities.SFSRoom&&i.containsUser(t)&&i._removeUser(t)}},o.Managers.BuddyManager=function(t){this._sfs=t,this._buddiesByName=[],this._myVariables=[],this._inited=!1,this._buddyStates=[]},o.Managers.BuddyManager.prototype.isInited=function(){return this._inited},o.Managers.BuddyManager.prototype.containsBuddy=function(t){return null!=this.getBuddyByName(t)},o.Managers.BuddyManager.prototype.getBuddyById=function(t){if(-1<t)for(var e in this._buddiesByName){var i=this._buddiesByName[e];if(i instanceof o.Entities.SFSBuddy&&i.id==t)return i}return null},o.Managers.BuddyManager.prototype.getBuddyByName=function(t){return this._buddiesByName[t]},o.Managers.BuddyManager.prototype.getBuddyByNickName=function(t){for(var e in this._buddiesByName){var i=this._buddiesByName[e];if(i instanceof o.Entities.SFSBuddy&&i.nickName==t)return i}return null},o.Managers.BuddyManager.prototype.getOfflineBuddies=function(){var t,e=[];for(t in this._buddiesByName){var i=this._buddiesByName[t];i instanceof o.Entities.SFSBuddy&&!i.isOnline()&&e.push(i)}return e},o.Managers.BuddyManager.prototype.getOnlineBuddies=function(){var t,e=[];for(t in this._buddiesByName){var i=this._buddiesByName[t];i instanceof o.Entities.SFSBuddy&&i.isOnline()&&e.push(i)}return e},o.Managers.BuddyManager.prototype.getBuddyList=function(){return o.Utils.ArrayUtil.objToArray(this._buddiesByName)},o.Managers.BuddyManager.prototype.getMyVariable=function(t){return this._myVariables[t]},o.Managers.BuddyManager.prototype.getMyVariables=function(){return o.Utils.ArrayUtil.objToArray(this._myVariables)},o.Managers.BuddyManager.prototype.getMyOnlineState=function(){if(!this._inited)return!1;var t=!0,e=this.getMyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_ONLINE);return null!=e&&(t=e.value),t},o.Managers.BuddyManager.prototype.getMyNickName=function(){var t=this.getMyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME);return null!=t?t.value:null},o.Managers.BuddyManager.prototype.getMyState=function(){var t=this.getMyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_STATE);return null!=t?t.value:null},o.Managers.BuddyManager.prototype.getBuddyStates=function(){return this._buddyStates},o.Managers.BuddyManager.prototype._setInited=function(){this._inited=!0},o.Managers.BuddyManager.prototype._addBuddy=function(t){this._buddiesByName[t.name]=t},o.Managers.BuddyManager.prototype._clearAll=function(){this._buddiesByName=[]},o.Managers.BuddyManager.prototype._removeBuddyById=function(t){return null!=(t=this.getBuddyById(t))&&delete this._buddiesByName[t.name],t},o.Managers.BuddyManager.prototype._removeBuddyByName=function(t){var e=this.getBuddyByName(t);return null!=e&&delete this._buddiesByName[t],e},o.Managers.BuddyManager.prototype._setMyVariables=function(t){for(var e=0;e<t.length;e++)this._setMyVariable(t[e])},o.Managers.BuddyManager.prototype._setMyVariable=function(t){t.isNull()?delete this._myVariables[t.name]:this._myVariables[t.name]=t},o.Managers.BuddyManager.prototype._setMyOnlineState=function(t){t=new o.Entities.Variables.SFSBuddyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_ONLINE,t),this._setMyVariable(t)},o.Managers.BuddyManager.prototype._setMyNickName=function(t){t=new o.Entities.Variables.SFSBuddyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_NICKNAME,t),this._setMyVariable(t)},o.Managers.BuddyManager.prototype._setMyState=function(t){t=new o.Entities.Variables.SFSBuddyVariable(o.Entities.Variables.ReservedBuddyVariables.BV_STATE,t),this._setMyVariable(t)},o.Managers.BuddyManager.prototype._setBuddyStates=function(t){this._buddyStates=t},o.Requests={},o.Requests.System={},o.Requests.MMO={},o.Requests.BuddyList={},o.Requests.Game={},o.Requests._BaseRequest=r.Class.extend({init:function(t){this._reqObj={},this._id=t,this._targetController=0,this._log=o.Logger},getMessage:function(){return{a:this._id,c:this._targetController,p:this._reqObj}},validate:function(){this._log.error("BaseRequest.validate = no child-class implementation found!")},execute:function(){this._log.error("BaseRequest.execute = no child-class implementation found!")}}),o.Requests.System.HandshakeRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.Handshake),this._apiVersion=t,this._clientDetails=e,this._reconnectionToken=i},validate:function(){},execute:function(){this._reqObj[this.constructor.KEY_API]=this._apiVersion,this._reqObj[this.constructor.KEY_CLIENT_TYPE]=this._clientDetails,null!=this._reconnectionToken&&(this.reqObj[this.constructor.KEY_RECONNECTION_TOKEN]=this._reconnectionToken)}}),o.Requests.System.HandshakeRequest.KEY_SESSION_TOKEN="tk",o.Requests.System.HandshakeRequest.KEY_API="api",o.Requests.System.HandshakeRequest.KEY_COMPRESSION_THRESHOLD="ct",o.Requests.System.HandshakeRequest.KEY_RECONNECTION_TOKEN="rt",o.Requests.System.HandshakeRequest.KEY_CLIENT_TYPE="cl",o.Requests.System.HandshakeRequest.KEY_MAX_MESSAGE_SIZE="ms",o.Requests.System.LoginRequest=o.Requests._BaseRequest.extend({init:function(t,e,i,n){this._super(o.Requests.Login),this._userName=t,this._password=e,this._params=i,this._zoneName=n},validate:function(t){if(null!=t.mySelf)throw new o.Exceptions.SFSValidationError("LoginRequest error",["You are already logged in; logout before attempting a new login"]);if(t=null!=t.config&&null!=t.config.zone?t.config.zone:null,null!=this._zoneName&&(t=this._zoneName),null==t||0==t.length)throw new o.Exceptions.SFSValidationError("LoginRequest Error",["Missing Zone name"]);this._zoneName=t,null==this._userName&&(this._userName=""),null==this._password&&(this._password="")},execute:function(t){this._reqObj[this.constructor.KEY_ZONE_NAME]=this._zoneName,this._reqObj[this.constructor.KEY_USER_NAME]=this._userName,this._reqObj[this.constructor.KEY_PASSWORD]=0<this._password.length?l(t.sessionToken+this._password):"",null!=this._params&&(this._reqObj[this.constructor.KEY_PARAMS]=this._params)}}),o.Requests.System.LoginRequest.KEY_ZONE_NAME="zn",o.Requests.System.LoginRequest.KEY_USER_NAME="un",o.Requests.System.LoginRequest.KEY_PASSWORD="pw",o.Requests.System.LoginRequest.KEY_PARAMS="p",o.Requests.System.LoginRequest.KEY_PRIVILEGE_ID="pi",o.Requests.System.LoginRequest.KEY_ID="id",o.Requests.System.LoginRequest.KEY_ROOMLIST="rl",o.Requests.System.LoginRequest.KEY_RECONNECTION_SECONDS="rs",o.Requests.System.LogoutRequest=o.Requests._BaseRequest.extend({init:function(){this._super(o.Requests.Logout)},validate:function(t){if(null==t.mySelf)throw new o.Exceptions.SFSValidationError("LogoutRequest error",["You are not logged in"])},execute:function(){}}),o.Requests.System.LogoutRequest.KEY_ZONE_NAME="zn",o.Requests.System.JoinRoomRequest=o.Requests._BaseRequest.extend({init:function(t,e,i,n){this._super(o.Requests.JoinRoom),"string"==typeof t?this._rName=t:"number"==typeof t?this._rId=t:t instanceof o.Entities.SFSRoom&&(this._rId=t.id,this._rName=t.name),this._password=e,this._roomIdToLeave=i,this._asSpectator="boolean"==typeof n&&n},validate:function(){if(null==this._rId&&null==this._rName)throw new o.Exceptions.SFSValidationError("JoinRoomRequest Error",["Missing Room id or name, please provide one of the two or an existing Room object"])},execute:function(t){t._isJoining=!0,0<=this._rId?this._reqObj[this.constructor.KEY_ROOM_ID]=this._rId:null!=this._rName&&(this._reqObj[this.constructor.KEY_ROOM_NAME]=this._rName),null!=this._password&&(this._reqObj[this.constructor.KEY_PASS]=this._password),null!=this._roomIdToLeave&&(this._reqObj[this.constructor.KEY_ROOM_TO_LEAVE]=this._roomIdToLeave),this._asSpectator&&(this._reqObj[this.constructor.KEY_AS_SPECTATOR]=this._asSpectator)}}),o.Requests.System.JoinRoomRequest.KEY_ROOM="r",o.Requests.System.JoinRoomRequest.KEY_USER_LIST="ul",o.Requests.System.JoinRoomRequest.KEY_ROOM_NAME="n",o.Requests.System.JoinRoomRequest.KEY_ROOM_ID="i",o.Requests.System.JoinRoomRequest.KEY_PASS="p",o.Requests.System.JoinRoomRequest.KEY_ROOM_TO_LEAVE="rl",o.Requests.System.JoinRoomRequest.KEY_AS_SPECTATOR="sp",o.Requests.System.CreateRoomRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.CreateRoom),this._settings=t,this._autoJoin="boolean"==typeof e&&e,this._roomToLeave=i},validate:function(){var t=[];if((null==this._settings.name||0==this._settings.name.length)&&t.push("Missing Room name"),0>=this._settings.maxUsers&&t.push("Max number of users must be > 0"),null!=this._settings.extension&&((null==this._settings.extension.className||0==this._settings.extension.className.length)&&t.push("Missing Extension class name"),(null==this._settings.extension.id||0==this._settings.extension.id.length)&&t.push("Missing Extension id")),this._settings instanceof o.Requests.MMO.MMORoomSettings&&(null==this._settings.defaultAOI&&t.push("Missing default AoI (Area of Interest)"),null!=this._settings.mapLimits&&(null==this._settings.mapLimits.lowerLimit||null==this._settings.mapLimits.higherLimit)&&t.push("Map limits must be both defined")),0<t.length)throw new o.Exceptions.SFSValidationError("CreateRoomRequest Error",t)},execute:function(){if(this._reqObj[this.constructor.KEY_NAME]=this._settings.name,this._reqObj[this.constructor.KEY_GROUP_ID]=this._settings.groupId,this._reqObj[this.constructor.KEY_PASSWORD]=this._settings.password,this._reqObj[this.constructor.KEY_ISGAME]=this._settings.isGame,this._reqObj[this.constructor.KEY_MAXUSERS]=this._settings.maxUsers,this._reqObj[this.constructor.KEY_MAXSPECTATORS]=this._settings.maxSpectators,this._reqObj[this.constructor.KEY_MAXVARS]=this._settings.maxVariables,null!=this._settings.variables&&0<this._settings.variables.length){var t,e=[];for(t in this._settings.variables){var i=this._settings.variables[t];i instanceof o.Entities.Variables.SFSRoomVariable&&e.push(i.toArray())}this._reqObj[this.constructor.KEY_ROOMVARS]=e}null!=this._settings.permissions&&((e=[]).push(this._settings.permissions.allowNameChange),e.push(this._settings.permissions.allowPasswordStateChange),e.push(this._settings.permissions.allowPublicMessages),e.push(this._settings.permissions.allowResizing),this._reqObj[this.constructor.KEY_PERMISSIONS]=e),null!=this._settings.events&&((e=[]).push(this._settings.events.allowUserEnter),e.push(this._settings.events.allowUserExit),e.push(this._settings.events.allowUserCountChange),e.push(this._settings.events.allowUserVariablesUpdate),this._reqObj[this.constructor.KEY_EVENTS]=e),null!=this._settings.extension&&(this._reqObj[this.constructor.KEY_EXTID]=this._settings.extension.id,this._reqObj[this.constructor.KEY_EXTCLASS]=this._settings.extension.className,null!=this._settings.extension.propertiesFile&&0<this._settings.extension.propertiesFile.length&&(this._reqObj[this.constructor.KEY_EXTPROP]=this._settings.extension.propertiesFile)),this._settings instanceof o.Requests.MMO.MMORoomSettings&&(this._reqObj[this.constructor.KEY_MMO_DEFAULT_AOI]=this._settings.defaultAOI._toArray(),null!=this._settings.mapLimits&&(this._reqObj[this.constructor.KEY_MMO_MAP_LOW_LIMIT]=this._settings.mapLimits.lowerLimit._toArray(),this._reqObj[this.constructor.KEY_MMO_MAP_HIGH_LIMIT]=this._settings.mapLimits.higherLimit._toArray()),this._reqObj[this.constructor.KEY_MMO_USER_MAX_LIMBO_SECONDS]=this._settings.userMaxLimboSeconds,this._reqObj[this.constructor.KEY_MMO_PROXIMITY_UPDATE_MILLIS]=this._settings.proximityListUpdateMillis,this._reqObj[this.constructor.KEY_MMO_SEND_ENTRY_POINT]=this._settings.sendAOIEntryPoint),this._reqObj[this.constructor.KEY_AUTOJOIN]=this._autoJoin,null!=this._roomToLeave&&(this._reqObj[this.constructor.KEY_ROOM_TO_LEAVE]=this._roomToLeave.id)}}),o.Requests.System.CreateRoomRequest.KEY_ROOM="r",o.Requests.System.CreateRoomRequest.KEY_NAME="n",o.Requests.System.CreateRoomRequest.KEY_PASSWORD="p",o.Requests.System.CreateRoomRequest.KEY_GROUP_ID="g",o.Requests.System.CreateRoomRequest.KEY_ISGAME="ig",o.Requests.System.CreateRoomRequest.KEY_MAXUSERS="mu",o.Requests.System.CreateRoomRequest.KEY_MAXSPECTATORS="ms",o.Requests.System.CreateRoomRequest.KEY_MAXVARS="mv",o.Requests.System.CreateRoomRequest.KEY_ROOMVARS="rv",o.Requests.System.CreateRoomRequest.KEY_PERMISSIONS="pm",o.Requests.System.CreateRoomRequest.KEY_EVENTS="ev",o.Requests.System.CreateRoomRequest.KEY_EXTID="xn",o.Requests.System.CreateRoomRequest.KEY_EXTCLASS="xc",o.Requests.System.CreateRoomRequest.KEY_EXTPROP="xp",o.Requests.System.CreateRoomRequest.KEY_AUTOJOIN="aj",o.Requests.System.CreateRoomRequest.KEY_ROOM_TO_LEAVE="rl",o.Requests.System.CreateRoomRequest.KEY_MMO_DEFAULT_AOI="maoi",o.Requests.System.CreateRoomRequest.KEY_MMO_MAP_LOW_LIMIT="mllm",o.Requests.System.CreateRoomRequest.KEY_MMO_MAP_HIGH_LIMIT="mlhm",o.Requests.System.CreateRoomRequest.KEY_MMO_USER_MAX_LIMBO_SECONDS="muls",o.Requests.System.CreateRoomRequest.KEY_MMO_PROXIMITY_UPDATE_MILLIS="mpum",o.Requests.System.CreateRoomRequest.KEY_MMO_SEND_ENTRY_POINT="msep",o.Requests.System.GenericMessageRequest=o.Requests._BaseRequest.extend({init:function(){this._super(o.Requests.GenericMessage),this._type=-1,this._recipient=this._params=this._message=this._user=this._room=null,this._sendMode=-1},validate:function(t){if(0>this._type)throw new o.Exceptions.SFSValidationError("GenericMessageRequest Error",["Unsupported message type: "+this._type]);var e=[];switch(this._type){case o.Requests.GenericMessageType.PUBLIC_MSG:this._validatePublicMessage(t,e);break;case o.Requests.GenericMessageType.PRIVATE_MSG:this._validatePrivateMessage(t,e);break;case o.Requests.GenericMessageType.OBJECT_MSG:this._validateObjectMessage(t,e);break;case o.Requests.GenericMessageType.BUDDY_MSG:this._validateBuddyMessage(t,e);break;default:this._validateSuperUserMessage(t,e)}if(0<e.length)throw new o.Exceptions.SFSValidationError("GenericMessageRequest Error",e)},execute:function(t){switch(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_MESSAGE_TYPE]=this._type,this._type){case o.Requests.GenericMessageType.PUBLIC_MSG:this._executePublicMessage(t);break;case o.Requests.GenericMessageType.PRIVATE_MSG:this._executePrivateMessage(t);break;case o.Requests.GenericMessageType.OBJECT_MSG:this._executeObjectMessage(t);break;case o.Requests.GenericMessageType.BUDDY_MSG:this._executeBuddyMessage(t);break;default:this._executeSuperUserMessage(t)}},_validatePublicMessage:function(t,e){(null==this._message||0==this._message.length)&&e.push("Public message is empty"),null!=this._room&&!t.mySelf.isJoinedInRoom(this._room)&&e.push("You are not joined in the target Room: "+this._room)},_validatePrivateMessage:function(t,e){(null==this._message||0==this._message.length)&&e.push("Private message is empty"),0>this._recipient&&e.push("Invalid recipient id: "+this._recipient)},_validateObjectMessage:function(t,e){null==this._params&&e.push("Object message is null")},_validateBuddyMessage:function(t,e){t.buddyManager.isInited||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0==t.buddyManager.myOnlineState&&e.push("Can't send messages while you are offline in the Buddy List system"),(null==this._message||0==this._message.length)&&e.push("Buddy message is empty"),0>this._recipient&&e.push("Recipient is offline or not in your Buddy List")},_validateSuperUserMessage:function(t,e){switch((null==this._message||0==this._message.length)&&e.push("Moderator message is empty"),this._sendMode){case o.Requests.MessageRecipientMode.TO_USER:this._recipient instanceof o.Entities.SFSUser||e.push("SFSUser object expected as recipient");break;case o.Requests.MessageRecipientMode.TO_ROOM:this._recipient instanceof o.Entities.SFSRoom||e.push("SFSRoom object expected as recipient");break;case o.Requests.MessageRecipientMode.TO_GROUP:"string"!=typeof this._recipient&&e.push("String object (the groupId) expected as recipient")}},_executePublicMessage:function(t){if(null==this._room&&(this._room=t.lastJoinedRoom),null==this._room)throw new o.Exceptions.SFSError("User should be joined in a Room in order to send a public message");this._reqObj[o.Requests.System.GenericMessageRequest.KEY_ROOM_ID]=this._room.id,this._reqObj[o.Requests.System.GenericMessageRequest.KEY_USER_ID]=t.mySelf.id,this._reqObj[o.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params)},_executePrivateMessage:function(){this._reqObj[o.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient,this._reqObj[o.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params)},_executeBuddyMessage:function(){this._reqObj[o.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient,this._reqObj[o.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params)},_executeSuperUserMessage:function(){switch(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_MESSAGE]=this._message,null!=this._params&&(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params),this._reqObj[o.Requests.System.GenericMessageRequest.KEY_RECIPIENT_MODE]=this._sendMode,this._sendMode){case o.Requests.MessageRecipientMode.TO_USER:case o.Requests.MessageRecipientMode.TO_ROOM:this._reqObj[o.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient.id;break;case o.Requests.MessageRecipientMode.TO_GROUP:this._reqObj[o.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=this._recipient}},_executeObjectMessage:function(t){if(null==this._room&&(this._room=t.lastJoinedRoom),null==this._room)throw new o.Exceptions.SFSError("User should be joined in a Room in order to send an object message");if(t=[],null!=this._recipient&&this._recipient instanceof Array){var e=this._recipient;if(e.length>this._room.capacity)throw new o.Exceptions.SFSError("The number of recipients is bigger than the target Room capacity: "+e.length);for(var i in e){var n=e[i];n instanceof o.Entities.SFSUser?t.push(n.id):this._log.warn("Bad recipient in ObjectMessage recipient list: "+(void 0===n?"undefined":a(n))+"; expected type: SFSUser")}}this._reqObj[o.Requests.System.GenericMessageRequest.KEY_ROOM_ID]=this._room.id,this._reqObj[o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS]=this._params,0<t.length&&(this._reqObj[o.Requests.System.GenericMessageRequest.KEY_RECIPIENT]=t)}}),o.Requests.System.GenericMessageRequest.KEY_ROOM_ID="r",o.Requests.System.GenericMessageRequest.KEY_USER_ID="u",o.Requests.System.GenericMessageRequest.KEY_MESSAGE="m",o.Requests.System.GenericMessageRequest.KEY_MESSAGE_TYPE="t",o.Requests.System.GenericMessageRequest.KEY_RECIPIENT="rc",o.Requests.System.GenericMessageRequest.KEY_RECIPIENT_MODE="rm",o.Requests.System.GenericMessageRequest.KEY_XTRA_PARAMS="p",o.Requests.System.GenericMessageRequest.KEY_SENDER_DATA="sd",o.Requests.System.ChangeRoomNameRequest=o.Requests._BaseRequest.extend({init:function(t,e){this._super(o.Requests.ChangeRoomName),this._room=t,this._newName=e},validate:function(){var t=[];if(null==this._room&&t.push("Provided Room is null"),(null==this._newName||0==this._newName.length)&&t.push("Invalid new room name: it must be a non-null and non-empty string"),0<t.length)throw new o.Exceptions.SFSValidationError("ChangeRoomNameRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_NAME]=this._newName}}),o.Requests.System.ChangeRoomNameRequest.KEY_ROOM="r",o.Requests.System.ChangeRoomNameRequest.KEY_NAME="n",o.Requests.System.ChangeRoomPasswordStateRequest=o.Requests._BaseRequest.extend({init:function(t,e){this._super(o.Requests.ChangeRoomPassword),this._room=t,this._newPass=e},validate:function(){var t=[];if(null==this._room&&t.push("Provided Room is null"),null==this._newPass&&t.push("Invalid new room name: it must be a non-null string"),0<t.length)throw new o.Exceptions.SFSValidationError("ChangeRoomPasswordStateRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_PASS]=this._newPass}}),o.Requests.System.ChangeRoomPasswordStateRequest.KEY_ROOM="r",o.Requests.System.ChangeRoomPasswordStateRequest.KEY_PASS="p",o.Requests.System.ObjectMessageRequest=o.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=o.Requests.GenericMessageType.OBJECT_MSG,this._params=t,this._room=e,this._recipient=i}}),o.Requests.System.SetRoomVariablesRequest=o.Requests._BaseRequest.extend({init:function(t,e){this._super(o.Requests.SetRoomVariables),this._roomVariables=t,this._room=e},validate:function(t){var e=[];if(null!=this._room?this._room.containsUser(t.mySelf)||e.push("You are not joined in the target Room"):null==t.lastJoinedRoom&&e.push("You are not joined in any Room"),(null==this._roomVariables||0==this._roomVariables.length)&&e.push("No variables were specified"),0<e.length)throw new o.Exceptions.SFSValidationError("SetRoomVariablesRequest Error",e)},execute:function(t){var e,i=[];for(e in this._roomVariables){var n=this._roomVariables[e];n instanceof o.Entities.Variables.SFSRoomVariable&&i.push(n.toArray())}null==this._room&&(this._room=t.lastJoinedRoom),this._reqObj[this.constructor.KEY_VAR_LIST]=i,this._reqObj[this.constructor.KEY_VAR_ROOM]=this._room.id}}),o.Requests.System.SetRoomVariablesRequest.KEY_VAR_ROOM="r",o.Requests.System.SetRoomVariablesRequest.KEY_VAR_LIST="vl",o.Requests.System.SetUserVariablesRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.SetUserVariables),this._userVariables=t},validate:function(){var t=[];if((null==this._userVariables||0==this._userVariables.length)&&t.push("No variables were specified"),0<t.length)throw new o.Exceptions.SFSValidationError("SetUserVariablesRequest Error",t)},execute:function(){var t,e=[];for(t in this._userVariables){var i=this._userVariables[t];i instanceof o.Entities.Variables.SFSUserVariable&&e.push(i.toArray())}this._reqObj[this.constructor.KEY_VAR_LIST]=e}}),o.Requests.System.SetUserVariablesRequest.KEY_USER="u",o.Requests.System.SetUserVariablesRequest.KEY_VAR_LIST="vl",o.Requests.System.ExtensionRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.CallExtension),this._targetController=1,this._extCmd=t,this._params=e,this._room=i,null==this._params&&(this._params={})},validate:function(){var t=[];if((null==this._extCmd||0==this._extCmd.length)&&t.push("Missing extension command"),0<t.length)throw new o.Exceptions.SFSValidationError("ExtensionRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_CMD]=this._extCmd,this._reqObj[this.constructor.KEY_ROOM]=null==this._room?-1:this._room.id,this._reqObj[this.constructor.KEY_PARAMS]=this._params}}),o.Requests.System.ExtensionRequest.KEY_CMD="c",o.Requests.System.ExtensionRequest.KEY_PARAMS="p",o.Requests.System.ExtensionRequest.KEY_ROOM="r",o.Requests.System.LeaveRoomRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.LeaveRoom),this._room=t},validate:function(t){if(1>t.getJoinedRooms().length)throw new o.Exceptions.SFSValidationError("LeaveRoomRequest Error",["You are not joined in any room"])},execute:function(){null!=this._room&&(this._reqObj[this.constructor.KEY_ROOM_ID]=this._room.id)}}),o.Requests.System.LeaveRoomRequest.KEY_ROOM_ID="r",o.Requests.System.SubscribeRoomGroupRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.SubscribeRoomGroup),this._groupId=t},validate:function(){var t=[];if((null==this._groupId||0==this._groupId.length)&&t.push("Invalid group id passed; must be a string with at least one character"),0<t.length)throw new o.Exceptions.SFSValidationError("SubscribeGroupRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_GROUP_ID]=this._groupId}}),o.Requests.System.SubscribeRoomGroupRequest.KEY_GROUP_ID="g",o.Requests.System.SubscribeRoomGroupRequest.KEY_ROOM_LIST="rl",o.Requests.System.UnsubscribeRoomGroupRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.UnsubscribeRoomGroup),this._groupId=t},validate:function(){var t=[];if((null==this._groupId||0==this._groupId.length)&&t.push("Invalid group id passed; must be a string with at least one character"),0<t.length)throw new o.Exceptions.SFSValidationError("UnsubscribeGroupRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_GROUP_ID]=this._groupId}}),o.Requests.System.UnsubscribeRoomGroupRequest.KEY_GROUP_ID="g",o.Requests.System.SpectatorToPlayerRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.SpectatorToPlayer),this._room=t},validate:function(t){if(1>t.getJoinedRooms().length)throw new o.Exceptions.SFSValidationError("SpectatorToPlayerRequest Error",["You are not joined in any room"])},execute:function(t){null==this._room&&(this._room=t.lastJoinedRoom),this._reqObj[this.constructor.KEY_ROOM_ID]=this._room.id}}),o.Requests.System.SpectatorToPlayerRequest.KEY_ROOM_ID="r",o.Requests.System.SpectatorToPlayerRequest.KEY_USER_ID="u",o.Requests.System.SpectatorToPlayerRequest.KEY_PLAYER_ID="p",o.Requests.System.PlayerToSpectatorRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.PlayerToSpectator),this._room=t},validate:function(t){if(1>t.getJoinedRooms().length)throw new o.Exceptions.SFSValidationError("PlayerToSpectatorRequest Error",["You are not joined in any room"])},execute:function(t){null==this._room&&(this._room=t.lastJoinedRoom),this._reqObj[this.constructor.KEY_ROOM_ID]=this._room.id}}),o.Requests.System.PlayerToSpectatorRequest.KEY_ROOM_ID="r",o.Requests.System.PlayerToSpectatorRequest.KEY_USER_ID="u",o.Requests.System.ChangeRoomCapacityRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.ChangeRoomCapacity),this._room=t,this._newMaxUsers=e,this._newMaxSpect=i},validate:function(){var t=[];if(null==this._room&&t.push("Provided Room is null"),0<t.length)throw new o.Exceptions.SFSValidationError("ChangeRoomCapacityRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_USER_SIZE]=this._newMaxUsers,this._reqObj[this.constructor.KEY_SPEC_SIZE]=this._newMaxSpect}}),o.Requests.System.ChangeRoomCapacityRequest.KEY_ROOM="r",o.Requests.System.ChangeRoomCapacityRequest.KEY_USER_SIZE="u",o.Requests.System.ChangeRoomCapacityRequest.KEY_SPEC_SIZE="s",o.Requests.System.PublicMessageRequest=o.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=o.Requests.GenericMessageType.PUBLIC_MSG,this._message=t,this._room=i,this._params=e}}),o.Requests.System.PrivateMessageRequest=o.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=o.Requests.GenericMessageType.PRIVATE_MSG,this._message=t,this._recipient=e,this._params=i}}),o.Requests.System.ModeratorMessageRequest=o.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){if(this._super(),null==e)throw new o.Exceptions.SFSError("Recipient mode cannot be null");this._type=o.Requests.GenericMessageType.MODERATOR_MSG,this._message=t,this._params=i,this._recipient=e.target,this._sendMode=e.mode}}),o.Requests.System.AdminMessageRequest=o.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){if(this._super(),null==e)throw new o.Exceptions.SFSError("Recipient mode cannot be null");this._type=o.Requests.GenericMessageType.ADMING_MSG,this._message=t,this._params=i,this._recipient=e.target,this._sendMode=e.mode}}),o.Requests.System.KickUserRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.KickUser),null==i&&(i=5),0>i&&(i=0),this._userId=t,this._message=e,this._delay=i},validate:function(t){var e=[];if(!t.mySelf.isModerator()&&!t.mySelf.isAdmin()&&e.push("You don't have enough permissions to execute this request"),0<e.length)throw new o.Exceptions.SFSValidationError("KickUserRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_USER_ID]=this._userId,this._reqObj[this.constructor.KEY_DELAY]=this._delay,null!=this._message&&0<this._message.length&&(this._reqObj[this.constructor.KEY_MESSAGE]=this._message)}}),o.Requests.System.KickUserRequest.KEY_USER_ID="u",o.Requests.System.KickUserRequest.KEY_MESSAGE="m",o.Requests.System.KickUserRequest.KEY_DELAY="d",o.Requests.System.BanUserRequest=o.Requests._BaseRequest.extend({init:function(t,e,i,n,s){this._super(o.Requests.BanUser),null==i&&(i=1),null==n&&(n=5),null==s&&(s=24),this._userId=t,this._message=e,this._banMode=i,this._delay=n,this._durationHours=s},validate:function(t){var e=[];if(!t.mySelf.isModerator()&&!t.mySelf.isAdmin()&&e.push("You don't have enough permissions to execute this request"),0<e.length)throw new o.Exceptions.SFSValidationError("BanUserRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_USER_ID]=this._userId,this._reqObj[this.constructor.KEY_DELAY]=this._delay,this._reqObj[this.constructor.KEY_BAN_MODE]=this._banMode,this._reqObj[this.constructor.KEY_BAN_DURATION_HOURS]=this._durationHours,null!=this._message&&0<this._message.length&&(this._reqObj[this.constructor.KEY_MESSAGE]=this._message)}}),o.Requests.System.BanUserRequest.KEY_USER_ID="u",o.Requests.System.BanUserRequest.KEY_MESSAGE="m",o.Requests.System.BanUserRequest.KEY_DELAY="d",o.Requests.System.BanUserRequest.KEY_BAN_MODE="b",o.Requests.System.BanUserRequest.KEY_BAN_DURATION_HOURS="dh",o.Requests.System.ManualDisconnectionRequest=o.Requests._BaseRequest.extend({init:function(){this._super(o.Requests.ManualDisconnection)},validate:function(){},execute:function(){}}),o.Requests.System.FindRoomsRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.FindRooms),null==i&&(i=0),this._matchExpr=t,this._groupId=e,this._limit=i},validate:function(){var t=[];if(null==this._matchExpr&&t.push("Missing match expression"),0<t.length)throw new o.Exceptions.SFSValidationError("FindRoomsRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_EXPRESSION]=this._matchExpr._toArray(),null!=this._groupId&&(this._reqObj[this.constructor.KEY_GROUP]=this._groupId),0<this._limit&&(this._reqObj[this.constructor.KEY_LIMIT]=this._limit)}}),o.Requests.System.FindRoomsRequest.KEY_EXPRESSION="e",o.Requests.System.FindRoomsRequest.KEY_GROUP="g",o.Requests.System.FindRoomsRequest.KEY_LIMIT="l",o.Requests.System.FindRoomsRequest.KEY_FILTERED_ROOMS="fr",o.Requests.System.FindUsersRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.FindUsers),null==i&&(i=0),this._matchExpr=t,this._target=e,this._limit=i},validate:function(){var t=[];if(null==this._matchExpr&&t.push("Missing match expression"),0<t.length)throw new o.Exceptions.SFSValidationError("FindUsersRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_EXPRESSION]=this._matchExpr._toArray(),null!=this._target&&(this._target instanceof o.Entities.SFSRoom?this._reqObj[this.constructor.KEY_ROOM]=this._target.id:"string"==typeof this._target?this._reqObj[this.constructor.KEY_GROUP]=this._target:this._log.warn("Unsupport target type for FindUsersRequest: "+this._target)),0<this._limit&&(this._reqObj[this.constructor.KEY_LIMIT]=this._limit)}}),o.Requests.System.FindUsersRequest.KEY_EXPRESSION="e",o.Requests.System.FindUsersRequest.KEY_GROUP="g",o.Requests.System.FindUsersRequest.KEY_ROOM="r",o.Requests.System.FindUsersRequest.KEY_LIMIT="l",o.Requests.System.FindUsersRequest.KEY_FILTERED_USERS="fu",o.Requests.System.PingPongRequest=o.Requests._BaseRequest.extend({init:function(){this._super(o.Requests.PingPong)},validate:function(){},execute:function(){}}),o.Requests.MMO.SetUserPositionRequest=o.Requests._BaseRequest.extend({init:function(t,e){this._super(o.Requests.SetUserPosition),this._pos=t,this._room=e},validate:function(t){var e=[];if(null==this._pos&&e.push("Position must be a Vec3D instance"),null==this._room&&(this._room=t.lastJoinedRoom),this._room instanceof o.Entities.MMORoom||e.push("Passed Room is not an MMORoom"),0<e.length)throw new o.Exceptions.SFSValidationError("SetUserPosition Error",e)},execute:function(){this._reqObj[this.constructor.KEY_ROOM]=this._room.id,this._reqObj[this.constructor.KEY_VEC3D]=this._pos._toArray()}}),o.Requests.MMO.SetUserPositionRequest.KEY_ROOM="r",o.Requests.MMO.SetUserPositionRequest.KEY_VEC3D="v",o.Requests.MMO.SetUserPositionRequest.KEY_PLUS_USER_LIST="p",o.Requests.MMO.SetUserPositionRequest.KEY_MINUS_USER_LIST="m",o.Requests.MMO.SetUserPositionRequest.KEY_PLUS_ITEM_LIST="q",o.Requests.MMO.SetUserPositionRequest.KEY_MINUS_ITEM_LIST="n",o.Requests.MMO.SetMMOItemVariables={},o.Requests.MMO.SetMMOItemVariables.KEY_ROOM_ID="r",o.Requests.MMO.SetMMOItemVariables.KEY_ITEM_ID="i",o.Requests.MMO.SetMMOItemVariables.KEY_VAR_LIST="v",o.Requests.BuddyList.InitBuddyListRequest=o.Requests._BaseRequest.extend({init:function(){this._super(o.Requests.InitBuddyList)},validate:function(t){var e=[];if(t.buddyManager.isInited()&&e.push("Buddy List is already initialized"),0<e.length)throw new o.Exceptions.SFSValidationError("InitBuddyListRequest Error",e)},execute:function(){}}),o.Requests.BuddyList.InitBuddyListRequest.KEY_BLIST="bl",o.Requests.BuddyList.InitBuddyListRequest.KEY_BUDDY_STATES="bs",o.Requests.BuddyList.InitBuddyListRequest.KEY_MY_VARS="mv",o.Requests.BuddyList.AddBuddyRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.AddBuddy),this._name=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),(null==this._name||1>this._name.length)&&e.push("Invalid buddy name (null or empty string)"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't add a buddy while you are offline in the Buddy List system"),null!=(t=t.buddyManager.getBuddyByName(this._name))&&!t.isTemp()&&e.push("Can't add buddy '"+this._name+"' because it is already in your list"),0<e.length)throw new o.Exceptions.SFSValidationError("AddBuddyRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_BUDDY_NAME]=this._name}}),o.Requests.BuddyList.AddBuddyRequest.KEY_BUDDY_NAME="bn",o.Requests.BuddyList.BlockBuddyRequest=o.Requests._BaseRequest.extend({init:function(t,e){this._super(o.Requests.BlockBuddy),this._name=t,this._blocked=e},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),(null==this._name||1>this._name.length)&&e.push("Invalid buddy name (null or empty string)"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't block a buddy while you are offline in the Buddy List system"),null==(t=t.buddyManager.getBuddyByName(this._name))?e.push("Can't block buddy '"+this._name+"' because it isn't in your list"):t.isBlocked()==this._blocked&&e.push("Block flag is already in the requested '"+this._blocked+"' state for buddy "+this._name),0<e.length)throw new o.Exceptions.SFSValidationError("BlockBuddyRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_BUDDY_NAME]=this._name,this._reqObj[this.constructor.KEY_BUDDY_BLOCK_STATE]=this._blocked}}),o.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_NAME="bn",o.Requests.BuddyList.BlockBuddyRequest.KEY_BUDDY_BLOCK_STATE="bs",o.Requests.BuddyList.RemoveBuddyRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.RemoveBuddy),this._name=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't remove a buddy while you are offline in the Buddy List system"),t.buddyManager.containsBuddy(this._name)||e.push("Can't remove buddy '"+this._name+"' because it isn't in your list"),0<e.length)throw new o.Exceptions.SFSValidationError("RemoveBuddyRequest Error",e)},execute:function(){this._reqObj[this.constructor.KEY_BUDDY_NAME]=this._name}}),o.Requests.BuddyList.RemoveBuddyRequest.KEY_BUDDY_NAME="bn",o.Requests.BuddyList.SetBuddyVariablesRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.SetBuddyVariables),this._buddyVariables=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0==t.buddyManager.getMyOnlineState()&&e.push("Can't set Buddy Variables while you are offline in the Buddy List system"),(null==this._buddyVariables||0==this._buddyVariables.length)&&e.push("No Buddy Variables to set have been specified"),0<e.length)throw new o.Exceptions.SFSValidationError("SetBuddyVariablesRequest Error",e)},execute:function(){var t,e=[];for(t in this._buddyVariables){var i=this._buddyVariables[t];i instanceof o.Entities.Variables.SFSBuddyVariable&&e.push(i.toArray())}this._reqObj[this.constructor.KEY_BUDDY_VARS]=e}}),o.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_NAME="bn",o.Requests.BuddyList.SetBuddyVariablesRequest.KEY_BUDDY_VARS="bv",o.Requests.BuddyList.GoOnlineRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.GoOnline),this._online=t},validate:function(t){var e=[];if(t.buddyManager.isInited()||e.push("Buddy List not yet initialized; please send an InitBuddyRequest first"),0<e.length)throw new o.Exceptions.SFSValidationError("GoOnlineRequest Error",e)},execute:function(t){t.buddyManager._setMyOnlineState(this._online),this._reqObj[this.constructor.KEY_ONLINE]=this._online}}),o.Requests.BuddyList.GoOnlineRequest.KEY_ONLINE="o",o.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_NAME="bn",o.Requests.BuddyList.GoOnlineRequest.KEY_BUDDY_ID="bi",o.Requests.BuddyList.BuddyMessageRequest=o.Requests.System.GenericMessageRequest.extend({init:function(t,e,i){this._super(),this._type=o.Requests.GenericMessageType.BUDDY_MSG,this._message=t,this._recipient=null!=e?e.id:-1,this._params=i}}),o.Requests.Game.InviteUsersRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.InviteUsers),this._invitedUsers=t,this._secondsForAnswer=e,this._params=i},validate:function(){var t=[];if((null==this._invitedUsers||1>this._invitedUsers.length)&&t.push("No invitation(s) to send"),this._invitedUsers.length>this.constructor.MAX_INVITATIONS_FROM_CLIENT_SIDE&&t.push("Too many invitations; "+this.constructor.MAX_INVITATIONS_FROM_CLIENT_SIDE+" max are allowed from client side"),(this._secondsForAnswer<this.constructor.MIN_EXPIRY_TIME||this._secondsForAnswer>this.constructor.MAX_EXPIRY_TIME)&&t.push("secondsForAnswer value is out of range (min: "+this.constructor.MIN_EXPIRY_TIME+"; max: "+this.constructor.MAX_EXPIRY_TIME+")"),0<t.length)throw new o.Exceptions.SFSValidationError("InviteUsersRequest Error",t)},execute:function(t){var e,i=[];for(e in this._invitedUsers){var n=this._invitedUsers[e];(n instanceof o.Entities.SFSUser||n instanceof o.Entities.SFSBuddy)&&n!=t.mySelf&&i.push(n.id)}this._reqObj[this.constructor.KEY_INVITED_USERS]=i,this._reqObj[this.constructor.KEY_TIME]=this._secondsForAnswer,null!=this._params&&(this._reqObj[this.constructor.KEY_PARAMS]=this._params)}}),o.Requests.Game.InviteUsersRequest.KEY_USER="u",o.Requests.Game.InviteUsersRequest.KEY_USER_ID="ui",o.Requests.Game.InviteUsersRequest.KEY_INVITATION_ID="ii",o.Requests.Game.InviteUsersRequest.KEY_TIME="t",o.Requests.Game.InviteUsersRequest.KEY_PARAMS="p",o.Requests.Game.InviteUsersRequest.KEY_INVITEE_ID="ee",o.Requests.Game.InviteUsersRequest.KEY_INVITED_USERS="iu",o.Requests.Game.InviteUsersRequest.KEY_REPLY_ID="ri",o.Requests.Game.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE=8,o.Requests.Game.InviteUsersRequest.MIN_EXPIRY_TIME=5,o.Requests.Game.InviteUsersRequest.MAX_EXPIRY_TIME=300,o.Requests.Game.InvitationReplyRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.InvitationReply),this._invitation=t,this._reply=e,this._params=i},validate:function(){var t=[];if(null==this._invitation&&t.push("Missing invitation object"),0<t.length)throw new o.Exceptions.SFSValidationError("InvitationReplyRequest Error",t)},execute:function(){this._reqObj[this.constructor.KEY_INVITATION_ID]=this._invitation.id,this._reqObj[this.constructor.KEY_INVITATION_REPLY]=this._reply,null!=this._params&&(this._reqObj[this.constructor.KEY_INVITATION_PARAMS]=this._params)}}),o.Requests.Game.InvitationReplyRequest.KEY_INVITATION_ID="i",o.Requests.Game.InvitationReplyRequest.KEY_INVITATION_REPLY="r",o.Requests.Game.InvitationReplyRequest.KEY_INVITATION_PARAMS="p",o.Requests.Game.CreateSFSGameRequest=o.Requests._BaseRequest.extend({init:function(t){this._super(o.Requests.CreateSFSGame),this._settings=t,this._createRoomRequest=new o.Requests.System.CreateRoomRequest(t,!1,null)},validate:function(t){var e=[];try{this._createRoomRequest.validate(t)}catch(t){e=t.getErrors()}if(this._settings.minPlayersToStartGame>this._settings.maxUsers&&e.push("Minimum number of players to start the game can't be greater than the Room's maximum number of users"),(this._settings.invitationExpiryTime<o.Requests.Game.InviteUsersRequest.MIN_EXPIRY_TIME||this._settings.invitationExpiryTime>o.Requests.Game.InviteUsersRequest.MAX_EXPIRY_TIME)&&e.push("Invitation expiration time value is out of range (min: "+o.Requests.Game.InviteUsersRequest.MIN_EXPIRY_TIME+"; max: "+o.Requests.Game.InviteUsersRequest.MAX_EXPIRY_TIME+")"),null!=this._settings.invitedPlayers&&this._settings.invitedPlayers.length>o.Requests.Game.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE&&e.push("Can't invite more than "+o.Requests.Game.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE+" players from client side"),0<e.length)throw new o.Exceptions.SFSValidationError("CreateSFSGameRequest Error",e)},execute:function(t){if(this._createRoomRequest.execute(t),this._reqObj=this._createRoomRequest._reqObj,this._reqObj[this.constructor.KEY_IS_PUBLIC]=this._settings.isPublic,this._reqObj[this.constructor.KEY_MIN_PLAYERS]=this._settings.minPlayersToStartGame,this._reqObj[this.constructor.KEY_INVITATION_EXPIRY]=this._settings.invitationExpiryTime,this._reqObj[this.constructor.KEY_LEAVE_ROOM]=this._settings.leaveLastJoinedRoom,this._reqObj[this.constructor.KEY_NOTIFY_GAME_STARTED]=this._settings.notifyGameStarted,null!=this._settings.playerMatchExpression&&(this._reqObj[this.constructor.KEY_PLAYER_MATCH_EXP]=this._settings.playerMatchExpression._toArray()),null!=this._settings.spectatorMatchExpression&&(this._reqObj[this.constructor.KEY_SPECTATOR_MATCH_EXP]=this._settings.spectatorMatchExpression._toArray()),null!=this._settings.invitedPlayers){var e;t=[];for(e in this._settings.invitedPlayers){var i=this._settings.invitedPlayers[e];(i instanceof o.Entities.SFSUser||i instanceof o.Entities.SFSBuddy)&&t.push(i.id)}this._reqObj[this.constructor.KEY_INVITED_PLAYERS]=t}null!=this._settings.searchableRooms&&(this._reqObj[this.constructor.KEY_SEARCHABLE_ROOMS]=this._settings.searchableRooms),null!=this._settings.invitationParams&&(this._reqObj[this.constructor.KEY_INVITATION_PARAMS]=this._settings.invitationParams)}}),o.Requests.Game.CreateSFSGameRequest.KEY_IS_PUBLIC="gip",o.Requests.Game.CreateSFSGameRequest.KEY_MIN_PLAYERS="gmp",o.Requests.Game.CreateSFSGameRequest.KEY_INVITED_PLAYERS="ginp",o.Requests.Game.CreateSFSGameRequest.KEY_SEARCHABLE_ROOMS="gsr",o.Requests.Game.CreateSFSGameRequest.KEY_PLAYER_MATCH_EXP="gpme",o.Requests.Game.CreateSFSGameRequest.KEY_SPECTATOR_MATCH_EXP="gsme",o.Requests.Game.CreateSFSGameRequest.KEY_INVITATION_EXPIRY="gie",o.Requests.Game.CreateSFSGameRequest.KEY_LEAVE_ROOM="glr",o.Requests.Game.CreateSFSGameRequest.KEY_NOTIFY_GAME_STARTED="gns",o.Requests.Game.CreateSFSGameRequest.KEY_INVITATION_PARAMS="ip",o.Requests.Game.QuickJoinGameRequest=o.Requests._BaseRequest.extend({init:function(t,e,i){this._super(o.Requests.QuickJoinGame),this._matchExpression=t,this._whereToSearch=e,this._roomToLeave=i},validate:function(){var t=[];if(null==this._whereToSearch||1>this._whereToSearch.length?t.push("Missing lis of Rooms or Group name where to search the game to join"):this._whereToSearch.length>this.constructor.MAX_ROOMS&&t.push("Too many Rooms specified in list where to search the game to join; client limit is: "+this.constructor.MAX_ROOMS),0<t.length)throw new o.Exceptions.SFSValidationError("CreateSFSGameRequest Error",t)},execute:function(){if("string"==typeof this._whereToSearch[0])this._reqObj[this.constructor.KEY_GROUP_LIST]=this._whereToSearch;else{if(!(this._whereToSearch[0]instanceof o.Entities.SFSRoom))throw new o.Exceptions.SFSError("Invalid type in whereToSearch parameter");for(var t=[],e=0;e<this._whereToSearch.length;e++){var i=this._whereToSearch[e];i instanceof o.Entities.SFSRoom&&t.push(i.id)}this._reqObj[this.constructor.KEY_ROOM_LIST]=t}null!=this._roomToLeave&&(this._reqObj[this.constructor.KEY_ROOM_TO_LEAVE]=this._roomToLeave.id),null!=this._matchExpression&&(this._reqObj[this.constructor.KEY_MATCH_EXPRESSION]=this._matchExpression._toArray())}}),o.Requests.Game.QuickJoinGameRequest.KEY_ROOM_LIST="rl",o.Requests.Game.QuickJoinGameRequest.KEY_GROUP_LIST="gl",o.Requests.Game.QuickJoinGameRequest.KEY_ROOM_TO_LEAVE="tl",o.Requests.Game.QuickJoinGameRequest.KEY_MATCH_EXPRESSION="me",o.Requests.Game.QuickJoinGameRequest.MAX_ROOMS=32,o.Requests.Handshake=0,o.Requests.Login=1,o.Requests.Logout=2,o.Requests.JoinRoom=4,o.Requests.CreateRoom=6,o.Requests.GenericMessage=7,o.Requests.ChangeRoomName=8,o.Requests.ChangeRoomPassword=9,o.Requests.SetRoomVariables=11,o.Requests.SetUserVariables=12,o.Requests.CallExtension=13,o.Requests.LeaveRoom=14,o.Requests.SubscribeRoomGroup=15,o.Requests.UnsubscribeRoomGroup=16,o.Requests.SpectatorToPlayer=17,o.Requests.PlayerToSpectator=18,o.Requests.ChangeRoomCapacity=19,o.Requests.KickUser=24,o.Requests.BanUser=25,o.Requests.ManualDisconnection=26,o.Requests.FindRooms=27,o.Requests.FindUsers=28,o.Requests.PingPong=29,o.Requests.SetUserPosition=30,o.Requests.InitBuddyList=200,o.Requests.AddBuddy=201,o.Requests.BlockBuddy=202,o.Requests.RemoveBuddy=203,o.Requests.SetBuddyVariables=204,o.Requests.GoOnline=205,o.Requests.InviteUsers=300,o.Requests.InvitationReply=301,o.Requests.CreateSFSGame=302,o.Requests.QuickJoinGame=303,o.Requests.getRequestNameFromId=function(t){for(var e in o.Requests)if(o.Requests[e]==t)return e;return null},o.Requests.RoomSettings=r.Class.extend({init:function(t){this.name=t,this.password="",this.groupId="default",this.isGame=!1,this.maxUsers=10,this.maxSpectators=0,this.maxVariables=5,this.variables=[],this.extension=this.events=this.permissions=null}}),o.Requests.Game.SFSGameSettings=o.Requests.RoomSettings.extend({init:function(t){this._super(t),this.isPublic=!0,this.minPlayersToStartGame=2,this.searchableRooms=this.invitedPlayers=null,this.invitationExpiryTime=15,this.leaveLastJoinedRoom=!0,this.notifyGameStarted=!1,this.invitationParams=this.spectatorMatchExpression=this.playerMatchExpression=null}}),o.Requests.MMO.MMORoomSettings=o.Requests.RoomSettings.extend({init:function(t){this._super(t),this.mapLimits=this.defaultAOI=null,this.userMaxLimboSeconds=50,this.proximityListUpdateMillis=250,this.sendAOIEntryPoint=!0}}),o.Requests.RoomPermissions=function(){this.allowPasswordStateChange=this.allowNameChange=!1,this.allowPublicMessages=!0,this.allowResizing=!1},o.Requests.RoomEvents=function(){this.allowUserVariablesUpdate=this.allowUserExit=this.allowUserEnter=this.allowUserCountChange=!1},o.Requests.RoomExtension=function(t,e){this.id=t,this.className=e,this.propertiesFile=""},o.Requests.MMO.MapLimits=function(t,e){if(null==t||null==e)throw new o.Exceptions.SFSError("Map limits arguments must be both non null!");this.lowerLimit=t,this.higherLimit=e},o.Requests.GenericMessageType={},o.Requests.GenericMessageType.PUBLIC_MSG=0,o.Requests.GenericMessageType.PRIVATE_MSG=1,o.Requests.GenericMessageType.MODERATOR_MSG=2,o.Requests.GenericMessageType.ADMING_MSG=3,o.Requests.GenericMessageType.OBJECT_MSG=4,o.Requests.GenericMessageType.BUDDY_MSG=5,o.Requests.MessageRecipientMode=function(t,e){if(t<this.TO_USER||t>this.TO_ZONE)throw new o.Exceptions.SFSError("Illegal recipient mode: "+t);this.mode=t,this.target=e},o.Requests.MessageRecipientMode.TO_USER=0,o.Requests.MessageRecipientMode.TO_ROOM=1,o.Requests.MessageRecipientMode.TO_GROUP=2,o.Requests.MessageRecipientMode.TO_ZONE=3,o.Requests.BanMode={},o.Requests.BanMode.BY_ADDRESS=0,o.Requests.BanMode.BY_NAME=1,o.SocketEngine=function(t){this.isConnecting=this.isConnected=!1,this.reconnectionSeconds=0,this._controllers={},this._log=o.Logger,this._socket=null,this._maxMessageSize=1e4,this._sfs=t,this._lastTcpPort=0,this._reconnectionDelayMillis=1e3,this._attemptingReconnection=this._isReconnecting=!1,this._eventDispatcher=new o.EventDispatcher,this._disconnectionReason=o.Utils.ClientDisconnectionReason.UNKNOWN},o.SocketEngine.prototype.connect=function(t,e,i){this.isConnected?this._log.error("Connection is already active"):this.isConnecting?this._log.error("A connection attempt is already in progress"):(this.isConnecting=!0,this._socket=new WebSocket("ws"+(i?"s":"")+"://"+t+":"+e+"/websocket"),this._socket._scope=this,this._socket.onopen=this._onSocketConnect,this._socket.onclose=this._onSocketDisconnect,this._socket.onmessage=this._onSocketData,this._socket.onerror=this._onSocketError)},o.SocketEngine.prototype.disconnect=function(t){this._disconnectionReason=t,this._socket.close()},o.SocketEngine.prototype.addEventListener=function(t,e,i){this._eventDispatcher.addEventListener(t,e,i)},o.SocketEngine.prototype.removeEventListener=function(t,e){this._eventDispatcher.removeEventListener(t,e)},o.SocketEngine.prototype.addController=function(t,e){null==this._controllers[t]&&(this._controllers[t]=e)},o.SocketEngine.prototype.removeController=function(t){delete this._controllers[t]},o.SocketEngine.prototype.send=function(t){t=this._encodeMessage(t),this._socket.send(t)},o.SocketEngine.prototype._decodeMessage=function(t){return JSON.parse(t)},o.SocketEngine.prototype._encodeMessage=function(t){return JSON.stringify(t)},o.SocketEngine.prototype._onSocketConnect=function(){this._scope.isConnected=!0,this._scope.isConnecting=!1,this._scope._log.debug("SOCKET CONNECTION OK"),this._scope._eventDispatcher.dispatchEvent(o.SocketEvent.CONNECT,{success:!0,isReconnection:this._scope._attemptingReconnection})},o.SocketEngine.prototype._onSocketDisconnect=function(){if(this._scope.isConnected=!1,this._scope.isConnecting){this._scope.isConnecting=!1;var t={success:!1,isReconnection:this._scope._attemptingReconnection};this._scope._eventDispatcher.dispatchEvent(o.SocketEvent.CONNECT,t)}else t={reason:this._scope._disconnectionReason},this._scope._eventDispatcher.dispatchEvent(o.SocketEvent.DISCONNECT,t),this._scope._disconnectionReason=o.Utils.ClientDisconnectionReason.UNKNOWN},o.SocketEngine.prototype._onSocketData=function(t){this._scope._eventDispatcher.dispatchEvent(o.SocketEvent.DATA,this._scope._decodeMessage(t.data))},o.SocketEngine.prototype._onSocketError=function(t){this._scope._eventDispatcher.dispatchEvent(o.SocketEvent.IOERROR,t.data)},o.SocketEvent={CONNECT:"socketConnect",DISCONNECT:"socketDisconnect",DATA:"data",IOERROR:"socketIOError"},e.exports={SFS2X:o,SmartFox:n},cc._RF.pop()},{}],SFSManager:[function(t,e,i){"use strict";cc._RF.push(e,"708e2ZyKKBOC6wP3rHU/+jc","SFSManager");var o=t("../lib/SFS2X_API_JS"),n=t("./SFSSendRequest"),s=t("../helper/Constant"),a=t("../helper/Message"),r=t("../util/Util"),c={sfs:null,config:{host:"bomnguyentu.com",port:443,useSSL:!0,zone:"GameBai",debug:!1},SmartFox:o.SmartFox,SFS2X:o.SFS2X,init:function(){this.onResponseBind=this.onResponse.bind(this),this.isAddEventResponse=!1,this.sfs=new this.SmartFox(this.config),this.sfs.addEventListener(this.SFS2X.SFSEvent.CONNECTION,this.onConnection,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.LOGIN,this.onLogin,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.LOGOUT,this.onLogout,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError,this),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoin,this),this.sendRequest=n,this.sendRequest.init(this)},connect:function(t){this.controller=t,this.sfs.connect()},setController:function(t){this.controller=t},addEventResponse:function(){this.isAddEventResponse||(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.isAddEventResponse=!0)},removeEventResponse:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.isAddEventResponse=!1},onConnection:function(t){if(t.success){var e=cc.S.user,i=(e.server_id||s.SERVER_ID_1)+e.username,o={password:e.token,time:e.time||0,server_id:e.server_id||s.SERVER_ID_1,user_id:e.user_id};this.sfs.send(new this.SFS2X.Requests.System.LoginRequest(i,e.login_game_token,o))}else this.controller.hideProcessingNode(),this.controller.showDialogMessage(a.LOGIN_TITLE,a.CONNECT_SFS_ERROR)},onConnectionLost:function(t){if(cc.S.sfsManager&&!cc.S.sfsManager.sfs.isConnected()){switch(t.reason){case"idle":case"kick":case"ban":case"unknown":this.controller.setAutoLogin(!1),this.controller.setAccountType(!1)}this.controller.clearSFSManager(),cc.director.loadScene("GameCenter")}},onLoginError:function(t){this.controller.clearSFSManager(),this.controller.hideProcessingNode(),this.controller.showDialogMessage(a.LOGIN_TITLE,t.errorMessage)},onLogin:function(t){this.controller.initBaseController()},onLogout:function(t){},onRoomJoinError:function(t){},onRoomJoin:function(t){var e=t.room.name,i=cc.S.sceneName;-1!==e.indexOf(s.LOBBY)&&e!==s.LOBBY&&this.controller.addFavorite(t.room.groupId),r.isLobbyRoom(e)?i===s.SCENE_GAME_SLOT||i===s.SCENE_GAME_SLOT_2||i===s.SCENE_GAME_SLOT_3||i===s.SCENE_GAME_SLOT_4||i===s.SCENE_GAME_SLOT_5||i===s.SCENE_GAME_FIRE_FISH||i===s.SCENE_GAME_LOTTERY?this.loadScene(s.SCENE_GAME_CENTER):(this.controller.hideProcessingNode(),this.controller.initLoginSuccess()):r.isLobbyGame(e)?i===s.SCENE_GAME_CENTER?r.isLobbyLongVuong(e)?this.loadScene(s.SCENE_GAME_FIRE_FISH):(this.controller.hideProcessingNode(),this.controller.GameCenterUI.showHeaderAccountNode(),this.controller.Header.HeaderAccount.loadUserInfo(),this.controller.initListRooms()):i===s.SCENE_GAME_FIRE_FISH&&r.isLobbyLongVuong2(e)?(this.controller.hideProcessingNode(),this.controller.FireFishUI.showCenterNode()):this.loadScene(s.SCENE_GAME_CENTER):(this.addEventResponse(),this.controller.showProcessingNode())},onResponse:function(t){t.timeReceived=(new Date).getTime();var e=t.params,i=e.status||e.STATUS,o=t.cmd;if(cc.S.tempRequests||(cc.S.tempRequests=[]),i)switch(o){case s.ROOM_INFO:if(!cc.director._loadingScene){cc.S.roomInfo=e;var n=cc.S.sfsManager.sfs.lastJoinedRoom.groupId;n===s.TLMNSOLO?n=s.SCENE_GAME_TLMN:n===s.SAMSOLO?n=s.SCENE_GAME_SAM:n===s.LONGVUONG?n=s.SCENE_GAME_FIRE_FISH:n===s.MODERN_SLOT?n=s.SCENE_GAME_SLOT_5:n===s.ONE001?n=s.SCENE_GAME_SLOT_2:n===s.DRAGON?n=s.SCENE_GAME_SLOT_3:n===s.CLASSIC1?n=s.SCENE_GAME_SLOT_4:n===s.LOTTERY&&(n=s.SCENE_GAME_LOTTERY),n!==s.SHOOTING_FISH&&(this.addEventResponse(),this.loadScene(n))}break;default:cc.S.tempRequests.push(t)}else switch(o){case s.REQUEST_JOIN_ROOM:this.controller.hideProcessingNode(),this.controller.showDialogMessage(a.TITLE_FAILED,e.msg);break;default:cc.S.tempRequests.push(t)}},loadScene:function(t){var e=this,i=cc.callFunc(function(){this.controller.showProcessingSceneNode()},this),o=cc.delayTime(.5),n=cc.callFunc(function(){cc.director._loadingScene||(e.isPreloadScene=!1,e.controller.loadPersistScene?e.controller.loadPersistScene(t):e.controller.GameCommon.loadPersistScene?e.controller.GameCommon.loadPersistScene(t):cc.director.loadScene(t))},this),s=cc.sequence(i,o,n);this.isPreloadScene||(this.isPreloadScene=!0,this.controller.node.runAction(s))},joinRoom:function(t,e,i,o,n){var a={game_name:t,min_bet:e,room_type:i,balance:o,is_auto_buy_in:n};this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(s.REQUEST_JOIN_ROOM,a))},destroy:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.CONNECTION,this.onConnection),this.sfs.removeEventListener(this.SFS2X.SFSEvent.CONNECTION_LOST,this.onConnectionLost),this.sfs.removeEventListener(this.SFS2X.SFSEvent.LOGIN_ERROR,this.onLoginError),this.sfs.removeEventListener(this.SFS2X.SFSEvent.LOGIN,this.onLogin),this.sfs.removeEventListener(this.SFS2X.SFSEvent.LOGOUT,this.onLogout),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_JOIN_ERROR,this.onRoomJoinError),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_JOIN,this.onRoomJoin),this.sfs=null}};e.exports=c,cc._RF.pop()},{"../helper/Constant":"Constant","../helper/Message":"Message","../lib/SFS2X_API_JS":"SFS2X_API_JS","../util/Util":"Util","./SFSSendRequest":"SFSSendRequest"}],SFSSendRequest:[function(t,e,i){"use strict";cc._RF.push(e,"93376zehM5KRIyNL/tq+F1T","SFSSendRequest");var o={init:function(t){this.sfsManager=t,this.sfs=this.sfsManager.sfs,this.SFS2X=this.sfsManager.SFS2X},send:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t="control."+t,this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e,this.sfs.lastJoinedRoom))},sendNoPrefix:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e,this.sfs.lastJoinedRoom))},sendToZone:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t="control."+t,this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e))},sendNoPrefixToZone:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.sfs.send(new this.SFS2X.Requests.System.ExtensionRequest(t,e))}};e.exports=o,cc._RF.pop()},{}],SMSItem:[function(t,e,i){"use strict";cc._RF.push(e,"77436VjwgJMWYb93dgXaVET","SMSItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{msgRichText:cc.RichText,noteRichText:cc.RichText},init:function(t,e,i){this.GameCenter=t;var s=String.format(n.RECHARGE_SMS_MSG,e.CODE,i);s=s.replace(n.RECHARGE_SMS_TENDANGNHAP,t.getUser().username),this.msgRichText.string=s,this.noteRichText.string=String.format(n.RECHARGE_SMS_NOTE,o.numberWithCommas(e.VND),o.numberWithCommas(e.MONEY))},onLoad:function(){}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],SafeQuickSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"a39fbMjE0lCQJsWVqxOlkqI","SafeQuickSelectItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{money:0,moneyLabel:cc.Label},init:function(t){this.GameCenter=t,this.Safe=t.GameRecharge.Safe,1===this.money?this.moneyLabel.string="ALL":this.moneyLabel.string=o.nFormatter(this.money)},onLoad:function(){},onClick:function(){1===this.money?this.Safe.isPush()?this.Safe.setMoney(this.GameCenter.getMoney()):this.Safe.setMoney(this.GameCenter.getSafeMoney()):this.Safe.addMoney(this.money)}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Safe:[function(t,e,i){"use strict";cc._RF.push(e,"0f5f6ShqAlKSrhqaBTp2jL+","Safe");var o=t("../../../prefab/item/SafeQuickSelectItem"),n=t("../../../util/FormatUtil"),s=t("../../../helper/Config"),a=t("../../../helper/Constant"),r=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{pushOnButtonNode:cc.Node,pushOffButtonNode:cc.Node,popOnButtonNode:cc.Node,popOffButtonNode:cc.Node,sendAllButtonNode:cc.Node,getAllButtonNode:cc.Node,sendButtonNode:cc.Node,getButtonNode:cc.Node,getOtpButtonNode:cc.Node,moneyLabel:cc.Label,moneySafeLabel:cc.Label,moneyEditBox:cc.EditBox,moneyNode:cc.Node,otpNode:cc.Node,otpEditBox:cc.EditBox,otpRickText:cc.RichText,listSafeQuickSelectItem:[o],getOtpContentNode:cc.Node,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){for(var e in this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.listSafeQuickSelectItem)this.listSafeQuickSelectItem[e].init(t)},onLoad:function(){this.amount=0},onEnable:function(){this.initMoney(),this.onPushClick()},initMoney:function(){this.moneyLabel.string=n.numberWithCommas(this.GameCenter.getMoney()),this.moneySafeLabel.string=n.numberWithCommas(this.GameCenter.getSafeMoney())},initOTP:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.OTP_FORGOT_PASS||"",i=e.content||"",o=e.service_number||"",n=String.format(r.SAFE_GET_OTP,i,o);n=n.replace(r.RECHARGE_SMS_TENDANGNHAP,this.GameCenter.getUser().username),this.otpRickText.string=n}},onPushClick:function(){this.pushOnButtonNode.active=!0,this.pushOffButtonNode.active=!1,this.popOnButtonNode.active=!1,this.popOffButtonNode.active=!0,this.sendAllButtonNode.active=!0,this.getAllButtonNode.active=!1,this.sendButtonNode.active=!0,this.getButtonNode.active=!1,this.moneyEditBox.string="",this.moneyNode.active=!0,this.otpNode.active=!1,this.getOtpContentNode.active=!1},onPopClick:function(){this.pushOnButtonNode.active=!1,this.pushOffButtonNode.active=!0,this.popOnButtonNode.active=!0,this.popOffButtonNode.active=!1,this.sendAllButtonNode.active=!1,this.getAllButtonNode.active=!0,this.sendButtonNode.active=!1,this.getButtonNode.active=!0,this.moneyEditBox.string="",this.otpEditBox.string="",this.moneyNode.active=!0,this.otpNode.active=!0,this.getOtpContentNode.active=!0},onSendAllClick:function(){this.setMoney(this.GameCenter.getMoney())},onGetAllClick:function(){this.moneyEditBox.string=n.numberWithCommas(this.GameCenter.getSafeMoney())},onSendClick:function(){var t=parseInt(n.getOnlyNumberInString(this.moneyEditBox.string));if(t>0){var e={amount:t};this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(a.REQUEST_SAFE_DEPOSIT,e)}else this.GameCenter.showDialogMessage(r.Message,r.NUMBER_MONEY_LARGER_ZERO)},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onGetClick:function(){if(0===this.GameCenter.getUser().status_value)this.GameCenter.showDialogMessage(r.SAFE_TITLE,r.SAFE_NOT_ACTIVE_PHONE);else if(this.amount=parseInt(n.getOnlyNumberInString(this.moneyEditBox.string)),this.amount>0){var t=this.GameCenter.getSafeMoney();this.amount>t&&(this.amount=t);var e={amount:this.amount,step:2,otp:this.otpEditBox.string};this.GameCenter.showProcessingNode(),this.GameCenter.sendRequest.sendToZone(a.REQUEST_SAFE_WITHDRAW,e)}else this.GameCenter.showDialogMessage(r.Message,r.NUMBER_MONEY_LARGER_ZERO)},onCancellick:function(){this.moneyEditBox.string="",this.otpEditBox.string=""},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},onMoneyChange:function(){var t=this.moneyEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.moneyEditBox.string=0==e?"":e},setMoney:function(t){t=this.isPush()?t<=this.GameCenter.getMoney()?t:this.GameCenter.getMoney():t<=this.GameCenter.getSafeMoney()?t:this.GameCenter.getSafeMoney(),n.numberWithCommas(t).length<=s.SAFE_MAX_LENGTH&&(this.moneyEditBox.string=n.numberWithCommas(t))},addMoney:function(t){this.setMoney(t+this.getMoneyValue())},getMoneyValue:function(){return parseInt(n.getOnlyNumberInString(this.moneyEditBox.string))||0},isPush:function(){return this.pushOnButtonNode.active},showStep1:function(){this.moneyEditBox.string="",this.otpEditBox.string="",this.moneyNode.active=!0,this.otpNode.active=!0,this.getOtpContentNode.active=!0,this.getAllButtonNode.active=!0},showStep2:function(){this.otpEditBox.string="",this.moneyNode.active=!1,this.otpNode.active=!0,this.getOtpContentNode.active=!0,this.getAllButtonNode.active=!1},isStep1:function(){return!this.otpNode.active},initWithDrawSuccess:function(){this.isStep1()?this.showStep2():this.showStep1()},initCapcha:function(){},clear:function(){this.moneyEditBox.string="",this.otpEditBox.string=""}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../prefab/item/SafeQuickSelectItem":"SafeQuickSelectItem","../../../util/FormatUtil":"FormatUtil"}],SamCardController:[function(t,e,i){"use strict";cc._RF.push(e,"60c4aOYd8JAOYCrKu0JfOSs","SamCardController");var o=t("../SamConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.cardController=this.node.getComponent("CardController")},onEnable:function(){},init:function(t){var e=this;this.Sam=t,this.isSelected=!1,this.isInAction=!1,this._initScale=1,this._scaleDownAction=cc.scaleTo(o.TIME_TOUCH_CARD,o.SCALE_TOUCH_CARD),this._scaleUpAction=cc.scaleTo(o.TIME_TOUCH_CARD,this._initScale),this._moveUpAction=cc.moveBy(o.TIME_TOUCH_CARD,0,o.DISTANCE_SELECTED_CARD),this._moveDownaction=cc.moveBy(o.TIME_TOUCH_CARD,0,-o.DISTANCE_SELECTED_CARD),this._resetInAction=cc.callFunc(function(){e.isInAction=!1},this),this._onMouseEnter=function(t){e.cardController.showHighLight()},this._onMouseLeave=function(t){e.cardController.hideHighLight()},this._onTouchDown=function(t){e.isInAction||(this.stopAllActions(),this.cardController.showHighLight(),this.runAction(e._scaleDownAction))},this._onTouchUp=function(t){e.isInAction||(this.stopAllActions(),this.cardController.hideHighLight(),e.isInAction=!0,e.isSelected?(e.isSelected=!1,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveDownaction),e._resetInAction))):(e.isSelected=!0,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveUpAction),e._resetInAction))),e.Sam.SamHandlerEffect.checkShowButtons(),e.Sam.SamHandlerEffect.showRecommend())},this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},disableEvents:function(){this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},moveTo:function(t,e){this.isSelected&&(e+=o.DISTANCE_SELECTED_CARD),this.node.stopAllActions(),this.cardController.reveal(!0),this.cardController.hideHighLight(),this.isInAction=!0,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(o.TIME_TOUCH_CARD,this._initScale),cc.moveTo(o.TIME_TOUCH_CARD,t,e)),cc.callFunc(function(){this.isInAction=!1},this)))},selectCard:function(){this.isInAction||(this.node.stopAllActions(),this.isInAction=!0,this.isSelected?(this.isSelected=!1,this.node.runAction(cc.sequence(this._moveDownaction,this._resetInAction))):(this.isSelected=!0,this.node.runAction(cc.sequence(this._moveUpAction,this._resetInAction))),this.cardController.hideHighLight())},getSelected:function(){return this.isSelected}}),cc._RF.pop()},{"../SamConfig":"SamConfig"}],SamCard:[function(t,e,i){"use strict";cc._RF.push(e,"c203dZFn9BJkpFkcAz7/tzn","SamCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;3===++i?i=4:4===i&&(i=3),e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{trueValue:{value:t,writable:!1},point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],SamConfig:[function(t,e,i){"use strict";cc._RF.push(e,"bfd4fCl+09L2IQDnNzaAtnv","SamConfig");e.exports={NUMBER_PLAYERS:4,NUMBER_SOLO_PLAYERS:2,NUMBER_CARDS_EACH_PLAYERS:10,VALUE_HAI:15,VALUE_AT:14,TIME_SORT_CARDS_IN_HAND:.5,DISTANCE_TWO_CARDS_IN_HAND:50,SCALE_CARDS_IN_HAND:1,TIME_TOUCH_CARD:.1,SCALE_TOUCH_CARD:1.1,DISTANCE_SELECTED_CARD:40,POSITION_MY_CARDS_X:-250,POSITION_MY_CARDS_Y:-250,DISTANCE_CARD_IN_TABLE:20,DISTANCE_TWO_CARDS_IN_TABLE:40,TIME_MOVE_CARDS_TO_TABLE:.25,DISTANCE_MAX_RANDOM_POSITION_CARD_X:100,DISTANCE_MAX_RANDOM_POSITION_CARD_Y:50,SCALE_CARD_IN_TABLE:.6,TIME_FLIP_CARD_IN_TABLE:.25,TIME_SORT_CARDS_IN_OTHER_PLAYER:.5,DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:40,DISTANCE_BACK_CARD_OTHER_PLAYER:60,SCALE_CARDS_IN_OTHER_PLAYER:.6,TIME_SHOW_CARDS_OTHER_PLAYERS:.5},cc._RF.pop()},{}],SamConstant:[function(t,e,i){"use strict";cc._RF.push(e,"c561e2kbT9O6Jes/HW5yEG0","SamConstant");e.exports={START:"START",COUNT_DOWN:"COUNT_DOWN",PLAY:"PLAY",IGNORE_SAM:"IGNORE_SAM",SAM:"SAM",REQUEST_SAM:"REQUEST_SAM",IGNORE:"IGNORE",RESULT:"RESULT",ROOM_INFO:"ROOM_INFO",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],SamGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"6676dydl0ZKRpQNSuOqep2b","SamGroupCardsType");e.exports={BAI_RAC:"BAI_RAC",DOI:"DOI",SAM:"SAM",SANH:"SANH",TU_QUY:"TU_QUY"},cc._RF.pop()},{}],SamHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"ee731nnqgJHRaJySo20n1t9","SamHandlerEffect");var o=t("./SamCard"),n=t("./item/SamCardController"),s=t("./SamConfig"),a=t("./SamWinType"),r=t("./SamGroupCardsType"),c=t("./SamRecommend"),h=t("../../util/CardUtil"),l=t("../../util/RandomUtil"),u=(t("../../helper/Message"),{init:function(t){this.Sam=t,this.SamUI=t.SamUI,this.GameCommon=t.GameCommon,this.sortCard=!1,this.listPlayers=t.listPlayers,this.recommenedToggle=t.recommenedToggle},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.initMyCards(t):this.listPlayers[e].SamPlayer.showCardBack(s.NUMBER_CARDS_EACH_PLAYERS)},initMyCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.Sam.myCardsNode.removeAllChildren(!0),this.SamUI.showSortButton(),t){var o=this.initNewCardNode(t[i]);o.parent=this.Sam.myCardsNode,o.scale=s.SCALE_CARDS_IN_HAND;var a=o.addComponent(n);a.init(this.Sam),o.samCardController=a;var r=s.DISTANCE_TWO_CARDS_IN_HAND*i+s.POSITION_MY_CARDS_X,c=s.POSITION_MY_CARDS_Y;e?(o.setPosition(s.POSITION_MY_CARDS_X,s.POSITION_MY_CARDS_Y),o.runAction(cc.moveTo(s.TIME_SORT_CARDS_IN_HAND,r,c))):o.setPosition(r,c)}},resumeCards:function(t){var e=t.data.players;for(var i in e)if(e[i].is_player)if(e[i].isItMe){var o=e[i].cards;this.initMyCards(o,!1)}else{var n=e[i].number_cards;e[i].SamPlayer.showCardBack(n)}},initLastRoundCards:function(t){var e=t.data.last_round_cards.cards,i=this.getRandomPositonInTable();if(e)for(var o in e){var n=this.initNewCardNode(e[o]);n.setPosition((o-e.length/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+i.x,i.y),n.scale=s.SCALE_CARD_IN_TABLE,n.parent=this.Sam.tableCardsNode}},handlePlayerStart:function(t){var e=t.data.id_playing;this.Sam.getPlayerByUserId(e)&&this.initRecommendIgnore()},handlePlayingPlayer:function(t){var e=t.data.id_playing,i=t.data.is_new_round,o=this.Sam.getPlayerByUserId(e);o&&(this.Sam.idPlaying=e,o.isItMe?(this.checkShowButtons(),i?this.listCardPlay=[]:this.SamUI.showIgnoreTurnButton()):(this.SamUI.hidePlayButton(),this.SamUI.hideIgnoreTurnButton()),this.Sam.startCountDownPlayer(o,t.time_remain,t.time))},handlePlayedPlayer:function(t,e,i,n){this.initRecommendPlay(e);var a=e.length,r=this.getRandomPositonInTable();this.showDarkEffectAllCardsRevealInTable(),e=this.checkChangePositionSanhHai(e,i);var c=this.Sam.getPlayerByUserId(t);if(c)if(n&&c.SamPlayer.showBaoMot(),c.isItMe){var h=this.Sam.getCardsNodeByCards(e);for(var l in h=this.checkChangePositionSanhHaiForNode(h,i))h[l].stopAllActions(),h[l].parent=this.Sam.tableCardsNode,h[l].scale=1,h[l].cardController.hideHighLight(),h[l].samCardController.disableEvents(),h[l].runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(l-a/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+r.x,r.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)));this.sortMyCards(),this.checkShowButtons()}else{var u=c.node.x,d=c.node.y;u+=s.DISTANCE_BACK_CARD_OTHER_PLAYER*(u>0?-1:1);for(var m=0;m<a;m++){var p=cc.instantiate(this.Sam.cardPrefab);p.setPosition(u,d),p.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,p.parent=this.Sam.tableCardsNode;var f=p.getComponent("CardController"),g=new o(e[m]);f.init(g),p.cardController=f,p.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(m-a/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+r.x,r.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.minusNumberCardsForPlayer(c,a)}},handleResult:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clearSamAllPlayers(),this.showEffectMinusBalanceAndWinner(t.money_changes),this.showEffectShowPlayersCards(t,e),this.resetRecommend();t.user_id_win;var i=t.win_type,o=t.money_changes,n=t.players_cards;if(i===a.THANG_SAM||i===a.THUA_SAM)for(var r in o){var c=this.Sam.getPlayerByUserId(o[r].user_id);o[r].money_change>0?c.SamPlayer.showEffectThangSam():o[r].money_change<0&&c.SamPlayer.showEffectThuaSam()}else if(i===a.THOI_HAI)for(var h in o){if(o[h].money_change<0)this.Sam.getPlayerByUserId(o[h].user_id).SamPlayer.showEffectThoiHai()}else if(i===a.HET_BAI)for(var l in n){if(n[l].cards.length===s.NUMBER_CARDS_EACH_PLAYERS)this.Sam.getPlayerByUserId(n[l].user_id).SamPlayer.showEffectCong()}else if(i===a.THANG_BAO_1)for(var u in o){var d=this.Sam.getPlayerByUserId(o[u].user_id);o[u].money_change>0?d.SamPlayer.showEffectThangBaoMot():n[u].cards.length===s.NUMBER_CARDS_EACH_PLAYERS?d.SamPlayer.showEffectCong():o[u].money_change<0&&d.SamPlayer.showEffectThuaBaoMot()}},handleSort:function(){var t=this.Sam.myCardsNode.getChildren(),e=[];for(var i in t)e.push(t[i].getComponent("CardController").getTrueValue());this.sortCard?(this.initMyCards(h.sortAZ(e)),this.sortCard=!this.sortCard):(this.initMyCards(h.sortListSam(e)),this.sortCard=!this.sortCard)},showEffectMinusBalanceAndWinner:function(t){for(var e in t){var i=t[e].user_id,o=t[e].money_change,n=this.Sam.getPlayerByUserId(i);n&&(n.BasePlayer.hideText(),n.BasePlayer.showChangeBalance(o),n.BasePlayer.showEffectByChangeBalance(o),n.isItMe&&o>0&&this.GameCommon.Audio.playWin())}},showEffectShowPlayersCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.win_type,o=t.players_cards,n=t.money_change;for(var s in o){var a=o[s].user_id,r=o[s].cards,c=void 0;for(var h in n)n[h].user_id===a&&(c=n[h].money_change);var l=this.Sam.getPlayerByUserId(a);if(l)if(r.length>0)if(l.isItMe){var u=this.Sam.myCardsNode.getChildren(),d=[];for(var m in u)d.push(u[m].cardController);this.showEffectTypeWin(l,r,d,i,c)}else{l.SamPlayer.showCards(r,e);var p=l.SamPlayer.getListCardController();this.showEffectTypeWin(l,r,p,i,c)}else this.showEffectTypeWin(l,r,[],i,c)}},showEffectTypeWin:function(t,e,i,o,n){o===a.WIN_TYPE_HET_BAI||(o===a.WIN_TYPE_KET_BA_BICH?n>0&&t.SamPlayer.SamPlayerText.showEffectKetBaBich():o===a.WIN_TYPE_CHAN_KET_BA_BICH&&n>0&&t.SamPlayer.SamPlayerText.showEffectChanKetBaBich())},showCardsThoiEffectByTrueValue:function(t,e){for(var i in e)e[i].showDarkEffect();for(var o in e)for(var n in t)if(e[o].trueValue===t[n]){e[o].hideDarkEffect();break}},showCardsThoiEffectByValue:function(t,e){var i=0;for(var o in e)e[o].showDarkEffect();for(var n in t)for(var s in i=0,e)parseInt(e[s].trueValue/100)===parseInt(t[n]/100)&&++i<3&&e[s].hideDarkEffect()},sortMyCards:function(){var t=this.Sam.myCardsNode.getChildren();for(var e in t){var i=s.DISTANCE_TWO_CARDS_IN_HAND*e+s.POSITION_MY_CARDS_X,o=s.POSITION_MY_CARDS_Y;t[e].samCardController.isSelected=!1,t[e].samCardController.moveTo(i,o)}},initNewCardNode:function(t){var e=cc.instantiate(this.Sam.cardPrefab);e.trueValue=t;var i=new o(t),n=e.getComponent("CardController");return n.init(i),e.cardController=n,e},minusNumberCardsForPlayer:function(t,e){var i=t.SamPlayer.getNumberCards()-e;t.SamPlayer.showCardBack(i)},handlerIgnoreTurn:function(t){var e=t.data.id_ignore,i=t.data.is_new_round,o=t.data.id_playing,n=this.Sam.getPlayerByUserId(e),s=this.Sam.getPlayerByUserId(o);i?this.clearIgnoreTurnAllPlayers():n&&n.SamPlayer.setIgnoreTurn(!1),n&&n.SamPlayer.isBaoMot()&&n.SamPlayer.hideBaoMot(),s&&(s.isItMe&&i?this.initRecommendIgnore():this.initRecommendPlay())},removeAllCardsInTable:function(){this.Sam.tableCardsNode.removeAllChildren(!0)},flipCardsInTable:function(){var t=this.Sam.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&(t[e].cardController.hideDarkEffect(),t[e].cardController.revealWithAnimationFlip(!1,s.TIME_FLIP_CARD_IN_TABLE,!1))},showDarkEffectAllCardsRevealInTable:function(){var t=this.Sam.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&t[e].cardController.showDarkEffect()},checkChangePositionSanhHai:function(t,e){for(var i=[],o=!1,n=0;n<t.length;n++)parseInt(t[n]/100)===s.VALUE_HAI&&(o=!0);if(e===r.SANH){if(o)for(var a=0;a<t.length;a++)parseInt(t[a]/100)===s.VALUE_AT&&i.push(t[a]);for(var c=0;c<t.length;c++)parseInt(t[c]/100)===s.VALUE_HAI&&i.push(t[c]);for(var h=0;h<t.length;h++)parseInt(t[h]/100)!==s.VALUE_HAI&&(parseInt(t[h]/100)===s.VALUE_AT&&o||i.push(t[h]));return i}return t},checkChangePositionSanhHaiForNode:function(t,e){for(var i=[],o=!1,n=0;n<t.length;n++)parseInt(t[n].trueValue/100)===s.VALUE_HAI&&(o=!0);if(e===r.SANH){if(o)for(var a=0;a<t.length;a++)parseInt(t[a].trueValue/100)===s.VALUE_AT&&i.push(t[a]);for(var c=0;c<t.length;c++)parseInt(t[c].trueValue/100)===s.VALUE_HAI&&i.push(t[c]);for(var h=0;h<t.length;h++)parseInt(t[h].trueValue/100)!==s.VALUE_HAI&&(parseInt(t[h].trueValue/100)===s.VALUE_AT&&o||i.push(t[h]));return i}return t},getRandomPositonInTable:function(){var t=l.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_X,s.DISTANCE_MAX_RANDOM_POSITION_CARD_X),e=l.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y,s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y);return new cc.Vec2(t,e)},handleChangeMoney:function(t){var e=t.data.money_changes;if(e)for(var i in e){var o=e[i].user_id,n=e[i].money_change,s=this.Sam.getPlayerByUserId(o);s&&s.BasePlayer.showChangeBalance(n)}},checkShowButtons:function(){var t=!1,e=this.Sam.myCardsNode.getChildren();for(var i in e)if(e[i].samCardController.isSelected){t=!0;break}t?this.SamUI.showIgnoreSelectButton():this.SamUI.hideIgnoreSelectButton(),this.Sam.checkIsMyTurn()&&(t?this.SamUI.showPlayButton():this.SamUI.hidePlayButton())},clearIgnoreTurnAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].SamPlayer.setIgnoreTurn(!1)},clearSamAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].SamPlayer.hideSam()},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){},showRecommend:function(){this.recommenedToggle.isChecked&&(this.ignoreTurn?this.recommend_ignore&&this.showRecommendStartAndIgnore():this.is_recommend&&this.showRecommendPlay())},showRecommendPlay:function(){var t=[],e=[],i=this.listCardPlay,o=void 0,n=this.Sam.myCardsNode.getChildren();for(var s in n)e.push(n[s].getComponent("CardController").getTrueValue());for(var a in n)n[a].samCardController.isSelected&&(o=n[a].getComponent("CardController").getTrueValue());for(var r in i&&e&&o&&(t=c.getRecommend(e,i,o)),e=[],n)e.push(n[r].getComponent("CardController").getTrueValue());if(t)for(var h=0,l=t.length;h<l;h++)for(var u=0,d=e.length;u<d;u++)t[h]===e[u]&&(n[u].getComponent("SamCardController").getSelected()||n[u].getComponent("SamCardController").selectCard());this.listCardPlay=[],this.is_recommend=!1},showRecommendStartAndIgnore:function(){var t=[],e=[],i=this.Sam.myCardsNode.getChildren();for(var o in i){var n=i[o].getComponent("CardController").getTrueValue();t.push(n),i[o].getComponent("SamCardController").getSelected()&&e.push(n)}if(2===e.length){for(var s in e=c.getRecommendStartAndIgnore(t,e),t=[],i)t.push(i[s].getComponent("CardController").getTrueValue());if(e)for(var a=0,r=e.length;a<r;a++)for(var h=0,l=t.length;h<l;h++)e[a]===t[h]&&(i[h].getComponent("SamCardController").getSelected()||i[h].getComponent("SamCardController").selectCard());this.ignoreTurn=!1,this.recommend_ignore=!1}},initRecommendIgnore:function(){this.ignoreTurn=!0,this.recommend_ignore=!0,this.is_recommend=!1,this.listCardPlay=[]},initRecommendPlay:function(t){this.ignoreTurn=!1,this.is_recommend=!0,this.recommend_ignore=!1,t&&(this.listCardPlay=t)},resetRecommend:function(){this.ignoreTurn=!1,this.is_recommend=!1,this.recommend_ignore=!1,this.listCardPlay=[]}});e.exports=u,cc._RF.pop()},{"../../helper/Message":"Message","../../util/CardUtil":"CardUtil","../../util/RandomUtil":"RandomUtil","./SamCard":"SamCard","./SamConfig":"SamConfig","./SamGroupCardsType":"SamGroupCardsType","./SamRecommend":"SamRecommend","./SamWinType":"SamWinType","./item/SamCardController":"SamCardController"}],SamHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"3ab4aA6xKlHfaH0h5wXlull","SamHandlerRequest");var o=t("./SamConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{Sam:null,init:function(t){this.Sam=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.Sam.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.GOLD:this.Sam.initGold(e);break;case n.MONEY:this.Sam.initMoney(e);break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.ROOM_INFO:this.Sam.handleRoomInfo(e);break;case o.START:this.Sam.handleStart(e);break;case o.COUNT_DOWN:this.Sam.handleCountDown(e);break;case o.SAM:this.Sam.handleSam(e);break;case o.REQUEST_SAM:this.Sam.handlePlayerSam(e);break;case o.PLAY:this.Sam.handlePlay(e);break;case o.IGNORE:this.Sam.handleIgnore(e);break;case o.RESULT:this.Sam.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.Sam.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.Sam.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.Sam.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.Sam.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./SamConstant":"SamConstant"}],SamPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"0fe83s9wU5Bt4ROF0XsbNmB","SamPlayer");var o=t("./SamCard"),n=t("./SamConfig"),s=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node,cardBackNode:cc.Node,numberCardLabel:cc.Label},onLoad:function(){this.numberCard=0,this.numberCardLabel.node.active=!1},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var s=new o(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(s),a.cardController=r;var c=0;c=this.cardsNode.x>0?i*n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:(t.length-i-1)*-n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,e?(a.setPosition(0,0),a.runAction(cc.moveTo(n.TIME_SHOW_CARDS_OTHER_PLAYERS,c,0))):a.setPosition(c,0)}},getListCardController:function(){var t=[],e=this.cardsNode.getChildren();for(var i in e)t.push(e[i].cardController);return t},showCardBack:function(t){this.numberCards=t,this.numberCardLabel.string=t,this.cardBackNode.active=0!==t},getNumberCards:function(){return this.numberCards},hideCardBack:function(){this.numberCardLabel.string="",this.cardBackNode.active=!1},setIgnoreTurn:function(t){t?this.showIgnoreTurn():this.hideIgnoreTurn()},showBaoMot:function(){this.regisOne=!0,this.node.getComponent("BasePlayer").showTextLight(s.SAM_BAO_MOT)},hideBaoMot:function(){this.regisOne=!1,this.node.getComponent("BasePlayer").hideTextLight()},isBaoMot:function(){return this.regisOne},showSam:function(){this.node.getComponent("BasePlayer").showTextLight(s.SAM_XIN_SAM)},hideSam:function(){this.node.getComponent("BasePlayer").hideTextLight()},showIgnoreTurn:function(){this.node.getComponent("BasePlayer").showTextDark(s.SAM_IGNORE_TURN)},hideIgnoreTurn:function(){this.node.getComponent("BasePlayer").hideTextDark()},showEffectCong:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_CONG)},showEffectThoiHai:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_THOI_HAI)},showEffectThangSam:function(){this.node.getComponent("BasePlayer").showWinEffect(s.SAM_THANG_SAM)},showEffectThuaSam:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_THUA_SAM)},showEffectThangBaoMot:function(){this.node.getComponent("BasePlayer").showWinEffect(s.SAM_THANG_BAO_MOT)},showEffectThuaBaoMot:function(){this.node.getComponent("BasePlayer").showLoseEffect(s.SAM_THUA_BAO_MOT)},reset:function(){this.numberCards=0,this.regisOne=!1,this.hideCardBack(),this.hideIgnoreTurn(),this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./SamCard":"SamCard","./SamConfig":"SamConfig"}],SamRecommend:[function(t,e,i){"use strict";cc._RF.push(e,"6dd80Obc7pJA4PIO8UzmLF1","SamRecommend");var o={getRecommend:function(t,e,i){if(1!==e.length){if(this.checkTypeListCardSuite(e))return this.getListSuite(t,e,i);var o=void 0;return i=this.utilWidthCard_2(i),t=this.convertQAK(t),this.checkCard_2(e)&&(e=this.convertA23(e)),(o=this.getListArray(t,e,i))||(i=this.utilWidthCard_A(i),t=this.convertA23(t),o=this.getListArray(t,e,i)),o?o.length<e.length?null:o=this.reConvert(o):null}var n=parseInt(e[0]/100);return parseInt(15)===n?this.getRecommendTuQuy(t,i):null},getListSuite:function(t,e,i){if(parseInt(i/100)>parseInt(e[0]/100)){var o=[];o.push(i);for(var n=parseInt(i/100),s=1,a=e.length;s<a;s++)for(var r=0,c=t.length;r<c;r++){if(t[r]!==i&&0!==t[r])if(n===parseInt(t[r]/100)){o.push(t[r]),t[r]=0;break}}if(o.length>=e.length)return o}return null},getListArray:function(t,e,i){var o=[],n=[],s=parseInt(i/100);n.push(s);var a=this.getListAllCard(t);if(s+1<a.length)for(var r=s+1;a[r]>0&&r<a.length;)n.push(r),r++;if(s-1>=0)for(var c=s-1;a[c]>0&&c>=0;)n.push(c),c--;if(n&&e&&n.length>=e.length){o=this.getListCardRecommend(n,e,t),o=this.addCardLoading(o,i);var h=this.getMaxValue(o),l=this.getMaxValue(e);if(parseInt(h/100)>parseInt(l/100))return o}return null},getListCardRecommend:function(t,e,i){for(var o=[],n=0,s=e.length;n<s;n++)for(var a=t[n],r=0,c=i.length;r<c;r++){if(0!==i[r])if(a===parseInt(i[r]/100)){o.push(i[r]),i[r]=0;break}}return o},getCardMaxInArray:function(t,e){for(var i=this.getMaxValue(t),o=i,n=parseInt(i/100),s=0,a=e.length;s<a;s++){n===parseInt(e[s]/100)&&i<e[s]&&(o=e[s])}if(o!==i)for(var r=0,c=t.length;r<c;r++)i===t[r]&&(t[r]=o);return t},getMaxValue:function(t){for(var e=t[0],i=0,o=t.length;i<o;i++)e<t[i]&&(e=t[i]);return e},checkTypeListCardSuite:function(t){return parseInt(t[0]/100)===parseInt(t[1]/100)},getListAllCard:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,o=t.length;i<o;i++){e[parseInt(t[i]/100)]++}return e},convertQAK:function(t){for(var e=0,i=t.length;e<i;e++)t[e]>=1500&&(t[e]=200+t[e]%100);return t},convertA23:function(t){for(var e=0,i=t.length;e<i;e++)parseInt(t[e]/100)===parseInt(15)&&(t[e]=200+t[e]%100),parseInt(t[e]/100)===parseInt(14)&&(t[e]=100+t[e]%100);return t},reConvert:function(t){for(var e=0,i=t.length;e<i;e++)parseInt(t[e]/100)===parseInt(2)&&(t[e]=1500+t[e]%100),parseInt(t[e]/100)===parseInt(1)&&(t[e]=1400+t[e]%100);return t},checkCard_2:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e]>=1500)return!0;return!1},utilWidthCard_2:function(t){return parseInt(t/100)===parseInt(15)&&(t=200+t%100),t},utilWidthCard_A:function(t){return parseInt(t/100)===parseInt(14)&&(t=100+t%100),t},getRecommendStartAndIgnore:function(t,e){if(t.length>e.length){if(this.checkTypeListCardSuite(e))return this.getListSuiteStartAndIgnore(t,e);if(e=this.convertQAK(e),t=this.convertQAK(t),this.checkCard_A(e)){var i=this.convertA23(t.slice()),o=t.slice(),n=this.convertA23(e.slice()),s=e.slice(),a=this.getListArrayStartAndIgnore(i,n),r=this.getListArrayStartAndIgnore(o,s);e=a.length>r.length?a:r}else{var c=t.slice();e=this.getListArrayStartAndIgnore(c,e)}return t=this.reConvert(t),e=this.getAndAddCard_A2(t,e)}return null},getListArrayStartAndIgnore:function(t,e){var i=e[0],o=e[1],n=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(o/100);return this.checkDistanceCard(s,a,n)&&(e=this.getListStartAndIgnore(t,e)),e},checkDistanceCard:function(t,e,i){for(var o=t<e?t:e,n=t>e?t:e;o<n;o++)if(0===i[o])return!1;return!0},getListSuiteStartAndIgnore:function(t,e){for(var i=e[0],o=e[1],n=parseInt(i/100),s=0,a=t.length;s<a;s++){if(t[s]!==i&&t[s]!==o)parseInt(t[s]/100)===n&&e.push(t[s])}return e},getListStartAndIgnore:function(t,e){var i=e[0],o=e[1],n=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(o/100),r=s>a?s:a,c=s<a?s:a,h=this.getListCardValueRecommend(c,r,n);return h&&(e=this.getListCardRecommendStartAndignore(e,t,h)),e},getListCardValueRecommend:function(t,e,i){var o=[];if(t-1>=0)for(var n=t-1;i[n]>0&&n>=0;)o.push(n),n--;if(e+1<i.length)for(var s=e+1;i[s]>0&&s<i.length;)o.push(s),s++;if(e-t>1)for(var a=t+1;a<e;a++)o.push(a);return o},getListCardRecommendStartAndignore:function(t,e,i){for(var o=0,n=i.length;o<n;o++)for(var s=0,a=e.length;s<a;s++){if(0!==e[s])if(parseInt(e[s]/100)===i[o]){t.push(e[s]),e[s]=0;break}}return t=this.reConvert(t)},checkCard_A:function(t){var e=parseInt(t[0]/100),i=parseInt(t[1]/100),o=!1;return 14!==e&&14!==i||(o=!0),o},getAndAddCard_A2:function(t,e){var i=!1,o=!1;if(this.checkListSortEndCard_2(t))for(var n=0,s=e.length;n<s;n++){if(15===parseInt(e[n]/100)){e.splice(n,1);break}}else{for(var a=0,r=e.length;a<r;a++){var c=parseInt(e[a]/100);15===c&&(o=!0),14===c&&(i=!0)}if(o&&!i)for(var h=0,l=t.length;h<l;h++){14===parseInt(t[h]/100)&&e.push(t[h])}}return e},checkListSortEndCard_2:function(t){return 15===parseInt(t[t.length-1]/100)},getRecommendTuQuy:function(t,e){var i=[],o=parseInt(e/100);i.push(e);for(var n=0,s=t.length;n<s;n++){if(t[n]!==e)parseInt(t[n]/100)===o&&i.push(t[n])}return 4===i.length?i:null},addCardLoading:function(t,e){for(var i=parseInt(e/100),o=0,n=t.length;o<n;o++){if(parseInt(t[o]/100)===i)return t[o]=e,t}}};e.exports=o,cc._RF.pop()},{}],SamState:[function(t,e,i){"use strict";cc._RF.push(e,"15a489GA55Doojr2fx/L6J1","SamState");e.exports={currentState:null,STOP:"STOP",WAITING:"WAITING",SAM:"SAM",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setSam:function(){this.currentState=this.SAM},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isSam:function(){return this.currentState===this.SAM},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],SamUI:[function(t,e,i){"use strict";cc._RF.push(e,"7b4e4r/zvxMtqN4W552xztP","SamUI"),cc.Class({extends:cc.Component,properties:{playButton:cc.Node,ignoreTurnButton:cc.Node,ignoreSelectButton:cc.Node,sortButton:cc.Node,samButton:cc.Node,ignoreSamButton:cc.Node,playersNode:[cc.Node],playersSoloNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},hideAllPlayers:function(){for(var t in this.playersNode)this.playersNode[t].active=!1},initSoloRoom:function(){this.playersPlaceHolderNode[1].active=!1,this.playersPlaceHolderNode[3].active=!1},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showPlayButton:function(){this.playButton.active=!0},hidePlayButton:function(){this.playButton.active=!1},showSamButton:function(){this.samButton.active=!0},showIgnoreSamButton:function(){this.ignoreSamButton.active=!0},hideIgnoreSamButton:function(){this.ignoreSamButton.active=!1},hideSamButton:function(){this.samButton.active=!1},showSortButton:function(){this.sortButton.active=!0},hideSortButton:function(){this.sortButton.active=!1},showIgnoreTurnButton:function(){this.ignoreTurnButton.active=!0},hideIgnoreTurnButton:function(){this.ignoreTurnButton.active=!1},showIgnoreSelectButton:function(){this.ignoreSelectButton.active=!0},hideIgnoreSelectButton:function(){this.ignoreSelectButton.active=!1},hideAllButtons:function(){this.hidePlayButton(),this.hideIgnoreTurnButton(),this.hideIgnoreSelectButton(),this.hideSortButton(),this.hideSamButton(),this.hideIgnoreSamButton()},reset:function(){this.hideAllButtons()}}),cc._RF.pop()},{}],SamUtil:[function(t,e,i){"use strict";cc._RF.push(e,"33616MeTVpCEqJEVuKuieB7","SamUtil"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],SamWinType:[function(t,e,i){"use strict";cc._RF.push(e,"d7f9b4+JhZDMJ7Tm04qR/T7","SamWinType");e.exports={HET_BAI:"HET_BAI",THANG_SAM:"THANG_SAM",THUA_SAM:"THUA_SAM",THOI_HAI:"THOI_HAI",THANG_BAO_1:"THANG_BAO_1"},cc._RF.pop()},{}],Sam:[function(t,e,i){"use strict";cc._RF.push(e,"b88aeApwK1MQYwpB3b3JaUH","Sam");var o=t("../../base/BaseController"),n=t("./SamConstant"),s=t("./SamConfig"),a=t("./SamUI"),r=t("./SamState"),c=t("./SamHandlerRequest"),h=t("./SamHandlerEffect"),l=t("../../prefab/GameCommon"),u=t("../../object/RoomType"),d=t("../../helper/Constant"),m=t("../../helper/Message");cc.Class({extends:o,properties:{cardPrefab:cc.Prefab,myCardsNode:cc.Node,tableCardsNode:cc.Node,recommenedToggle:cc.Toggle,SamUI:a,GameCommon:l},onLoad:function(){this._super(),this.setSceneName(d.SCENE_GAME_SAM),this.sfsManager.setController(this),this.timeoutResult=null,this.myPlayer=null,this.myPosition=0,this.idPlaying=-1,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[d.MIN_BET].value),this.roomType=parseInt(this.room.variables[d.ROOM_TYPE].value),this.isMoneyType=this.roomType==u.MONEY_CODE,this.playersNode=this.SamUI.playersNode,this.isRoomSolo()&&(this.playersNode=this.SamUI.playersSoloNode,this.SamUI.initSoloRoom()),this.isMoneyType||this.SamUI.disableAllPlaceHolder(),this.SamConstant=n,this.SamConfig=s,this.SamState=r,this.SamHandlerRequest=c,this.SamHandlerRequest.init(this),this.SamHandlerEffect=h,this.SamHandlerEffect.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.SamHandlerRequest.onPublicMessage.bind(this.SamHandlerRequest),this.onRoomVarsUpdate=this.SamHandlerRequest.onRoomVarsUpdate.bind(this.SamHandlerRequest),this.onUserVarsUpdate=this.SamHandlerRequest.onUserVarsUpdate.bind(this.SamHandlerRequest),this.onResponse=this.SamHandlerRequest.onResponse.bind(this.SamHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a)}this.SamUI.hideAllPlayers(),this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;if((i-=this.myPosition)<0)i+=this.isRoomSolo()?s.NUMBER_SOLO_PLAYERS:s.NUMBER_PLAYERS;t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("SamPlayer");t.BasePlayer=o,t.SamPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRequestLeftRoom(t.request_left_room),o.setRoomMaster(t.is_home),o.setPlayerName(t.nick_name),o.setBalance(t.balance),n.setIgnoreTurn(t.ignore),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.SamState.setState(e),this.SamState.isStop()?this.reset():this.SamState.isWaiting()?this.resumeStateWaiting(t):this.SamState.isSam()?this.resumeStateSam(t):this.SamState.isPlaying()?this.resumeStatePlaying(t):this.SamState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.SamHandlerEffect.startCountDownAllPlayers(t)},resumeStateSam:function(t){this.reset(),this.SamHandlerEffect.startCountDownAllPlayers(t),this.SamHandlerEffect.resumeCards(t),this.myPlayer.is_player&&(this.SamUI.showSamButton(),this.SamUI.showIgnoreSamButton())},resumeStatePlaying:function(t){this.SamHandlerEffect.handlePlayingPlayer(t),this.SamHandlerEffect.resumeCards(t),this.SamHandlerEffect.initLastRoundCards(t)},resumeStateFinish:function(t){this.SamHandlerEffect.resumeCards(t),this.SamHandlerEffect.initLastRoundCards(t),this.SamHandlerEffect.handleResult(t.data.result,!1)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.SamHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.SamState.setWaiting(),this.GameCommon.hideWaitingNode(),this.SamHandlerEffect.startCountDownAllPlayers(t)):(this.SamState.setStop(),this.SamHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){this.SamState.setPlaying(),this.SamUI.hideSamButton(),this.SamUI.hideIgnoreSamButton(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.handlePlayerStart(t),this.SamHandlerEffect.handlePlayingPlayer(t)},handleSam:function(t){var e=t.data.cards;this.SamState.setSam(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.startCountDownAllPlayers(t),this.SamHandlerEffect.dealCards(e),this.SamUI.showSamButton(),this.SamUI.showIgnoreSamButton()},handlePlayerSam:function(t){var e=t.data.id_sam,i=this.getPlayerByUserId(e);i&&i.SamPlayer.showSam()},handlePlay:function(t){var e=t.data.id_played,i=t.data.cards,o=t.data.cards_type,n=t.data.regis_one;this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.handlePlayedPlayer(e,i,o,n),this.SamHandlerEffect.handlePlayingPlayer(t),this.SamHandlerEffect.handleChangeMoney(t)},handleIgnore:function(t){t.data.is_new_round&&this.SamHandlerEffect.removeAllCardsInTable(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamHandlerEffect.handlerIgnoreTurn(t),this.SamHandlerEffect.handlePlayingPlayer(t)},handleResult:function(t){var e=t.data.played_cards;this.SamState.setFinish(),this.SamHandlerEffect.stopCountDownAllPlayers(),this.SamUI.hideAllButtons(),this.SamHandlerEffect.handlePlayedPlayer(e.user_id,e.cards),this.SamHandlerEffect.handleResult(t.data),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.SamState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersLeftRoomWithChangeHome:function(t){var e=t.data.user_id_home_player,i=this.getPlayerByUserId(e);i&&i.BasePlayer.setRoomMaster(!0),this.handlerPlayersLeftRoom(t)},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.SamHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(m.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(m.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onPlayClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected(),e=[];for(var i in t)e.push(t[i].trueValue);var o={};o.data=e,this.sendRequest.send(n.PLAY,o)},onIgnoreTurnClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.IGNORE)},onIgnoreSelectClick:function(){this.GameCommon.Audio.playClick();var t=this.myCardsNode.getChildren();for(var e in t)t[e].samCardController.isSelected&&(t[e].samCardController.selectCard(),this.SamUI.hideIgnoreSelectButton())},onSortClick:function(){this.GameCommon.Audio.playClick(),this.SamHandlerEffect.handleSort()},onSamClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_SAM),this.SamUI.hideSamButton(),this.SamUI.hideIgnoreSamButton()},onIgnoreSamClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.IGNORE_SAM),this.SamUI.hideSamButton(),this.SamUI.hideIgnoreSamButton()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},isRoomSolo:function(){return this.getLastJoinedRoom().maxUsers===s.NUMBER_SOLO_PLAYERS},getMyCardsByPlayersCards:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].user_id===this.getSFSMySelf().variables.user_id.value)return t[e].cards},getListCardsSelected:function(){var t=this.myCardsNode.getChildren(),e=[];for(var i in t)t[i].samCardController.isSelected&&e.push(t[i]);return e},getCardsNodeByCards:function(t){var e=this.myCardsNode.getChildren(),i=[];for(var o in e)for(var n in t)if(e[o].trueValue===t[n]){i.push(e[o]);break}return i},checkIsMyTurn:function(){return this.idPlaying===this.getSFSMySelf().variables.user_id.value},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){clearTimeout(this.timeoutResult),this.SamHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.idPlaying=-1,this.SamUI.reset(),this.clearAllTimeout(),this.myCardsNode.removeAllChildren(!0),this.tableCardsNode.removeAllChildren(!0),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].SamPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./SamConfig":"SamConfig","./SamConstant":"SamConstant","./SamHandlerEffect":"SamHandlerEffect","./SamHandlerRequest":"SamHandlerRequest","./SamState":"SamState","./SamUI":"SamUI"}],Score:[function(t,e,i){"use strict";cc._RF.push(e,"c9a3eAaw4VNVq26Z1FpKJIC","Score"),cc.Class({extends:cc.Component,properties:{scoreLabel:cc.Label},onLoad:function(){},init:function(t,e,i,o,n){var s=this.getScaleByScore(i);this.node.parent=t.gamePlayNode,this.scoreLabel.string="+"+i,this.initScale=this.node.scale,this.node.setPosition(o),this.node.runAction(cc.sequence(cc.scaleTo(.2,s*this.initScale),cc.scaleTo(.2,this.initScale),cc.moveTo(.4,n),cc.callFunc(function(){this.node.destroy()},this)))},getScaleByScore:function(t){return t<5?1.5:t<10?2:t<50?2.5:t<200?3:t<500?3.5:4}}),cc._RF.pop()},{}],ScrollBottom:[function(t,e,i){"use strict";cc._RF.push(e,"f22c1xoPGhMlJD8Y1j+0RB6","ScrollBottom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.isScrollBottom=!0},update:function(){this.isScrollBottom&&this.node.getComponent(cc.ScrollView).scrollToBottom(),this.isScrollBottom=!1},onEnable:function(){this.isScrollBottom=!0}}),cc._RF.pop()},{}],Setting:[function(t,e,i){"use strict";cc._RF.push(e,"02c39IxrTxPvLsoCRGoK2vc","Setting");var o=t("./LogOut"),n=t("../../ui/toggle/Toggle"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{phoneLabel:cc.Label,emailLabel:cc.Label,soundToggle:n,inviteGameToggle:n,LogOut:o},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.dialogFormLogOut=this.LogOut.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.initData()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},initData:function(){var t=this.controller.getUser().invite_on,e=cc.sys.localStorage.getItem(s.IS_SOUND);"true"===e||!0===e?(this.soundToggle.setOn(),this.controller.Audio.setSound(!0)):"false"===e||!1===e?(this.soundToggle.setOff(),this.controller.Audio.setSound(!1)):(this.soundToggle.setOn(),this.controller.Audio.setSound(!0)),1==t?this.inviteGameToggle.setOn():this.inviteGameToggle.setOff();var i=this.controller.getGeneralConfig();if(i){var o=i.HOTLINE,n=i.EMAIL;this.phoneLabel.string=o,this.emailLabel.string=n}},onSoundToggleClick:function(){this.controller.Audio.setSoundClick(),this.controller.Music&&this.controller.Music.setSoundClick()},onInviteGameToggleClick:function(){var t={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.controller.api.updateInviteGame(t,function(t){},function(t){}),this.controller.getUser().invite_on=1==this.controller.getUser().invite_on?0:1},onLogoutClick:function(){this.controller.Audio.playClick(),this.dialogFormLogOut.showDialog()}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../ui/toggle/Toggle":"Toggle","./LogOut":"LogOut"}],ShowHideAnim:[function(t,e,i){"use strict";cc._RF.push(e,"911a13rgCpA0JPfa79z70I5","ShowHideAnim"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){this.node.opacity=255,this.direction=-1,this.is_pause=!0},onDisable:function(){this.is_pause=!1},update:function(t){if(this.is_show_effect&&this.is_pause){this.checkDirection();var e=this.node.opacity+this.direction*t*1e3;e>255&&(e=255),e<10&&(e=10),this.node.opacity=e}},checkDirection:function(){-1===this.direction&&this.node.opacity<=10&&(this.direction=1),1===this.direction&&this.node.opacity>=255&&(this.direction=-1)},showEffect:function(){this.is_show_effect=!0},hideEffect:function(){this.is_show_effect=!1,this.node.opacity=255}}),cc._RF.pop()},{}],Slot2AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"ea7adO8NHhJeZ/oJiZmFE/K","Slot2AutoSpinSetting");var o=t("../Slot2Constant"),n=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm"),cc.auto=this},onEnable:function(){this.reset()},onDisable:function(){},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.macro.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.Slot2.DialogMessage.node.active&&!this.Slot2.Processing.node.active},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=s.SLOT2_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(n.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(n.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(n.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot2.Slot2State.setAutoSpin(),this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin),this.Slot2.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot2.Slot2State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot2.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===o.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,o=!this.stopGameMaxWin||this.lastWin<this.maxWin,n=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&o&&n},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../Slot2Constant":"Slot2Constant"}],Slot2BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"84afdwCe+1Er5Hho5kMhrGu","Slot2BonusItem");var o=t("../../util/FormatUtil"),n=(t("../../util/RandomUtil"),t("../../helper/Config"),t("../../util/BrowserUtil")),s=t("../../helper/Message");t("../../scene/game-slot-2/Slot2Constant");cc.Class({extends:cc.Component,properties:{normalSpriteNode:cc.Node,openSpriteNode:cc.Node,xPerSpriteNode:cc.Node,minigameSpriteNode:cc.Node,moneyNode:cc.Node,moneyLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Bonus=t.Slot2Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.onMouseEnter=function(){t.is_open||n.showCursorPointer()},this.onMouseLeave=function(){n.showCursorAuto()}},onEnable:function(){cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Slot2.Slot2State.isAutoSpin()?this.Slot2.showToast(s.SLOT2_AUTOSPIN_NOT_CHANGE):this.isClicked()||this.Slot2Bonus.isStateStop()||(this.setClicked(!0),this.Slot2Bonus.setStateStop(!0),this.Slot2Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.isClicked()||this.Slot2Bonus.isStateStop()||(this.setClicked(!0),this.Slot2Bonus.setStateStop(!0),this.Slot2Bonus.onItemClick(this))},showOpenMoney:function(t){this.setOpen(!0),this.hideAll(),this.openSpriteNode.active=!0,this.showMoney(t)},showMoneyMiniGame:function(t){this.setOpen(!0),this.showMoney(t)},showMoney:function(t){this.setOpen(!0),this.moneyNode.active=!0,this.moneyLabel.string=o.nFormatter(t,2).replace("k","K")},showOpenMiniGame:function(){this.setOpen(!0),this.openSpriteNode.active=!0,this.minigameSpriteNode.active=!0},showKey:function(t){this.setOpen(!0),this.hideAll(),this.openSpriteNode.active=!0,this.xPerSpriteNode.active=!0},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},hideAll:function(){this.xPerSpriteNode.active=!1,this.moneyNode.active=!1,this.openSpriteNode.active=!1,this.moneyLabel.node.active=!0,this.normalSpriteNode.active=!1,this.minigameSpriteNode.active=!1},reset:function(){this.setOpen(!1),this.setClicked(!1),this.hideAll(),this.normalSpriteNode.active=!0}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../scene/game-slot-2/Slot2Constant":"Slot2Constant","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil"}],Slot2Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"e292akkzy5Cy7S7zkTR+Kdk","Slot2Bonus");t("../../util/FormatUtil");var o=t("../../util/RandomUtil"),n=(t("../../util/BrowserUtil"),t("../../helper/Config"),t("../../prefab/mini-game/item/JackpotItem")),s=t("../../prefab/slot-2/Slot2BonusItem"),a=t("./Slot2Constant"),r=t("../../prefab/slot-2/Slot2MiniGameItem");cc.Class({extends:cc.Component,properties:{remainLabel:cc.Label,xperBonusLabel:cc.Label,totalPrizeJackpotItem:n,bonusNode:cc.Node,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,Slot2BonusItem:[s],Slot2MiniGameItem:[r]},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI;for(var e=0;e<this.Slot2BonusItem.length;e++)this.Slot2BonusItem[e].init(t);for(var i=0;i<this.Slot2MiniGameItem.length;i++)this.Slot2MiniGameItem[i].init(t)},onLoad:function(){this.timeOutResult=null},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.x_bonus=this.data.number_key_start_bonus||1,this.remainBonus=10,this.totalPrize=0,this.setXPrize(this.x_bonus),this.setRemainBonus(this.remainBonus),this.setTotalPrize(this.totalPrize))},onEnable:function(){this.reset(),this.initContent(),this.bonusNode.active=!0,this.Slot2.Slot2State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.data.is_free?this.Slot2.spin():this.Slot2.Slot2State.isAutoSpin()?this.Slot2.spin():this.Slot2.Slot2State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.line,o=e.prize;this.openBonusItem(t,i,o)}else console.log("THOI TH\xd4I. M\u1ede H\u1ebeT C\xd2N \u0110\xc2U")},openBonusItem:function(t,e,i){switch(e){case a.BONUS_KEY:this.openItemBonusKey(t,i);break;case a.BONUS_MONEY:this.openItemBonusMoney(t,i);break;case a.BONUS_MINIGAME:this.openItemBonusMiniGame(t,i)}},openItemBonusKey:function(t,e){this.setStateStop(!1),this.x_bonus++,t.showKey(),this.setRemainBonus(this.remainBonus),this.setXPrize(this.x_bonus),this.checkFinishMiniGameBonus()},openItemBonusMoney:function(t,e){this.setStateStop(!1),this.remainBonus--,this.totalPrize+=e,this.setTotalPrize(this.totalPrize),t.showOpenMoney(e),this.setRemainBonus(this.remainBonus),this.checkFinishMiniGameBonus()},openItemBonusMiniGame:function(t,e){this.remainBonus--,this.mini_game_bonus_prize=e,this.bonusItemMiniGame=t,t.showOpenMiniGame(),this.setRemainBonus(this.remainBonus),clearInterval(this.intervalShowMiniGame),this.intervalShowMiniGame=setInterval(function(){this.showMiniGame(),this.setStateStop(!1),clearInterval(this.intervalShowMiniGame)}.bind(this),1500),this.Slot2.Slot2State.isAutoSpin()&&(clearInterval(this.intervalAutoOpenMiniGameItem),this.intervalAutoOpenMiniGameItem=setInterval(function(){var t=this.getItemMiniGameNotOpen();t&&t.onClickIsAutoSpin(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),2e3))},openItemMiniGame:function(t){this.setStateStop(!1);this.bonusItemMiniGame&&this.bonusItemMiniGame.showMoneyMiniGame(this.mini_game_bonus_prize,1),this.totalPrize+=this.mini_game_bonus_prize,this.setTotalPrize(this.totalPrize),t.openItem(this.mini_game_bonus_prize,!0,1),this.openMiniGameItemByMultipBet(10,!1,0),this.openMiniGameItemByMultipBet(15,!1,1),this.openMiniGameItemByMultipBet(15,!1,1),this.openMiniGameItemByMultipBet(20,!1,2),this.showCloseMiniGame(),this.checkFinishMiniGameBonus()},openMiniGameItemByMultipBet:function(t,e,i){var o=t*this.Slot2.getBet()*this.x_bonus,n=this.getItemMiniGameNotOpen();n&&n.openItem(o,e,i)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.Slot2MiniGameItem)this.Slot2MiniGameItem[e].isOpen()||this.Slot2MiniGameItem[e].isClicked()||t.push(this.Slot2MiniGameItem[e]);return t[o.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.Slot2BonusItem)this.Slot2BonusItem[e].isOpen()||this.Slot2BonusItem[e].isClicked()||t.push(this.Slot2BonusItem[e]);return t[o.getRandomInt(0,t.length-1)]},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setRemainBonus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.remainLabel.string=t},setXPrize:function(t){this.xperBonusLabel.string="x"+t||"x0"},setTotalPrize:function(t){0==t?this.totalPrizeJackpotItem.setMoneyWithoutAnimation(0):this.totalPrizeJackpotItem.setMoneyWithStartNumberZero(t)},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot2.Slot2Label.setLastMoneyWin(this.data.bonus_prize,!0),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot2UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3500)):this.Slot2.Slot2State.isAutoSpin()&&(this.minigameBonusNode.active?(clearInterval(this.intervalHideMiniGameContentNode),this.intervalHideMiniGameContentNode=setInterval(function(){this.hideMiniGame(),this.autoOpenBox(),clearInterval(this.intervalHideMiniGameContentNode)}.bind(this),1e3)):this.autoOpenBox())},showMiniGame:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.minigameBonusNode.active=!0,this.bonusNode.active=!1,this.hideCloseMiniGame()},hideMiniGame:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.minigameBonusNode.active=!1,this.bonusNode.active=!0},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},randomListSpriteFrame:function(){var t=[];for(var e in this.Slot2BonusItem){var i=o.getRandomInt(0,2);t.push(i)}return t},reset:function(){for(var t in this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.minigameBonusNode.active=!1,this.hideCloseMiniGame(),this.setStateStop(!1),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalHideMiniGameContentNode),clearInterval(this.intervalShowMiniGame),this.Slot2BonusItem)this.Slot2BonusItem[t].reset();for(var e in this.Slot2MiniGameItem)this.Slot2MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../prefab/slot-2/Slot2BonusItem":"Slot2BonusItem","../../prefab/slot-2/Slot2MiniGameItem":"Slot2MiniGameItem","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot2Constant":"Slot2Constant"}],Slot2Constant:[function(t,e,i){"use strict";cc._RF.push(e,"30257+2LblDEYtSqRlfFrx5","Slot2Constant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",ALADIN:"ALADIN",SINBAD:"SINBAD",ALIBABA:"ALIBABA",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,SLOT2_ITEM_SCALE:.9,BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1,SLOT2_DISTANCE_TWO_ITEMS:140,SLOT2_SPEED_SPIN_CARD:2500,SLOT2_DELAY_SPIN:2e3,SLOT2_NUMBER_ITEM_IN_REEL:3,SLOT2_TOTAL_ITEM_IN_REEL:30,SLOT2_DELAY_SHOW_MONEY_PRIZE:1e3,SLOT2_TIME_DELAY_FINISH:3e3,SLOT2_LIST_ICON:["A","B","C","D","E","F","G"],NUM_IN_HISTORY:30,LIST_INDEX_NUMBER_IN_LINE:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,8,4,5],[11,12,8,14,15],[1,12,3,14,5],[11,2,13,4,15],[6,2,13,4,10],[11,7,3,9,15],[1,7,13,9,5],[6,12,8,4,10],[6,2,8,14,10],[11,7,8,9,15],[1,7,8,9,5],[6,12,13,14,10],[6,2,3,4,10],[11,12,8,4,5],[1,2,8,14,15]],TIME_SHOW_JACKPOT:5,TIME_SHOW_FREESPIN:3.5,TIME_SHOW_BONUS:4,TIME_SHOW_BIGWIN:4,TIME_SHOW_WIN_NORMAL:2.5},cc._RF.pop()},{}],Slot2Control:[function(t,e,i){"use strict";cc._RF.push(e,"b4f963b9tBEKoxK99iI7bfQ","Slot2Control");t("../../util/FormatUtil");var o=t("../../helper/Config"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onSpinClick:function(){this.Slot2.Audio.playClick(),this.Slot2.isCanChangeBet()&&!this.Slot2.isBonus()&&this.Slot2.spin()},onAutoSpinClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN):(this.Slot2.Slot2State.setAutoSpin(),this.Slot2.spin())},onStopAutoSpinClick:function(){this.Slot2.Audio.playClick(),this.Slot2.Slot2State.setStop(),this.Slot2.setSendSpin(!1)},onSelectLineClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin()?this.Slot2.showToast(n.SLOT_NOT_CHANGE_BET):this.Slot2UI.showSelectLineFormNode()},onAddClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin())this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN);else for(var t=o.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot2.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot2.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isTest()||this.Slot2.isBonus()||this.Slot2.isFreeSpin())this.Slot2.showToast(n.SLOT_NOT_AUTO_SPIN);else for(var t=o.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot2.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot2.setBet(t[e]);break}}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot2Effect:[function(t,e,i){"use strict";cc._RF.push(e,"6b417Hn4EVH6qJeD8Cx4sW8","Slot2Effect");var o=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,bonusEffectNode:cc.Node,freeSpinEffectNode:cc.Node,bigwinEffectNode:cc.Node,jackpotEffectNode:cc.Node,winNormalXLabel:cc.Label,numberFreeSpinLabel:cc.Label,winNormalJackpotItem:o,bigwinJackpotItem:o,jackpotJackpotItem:o,bonusSkeleton:sp.Skeleton,freeSpinSkeletion:sp.Skeleton,bigwinSkeleton:sp.Skeleton,jackpotEffectSkeleton:sp.Skeleton},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Music=t.Music},onLoad:function(){},onDestroy:function(){},showWinNormal:function(t,e){this.hideAll(),this.winNormalNode.active=!0,this.winNormalXLabel.node.active=!1,this.winNormalJackpotItem.setMoneyWithoutAnimation(.7*t),this.winNormalJackpotItem.setMoney(t),this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.bigwinEffectNode.active=!0,this.bigwinSkeleton.setAnimation(0,"bigwin",!0),this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.bigwinJackpotItem.node.active=!0,this.bigwinJackpotItem.setMoneyWithoutAnimation(.7*t),this.bigwinJackpotItem.setMoney(t)},this)))},showJackpot:function(t){this.hideAll(),this.jackpotEffectNode.active=!0,this.jackpotEffectSkeleton.setAnimation(0,"no hu",!0),this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.jackpotJackpotItem.node.active=!0,this.jackpotJackpotItem.setMoneyWithoutAnimation(.7*t),this.jackpotJackpotItem.setMoney(t)},this)))},showBonus:function(t){this.hideAll();t.remain_bonus;this.bonusEffectNode.active=!0,this.bonusSkeleton.setAnimation(0,"bonus",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){this.hideAll(),this.Slot2.Slot2Bonus.initData(t),this.Slot2UI.showBonus()},this)))},showFreeSpin:function(t){this.hideAll(),this.freeSpinEffectNode.active=!0,this.freeSpinSkeletion.setAnimation(0,"freespin",!0),this.showFreeSpinNumber(t),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(3.5),cc.callFunc(function(){},this)))},showFreeSpinNumber:function(t){this.numberFreeSpinLabel.string=t},hideAll:function(){this.winNormalNode.active=!1,this.freeSpinEffectNode.active=!1,this.bonusEffectNode.active=!1,this.bigwinEffectNode.active=!1,this.jackpotEffectNode.active=!1,this.bigwinJackpotItem.node.active=!1,this.jackpotJackpotItem.node.active=!1,this.bigwinJackpotItem.node.active=!1,this.jackpotJackpotItem.setMoneyWithoutAnimation(1),this.bigwinJackpotItem.setMoneyWithoutAnimation(1),this.winNormalJackpotItem.setMoneyWithoutAnimation(1),this.bonusSkeleton.clearTrack(0),this.freeSpinSkeletion.clearTrack(0),this.bigwinSkeleton.clearTrack(0),this.jackpotEffectSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot2HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"d8351HlsdxKbZ6Omt6+1ogU","Slot2HandlerRequest");var o=t("../../helper/Constant"),n=(t("../../helper/Message"),t("./Slot2Constant")),s={init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case o.MONEY:this.Slot2.updateMoneyGold();break;case o.GOLD:break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params;switch(t.cmd){case n.JACKPOT:this.Slot2.handleJackpot(e);break;case n.SPIN:this.Slot2.handleSpin(e);break;case n.SPIN_DEMO:this.Slot2.handleSpinDemo(e);break;case n.SPIN_BONUS:this.Slot2.handleSpinBonus(e);break;case n.SPIN_BONUS_DEMO:this.Slot2.handleSpinBonusDemo(e);break;case n.SPIN_FAIL:this.Slot2.handleSpinFail(e);break;case n.UPDATE_BIGWIN:this.Slot2.handleUpdateBigwin(e);break;case o.MINIGAME_REQUEST:case o.GET_TOP:this.Slot2.MiniGame&&this.Slot2.MiniGame.handleRequest(e);break;case o.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot2.handleAlert(e);break;case o.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot2.handleNewMessage(e);break;case o.REQUEST_ACHIVEMENTED_QUEST:this.Slot2.handleAchivementedQuest(e);break;case o.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot2.handlePlusLuckyWheelFree(e);break;case o.UPDATE_MINIGAME_FREE:this.Slot2.MiniGame&&this.Slot2.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot2Constant":"Slot2Constant"}],Slot2Header:[function(t,e,i){"use strict";cc._RF.push(e,"d4fb7f6IYRAo5ITxa7b7lYL","Slot2Header");var o=t("../../helper/Message"),n=t("../../prefab/mini-game/item/JackpotItem"),s=t("../../util/FormatUtil");t("../../util/Util"),t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{testButtonNode:cc.Node,playButtonNode:cc.Node,mainJackpotItem:n,moneyLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.mainJackpotItem.setMoney(t):this.mainJackpotItem.setMoneyWithoutAnimation(t)},setMoney:function(t){this.moneyLabel.string=s.numberWithCommas(t)},onHistoryClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showHistoryFormNode()},onPrizeClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showPrizeFormNode()},onJackpotClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showJackpotFormNode()},onSettingClick:function(){this.Slot2.Audio.playClick(),this.Slot2UI.showSettingFormNode()},onTestClick:function(){this.Slot2.Audio.playClick(),this.Slot2.isCanChangeBet()&&!this.Slot2.isBonus()?(this.showPlayButtonNode(),this.Slot2.initDataTest()):this.Slot2.showToast(o.SLOT_NOT_TEST)},onPlayClick:function(){this.Slot2.Audio.playClick(),this.Slot2.isCanChangeBet()&&!this.Slot2.isBonus()?(this.showTestButtonNode(),this.Slot2.initDataBet(this.Slot2.getFirstBet())):this.Slot2.showToast(o.SLOT2_NOT_PLAY)},onBackClick:function(){this.Slot2.Audio.playClick(),this.Slot2.isCanChangeBet()&&!this.Slot2.isBonus()?this.Slot2.onBackClick():this.Slot2.showToast(o.SLOT2_NOT_PLAY)},showTestButtonNode:function(){this.testButtonNode.active=!0,this.playButtonNode.active=!1},showPlayButtonNode:function(){this.testButtonNode.active=!1,this.playButtonNode.active=!0}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot2HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"a13a87l+wtOb6r8rzyaEOF9","Slot2HistoryItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e){if(t){var i=o.numberWithCommas(t.total_prize_amount||t.win_prize),n=o.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=i,this.betLabel.string=n;var s=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=s}else this.node.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot2History:[function(t,e,i){"use strict";cc._RF.push(e,"975d1Ok2HFCR5vKM1VIoodk","Slot2History");var o=t("../../../helper/Message"),n=t("../../../helper/Config"),s=(t("../../../util/FormatUtil"),t("../Slot2Constant"));cc.Class({extends:cc.Component,properties:{historyContentScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onEnable:function(){this.initData()},onDisable:function(){this.removeXhr()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeOut=null)},initData:function(){this.listData&&0!==this.listData.length?(this.showListNode(),this.showData()):this.loadData()},handleSpin:function(t){this.hideLoadingNode(),this.initFirst(),this.is_update=!0;var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.total_prize_amount||t.win_prize,e.total_prize_amount+=t.bonus_prize,e.spin_fee=this.Slot2.getBet(),e.total_bet_amount=this.Slot2.Slot2SelectLine.getLineSelected().length*this.Slot2.getBet(),this.listData.length>s.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){this.showData()}.bind(this),1e3*n.SLOT2_DELAY_FINISH_3))},showData:function(){if(this.listData.length>=s.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,e=0,i=this.listItem.length;e<i;e++)this.listItem[e].getComponent("Slot2HistoryItem").init(this.listData[t-e],e)}else for(var o=this.listData.length-1,n=o;n>=0;n--)this.listItem[o-n]?this.listItem[o-n].getComponent("Slot2HistoryItem").init(this.listData[n],n):this.instanceItem(this.listData[n],n)},loadData:function(){var t=this;this.showLoadingNode(),this.historyContentScrollView.content.removeAllChildren(!0);var e={token:this.Slot2.getToken(),user_id:this.Slot2.getUserId()};this.xhr=this.Slot2.api.getHistorySlot2(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot2.showDialogMessage(o.HISTORY_TITLE,e.msg)})},initContent:function(t){this.initFirst(),this.showListNode();var e=t[0],i=0;i=e.length>s.NUM_IN_HISTORY?s.NUM_IN_HISTORY:e.length;for(var o=0;o<i;o++)this.instanceItem(e[o],o),this.listData.push(e[o])},instanceItem:function(t,e){var i=cc.instantiate(this.historyItemPrefab);return i.parent=this.historyContentScrollView.content,i.getComponent("Slot2HistoryItem").init(t,e),this.listItem.push(i),i},showListNode:function(){this.hideLoadingNode(),this.historyContentScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot2Constant":"Slot2Constant"}],Slot2Item:[function(t,e,i){"use strict";cc._RF.push(e,"d9431nsGtdK/5EmVakeGVnq","Slot2Item");t("../../scene/game-slot-2/Slot2Constant");cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node,effectNode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"F":this.iconFNode.active=!0;break;case"G":this.iconGNode.active=!0}},getIndex:function(){return this.index},showEffect:function(){this.effectNode.active=!0},hideEffect:function(){this.effectNode.active=!1},reset:function(){this.hideEffect(),this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1}}),cc._RF.pop()},{"../../scene/game-slot-2/Slot2Constant":"Slot2Constant"}],Slot2JackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"e389467c/FOpqMRnCH3Xi0X","Slot2JackpotItem");var o=t("../../util/FormatUtil"),n=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,betLabel:cc.Label,nickNameLabel:cc.Label,blanceLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e){if(t){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var i=n.getServerID(t.server_id)+t.nick_name.toLowerCase(),s=o.numberWithCommas(t.total_prize_amount),a=o.getStringDateByTimeStamp(t.created_at);this.timeLabel.string=a,this.betLabel.string=t.spin_fee,this.nickNameLabel.string=i,this.blanceLabel.string=s||"";var r=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=r}else this.node.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot2Jackpot:[function(t,e,i){"use strict";cc._RF.push(e,"0f47aJiZA5MWJb3b8HfkrOB","Slot2Jackpot");t("../../../helper/Config"),t("../../../prefab/mini-game/item/JackpotItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{contentScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onEnable:function(){this.initJackpot(),this.startTimeUpdate=0},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.jackpotItemPrefab);this.pool.put(e)}}},initData:function(t){t&&(this.data=t)},update:function(t){this.node.active&&(this.startTimeUpdate>10?(this.initJackpot(),this.startTimeUpdate=0):this.startTimeUpdate+=t)},initJackpot:function(){if(this.node.active&&this.data){this.initFirst(),this.contentScrollView.node.active=!0;var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=(t=o.filterSameItem(t)).length>20?20:t.length;if(t=t.splice(0,e),this.listChild)for(var i=0,n=t.length;i<n;i++)if(this.listChild[i])this.listChild[i].getComponent("Slot2JackpotItem").init(t[i],i);else{var s=this.instanceItem(t[i],i);s.parent=this.contentScrollView.content,this.listChild.push(s)}else{this.listChild=[];for(var a=0,r=t.length;a<r;a++){var c=this.instanceItem(t[a],a);c.parent=this.contentScrollView.content,this.listChild.push(c)}}this.hideLoadingNode()}},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1},instanceItem:function(t,e){var i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.jackpotItemPrefab)),i.getComponent("Slot2JackpotItem").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.contentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../../util/FormatUtil":"FormatUtil"}],Slot2Label:[function(t,e,i){"use strict";cc._RF.push(e,"2a4ferdh6VPd4vEDDFGr2mC","Slot2Label");var o=t("../../util/FormatUtil");t("../../helper/Config");cc.Class({extends:cc.Component,properties:{idGameLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2SelectLine=t.Slot2SelectLine},onLoad:function(){this.timeOutSpin=null,this.setLastMoneyWin(0),this.setNumberAutoSpin(0)},star:function(){},onEnable:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initLast:function(t){var e=this.Slot2.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.setLastMoneyWin(e)}.bind(this),4e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot2.getTestInfo().money+=e,this.Slot2.Slot2Header.setMoney(this.Slot2.getTestInfo().money),this.setLastMoneyWin(e)}.bind(this),5e3)},setId:function(t){this.idGameLabel.string="#"+t},setBet:function(t){this.betLabel.string=o.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=o.numberWithCommas(t)},setLastMoneyWin:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.lastMoneyWinLabel.string=o.numberWithCommas(this.last_money_win+t):(this.last_money_win=t,this.lastMoneyWinLabel.string=o.numberWithCommas(t))},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],Slot2Lines:[function(t,e,i){"use strict";cc._RF.push(e,"61c5cn8G/9L3I785JLx60o5","Slot2Lines");var o=t("./item/Slot2NumberLineItem"),n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listLine:[cc.Node],listNumberLineItem:[o]},init:function(t){this.Slot2=t,this.SlotUI=t.SlotUI;for(var e=0,i=this.listNumberLineItem.length;e<i;e++)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in this.listLine)for(var i in t)if(e==t[i].line-1){this.listLine[e].active=!0;break}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?this.listLine[e].active=!0:this.listLine[e].active=!1},showMostLine:function(t){for(var e in this.listLine)parseInt(t)-1==e&&(this.listLine[e].active=!0)},showLineAndMoney:function(t,e){for(var i in this.listLine)parseInt(t)-1==i?(this.listLine[i].active=!0,this.moneyNode.active=!0,this.moneyLabel.string=n.numberWithCommas(e)):this.listLine[i].active=!1},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;this.moneyNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./item/Slot2NumberLineItem":"Slot2NumberLineItem"}],Slot2MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"f84cdM9v+BByIMvO/DtHG38","Slot2MiniGameItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{normalSpriteNode:cc.Node,moneyNode:cc.Node,moneyLabel:cc.Label,moneyNonSelectLabel:cc.Label},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Bonus=t.Slot2Bonus},onLoad:function(){this.is_clicked=!1,this.is_open=!1,this.hideTimeout=null},onEnable:function(){this.reset()},onDisable:function(){this.reset()},onClick:function(){this.isClicked()||this.Slot2.Slot2State.isAutoSpin()||(this.setClicked(!0),this.Slot2Bonus.openItemMiniGame(this))},onClickIsAutoSpin:function(){this.isClicked()||(this.setClicked(!0),this.Slot2Bonus.openItemMiniGame(this))},openItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOpen(!0),this.setClicked(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.moneyNode.active=!0,e?(this.moneyLabel.node.active=!0,this.moneyLabel.string=o.numberWithCommas(t)):(this.moneyNonSelectLabel.node.active=!0,this.moneyNonSelectLabel.string=o.numberWithCommas(t))}.bind(this),1e3*n.SLOT2_TIME_OPEN_EGGE)},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_open=t},isOpen:function(){return this.is_open},reset:function(){clearTimeout(this.hideTimeout),this.moneyNode.active=!1,this.moneyLabel.node.active=!1,this.moneyNonSelectLabel.node.active=!1,this.normalSpriteNode.active=!0,this.setClicked(!1),this.setOpen(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],Slot2NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"c80577hXChNZagBGv5szcMq","Slot2NumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0},init:function(t){this.Slot2=t,this.Slot2Lines=t.Slot2Lines},onLoad:function(){var t=this;this.onMouseEnter=function(){t.Slot2Lines.showLine(t.line)},this.onMouseLeave=function(){t.Slot2Lines.showLine(0)},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))}}),cc._RF.pop()},{}],Slot2RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"cededhOckxIpbcqh+F7pugp","Slot2RankItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message"),s=t("../../util/Util");cc.Class({extends:cc.Component,properties:{rankRichtext:cc.RichText},onLoad:function(){},init:function(t){var e="";if(t.amount){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var i=s.getServerID(t.server_id)+t.nick_name.toLowerCase(),a=o.numberWithCommas(t.amount||t.total_prize_amount),r=Math.round(new Date/1e3)-t.created_at,c=void 0;c=r>86400?Math.round(r/86400)+" ng\xe0y":r>3600?Math.round(r/3600)+" gi\u1edd":r>60?Math.round(r/60)+" ph\xfat":r+" gi\xe2y",e=String.format(n.SLOT2_RANK_2,i,a,c)}if(t.spin_fee){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var h=s.getServerID(t.server_id)+t.nick_name.toLowerCase(),l=o.numberWithCommas(t.total_prize_amount),u=o.getStringDateByTimeStamp(t.created_at);e=String.format(n.SLOT2_RANK_1,h,l,u)}this.rankRichtext.string=e}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot2Rank:[function(t,e,i){"use strict";cc._RF.push(e,"19b1fC9lmVJ+bFAA3cNloVp","Slot2Rank");t("../../../helper/Message");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{rankContentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},onEnable:function(){this.startTimeUpdate=0,this.initRank()},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<30;t++){var e=cc.instantiate(this.rankItemPrefab);this.pool.put(e)}}},initData:function(t){t&&(this.data=t)},update:function(t){this.node.active&&(this.startTimeUpdate>5?(this.initRank(),this.startTimeUpdate=0):this.startTimeUpdate+=t)},initRank:function(){if(this.node.active&&this.data){this.initFirst(),this.hideLoadingNode();var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=this.data.list_player_bigwin.reverse();t=o.filterSameItemSlot(t),e=o.filterSameItemSlot(e);var i=void 0;if(t&&(i=this.getDataBigWin(t,3)),e&&(i=i.concat(this.getDataBigWin(e,10))),this.listChild)for(var n=0,s=this.listChild.length;n<s;n++)i[n]&&this.listChild[n].getComponent("Slot2RankItem").init(i[n]);else{this.listChild=[];for(var a=0,r=i.length;a<r;a++){var c=this.instanceItem(i[a]);c.parent=this.rankContentScrollView.content,this.listChild.push(c)}}}},getDataBigWin:function(t,e){for(var i=[],o=e<t.length?e:t.length,n=0;n<o;n++)i.push(t[n]);return i},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.rankItemPrefab)),e.getComponent("Slot2RankItem").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.rankContentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},showListRankNode:function(){this.hideLoadingNode(),this.rankContentScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],Slot2Reels:[function(t,e,i){"use strict";cc._RF.push(e,"fd46fdx8blJaKiLR6BoOxfy","Slot2Reels");t("../../util/RandomUtil");var o=t("../../helper/Config"),n=t("../../util/FormatUtil"),s=t("./Slot2Reel"),a=t("./Slot2Constant");cc.Class({extends:cc.Component,properties:{slotReels:[s],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Lines=t.Slot2Lines,this.Slot2Effect=t.Slot2Effect,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,o,i,n,c,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,o,i,n,c,t)},spinReels:function(t,e,i,o,n,s,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,a.SLOT2_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,a.SLOT2_TOTAL_ITEM_IN_REEL+2),this.slotReels[2].spin(l,a.SLOT2_TOTAL_ITEM_IN_REEL+4),this.slotReels[3].spin(u,a.SLOT2_TOTAL_ITEM_IN_REEL+6),this.slotReels[4].spin(d,a.SLOT2_TOTAL_ITEM_IN_REEL+8,!0,e,i,o,n,s,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.Slot2Lines.showLines(this.listDataPrize);for(var t=this.getIndexItemByLineId(this.listDataPrize),e=0,i=t.length;e<i;e++){var o=t[e]-1;this.showEffectItem(this.listItemNodeSameDataDisplay[o])}}},showEffectItem:function(t){var e=t.parent.convertToWorldSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),o=cc.instantiate(this.itemPrefab);o.setScale(a.SLOT2_ITEM_SCALE),o.getComponent("Slot2Item").init(t.getComponent("Slot2Item").getIndex()),o.getComponent("Slot2Item").showEffect(),o.setPosition(i),o.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot2.Slot2State.isAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize,i=this.getItemAndNumberItemInLine(this.listItemNodeSameDataDisplay,t);i.numberItem,i.indexItem;this.Slot2Lines.showLineAndMoney(t,e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=a.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,o=e.length;i<o;i++){var n=this.listItemNodeSameDataDisplay[e[i]-1];n&&n.getComponent("Slot2Item").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("Slot2Item").hideEffect()}},getItemByCol:function(t,e){for(var i=[],o=0;o<a.SLOT2_NUMBER_ITEM_IN_REEL;o++){var n=this.slotReels.length*o+e;i.push(t[n])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var o=t[i].line-1,s=a.LIST_INDEX_NUMBER_IN_LINE[o];e=e.concat(s)}return n.deduplicate(e)},getTimeEffect:function(t){return t===a.WIN_TYPE_NORMAL||t===a.WIN_TYPE_ZERO||t===a.WIN_TYPE_BIG_WIN?1e3*o.TIME_WIN_TYPE_NORMAL:t===a.WIN_TYPE_SUPER_BIG_WIN?1e3*o.TIME_WIN_TYPE_BIGWIN:t===a.WIN_TYPE_JACKPOT?1e3*o.TIME_WIN_TYPE_JACKPOT:1e3*o.TIME_WIN_TYPE_NORMAL},getItemAndNumberItemInLine:function(t,e){var i=[];for(var o in t){var n=t[o].getComponent("Slot2Item").getIndex();i.push(n)}var s=[],r=a.LIST_INDEX_NUMBER_IN_LINE[e-1];for(var c in r)s.push(i[r[c]-1]);return this.getMaxItemInLine(s)},getMaxItemInLine:function(t){for(var e=1,i=(t=t.sort())[0],o={},n=1,s=t.length;n<s;n++)i===t[n]?++e>=3&&(o.indexItem=i,o.numberItem=e):(i=t[n],e=1);return o},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot2Lines.reset()},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot2Constant":"Slot2Constant","./Slot2Reel":"Slot2Reel"}],Slot2Reel:[function(t,e,i){"use strict";cc._RF.push(e,"d4da268EFFOsaqk3kiwHZL6","Slot2Reel");var o=t("../../util/RandomUtil"),n=(t("../../helper/Config"),t("./Slot2Constant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,numberItems:0},init:function(t,e){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2Reels=t.Slot2Reels,this.Slot2Lines=t.Slot2Lines,this.Slot2Effect=t.Slot2Effect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[])},spin:function(t,e,i,o,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=this.instanceItem(u);m.setPosition(0,(l+1)*n.SLOT2_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.Slot2Reels.setItemListPrizeByIndex(m,d)}var p=(e-1)*n.SLOT2_DISTANCE_TWO_ITEMS,f=p/n.SLOT2_SPEED_SPIN_CARD,g=cc.moveTo(f,this.node.x,-p).easing(cc.easeInOut(3)),_=cc.callFunc(function(){i&&(this.Slot2.Slot2State.isAutoSpin()||this.Slot2.Slot2State.setFinish(),this.Slot2Reels.showAllEffectItems(),this.showEffectPrize(o,a,r,c,s,h))},this),S=cc.delayTime(.2);this.node.runAction(cc.sequence(g,S,_))},showEffectPrize:function(t,e,i,o,s,a){switch(t){case n.WIN_TYPE_NORMAL:case n.WIN_TYPE_BIG_WIN:this.Slot2.Slot2Effect.showWinNormal(s);break;case n.WIN_TYPE_SUPER_BIG_WIN:this.Slot2.Slot2Effect.showBigWin(s);break;case n.WIN_TYPE_JACKPOT:this.Slot2.Slot2Effect.showJackpot(s)}var r=this.getTimeEffect(t);t!==n.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot2.Slot2Effect.hideAll(),this.Slot2.Slot2State.isAutoSpin()&&!e?this.Slot2UI.showSpinDisableButton():this.Slot2UI.showSpinButton(),i?(o>0&&this.Slot2.Slot2Effect.showFreeSpin(o),this.setSpinFree(!0),this.setNumberSpinFree(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.Slot2Effect.showBonus(a):this.Slot2.Slot2State.isAutoSpin()?this.Slot2.spin():(this.Slot2.Slot2State.setStop(),i&&(this.Slot2UI.showSpinFreeButton(o),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot2.spin()}.bind(this),2e3))),this.Slot2Reels.showEffectLine()}.bind(this),r)):(e&&this.Slot2Effect.showBonus(a),i&&o>0&&this.Slot2.Slot2Effect.showFreeSpin(o),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot2.Slot2Effect.hideAll(),i?(this.Slot2.spin(),this.setSpinFree(!0),this.setNumberSpinFree(o),this.Slot2UI.showSpinFreeButton(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot2.Slot2State.isAutoSpin()?e||this.Slot2.spin():this.Slot2.Slot2State.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot2.Slot2Effect.hideAll(),this.Slot2.Slot2State.isAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot2.spin()}.bind(this),1e3)):this.Slot2.Slot2State.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<n.SLOT2_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=o.getRandomInt(0,n.SLOT2_LIST_ICON.length-1);return n.SLOT2_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*n.SLOT2_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("Slot2Item").reset(),e.getComponent("Slot2Item").init(t),e.setScale(n.SLOT2_ITEM_SCALE),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},getTimeEffect:function(t){return t===n.WIN_TYPE_NORMAL||t===n.WIN_TYPE_ZERO||t===n.WIN_TYPE_BIG_WIN?1e3*n.TIME_SHOW_WIN_NORMAL:t===n.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_SHOW_BIGWIN:t===n.WIN_TYPE_JACKPOT?1e3*n.TIME_SHOW_JACKPOT:1e3*n.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot2Constant":"Slot2Constant"}],Slot2Room:[function(t,e,i){"use strict";cc._RF.push(e,"89cc3TRvf5KspjYCqXoZXKr","Slot2Room");var o=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpot100JackpotItem:o,jackpot1kJackpotItem:o,jackpot10kJackpotItem:o},init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI},onLoad:function(){},initRoomInfo:function(t){if(t){var e={data:[]};e.data[0]=t[0].jackpot,e.data[1]=t[1].jackpot,e.data[2]=t[2].jackpot,this.initJackpot(e)}},initJackpot:function(t){if(t){var e=t.data[0],i=t.data[1],o=t.data[2];this.node.active?(this.jackpot100JackpotItem.setMoney(e),this.jackpot1kJackpotItem.setMoney(i),this.jackpot10kJackpotItem.setMoney(o)):(this.jackpot100JackpotItem.setMoneyWithoutAnimation(e),this.jackpot1kJackpotItem.setMoneyWithoutAnimation(i),this.jackpot10kJackpotItem.setMoneyWithoutAnimation(o))}},onTestClick:function(){this.Slot2UI.showContentGame(),this.Slot2.Slot2Header.onTestClick()},onBet100Click:function(){this.Slot2UI.showContentGame(),this.Slot2.initDataBet(100)},onBet1kClick:function(){this.Slot2UI.showContentGame(),this.Slot2.initDataBet(1e3)},onBet10kClick:function(){this.Slot2UI.showContentGame(),this.Slot2.initDataBet(1e4)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot2SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"854eb0vawBETpD4r1iKq/sU","Slot2SelectLine");var o=t("../../../helper/Message"),n=t("../item/Slot2SelectNumberLineItem");cc.Class({extends:cc.Component,properties:{listSelectNumLineItem:[n],selectAllEvenNode:cc.Node,unSelectAllEvenNode:cc.Node,selectAllOddNode:cc.Node,unSelectAllOddNode:cc.Node,selectAllNode:cc.Node,unSelectAllNode:cc.Node,unSelectOnNode:cc.Node,unSelectOffNode:cc.Node},init:function(t){for(var e in this.Slot2=t,this.Slot2Lines=t.Slot2Lines,this.Slot2Label=t.Slot2Label,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.selectAllItem(),this.totalLineSelected=this.getLineSelected().length,this.Slot2Label.initLast(this.totalLineSelected)},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.unSelectOnNode.active=!1,this.unSelectOffNode.active=!0):(20===this.totalLineSelected&&(this.selectAllNode.active=!0,this.unSelectAllNode.active=!1),this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1),this.Slot2Label.initLast(this.totalLineSelected)},showLines:function(t){this.Slot2Lines.showLines(t)},showLine:function(t){this.Slot2Lines.showLine(t)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},checkLineBuyNum:function(t){return this.listSelectNumLineItem[t]},unSelect:function(){this.selectAllNode.active=!1,this.unSelectAllNode.active=!0},onSelectAllEvenClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.selectAllEvenNode.active=!0,this.unSelectAllEvenNode.active=!1,this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1}},onUnSelectAllEvenClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.selectAllNode.active=!1,this.unSelectAllNode.active=!0,this.selectAllEvenNode.active=!1,this.unSelectAllEvenNode.active=!0}},onSelectAllOddClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.selectAllOddNode.active=!0,this.unSelectAllOddNode.active=!1,this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1}},onUnSelectAllOddClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.selectAllNode.active=!1,this.unSelectAllNode.active=!0,this.selectAllOddNode.active=!1,this.unSelectAllOddNode.active=!0}},onSelectAllClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest()?this.Slot2.showToast(o.SLOT_NOT_CHANGE_BET):this.selectAllItem()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.selectAllEvenNode.active=!0,this.selectAllOddNode.active=!0,this.selectAllNode.active=!0,this.unSelectAllEvenNode.active=!1,this.unSelectAllOddNode.active=!1,this.unSelectAllNode.active=!1,this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1},onUnSelectAllClick:function(){if(this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest())this.Slot2.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.selectAllEvenNode.active=!1,this.selectAllOddNode.active=!1,this.selectAllNode.active=!1,this.unSelectAllEvenNode.active=!0,this.unSelectAllOddNode.active=!0,this.unSelectAllNode.active=!0,this.unSelectOffNode.active=!0,this.unSelectOnNode.active=!1}},hideAllButton:function(){this.is_selectAllEvent=this.selectAllEvenNode.active,this.is_selectAllOdd=this.selectAllOddNode.active,this.is_selectAll=this.selectAllNode.active,this.is_unSelectAll=this.unSelectOnNode.active,this.selectAllEvenNode.active=!1,this.selectAllOddNode.active=!1,this.selectAllNode.active=!1,this.unSelectOnNode.active=!1,this.unSelectAllEvenNode.active=!0,this.unSelectAllOddNode.active=!0,this.unSelectAllNode.active=!0,this.unSelectOffNode.active=!0},showAllButton:function(){this.getLineSelected().length>0&&(this.is_selectAllEvent?(this.selectAllEvenNode.active=!0,this.unSelectAllEvenNode.active=!1):(this.selectAllEvenNode.active=!1,this.unSelectAllEvenNode.active=!0),this.is_selectAllOdd?(this.selectAllOddNode.active=!0,this.unSelectAllOddNode.active=!1):(this.selectAllOddNode.active=!1,this.unSelectAllOddNode.active=!0),this.is_selectAll?(this.selectAllNode.active=!0,this.unSelectAllNode.active=!1):(this.selectAllNode.active=!1,this.unSelectAllNode.active=!0),this.is_unSelectAll?(this.unSelectOnNode.active=!0,this.unSelectOffNode.active=!1):(this.unSelectOnNode.active=!1,this.unSelectOffNode.active=!0))}}),cc._RF.pop()},{"../../../helper/Message":"Message","../item/Slot2SelectNumberLineItem":"Slot2SelectNumberLineItem"}],Slot2SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"039433wzi1BabR5TOU4BIp6","Slot2SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot2=t,this.Slot2SelectLine=t.Slot2SelectLine},onLoad:function(){var t=this;this.selected=this.onSelectButtonNode.active,this.onMouseEnter=function(){t.Slot2SelectLine.showLine(t.line)},this.onMouseLeave=function(){t.Slot2SelectLine.showLine(0)},cc.sys.isBrowser&&(this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){this.Slot2.Audio.playClick(),!this.Slot2.isCanChangeBet()||this.Slot2.isFreeSpin()||this.Slot2.isBonus()||this.Slot2.isTest()||(this.selected?this.unSelect():this.select())},select:function(){this.setSelected(!0),this.Slot2SelectLine.itemIsSelected(!0),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot2SelectLine.unSelect(),this.Slot2SelectLine.itemIsSelected(!1),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected}}),cc._RF.pop()},{}],Slot2State:[function(t,e,i){"use strict";cc._RF.push(e,"ef18frlNztMDahJNAiQTyE5","Slot2State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot2=t,this.Slot2UI=t.Slot2UI,this.Slot2SelectLine=t.Slot2SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinButton(),this.Slot2UI.showAutoSpinButton(),this.Slot2SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinDisableButton(),this.Slot2UI.showAutoSpinDisableButton(),this.Slot2SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinDisableButton(),this.Slot2UI.showAutoSpinDisableButton(),this.Slot2SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot2.isFreeSpin()&&!this.Slot2.isTest()?this.Slot2UI.showSpinFreeButton():this.Slot2UI.showSpinDisableButton(),this.Slot2UI.showStopAutoSpinButton(),this.Slot2SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot2.Slot2Reels.hideEffectItem(),this.Slot2.Slot2Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot2UI:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"3edael2PBBLk5w5GZYvDopL","Slot2UI");var s=t("../../util/FormatUtil");cc.Class((n(o={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,historyFormNode:cc.Node,jackpotFormNode:cc.Node,selectLineFormNode:cc.Node,prizeFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node},init:function(t){this.Slot2=t},onLoad:function(){this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogHistoryForm=this.historyFormNode.getComponent("DialogForm"),this.dialogJackpotForm=this.jackpotFormNode.getComponent("DialogForm"),this.dialogSelectLineForm=this.selectLineFormNode.getComponent("DialogForm"),this.dialogPrizeForm=this.prizeFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0}),n(o,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),n(o,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogHistoryForm.showDialog(t)}),n(o,"showJackpotFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogJackpotForm.showDialog(t)}),n(o,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogSelectLineForm.showDialog(t)}),n(o,"showPrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogPrizeForm.showDialog(t)}),n(o,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),n(o,"showSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)}),n(o,"hideSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)}),n(o,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),n(o,"showProcessingNode",function(){this.processingNode.active=!0}),n(o,"hideProcessingNode",function(){this.processingNode.active=!1}),n(o,"showProcessingSceneNode",function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)}),n(o,"hideProcessingSceneNode",function(){this.processingSceneNode.active=!1}),o)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot2:[function(t,e,i){"use strict";cc._RF.push(e,"fe87eTdr/9IRb2Yd8cOzNxa","Slot2");var o=t("../../base/BaseScene"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=(t("../../helper/Config"),t("./Slot2Constant")),r=t("./Slot2UI"),c=t("./Slot2HandlerRequest"),h=t("./Slot2Bonus"),l=t("./Slot2Header"),u=t("./Slot2Lines"),d=t("./form/Slot2SelectLine"),m=t("./Slot2Label"),p=t("./Slot2Effect"),f=t("./Slot2Control"),g=t("./Slot2Reels"),_=t("./Slot2State"),S=t("../../prefab/mini-game/item/MiniGameXPer"),C=t("./form/Slot2Jackpot"),N=t("./form/Slot2History"),E=t("../../prefab/form/Tutorial"),T=t("../../prefab/form/Setting"),I=t("../../prefab/form/LogOut"),v=t("../../prefab/Toast"),y=t("../../ui/dialog/DialogMessage"),B=t("../../ui/Processing"),L=t("../../ui/ProcessingScene"),R=t("../../object/Audio"),A=t("../../object/Music");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,Slot2UI:r,Slot2Header:l,Slot2Bonus:h,Slot2Lines:u,Slot2SelectLine:d,Slot2Control:f,Slot2Label:m,Slot2Effect:p,Slot2Reels:g,MiniGameXPer:S,Slot2Jackpot:C,Slot2History:N,Tutorial:E,Setting:T,LogOut:I,Toast:v,DialogMessage:y,Processing:B,ProcessingScene:L,Audio:R,Music:A},onLoad:function(){this._super(),this.setSceneName(n.SCENE_GAME_SLOT_2),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot2State=_,this.Slot2State.init(this),this.Slot2HandlerRequest=c,this.Slot2HandlerRequest.init(this),this.Slot2UI.init(this),this.Slot2Header.init(this),this.Slot2Bonus.init(this),this.Slot2Lines.init(this),this.Slot2SelectLine.init(this),this.Slot2Control.init(this),this.Slot2Label.init(this),this.Slot2Effect.init(this),this.Slot2Reels.init(this),this.Slot2Jackpot.init(this),this.Slot2History.init(this),this.Tutorial.init(this),this.Setting.init(this),this.LogOut.init(this),this.updateMoneyGold(),this.Slot2State.setStop(),this.onResponseBind=this.Slot2HandlerRequest.onResponse.bind(this.Slot2HandlerRequest),this.onUserVariablesUpdateBind=this.Slot2HandlerRequest.onUserVariablesUpdate.bind(this.Slot2HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.Slot2UI.showContentGame(),this.initRoomInfo(),this.Slot2SelectLine.selectAllItem(),this.initDataBet()},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:5e7,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:5e7}},handleNews:function(t){},handleJackpot:function(t){var e=0,i=1;for(var o in this.info){var n=void 0;switch(this.info[o].spin_fee){case 100:this.info[o].jackpot=t.data[0],(n=t.data[3])&&(this.info[o].x_jackpot=n[0]);break;case 1e3:this.info[o].jackpot=t.data[1],n=t.data[3],t.data[3]&&(this.info[o].x_jackpot=n[1]);break;case 1e4:this.info[o].jackpot=t.data[2],(n=t.data[3])&&(this.info[o].x_jackpot=n[2])}this.info[o].spin_fee===this.bet&&(e=this.info[o].jackpot,i=this.info[o].x_jackpot)}this.isTest()||(this.Slot2Header.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){this.setSendSpin(!1);var e=t.data;this.Slot2Bonus.node.active&&this.Slot2UI.showContentGame(),this.Slot2State.isAutoSpin()||this.Slot2State.setSpinning(),this.initInfo(e),this.Slot2Label.handleSpin(e),this.Slot2Reels.handleSpin(e),this.Slot2History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.total_prize_amount=t.total_prize_amount||t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.x_bonus=t.x_bonus,e.x_free=t.x_free},handleSpinDemo:function(t){this.setSendSpin(!1),this.Slot2Bonus.node.active&&this.Slot2UI.showContentGame();var e=t.data;this.info&&(e.total_prize_amount>0||e.win_prize>0?this.testInfo.x_prize++:this.testInfo.x_prize=1),e.win_type===a.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.Slot2State.setSpinning(),this.Slot2Label.handleSpinDemo(e),this.Slot2Reels.handleSpinDemo(e)},handleSpinBonus:function(t){this.setSendSpin(!1),this.Slot2Bonus.handleSpin(t)},handleSpinBonusDemo:function(t){this.setSendSpin(!1),this.Slot2Bonus.handleSpinDemo(t)},handleSpinFail:function(t){this.setSendSpin(!1),this.showToast(t.msg),this.Slot2State.setStop()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.Slot2Jackpot.initData(this.dataRank)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t),this.firstBet=t},initDataTest:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setIsTest(t),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot2Reels.reset(),this.Slot2SelectLine.selectAllItem()},onBackClick:function(){this.showProcessingSceneNode(),this.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME)},spin:function(){if(this.line_player_choose=this.Slot2SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.isSendSpin()){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};this.isTest()?(this.sendRequest.send(a.SPIN_DEMO,t),this.testInfo.money-=2e5,this.Slot2Header.setMoney(this.testInfo.money)):this.sendRequest.send(a.SPIN,t),this.setSendSpin(!0)}}else this.showToast(s.SLOT2_NOT_SELECT_LINE),this.Slot2State.setStop()},initTestData:function(){this.Slot2Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot2Header.setMoney(this.testInfo.money),this.Slot2Label.setLastMoneyWin(0)},updateMoneyGold:function(){this.isTest()||this.Slot2Header.setMoney(this.getMoney())},setBet:function(t){var e=this.getInfoByBet(t);if(this.bet=t,this.Slot2Label.setBet(t),this.initBetData(e),this.Slot2Header.setMoney(this.getMoney()),e){var i=e.x_jackpot?e.x_jackpot:1;this.MiniGameXPer.setXMiniGame(i)}},getBet:function(){return this.bet},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_extra,o=this.Slot2SelectLine.getLineSelected().length;this.Slot2Header.setJackpot(e,!1),this.Slot2Label.initLast(o),i?this.Slot2UI.showSpinFreeButton(1):this.Slot2UI.showSpinButton()}},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot2Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee===this.bet)return this.info[t];return null},getInfoByBet:function(t){for(var e in this.info)if(this.info[e].spin_fee===t)return this.info[e]},getTestInfo:function(){return this.testInfo},getFirstBet:function(){return this.firstBet},isAutoSpin:function(){return this.Slot2State.isAutoSpin()},isTest:function(){return this.istest},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot2State.isStop()},setGameName:function(t){this.game_name=t},getTotalBet:function(){return this.bet*this.line_player_choose.length},hideBonusResult:function(){this.Slot2UI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.Slot2UI.showDialogMessage(t,e)},hideDialogMessage:function(){this.Slot2UI.hideDialogMessage()},showProcessingNode:function(){this.Slot2UI.showProcessingNode()},hideProcessingNode:function(){this.Slot2UI.hideProcessingNode()},showProcessingSceneNode:function(){this.Slot2UI.showProcessingSceneNode()},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},hideProcessingSceneNode:function(){this.Slot2UI.hideProcessingSceneNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:4e3,display_slot_data:["D","F","A","E","E","E","A","F","D","A","E","E","C","A","E"],is_bonus:!0,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:400},t.list_bonus_prize[1]={line:1,prize:400},t.list_bonus_prize[2]={line:2,prize:2e3},t.list_bonus_prize[3]={line:1,prize:400},t.list_bonus_prize[4]={line:1,prize:400},t.list_bonus_prize[5]={line:1,prize:400},t.list_bonus_prize[6]={line:1,prize:400},t.list_bonus_prize[7]={line:1,prize:400},t.list_bonus_prize[8]={line:0,prize:1},t.list_bonus_prize[9]={line:1,prize:400},t.list_bonus_prize[10]={line:1,prize:400},t.list_line_bonus=[{line:4,prize:1}],t.list_line_free=[],t.list_line_prize=[],t.list_line_prize[0]={line:3,prize:200},t.list_line_prize[1]={line:7,prize:200},t.list_line_prize[2]={line:9,prize:200},t.list_line_prize[3]={line:13,prize:200},t.list_line_prize[4]={line:19,prize:200},t.money_type=0,t.number_key_start_bonus=1,t.remain_free=0,t.spin_id=314,t.win_prize=1800,t.win_type=3,t},dataTestFree:function(){var t={bonus_prize:0,display_slot_data:["G","C","F","G","D","F","E","D","G","E","C","F","G","D","C"],is_bonus:!1,is_free:!0,is_jackpot:!0,list_bonus_prize:[],list_line_bonus:[],list_line_free:[],list_line_prize:[{line:1,prize:200}],money_type:0,number_key_start_bonus:0,remain_free:1,spin_id:166,win_prize:23131312,win_type:3};return t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Config":"Config","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","./Slot2Bonus":"Slot2Bonus","./Slot2Constant":"Slot2Constant","./Slot2Control":"Slot2Control","./Slot2Effect":"Slot2Effect","./Slot2HandlerRequest":"Slot2HandlerRequest","./Slot2Header":"Slot2Header","./Slot2Label":"Slot2Label","./Slot2Lines":"Slot2Lines","./Slot2Reels":"Slot2Reels","./Slot2State":"Slot2State","./Slot2UI":"Slot2UI","./form/Slot2History":"Slot2History","./form/Slot2Jackpot":"Slot2Jackpot","./form/Slot2SelectLine":"Slot2SelectLine"}],Slot3AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"bf7f8PJm3pABLafzFoPUYQ1","Slot3AutoSpinSetting");var o=t("../Slot3Constant"),n=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm"),cc.auto=this},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot3.DialogMessage.node.active&&!this.Slot3.Processing.node.active},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=s.SLOT3_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(n.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(n.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(n.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot3.Slot3State.setAutoSpin(),this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin),this.Slot3.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot3.Slot3State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot3.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===o.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,o=!this.stopGameMaxWin||this.lastWin<this.maxWin,n=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&o&&n},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../Slot3Constant":"Slot3Constant"}],Slot3BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"2007cbOxldNYabAUx1dCE58","Slot3BonusItem");var o=t("../../util/BrowserUtil"),n=t("../../helper/Message");t("../../scene/game-slot-3/Slot3Constant");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,openNode:cc.Node,keySpriteNode:cc.Node,miniGameNode:cc.Node,moneyLabel:cc.Label,listCard:[cc.SpriteFrame],listCardA:[cc.SpriteFrame]},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Bonus=t.Slot3Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.onMouseEnter=function(){t.is_open||o.showCursorPointer()},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Slot3.Slot3State.isAutoSpin()?this.Slot3.showToast(n.SLOT2_AUTOSPIN_NOT_CHANGE):this.isClicked()||this.Slot3Bonus.isStateStop()||(this.setClicked(!0),this.Slot3Bonus.setStateStop(!0),this.Slot3Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.isClicked()||this.Slot3Bonus.isStateStop()||(this.setClicked(!0),this.Slot3Bonus.setStateStop(!0),this.Slot3Bonus.onItemClick(this))},showMoney:function(t,e){this.setOpen(!0),this.defaultNode.active=!1,this.openNode.active=!0,this.openNode.getComponent(cc.Sprite).spriteFrame=this.listCard[e],this.showMoneyMiniGame(t)},showKey:function(){this.setOpen(!0),this.defaultNode.active=!1,this.keySpriteNode.active=!0},showMoneyMiniGame:function(t){this.setOpen(!0),this.moneyLabel.node.active=!0,this.moneyLabel.string=t},showOpenMiniGame:function(){this.setOpen(!0),this.defaultNode.active=!1,this.miniGameNode.active=!0},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},hideAll:function(){this.defaultNode.active=!1,this.openNode.active=!1,this.keySpriteNode.active=!1,this.miniGameNode.active=!1,this.moneyLabel.node.active=!1},reset:function(){this.setOpen(!1),this.setClicked(!1),this.hideAll(),this.defaultNode.active=!0}}),cc._RF.pop()},{"../../helper/Message":"Message","../../scene/game-slot-3/Slot3Constant":"Slot3Constant","../../util/BrowserUtil":"BrowserUtil"}],Slot3BonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"b4090SrndNIia0/0GdaHG/5","Slot3BonusResult");var o=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{moneyJackpotItem:o},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot3.DialogMessage.node.active&&!this.Slot3.Processing.node.active},setMoney:function(t){this.moneyJackpotItem.setMoney(t)}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot3Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"b2198/KQ/9GlbidN3Ct83nB","Slot3Bonus");t("../../util/FormatUtil");var o=t("../../util/RandomUtil"),n=(t("../../util/BrowserUtil"),t("../../helper/Config"),t("../../prefab/mini-game/item/JackpotItem"),t("../../prefab/slot3/Slot3BonusItem")),s=t("./Slot3Constant"),a=t("../../prefab/slot3/Slot3MiniGameItem");cc.Class({extends:cc.Component,properties:{remainLabel:cc.Label,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,Slot3BonusItem:[n],Slot3MiniGameItem:[a]},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3X=t.Slot3X;for(var e=0;e<this.Slot3BonusItem.length;e++)this.Slot3BonusItem[e].init(t);for(var i=0;i<this.Slot3MiniGameItem.length;i++)this.Slot3MiniGameItem[i].init(t)},onLoad:function(){this.timeOutResult=null,this.openAllEggeTimeOut=null,this.openAutoSpinTimeOut=null,this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.x_bonus=this.data.number_key_start_bonus,this.remainBonus=10,this.Slot3X.setXPrize(this.x_bonus),this.setRemainBonus(this.remainBonus))},onEnable:function(){this.reset(),this.initContent(),this.Slot3UI.showX(),this.Slot3UI.hideJackpot(),this.Slot3.Slot3State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.Slot3UI.showJackpot(),this.Slot3UI.hideX(),this.data.is_free?this.Slot3.spin():this.Slot3.Slot3State.isAutoSpin()?this.Slot3.spin():this.Slot3.Slot3State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem),this.getItemBonusNotOpen().onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.line,o=e.prize;this.openBonusItem(t,i,o)}else console.log("THOI TH\xd4I. M\u1ede H\u1ebeT C\xd2N \u0110\xc2U")},openBonusItem:function(t,e,i){switch(e){case s.BONUS_KEY:this.openItemBonusKey(t,i);break;case s.BONUS_MONEY:this.openItemBonusMoney(t,i);break;case s.BONUS_MINIGAME:this.openItemBonusMiniGame(t,i)}},openItemBonusKey:function(t,e){this.setStateStop(!1),this.x_bonus++,t.showKey(),this.setRemainBonus(this.remainBonus),this.Slot3X.setXPrize(this.x_bonus),this.checkFinishMiniGameBonus()},openItemBonusMoney:function(t,e){this.setStateStop(!1);var i=this.getRandomNumberCard();this.remainBonus--,t.showMoney(e,i),this.setRemainBonus(this.remainBonus),this.checkFinishMiniGameBonus()},openItemBonusMiniGame:function(t,e){this.setStateStop(!1),this.remainBonus--,this.mini_game_bonus_prize=e,this.bonusItemMiniGame=t,t.showOpenMiniGame(),this.setRemainBonus(this.remainBonus),this.showMiniGame(),this.Slot3.Slot3State.isAutoSpin()&&(clearInterval(this.intervalAutoOpenMiniGameItem),this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClickIsAutoSpin(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),2e3))},openItemMiniGame:function(t){this.setStateStop(!1),this.bonusItemMiniGame&&this.bonusItemMiniGame.showMoneyMiniGame(this.mini_game_bonus_prize),t.openItem(this.mini_game_bonus_prize,!0,1),this.openMiniGameItemByMultipBet(10,!1,0),this.openMiniGameItemByMultipBet(15,!1,1),this.openMiniGameItemByMultipBet(15,!1,2),this.openMiniGameItemByMultipBet(20,!1,3),this.showCloseMiniGame(),this.checkFinishMiniGameBonus()},openMiniGameItemByMultipBet:function(t,e,i){var o=t*this.Slot3.getBet()*this.x_bonus,n=this.getItemMiniGameNotOpen();n&&n.openItem(o,e,i)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.Slot3MiniGameItem)this.Slot3MiniGameItem[e].isOpen()||this.Slot3MiniGameItem[e].isClicked()||t.push(this.Slot3MiniGameItem[e]);return t[o.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.Slot3BonusItem)this.Slot3BonusItem[e].isOpen()||this.Slot3BonusItem[e].isClicked()||t.push(this.Slot3BonusItem[e]);return t[o.getRandomInt(0,t.length-1)]},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setRemainBonus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.remainLabel.string=t},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot3.showBonusResult(this.data.bonus_prize),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot3UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3500)):this.Slot3.Slot3State.isAutoSpin()&&(this.minigameBonusNode.active?(clearInterval(this.intervalHideMiniGameContentNode),this.intervalHideMiniGameContentNode=setInterval(function(){this.hideMiniGame(),this.autoOpenBox(),clearInterval(this.intervalHideMiniGameContentNode)}.bind(this),1e3)):this.autoOpenBox())},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},getRandomNumberCard:function(){var t=o.getRandomInt(0,this.listRandomCard.length-1);return this.listRandomCard.splice(t,1)},reset:function(){for(var t in this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.minigameBonusNode.active=!1,this.listRandomCard=s.NUM_VALUE_CARD.slice(),this.Slot3X.setXPrize(0),this.hideCloseMiniGame(),this.setStateStop(!1),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalHideMiniGameContentNode),this.Slot3BonusItem)this.Slot3BonusItem[t].reset();for(var e in this.Slot3MiniGameItem)this.Slot3MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../prefab/slot3/Slot3BonusItem":"Slot3BonusItem","../../prefab/slot3/Slot3MiniGameItem":"Slot3MiniGameItem","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot3Constant":"Slot3Constant"}],Slot3Constant:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"06095w927BAmIEg406aO5Vz","Slot3Constant");var s=(n(o={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,NUM_IN_HISTORY:10,NUM_VALUE_CARD:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1},"NUM_IN_HISTORY",20),n(o,"SLOT3_DISTANCE_TWO_ITEMS",136),n(o,"SLOT3_SPEED_SPIN_CARD",2500),n(o,"SLOT3_DELAY_SPIN",2e3),n(o,"SLOT3_NUMBER_ITEM_IN_REEL",3),n(o,"SLOT3_TOTAL_ITEM_IN_REEL",15),n(o,"SLOT3_DELAY_SHOW_MONEY_PRIZE",1e3),n(o,"SLOT3_TIME_DELAY_FINISH",3e3),n(o,"SLOT3_LIST_ICON",["A","B","C","D","E","F","G"]),n(o,"NUM_IN_HISTORY",30),n(o,"LIST_INDEX_NUMBER_IN_LINE",[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,8,4,5],[11,12,8,14,15],[1,12,3,14,5],[11,2,13,4,15],[6,2,13,4,10],[11,7,3,9,15],[1,7,13,9,5],[6,12,8,4,10],[6,2,8,14,10],[11,7,8,9,15],[1,7,8,9,5],[6,12,13,14,10],[6,2,3,4,10],[11,12,8,4,5],[1,2,8,14,15]]),n(o,"TIME_SHOW_JACKPOT",5),n(o,"TIME_SHOW_FREESPIN",3.5),n(o,"TIME_SHOW_BONUS",4),n(o,"TIME_SHOW_BIGWIN",4),n(o,"TIME_SHOW_WIN_NORMAL",2.5),o);e.exports=s,cc._RF.pop()},{}],Slot3Control:[function(t,e,i){"use strict";cc._RF.push(e,"49d8dCa4d9I6b6NGsRHUuEE","Slot3Control");var o=t("../../helper/Message"),n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onSpinClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isBonus()&&this.Slot3.isCanChangeBet()&&this.Slot3.spin()},onAutoSpinClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET):this.Slot3UI.showAutoSpinSettingFormNode()},onStopAutoSpinClick:function(){this.Slot3.Audio.playClick(),this.Slot3.Slot3State.setStop(),this.Slot3.setSendSpin(!1),this.Slot3.Slot3AutoSpinSetting.stopAutoSpin()},onAddClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot3.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot3.setFistBet(t[e]),this.Slot3.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isTest()||this.Slot3.isBonus()||this.Slot3.isFreeSpin())this.Slot3.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot3.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot3.setFistBet(t[e]),this.Slot3.setBet(t[e]);break}}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message"}],Slot3Effect:[function(t,e,i){"use strict";cc._RF.push(e,"a4f00sux51EdJAquHEpa8Fe","Slot3Effect");var o=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,bonusEffectNode:cc.Node,freeSpinEffectNode:cc.Node,bigwinEffectNode:cc.Node,jackpotEffectNode:cc.Node,winNormalJackpotItem:o,moneyLabelJackpotItem:o,jackpotLabelJackpotItem:o,bonusSkeleton:sp.Skeleton,freeSpinSkeletion:sp.Skeleton,bigwinSkeleton:sp.Skeleton,jackpotSkeleton:sp.Skeleton},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Music=t.Music},onLoad:function(){},onDestroy:function(){},showWinNormal:function(t){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.node.active=!0,this.winNormalJackpotItem.setMoney(t),this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.bigwinEffectNode.active=!0,this.bigwinSkeleton.setAnimation(0,"bigwin",!0),this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moneyLabelJackpotItem.node.active=!0,this.moneyLabelJackpotItem.setMoney(t),this.moneyLabelJackpotItem.node.getComponent(cc.Animation).play("Slot3JackpotAnimation")},this)))},showJackpot:function(t){this.hideAll(),this.jackpotEffectNode.active=!0,this.jackpotSkeleton.setAnimation(0,"jackpot",!0),this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.jackpotLabelJackpotItem.node.active=!0,this.jackpotLabelJackpotItem.setMoney(t),this.jackpotLabelJackpotItem.node.getComponent(cc.Animation).play("Slot3JackpotAnimation")},this)))},showBonus:function(t){this.hideAll();var e=t.remain_bonus;this.bonusEffectNode.active=!0,this.bonusSkeleton.setAnimation(0,"bonus",!0),this.node.runAction(cc.sequence(cc.delayTime(3),cc.callFunc(function(){this.hideAll(),this.Slot3.Slot3Bonus.initData(t),this.Slot3.Slot3Bonus.setRemainBonus(e),this.Slot3UI.showBonus()},this)))},showFreeSpin:function(){this.hideAll(),this.freeSpinEffectNode.active=!0,this.freeSpinSkeletion.setAnimation(0,"freespin",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){},this)))},hideAll:function(){this.winNormalNode.active=!1,this.bonusEffectNode.active=!1,this.freeSpinEffectNode.active=!1,this.bigwinEffectNode.active=!1,this.jackpotEffectNode.active=!1,this.jackpotLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.node.active=!1,this.moneyLabelJackpotItem.node.active=!1,this.jackpotLabelJackpotItem.setMoneyWithoutAnimation(1),this.winNormalJackpotItem.setMoneyWithoutAnimation(1),this.moneyLabelJackpotItem.setMoneyWithoutAnimation(1),this.bonusSkeleton.clearTrack(0),this.freeSpinSkeletion.clearTrack(0),this.bigwinSkeleton.clearTrack(0),this.jackpotSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot3Footer:[function(t,e,i){"use strict";cc._RF.push(e,"836145SmWdA77xHLujlsgqQ","Slot3Footer");t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){},onPlayFreeClick:function(){this.Slot3.Audio.playClick()},onPlayClick:function(){this.Slot3.Audio.playClick()},onBonusClick:function(){this.Slot3.Audio.playClick()},onBackClick:function(){this.Slot3.Audio.playClick()},onShopClick:function(){this.Slot3.Audio.playClick()},onRankClick:function(){this.Slot3.Audio.playClick()},onTutorialClick:function(){this.Slot3.Audio.playClick()},onHelpClick:function(){this.Slot3.Audio.playClick()},onSettingClick:function(){this.Slot3.Audio.playClick()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot3Form:[function(t,e,i){"use strict";cc._RF.push(e,"f0e21eDyGVELI2NOkHa58I1","Slot3Form");t("../../helper/Message");var o=t("./form/Slot3History"),n=t("./form/Slot3JackpotForm"),s=t("./form/Slot3Rank");cc.Class({extends:cc.Component,properties:{rechargeOnNode:cc.Node,rechargeOffNode:cc.Node,rankOnNode:cc.Node,rankOffNode:cc.Node,jackpotOnNode:cc.Node,jackpotOffNode:cc.Node,Slot3Rank:s,Slot3JackpotForm:n,Slot3History:o},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3History.init(t),this.Slot3JackpotForm.init(t),this.Slot3Rank.init(t)},onLoad:function(){},onEnable:function(){this.jackpotOffNode.active=!1,this.jackpotOnNode.active=!0,this.Slot3JackpotForm.node.active=!0},onRechargeClick:function(){this.Slot3.Audio.playClick(),this.hideAll(),this.rechargeOffNode.active=!1,this.rechargeOnNode.active=!0,this.Slot3History.node.active=!0},onRankClick:function(){this.Slot3.Audio.playClick(),this.hideAll(),this.rankOffNode.active=!1,this.rankOnNode.active=!0,this.Slot3Rank.node.active=!0},onJackpotClick:function(){this.Slot3.Audio.playClick(),this.hideAll(),this.jackpotOffNode.active=!1,this.jackpotOnNode.active=!0,this.Slot3JackpotForm.node.active=!0},hideAll:function(){this.Slot3Rank.node.active=!1,this.Slot3JackpotForm.node.active=!1,this.Slot3History.node.active=!1,this.rechargeOffNode.active=!0,this.rankOffNode.active=!0,this.jackpotOffNode.active=!0,this.rechargeOnNode.active=!1,this.rankOnNode.active=!1,this.jackpotOnNode.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","./form/Slot3History":"Slot3History","./form/Slot3JackpotForm":"Slot3JackpotForm","./form/Slot3Rank":"Slot3Rank"}],Slot3HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"a9eeerhl2lMS400KCS3x6OX","Slot3HandlerRequest");var o=t("../../helper/Constant"),n=(t("../../helper/Message"),t("./Slot3Constant")),s={init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case o.MONEY:this.Slot3.updateMoneyGold();break;case o.GOLD:break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params;switch(t.cmd){case o.NEWS:this.Slot3.handleNews(e);break;case n.JACKPOT:this.Slot3.handleJackpot(e);break;case n.SPIN:this.Slot3.handleSpin(e);break;case n.SPIN_DEMO:this.Slot3.handleSpinDemo(e);break;case n.SPIN_BONUS:this.Slot3.handleSpinBonus(e);break;case n.SPIN_BONUS_DEMO:this.Slot3.handleSpinBonusDemo(e);break;case n.SPIN_FAIL:this.Slot3.handleSpinFail(e);break;case n.UPDATE_BIGWIN:this.Slot3.handleUpdateBigwin(e);break;case n.GET_TOP:this.Slot3.handleGetTop(e),this.Slot3.MiniGame&&this.Slot3.MiniGame.handleRequest(e);break;case o.MINIGAME_REQUEST:this.Slot3.MiniGame&&this.Slot3.MiniGame.handleRequest(e);break;case o.REQUEST_RECHARGE_GOLD:this.Slot3.handleRechargeGold(e);break;case o.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot3.handleAlert(e);break;case o.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot3.handleNewMessage(e);break;case o.REQUEST_ACHIVEMENTED_QUEST:this.Slot3.handleAchivementedQuest(e);break;case o.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot3.handlePlusLuckyWheelFree(e);break;case o.REQUEST_CHAT_GET_CHAT:case o.REQUEST_CHAT_SEND_CHAT:break;case o.UPDATE_MINIGAME_FREE:this.Slot3.MiniGame&&this.Slot3.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot3Constant":"Slot3Constant"}],Slot3Header:[function(t,e,i){"use strict";cc._RF.push(e,"7a3047q9RRCKamSGB7Sxx0r","Slot3Header");var o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{freeSpinButtonNode:cc.Node,playSpinButton:cc.Node},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){},onPlayFreeClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(o.SLOT_NOT_TEST):(this.Slot3UI.showPlayButton(),this.Slot3.initDataTest())},onPlayClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isBonus()||this.Slot3.isFreeSpin()?this.Slot3.showToast(o.SLOT_NOT_CHANGE_SPIN):(this.Slot3UI.showTestButton(),this.Slot3.initDataBet(this.Slot3.getFistBet()))},onBonusClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showBonusTableFormNode()},onBackClick:function(){this.Slot3.Audio.playClick(),this.Slot3.isCanChangeBet()?this.Slot3.onBackClick():this.Slot3.showToast(o.SLOT_NOT_CHANGE_SPIN)},onShopClick:function(){this.Slot3.Audio.playClick(),this.Slot3.showDialogMessage(o.RECHARGE_MONEY_TITLE,"Th\u1ebb n\u1ea1p \u0111ang b\u1ea3o tr\xec")},onRankClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showRankFormNode()},onTutorialClick:function(){this.Slot3.Audio.playClick()},onHelpClick:function(){this.Slot3.Audio.playClick()},onSettingClick:function(){this.Slot3.Audio.playClick(),this.Slot3UI.showSettingFormNode()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot3HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"eb276dWEWFBIbyaB7TI2f4I","Slot3HistoryItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{richText:cc.RichText},onLoad:function(){},init:function(t){var e=o.numberWithCommas(t.total_prize_amount||t.win_prize),i=t.spin_fee;t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var s=Math.round(new Date/1e3)-t.created_at,a=void 0;a=s>86400?Math.round(s/86400)+" ng\xe0y":s>3600?Math.round(s/3600)+" gi\u1edd":s>60?Math.round(s/60)+" ph\xfat":s+" gi\xe2y";var r=String.format(n.SLOT3_HISTORY,i,e,a);this.richText.string=r},getMessage:function(){return this.richText.string}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot3History:[function(t,e,i){"use strict";cc._RF.push(e,"6b524xMsnBG16gosNyVNae2","Slot3History");var o=t("../../../helper/Message"),n=t("../../../helper/Config"),s=t("../../../util/FormatUtil"),a=t("../Slot3Constant");cc.Class({extends:cc.Component,properties:{historyContentScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){this.initFirst(),this.initData()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeOut=null)},initData:function(){if(this.listData&&0!==this.listData.length){this.showListNode(),this.listData=s.sortDataTimeByTime(this.listData);for(var t=0,e=this.listData.length;t<e;t++){var i=this.listItem[t];i||(i=this.instanceItem(this.listData[t])),i.getComponent("Slot3HistoryItem").init(this.listData[t])}}else this.loadData()},handleSpin:function(t){this.initFirst(),this.is_update=!0;var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.total_prize_amount||t.win_prize,e.spin_fee=this.Slot3.getBet(),this.listData.length>a.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){if(this.listData.length>a.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length,i=0,o=this.listItem.length;i<o;i++)this.listItem[i].getComponent("Slot3HistoryItem").init(this.listData[t-1-i])}else this.instanceItem(e)}.bind(this),1e3*n.SLOT3_DELAY_FINISH_3))},loadData:function(){var t=this;this.initFirst(),this.showLoadingNode(),this.historyContentScrollView.content.removeAllChildren(!0);var e={token:this.Slot3.getToken(),user_id:this.Slot3.getUserId()};this.Slot3.api.getHistorySlot3(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot3.showDialogMessage(o.HISTORY_TITLE,e.msg)})},initContent:function(t){this.showListNode();var e=t[0],i=0;i=e.length>a.NUM_IN_HISTORY?a.NUM_IN_HISTORY:e.length;for(var o=0;o<i;o++)this.instanceItem(e[o]),this.listData.push(e[o])},instanceItem:function(t){var e=cc.instantiate(this.historyItemPrefab);return e.parent=this.historyContentScrollView.content,e.getComponent("Slot3HistoryItem").init(t),this.listItem.push(e),e},showListNode:function(){this.hideLoadingNode(),this.historyContentScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot3Constant":"Slot3Constant"}],Slot3Item:[function(t,e,i){"use strict";cc._RF.push(e,"d47b0KCaFVLybyLjnPkf4Rf","Slot3Item"),cc.Class({extends:cc.Component,properties:function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}({effectNode:cc.Sprite,iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node},"effectNode",cc.Node),onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"F":this.iconFNode.active=!0;break;case"G":this.iconGNode.active=!0}},getIndex:function(){return this.index},showEffect:function(){this.effectNode.getComponent(cc.Animation).play()},hideEffect:function(){this.effectNode.getComponent(cc.Animation).stop(),this.effectNode.scale=1,this.effectNode.skewX=0,this.effectNode.skewY=0,this.effectNode.angle=0},reset:function(){this.hideEffect(),this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1}}),cc._RF.pop()},{}],Slot3Jackpot2Item:[function(t,e,i){"use strict";cc._RF.push(e,"f0c38RtNhlHPqVVIJBiFow+","Slot3Jackpot2Item");var o=t("../../util/FormatUtil"),n=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label,timeLabel:cc.Label},onLoad:function(){},init:function(t,e){t?(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.nickNameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.balanceLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at)):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3JackpotForm:[function(t,e,i){"use strict";cc._RF.push(e,"7a692L+IbxCaq5PnbSZLN6h","Slot3JackpotForm");t("../../../helper/Config"),t("../../../prefab/mini-game/item/JackpotItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{contentScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){this.initJackpot(),this.startTimeUpdate=0},initData:function(t){t&&(this.data=t)},update:function(t){this.node.active&&(this.startTimeUpdate>10?(this.initJackpot(),this.startTimeUpdate=0):this.startTimeUpdate+=t)},initNodePool:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<30;t++){var e=cc.instantiate(this.jackpotItemPrefab);this.pool.put(e)}}},initJackpot:function(){if(this.node.active&&this.data){this.initNodePool(),this.contentScrollView.node.active=!0;var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=(t=o.filterSameItemSlot(t)).length>30?30:t.length;if(this.listChild)for(var i=0;i<e;i++)if(this.listChild[i])this.listChild[i].getComponent("Slot3JackpotItem").init(t[i]);else{var n=this.instanceItem(t[i]);n.parent=this.contentScrollView.content,this.listChild.push(n)}else{this.listChild=[];for(var s=0;s<e;s++){var a=this.instanceItem(t[s]);a.parent=this.contentScrollView.content,this.listChild.push(a)}}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.jackpotItemPrefab)),e.getComponent("Slot3JackpotItem").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.contentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../../util/FormatUtil":"FormatUtil"}],Slot3JackpotItem:[function(t,e,i){"use strict";cc._RF.push(e,"e1b26cTAphBnq06KToB4pks","Slot3JackpotItem");var o=t("../../util/FormatUtil"),n=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,betLabel:cc.Label,nickNameLabel:cc.Label,blanceLabel:cc.Label},onLoad:function(){},init:function(t){var e=t.nick_name,i=o.numberWithCommas(t.total_prize_amount),s=o.getStringDateByTimeStamp(t.created_at).replace(" ","\n"),a=o.numberWithCommas(t.spin_fee);this.timeLabel.string=s,this.nickNameLabel.string=n.getServerID(t.server_id)+e,this.blanceLabel.string=i,this.betLabel.string=a}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3Label:[function(t,e,i){"use strict";cc._RF.push(e,"36f43n/z7BCQI6jpDGAJ7yi","Slot3Label");t("../../helper/Message");var o=t("../../util/FormatUtil"),n=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpotJackpotItem:n,spinIDLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:cc.Label,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initLast:function(t){var e=this.Slot3.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.lastMoneyWinLabel.string=o.numberWithCommas(e)}.bind(this),5e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot3.getTestInfo().money+=e,this.lastMoneyWinLabel.string=o.numberWithCommas(e),this.setMoney(this.Slot3.getTestInfo().money)}.bind(this),3e3)},setId:function(t){this.spinIDLabel.string="#"+t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.jackpotJackpotItem.setMoney(t):this.jackpotJackpotItem.setMoneyWithoutAnimation(t)},setBet:function(t){this.betLabel.string=o.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=o.numberWithCommas(t)},setMoney:function(t){this.moneyLabel.string=o.numberWithCommas(t)},setLastMoneyWin:function(t){this.lastMoneyWinLabel.string=o.numberWithCommas(t)},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t}}),cc._RF.pop()},{"../../helper/Message":"Message","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],Slot3Lines:[function(t,e,i){"use strict";cc._RF.push(e,"05e99EvyDhDe52MW+ww1Yi6","Slot3Lines");t("../../util/FormatUtil");var o=t("./items/Slot3NumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[o],listLine:[cc.Node]},init:function(t){for(var e in this.Slot3=t,this.SlotUI=t.SlotUI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./items/Slot3NumberLineItem":"Slot3NumberLineItem"}],Slot3MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"79b387IgGZEbpTFartdoBFo","Slot3MiniGameItem");var o=t("../../util/BrowserUtil"),n=t("../../util/FormatUtil"),s=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,openNode:cc.Node,moneyLabel:cc.Label,moneyNonSelectLabel:cc.Label,listCard:[cc.SpriteFrame]},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Bonus=t.Slot3Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.hideTimeout=null,this.onMouseEnter=function(){t.is_open||o.showCursorPointer()},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.isClicked()||this.Slot3.Slot3State.isAutoSpin()||(this.setClicked(!0),this.Slot3Bonus.openItemMiniGame(this))},onClickIsAutoSpin:function(){this.isClicked()||(this.setClicked(!0),this.Slot3Bonus.openItemMiniGame(this))},openItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments[2];this.setOpen(!0),this.setClicked(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.showOpenItem(i),e?(this.moneyLabel.node.active=!0,this.moneyLabel.string=n.numberWithCommas(t)):(this.moneyNonSelectLabel.node.active=!0,this.moneyNonSelectLabel.string=n.numberWithCommas(t))}.bind(this),500*s.SLOT3_TIME_OPEN_EGGE)},showOpenItem:function(t){this.defaultNode.active=!1,this.openNode.active=!0,this.listCard[t]&&(this.openNode.getComponent(cc.Sprite).spriteFrame=this.listCard[t])},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},reset:function(){this.setClicked(!1),this.setOpen(!1),clearTimeout(this.hideTimeout),this.moneyLabel.node.active=!1,this.moneyNonSelectLabel.node.active=!1,this.openNode.active=!1,this.defaultNode.active=!0}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],Slot3NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"dbcdcs8WzVMFoekX+0Cqdnt","Slot3NumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLineLabel:cc.Label,bgSprite:cc.Sprite,activeSpriteFrame:cc.SpriteFrame,normalSpriteFrame:cc.SpriteFrame},init:function(t){this.Slot3=t,this.Slot3Lines=t.Slot3Lines,this.line=this.numberLineLabel.string},onLoad:function(){var t=this;this.hideNumberLine(),this.onMouseEnter=function(){t.Slot3Lines.showLine(t.line),t.showNumberLine()},this.onMouseLeave=function(){t.Slot3Lines.showLine(0),t.hideNumberLine()},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},showNumberLine:function(){this.bgSprite.enabled=!0,this.numberLineLabel.node.active=!0},hideNumberLine:function(){this.bgSprite.enabled=!1,this.numberLineLabel.node.active=!1}}),cc._RF.pop()},{}],Slot3Rank2Item:[function(t,e,i){"use strict";cc._RF.push(e,"8359fhCCvlB/basvs0KBh9p","Slot3Rank2Item");var o=t("../../util/FormatUtil"),n=(t("../../helper/Message"),t("../../util/Util"));cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){this.idLabel.string=parseInt(e)+1,this.nickNameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.balanceLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount)}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3Rank2:[function(t,e,i){"use strict";cc._RF.push(e,"80961PhWnBN07hP1O8WqY1p","Slot3Rank2");t("../../../helper/Message");var o=t("../Slot3Constant");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,jackpotNode:cc.Node,rankNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,jackpotOnButtonNode:cc.Node,jackpotOffButtonNode:cc.Node,rankItemPrefab:cc.Prefab,listScrollView:cc.ScrollView,jackpotItemPrefab:cc.Prefab,jackpotScrollView:cc.ScrollView},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.data=null,this.onJackpotClick(),this.Slot3.sendRequest.send(o.GET_TOP)},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot3.DialogMessage.node.active&&!this.Slot3.Processing.node.active},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOffButtonNode.active=!1,this.rankOnButtonNode.active=!0,this.rankNode.active=!0},onJackpotClick:function(){this.hideAllButton(),this.hideAllContent(),this.jackpotOffButtonNode.active=!1,this.jackpotOnButtonNode.active=!0,this.jackpotNode.active=!0},initDataRank:function(t){var e=t.data,i=[];i[0]=e[2],i[1]=e[0];var o=[];o[0]=e[3],o[1]=e[1],this.data=[],this.data[0]=i,this.data[1]=o,this.initData()},initData:function(){if(this.showListNode(),this.listScrollView.content.removeAllChildren(!0),this.jackpotScrollView.content.removeAllChildren(!0),this.data){var t=this.data[0]?this.data[0]:this.data[1];if(t[0])for(var e=t[0],i=0;i<e.length;i++){var o=cc.instantiate(this.rankItemPrefab);o.parent=this.listScrollView.content,o.getComponent("Slot3Rank2Item").init(e[i],i)}if(t[1])for(var n=t[1],s=0;s<n.length;s++){var a=cc.instantiate(this.jackpotItemPrefab);a.parent=this.jackpotScrollView.content,a.getComponent("Slot3Jackpot2Item").init(n[s],s)}}this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()},isRankType:function(){return this.rankOnButtonNode.active},hideAllButton:function(){this.jackpotOffButtonNode.active=!0,this.rankOffButtonNode.active=!0,this.jackpotOnButtonNode.active=!1,this.rankOnButtonNode.active=!1},hideAllContent:function(){this.jackpotNode.active=!1,this.rankNode.active=!1},showLoadingNode:function(){this.loadingNode.active=!0,this.hideAllContent()},showListNode:function(){this.loadingNode.active=!1,this.rankNode.active=this.isRankType(),this.jackpotNode.active=!this.isRankType()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../Slot3Constant":"Slot3Constant"}],Slot3RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"86b70m1MVxAwrMsi63Wq3JF","Slot3RankItem");var o=t("../../util/FormatUtil"),n=t("../../helper/Message"),s=t("../../util/Util");cc.Class({extends:cc.Component,properties:{rankRichtext:cc.RichText},onLoad:function(){},init:function(t){var e="";if(t.amount){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var i=s.getServerID(t.server_id)+t.nick_name,a=o.numberWithCommas(t.amount),r=Math.round(new Date/1e3)-t.created_at,c=void 0;c=r>86400?Math.round(r/86400)+" ng\xe0y":r>3600?Math.round(r/3600)+" gi\u1edd":r>60?Math.round(r/60)+" ph\xfat":r+" gi\xe2y",e=String.format(n.SLOT3_RANK_2,i,a,c)}if(t.spin_fee){t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3));var h=s.getServerID(t.server_id)+t.nick_name,l=o.numberWithCommas(t.total_prize_amount),u=o.getStringDateByTimeStamp(t.created_at);e=String.format(n.SLOT3_RANK_1,h,l,u)}this.rankRichtext.string=e}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot3Rank:[function(t,e,i){"use strict";cc._RF.push(e,"74ff0gw6XdJcJNUAzUWe8Vt","Slot3Rank");t("../../../helper/Message");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{rankContentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI},onLoad:function(){},onEnable:function(){this.initRank(),this.startTimeUpdate=0},initFirst:function(){this.pool=new cc.NodePool;for(var t=0;t<30;t++){var e=cc.instantiate(this.rankItemPrefab);this.pool.put(e)}},initData:function(t){t&&(this.data=t)},update:function(t){this.node.active&&(this.startTimeUpdate>5?(this.initRank(),this.startTimeUpdate=0):this.startTimeUpdate+=t)},initRank:function(){if(this.node.active&&this.data){this.initFirst(),this.showListRankNode();var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=this.data.list_player_bigwin.reverse();t=o.filterSameItemSlot(t),e=o.filterSameItemSlot(e);var i=void 0;if(t&&(i=this.getDataBigWin(t,3)),e&&(i=i.concat(this.getDataBigWin(e,17))),this.listChild)for(var n=0,s=this.listChild.length;n<s;n++)i[n]&&this.listChild[n].getComponent("Slot3RankItem").init(i[n]);else{this.listChild=[];for(var a=0,r=i.length;a<r;a++){var c=this.instanceItem(i[a]);c.parent=this.rankContentScrollView.content,this.listChild.push(c)}}}},getDataBigWin:function(t,e){for(var i=[],o=e<t.length?e:t.length,n=0;n<o;n++)i.push(t[n]);return i},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.rankItemPrefab)),e.getComponent("Slot3RankItem").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.rankContentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},showListRankNode:function(){this.hideLoadingNode(),this.rankContentScrollView.node.active=!0},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil"}],Slot3Reels:[function(t,e,i){"use strict";cc._RF.push(e,"4da557Ju55C46FcxzIBrZF3","Slot3Reels");t("../../util/RandomUtil");var o=t("../../helper/Config"),n=t("../../util/FormatUtil"),s=t("./Slot3Reel"),a=t("./Slot3Constant");cc.Class({extends:cc.Component,properties:{slotReels:[s],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Lines=t.Slot3Lines,this.Slot3SelectLine=t.Slot3SelectLine,this.Slot3Effect=t.Slot3Effect,this.Slot3X=t.Slot3X,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,o,i,n,c,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,o,i,n,c,t)},spinReels:function(t,e,i,o,n,s,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,a.SLOT3_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,a.SLOT3_TOTAL_ITEM_IN_REEL+2),this.slotReels[2].spin(l,a.SLOT3_TOTAL_ITEM_IN_REEL+4),this.slotReels[3].spin(u,a.SLOT3_TOTAL_ITEM_IN_REEL+6),this.slotReels[4].spin(d,a.SLOT3_TOTAL_ITEM_IN_REEL+8,!0,e,i,o,n,s,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.Slot3Lines.showLines(this.listDataPrize);this.getIndexItemByLineId(this.listDataPrize)}},showEffectItem:function(t){var e=t.parent.convertToWorldSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),o=cc.instantiate(this.itemPrefab);o.getComponent("Slot3Item").init(t.getComponent("Slot3Item").getIndex()),o.getComponent("Slot3Item").showEffect(),o.setPosition(i),o.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize;this.Slot3Lines.showLine(t),this.Slot3Lines.showMoney(e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=a.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,o=e.length;i<o;i++){var n=this.listItemNodeSameDataDisplay[e[i]-1];n&&n.getComponent("Slot3Item").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("Slot3Item").hideEffect()}},getItemByCol:function(t,e){for(var i=[],o=0;o<a.SLOT3_NUMBER_ITEM_IN_REEL;o++){var n=this.slotReels.length*o+e;i.push(t[n])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var o=t[i].line-1,s=a.LIST_INDEX_NUMBER_IN_LINE[o];e=e.concat(s)}return n.deduplicate(e)},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot3Lines.reset()},getTimeEffect:function(t){return t===a.WIN_TYPE_NORMAL||t===a.WIN_TYPE_ZERO?1e3*o.TIME_WIN_TYPE_NORMAL:t===a.WIN_TYPE_BIG_WIN||t===a.WIN_TYPE_SUPER_BIG_WIN?1e3*o.TIME_WIN_TYPE_BIGWIN:t===a.WIN_TYPE_JACKPOT?1e3*o.TIME_WIN_TYPE_JACKPOT:1e3*o.TIME_WIN_TYPE_NORMAL},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot3Constant":"Slot3Constant","./Slot3Reel":"Slot3Reel"}],Slot3Reel:[function(t,e,i){"use strict";cc._RF.push(e,"ce639Zi/qFMT50cEakXl/5q","Slot3Reel");var o=t("../../util/RandomUtil"),n=(t("../../helper/Config"),t("./Slot3Constant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab,numberItems:0,animation:cc.Animation},init:function(t,e){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Reels=t.Slot3Reels,this.Slot3Lines=t.Slot3Lines,this.Slot3X=t.Slot3X,this.Slot3Effect=t.Slot3Effect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[])},spin:function(t,e,i,o,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=this.instanceItem(u);m.setPosition(0,(l+1)*n.SLOT3_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.Slot3Reels.setItemListPrizeByIndex(m,d)}var p=(e-1)*n.SLOT3_DISTANCE_TWO_ITEMS,f=p/n.SLOT3_SPEED_SPIN_CARD,g=cc.moveTo(f,this.node.x,-p).easing(cc.easeInOut(3)),_=cc.callFunc(function(){i&&(this.Slot3.Slot3State.isAutoSpin()||this.Slot3.Slot3State.setFinish(),this.Slot3Reels.showAllEffectItems(),this.showEffectPrize(o,a,r,c,s,h))},this),S=cc.delayTime(.2);this.node.runAction(cc.sequence(g,S,_))},showEffectPrize:function(t,e,i,o,s,a){switch(t){case n.WIN_TYPE_NORMAL:case n.WIN_TYPE_BIG_WIN:this.Slot3.Slot3Effect.showWinNormal(s);break;case n.WIN_TYPE_SUPER_BIG_WIN:this.Slot3.Slot3Effect.showBigWin(s);break;case n.WIN_TYPE_JACKPOT:this.Slot3.Slot3Effect.showJackpot(s)}var r=this.getTimeEffect(t);t!==n.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot3.Slot3Effect.hideAll(),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()&&!e?this.Slot3UI.showSpinDisableButton():this.Slot3UI.showSpinButton(),i?((this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot3.Slot3Effect.showFreeSpin(),this.setSpinFree(!0),this.setNumberSpinFree(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.Slot3Effect.showBonus(a):this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()?this.Slot3.spin():(this.Slot3.Slot3State.setStop(),i&&(this.Slot3UI.showSpinFreeButton(o),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot3.spin()}.bind(this),2e3))),this.Slot3Reels.showEffectLine()}.bind(this),r)):(e&&this.Slot3Effect.showBonus(a),i&&(this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot3.Slot3Effect.showFreeSpin(),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot3.Slot3Effect.hideAll(),i?(this.Slot3.spin(),this.setSpinFree(!0),this.setNumberSpinFree(o),this.Slot3UI.showSpinFreeButton(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()?e||this.Slot3.spin():this.Slot3.Slot3State.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot3.Slot3Effect.hideAll(),this.Slot3.Slot3AutoSpinSetting.checkAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot3.spin()}.bind(this),1e3)):this.Slot3.Slot3State.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<n.SLOT3_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=o.getRandomInt(0,n.SLOT3_LIST_ICON.length-1);return n.SLOT3_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*n.SLOT3_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("Slot3Item").reset(),e.getComponent("Slot3Item").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},getTimeEffect:function(t){return t===n.WIN_TYPE_NORMAL||t===n.WIN_TYPE_ZERO||t===n.WIN_TYPE_BIG_WIN?1e3*n.TIME_SHOW_WIN_NORMAL:t===n.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_SHOW_BIGWIN:t===n.WIN_TYPE_JACKPOT?1e3*n.TIME_SHOW_JACKPOT:1e3*n.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot3Constant":"Slot3Constant"}],Slot3SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"53131dK/TBNKLVMlIS2Jk5R","Slot3SelectLine");var o=t("./items/Slot3SelectNumberLineItem"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node,listSelectNumLineItem:[o]},init:function(t){for(var e in this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3Label=t.Slot3Label,this.Slot3Lines=t.Slot3Lines,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.totalLineSelected=0,this.selectAllItem()},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.Slot3Label.initLast(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.Slot3Lines.showNumberLines(t)},showLines:function(t){this.Slot3Lines.showLines(t)},showLine:function(t){this.Slot3Lines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showEffect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line_id-1;this.listSelectNumLineItem[i].showEffect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest())this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest()?this.Slot3.showToast(n.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0)},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../helper/Message":"Message","./items/Slot3SelectNumberLineItem":"Slot3SelectNumberLineItem"}],Slot3SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"0bc81+t2Y5PDpKj636kBumi","Slot3SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node,spriteNormal:cc.SpriteFrame},init:function(t){this.Slot3=t,this.Slot3SelectLine=t.Slot3SelectLine},onLoad:function(){var t=this;this.selected=this.onSelectButtonNode.active,this.animation=this.onSelectButtonNode.getComponent(cc.Animation),this.onMouseEnter=function(){t.Slot3SelectLine.showLine(t.line)},this.onMouseLeave=function(){t.Slot3SelectLine.showLine(0)},cc.sys.isBrowser&&(this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){this.Slot3.Audio.playClick(),!this.Slot3.isCanChangeBet()||this.Slot3.isFreeSpin()||this.Slot3.isBonus()||this.Slot3.isTest()||(this.selected?this.unSelect():this.select())},select:function(){this.setSelected(!0),this.Slot3SelectLine.itemIsSelected(),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot3SelectLine.setLineItemUnSelected(),this.Slot3SelectLine.itemIsSelected(),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},showEffect:function(){this.animation.play()},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected},reset:function(){this.animation.stop(),this.onSelectButtonNode.getComponent(cc.Sprite).spriteFrame=this.spriteNormal,this.getSelected()?this.showSelect():this.showUnSelect()}}),cc._RF.pop()},{}],Slot3State:[function(t,e,i){"use strict";cc._RF.push(e,"b9978oRz6FHpIB7usSf2eDz","Slot3State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot3=t,this.Slot3UI=t.Slot3UI,this.Slot3SelectLine=t.Slot3SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinButton(),this.Slot3UI.showAutoSpinButton(),this.Slot3SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinDisableButton(),this.Slot3UI.showAutoSpinDisableButton(),this.Slot3SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinDisableButton(),this.Slot3UI.showAutoSpinDisableButton(),this.Slot3SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot3.isFreeSpin()&&!this.Slot3.isTest()?this.Slot3UI.showSpinFreeButton():this.Slot3UI.showSpinDisableButton(),this.Slot3UI.showStopAutoSpinButton(),this.Slot3SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot3.Slot3Reels.hideEffectItem(),this.Slot3.Slot3Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot3UI:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"d39ceXJQLBGhZKzEIfVLTZp","Slot3UI");var s=t("../../util/FormatUtil");cc.Class((n(o={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,xPrizeNode:cc.Node,jackpotNode:cc.Node,idSpinNode:cc.Node,autoSpinSettingFormNode:cc.Node,bonusResultFormNode:cc.Node,rankFormNode:cc.Node,bonusTableFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node},init:function(t){this.Slot3=t},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusResultFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormRank=this.rankFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormBonusTable=this.bonusTableFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0,this.idSpinNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0,this.idSpinNode.active=!1},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0}),n(o,"showX",function(){this.xPrizeNode.active=!0}),n(o,"hideX",function(){this.xPrizeNode.active=!1}),n(o,"showJackpot",function(){this.jackpotNode.active=!0}),n(o,"hideJackpot",function(){this.jackpotNode.active=!1}),n(o,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),n(o,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),n(o,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),n(o,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),n(o,"showRechargeFormNode",function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),n(o,"hideRechargeFormNode",function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}),n(o,"showRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.showDialog(t)}),n(o,"hideRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.hideDialog(t)}),n(o,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),n(o,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),n(o,"showBonusTableFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonusTable.showDialog(t)}),n(o,"hideHBonusTableFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonusTable.hideDialog(t)}),n(o,"showSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)}),n(o,"hideSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)}),n(o,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),n(o,"showProcessingNode",function(){this.processingNode.active=!0}),n(o,"hideProcessingNode",function(){this.processingNode.active=!1}),n(o,"showProcessingSceneNode",function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)}),n(o,"hideProcessingSceneNode",function(){this.processingSceneNode.active=!1}),o)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot3X:[function(t,e,i){"use strict";cc._RF.push(e,"bc772z5qPpJqaQ2eHsDGxpO","Slot3X"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot3=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot3:[function(t,e,i){"use strict";cc._RF.push(e,"57d01y+RL9NHLCfjiFSAhuj","Slot3");var o=t("../../base/BaseScene"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./Slot3UI"),r=t("./Slot3Header"),c=t("./Slot3Control"),h=t("./Slot3Label"),l=t("./Slot3Reels"),u=t("./Slot3Lines"),d=t("./Slot3Effect"),m=t("./Slot3Bonus"),p=t("./Slot3X"),f=t("./Slot3Constant"),g=t("./Slot3State"),_=t("./Slot3HandlerRequest"),S=t("./Slot3Form"),C=t("./Slot3SelectLine"),N=t("../../prefab/mini-game/item/MiniGameXPer"),E=t("./form/Slot3AutoSpinSetting"),T=t("./form/Slot3BonusResult"),I=t("./form/Slot3Rank2"),v=t("../../prefab/form/Setting"),y=t("../../prefab/form/LogOut"),B=t("../../prefab/form/Tutorial"),L=t("../../prefab/News"),R=t("../../prefab/Toast"),A=t("../../ui/dialog/DialogMessage"),M=t("../../ui/Processing"),b=t("../../ui/ProcessingScene"),P=t("../../object/Audio"),O=t("../../object/Music");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,Slot3UI:a,Slot3Header:r,Slot3Control:c,Slot3Label:h,Slot3SelectLine:C,Slot3Reels:l,Slot3Effect:d,Slot3Lines:u,Slot3Bonus:m,Slot3Form:S,Slot3X:p,MiniGameXPer:N,Slot3Rank2:I,Slot3AutoSpinSetting:E,Slot3BonusResult:T,Tutorial:B,Setting:v,LogOut:y,News:L,Toast:R,DialogMessage:A,Processing:M,ProcessingScene:b,Audio:P,Music:O},onLoad:function(){this._super(),this.setSceneName(n.SCENE_GAME_SLOT_3),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot3State=g,this.Slot3HandlerRequest=_,this.Slot3State.init(this),this.Slot3HandlerRequest.init(this),this.Slot3UI.init(this),this.Slot3Header.init(this),this.Slot3Control.init(this),this.Slot3Label.init(this),this.Slot3SelectLine.init(this),this.Slot3Reels.init(this),this.Slot3Effect.init(this),this.Slot3Lines.init(this),this.Slot3Bonus.init(this),this.Slot3Form.init(this),this.Slot3X.init(this),this.Slot3Rank2.init(this),this.Slot3AutoSpinSetting.init(this),this.Slot3BonusResult.init(this),this.Setting.init(this),this.LogOut.init(this),this.Tutorial.init(this),this.updateMoneyGold(),this.Slot3State.setStop(),this.onResponseBind=this.Slot3HandlerRequest.onResponse.bind(this.Slot3HandlerRequest),this.onUserVariablesUpdateBind=this.Slot3HandlerRequest.onUserVariablesUpdate.bind(this.Slot3HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.initDataBet(),this.Slot3UI.showContentGame(),this.Slot3SelectLine.selectAllItem(),this.Slot3UI.hideX(),this.Slot3Form.Slot3Rank.initData(this.dataRank),this.Slot3Form.Slot3JackpotForm.initData(this.dataRank)},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:5e7,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:5e7}},handleNews:function(t){this.News.addNews(t)},handleJackpot:function(t){var e=0,i=1;for(var o in this.info){var n=void 0;switch(this.info[o].spin_fee){case 100:this.info[o].jackpot=t.data[0],(n=t.data[3])&&(this.info[o].x_jackpot=n[0]);break;case 1e3:this.info[o].jackpot=t.data[1],n=t.data[3],t.data[3]&&(this.info[o].x_jackpot=n[1]);break;case 1e4:this.info[o].jackpot=t.data[2],(n=t.data[3])&&(this.info[o].x_jackpot=n[2])}this.info[o].spin_fee===this.bet&&(e=this.info[o].jackpot,i=this.info[o].x_jackpot)}this.isTest()||(this.Slot3Label.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){var e=t.data;this.setSendSpin(!1),this.Slot3State.isAutoSpin()||this.Slot3State.setSpinning(),this.initInfo(e),this.Slot3AutoSpinSetting.handleSpin(e),this.Slot3Label.handleSpin(e),this.Slot3Reels.handleSpin(e),this.Slot3Form.Slot3History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.total_prize_amount=t.total_prize_amount||t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.x_bonus=t.x_bonus,e.x_free=t.x_free},handleSpinDemo:function(t){var e=t.data;this.setSendSpin(!1),e.win_type===f.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.Slot3State.setSpinning(),this.Slot3Label.handleSpinDemo(e),this.Slot3Reels.handleSpinDemo(e)},handleSpinBonus:function(t){this.setSendSpin(!1),this.Slot3Bonus.handleSpin(t)},handleSpinBonusDemo:function(t){this.setSendSpin(!1),this.Slot3Bonus.handleSpinDemo(t)},handleSpinFail:function(t){this.setSendSpin(!1),this.showToast(t.msg),this.Slot3State.setStop(),this.Slot3AutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleGetTop:function(t){this.Slot3Rank2.initDataRank(t)},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg)},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.Slot3Form.Slot3Rank.initData(this.dataRank),this.Slot3Form.Slot3JackpotForm.initData(this.dataRank)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.Slot3Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.Slot3Chat.addChat(e)}else this.Slot3Chat.addChatFail(t.msg)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t),this.setFistBet(t)},initDataTest:function(){this.setIsTest(!0),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot3Reels.reset(),this.Slot3SelectLine.selectAllItem()},initTestData:function(){this.Slot3Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot3Label.setMoney(this.testInfo.money),this.Slot3Label.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingSceneNode(),this.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick()},spin:function(){if(this.line_player_choose=this.Slot3SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.isSendSpin()){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};this.isTest()?(this.sendRequest.send(f.SPIN_DEMO,t),this.testInfo.money-=2e4,this.Slot3Label.setMoney(this.testInfo.money)):this.sendRequest.send(f.SPIN,t),this.setSendSpin(!0)}}else this.showToast(s.SLOT3_NOT_SELECT_LINE),this.Slot3State.setStop(),this.Slot3AutoSpinSetting.stopAutoSpin(),this.Slot3AutoSpinSetting.onResetClick()},updateMoneyGold:function(){this.isTest()||this.Slot3Label.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();if(this.Slot3Label.setBet(t),this.initBetData(e),this.Slot3Label.setMoney(this.getMoney()),e){var i=e.x_jackpot?e.x_jackpot:1;this.MiniGameXPer.setXMiniGame(i)}},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_extra,o=this.Slot3SelectLine.getLineSelected().length;this.Slot3Label.setJackpot(e,!1),this.Slot3Label.initLast(o),i?this.Slot3UI.showSpinFreeButton(1):this.Slot3UI.showSpinButton()}},getBet:function(){return this.bet},setFistBet:function(t){this.fistBet=t},getFistBet:function(){return this.fistBet},isAutoSpin:function(){return this.Slot3State.isAutoSpin()&&this.Slot3AutoSpinSetting.checkAutoSpin()},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot3Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee==this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot3State.isStop()},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t){this.Slot3UI.showBonusResultForm(),this.Slot3BonusResult.setMoney(t)},hideBonusResult:function(){this.Slot3UI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.Slot3UI.showDialogMessage(t,e)},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},hideDialogMessage:function(){this.Slot3UI.hideDialogMessage()},showProcessingNode:function(){this.Slot3UI.showProcessingNode()},hideProcessingNode:function(){this.Slot3UI.hideProcessingNode()},showProcessingSceneNode:function(){this.Slot3UI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.Slot3UI.hideProcessingSceneNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:4e3,display_slot_data:["D","F","A","E","E","E","A","F","D","A","E","E","C","A","E"],is_bonus:!0,is_free:!1,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:400},t.list_bonus_prize[1]={line:1,prize:400},t.list_bonus_prize[2]={line:2,prize:0},t.list_bonus_prize[3]={line:1,prize:400},t.list_bonus_prize[4]={line:1,prize:400},t.list_bonus_prize[5]={line:1,prize:400},t.list_bonus_prize[6]={line:1,prize:400},t.list_bonus_prize[7]={line:1,prize:400},t.list_bonus_prize[8]={line:0,prize:1},t.list_bonus_prize[9]={line:1,prize:400},t.list_bonus_prize[10]={line:1,prize:400},t.list_line_bonus=[{line:4,prize:1}],t.list_line_free=[],t.list_line_prize=[],t.list_line_prize[0]={line:3,prize:200},t.list_line_prize[1]={line:7,prize:200},t.list_line_prize[2]={line:9,prize:200},t.list_line_prize[3]={line:13,prize:200},t.list_line_prize[4]={line:19,prize:200},t.money_type=0,t.number_key_start_bonus=1,t.remain_free=0,t.spin_id=314,t.win_prize=1800,t.win_type=1,t},dataTestFree:function(){var t={bonus_prize:0,display_slot_data:["G","C","F","G","D","F","E","D","G","E","C","F","G","D","C"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[],list_line_bonus:[],list_line_free:[],list_line_prize:[{line:1,prize:200}],money_type:0,number_key_start_bonus:0,remain_free:1,spin_id:166,win_prize:0,win_type:0};return t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","./Slot3Bonus":"Slot3Bonus","./Slot3Constant":"Slot3Constant","./Slot3Control":"Slot3Control","./Slot3Effect":"Slot3Effect","./Slot3Form":"Slot3Form","./Slot3HandlerRequest":"Slot3HandlerRequest","./Slot3Header":"Slot3Header","./Slot3Label":"Slot3Label","./Slot3Lines":"Slot3Lines","./Slot3Reels":"Slot3Reels","./Slot3SelectLine":"Slot3SelectLine","./Slot3State":"Slot3State","./Slot3UI":"Slot3UI","./Slot3X":"Slot3X","./form/Slot3AutoSpinSetting":"Slot3AutoSpinSetting","./form/Slot3BonusResult":"Slot3BonusResult","./form/Slot3Rank2":"Slot3Rank2"}],Slot4AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"595e9GxlJFOvrRRTpwGMuoU","Slot4AutoSpinSetting");var o=t("../Slot4Constant"),n=t("../../../util/FormatUtil");t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot4.DialogMessage.node.active&&!this.Slot4.Processing.node.active},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=o.SLOT4_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(n.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(n.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(n.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot4.Slot4State.setAutoSpin(),this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin),this.Slot4.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot4.Slot4State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot4.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===o.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,o=!this.stopGameMaxWin||this.lastWin<this.maxWin,n=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&o&&n},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../Slot4Constant":"Slot4Constant"}],Slot4BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"51825v/pIlPVJ/XUEx0qmoq","Slot4BonusItem");t("../../util/FormatUtil");var o=t("../../util/RandomUtil"),n=t("../../helper/Config"),s=t("../../util/BrowserUtil"),a=t("../../helper/Message");t("../../scene/game-slot-4/Slot4Constant");cc.Class({extends:cc.Component,properties:{cardSprite:cc.Sprite,cardsNormalSpriteFrame:[cc.SpriteFrame],cardFaceSpriteFrame:cc.SpriteFrame,cardsJokerSpriteFrame:[cc.SpriteFrame],changeBalancePrefab:cc.Prefab,changeBalanceNode:cc.Node},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Bonus=t.Slot4Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.initScaleX=this.cardSprite.node.scaleX,this.initScaleY=this.cardSprite.node.scaleY,this.onMouseEnter=function(){t.isOpen()||s.showCursorPointer()},this.onMouseLeave=function(){s.showCursorAuto()},cc.x=this},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Slot4.Slot4State.isAutoSpin()?this.Slot4.showToast(a.SLOT2_AUTOSPIN_NOT_CHANGE):this.isClicked()||this.Slot4Bonus.isStateStop()||(this.setClicked(!0),this.Slot4Bonus.setStateStop(!0),this.Slot4Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.isClicked()||this.Slot4Bonus.isStateStop()||(this.setClicked(!0),this.Slot4Bonus.setStateStop(!0),this.Slot4Bonus.onItemClick(this))},showKey:function(){this.setOpen(!0),this.revealWithAnimationFlip(!0)},showOpenMiniGame:function(){this.setOpen(!0),this.revealWithAnimationFlip(!0)},showMoneyMiniGame:function(t){this.setOpen(!0)},showMoney:function(t,e){this.setOpen(!0),e?this.revealWithAnimationFlip(!0,t):this.revealWithAnimationFlip(!1,t)},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},reveal:function(t,e){if(t){var i=e?this.cardsJokerSpriteFrame[o.getRandomInt(0,this.cardsJokerSpriteFrame.length-1)]:this.cardsNormalSpriteFrame[o.getRandomInt(0,this.cardsNormalSpriteFrame.length-1)];this.cardSprite.spriteFrame=i}else this.cardSprite.spriteFrame=this.cardFaceSpriteFrame},revealWithAnimationFlip:function(t,e){this.cardSprite.node.stopAllActions();var i=this.node.scaleX,o=this.node.scaleY;this.reveal(!1),this.cardSprite.node.runAction(cc.sequence(cc.scaleTo(n.SLOT_BONUS_TIME_FLIP_CARD/2,0,o),cc.callFunc(function(){this.reveal(!0,t),this.showChangeBalance(e)},this),cc.scaleTo(n.SLOT_BONUS_TIME_FLIP_CARD/2,i,o)))},showChangeBalance:function(t){if(t>0){this.changeBalanceNode.removeAllChildren(!0);var e=cc.instantiate(this.changeBalancePrefab);e.setPosition(0,0),e.parent=this.changeBalanceNode,e.scale=1.5,e.getComponent("ChangeBalance").showChangeBalance(t)}},reset:function(){this.cardSprite.node.stopAllActions(),this.cardSprite.node.scaleX=this.initScaleX,this.cardSprite.node.scaleY=this.initScaleY,this.reveal(!1),this.setOpen(!1),this.setClicked(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../scene/game-slot-4/Slot4Constant":"Slot4Constant","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil"}],Slot4BonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"5c00f/M0rxLcYW9InM+11b+","Slot4BonusResult");var o=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{moneyJackpotItem:o},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){this.moneyJackpotItem.setMoneyWithoutAnimation(100),cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot4.DialogMessage.node.active&&!this.Slot4.Processing.node.active},setMoney:function(t){this.moneyJackpotItem.setMoney(t)}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],Slot4Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"76f63ub6flCSYS0+zVJS+Td","Slot4Bonus");t("../../util/FormatUtil");var o=t("../../util/RandomUtil"),n=(t("../../util/BrowserUtil"),t("../../helper/Config"),t("../../prefab/mini-game/item/JackpotItem"),t("../../prefab/slot-4/Slot4BonusItem")),s=t("./Slot4Constant"),a=t("../../prefab/slot-4/Slot4MiniGameItem");cc.Class({extends:cc.Component,properties:{remainLabel:cc.Label,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,slot4BonusItem:[n],slot4MiniGameItem:[a]},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4X=t.Slot4X;for(var e=0;e<this.slot4BonusItem.length;e++)this.slot4BonusItem[e].init(t);for(var i=0;i<this.slot4MiniGameItem.length;i++)this.slot4MiniGameItem[i].init(t)},onLoad:function(){this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.x_bonus=this.data.number_key_start_bonus,this.remainBonus=10,this.Slot4X.setXPrize(this.x_bonus),this.setRemainBonus(this.remainBonus))},onEnable:function(){this.reset(),this.initContent(),this.Slot4UI.showX(),this.Slot4UI.hideJackpot(),this.Slot4.Slot4State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.Slot4UI.showJackpot(),this.Slot4UI.hideX(),this.data.is_free?this.Slot4.spin():this.Slot4.Slot4State.isAutoSpin()?this.Slot4.spin():this.Slot4.Slot4State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.line,o=e.prize;this.openBonusItem(t,i,o)}else console.log("THOI TH\xd4I. M\u1ede H\u1ebeT C\xd2N \u0110\xc2U")},openBonusItem:function(t,e,i){switch(e){case s.BONUS_KEY:this.openItemBonusKey(t);break;case s.BONUS_MONEY:this.openItemBonusMoney(t,i);break;case s.BONUS_MINIGAME:this.openItemBonusMoney(t,i,!0)}},openItemBonusKey:function(t,e){this.x_bonus++,t.showMoney("+1",!0),this.setRemainBonus(this.remainBonus),this.Slot4X.setXPrize(this.x_bonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMoney:function(t,e,i){this.remainBonus--,t.showMoney(e,i),this.setRemainBonus(this.remainBonus),this.setStateStop(!1),this.checkFinishMiniGameBonus()},openItemBonusMiniGame:function(t,e){this.remainBonus--,this.mini_game_bonus_prize=e,this.bonusItemMiniGame=t,t.showOpenMiniGame(),this.setRemainBonus(this.remainBonus),this.showMiniGame(),this.setStateStop(!1),this.Slot4.Slot4State.isAutoSpin()&&(clearInterval(this.intervalAutoOpenMiniGameItem),this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClickIsAutoSpin(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),2e3))},openItemMiniGame:function(t){this.bonusItemMiniGame&&this.bonusItemMiniGame.showMoneyMiniGame(this.mini_game_bonus_prize),t.openItem(this.mini_game_bonus_prize,!0),this.openMiniGameItemByMultipBet(10),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(15),this.openMiniGameItemByMultipBet(20),this.setStateStop(!1),this.showCloseMiniGame(),this.checkFinishMiniGameBonus()},openMiniGameItemByMultipBet:function(t){var e=t*this.Slot4.getBet()*this.x_bonus;this.getItemMiniGameNotOpen().openItem(e)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.slot4MiniGameItem)this.slot4MiniGameItem[e].isOpen()||this.slot4MiniGameItem[e].isClicked()||t.push(this.slot4MiniGameItem[e]);return t[o.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.slot4BonusItem)this.slot4BonusItem[e].isOpen()||this.slot4BonusItem[e].isClicked()||t.push(this.slot4BonusItem[e]);return t[o.getRandomInt(0,t.length-1)]},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setRemainBonus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.remainLabel.string=t},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot4.showBonusResult(this.data.bonus_prize),this.Slot4.Slot4Label.setLastMoneyWin(this.data.bonus_prize,!0),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot4UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3500)):this.Slot4.Slot4State.isAutoSpin()&&(this.minigameBonusNode.active?(clearInterval(this.intervalHideMiniGameContentNode),this.intervalHideMiniGameContentNode=setInterval(function(){this.hideMiniGame(),this.autoOpenBox(),clearInterval(this.intervalHideMiniGameContentNode)}.bind(this),1e3)):this.autoOpenBox())},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},reset:function(){for(var t in this.setStateStop(!1),this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.Slot4X.setXPrize(0),this.hideCloseMiniGame(),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalHideMiniGameContentNode),this.slot4BonusItem)this.slot4BonusItem[t].reset();for(var e in this.slot4MiniGameItem)this.slot4MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../prefab/slot-4/Slot4BonusItem":"Slot4BonusItem","../../prefab/slot-4/Slot4MiniGameItem":"Slot4MiniGameItem","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot4Constant":"Slot4Constant"}],Slot4Constant:[function(t,e,i){"use strict";cc._RF.push(e,"a50aefhdxFGBagOTOAhZ4dH","Slot4Constant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1,SLOT4_DISTANCE_TWO_ITEMS:130,SLOT4_SPEED_SPIN_CARD:1500,SLOT4_DELAY_SPIN:2e3,SLOT4_NUMBER_ITEM_IN_REEL:3,SLOT4_TOTAL_ITEM_IN_REEL:15,SLOT4_DELAY_SHOW_MONEY_PRIZE:1e3,SLOT4_TIME_DELAY_FINISH:3e3,SLOT4_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT4_LIST_ICON:["A","B","C","D","E","F","G"],NUM_IN_HISTORY:30,LIST_INDEX_NUMBER_IN_LINE:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,8,4,5],[11,12,8,14,15],[1,12,3,14,5],[11,2,13,4,15],[6,2,13,4,10],[11,7,3,9,15],[1,7,13,9,5],[6,12,8,4,10],[6,2,8,14,10],[11,7,8,9,15],[1,7,8,9,5],[6,12,13,14,10],[6,2,3,4,10],[11,12,8,4,5],[1,2,8,14,15]],TIME_SHOW_JACKPOT:5,TIME_SHOW_FREESPIN:3.5,TIME_SHOW_BONUS:4,TIME_SHOW_BIGWIN:4,TIME_SHOW_WIN_NORMAL:2.5},cc._RF.pop()},{}],Slot4Control:[function(t,e,i){"use strict";cc._RF.push(e,"50b78s6sHxO076CEAnwbLoO","Slot4Control");var o=t("../../helper/Message"),n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onSpinClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isBonus()&&this.Slot4.isCanChangeBet()&&this.Slot4.spin()},onAutoSpinClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET):this.Slot4UI.showAutoSpinSettingFormNode()},onStopAutoSpinClick:function(){this.Slot4.Audio.playClick(),this.Slot4.Slot4State.setStop(),this.Slot4.setSendSpin(!1),this.Slot4.Slot4AutoSpinSetting.stopAutoSpin()},onPlayClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(o.SLOT_NOT_CHANGE_SPIN):(this.Slot4UI.showTestButton(),this.Slot4.initDataBet(this.Slot4.getFistBet()))},onTestClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(o.SLOT_NOT_TEST):(this.Slot4UI.showPlayButton(),this.Slot4.initDataTest())},onAddClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot4.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot4.setFistBet(t[e]),this.Slot4.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin())this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot4.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot4.setFistBet(t[e]),this.Slot4.setBet(t[e]);break}},onSelectLineClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isTest()||this.Slot4.isBonus()||this.Slot4.isFreeSpin()?this.Slot4.showToast(o.SLOT_NOT_CHANGE_BET):this.Slot4UI.showSelectLineFormNode()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message"}],Slot4Effect:[function(t,e,i){"use strict";cc._RF.push(e,"bdb8f/eEpBEe7ZzAZkJL8qJ","Slot4Effect");var o=t("../../prefab/mini-game/item/JackpotItem"),n=t("./Slot4Constant");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,bonusEffectNode:cc.Node,freeSpinEffectNode:cc.Node,bigwinEffectNode:cc.Node,jackpotEffectNode:cc.Node,winNormalJackpotItem:o,moneyLabelJackpotItem:o,jackpotLabelJackpotItem:o,bonusSkeleton:sp.Skeleton,freeSpinSkeletion:sp.Skeleton,bigwinSkeleton:sp.Skeleton,jackpotSkeleton:sp.Skeleton},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onDestroy:function(){},showWinNormal:function(t){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.node.active=!0,this.winNormalJackpotItem.setMoney(t)},showBigWin:function(t){this.hideAll(),this.bigwinEffectNode.active=!0,this.bigwinSkeleton.setAnimation(0,"thang lon",!0),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moneyLabelJackpotItem.node.active=!0,this.moneyLabelJackpotItem.setMoney(t)},this)))},showJackpot:function(t){this.hideAll(),this.jackpotEffectNode.active=!0,this.jackpotSkeleton.setAnimation(0,"no hu",!0),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.jackpotLabelJackpotItem.node.active=!0,this.jackpotLabelJackpotItem.setMoney(t)},this)))},showBonus:function(t){this.hideAll(),this.bonusEffectNode.active=!0,this.bonusSkeleton.setAnimation(0,"bonus",!0),this.node.runAction(cc.sequence(cc.delayTime(n.TIME_SHOW_BONUS),cc.callFunc(function(){this.hideAll(),this.Slot4.Slot4Bonus.initData(t),this.Slot4UI.showBonus()},this)))},showFreeSpin:function(){this.hideAll(),this.freeSpinEffectNode.active=!0,this.freeSpinSkeletion.setAnimation(0,"quay mien phi",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(n.TIME_SHOW_FREESPIN),cc.callFunc(function(){},this)))},hideAll:function(){this.winNormalNode.active=!1,this.bonusEffectNode.active=!1,this.freeSpinEffectNode.active=!1,this.bigwinEffectNode.active=!1,this.jackpotEffectNode.active=!1,this.jackpotLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.node.active=!1,this.moneyLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.setMoneyWithoutAnimation(100),this.jackpotLabelJackpotItem.setMoneyWithoutAnimation(100),this.moneyLabelJackpotItem.setMoneyWithoutAnimation(100),this.bonusSkeleton.clearTrack(0),this.freeSpinSkeletion.clearTrack(0),this.bigwinSkeleton.clearTrack(0),this.jackpotSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem","./Slot4Constant":"Slot4Constant"}],Slot4Form:[function(t,e,i){"use strict";cc._RF.push(e,"16444Bj/MZCRY9+40KOMAyq","Slot4Form");var o=t("./Slot4History"),n=t("./Slot4Rank");cc.Class({extends:cc.Component,properties:{historyOnButtonNode:cc.Node,historyOffButtonNode:cc.Node,rankOnButtonNode:cc.Node,rankOffButtonNode:cc.Node,historyNode:cc.Node,rankNode:cc.Node,Slot4History:o,Slot4Rank:n},init:function(t){this.Slot4=t,this.Slot4History.init(t),this.Slot4Rank.init(t)},onLoad:function(){},onHistoryClick:function(){this.hideAllButton(),this.hideAllContent(),this.historyOnButtonNode.active=!0,this.historyOffButtonNode.active=!1,this.historyNode.active=!0},onRankClick:function(){this.hideAllButton(),this.hideAllContent(),this.rankOnButtonNode.active=!0,this.rankOffButtonNode.active=!1,this.rankNode.active=!0},hideAllButton:function(){this.historyOnButtonNode.active=!1,this.rankOnButtonNode.active=!1,this.historyOffButtonNode.active=!0,this.rankOffButtonNode.active=!0},hideAllContent:function(){this.historyNode.active=!1,this.rankNode.active=!1}}),cc._RF.pop()},{"./Slot4History":"Slot4History","./Slot4Rank":"Slot4Rank"}],Slot4HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"aeb791R+GROL70mC77MdAqZ","Slot4HandlerRequest");var o=t("../../helper/Constant"),n=(t("../../helper/Message"),t("./Slot4Constant")),s={init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case o.MONEY:this.Slot4.updateMoneyGold();break;case o.GOLD:}},onResponse:function(t){var e=t.params,i=t.cmd;switch("MINIGAME"!==i&&o.NEWS,i){case n.JACKPOT:this.Slot4.handleJackpot(e);break;case n.SPIN:this.Slot4.handleSpin(e);break;case n.SPIN_DEMO:this.Slot4.handleSpinDemo(e);break;case n.SPIN_BONUS:case n.SPIN_BONUS_DEMO:break;case n.SPIN_FAIL:this.Slot4.handleSpinFail(e);break;case n.UPDATE_BIGWIN:this.Slot4.handleUpdateBigwin(e);break;case n.GET_TOP:break;case o.MINIGAME_REQUEST:this.Slot4.MiniGame&&this.Slot4.MiniGame.handleRequest(e);break;case o.REQUEST_RECHARGE_GOLD:this.Slot4.handleRechargeGold(e);break;case o.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot4.handleAlert(e);break;case o.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot4.handleNewMessage(e);break;case o.REQUEST_ACHIVEMENTED_QUEST:this.Slot4.handleAchivementedQuest(e);break;case o.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot4.handlePlusLuckyWheelFree(e);break;case o.REQUEST_CHAT_GET_CHAT:case o.REQUEST_CHAT_SEND_CHAT:break;case o.UPDATE_MINIGAME_FREE:this.Slot4.MiniGame&&this.Slot4.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot4Constant":"Slot4Constant"}],Slot4Header:[function(t,e,i){"use strict";cc._RF.push(e,"1c027M32GFCvYDjAUv4IsZj","Slot4Header");var o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onEnable:function(){},onPrizeClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showPrizeFormNode()},onBackClick:function(){this.Slot4.Audio.playClick(),this.Slot4.isCanChangeBet()?this.Slot4.onBackClick():this.Slot4.showToast(o.SLOT_NOT_CHANGE_SPIN)},onShopClick:function(){this.Slot4.Audio.playClick()},onRankClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showRankHistoryFormNode(),this.Slot4.Slot4Form.onRankClick()},onHistoryClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showRankHistoryFormNode(),this.Slot4.Slot4Form.onHistoryClick()},onTutorialClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showTutorialFormNode()},onSettingClick:function(){this.Slot4.Audio.playClick(),this.Slot4UI.showSettingFormNode()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot4HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"3cb7aHcRR9IOLEfemJM7CMr","Slot4HistoryItem");var o=t("../../util/FormatUtil");t("../../helper/Message");cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label},onLoad:function(){},init:function(t){if(t){var e=o.numberWithCommas(t.total_prize_amount||t.win_prize),i=o.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=e,this.betLabel.string=i}},getMessage:function(){return this.richText.string}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot4History:[function(t,e,i){"use strict";cc._RF.push(e,"11ea8wpd5tEWqhY1HcGAF+I","Slot4History");var o=t("../../../helper/Message"),n=(t("../../../helper/Config"),t("../Slot4Constant")),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{historyContentScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onEnable:function(){this.initData()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeShowHistory=null)},initData:function(){if(this.listData&&0!==this.listData.length){this.showListNode(),this.listData=s.sortDataTimeByTime(this.listData);for(var t=0,e=this.listData.length;t<e;t++){var i=this.listItem[t];i||(i=this.instanceItem(this.listData[t])),i.getComponent("Slot4HistoryItem").init(this.listData[t])}}else this.loadData()},handleSpin:function(t){this.initFirst();var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.win_prize,e.spin_fee=this.Slot4.getBet(),e.total_bet_amount=this.Slot4.Slot4SelectLine.getLineSelected().length*this.Slot4.getBet(),this.listData.length>n.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeShowHistory),this.timeShowHistory=setTimeout(function(){if(this.listData.length>n.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,i=0,o=this.listItem.length;i<o;i++)this.listItem[i].getComponent("Slot4HistoryItem").init(this.listData[t-i])}else this.instanceItem(e);clearTimeout(this.timeShowHistory)}.bind(this),n.SLOT4_TIME_DELAY_FINISH))},loadData:function(){var t=this;this.initFirst(),this.showLoadingNode(),this.historyContentScrollView.content.removeAllChildren(!0);var e={token:this.Slot4.getToken(),user_id:this.Slot4.getUserId()};this.Slot4.api.getHistorySlot4(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot4.showDialogMessage(o.HISTORY_TITLE,e.msg)})},initContent:function(t){this.showListNode();var e=t[0],i=0;i=e.length>n.NUM_IN_HISTORY?n.NUM_IN_HISTORY:e.length;for(var o=0;o<i;o++)this.instanceItem(e[o]),this.listData.push(e[o])},instanceItem:function(t){var e=cc.instantiate(this.historyItemPrefab);return e.parent=this.historyContentScrollView.content,e.getComponent("Slot4HistoryItem").init(t),this.listItem.push(e),e},showListNode:function(){this.historyContentScrollView.node.active=!0,this.hideLoadingNode()},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot4Constant":"Slot4Constant"}],Slot4Item:[function(t,e,i){"use strict";cc._RF.push(e,"b6286PEnOdCKKNwWB9c+ERM","Slot4Item"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node,effectNode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"F":this.iconFNode.active=!0;break;case"G":this.iconGNode.active=!0}},getIndex:function(){return this.index},showEffect:function(){this.effectNode.active=!0},hideEffect:function(){this.effectNode.active=!1},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1,this.effectNode.active=!1}}),cc._RF.pop()},{}],Slot4Label:[function(t,e,i){"use strict";cc._RF.push(e,"55b30GAWaVIJKuCgtgn3Mxe","Slot4Label");t("../../helper/Message");var o=t("../../util/FormatUtil"),n=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpotJackpotItem:n,spinIDLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:n,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initTotalNumberLine:function(t){var e=this.Slot4.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.setLastMoneyWin(e)}.bind(this),3e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot4.getTestInfo().money+=e,this.setLastMoneyWin(e),this.setMoney(this.Slot4.getTestInfo().money)}.bind(this),3e3)},setId:function(t){this.spinIDLabel.string="#"+t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.jackpotJackpotItem.setMoney(t):this.jackpotJackpotItem.setMoneyWithoutAnimation(t)},setBet:function(t){this.betLabel.string=o.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=o.numberWithCommas(t)},setMoney:function(t){this.moneyLabel.setMoney(t)},setLastMoneyWin:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.lastMoneyWinLabel.string=o.numberWithCommas(this.last_money_win+t):(this.last_money_win=t,this.lastMoneyWinLabel.string=o.numberWithCommas(t))},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t}}),cc._RF.pop()},{"../../helper/Message":"Message","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],Slot4Lines:[function(t,e,i){"use strict";cc._RF.push(e,"a380fPEuSJE94v0fCc8jEmd","Slot4Lines");t("../../util/FormatUtil");var o=t("./items/Slot4NumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[o],listLine:[cc.Node]},init:function(t){for(var e in this.Slot4=t,this.Slot4=t.Slot4UI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./items/Slot4NumberLineItem":"Slot4NumberLineItem"}],Slot4MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"d993d1jcy1LMbgS7lcYF6tn","Slot4MiniGameItem");var o=t("../../util/BrowserUtil"),n=t("../../util/FormatUtil"),s=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{defaultSpriteNode:cc.Node,openSpriteNode:cc.Node,moneyLabel:cc.Label,moneyNonSelectLabel:cc.Label},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Bonus=t.Slot4Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.hideTimeout=null,this.onMouseEnter=function(){t.isOpen()||o.showCursorPointer()},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClickIsAutoSpin:function(){this.isClicked()||(this.setClicked(!0),this.Slot4Bonus.openItemMiniGame(this))},onClick:function(){this.isClicked()||this.Slot4.Slot4State.isAutoSpin()||(this.setClicked(!0),this.Slot4Bonus.openItemMiniGame(this))},openItem:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOpen(!0),this.setClicked(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.showOpenItem(),e?(this.moneyLabel.node.active=!0,this.moneyLabel.string=n.numberWithCommas(t)):(this.moneyNonSelectLabel.node.active=!0,this.moneyNonSelectLabel.string=n.numberWithCommas(t))}.bind(this),500*s.SLOT3_TIME_OPEN_EGGE)},setClicked:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_open=t},isOpen:function(){return this.is_open},showOpenItem:function(){this.defaultSpriteNode.active=!1,this.openSpriteNode.active=!0},reset:function(){clearTimeout(this.hideTimeout),this.setClicked(!1),this.setOpen(!1),this.moneyLabel.node.active=!1,this.moneyNonSelectLabel.node.active=!1,this.openSpriteNode.active=!1,this.defaultSpriteNode.active=!0}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],Slot4NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"19523hwc2dPdpz8Knzl0LYI","Slot4NumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLineLabelOff:cc.Label,numberLineLabelOn:cc.Label},init:function(t){this.Slot4=t,this.Slot4Lines=t.Slot4Lines,this.line=this.numberLineLabelOn.string},onLoad:function(){var t=this;this.hideNumberLine(),this.onMouseEnter=function(){t.Slot4Lines.showLine(t.line)},this.onMouseLeave=function(){t.Slot4Lines.showLine(0)},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},showNumberLine:function(){this.numberLineLabelOn.node.active=!0,this.numberLineLabelOff.node.active=!1},hideNumberLine:function(){this.numberLineLabelOn.node.active=!1,this.numberLineLabelOff.node.active=!1}}),cc._RF.pop()},{}],Slot4RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"8f7b6OmQftHfpnMO/D4Rhhr","Slot4RankItem");var o=t("../../util/FormatUtil"),n=t("../../util/Util");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,timeLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){t&&(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.nickNameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.balanceLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=o.getDateByTimeStamp(t.created_at))}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],Slot4Rank:[function(t,e,i){"use strict";cc._RF.push(e,"04d9eTdNG1H1J6N+6hk6Cuj","Slot4Rank");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{rankContentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab},init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI},onLoad:function(){},onEnable:function(){this.initFirst(),this.initRank()},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.rankItemPrefab);this.pool.put(e)}this.listChild=[]}},initData:function(t){t&&(this.data=t)},initRank:function(){if(this.data){this.showListRankNode(),this.putAllChipToPool();for(var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=0,i=(t=o.filterSameItemSlot(t)).length;e<i;e++){var n=this.instanceItem(t[e],e);n.parent=this.rankContentScrollView.content,this.listChild.push(n)}}},instanceItem:function(t,e){var i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.rankItemPrefab)),i.getComponent("Slot4RankItem").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.rankContentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},showListRankNode:function(){this.rankContentScrollView.node.active=!0}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],Slot4Reels:[function(t,e,i){"use strict";cc._RF.push(e,"af944zUfZJEvo0YXxI96wzY","Slot4Reels");t("../../util/RandomUtil"),t("../../helper/Config");var o=t("../../util/FormatUtil"),n=t("./Slot4Reel"),s=t("./Slot4Constant");cc.Class({extends:cc.Component,properties:{slotReels:[n],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Lines=t.Slot4Lines,this.Slot4SelectLine=t.Slot4SelectLine,this.Slot4Effect=t.Slot4Effect,this.Slot4X=t.Slot4X,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=(t.list_bonus_prize,t.remain_free),h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,o,i,n,c,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_bonus,r=t.list_line_free,c=t.remain_free,h=t.win_type;this.listDataPrize=s.concat(a),this.listDataPrize=this.listDataPrize.concat(r),this.spinReels(e,h,o,i,n,c,t)},spinReels:function(t,e,i,o,n,a,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,s.SLOT4_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,s.SLOT4_TOTAL_ITEM_IN_REEL+2),this.slotReels[2].spin(l,s.SLOT4_TOTAL_ITEM_IN_REEL+4),this.slotReels[3].spin(u,s.SLOT4_TOTAL_ITEM_IN_REEL+6),this.slotReels[4].spin(d,s.SLOT4_TOTAL_ITEM_IN_REEL+8,!0,e,i,o,n,a,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.Slot4Lines.showLines(this.listDataPrize);for(var t=this.getIndexItemByLineId(this.listDataPrize),e=0,i=t.length;e<i;e++){var o=t[e]-1;this.showEffectItem(this.listItemNodeSameDataDisplay[o])}}},showEffectItem:function(t){var e=t.parent.convertToWorldSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),o=cc.instantiate(this.itemPrefab);o.getComponent("Slot4Item").init(t.getComponent("Slot4Item").getIndex()),o.getComponent("Slot4Item").showEffect(),o.setPosition(i),o.parent=this.listItemEffectNode,this.itemEffectNode.active=!0},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize;this.Slot4Lines.showLine(t),this.Slot4Lines.showMoney(e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=s.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,o=e.length;i<o;i++){var n=this.listItemNodeSameDataDisplay[e[i]-1];n&&n.getComponent("Slot4Item").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("Slot4Item").hideEffect()}},getItemByCol:function(t,e){for(var i=[],o=0;o<s.SLOT4_NUMBER_ITEM_IN_REEL;o++){var n=this.slotReels.length*o+e;i.push(t[n])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var n=t[i].line-1,a=s.LIST_INDEX_NUMBER_IN_LINE[n];e=e.concat(a)}return o.deduplicate(e)},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot4Lines.reset()},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot4Constant":"Slot4Constant","./Slot4Reel":"Slot4Reel"}],Slot4Reel:[function(t,e,i){"use strict";cc._RF.push(e,"8fee6pSU6ZILoMa+0kS56N3","Slot4Reel");var o=t("../../util/RandomUtil"),n=(t("../../helper/Config"),t("./Slot4Constant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab},init:function(t,e){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Reels=t.Slot4Reels,this.Slot4Lines=t.Slot4Lines,this.Slot4X=t.Slot4X,this.Slot4Effect=t.Slot4Effect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[])},spin:function(t,e,i,o,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=this.instanceItem(u);m.setPosition(0,(l+1)*n.SLOT4_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.Slot4Reels.setItemListPrizeByIndex(m,d)}var p=(e-1)*n.SLOT4_DISTANCE_TWO_ITEMS,f=p/n.SLOT4_SPEED_SPIN_CARD,g=cc.moveTo(f,this.node.x,-p).easing(cc.easeElasticInOut(1.5)),_=cc.callFunc(function(){i&&(this.Slot4.Slot4State.isAutoSpin()||this.Slot4.Slot4State.setFinish(),this.Slot4Reels.showAllEffectItems(),this.showEffectPrize(o,a,r,c,s,h))},this),S=cc.delayTime(.2);this.node.runAction(cc.sequence(g,S,_))},showEffectPrize:function(t,e,i,o,s,a){switch(t){case n.WIN_TYPE_NORMAL:case n.WIN_TYPE_BIG_WIN:this.Slot4.Slot4Effect.showWinNormal(s);break;case n.WIN_TYPE_SUPER_BIG_WIN:this.Slot4.Slot4Effect.showBigWin(s);break;case n.WIN_TYPE_JACKPOT:this.Slot4.Slot4Effect.showJackpot(s)}var r=this.getTimeEffect(t);t!==n.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot4.Slot4Effect.hideAll(),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()&&!e?this.Slot4UI.showSpinDisableButton():this.Slot4UI.showSpinButton(),i?((this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot4.Slot4Effect.showFreeSpin(),this.setSpinFree(!0),this.setNumberSpinFree(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.Slot4Effect.showBonus(a):this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()?this.Slot4.spin():(this.Slot4.Slot4State.setStop(),i&&(this.Slot4UI.showSpinFreeButton(o),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot4.Slot4Effect.hideAll(),this.Slot4.spin()}.bind(this),2e3))),this.Slot4Reels.showEffectLine()}.bind(this),r)):(e&&this.Slot4Effect.showBonus(a),i&&(this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot4.Slot4Effect.showFreeSpin(),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot4.Slot4Effect.hideAll(),i?(this.Slot4.spin(),this.setSpinFree(!0),this.setNumberSpinFree(o),this.Slot4UI.showSpinFreeButton(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()?e||this.Slot4.spin():this.Slot4.Slot4State.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot4.Slot4Effect.hideAll(),this.Slot4.Slot4AutoSpinSetting.checkAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot4.spin()}.bind(this),1e3)):this.Slot4.Slot4State.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<n.SLOT4_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=o.getRandomInt(0,n.SLOT4_LIST_ICON.length-1);return n.SLOT4_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e]);i.setPosition(0,(1-e)*n.SLOT4_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.itemPrefab)),e.getComponent("Slot4Item").reset(),e.getComponent("Slot4Item").init(t),e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},getTimeEffect:function(t){return t===n.WIN_TYPE_NORMAL||t===n.WIN_TYPE_ZERO||t===n.WIN_TYPE_BIG_WIN?1e3*n.TIME_SHOW_WIN_NORMAL:t===n.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_SHOW_BIGWIN:t===n.WIN_TYPE_JACKPOT?1e3*n.TIME_SHOW_JACKPOT:1e3*n.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot4Constant":"Slot4Constant"}],Slot4SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"90e9eoEnktKqIrjlyRvN8Qk","Slot4SelectLine");var o=t("../items/Slot4SelectNumberLineItem"),n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node,listSelectNumLineItem:[o]},init:function(t){for(var e in this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4Label=t.Slot4Label,this.Slot4Lines=t.Slot4Lines,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.totalLineSelected=0},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.Slot4Label.initTotalNumberLine(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.Slot4Lines.showNumberLines(t)},showLines:function(t){this.Slot4Lines.showLines(t)},showLine:function(t){this.Slot4Lines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showEffect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line_id-1;this.listSelectNumLineItem[i].showEffect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest())this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot4.Audio.playClick(),!this.Slot4.isCanChangeBet()||this.Slot4.isFreeSpin()||this.Slot4.isBonus()||this.Slot4.isTest()?this.Slot4.showToast(n.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0)},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../items/Slot4SelectNumberLineItem":"Slot4SelectNumberLineItem"}],Slot4SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"49d8dBk/aBE5r77/Zdu3bCI","Slot4SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot4=t,this.Slot4SelectLine=t.Slot4SelectLine},onLoad:function(){var t=this;this.selected=this.onSelectButtonNode.active,this.onMouseEnter=function(){t.Slot4SelectLine.showLine(t.line)},this.onMouseLeave=function(){t.Slot4SelectLine.showLine(0)},cc.sys.isBrowser&&(this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){this.Slot4.Audio.playClick(),this.selected?this.unSelect():this.select()},select:function(){this.setSelected(!0),this.Slot4SelectLine.itemIsSelected(),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot4SelectLine.setLineItemUnSelected(),this.Slot4SelectLine.itemIsSelected(),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},showEffect:function(){},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected},reset:function(){this.getSelected()?this.showSelect():this.showUnSelect()}}),cc._RF.pop()},{}],Slot4State:[function(t,e,i){"use strict";cc._RF.push(e,"dca9aCPompAvI5xJ4LyD6P9","Slot4State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot4=t,this.Slot4UI=t.Slot4UI,this.Slot4SelectLine=t.Slot4SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinButton(),this.Slot4UI.showAutoSpinButton(),this.Slot4SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinDisableButton(),this.Slot4UI.showAutoSpinDisableButton(),this.Slot4SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinDisableButton(),this.Slot4UI.showAutoSpinDisableButton(),this.Slot4SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot4.isFreeSpin()&&!this.Slot4.isTest()?this.Slot4UI.showSpinFreeButton():this.Slot4UI.showSpinDisableButton(),this.Slot4UI.showStopAutoSpinButton(),this.Slot4SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot4.Slot4Reels.hideEffectItem(),this.Slot4.Slot4Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot4UI:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"dbdcfsO4ohFIItczU1Db+4L","Slot4UI");var s=t("../../util/FormatUtil");cc.Class((n(o={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,xPrizeNode:cc.Node,jackpotNode:cc.Node,idSpinNode:cc.Node,autoSpinSettingFormNode:cc.Node,bonusResultFormNode:cc.Node,slot4FormNode:cc.Node,selectLineFormNode:cc.Node,prizeFormNode:cc.Node,tutorialFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node},init:function(t){this.Slot4=t},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusResultFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormRankHistory=this.slot4FormNode.getComponent("DialogForm"),this.dialogFormTutorial=this.tutorialFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormPrize=this.prizeFormNode.getComponent("DialogForm"),this.dialogFormSelectLine=this.selectLineFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0,this.idSpinNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0,this.idSpinNode.active=!1},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string=s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0}),n(o,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.showDialog(t)}),n(o,"showX",function(){this.xPrizeNode.active=!0}),n(o,"hideX",function(){this.xPrizeNode.active=!1}),n(o,"showJackpot",function(){this.jackpotNode.active=!0}),n(o,"hideJackpot",function(){this.jackpotNode.active=!1}),n(o,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),n(o,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),n(o,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),n(o,"showTutorialFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormTutorial.showDialog(t)}),n(o,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),n(o,"showRankHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankHistory.showDialog(t)}),n(o,"hideRankHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankHistory.hideDialog(t)}),n(o,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),n(o,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),n(o,"showPrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.showDialog(t)}),n(o,"hidePrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.hideDialog(t)}),n(o,"showSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)}),n(o,"hideSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)}),n(o,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),n(o,"showProcessingNode",function(){this.processingNode.active=!0}),n(o,"hideProcessingNode",function(){this.processingNode.active=!1}),n(o,"showProcessingSceneNode",function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)}),n(o,"hideProcessingSceneNode",function(){this.processingSceneNode.active=!1}),o)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot4X:[function(t,e,i){"use strict";cc._RF.push(e,"13c50+JtJFAEJLw7gENE6om","Slot4X"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot4=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot4:[function(t,e,i){"use strict";cc._RF.push(e,"fe842NFkqFCuZtjWPm7FFfq","Slot4");var o=t("../../base/BaseScene"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./Slot4UI"),r=t("./Slot4Header"),c=t("./Slot4Control"),h=t("./Slot4Label"),l=t("./Slot4Reels"),u=t("./Slot4Lines"),d=t("./Slot4Effect"),m=t("./Slot4Bonus"),p=t("./Slot4X"),f=t("./Slot4Constant"),g=t("./Slot4State"),_=t("./Slot4HandlerRequest"),S=t("../../prefab/mini-game/item/MiniGameXPer"),C=t("./form/Slot4AutoSpinSetting"),N=t("./form/Slot4BonusResult"),E=t("./form/Slot4Form"),T=t("./form/Slot4SelectLine"),I=t("../../prefab/form/Setting"),v=t("../../prefab/form/LogOut"),y=t("../../prefab/form/Tutorial"),B=(t("../../prefab/News"),t("../../prefab/Toast")),L=t("../../ui/dialog/DialogMessage"),R=t("../../ui/Processing"),A=t("../../ui/ProcessingScene"),M=t("../../object/Audio");t("../../object/Music");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,Slot4UI:a,Slot4Header:r,Slot4Control:c,Slot4Label:h,Slot4SelectLine:T,Slot4Reels:l,Slot4Effect:d,Slot4Lines:u,Slot4Bonus:m,Slot4Form:E,Slot4X:p,MiniGameXPer:S,Slot4AutoSpinSetting:C,Slot4BonusResult:N,Tutorial:y,Setting:I,LogOut:v,Toast:B,DialogMessage:L,Processing:R,ProcessingScene:A,Audio:M},onLoad:function(){this._super(),this.setSceneName(n.SCENE_GAME_SLOT_4),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot4State=g,this.Slot4HandlerRequest=_,this.Slot4State.init(this),this.Slot4HandlerRequest.init(this),this.Slot4UI.init(this),this.Slot4Header.init(this),this.Slot4Control.init(this),this.Slot4Label.init(this),this.Slot4SelectLine.init(this),this.Slot4Reels.init(this),this.Slot4Effect.init(this),this.Slot4Lines.init(this),this.Slot4Bonus.init(this),this.Slot4Form.init(this),this.Slot4X.init(this),this.Slot4AutoSpinSetting.init(this),this.Slot4BonusResult.init(this),this.Setting.init(this),this.LogOut.init(this),this.Tutorial.init(this),this.updateMoneyGold(),this.Slot4State.setStop(),this.onResponseBind=this.Slot4HandlerRequest.onResponse.bind(this.Slot4HandlerRequest),this.onUserVariablesUpdateBind=this.Slot4HandlerRequest.onUserVariablesUpdate.bind(this.Slot4HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.initDataBet(),this.Slot4SelectLine.selectAllItem(),this.Slot4UI.showContentGame(),this.Slot4UI.hideX(),this.Slot4Form.Slot4Rank.initData(this.dataRank)},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:88e6,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:1e7}},handleJackpot:function(t){var e=0,i=1;for(var o in this.info){var n=void 0;switch(this.info[o].spin_fee){case 100:this.info[o].jackpot=t.data[0],(n=t.data[3])&&(this.info[o].x_jackpot=n[0]);break;case 1e3:this.info[o].jackpot=t.data[1],n=t.data[3],t.data[3]&&(this.info[o].x_jackpot=n[1]);break;case 1e4:this.info[o].jackpot=t.data[2],(n=t.data[3])&&(this.info[o].x_jackpot=n[2])}this.info[o].spin_fee===this.bet&&(e=this.info[o].jackpot,i=this.info[o].x_jackpot)}this.isTest()||(this.Slot4Label.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){var e=t.data;this.setSendSpin(!1),this.Slot4State.isAutoSpin()||this.Slot4State.setSpinning(),this.initInfo(e),this.Slot4AutoSpinSetting.handleSpin(e),this.Slot4Label.handleSpin(e),this.Slot4Reels.handleSpin(e),this.Slot4Form.Slot4History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.win_prize=t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.remain_spin_free>0&&e.remain_spin_free--},handleSpinDemo:function(t){var e=t.data;this.setSendSpin(!1),e.win_type===f.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.initInfoTest(e),this.Slot4State.setSpinning(),this.Slot4Label.handleSpinDemo(e),this.Slot4Reels.handleSpinDemo(e)},initInfoTest:function(t){this.getTestInfo().is_free=t.is_free},handleSpinFail:function(t){this.setSendSpin(!1),this.showToast(t.msg),this.Slot4State.setStop(),this.Slot4AutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleGetTop:function(t){},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg)},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.Slot4Form.Slot4Rank.initData(this.dataRank)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.Slot4Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.Slot4Chat.addChat(e)}else this.Slot4Chat.addChatFail(t.msg)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t)},initDataTest:function(){this.setIsTest(!0),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot4Reels.reset(),this.Slot4SelectLine.selectAllItem()},initTestData:function(){this.Slot4Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot4Label.setMoney(this.testInfo.money),this.Slot4Label.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingSceneNode(),this.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick()},spin:function(){if(this.line_player_choose=this.Slot4SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.isSendSpin()){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};if(this.isTest()){this.sendRequest.send(f.SPIN_DEMO,t);var e=this.getTestInfo();e.is_free||(e.money-=2e5,this.Slot4Label.setMoney(e.money))}else this.sendRequest.send(f.SPIN,t);this.setSendSpin(!0)}}else this.showToast(s.SLOT3_NOT_SELECT_LINE),this.Slot4State.setStop(),this.Slot4AutoSpinSetting.stopAutoSpin(),this.Slot4AutoSpinSetting.onResetClick()},updateMoneyGold:function(){this.isTest()||this.Slot4Label.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();if(this.initBetData(e),this.Slot4Label.setMoney(this.getMoney()),this.Slot4Label.setBet(t),e){var i=e.x_jackpot?e.x_jackpot:1;this.MiniGameXPer.setXMiniGame(i)}},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_free||t.remain_spin_free,o=this.Slot4SelectLine.getLineSelected().length;this.Slot4Label.setJackpot(e,!1),this.Slot4Label.initTotalNumberLine(o),i?this.Slot4UI.showSpinFreeButton(i):this.Slot4UI.showSpinButton()}},getBet:function(){return this.bet},isAutoSpin:function(){return this.Slot4State.isAutoSpin()&&this.Slot4AutoSpinSetting.checkAutoSpin()},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot4Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee==this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setFistBet:function(t){this.firstBet=t},getFistBet:function(t){this.firstBet=t},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot4State.isStop()},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t){this.Slot4UI.showBonusResultForm(),this.Slot4BonusResult.setMoney(t)},hideBonusResult:function(){this.Slot4UI.hideBonusResultForm()},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.Slot4UI.showDialogMessage(t,e)},hideDialogMessage:function(){this.Slot4UI.hideDialogMessage()},showProcessingNode:function(){this.Slot4UI.showProcessingNode()},hideProcessingNode:function(){this.Slot4UI.hideProcessingNode()},showProcessingSceneNode:function(){this.Slot4UI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.Slot4UI.hideProcessingSceneNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:16e3,display_slot_data:["C","F","F","D","E","A","B","E","B","A","F","F","F","A","E"],is_bonus:!0,is_free:!1,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:1200},t.list_bonus_prize[1]={line:0,prize:1},t.list_bonus_prize[2]={line:1,prize:1600},t.list_bonus_prize[3]={line:1,prize:1600},t.list_bonus_prize[4]={line:1,prize:1600},t.list_bonus_prize[5]={line:1,prize:1600},t.list_bonus_prize[6]={line:2,prize:4e3},t.list_bonus_prize[7]={line:1,prize:1600},t.list_bonus_prize[8]={line:2,prize:16e3},t.list_bonus_prize[9]={line:1,prize:1600},t.list_line_bonus=[],t.list_line_bonus[0]={line:14,prize:1},t.list_line_bonus[1]={line:17,prize:1},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.number_key_start_bonus=2,t.remain_free=0,t.spin_id=166,t.win_prize=2e3,t.win_type=1,t},dataTestFree:function(){var t={bonus_prize:0,display_slot_data:["G","C","F","G","D","F","E","D","G","E","C","F","G","D","C"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[],list_line_bonus:[],list_line_free:[],list_line_prize:[{line:1,prize:200}],money_type:0,number_key_start_bonus:0,remain_free:1,spin_id:166,win_prize:0,win_type:0};return t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","./Slot4Bonus":"Slot4Bonus","./Slot4Constant":"Slot4Constant","./Slot4Control":"Slot4Control","./Slot4Effect":"Slot4Effect","./Slot4HandlerRequest":"Slot4HandlerRequest","./Slot4Header":"Slot4Header","./Slot4Label":"Slot4Label","./Slot4Lines":"Slot4Lines","./Slot4Reels":"Slot4Reels","./Slot4State":"Slot4State","./Slot4UI":"Slot4UI","./Slot4X":"Slot4X","./form/Slot4AutoSpinSetting":"Slot4AutoSpinSetting","./form/Slot4BonusResult":"Slot4BonusResult","./form/Slot4Form":"Slot4Form","./form/Slot4SelectLine":"Slot4SelectLine"}],Slot5AutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"2abcfIjQytAhLA05XVJTp1n","Slot5AutoSpinSetting");var o=t("../Slot5Constant"),n=t("../../../util/FormatUtil");t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.Slot5.DialogMessage.node.active&&!this.Slot5.Processing.node.active},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=o.SLOT5_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string=0,this.stopGameLoseToEditBox.string=0,this.stopGameMaxWinEditBox.string=0,this.numberSpinSlider.progress=0,this.numberSpinLabel.string=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(n.getOnlyNumberInString(this.stopGameWinToEditBox.string.toString())),this.loseTo=parseInt(n.getOnlyNumberInString(this.stopGameLoseToEditBox.string.toString())),this.maxWin=parseInt(n.getOnlyNumberInString(this.stopGameMaxWinEditBox.string.toString())),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot5.Slot5State.setAutoSpin(),this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin),this.Slot5.spin(),this.dialogForm.hideDialog(!1)},handleSpin:function(t){if(this.Slot5.Slot5State.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot5.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===o.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,o=!this.stopGameMaxWin||this.lastWin<this.maxWin,n=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&o&&n},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../Slot5Constant":"Slot5Constant"}],Slot5BonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"c21f1Z8gz1CFLyWuNEoVhnM","Slot5BonusItem");var o=t("../../util/FormatUtil"),n=(t("../../helper/Config"),t("../../util/BrowserUtil")),s=t("../../helper/Message");t("../../scene/game-slot-5/Slot5Constant");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,openNode:cc.Node,endNode:cc.Node,moneyLabel:cc.Label},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5Bonus=t.Slot5Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.onMouseEnter=function(){t.isOpen()||n.showCursorPointer()},this.onMouseLeave=function(){n.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Slot5.Slot5State.isAutoSpin()?this.Slot5.showToast(s.SLOT2_AUTOSPIN_NOT_CHANGE):this.isClicked()||this.Slot5Bonus.isStateStop()||(this.setClicked(!0),this.Slot5Bonus.setStateStop(!0),this.Slot5Bonus.onItemClick(this))},onClickIsAutoSpin:function(){this.isClicked()||this.Slot5Bonus.isStateStop()||(this.setClicked(!0),this.Slot5Bonus.setStateStop(!0),this.Slot5Bonus.onItemClick(this))},openItem:function(t){t>0?(this.defaultNode.active=!1,this.openNode.active=!0,this.moneyLabel.string=o.numberWithCommas(t)):(this.defaultNode.active=!1,this.endNode.active=!0)},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},hideAll:function(){this.defaultNode.active=!0,this.openNode.active=!1,this.endNode.active=!1},reset:function(){this.hideAll(),this.setOpen(!1),this.setClicked(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../scene/game-slot-5/Slot5Constant":"Slot5Constant","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],Slot5BonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"81dd9vQZ6tCbJMbWHSXaUCw","Slot5BonusResult");var o=t("../../../util/FormatUtil"),n=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{contentLabel:cc.Label,moneyJackpotItem:n},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){var t=this;t.keyEventListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,i){switch(e){case cc.KEY.escape:t.isTop()&&t.dialogForm.hideDialog()}}},t.node)},removeEventKeyPress:function(){this.keyEventListener&&cc.eventManager.removeListener(this.keyEventListener)},isTop:function(){return!this.Slot5.DialogMessage.node.active&&!this.Slot5.Processing.node.active},setMoney:function(t,e){var i=parseInt(t/e);this.moneyJackpotItem.setMoneyWithoutAnimation(t),this.contentLabel.string=o.numberWithCommas(i)+" x "+e+" = "}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../../util/FormatUtil":"FormatUtil"}],Slot5Bonus:[function(t,e,i){"use strict";cc._RF.push(e,"0b9b0ex9vtCIpg4fWxAJ4em","Slot5Bonus");t("../../util/FormatUtil");var o=t("../../util/RandomUtil"),n=(t("../../util/BrowserUtil"),t("../../helper/Config"),t("../../prefab/mini-game/item/JackpotItem")),s=t("../../prefab/slot-5/Slot5BonusItem"),a=t("./Slot5Constant"),r=t("../../prefab/slot-5/Slot5MiniGameItem");cc.Class({extends:cc.Component,properties:{moneyBonusJackpotItem:n,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,slot5BonusItem:[s],slot5MiniGameItem:[r]},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5X=t.Slot5X;for(var e=0;e<this.slot5BonusItem.length;e++)this.slot5BonusItem[e].init(t);for(var i=0;i<this.slot5MiniGameItem.length;i++)this.slot5MiniGameItem[i].init(t)},onLoad:function(){this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.total_prize=0,this.list_bonus_prize.length<10&&this.list_bonus_prize.push({line:0,prize:0}),this.setMoneyBonus(this.total_prize))},onEnable:function(){this.reset(),this.initContent(),this.Slot5UI.hideJackpot(),this.Slot5.Slot5State.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.Slot5UI.showJackpot(),this.data.is_free?this.Slot5.spin():this.Slot5.Slot5State.isAutoSpin()?this.Slot5.spin():this.Slot5.Slot5State.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.prize;this.total_prize+=i,this.openBonusItem(t,i)}else console.log("THOI TH\xd4I. M\u1ede H\u1ebeT C\xd2N \u0110\xc2U")},openBonusItem:function(t,e){t.openItem(e),this.setStateStop(!1),this.checkFinishMiniGameBonus(),this.setMoneyBonus(this.total_prize)},openItemMiniGame:function(t){this.xPrize=parseInt(this.bonus_prize/this.total_prize);var e=this.getDataXPrizeDisplay(this.data,this.xPrize);t.openItem(this.xPrize,!0),this.openMiniGameItemByMultipBet(e[0]),this.openMiniGameItemByMultipBet(e[1]),this.showCloseMiniGame(),this.showResultAndHideBonus()},openMiniGameItemByMultipBet:function(t){this.getItemMiniGameNotOpen().openItem(t,!1)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.slot5MiniGameItem)this.slot5MiniGameItem[e].isOpen()||this.slot5MiniGameItem[e].isClicked()||t.push(this.slot5MiniGameItem[e]);return t[o.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.slot5BonusItem)this.slot5BonusItem[e].isOpen()||this.slot5BonusItem[e].isClicked()||t.push(this.slot5BonusItem[e]);return t[o.getRandomInt(0,t.length-1)]},getDataXPrizeDisplay:function(t,e){for(var i=t.display_slot_data,o=0,n=a.LIST_XPRIZE_BONUS_4,s=0,r=i.length;s<r;s++)a.SLOT5_ICON_BONUS===i[s]&&o++;3===o&&(n=a.LIST_XPRIZE_BONUS_3.slice()),4===o&&(n=a.LIST_XPRIZE_BONUS_4.slice()),5===o&&(n=a.LIST_XPRIZE_BONUS_5.slice());for(var c=0,h=n.length;c<h;c++)n[c]===e&&n.splice(c,1);return n},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setMoneyBonus:function(t){0==t?this.moneyBonusJackpotItem.setMoneyWithoutAnimation(0):this.moneyBonusJackpotItem.setMoneyWithStartNumberZero(t)},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowMiniGameForm),this.intervalShowMiniGameForm=setInterval(function(){this.showMiniGame(),clearInterval(this.intervalShowMiniGameForm)}.bind(this),1500),this.Slot5.Slot5State.isAutoSpin()&&(this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClickIsAutoSpin(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),3500))):this.Slot5.Slot5State.isAutoSpin()&&this.autoOpenBox()},showResultAndHideBonus:function(){clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot5.showBonusResult(this.data.bonus_prize,this.xPrize),this.Slot5.Slot5Label.setLastMoneyWin(this.data.bonus_prize,!0),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.Slot5UI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3e3)},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},reset:function(){for(var t in this.setStateStop(!1),this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.total_prize=0,this.xPrize=1,this.setMoneyBonus(0),this.hideCloseMiniGame(),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalShowMiniGameForm),this.minigameBonusNode.active&&(this.minigameBonusNode.active=!1),this.slot5BonusItem)this.slot5BonusItem[t].reset();for(var e in this.slot5MiniGameItem)this.slot5MiniGameItem[e].reset()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../prefab/slot-5/Slot5BonusItem":"Slot5BonusItem","../../prefab/slot-5/Slot5MiniGameItem":"Slot5MiniGameItem","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot5Constant":"Slot5Constant"}],Slot5Constant:[function(t,e,i){"use strict";cc._RF.push(e,"9c80fk8+hZPnoDJy7n2UwfX","Slot5Constant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1,SLOT5_DISTANCE_TWO_ITEMS:170,SLOT5_SPEED_SPIN_CARD:5e3,SLOT5_DELAY_SPIN:2e3,SLOT5_NUMBER_ITEM_IN_REEL:3,SLOT5_TOTAL_ITEM_IN_REEL:31,SLOT5_DELAY_SHOW_MONEY_PRIZE:1e3,SLOT5_TIME_DELAY_FINISH:3e3,SLOT5_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT5_LIST_ICON:["A","B","C","D","E","F","G","H","WILD","BONUS","FREE"],SLOT5_ICON_BONUS:"BONUS",LIST_XPRIZE_BONUS_3:[1,2,3],LIST_XPRIZE_BONUS_4:[2,3,4],LIST_XPRIZE_BONUS_5:[3,4,5],NUM_IN_HISTORY:30,LIST_INDEX_NUMBER_IN_LINE:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[1,2,8,4,5],[11,12,8,14,15],[6,2,3,4,10],[6,12,13,14,10],[1,2,8,14,15],[11,12,8,4,5],[6,12,8,4,10],[6,2,8,14,10],[1,7,8,9,5],[11,7,8,9,15],[1,7,13,9,5],[11,7,3,9,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,13,4,5],[11,12,3,14,15],[1,12,13,14,5],[11,2,3,4,15],[6,2,13,4,10],[6,12,3,14,10],[1,12,3,14,5],[11,2,13,4,15]],TIME_SHOW_JACKPOT:5,TIME_SHOW_FREESPIN:3.5,TIME_SHOW_BONUS:3,TIME_SHOW_BIGWIN:4,TIME_SHOW_WIN_NORMAL:2.5},cc._RF.pop()},{}],Slot5Control:[function(t,e,i){"use strict";cc._RF.push(e,"246b1s+jMVBraX2V0RFybDt","Slot5Control");var o=t("../../helper/Message"),n=t("../../helper/Config"),s=t("../../helper/Constant");cc.Class({extends:cc.Component,properties:{bet100OnNode:cc.Node,bet100OffNode:cc.Node,bet1KOnNode:cc.Node,bet1KOffNode:cc.Node,bet10KOnNode:cc.Node,bet10KOffNode:cc.Node,musicOnButtonNode:cc.Node,musicOffButtonNode:cc.Node,fastSpinOnButtonNode:cc.Node,fastSpinOffButtonNode:cc.Node},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){this.showHideFastSpin(!1);var t=cc.sys.localStorage.getItem(s.IS_SOUND);"true"===t||!0===t?this.showHideMusic(!0):"false"===t||!1===t?this.showHideMusic(!1):this.showHideMusic(!0)},onSpinClick:function(){this.Slot5.Audio.playClick(),!this.Slot5.isBonus()&&this.Slot5.isCanChangeBet()&&this.Slot5.spin()},onAutoSpinClick:function(){this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET):(this.Slot5.Slot5State.setAutoSpin(),this.Slot5.spin())},onStopAutoSpinClick:function(){this.Slot5.Audio.playClick(),this.Slot5.Slot5State.setStop(),this.Slot5.Slot5State.setSpinning()},onHistoryClick:function(){this.Slot5.Audio.playClick(),this.Slot5UI.showRankHistoryFormNode(),this.Slot5.Slot5Form.showHistory()},onRankClick:function(){this.Slot5.Audio.playClick(),this.Slot5UI.showRankHistoryFormNode(),this.Slot5.Slot5Form.showRank()},onPrizeClick:function(){this.Slot5.Audio.playClick(),this.Slot5UI.showPrizeFormNode()},onFastSpinClick:function(){var t=!this.fastSpinOnButtonNode.active;this.showHideFastSpin(t)},showHideFastSpin:function(t){this.fastSpinOnButtonNode.active=t,this.fastSpinOffButtonNode.active=!t,this.Slot5.setFastSpin(t)},onShowHideMusicClick:function(){var t=!this.musicOnButtonNode.active;this.showHideMusic(t),this.Slot5.Music&&(this.Slot5.Music.setSound(t),t?this.Slot5.Music.resumeMusic():this.Slot5.Music.pauseMusic())},showHideMusic:function(t){this.musicOnButtonNode.active=t,this.musicOffButtonNode.active=!t},onBet100Click:function(){!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET):(this.initButton(),this.bet100OffNode.active=!1,this.bet100OnNode.active=!0,this.Slot5.setFistBet(n.SLOT_BETS[0]),this.Slot5.setBet(n.SLOT_BETS[0]))},onBet1KClick:function(){!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET):(this.initButton(),this.bet1KOffNode.active=!1,this.bet1KOnNode.active=!0,this.Slot5.setFistBet(n.SLOT_BETS[1]),this.Slot5.setBet(n.SLOT_BETS[1]))},onBet10KClick:function(){!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET):(this.initButton(),this.bet10KOffNode.active=!1,this.bet10KOnNode.active=!0,this.Slot5.setFistBet(n.SLOT_BETS[2]),this.Slot5.setBet(n.SLOT_BETS[2]))},initButton:function(){this.bet100OffNode.active=!0,this.bet1KOffNode.active=!0,this.bet10KOffNode.active=!0,this.bet100OnNode.active=!1,this.bet1KOnNode.active=!1,this.bet10KOnNode.active=!1},onAddClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin())this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot5.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot5.setFistBet(t[e]),this.Slot5.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin())this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot5.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot5.setFistBet(t[e]),this.Slot5.setBet(t[e]);break}},onSelectLineClick:function(){this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isTest()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_CHANGE_BET):this.Slot5UI.showSelectLineFormNode()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Constant":"Constant","../../helper/Message":"Message"}],Slot5Effect:[function(t,e,i){"use strict";cc._RF.push(e,"7dee6J0/SlAT5p9Qf9TQemt","Slot5Effect");var o=t("../../prefab/mini-game/item/JackpotItem"),n=t("./Slot5Constant");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,bonusEffectNode:cc.Node,freeSpinEffectNode:cc.Node,bigwinEffectNode:cc.Node,jackpotEffectNode:cc.Node,winNormalJackpotItem:o,moneyLabelJackpotItem:o,jackpotLabelJackpotItem:o,bonusSkeleton:sp.Skeleton,freeSpinSkeletion:sp.Skeleton,bigwinSkeleton:sp.Skeleton,jackpotSkeleton:sp.Skeleton},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Music=t.Music},onLoad:function(){},onDestroy:function(){},showWinNormal:function(t){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.node.active=!0;var e=parseInt(.5*t);this.winNormalJackpotItem.setMoneyWithoutAnimation(e),this.winNormalJackpotItem.setMoney(t)},showBigWin:function(t){this.hideAll(),this.bigwinEffectNode.active=!0,this.bigwinSkeleton.setAnimation(0,"thang-lon",!0),this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.moneyLabelJackpotItem.node.active=!0;var e=parseInt(.7*t);this.moneyLabelJackpotItem.setMoneyWithoutAnimation(e),this.moneyLabelJackpotItem.setMoney(t)},this)))},showJackpot:function(t){this.hideAll(),this.jackpotEffectNode.active=!0,this.jackpotSkeleton.setAnimation(0,"No-hu",!0),this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.jackpotLabelJackpotItem.node.active=!0;var e=parseInt(.7*t);this.jackpotLabelJackpotItem.setMoneyWithoutAnimation(e),this.jackpotLabelJackpotItem.setMoney(t)},this)))},showBonus:function(t){this.hideAll(),this.bonusEffectNode.active=!0,this.bonusSkeleton.setAnimation(0,"Bonus",!0),this.node.runAction(cc.sequence(cc.delayTime(n.TIME_SHOW_BONUS),cc.callFunc(function(){this.hideAll(),this.Slot5.Slot5Bonus.initData(t),this.Slot5UI.showBonus()},this)))},showFreeSpin:function(){this.hideAll(),this.freeSpinEffectNode.active=!0,this.freeSpinSkeletion.setAnimation(0,"QMP",!0),this.node.stopAllActions(!0),this.node.runAction(cc.sequence(cc.delayTime(n.TIME_SHOW_FREESPIN),cc.callFunc(function(){},this)))},hideAll:function(){this.winNormalNode.active=!1,this.bonusEffectNode.active=!1,this.freeSpinEffectNode.active=!1,this.bigwinEffectNode.active=!1,this.jackpotEffectNode.active=!1,this.jackpotLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.node.active=!1,this.moneyLabelJackpotItem.node.active=!1,this.winNormalJackpotItem.setMoneyWithoutAnimation(100),this.jackpotLabelJackpotItem.setMoneyWithoutAnimation(100),this.moneyLabelJackpotItem.setMoneyWithoutAnimation(100),this.bonusSkeleton.clearTrack(0),this.freeSpinSkeletion.clearTrack(0),this.bigwinSkeleton.clearTrack(0),this.jackpotSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem","./Slot5Constant":"Slot5Constant"}],Slot5Form:[function(t,e,i){"use strict";cc._RF.push(e,"27808P2jXFCQIowr277Q82c","Slot5Form");var o=t("./Slot5History"),n=t("./Slot5Rank");cc.Class({extends:cc.Component,properties:{historyNode:cc.Node,rankNode:cc.Node,Slot5History:o,Slot5Rank:n},init:function(t){this.Slot5=t,this.Slot5History.init(t),this.Slot5Rank.init(t)},onLoad:function(){},showHistory:function(){this.historyNode.active=!0,this.rankNode.active=!1},showRank:function(){this.rankNode.active=!0,this.historyNode.active=!1}}),cc._RF.pop()},{"./Slot5History":"Slot5History","./Slot5Rank":"Slot5Rank"}],Slot5HandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"799b7I6g0RLW5gKK0WoMfK/","Slot5HandlerRequest");var o=t("../../helper/Constant"),n=(t("../../helper/Message"),t("./Slot5Constant")),s={init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case o.MONEY:this.Slot5.updateMoneyGold();break;case o.GOLD:}},onResponse:function(t){var e=t.params,i=t.cmd;switch("MINIGAME"!==i&&o.NEWS,i){case n.JACKPOT:this.Slot5.handleJackpot(e);break;case n.SPIN:this.Slot5.handleSpin(e);break;case n.SPIN_DEMO:this.Slot5.handleSpinDemo(e);break;case n.SPIN_BONUS:case n.SPIN_BONUS_DEMO:break;case n.SPIN_FAIL:this.Slot5.handleSpinFail(e);break;case n.UPDATE_BIGWIN:this.Slot5.handleUpdateBigwin(e);break;case n.GET_TOP:break;case o.MINIGAME_REQUEST:this.Slot5.MiniGame&&this.Slot5.MiniGame.handleRequest(e);break;case o.REQUEST_RECHARGE_GOLD:this.Slot5.handleRechargeGold(e);break;case o.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot5.handleAlert(e);break;case o.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot5.handleNewMessage(e);break;case o.REQUEST_ACHIVEMENTED_QUEST:this.Slot5.handleAchivementedQuest(e);break;case o.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot5.handlePlusLuckyWheelFree(e);break;case o.REQUEST_CHAT_GET_CHAT:case o.REQUEST_CHAT_SEND_CHAT:break;case o.UPDATE_MINIGAME_FREE:this.Slot5.MiniGame&&this.Slot5.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./Slot5Constant":"Slot5Constant"}],Slot5Header:[function(t,e,i){"use strict";cc._RF.push(e,"ff466KDPLBKmKNUJZe0U8CU","Slot5Header");var o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){},onEnable:function(){},onPlayClick:function(){this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_CHANGE_SPIN):(this.Slot5UI.showTestButton(),this.Slot5.initDataBet(this.Slot5.getFistBet()))},onTestClick:function(){this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isBonus()||this.Slot5.isFreeSpin()?this.Slot5.showToast(o.SLOT_NOT_TEST):(this.Slot5UI.showPlayButton(),this.Slot5.initDataTest())},onBackClick:function(){this.Slot5.Audio.playClick(),this.Slot5.isCanChangeBet()?this.Slot5.onBackClick():this.Slot5.showToast(o.SLOT_NOT_CHANGE_SPIN)}}),cc._RF.pop()},{"../../helper/Message":"Message"}],Slot5HistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"5cd5fVbmLdKu6lkJ86OwGop","Slot5HistoryItem");var o=t("../../util/FormatUtil");t("../../helper/Message");cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label},onLoad:function(){},init:function(t){if(t){var e=o.numberWithCommas(t.total_prize_amount||t.win_prize),i=o.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=e,this.betLabel.string=i}},getMessage:function(){return this.richText.string}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],Slot5History:[function(t,e,i){"use strict";cc._RF.push(e,"d1527jjABNG77TWtTyceEt0","Slot5History");var o=t("../../../helper/Message"),n=(t("../../../helper/Config"),t("../Slot5Constant")),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{historyContentScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){},onEnable:function(){this.initData()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeShowHistory=null)},initData:function(){if(this.listData&&0!==this.listData.length){this.showListNode(),this.listData=s.sortDataTimeByTime(this.listData);for(var t=0,e=this.listData.length;t<e;t++){var i=this.listItem[t];i||(i=this.instanceItem(this.listData[t])),i.getComponent("Slot5HistoryItem").init(this.listData[t])}}else this.loadData()},handleSpin:function(t){this.initFirst();var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.win_prize,e.spin_fee=this.Slot5.getBet(),e.total_bet_amount=this.Slot5.Slot5SelectLine.getLineSelected().length*this.Slot5.getBet(),this.listData.length>n.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeShowHistory),this.timeShowHistory=setTimeout(function(){if(this.listData.length>n.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,i=0,o=this.listItem.length;i<o;i++)this.listItem[i].getComponent("Slot5HistoryItem").init(this.listData[t-i])}else this.instanceItem(e);clearTimeout(this.timeShowHistory)}.bind(this),n.SLOT5_TIME_DELAY_FINISH))},loadData:function(){var t=this;this.initFirst(),this.showLoadingNode(),this.historyContentScrollView.content.removeAllChildren(!0);var e={token:this.Slot5.getToken(),user_id:this.Slot5.getUserId()};this.Slot5.api.getHistorySlot5(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot5.showDialogMessage(o.HISTORY_TITLE,e.msg)})},initContent:function(t){this.showListNode();var e=t[0],i=0;i=e.length>n.NUM_IN_HISTORY?n.NUM_IN_HISTORY:e.length;for(var o=0;o<i;o++)this.instanceItem(e[o]),this.listData.push(e[o])},instanceItem:function(t){var e=cc.instantiate(this.historyItemPrefab);return e.parent=this.historyContentScrollView.content,e.getComponent("Slot5HistoryItem").init(t),this.listItem.push(e),e},showListNode:function(){this.historyContentScrollView.node.active=!0,this.hideLoadingNode()},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../Slot5Constant":"Slot5Constant"}],Slot5Item:[function(t,e,i){"use strict";cc._RF.push(e,"28fc6B++fZAypx92GLJbhdX","Slot5Item"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node,iconHNode:cc.Node,iconWILDNode:cc.Node,iconBonusNode:cc.Node,iconFreeNode:cc.Node,effectNode:cc.Node},onLoad:function(){},init:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"F":this.iconFNode.active=!0;break;case"G":this.iconGNode.active=!0;break;case"H":this.iconHNode.active=!0;break;case"WILD":this.iconWILDNode.active=!0;break;case"BONUS":this.iconBonusNode.active=!0;break;case"FREE":this.iconFreeNode.active=!0}},getIndex:function(){return this.index},showEffect:function(){this.effectNode.active=!0},hideEffect:function(){this.effectNode.active=!1},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1,this.iconHNode.active=!1,this.iconWILDNode.active=!1,this.iconBonusNode.active=!1,this.iconFreeNode.active=!1,this.effectNode.active=!1}}),cc._RF.pop()},{}],Slot5Label:[function(t,e,i){"use strict";cc._RF.push(e,"c3927eYd8tLaKs0bi+ATdNI","Slot5Label");t("../../helper/Message");var o=t("../../util/FormatUtil"),n=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpotJackpotItem:n,spinIDLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:n,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initTotalNumberLine:function(t){var e=this.Slot5.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.setLastMoneyWin(e)}.bind(this),3e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot5.getTestInfo().money+=e,this.setLastMoneyWin(e),this.setMoney(this.Slot5.getTestInfo().money)}.bind(this),3e3)},setId:function(t){this.spinIDLabel.string="#"+t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.jackpotJackpotItem.setMoney(t):this.jackpotJackpotItem.setMoneyWithoutAnimation(t)},setBet:function(t){this.betLabel.string=o.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=o.numberWithCommas(t)},setMoney:function(t){this.moneyLabel.setMoney(t)},setLastMoneyWin:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.lastMoneyWinLabel.string=o.numberWithCommas(this.last_money_win+t):(this.last_money_win=t,this.lastMoneyWinLabel.string=o.numberWithCommas(t))},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t}}),cc._RF.pop()},{"../../helper/Message":"Message","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],Slot5Lines:[function(t,e,i){"use strict";cc._RF.push(e,"8cb340hhE9IyJnTGmG6/8Dd","Slot5Lines");t("../../util/FormatUtil");var o=t("./items/Slot5NumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[o],listLine:[cc.Node]},init:function(t){for(var e in this.Slot5=t,this.Slot5=t.Slot5UI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","./items/Slot5NumberLineItem":"Slot5NumberLineItem"}],Slot5MiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"1b3efkeqg9BwK6u/8bbMuz4","Slot5MiniGameItem");var o=t("../../util/BrowserUtil");t("../../util/FormatUtil"),t("../../helper/Config");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,openXPrizeSprite:cc.Sprite,listXPriteSpriteFrameSelected:[cc.SpriteFrame],listXPriteSpriteFrame:[cc.SpriteFrame]},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5Bonus=t.Slot5Bonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.hideTimeout=null,this.onMouseEnter=function(){t.isOpen()||o.showCursorPointer()},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClickIsAutoSpin:function(){this.isClicked()||(this.setClicked(!0),this.Slot5Bonus.openItemMiniGame(this))},onClick:function(){this.isClicked()||this.Slot5.Slot5State.isAutoSpin()||(this.setClicked(!0),this.Slot5Bonus.openItemMiniGame(this))},openItem:function(t,e){this.setOpen(!0),this.setClicked(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.showOpenItem(),this.openXPrizeSprite.spriteFrame=e?this.listXPriteSpriteFrameSelected[t-1]:this.listXPriteSpriteFrame[t-1]}.bind(this),1e3)},setClicked:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_open=t},isOpen:function(){return this.is_open},showOpenItem:function(){this.defaultNode.active=!1,this.openXPrizeSprite.node.active=!0},reset:function(){clearTimeout(this.hideTimeout),this.setClicked(!1),this.setOpen(!1),this.defaultNode.active=!0,this.openXPrizeSprite.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],Slot5NumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"17556daHuJOg5YAAFq+QkEr","Slot5NumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLine:0},init:function(t){this.Slot5=t,this.Slot5Lines=t.Slot5Lines,this.line=this.numberLine},onLoad:function(){var t=this;this.hideNumberLine(),this.onMouseEnter=function(){t.Slot5Lines.showLine(t.line)},this.onMouseLeave=function(){t.Slot5Lines.showLine(0)},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},showNumberLine:function(){},hideNumberLine:function(){}}),cc._RF.pop()},{}],Slot5Prize:[function(t,e,i){"use strict";cc._RF.push(e,"4c758+2KOVEmraHSH87yR4U","Slot5Prize"),cc.Class({extends:cc.Component,properties:{listPrizeNode:[cc.Node],pageLabel:cc.Label},init:function(t){this.Slot5=t},onLoad:function(){this.showPage(0)},onNextClick:function(){this.numberPage++,this.numberPage===this.listPrizeNode.length&&(this.numberPage=0),this.showPage(this.numberPage)},onPreviewClick:function(){this.numberPage--,this.numberPage<0&&(this.numberPage=this.listPrizeNode.length-1),this.showPage(this.numberPage)},showPage:function(t){this.numberPage=t;for(var e=0,i=this.listPrizeNode.length;e<i;e++)e===t?(this.listPrizeNode[e].active=!0,this.showNumberPage(e)):this.listPrizeNode[e].active=!1},showNumberPage:function(t){this.pageLabel.string=t+1+" / "+this.listPrizeNode.length}}),cc._RF.pop()},{}],Slot5RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"d8137jyjkdD1qTHv6ioOJA6","Slot5RankItem");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,timeLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){t&&(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.nickNameLabel.string=t.nick_name,this.balanceLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=o.getDateByTimeStamp(t.created_at))}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot5Rank:[function(t,e,i){"use strict";cc._RF.push(e,"ec9bfnbQMlNAI7zKfN0H8iM","Slot5Rank");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{rankContentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab},init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI},onLoad:function(){},onEnable:function(){this.initFirst(),this.initRank()},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.rankItemPrefab);this.pool.put(e)}this.listChild=[]}},initData:function(t){t&&(this.data=t)},initRank:function(){if(this.data){this.showListRankNode(),this.putAllChipToPool();for(var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=(t=o.filterSameItemSlot(t)).length>20?20:t.length,i=0;i<e;i++){var n=this.instanceItem(t[i],i);n.parent=this.rankContentScrollView.content,this.listChild.push(n)}}},instanceItem:function(t,e){var i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.rankItemPrefab)),i.getComponent("Slot5RankItem").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.rankContentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},showListRankNode:function(){this.rankContentScrollView.node.active=!0}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],Slot5Reels:[function(t,e,i){"use strict";cc._RF.push(e,"c0162Iq7QJOYJcDz5bLYpLd","Slot5Reels");t("../../util/RandomUtil"),t("../../helper/Config");var o=t("../../util/FormatUtil"),n=t("./Slot5Reel"),s=t("./Slot5Constant");cc.Class({extends:cc.Component,properties:{slotReels:[n],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5Lines=t.Slot5Lines,this.Slot5SelectLine=t.Slot5SelectLine,this.Slot5Effect=t.Slot5Effect,this.Slot5X=t.Slot5X,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_free,r=(t.list_bonus_prize,t.remain_free),c=t.win_type;this.listDataPrize=s.concat(a),this.spinReels(e,c,o,i,n,r,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_free,r=t.remain_free,c=t.win_type;this.listDataPrize=s.concat(a),this.spinReels(e,c,o,i,n,r,t)},spinReels:function(t,e,i,o,n,a,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,s.SLOT5_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,s.SLOT5_TOTAL_ITEM_IN_REEL+5),this.slotReels[2].spin(l,s.SLOT5_TOTAL_ITEM_IN_REEL+10),this.slotReels[3].spin(u,s.SLOT5_TOTAL_ITEM_IN_REEL+15),this.slotReels[4].spin(d,s.SLOT5_TOTAL_ITEM_IN_REEL+20,!0,e,i,o,n,a,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.Slot5Lines.showLines(this.listDataPrize);for(var t=this.getIndexItemByLineId(this.listDataPrize),e=0,i=t.length;e<i;e++){var o=t[e]-1;this.showEffectItem(this.listItemNodeSameDataDisplay[o])}}},showEffectItem:function(t){if(t){var e=t.parent.convertToWorldSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),o=cc.instantiate(this.itemPrefab);o.getComponent("Slot5Item").init(t.getComponent("Slot5Item").getIndex()),o.getComponent("Slot5Item").showEffect(),o.setPosition(i),o.parent=this.listItemEffectNode,this.itemEffectNode.active=!0}},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot5.Slot5State.isAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize;this.Slot5Lines.showLine(t),this.Slot5Lines.showMoney(e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=s.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,o=e.length;i<o;i++){var n=this.listItemNodeSameDataDisplay[e[i]-1];n&&n.getComponent("Slot5Item").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("Slot5Item").hideEffect()}},getItemByCol:function(t,e){for(var i=[],o=0;o<s.SLOT5_NUMBER_ITEM_IN_REEL;o++){var n=this.slotReels.length*o+e;i.push(t[n])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var n=t[i].line-1,a=s.LIST_INDEX_NUMBER_IN_LINE[n];e=e.concat(a)}return o.deduplicate(e)},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.Slot5Lines.reset()},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./Slot5Constant":"Slot5Constant","./Slot5Reel":"Slot5Reel"}],Slot5Reel:[function(t,e,i){"use strict";cc._RF.push(e,"9b736Zc3cdK6521iarlDgiv","Slot5Reel");var o=t("../../util/RandomUtil"),n=(t("../../helper/Config"),t("./Slot5Constant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab},init:function(t,e){this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5Reels=t.Slot5Reels,this.Slot5Lines=t.Slot5Lines,this.Slot5X=t.Slot5X,this.Slot5Effect=t.Slot5Effect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[]),cc.test=this},spin:function(t,e,i,o,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=void 0;(m=l===e-1||l===e-2||l===e-3?this.instanceItem(u,!0):this.instanceItem(u,!1)).setPosition(0,(l+1)*n.SLOT5_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.Slot5Reels.setItemListPrizeByIndex(m,d)}var p=(e-1)*n.SLOT5_DISTANCE_TWO_ITEMS,f=this.Slot5.isFastSpin()?p/n.SLOT5_SPEED_SPIN_CARD/2:p/n.SLOT5_SPEED_SPIN_CARD,g=cc.moveTo(f,this.node.x,-p).easing(cc.easeInOut(3)),_=(cc.callFunc(function(){this.node.getComponent(cc.Animation).play()},this),this.node.getComponent(cc.Animation)._defaultClip._duration),S=(cc.delayTime(_),cc.callFunc(function(){i&&(this.Slot5.Slot5State.isAutoSpin()||this.Slot5.Slot5State.setFinish(),this.Slot5Reels.showAllEffectItems(),this.showEffectPrize(o,a,r,c,s,h))},this)),C=cc.delayTime(.2);this.node.runAction(cc.sequence(g,C,S))},showEffectPrize:function(t,e,i,o,s,a){switch(t){case n.WIN_TYPE_NORMAL:case n.WIN_TYPE_BIG_WIN:this.Slot5.Slot5Effect.showWinNormal(s);break;case n.WIN_TYPE_SUPER_BIG_WIN:this.Slot5.Slot5Effect.showBigWin(s);break;case n.WIN_TYPE_JACKPOT:this.Slot5.Slot5Effect.showJackpot(s)}var r=this.getTimeEffect(t);t!==n.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot5.Slot5Effect.hideAll(),this.Slot5.Slot5State.isAutoSpin()&&!e?this.Slot5UI.showSpinDisableButton():this.Slot5UI.showSpinButton(),i?((this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot5.Slot5Effect.showFreeSpin(),this.setSpinFree(!0),this.setNumberSpinFree(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.Slot5Effect.showBonus(a):this.Slot5.Slot5State.isAutoSpin()?this.Slot5.spin():(this.Slot5.Slot5State.setStop(),i&&(this.Slot5UI.showSpinFreeButton(o),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot5.Slot5Effect.hideAll(),this.Slot5.spin()}.bind(this),2e3))),this.Slot5Reels.showEffectLine()}.bind(this),r)):(e&&this.Slot5Effect.showBonus(a),i&&(this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot5.Slot5Effect.showFreeSpin(),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot5.Slot5Effect.hideAll(),i?(this.Slot5.spin(),this.setSpinFree(!0),this.setNumberSpinFree(o),this.Slot5UI.showSpinFreeButton(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot5.Slot5State.isAutoSpin()?e||this.Slot5.spin():this.Slot5.Slot5State.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot5.Slot5Effect.hideAll(),this.Slot5.Slot5State.isAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot5.spin()}.bind(this),1e3)):this.Slot5.Slot5State.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<n.SLOT5_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=o.getRandomInt(0,n.SLOT5_LIST_ICON.length-1);return n.SLOT5_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e],!0);i.setPosition(0,(1-e)*n.SLOT5_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.itemPrefab)),i.getComponent("Slot5Item").reset(),i.getComponent("Slot5Item").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},getTimeEffect:function(t){return t===n.WIN_TYPE_NORMAL||t===n.WIN_TYPE_ZERO||t===n.WIN_TYPE_BIG_WIN?1e3*n.TIME_SHOW_WIN_NORMAL:t===n.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_SHOW_BIGWIN:t===n.WIN_TYPE_JACKPOT?1e3*n.TIME_SHOW_JACKPOT:1e3*n.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.getComponent(cc.Animation).stop(),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./Slot5Constant":"Slot5Constant"}],Slot5SelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"099e5KHm2ZIW4JbEixWZbCF","Slot5SelectLine");var o=t("../items/Slot5SelectNumberLineItem"),n=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node,listSelectNumLineItem:[o]},init:function(t){for(var e in this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5Label=t.Slot5Label,this.Slot5Lines=t.Slot5Lines,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.totalLineSelected=0},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.Slot5Label.initTotalNumberLine(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.Slot5Lines.showNumberLines(t)},showLines:function(t){this.Slot5Lines.showLines(t)},showLine:function(t){this.Slot5Lines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showEffect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line_id-1;this.listSelectNumLineItem[i].showEffect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isFreeSpin()||this.Slot5.isBonus()||this.Slot5.isTest())this.Slot5.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isFreeSpin()||this.Slot5.isBonus()||this.Slot5.isTest())this.Slot5.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isFreeSpin()||this.Slot5.isBonus()||this.Slot5.isTest())this.Slot5.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isFreeSpin()||this.Slot5.isBonus()||this.Slot5.isTest())this.Slot5.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isFreeSpin()||this.Slot5.isBonus()||this.Slot5.isTest())this.Slot5.showToast(n.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot5.Audio.playClick(),!this.Slot5.isCanChangeBet()||this.Slot5.isFreeSpin()||this.Slot5.isBonus()||this.Slot5.isTest()?this.Slot5.showToast(n.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0)},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../items/Slot5SelectNumberLineItem":"Slot5SelectNumberLineItem"}],Slot5SelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"35649zNObtK1q2yDTQmdPAo","Slot5SelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot5=t,this.Slot5SelectLine=t.Slot5SelectLine},onLoad:function(){var t=this;this.selected=this.onSelectButtonNode.active,this.onMouseEnter=function(){t.Slot5SelectLine.showLine(t.line)},this.onMouseLeave=function(){t.Slot5SelectLine.showLine(0)},cc.sys.isBrowser&&(this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.offSelectButtonNode.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){this.Slot5.Audio.playClick(),this.selected?this.unSelect():this.select()},select:function(){this.setSelected(!0),this.Slot5SelectLine.itemIsSelected(),this.showSelect()},unSelect:function(){this.setSelected(!1),this.Slot5SelectLine.setLineItemUnSelected(),this.Slot5SelectLine.itemIsSelected(),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},showEffect:function(){},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected},reset:function(){this.getSelected()?this.showSelect():this.showUnSelect()}}),cc._RF.pop()},{}],Slot5State:[function(t,e,i){"use strict";cc._RF.push(e,"118f0xSxPZEGLpK/D3byoKh","Slot5State");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot5=t,this.Slot5UI=t.Slot5UI,this.Slot5SelectLine=t.Slot5SelectLine},setStop:function(){this.currentState=this.STOP,this.Slot5.isFreeSpin()&&!this.Slot5.isTest()?this.Slot5UI.showSpinFreeButton():this.Slot5UI.showSpinButton(),this.Slot5UI.showAutoSpinButton(),this.Slot5SelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot5.isFreeSpin()&&!this.Slot5.isTest()?this.Slot5UI.showSpinFreeButton():this.Slot5UI.showSpinDisableButton(),this.Slot5UI.showAutoSpinDisableButton(),this.Slot5SelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot5.isFreeSpin()&&!this.Slot5.isTest()?this.Slot5UI.showSpinFreeButton():this.Slot5UI.showSpinDisableButton(),this.Slot5UI.showAutoSpinDisableButton(),this.Slot5SelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot5.isFreeSpin()&&!this.Slot5.isTest()?this.Slot5UI.showSpinFreeButton():this.Slot5UI.showSpinDisableButton(),this.Slot5UI.showStopAutoSpinButton(),this.Slot5SelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot5.Slot5Reels.hideEffectItem(),this.Slot5.Slot5Label.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],Slot5UI:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"7acda4/YDhI+p5QeDMy66du","Slot5UI");var s=t("../../util/FormatUtil");cc.Class((n(o={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,xPrizeNode:cc.Node,jackpotNode:cc.Node,idSpinNode:cc.Node,autoSpinSettingFormNode:cc.Node,bonusResultFormNode:cc.Node,slot5FormNode:cc.Node,selectLineFormNode:cc.Node,prizeFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node},init:function(t){this.Slot5=t},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusResultFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormRankHistory=this.slot5FormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormPrize=this.prizeFormNode.getComponent("DialogForm"),this.dialogFormSelectLine=this.selectLineFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0,this.idSpinNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0,this.idSpinNode.active=!1},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string="Quay Mi\u1ec5n Ph\xed +"+s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0}),n(o,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.showDialog(t)}),n(o,"showX",function(){this.xPrizeNode.active=!0}),n(o,"hideX",function(){this.xPrizeNode.active=!1}),n(o,"showJackpot",function(){this.jackpotNode.active=!0}),n(o,"hideJackpot",function(){this.jackpotNode.active=!1}),n(o,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),n(o,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),n(o,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),n(o,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),n(o,"showRankHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankHistory.showDialog(t)}),n(o,"hideRankHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRankHistory.hideDialog(t)}),n(o,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),n(o,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),n(o,"showPrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.showDialog(t)}),n(o,"hidePrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.hideDialog(t)}),n(o,"showSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)}),n(o,"hideSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)}),n(o,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),n(o,"showProcessingNode",function(){this.processingNode.active=!0}),n(o,"hideProcessingNode",function(){this.processingNode.active=!1}),n(o,"showProcessingSceneNode",function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)}),n(o,"hideProcessingSceneNode",function(){this.processingSceneNode.active=!1}),o)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],Slot5X:[function(t,e,i){"use strict";cc._RF.push(e,"c504cknGYBEnKdVFJS2gQqC","Slot5X"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot5=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot5:[function(t,e,i){"use strict";cc._RF.push(e,"4de9e/FQp5NXbGPQXaEWWOy","Slot5");var o=t("../../base/BaseScene"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./Slot5UI"),r=t("./Slot5Header"),c=t("./Slot5Control"),h=t("./Slot5Label"),l=t("./Slot5Reels"),u=t("./Slot5Lines"),d=t("./Slot5Effect"),m=t("./Slot5Bonus"),p=t("./Slot5X"),f=t("./Slot5Constant"),g=t("./Slot5State"),_=t("./Slot5HandlerRequest"),S=t("../../prefab/mini-game/item/MiniGameXPer"),C=t("./form/Slot5AutoSpinSetting"),N=t("./form/Slot5BonusResult"),E=t("./form/Slot5Form"),T=t("./form/Slot5SelectLine"),I=t("../../prefab/form/Setting"),v=t("../../prefab/form/LogOut"),y=(t("../../prefab/form/Recharge"),t("../../prefab/form/Tutorial")),B=(t("../../prefab/News"),t("../../prefab/Toast")),L=t("../../ui/dialog/DialogMessage"),R=t("../../ui/Processing"),A=t("../../ui/ProcessingScene"),M=t("../../object/Audio"),b=t("../../object/Music");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,minigamePrefab:cc.Prefab,minigameContainerNode:cc.Node,Slot5UI:a,Slot5Header:r,Slot5Control:c,Slot5Label:h,Slot5SelectLine:T,Slot5Reels:l,Slot5Effect:d,Slot5Lines:u,Slot5Bonus:m,Slot5Form:E,Slot5X:p,MiniGameXPer:S,Slot5AutoSpinSetting:C,Slot5BonusResult:N,Tutorial:y,Setting:I,LogOut:v,Toast:B,DialogMessage:L,Processing:R,ProcessingScene:A,Audio:M,Music:b},onLoad:function(){this._super(),this.setSceneName(n.SCENE_GAME_SLOT_5),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.Slot5State=g,this.Slot5HandlerRequest=_,this.Slot5State.init(this),this.Slot5HandlerRequest.init(this),this.Slot5UI.init(this),this.Slot5Header.init(this),this.Slot5Control.init(this),this.Slot5Label.init(this),this.Slot5SelectLine.init(this),this.Slot5Reels.init(this),this.Slot5Effect.init(this),this.Slot5Lines.init(this),this.Slot5Bonus.init(this),this.Slot5Form.init(this),this.Slot5X.init(this),this.Slot5AutoSpinSetting.init(this),this.Slot5BonusResult.init(this),this.Setting.init(this),this.LogOut.init(this),this.Tutorial.init(this),this.updateMoneyGold(),this.Slot5State.setStop(),this.onResponseBind=this.Slot5HandlerRequest.onResponse.bind(this.Slot5HandlerRequest),this.onUserVariablesUpdateBind=this.Slot5HandlerRequest.onUserVariablesUpdate.bind(this.Slot5HandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.initDataBet(),this.Slot5SelectLine.selectAllItem(),this.Slot5UI.showContentGame(),this.Slot5UI.hideX(),this.Slot5Form.Slot5Rank.initData(this.dataRank)},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:88e6,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:1e7}},handleJackpot:function(t){var e=0,i=1;for(var o in this.info){var n=void 0;switch(this.info[o].spin_fee){case 100:this.info[o].jackpot=t.data[0],(n=t.data[3])&&(this.info[o].x_jackpot=n[0]);break;case 1e3:this.info[o].jackpot=t.data[1],n=t.data[3],t.data[3]&&(this.info[o].x_jackpot=n[1]);break;case 1e4:this.info[o].jackpot=t.data[2],(n=t.data[3])&&(this.info[o].x_jackpot=n[2])}this.info[o].spin_fee===this.bet&&(e=this.info[o].jackpot,i=this.info[o].x_jackpot)}this.isTest()||(this.Slot5Label.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){var e=t.data;this.is_spin=!1,this.Slot5State.isAutoSpin()||this.Slot5State.setSpinning(),this.initInfo(e),this.Slot5Label.handleSpin(e),this.Slot5Reels.handleSpin(e),this.Slot5Form.Slot5History.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.win_prize=t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.remain_spin_free>0&&e.remain_spin_free--},handleSpinDemo:function(t){var e=t.data;this.is_spin=!1,e.win_type===f.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.initInfoTest(e),this.Slot5State.setSpinning(),this.Slot5Label.handleSpinDemo(e),this.Slot5Reels.handleSpinDemo(e)},initInfoTest:function(t){this.getTestInfo().is_free=t.is_free},handleSpinFail:function(t){this.is_spin=!1,this.showToast(t.msg),this.Slot5State.setStop()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleGetTop:function(t){},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg),this.Recharge.RechargeGoldForm.clear()},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.Slot5Form.Slot5Rank.initData(this.dataRank)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.Slot5Chat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.Slot5Chat.addChat(e)}else this.Slot5Chat.addChatFail(t.msg)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t)},initDataTest:function(){this.setIsTest(!0),this.bet=this.testInfo.spin_fee,this.initTestData(),this.Slot5Reels.reset(),this.Slot5SelectLine.selectAllItem()},initTestData:function(){this.Slot5Label.setBet(this.bet),this.initBetData(this.testInfo),this.Slot5Label.setMoney(this.testInfo.money),this.Slot5Label.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingSceneNode(),this.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick(),this.Slot5UI.showRechargeFormNode()},spin:function(){if(this.line_player_choose=this.Slot5SelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.is_spin){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};if(this.isTest()){this.sendRequest.send(f.SPIN_DEMO,t);var e=this.getTestInfo();e.is_free||(e.money-=2e5,this.Slot5Label.setMoney(e.money))}else this.sendRequest.send(f.SPIN,t);this.is_spin=!0}}else this.showToast(s.SLOT3_NOT_SELECT_LINE),this.Slot5State.setStop()},updateMoneyGold:function(){this.isTest()||this.Slot5Label.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();if(this.initBetData(e),this.Slot5Label.setMoney(this.getMoney()),this.Slot5Label.setBet(t),e){var i=e.x_jackpot?e.x_jackpot:1;this.MiniGameXPer.setXMiniGame(i)}},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_free||t.remain_spin_free,o=this.Slot5SelectLine.getLineSelected().length;this.Slot5Label.setJackpot(e,!1),this.Slot5Label.initTotalNumberLine(o),i?this.Slot5UI.showSpinFreeButton(i):this.Slot5UI.showSpinButton()}},getBet:function(){return this.bet},isAutoSpin:function(){return this.Slot5State.isAutoSpin()},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.Slot5Bonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee==this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setFastSpin:function(t){this.fast_spin=t},isFastSpin:function(t){return this.fast_spin},setFistBet:function(t){this.firstBet=t},getFistBet:function(t){this.firstBet=t},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.Slot5State.isStop()},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t,e){this.Slot5UI.showBonusResultForm(),this.Slot5BonusResult.setMoney(t,e)},hideBonusResult:function(){this.Slot5UI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},showDialogMessage:function(t,e){this.Slot5UI.showDialogMessage(t,e)},hideDialogMessage:function(){this.Slot5UI.hideDialogMessage()},showProcessingSceneNode:function(){this.Slot5UI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.Slot5UI.hideProcessingSceneNode()},showProcessingNode:function(){this.Slot5UI.showProcessingNode()},hideProcessingNode:function(){this.Slot5UI.hideProcessingNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:3e4,display_slot_data:["G","H","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!0,is_free:!1,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=0,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=2,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree2:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=1,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree3:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=0,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree4:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=3,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Recharge":"Recharge","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","./Slot5Bonus":"Slot5Bonus","./Slot5Constant":"Slot5Constant","./Slot5Control":"Slot5Control","./Slot5Effect":"Slot5Effect","./Slot5HandlerRequest":"Slot5HandlerRequest","./Slot5Header":"Slot5Header","./Slot5Label":"Slot5Label","./Slot5Lines":"Slot5Lines","./Slot5Reels":"Slot5Reels","./Slot5State":"Slot5State","./Slot5UI":"Slot5UI","./Slot5X":"Slot5X","./form/Slot5AutoSpinSetting":"Slot5AutoSpinSetting","./form/Slot5BonusResult":"Slot5BonusResult","./form/Slot5Form":"Slot5Form","./form/Slot5SelectLine":"Slot5SelectLine"}],SlotAutoSpinSetting:[function(t,e,i){"use strict";cc._RF.push(e,"46a71Vi0JFHSYyERFvb5jnE","SlotAutoSpinSetting");var o=t("../SlotConstant"),n=t("../../../util/FormatUtil"),s=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{numberSpinLabel:cc.Label,numberSpinSlider:cc.Slider,stopGameJackpotToggle:cc.Toggle,stopGameWinToToggle:cc.Toggle,stopGameLoseToToggle:cc.Toggle,stopGameMaxWinToggle:cc.Toggle,stopGameWinToEditBox:cc.EditBox,stopGameLoseToEditBox:cc.EditBox,stopGameMaxWinEditBox:cc.EditBox},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[0],this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1,this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot.DialogMessage.node.active&&!this.Slot.Processing.node.active},onNumberSpinSlider:function(){var t=this.numberSpinSlider.progress;t>=1-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[7],t=1):t>=6/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[6],t=6/7):t>=5/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[5],t=5/7):t>=.5?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[4],t=4/7):t>=3/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[3],t=3/7):t>=2/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[2],t=2/7):t>=1/7-1/14?(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[1],t=1/7):(this.defaultNumberAutoSpin=s.SLOT_NUMBER_AUTO_SPIN[0],t=0),this.numberSpinSlider.progress=t},onStopGameWinToChange:function(){var t=this.stopGameWinToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameWinToEditBox.string=e},onStopGameLoseToChange:function(){var t=this.stopGameLoseToEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameLoseToEditBox.string=e},onStopGameMaxWinChange:function(){var t=this.stopGameMaxWinEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.stopGameMaxWinEditBox.string=e},onResetClick:function(){this.stopGameJackpotToggle.isChecked=!1,this.stopGameWinToToggle.isChecked=!1,this.stopGameLoseToToggle.isChecked=!1,this.stopGameMaxWinToggle.isChecked=!1,this.stopGameWinToEditBox.string="",this.stopGameLoseToEditBox.string="",this.stopGameMaxWinEditBox.string="",this.numberSpinSlider.progress=0},onSpinClick:function(){this.stopGameJackpot=this.stopGameJackpotToggle.isChecked,this.stopGameWinTo=this.stopGameWinToToggle.isChecked,this.stopGameLoseTo=this.stopGameLoseToToggle.isChecked,this.stopGameMaxWin=this.stopGameMaxWinToggle.isChecked,this.winTo=parseInt(n.getOnlyNumberInString(this.stopGameWinToEditBox.string)),this.loseTo=parseInt(n.getOnlyNumberInString(this.stopGameLoseToEditBox.string)),this.maxWin=parseInt(n.getOnlyNumberInString(this.stopGameMaxWinEditBox.string)),this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!0,this.numberAutoSpin=this.defaultNumberAutoSpin,this.Slot.SlotState.setAutoSpin(),this.Slot.spin(),this.dialogForm.hideDialog(!1),this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin)},handleSpin:function(t){if(this.Slot.SlotState.isAutoSpin()){var e=t.win_type,i=t.total_prize_amount||t.win_prize,s=i-this.Slot.getTotalBet();this.addTotalMoneyChange(s),this.numberAutoSpin--,e===o.WIN_TYPE_JACKPOT&&(this.isJackpot=!0),this.lastWin=i,this.numberSpinLabel.string=n.numberWithCommas(this.numberAutoSpin)}},addTotalMoneyChange:function(t){this.totalMoneyChange+=t},stopAutoSpin:function(){this.autoSpin=!1},isAutoSpin:function(){return this.autoSpin},checkAutoSpin:function(){var t=this.numberAutoSpin>0,e=!this.stopGameWinTo||this.totalMoneyChange<this.winTo,i=!this.stopGameLoseTo||this.totalMoneyChange>-this.loseTo,o=!this.stopGameMaxWin||this.lastWin<this.maxWin,n=!this.stopGameJackpot||!this.isJackpot;return this.autoSpin&&t&&e&&i&&o&&n},reset:function(){this.stopGameJackpot=!1,this.stopGameWinTo=!1,this.stopGameLoseTo=!1,this.stopGameMaxWin=!1,this.winTo=0,this.loseTo=0,this.maxWin=0,this.lastWin=0,this.totalMoneyChange=0,this.isJackpot=!1,this.autoSpin=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../SlotConstant":"SlotConstant"}],SlotBonusItem:[function(t,e,i){"use strict";cc._RF.push(e,"bc143cZsThJ9JyiAosV1Jny","SlotBonusItem");var o=t("../../util/FormatUtil"),n=(t("../../helper/Config"),t("../../util/BrowserUtil")),s=t("../../helper/Message");t("../../scene/game-slot/SlotConstant");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,openNode:cc.Node,endNode:cc.Node,moneyLabel:cc.Label},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotBonus=t.SlotBonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.onMouseEnter=function(){t.isOpen()||n.showCursorPointer()},this.onMouseLeave=function(){n.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClick:function(){this.Slot.SlotState.isAutoSpin()?this.Slot.showToast(s.SLOT2_AUTOSPIN_NOT_CHANGE):this.isClicked()||this.SlotBonus.isStateStop()||(this.setClicked(!0),this.SlotBonus.setStateStop(!0),this.SlotBonus.onItemClick(this))},onClickIsAutoSpin:function(){this.isClicked()||this.SlotBonus.isStateStop()||(this.setClicked(!0),this.SlotBonus.setStateStop(!0),this.SlotBonus.onItemClick(this))},openItem:function(t){t>0?(this.defaultNode.active=!1,this.openNode.active=!0,this.moneyLabel.string=o.numberWithCommas(t)):(this.defaultNode.active=!1,this.endNode.active=!0)},setOpen:function(t){this.is_open=t},isOpen:function(){return this.is_open},setClicked:function(t){this.is_clicked=t},isClicked:function(){return this.is_clicked},hideAll:function(){this.defaultNode.active=!0,this.openNode.active=!1,this.endNode.active=!1},reset:function(){this.hideAll(),this.setOpen(!1),this.setClicked(!1)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message","../../scene/game-slot/SlotConstant":"SlotConstant","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],SlotBonusResult:[function(t,e,i){"use strict";cc._RF.push(e,"468b00OvKNC4blr57h9OIR8","SlotBonusResult");var o=t("../../../util/FormatUtil"),n=t("../../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{contentLabel:cc.Label,moneyJackpotItem:n},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot.DialogMessage.node.active&&!this.Slot.Processing.node.active},setMoney:function(t,e){var i=parseInt(t/e);this.moneyJackpotItem.setMoneyWithoutAnimation(t),this.contentLabel.string=o.numberWithCommas(i)+" x "+e+" = "}}),cc._RF.pop()},{"../../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../../util/FormatUtil":"FormatUtil"}],SlotBonus:[function(t,e,i){"use strict";cc._RF.push(e,"589ca4BarNEFZeTFfwjoCrm","SlotBonus");var o=t("../../prefab/mini-game/item/JackpotItem"),n=(t("../../util/FormatUtil"),t("../../util/RandomUtil")),s=(t("../../util/BrowserUtil"),t("../../prefab/slot/SlotBonusItem")),a=t("../../prefab/slot/SlotMiniGameItem"),r=t("./SlotConstant");cc.Class({extends:cc.Component,properties:{moneyBonusJackpotItem:o,minigameBonusNode:cc.Node,closeMiniGameNode:cc.Node,slotBonusItem:[s],slotMiniGameItem:[a]},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotX=t.SlotX;for(var e=0;e<this.slotBonusItem.length;e++)this.slotBonusItem[e].init(t);for(var i=0;i<this.slotMiniGameItem.length;i++)this.slotMiniGameItem[i].init(t)},onLoad:function(){this.dialogMinigame=this.minigameBonusNode.getComponent("DialogForm")},initData:function(t){this.data=t},initContent:function(){this.data&&(this.list_bonus_prize=this.data.list_bonus_prize,this.bonus_prize=this.data.bonus_prize,this.total_prize=0,this.list_bonus_prize.length<10&&this.list_bonus_prize.push({line:0,prize:0}),this.setMoneyBonus(this.total_prize))},onEnable:function(){this.reset(),this.initContent(),this.SlotUI.hideJackpot(),this.Slot.SlotState.isAutoSpin()&&this.autoOpenBox()},onDisable:function(){this.SlotUI.showJackpot(),this.data.is_free?this.Slot.spin():this.Slot.SlotState.isAutoSpin()?this.Slot.spin():this.Slot.SlotState.setStop()},autoOpenBox:function(){clearInterval(this.intervalAutoOpenBonusItem),this.intervalAutoOpenBonusItem=setInterval(function(){clearInterval(this.intervalAutoOpenBonusItem);var t=this.getItemBonusNotOpen();t&&t.onClickIsAutoSpin()}.bind(this),1200)},onItemClick:function(t){if(this.list_bonus_prize.length>0){var e=this.list_bonus_prize[0];this.list_bonus_prize.splice(0,1);var i=e.prize;this.total_prize+=i,this.openBonusItem(t,i)}else console.log("THOI TH\xd4I. M\u1ede H\u1ebeT C\xd2N \u0110\xc2U")},openBonusItem:function(t,e){t.openItem(e),this.setStateStop(!1),this.checkFinishMiniGameBonus(),this.setMoneyBonus(this.total_prize)},openItemMiniGame:function(t){this.xPrize=parseInt(this.bonus_prize/this.total_prize);var e=this.getDataXPrizeDisplay(this.data,this.xPrize);t.openItem(this.xPrize,!0),this.openMiniGameItemByMultipBet(e[0]),this.openMiniGameItemByMultipBet(e[1]),this.showCloseMiniGame(),this.showResultAndHideBonus()},openMiniGameItemByMultipBet:function(t){this.getItemMiniGameNotOpen().openItem(t,!1)},getItemMiniGameNotOpen:function(){var t=[];for(var e in this.slotMiniGameItem)this.slotMiniGameItem[e].isOpen()||this.slotMiniGameItem[e].isClicked()||t.push(this.slotMiniGameItem[e]);return t[n.getRandomInt(0,t.length-1)]},getItemBonusNotOpen:function(){var t=[];for(var e in this.slotBonusItem)this.slotBonusItem[e].isOpen()||this.slotBonusItem[e].isClicked()||t.push(this.slotBonusItem[e]);return t[n.getRandomInt(0,t.length-1)]},getDataXPrizeDisplay:function(t,e){for(var i=t.display_slot_data,o=0,n=r.LIST_XPRIZE_BONUS_4,s=0,a=i.length;s<a;s++)r.slot_ICON_BONUS===i[s]&&o++;3===o&&(n=r.LIST_XPRIZE_BONUS_3.slice()),4===o&&(n=r.LIST_XPRIZE_BONUS_4.slice()),5===o&&(n=r.LIST_XPRIZE_BONUS_5.slice());for(var c=0,h=n.length;c<h;c++)n[c]===e&&n.splice(c,1);return n},isStateStop:function(){return this.is_StateStop},setStateStop:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.is_StateStop=t},setMoneyBonus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0==t?this.moneyBonusJackpotItem.setMoneyWithoutAnimation(0):this.moneyBonusJackpotItem.setMoneyWithStartNumberZero(t)},checkFinishMiniGameBonus:function(){this.list_bonus_prize.length<=0?(clearInterval(this.intervalShowMiniGameForm),this.intervalShowMiniGameForm=setInterval(function(){this.showMiniGame(),clearInterval(this.intervalShowMiniGameForm)}.bind(this),1500),this.Slot.SlotState.isAutoSpin()&&(this.intervalAutoOpenMiniGameItem=setInterval(function(){this.getItemMiniGameNotOpen().onClickIsAutoSpin(),clearInterval(this.intervalAutoOpenMiniGameItem)}.bind(this),3500))):this.Slot.SlotState.isAutoSpin()&&this.autoOpenBox()},showResultAndHideBonus:function(){clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),this.intervalShowResultForm=setInterval(function(){this.Slot.showBonusResult(this.data.bonus_prize,this.xPrize),this.Slot.SlotLabel.setLastMoneyWin(this.data.bonus_prize,!0),clearInterval(this.intervalShowResultForm)}.bind(this),2500),this.intervalShowGameContent=setInterval(function(){this.SlotUI.showContentGame(),clearInterval(this.intervalShowGameContent)}.bind(this),3e3)},showMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.showDialog(t)},hideMiniGame:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogMinigame.hideDialog(t)},showCloseMiniGame:function(){this.closeMiniGameNode.active=!0},hideCloseMiniGame:function(){this.closeMiniGameNode.active=!1},reset:function(){for(var t in this.setStateStop(!1),this.list_bonus_prize=[],this.bonus_prize=0,this.mini_game_bonus_prize=0,this.total_prize=0,this.xPrize=1,this.setMoneyBonus(0),this.hideCloseMiniGame(),clearInterval(this.intervalShowResultForm),clearInterval(this.intervalShowGameContent),clearInterval(this.intervalAutoOpenMiniGameItem),clearInterval(this.intervalAutoOpenBonusItem),clearInterval(this.intervalShowMiniGameForm),this.minigameBonusNode.active&&(this.minigameBonusNode.active=!1),this.slotBonusItem)this.slotBonusItem[t].reset();for(var e in this.slotMiniGameItem)this.slotMiniGameItem[e].reset()}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../prefab/slot/SlotBonusItem":"SlotBonusItem","../../prefab/slot/SlotMiniGameItem":"SlotMiniGameItem","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil","../../util/RandomUtil":"RandomUtil","./SlotConstant":"SlotConstant"}],SlotConstant:[function(t,e,i){"use strict";cc._RF.push(e,"8fe0eWw0DdH0oRQTxFNK9SG","SlotConstant");e.exports={SPIN:"SPIN",SPIN_DEMO:"SPIN_DEMO",SPIN_BONUS:"SPIN_BONUS",SPIN_BONUS_DEMO:"SPIN_BONUS_DEMO",SPIN_FAIL:"SPIN_FAIL",JACKPOT:"jackpot",UPDATE_BIGWIN:"UPDATE_BIGWIN",GET_TOP:"GET_TOP",WIN_TYPE_ZERO:0,WIN_TYPE_NORMAL:1,WIN_TYPE_BIG_WIN:2,WIN_TYPE_SUPER_BIG_WIN:3,WIN_TYPE_JACKPOT:4,ITEM_SCALE:.9,BONUS_KEY:0,BONUS_MINIGAME:2,BONUS_MONEY:1,SLOT_DISTANCE_TWO_ITEMS:156,SLOT_SPEED_SPIN_CARD:1e4,SLOT_DELAY_SPIN:2e3,SLOT_NUMBER_ITEM_IN_REEL:3,SLOT_TOTAL_ITEM_IN_REEL:31,SLOT_DELAY_SHOW_MONEY_PRIZE:1e3,SLOT_TIME_DELAY_FINISH:3e3,SLOT_NUMBER_AUTO_SPIN:[10,20,50,100,200,500,1e3,5e3],SLOT_LIST_ICON:["A","B","C","D","E","F","G","H","WILD","BONUS","FREE"],SLOT_ICON_BONUS:"BONUS",LIST_XPRIZE_BONUS_3:[1,2,3],LIST_XPRIZE_BONUS_4:[2,3,4],LIST_XPRIZE_BONUS_5:[3,4,5],NUM_IN_HISTORY:30,LIST_INDEX_NUMBER_IN_LINE:[[6,7,8,9,10],[1,2,3,4,5],[11,12,13,14,15],[1,2,8,4,5],[11,12,8,14,15],[6,2,3,4,10],[6,12,13,14,10],[1,2,8,14,15],[11,12,8,4,5],[6,12,8,4,10],[6,2,8,14,10],[1,7,8,9,5],[11,7,8,9,15],[1,7,13,9,5],[11,7,3,9,15],[6,7,3,9,10],[6,7,13,9,10],[1,2,13,4,5],[11,12,3,14,15],[1,12,13,14,5],[11,2,3,4,15],[6,2,13,4,10],[6,12,3,14,10],[1,12,3,14,5],[11,2,13,4,15]],TIME_SHOW_JACKPOT:5,TIME_SHOW_FREESPIN:3.5,TIME_SHOW_BONUS:4,TIME_SHOW_BIGWIN:4,TIME_SHOW_WIN_NORMAL:2.5},cc._RF.pop()},{}],SlotControl:[function(t,e,i){"use strict";cc._RF.push(e,"467396354NAh4lvbHvyClX/","SlotControl");var o=t("../../helper/Message"),n=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){},onSpinClick:function(){this.Slot.Audio.playClick(),!this.Slot.isBonus()&&this.Slot.isCanChangeBet()&&this.Slot.spin()},onAutoSpinClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isTest()||this.Slot.isBonus()||this.Slot.isFreeSpin()?this.Slot.showToast(o.SLOT_NOT_CHANGE_BET):this.SlotUI.showAutoSpinSettingFormNode()},onStopAutoSpinClick:function(){this.Slot.Audio.playClick(),this.Slot.SlotState.setStop(),this.Slot.setSendSpin(!1),this.Slot.SlotAutoSpinSetting.stopAutoSpin()},onAddClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isTest()||this.Slot.isBonus()||this.Slot.isFreeSpin())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot.getBet()===t[e]){++e>=t.length&&(e=0),this.Slot.setFistBet(t[e]),this.Slot.setBet(t[e]);break}},onMinusClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isTest()||this.Slot.isBonus()||this.Slot.isFreeSpin())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else for(var t=n.SLOT_BETS,e=0;e<t.length;e++)if(this.Slot.getBet()===t[e]){--e<0&&(e=t.length-1),this.Slot.setFistBet(t[e]),this.Slot.setBet(t[e]);break}},onSelectLineClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isTest()||this.Slot.isBonus()||this.Slot.isFreeSpin()?this.Slot.showToast(o.SLOT_NOT_CHANGE_BET):this.SlotUI.showSelectLineFormNode()}}),cc._RF.pop()},{"../../helper/Config":"Config","../../helper/Message":"Message"}],SlotEffect:[function(t,e,i){"use strict";cc._RF.push(e,"8c090MhFsJDnYGsyc2nECC3","SlotEffect");var o=t("../../prefab/mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{winNormalNode:cc.Node,bigWinNode:cc.Node,superBigWinNode:cc.Node,jackpotWinNode:cc.Node,bonusNode:cc.Node,freeSpinNode:cc.Node,winNormalJackpotItem:o,bigWinJackpotItem:o,superBigWinJackpotItem:o,jackpotJackpotItem:o,bigWinSkeleton:sp.Skeleton,superBigWinSkeleton:sp.Skeleton,jackpotSkeleton:sp.Skeleton,bonusSkeleton:sp.Skeleton,freeSpinSkeleton:sp.Skeleton},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.Music=t.Music},onLoad:function(){},showWinNormal:function(t,e){this.hideAll(),this.winNormalNode.active=!0,this.winNormalJackpotItem.setMoneyWithoutAnimation(0),this.winNormalJackpotItem.setMoney(t),this.Music.soundWinNormal()},showBigWin:function(t){this.hideAll(),this.bigWinNode.active=!0,this.bigWinSkeleton.setAnimation(0,"bigwin",!0),this.bigWinJackpotItem.node.active=!1,this.Music.soundBigWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.bigWinJackpotItem.node.active=!0,this.bigWinJackpotItem.setMoneyWithoutAnimation(0),this.bigWinJackpotItem.setMoney(t),this.bigWinJackpotItem.node.getComponent(cc.Animation).play()},this)))},showSuperBigWin:function(t){this.hideAll(),this.superBigWinNode.active=!0,this.superBigWinSkeleton.setAnimation(0,"megawin",!0),this.superBigWinJackpotItem.node.active=!1,this.Music.soundMegaWin(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.superBigWinJackpotItem.node.active=!0,this.superBigWinJackpotItem.setMoneyWithoutAnimation(0),this.superBigWinJackpotItem.setMoney(t),this.superBigWinJackpotItem.node.getComponent(cc.Animation).play()},this)))},showJackpot:function(t){this.hideAll(),this.jackpotWinNode.active=!0,this.jackpotSkeleton.setAnimation(0,"jackpot",!0),this.jackpotJackpotItem.node.active=!1,this.Music.soundJackpot(),this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){this.jackpotJackpotItem.node.active=!0,this.jackpotJackpotItem.setMoneyWithoutAnimation(0),this.jackpotJackpotItem.setMoney(t),this.jackpotJackpotItem.node.getComponent(cc.Animation).play()},this)))},showBonus:function(t){this.hideAll(),this.bonusNode.active=!0,this.bonusSkeleton.setAnimation(0,"bonus",!0),this.node.runAction(cc.sequence(cc.delayTime(2.5),cc.callFunc(function(){this.hideAll(),this.node.runAction(cc.sequence(cc.delayTime(.75),cc.callFunc(function(){this.hideAll(),this.Slot.SlotBonus.initData(t),this.SlotUI.showBonus()},this)))},this)))},showFreeSpin:function(){this.hideAll(),this.freeSpinNode.active=!0,this.freeSpinSkeleton.setAnimation(0,"freespin",!0),this.node.runAction(cc.sequence(cc.delayTime(2),cc.callFunc(function(){},this)))},hideAll:function(){this.winNormalNode.active=!1,this.bigWinNode.active=!1,this.superBigWinNode.active=!1,this.jackpotWinNode.active=!1,this.bonusNode.active=!1,this.freeSpinNode.active=!1,this.jackpotJackpotItem.node.getComponent(cc.Animation).stop(),this.superBigWinJackpotItem.node.getComponent(cc.Animation).stop(),this.bigWinJackpotItem.node.getComponent(cc.Animation).stop(),this.bigWinSkeleton.clearTrack(0),this.superBigWinSkeleton.clearTrack(0),this.jackpotSkeleton.clearTrack(0),this.bonusSkeleton.clearTrack(0),this.freeSpinSkeleton.clearTrack(0)}}),cc._RF.pop()},{"../../prefab/mini-game/item/JackpotItem":"JackpotItem"}],SlotGameIconItem:[function(t,e,i){"use strict";cc._RF.push(e,"2dd994LgShN55Q37CPuXJY4","SlotGameIconItem");var o=t("../mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{jackpot100JackpotItem:o,jackpot1kJackpotItem:o,jackpot10kJackpotItem:o},onLoad:function(){},initData:function(t){this.data=t,t&&(this.jackpot100JackpotItem.setMoney(t[0]),this.jackpot1kJackpotItem.setMoney(t[1]),this.jackpot10kJackpotItem.setMoney(t[2]))}}),cc._RF.pop()},{"../mini-game/item/JackpotItem":"JackpotItem"}],SlotHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"574dcsdbFpELo6OnMJtg0xX","SlotHandlerRequest");var o=t("../../helper/Constant"),n=(t("../../helper/Message"),t("./SlotConstant")),s={init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onUserVariablesUpdate:function(t){var e=t.user,i=t.changedVars;if(e.isItMe)for(var n in i)switch(i[n]){case o.MONEY:this.Slot.updateMoneyGold();break;case o.GOLD:break;case o.DIAMOND_EVENT:case o.DIAMOND_LEVEL_EVENT:}},onResponse:function(t){var e=t.params;switch(t.cmd){case o.NEWS:break;case n.JACKPOT:this.Slot.handleJackpot(e);break;case n.SPIN:this.Slot.handleSpin(e);break;case n.SPIN_DEMO:this.Slot.handleSpinDemo(e);break;case n.SPIN_BONUS:case n.SPIN_BONUS_DEMO:break;case n.SPIN_FAIL:this.Slot.handleSpinFail(e);break;case n.UPDATE_BIGWIN:this.Slot.handleUpdateBigwin(e);break;case n.GET_TOP:break;case o.MINIGAME_REQUEST:this.Slot.MiniGame&&this.Slot.MiniGame.handleRequest(e);break;case o.REQUEST_AWARD_CARD:this.Slot.handleAward(e);break;case o.REQUEST_RECHARGE_GOLD:this.Slot.handleechargeGold(e);break;case o.REQUEST_PLAYER_RECEIVE_ALERT:this.Slot.handleAlert(e);break;case o.REQUEST_PLAYER_RECEIVE_NEW_MESSAGE:this.Slot.handleNewMessage(e);break;case o.REQUEST_ACHIVEMENTED_QUEST:this.Slot.handleAchivementedQuest(e);break;case o.REQUEST_PLUS_LUCKY_WHEEL_FREE:this.Slot.handlePlusLuckyWheelFree(e);break;case o.UPDATE_MINIGAME_FREE:this.Slot.MiniGame&&this.Slot.MiniGame.initNumberSpinFreeGame(e)}}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./SlotConstant":"SlotConstant"}],SlotHeader:[function(t,e,i){"use strict";cc._RF.push(e,"dd96cP8u2hEBYfyBERToyWw","SlotHeader");var o=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){},onEnable:function(){},onPlayClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isBonus()||this.Slot.isFreeSpin()?this.Slot.showToast(o.SLOT_NOT_CHANGE_SPIN):(this.SlotUI.showTestButton(),this.Slot.initDataBet(this.Slot.getFistBet()))},onTestClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isBonus()||this.Slot.isFreeSpin()?this.Slot.showToast(o.SLOT_NOT_TEST):(this.SlotUI.showPlayButton(),this.Slot.initDataTest())},onPrizeClick:function(){this.Slot.Audio.playClick(),this.SlotUI.showPrizeFormNode()},onBackClick:function(){this.Slot.Audio.playClick(),this.Slot.isCanChangeBet()?this.Slot.onBackClick():this.Slot.showToast(o.SLOT_NOT_CHANGE_SPIN)},onHistoryClick:function(){this.Slot.Audio.playClick(),this.SlotUI.showHistoryFormNode()},onShopClick:function(){this.Slot.Audio.playClick()},onRankClick:function(){this.Slot.Audio.playClick(),this.SlotUI.showRankFormNode()},onSettingClick:function(){this.Slot.Audio.playClick(),this.SlotUI.showSettingFormNode()}}),cc._RF.pop()},{"../../helper/Message":"Message"}],SlotHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"f9d5agB09VLE65MOW5TQNJM","SlotHistoryItem");var o=t("../../util/FormatUtil");t("../../helper/Message");cc.Class({extends:cc.Component,properties:{timeLabel:cc.Label,totalPrizeLabel:cc.Label,betLabel:cc.Label},onLoad:function(){},init:function(t){if(t){var e=o.numberWithCommas(t.total_prize_amount||t.win_prize),i=o.numberWithCommas(t.total_bet_amount);t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.totalPrizeLabel.string=e,this.betLabel.string=i}},getMessage:function(){return this.richText.string}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],SlotHistory:[function(t,e,i){"use strict";cc._RF.push(e,"18cf6BC+r5OnouUz3iWVU/M","SlotHistory");var o=t("../../../helper/Message"),n=t("../SlotConstant"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{historyContentScrollView:cc.ScrollView,historyItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){},onEnable:function(){this.initData()},initFirst:function(){this.listItem||(this.listItem=[],this.listData=[],this.timeShowHistory=null)},initData:function(){if(this.listData&&0!==this.listData.length){this.showListNode(),this.listData=s.sortDataTimeByTime(this.listData);for(var t=0,e=this.listData.length;t<e;t++){var i=this.listItem[t];i||(i=this.instanceItem(this.listData[t])),i.getComponent("SlotHistoryItem").init(this.listData[t])}}else this.loadData()},handleSpin:function(t){this.initFirst();var e={};e.created_at=Math.round(new Date/1e3),e.total_prize_amount=t.win_prize,e.spin_fee=this.Slot.getBet(),e.total_bet_amount=this.Slot.SlotSelectLine.getLineSelected().length*this.Slot.getBet(),this.listData.length>n.NUM_IN_HISTORY?this.listData.splice(0,1):this.listData.push(e),this.node.active&&(clearTimeout(this.timeShowHistory),this.timeShowHistory=setTimeout(function(){if(this.listData.length>n.NUM_IN_HISTORY){this.listData.length>this.listItem.length&&this.listData.splice(0,1);for(var t=this.listData.length-1,i=0,o=this.listItem.length;i<o;i++)this.listItem[i].getComponent("SlotHistoryItem").init(this.listData[t-i])}else this.instanceItem(e);clearTimeout(this.timeShowHistory)}.bind(this),n.Slot_TIME_DELAY_FINISH))},loadData:function(){var t=this;this.initFirst(),this.showLoadingNode(),this.historyContentScrollView.content.removeAllChildren(!0);var e={token:this.Slot.getToken(),user_id:this.Slot.getUserId()};this.Slot.api.getHistorySlot(e,function(i){e=i.data,t.initContent(e)},function(e){t.showListNode(),t.Slot.showDialogMessage(o.HISTORY_TITLE,e.msg)})},initContent:function(t){this.showListNode();var e=t[0],i=0;i=e.length>n.NUM_IN_HISTORY?n.NUM_IN_HISTORY:e.length;for(var o=0;o<i;o++)this.instanceItem(e[o]),this.listData.push(e[o])},instanceItem:function(t){var e=cc.instantiate(this.historyItemPrefab);return e.parent=this.historyContentScrollView.content,e.getComponent("SlotHistoryItem").init(t),this.listItem.push(e),e},showListNode:function(){this.historyContentScrollView.node.active=!0,this.hideLoadingNode()},showLoadingNode:function(){this.loadingNode.active=!0},hideLoadingNode:function(){this.loadingNode.active=!1}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../SlotConstant":"SlotConstant"}],SlotItem:[function(t,e,i){"use strict";cc._RF.push(e,"d982f8cWQpP/qZcMfhChz6j","SlotItem"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node,iconHNode:cc.Node,iconWILDNode:cc.Node,iconBonusNode:cc.Node,iconFreeNode:cc.Node,iconANode1:cc.Node,iconBNode1:cc.Node,iconCNode1:cc.Node,iconDNode1:cc.Node,iconENode1:cc.Node,iconFNode1:cc.Node,iconGNode1:cc.Node,iconHNode1:cc.Node,iconWILDNode1:cc.Node,iconBonusNode1:cc.Node,iconFreeNode1:cc.Node,effectNode:cc.Node},onLoad:function(){},init:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=e,this.iconANode1.active=!e;break;case"B":this.iconBNode.active=e,this.iconBNode1.active=!e;break;case"C":this.iconCNode.active=e,this.iconCNode1.active=!e;break;case"D":this.iconDNode.active=e,this.iconDNode1.active=!e;break;case"E":this.iconENode.active=e,this.iconENode1.active=!e;break;case"F":this.iconFNode.active=e,this.iconFNode1.active=!e;break;case"G":this.iconGNode.active=e,this.iconGNode1.active=!e;break;case"H":this.iconHNode.active=e,this.iconHNode1.active=!e;break;case"WILD":this.iconWILDNode.active=e,this.iconWILDNode1.active=!e;break;case"BONUS":this.iconBonusNode.active=e,this.iconBonusNode1.active=!e;break;case"FREE":this.iconFreeNode.active=e,this.iconFreeNode1.active=!e}},getIndex:function(){return this.index},showEffect:function(){this.effectNode.active=!0},hideEffect:function(){this.effectNode.active=!1},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1,this.iconHNode.active=!1,this.iconWILDNode.active=!1,this.iconBonusNode.active=!1,this.iconFreeNode.active=!1,this.iconANode1.active=!1,this.iconBNode1.active=!1,this.iconCNode1.active=!1,this.iconDNode1.active=!1,this.iconENode1.active=!1,this.iconFNode1.active=!1,this.iconGNode1.active=!1,this.iconHNode1.active=!1,this.iconWILDNode1.active=!1,this.iconBonusNode1.active=!1,this.iconFreeNode1.active=!1,this.effectNode.active=!1}}),cc._RF.pop()},{}],SlotLabel:[function(t,e,i){"use strict";cc._RF.push(e,"93ed5D5XtxBBJVkK6+SfrlG","SlotLabel");var o=t("../../util/FormatUtil"),n=(t("../../helper/Config"),t("../../prefab/mini-game/item/JackpotItem"));cc.Class({extends:cc.Component,properties:{jackpotJackpotItem:n,spinIDLabel:cc.Label,totalBetLabel:cc.Label,betLabel:cc.Label,moneyLabel:n,lastMoneyWinLabel:cc.Label,numLineSelectedLabel:cc.Label,numberAutoSpinLabel:cc.Label},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){},onDestroy:function(){clearTimeout(this.timeOutSpin)},initTotalNumberLine:function(t){var e=this.Slot.getBet(),i=t*e;this.setBet(e),this.setTotalBet(i),this.setNumLineSelected(t)},handleSpin:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.setLastMoneyWin(e)}.bind(this),3e3)},handleSpinDemo:function(t){this.setId(t.spin_id),this.timeOutSpin=setTimeout(function(){var e=t.win_prize;this.Slot.getTestInfo().money+=e,this.setLastMoneyWin(e),this.setMoney(this.Slot.getTestInfo().money)}.bind(this),3e3)},setId:function(t){this.spinIDLabel.string="#"+t},setLineSelected:function(t){this.numLineSelectedLabel.string=t},setJackpot:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.jackpotJackpotItem.setMoney(t):this.jackpotJackpotItem.setMoneyWithoutAnimation(t)},setBet:function(t){this.betLabel.string=o.numberWithCommas(t)},setTotalBet:function(t){this.totalBetLabel.string=o.numberWithCommas(t)},setMoney:function(t){this.moneyLabel.setMoney(t)},setLastMoneyWin:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.lastMoneyWinLabel.string=o.numberWithCommas(this.last_money_win+t):(this.last_money_win=t,this.lastMoneyWinLabel.string=o.numberWithCommas(t))},setNumberAutoSpin:function(t){this.numberAutoSpinLabel.string=t},setNumLineSelected:function(t){this.numLineSelectedLabel.string=t}}),cc._RF.pop()},{"../../helper/Config":"Config","../../prefab/mini-game/item/JackpotItem":"JackpotItem","../../util/FormatUtil":"FormatUtil"}],SlotLines:[function(t,e,i){"use strict";cc._RF.push(e,"f22cdlIuk5IHJ92f5Ewpxv2","SlotLines");var o=t("./item/SlotNumberLineItem");cc.Class({extends:cc.Component,properties:{moneyNode:cc.Node,moneyLabel:cc.Label,listNumberLineItem:[o],listLine:[cc.Node]},init:function(t){for(var e in this.Slot=t,this.Slot=t.SlotUI,this.listNumberLineItem)this.listNumberLineItem[e].init(t)},onLoad:function(){},showLines:function(t){if(this.reset(),t)for(var e in t){var i=t[e].line-1;this.listLine[i].active=!0,this.listNumberLineItem[i].showNumberLine()}},showLine:function(t){for(var e in this.listLine)parseInt(t)-1==e?(this.listLine[e].active=!0,this.listNumberLineItem[e].showNumberLine()):(this.listLine[e].active=!1,this.listNumberLineItem[e].hideNumberLine())},showMoney:function(t){this.moneyNode.active=!0,this.moneyLabel.string=t},reset:function(){for(var t in this.listLine)this.listLine[t].active=!1;for(var e in this.listNumberLineItem)this.listNumberLineItem[e].hideNumberLine();this.moneyNode.active=!1}}),cc._RF.pop()},{"./item/SlotNumberLineItem":"SlotNumberLineItem"}],SlotMiniGameItem:[function(t,e,i){"use strict";cc._RF.push(e,"04daedHQIhCA5F562Blgyyq","SlotMiniGameItem");var o=t("../../util/BrowserUtil");t("../../util/FormatUtil"),t("../../helper/Config");cc.Class({extends:cc.Component,properties:{defaultNode:cc.Node,openSprite:cc.Node,xLabelSelect:cc.Label,xLabelNonSelect:cc.Label},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotBonus=t.SlotBonus},onLoad:function(){var t=this;this.is_clicked=!1,this.is_open=!1,this.hideTimeout=null,this.onMouseEnter=function(){t.isOpen()||o.showCursorPointer()},this.onMouseLeave=function(){o.showCursorAuto()}},onEnable:function(){this.reset(),cc.sys.isBrowser&&this.addEventMouserHover()},onDisable:function(){cc.sys.isBrowser&&this.removeEventMouserHover()},addEventMouserHover:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},removeEventMouserHover:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node)},onClickIsAutoSpin:function(){this.isClicked()||(this.setClicked(!0),this.SlotBonus.openItemMiniGame(this))},onClick:function(){this.isClicked()||this.Slot.SlotState.isAutoSpin()||(this.setClicked(!0),this.SlotBonus.openItemMiniGame(this))},openItem:function(t,e){this.setOpen(!0),this.setClicked(!0),clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){this.showOpenItem(),e?(this.xLabelSelect.node.active=!0,this.xLabelSelect.string="x "+t):(this.xLabelNonSelect.node.active=!0,this.xLabelNonSelect.string="x "+t)}.bind(this),1e3)},setClicked:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_clicked=t},isClicked:function(){return this.is_clicked},setOpen:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.is_open=t},isOpen:function(){return this.is_open},showOpenItem:function(){this.defaultNode.active=!1,this.openSprite.active=!0,this.xLabelNonSelect.node.active=!1,this.xLabelSelect.node.active=!1},reset:function(){clearTimeout(this.hideTimeout),this.setClicked(!1),this.setOpen(!1),this.defaultNode.active=!0,this.openSprite.active=!1,this.xLabelNonSelect.node.active=!1,this.xLabelSelect.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/BrowserUtil":"BrowserUtil","../../util/FormatUtil":"FormatUtil"}],SlotNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"64bd3+7W6RLArEu79D4Btt0","SlotNumberLineItem"),cc.Class({extends:cc.Component,properties:{numberLineLabel:cc.Label,bgSprite:cc.Sprite,normalSpriteFrame:cc.SpriteFrame,activeSpriteFrame:cc.SpriteFrame},init:function(t){this.SlotLines=t,this.line=this.numberLineLabel.string},onLoad:function(){var t=this;this.hideNumberLine(),this.onMouseEnter=function(){t.showNumberLine()},this.onMouseLeave=function(){t.hideNumberLine()},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},showNumberLine:function(){this.bgSprite.node.active=!0,this.numberLineLabel.node.active=!0},hideNumberLine:function(){this.bgSprite.node.active=!1,this.numberLineLabel.node.active=!1}}),cc._RF.pop()},{}],SlotPrize:[function(t,e,i){"use strict";cc._RF.push(e,"e4f09ZbmyZETr7+2HGrvnJv","SlotPrize"),cc.Class({extends:cc.Component,properties:{listPrizeNode:[cc.Node],pageLabel:cc.Label},init:function(t){this.Slot=t},onLoad:function(){this.showPage(0)},onNextClick:function(){this.numberPage++,this.numberPage===this.listPrizeNode.length&&(this.numberPage=0),this.showPage(this.numberPage)},onPreviewClick:function(){this.numberPage--,this.numberPage<0&&(this.numberPage=this.listPrizeNode.length-1),this.showPage(this.numberPage)},showPage:function(t){this.numberPage=t;for(var e=0,i=this.listPrizeNode.length;e<i;e++)e===t?(this.listPrizeNode[e].active=!0,this.showNumberPage(e)):this.listPrizeNode[e].active=!1},showNumberPage:function(t){this.pageLabel.string=t+1+" / "+this.listPrizeNode.length}}),cc._RF.pop()},{}],SlotRankItem:[function(t,e,i){"use strict";cc._RF.push(e,"df11e+sAD5Bm4mggX3Uw0G5","SlotRankItem");var o=t("../../util/FormatUtil"),n=t("../../util/Util");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,timeLabel:cc.Label,nickNameLabel:cc.Label,balanceLabel:cc.Label},onLoad:function(){},init:function(t,e){t&&(t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=parseInt(e)+1,this.nickNameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.balanceLabel.string=o.numberWithCommas(t.total_prize_value||t.total_prize_amount),this.timeLabel.string=o.getDateByTimeStamp(t.created_at))}}),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil","../../util/Util":"Util"}],SlotRank:[function(t,e,i){"use strict";cc._RF.push(e,"542b5CRD3JMoaB0iuRJXm4M","SlotRank");t("../../../helper/Message");var o=t("../../../util/FormatUtil");t("../SlotConstant");cc.Class({extends:cc.Component,properties:{rankContentScrollView:cc.ScrollView,rankItemPrefab:cc.Prefab},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){},onEnable:function(){this.initFirst(),this.initRank()},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.rankItemPrefab);this.pool.put(e)}this.listChild=[]}},initData:function(t){t&&(this.data=t)},initRank:function(){if(this.data){this.showListRankNode(),this.putAllChipToPool();for(var t=o.sortDataTimeByTime(this.data.list_player_jackpot),e=0,i=(t=o.filterSameItemSlot(t)).length;e<i;e++){var n=this.instanceItem(t[e],e);n.parent=this.rankContentScrollView.content,this.listChild.push(n)}}},instanceItem:function(t,e){var i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.rankItemPrefab)),i.getComponent("SlotRankItem").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.rankContentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},showListRankNode:function(){this.rankContentScrollView.node.active=!0}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../SlotConstant":"SlotConstant"}],SlotReels:[function(t,e,i){"use strict";cc._RF.push(e,"df3f2H5hhtGKYhPF7K0jKYA","SlotReels");var o=t("./SlotReel"),n=t("./SlotConstant"),s=(t("../../helper/Config"),t("../../util/FormatUtil"));cc.Class({extends:cc.Component,properties:{slotReels:[o],itemPrefab:cc.Prefab,itemEffectNode:cc.Node,listItemEffectNode:cc.Node},init:function(t){for(var e in this.Slot=t,this.SlotUI=t.SlotUI,this.SlotLines=t.SlotLines,this.SlotSelectLine=t.SlotSelectLine,this.SlotEffect=t.SlotEffect,this.SlotX=t.SlotX,this.slotReels)this.slotReels[e].init(t,e)},onLoad:function(){for(var t in this.intervalLines=null,this.slotReels)this.slotReels[t].randomItems()},onEnable:function(){},onDestroy:function(){clearInterval(this.intervalLines)},handleSpin:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_free,r=(t.list_bonus_prize,t.remain_free),c=t.win_type;this.listDataPrize=s.concat(a),this.spinReels(e,c,o,i,n,r,t)},handleSpinDemo:function(t){this.reset(),this.node.stopAllActions(!0);var e=t.display_slot_data,i=t.is_bonus,o=t.win_prize,n=t.is_free,s=t.list_line_prize,a=t.list_line_free,r=t.remain_free,c=t.win_type;this.listDataPrize=s.concat(a),this.spinReels(e,c,o,i,n,r,t)},spinReels:function(t,e,i,o,s,a,r){var c=this.getItemByCol(t,0),h=this.getItemByCol(t,1),l=this.getItemByCol(t,2),u=this.getItemByCol(t,3),d=this.getItemByCol(t,4);this.slotReels[0].spin(c,n.SLOT_TOTAL_ITEM_IN_REEL),this.slotReels[1].spin(h,n.SLOT_TOTAL_ITEM_IN_REEL+2),this.slotReels[2].spin(l,n.SLOT_TOTAL_ITEM_IN_REEL+4),this.slotReels[3].spin(u,n.SLOT_TOTAL_ITEM_IN_REEL+6),this.slotReels[4].spin(d,n.SLOT_TOTAL_ITEM_IN_REEL+8,!0,e,i,o,s,a,r)},setItemListPrizeByIndex:function(t,e){this.listItemNodeSameDataDisplay||(this.listItemNodeSameDataDisplay=[]),this.listItemNodeSameDataDisplay[e]=t},showAllEffectItems:function(){if(this.listDataPrize){this.SlotLines.showLines(this.listDataPrize);for(var t=this.getIndexItemByLineId(this.listDataPrize),e=0,i=t.length;e<i;e++){var o=t[e]-1;this.showEffectItem(this.listItemNodeSameDataDisplay[o])}}},showEffectItem:function(t){if(t){var e=t.parent.convertToWorldSpaceAR(t.getPosition()),i=this.listItemEffectNode.convertToNodeSpaceAR(e),o=cc.instantiate(this.itemPrefab);o.getComponent("SlotItem").init(t.getComponent("SlotItem").getIndex()),o.getComponent("SlotItem").showEffect(),o.setPosition(i),o.parent=this.listItemEffectNode,this.itemEffectNode.active=!0}},showEffectLine:function(){clearInterval(this.intervalLines),this.Slot.SlotAutoSpinSetting.checkAutoSpin()||(this.currentLine=0,this.intervalLines=setInterval(function(){if(this.listItemNodeSameDataDisplay.length>0&&this.listDataPrize.length>0){this.hideAllEffectListItemSameDataDisplay();var t=this.listDataPrize[this.currentLine].line,e=this.listDataPrize[this.currentLine].prize;this.SlotLines.showLine(t),this.SlotLines.showMoney(e),this.showEffectItemSameDataDisplayBuyLine(t),this.currentLine++,this.currentLine===this.listDataPrize.length&&(this.currentLine=0)}}.bind(this),1200))},showEffectItemSameDataDisplayBuyLine:function(t){if(this.listItemNodeSameDataDisplay.length>0)for(var e=n.LIST_INDEX_NUMBER_IN_LINE[t-1],i=0,o=e.length;i<o;i++){var s=this.listItemNodeSameDataDisplay[e[i]-1];s&&s.getComponent("SlotItem").showEffect()}},hideAllEffectListItemSameDataDisplay:function(){if(this.listItemNodeSameDataDisplay.length>0)for(var t=0,e=this.listItemNodeSameDataDisplay.length;t<e;t++){var i=this.listItemNodeSameDataDisplay[t];i&&i.getComponent("SlotItem").hideEffect()}},getItemByCol:function(t,e){for(var i=[],o=0;o<n.SLOT_NUMBER_ITEM_IN_REEL;o++){var s=this.slotReels.length*o+e;i.push(t[s])}return i},getIndexItemByLineId:function(t){var e=[];for(var i in t){var o=t[i].line-1,a=n.LIST_INDEX_NUMBER_IN_LINE[o];e=e.concat(a)}return s.deduplicate(e)},hideEffectItem:function(){this.listItemEffectNode.removeAllChildren(!0),this.itemEffectNode.active=!1,this.SlotLines.reset()},reset:function(){this.listItemNodeSameDataDisplay=[],this.hideEffectItem(),clearTimeout(this.timeOutLines),clearInterval(this.intervalLines)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil","./SlotConstant":"SlotConstant","./SlotReel":"SlotReel"}],SlotReel:[function(t,e,i){"use strict";cc._RF.push(e,"a5b88dvoOJJN6ogwFBoLS2M","SlotReel");var o=t("../../util/RandomUtil"),n=(t("../../helper/Config"),t("./SlotConstant"));cc.Class({extends:cc.Component,properties:{itemPrefab:cc.Prefab},init:function(t,e){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotReels=t.SlotReels,this.SlotLines=t.SlotLines,this.SlotX=t.SlotX,this.SlotEffect=t.SlotEffect,this.indexNumberReel=parseInt(e)},onLoad:function(){this.listSlotItem=[],this.pool=new cc.NodePool;for(var t=0;t<this.numberItems;t++){var e=cc.instantiate(this.itemPrefab);this.pool.put(e)}this.items||(this.items=[]),cc.test=this},spin:function(t,e,i,o,s,a,r,c,h){this.reset(),this.setItems(this.items),this.items=t;for(var l=1;l<e;l++){var u=this.getRandomItem(),d=this.indexNumberReel;l===e-1&&(u=t[0],d=this.indexNumberReel),l===e-2&&(u=t[1],d=this.indexNumberReel+5),l===e-3&&(u=t[2],d=this.indexNumberReel+10);var m=void 0;(m=l===e-1||l===e-2||l===e-3?this.instanceItem(u,!0):this.instanceItem(u,!1)).setPosition(0,(l+1)*n.SLOT_DISTANCE_TWO_ITEMS),m.parent=this.node,l!==e-1&&l!==e-2&&l!==e-3||this.SlotReels.setItemListPrizeByIndex(m,d)}var p=cc.callFunc(function(){this.node.getComponent(cc.Animation).play()},this),f=this.node.getComponent(cc.Animation)._defaultClip._duration,g=cc.delayTime(f),_=cc.callFunc(function(){i&&(this.Slot.SlotState.isAutoSpin()||this.Slot.SlotState.setFinish(),this.SlotReels.showAllEffectItems(),this.showEffectPrize(o,a,r,c,s,h))},this),S=cc.delayTime(.2);this.node.runAction(cc.sequence(p,g,S,_))},showEffectPrize:function(t,e,i,o,s,a){switch(t){case n.WIN_TYPE_NORMAL:case n.WIN_TYPE_BIG_WIN:this.Slot.SlotEffect.showWinNormal(s);break;case n.WIN_TYPE_SUPER_BIG_WIN:this.Slot.SlotEffect.showBigWin(s);break;case n.WIN_TYPE_JACKPOT:this.Slot.SlotEffect.showJackpot(s)}var r=this.getTimeEffect(t);t!==n.WIN_TYPE_ZERO?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot.SlotEffect.hideAll(),this.Slot.SlotAutoSpinSetting.checkAutoSpin()&&!e?this.SlotUI.showSpinDisableButton():this.SlotUI.showSpinButton(),i?((this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot.SlotEffect.showFreeSpin(),this.setSpinFree(!0),this.setNumberSpinFree(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0)),e?this.SlotEffect.showBonus(a):this.Slot.SlotAutoSpinSetting.checkAutoSpin()?this.Slot.spin():(this.Slot.SlotState.setStop(),i&&(this.SlotUI.showSpinFreeButton(o),clearTimeout(this.timeOutFreeSpin),this.timeOutFreeSpin=setTimeout(function(){this.Slot.SlotEffect.hideAll(),this.Slot.spin()}.bind(this),2e3))),this.SlotReels.showEffectLine()}.bind(this),r)):(e&&this.SlotEffect.showBonus(a),i&&(this.isNewSpinFree()||o>=this.getNumberSpinFree())&&this.Slot.SlotEffect.showFreeSpin(),e||i?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot.SlotEffect.hideAll(),i?(this.Slot.spin(),this.setSpinFree(!0),this.setNumberSpinFree(o),this.SlotUI.showSpinFreeButton(o)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot.SlotAutoSpinSetting.checkAutoSpin()?e||this.Slot.spin():this.Slot.SlotState.setStop())}.bind(this),3e3)):(this.setSpinFree(!1),this.setNumberSpinFree(0),this.Slot.SlotEffect.hideAll(),this.Slot.SlotAutoSpinSetting.checkAutoSpin()?(clearTimeout(this.timeOutResult),this.timeOutResult=setTimeout(function(){this.Slot.spin()}.bind(this),1e3)):this.Slot.SlotState.setStop()))},isNewSpinFree:function(){return!this.isFree},setSpinFree:function(t){this.isFree=t},setNumberSpinFree:function(t){this.numberFree=t},getNumberSpinFree:function(){return this.numberFree},randomItems:function(){for(var t=[],e=0;e<n.SLOT_NUMBER_ITEM_IN_REEL;e++){var i=this.getRandomItem();t.push(i)}this.reset(),this.setItems(t)},getRandomItem:function(){var t=o.getRandomInt(0,n.SLOT_LIST_ICON.length-1);return n.SLOT_LIST_ICON[t]},setItems:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.items=t;for(var e=0;e<t.length;e++){var i=this.instanceItem(t[e],!0);i.setPosition(0,(1-e)*n.SLOT_DISTANCE_TWO_ITEMS),i.parent=this.node}}},instanceItem:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.itemPrefab)),i.getComponent("SlotItem").reset(),i.getComponent("SlotItem").init(t,e),i.scale=n.ITEM_SCALE,i},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},getTimeEffect:function(t){return t===n.WIN_TYPE_NORMAL||t===n.WIN_TYPE_ZERO||t===n.WIN_TYPE_BIG_WIN?1e3*n.TIME_SHOW_WIN_NORMAL:t===n.WIN_TYPE_SUPER_BIG_WIN?1e3*n.TIME_SHOW_BIGWIN:t===n.WIN_TYPE_JACKPOT?1e3*n.TIME_SHOW_JACKPOT:1e3*n.TIME_SHOW_WIN_NORMAL},reset:function(){this.node.stopAllActions(!0),this.node.getComponent(cc.Animation).stop(),this.node.setPosition(this.node.x,0),this.putAllChipToPool(),clearTimeout(this.timeOutResult),clearTimeout(this.timeOutFreeSpin)}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/RandomUtil":"RandomUtil","./SlotConstant":"SlotConstant"}],SlotSelectLine:[function(t,e,i){"use strict";cc._RF.push(e,"cef9dhK3AdLS5quLIxsvFHK","SlotSelectLine");var o=t("../../../helper/Message"),n=t("../item/SlotSelectNumberLineItem");cc.Class({extends:cc.Component,properties:{evenOnButtonNode:cc.Node,evenOffButtonNode:cc.Node,oddOnButtonNode:cc.Node,oddOffButtonNode:cc.Node,allOnButtonNode:cc.Node,allOffButtonNode:cc.Node,cancelOnButttonNode:cc.Node,cancelOffButtonNode:cc.Node,listSelectNumLineItem:[n]},init:function(t){for(var e in this.Slot=t,this.SlotUI=t.SlotUI,this.SlotLabel=t.SlotLabel,this.SlotLines=t.SlotLines,this.listSelectNumLineItem)this.listSelectNumLineItem[e].init(t)},onLoad:function(){this.totalLineSelected=0},itemIsSelected:function(){this.totalLineSelected=this.getLineSelected().length,0===this.totalLineSelected?(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0):(20===this.totalLineSelected&&(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1),this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1),this.SlotLabel.initTotalNumberLine(this.totalLineSelected)},getLineSelected:function(){for(var t=[],e=0,i=this.listSelectNumLineItem.length;e<i;e++)this.listSelectNumLineItem[e].getSelected()&&t.push(e+1);return t},showNumberLines:function(t){this.SlotLines.showNumberLines(t)},showLines:function(t){this.SlotLines.showLines(t)},showLine:function(t){this.SlotLines.showLine(t)},showEffect:function(t){this.reset(),this.listSelectNumLineItem[t-1].showEffect()},showEffects:function(t){if(t)for(var e in t){var i=t[e].line_id-1;this.listSelectNumLineItem[i].showEffect(),this.listSelectNumLineItem[i].showEffect()}},setLineItemUnSelected:function(){this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0},onEvenOnClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0,this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0}},onEvenOffClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=1,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1}},onOddOnClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].unSelect();this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0}},onOddOffClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t+=2)this.listSelectNumLineItem[t].select();this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1}},onAllOnClick:function(){if(this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest())this.Slot.showToast(o.SLOT_NOT_CHANGE_BET);else{for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].unSelect();this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0}},onAllOffClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest()?this.Slot.showToast(o.SLOT_NOT_CHANGE_BET):this.selectAllItem()},onCancelOnClick:function(){this.onAllOnClick()},selectAllItem:function(){for(var t=0,e=this.listSelectNumLineItem.length;t<e;t++)this.listSelectNumLineItem[t].select();this.evenOnButtonNode.active=!0,this.oddOnButtonNode.active=!0,this.allOnButtonNode.active=!0,this.cancelOnButttonNode.active=!0,this.evenOffButtonNode.active=!1,this.oddOffButtonNode.active=!1,this.allOffButtonNode.active=!1,this.evenOffButtonNode.active=!1},hideAllButton:function(){this.is_selectAllEvent=this.evenOnButtonNode.active,this.is_selectAllOdd=this.oddOnButtonNode.active,this.is_selectAll=this.allOnButtonNode.active,this.is_unSelectAll=this.cancelOnButttonNode.active,this.evenOnButtonNode.active=!1,this.oddOnButtonNode.active=!1,this.allOnButtonNode.active=!1,this.cancelOnButttonNode.active=!1,this.evenOffButtonNode.active=!0,this.oddOffButtonNode.active=!0,this.allOffButtonNode.active=!0,this.cancelOffButtonNode.active=!0},showAllButton:function(){this.is_selectAllEvent?(this.evenOnButtonNode.active=!0,this.evenOffButtonNode.active=!1):(this.evenOnButtonNode.active=!1,this.evenOffButtonNode.active=!0),this.is_selectAllOdd?(this.oddOnButtonNode.active=!0,this.oddOffButtonNode.active=!1):(this.oddOnButtonNode.active=!1,this.oddOffButtonNode.active=!0),this.is_selectAll?(this.allOnButtonNode.active=!0,this.allOffButtonNode.active=!1):(this.allOnButtonNode.active=!1,this.allOffButtonNode.active=!0),this.is_unSelectAll?(this.cancelOnButttonNode.active=!0,this.cancelOffButtonNode.active=!1):(this.cancelOnButttonNode.active=!1,this.cancelOffButtonNode.active=!0)},reset:function(){for(var t in this.listSelectNumLineItem)this.listSelectNumLineItem[t].reset()}}),cc._RF.pop()},{"../../../helper/Message":"Message","../item/SlotSelectNumberLineItem":"SlotSelectNumberLineItem"}],SlotSelectNumberLineItem:[function(t,e,i){"use strict";cc._RF.push(e,"993b7eAE8xBmYmaF+Rai+Yc","SlotSelectNumberLineItem"),cc.Class({extends:cc.Component,properties:{line:0,onSelectButtonNode:cc.Node,offSelectButtonNode:cc.Node},init:function(t){this.Slot=t,this.SlotSelectLine=t.SlotSelectLine},onLoad:function(){this.selected=this.onSelectButtonNode.active},onClick:function(){this.Slot.Audio.playClick(),!this.Slot.isCanChangeBet()||this.Slot.isFreeSpin()||this.Slot.isBonus()||this.Slot.isTest()||(this.selected?this.unSelect():this.select())},select:function(){this.setSelected(!0),this.SlotSelectLine.itemIsSelected(!0),this.showSelect()},unSelect:function(){this.setSelected(!1),this.SlotSelectLine.setLineItemUnSelected(),this.SlotSelectLine.itemIsSelected(!1),this.showUnSelect()},showSelect:function(){this.onSelectButtonNode.active=!0,this.offSelectButtonNode.active=!1},showUnSelect:function(){this.offSelectButtonNode.active=!0,this.onSelectButtonNode.active=!1},setSelected:function(t){this.selected=t},getSelected:function(){return this.selected}}),cc._RF.pop()},{}],SlotState:[function(t,e,i){"use strict";cc._RF.push(e,"e741dWduKVHHbn5+K7kRLJ9","SlotState");e.exports={currentState:"",STOP:"STOP",SPINNING:"SPINNING",FINISH:"SPINNING",AUTO_SPIN:"AUTO_SPIN",init:function(t){this.Slot=t,this.SlotUI=t.SlotUI,this.SlotSelectLine=t.SlotSelectLine},setStop:function(){this.currentState=this.STOP,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinButton(),this.SlotUI.showAutoSpinButton(),this.SlotSelectLine.showAllButton(),this.reset()},setSpinning:function(){this.currentState=this.SPINNING,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinDisableButton(),this.SlotUI.showAutoSpinDisableButton(),this.SlotSelectLine.hideAllButton(),this.reset()},setFinish:function(){this.currentState=this.FINISH,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinDisableButton(),this.SlotUI.showAutoSpinDisableButton(),this.SlotSelectLine.showAllButton(),this.reset()},setAutoSpin:function(){this.currentState=this.AUTO_SPIN,this.Slot.isFreeSpin()&&!this.Slot.isTest()?this.SlotUI.showSpinFreeButton():this.SlotUI.showSpinDisableButton(),this.SlotUI.showStopAutoSpinButton(),this.SlotSelectLine.hideAllButton(),this.reset()},reset:function(){this.Slot.SlotReels.hideEffectItem(),this.Slot.SlotLabel.setNumberAutoSpin(0)},isAutoSpin:function(){return this.currentState===this.AUTO_SPIN},isStop:function(){return this.currentState===this.STOP}},cc._RF.pop()},{}],SlotTutorial:[function(t,e,i){"use strict";cc._RF.push(e,"4acffz6SwFPgaUqA2MQ30Ig","SlotTutorial"),cc.Class({extends:cc.Component,properties:{pageLabel:cc.Label,pageNodes:[cc.Node]},init:function(t){this.Slot=t,this.SlotUI=t.SlotUI},onLoad:function(){this.showPage(0),this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return!this.Slot.DialogMessage.node.active&&!this.Slot.Processing.node.active},onNextClick:function(){for(var t in this.pageNodes)if(this.page==t){++t>=this.pageNodes.length&&(t=0),this.showPage(t);break}},onPreviousClick:function(){for(var t in this.pageNodes)if(this.page==t){--t<0&&(t=this.pageNodes.length-1),this.showPage(t);break}},showPage:function(t){for(var e in this.page=t,this.pageNodes)this.pageNodes[e].active=t==e;this.pageLabel.string=t+1+"/"+this.pageNodes.length},hideAll:function(){for(var t in this.pageNodes)this.pageNodes[t].active=!1}}),cc._RF.pop()},{}],SlotUI:[function(t,e,i){"use strict";var o;function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}cc._RF.push(e,"aaaea9EQ15BCYO34z4jcgcP","SlotUI");var s=t("../../util/FormatUtil");cc.Class((n(o={extends:cc.Component,properties:{gameNode:cc.Node,gameBonusNode:cc.Node,spinFreeLabel:cc.Label,spinButtonNode:cc.Node,spinFreeButtonNode:cc.Node,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonDisableNode:cc.Node,autoSpinButtonDisableNode:cc.Node,playButtonNode:cc.Node,testButtonNode:cc.Node,xPrizeNode:cc.Node,jackpotNode:cc.Node,idSpinNode:cc.Node,autoSpinSettingFormNode:cc.Node,bonusResultFormNode:cc.Node,historyFormNode:cc.Node,rankFormNode:cc.Node,selectLineFormNode:cc.Node,prizeFormNode:cc.Node,settingFormNode:cc.Node,logOutFormNode:cc.Node,dialogMessageFormNode:cc.Node,processingNode:cc.Node,processingSceneNode:cc.Node},onLoad:function(){this.dialogFormAutoSpinSetting=this.autoSpinSettingFormNode.getComponent("DialogForm"),this.dialogFormBonus=this.bonusResultFormNode.getComponent("DialogForm"),this.dialogMessageForm=this.dialogMessageFormNode.getComponent("DialogMessage"),this.dialogFormHistory=this.historyFormNode.getComponent("DialogForm"),this.dialogFormRank=this.rankFormNode.getComponent("DialogForm"),this.dialogFormSetting=this.settingFormNode.getComponent("DialogForm"),this.dialogFormPrize=this.prizeFormNode.getComponent("DialogForm"),this.dialogFormSelectLine=this.selectLineFormNode.getComponent("DialogForm")},showContentGame:function(){this.hideAllContent(),this.gameNode.active=!0,this.idSpinNode.active=!0},showBonus:function(){this.hideAllContent(),this.gameBonusNode.active=!0,this.idSpinNode.active=!1},showSpinButton:function(){this.spinButtonNode.active=!0,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!1},showSpinDisableButton:function(){this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!1,this.spinButtonDisableNode.active=!0},showSpinFreeButton:function(t){t<0&&(t=0),this.spinButtonNode.active=!1,this.spinFreeButtonNode.active=!0,this.spinButtonDisableNode.active=!1,void 0!==t&&(this.spinFreeLabel.string="Quay Mi\u1ec5n Ph\xed +"+s.numberWithCommas(t))},showAutoSpinButton:function(){this.autoSpinButtonNode.active=!0,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!1},showAutoSpinDisableButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!0,this.stopAutoSpinButtonNode.active=!1},showStopAutoSpinButton:function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0},showBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.showDialog(t)},hideBonusResultForm:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormBonus.hideDialog(t)},showAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.showDialog(t)},hideAutoSpinSettingFormNode:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormAutoSpinSetting.hideDialog(t)}},"showStopAutoSpinButton",function(){this.autoSpinButtonNode.active=!1,this.autoSpinButtonDisableNode.active=!1,this.stopAutoSpinButtonNode.active=!0}),n(o,"showSelectLineFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSelectLine.showDialog(t)}),n(o,"showX",function(){this.xPrizeNode.active=!0}),n(o,"hideX",function(){this.xPrizeNode.active=!1}),n(o,"showJackpot",function(){this.jackpotNode.active=!0}),n(o,"hideJackpot",function(){this.jackpotNode.active=!1}),n(o,"showPlayButton",function(){this.playButtonNode.active=!0,this.testButtonNode.active=!1}),n(o,"showTestButton",function(){this.playButtonNode.active=!1,this.testButtonNode.active=!0}),n(o,"hideAllContent",function(){this.gameNode.active=!1,this.gameBonusNode.active=!1}),n(o,"showDialogMessage",function(t,e){this.dialogMessageForm.setMessage(t,e),this.dialogMessageForm.showDialog()}),n(o,"showRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.showDialog(t)}),n(o,"hideRankFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormRank.hideDialog(t)}),n(o,"showHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.showDialog(t)}),n(o,"hideHistoryFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormHistory.hideDialog(t)}),n(o,"showPrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.showDialog(t)}),n(o,"hidePrizeFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormPrize.hideDialog(t)}),n(o,"showSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.showDialog(t)}),n(o,"hideSettingFormNode",function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.dialogFormSetting.hideDialog(t)}),n(o,"hideDialogMessage",function(){this.dialogMessageForm.hideDialog()}),n(o,"showProcessingNode",function(){this.processingNode.active=!0}),n(o,"hideProcessingNode",function(){this.processingNode.active=!1}),n(o,"showProcessingSceneNode",function(){this.processingSceneNode.active||(this.processingSceneNode.active=!0)}),n(o,"hideProcessingSceneNode",function(){this.processingSceneNode.active=!1}),o)),cc._RF.pop()},{"../../util/FormatUtil":"FormatUtil"}],SlotX:[function(t,e,i){"use strict";cc._RF.push(e,"6f73fcyKuRLhITMUizL0T9e","SlotX"),cc.Class({extends:cc.Component,properties:{xPrizeLabel:cc.Label},init:function(t){this.Slot=t},onLoad:function(){this.xPrize=1},setXPrize:function(t){this.xPrize=t,this.xPrizeLabel.string="x"+t},getXPrize:function(){return this.xPrize}}),cc._RF.pop()},{}],Slot:[function(t,e,i){"use strict";cc._RF.push(e,"69771WQSgpK9paGMPCFBgzo","Slot");var o=t("../../base/BaseScene"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=(t("../../helper/Config"),t("./SlotUI")),r=t("./SlotHandlerRequest"),c=t("./SlotHeader"),h=t("./SlotReels"),l=t("./SlotLines"),u=t("./SlotControl"),d=t("./SlotLabel"),m=t("./SlotEffect"),p=t("./SlotBonus"),f=t("./SlotX"),g=t("./SlotState"),_=t("./SlotConstant"),S=t("../../prefab/mini-game/item/MiniGameXPer"),C=t("./form/SlotAutoSpinSetting"),N=t("./form/SlotBonusResult"),E=t("./form/SlotSelectLine"),T=t("./form/SlotRank"),I=t("./form/SlotHistory"),v=t("../../prefab/form/Tutorial"),y=t("../../prefab/form/Setting"),B=t("../../prefab/form/LogOut"),L=(t("../../prefab/News"),t("../../prefab/Toast")),R=t("../../ui/dialog/DialogMessage"),A=t("../../ui/Processing"),M=t("../../ui/ProcessingScene"),b=t("../../object/Audio"),P=t("../../object/Music");cc.Class({extends:o,properties:{questNotificationItemPrefab:cc.Prefab,SlotUI:a,SlotHeader:c,SlotControl:u,SlotLabel:d,SlotSelectLine:E,SlotReels:h,SlotEffect:m,SlotLines:l,SlotBonus:p,SlotX:f,MiniGameXPer:S,SlotAutoSpinSetting:C,SlotBonusResult:N,SlotRank:T,SlotHistory:I,Tutorial:v,Setting:y,LogOut:B,Toast:L,DialogMessage:R,Processing:A,ProcessingScene:M,Audio:b,Music:P},onLoad:function(){this._super(),this.setSceneName(n.SCENE_GAME_SLOT),this.setSceneGameSlot(!0),this.sfsManager.setController(this),this.isAddEvent=!1,this.SlotState=g,this.SlotHandlerRequest=r,this.SlotState.init(this),this.SlotHandlerRequest.init(this),this.SlotHeader.init(this),this.SlotControl.init(this),this.SlotLabel.init(this),this.SlotSelectLine.init(this),this.SlotReels.init(this),this.SlotEffect.init(this),this.SlotLines.init(this),this.SlotBonus.init(this),this.SlotX.init(this),this.SlotAutoSpinSetting.init(this),this.SlotBonusResult.init(this),this.SlotRank.init(this),this.SlotHistory.init(this),this.Setting.init(this),this.LogOut.init(this),this.Tutorial.init(this),this.updateMoneyGold(),this.SlotState.setStop(),this.onResponseBind=this.SlotHandlerRequest.onResponse.bind(this.SlotHandlerRequest),this.onUserVariablesUpdateBind=this.SlotHandlerRequest.onUserVariablesUpdate.bind(this.SlotHandlerRequest),this.sfsManager.removeEventResponse(),this.addEventResponse(),this.initTestInfo()},start:function(){this.initRoomInfo(),this.initDataBet(),this.SlotSelectLine.selectAllItem(),this.SlotUI.showContentGame(),this.SlotUI.hideX(),this.SlotRank.initData(this.dataRank)},onDestroy:function(){this.removeEventResponse()},addEventResponse:function(){this.sfs&&this.sfs.isConnected()&&!this.isAddEvent&&(this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!0)},removeEventResponse:function(){this.sfs&&this.sfs.isConnected()&&(this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponseBind),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVariablesUpdateBind),this.isAddEvent=!1)},initRoomInfo:function(){var t=this.getRoomInfo();this.info=t.data.info,this.dataRank={},t.data.list_player_jackpot&&(this.dataRank.list_player_jackpot=t.data.list_player_jackpot),t.data.list_player_bigwin&&(this.dataRank.list_player_bigwin=t.data.list_player_bigwin)},initTestInfo:function(){this.testInfo={current_step:0,max_spin_extra_step:10,is_extra:!1,jackpot:88e6,money_type:0,spin_fee:1e4,total_score:0,x_prize:1,money:1e7}},handleJackpot:function(t){var e=0,i=1;for(var o in this.info){var n=void 0;switch(this.info[o].spin_fee){case 100:this.info[o].jackpot=t.data[0],(n=t.data[3])&&(this.info[o].x_jackpot=n[0]);break;case 1e3:this.info[o].jackpot=t.data[1],n=t.data[3],t.data[3]&&(this.info[o].x_jackpot=n[1]);break;case 1e4:this.info[o].jackpot=t.data[2],(n=t.data[3])&&(this.info[o].x_jackpot=n[2])}this.info[o].spin_fee===this.bet&&(e=this.info[o].jackpot,i=this.info[o].x_jackpot)}this.isTest()||(this.SlotLabel.setJackpot(e,!0),this.MiniGameXPer.setXMiniGame(i))},handleSpin:function(t){var e=t.data;this.setSendSpin(!1),this.SlotState.isAutoSpin()||this.SlotState.setSpinning(),this.initInfo(e),this.SlotAutoSpinSetting.handleSpin(e),this.SlotLabel.handleSpin(e),this.SlotReels.handleSpin(e),this.SlotHistory.handleSpin(e)},initInfo:function(t){var e=this.getInfo();e.win_prize=t.win_prize,e.is_free=t.is_free,e.is_bonus=t.is_bonus,e.x_amount=t.x_amount,e.remain_spin_free>0&&e.remain_spin_free--},handleSpinDemo:function(t){var e=t.data;this.setSendSpin(!1),e.win_type===_.WIN_TYPE_JACKPOT&&(e.win_prize=this.getTestInfo().jackpot),this.initInfoTest(e),this.SlotState.setSpinning(),this.SlotLabel.handleSpinDemo(e),this.SlotReels.handleSpinDemo(e)},initInfoTest:function(t){this.getTestInfo().is_free=t.is_free},handleSpinFail:function(t){this.setSendSpin(!1),this.showToast(t.msg),this.SlotState.setStop(),this.SlotAutoSpinSetting.stopAutoSpin()},handleAchivementedQuest:function(t){this.showNotificationMessage(t.msg)},handlePlusLuckyWheelFree:function(t){var e=t.data.amount;this.MiniGame.LuckyWheel.addLuckyWheelFree(e),this.showNotificationMessage(t.msg)},handleAlert:function(t){this.showNotificationMessage(t.msg)},handleGetTop:function(t){},handleNewMessage:function(t){this.showNotificationMessage(s.MAIL_NOTIFICATION)},showNotificationMessage:function(t){var e=cc.instantiate(this.questNotificationItemPrefab);e.getComponent("QuestNotificationItem").setMessage(t),e.parent=this.node},handleRechargeGold:function(t){this.hideProcessingNode(),this.showDialogMessage(s.RECHARGE_GOLD_TITLE,t.msg)},handleUpdateBigwin:function(t){var e=t.data;this.dataRank||(this.dataRank={}),this.dataRank.list_player_bigwin=e.list_player_bigwin,this.dataRank.list_player_jackpot=e.list_player_jackpot,this.SlotRank.initData(this.dataRank)},handleGetChat:function(t){if(t.status){var e=t.data.chat;this.SlotChat.initChat(e)}else this.showToast(t.msg)},handleSendChat:function(t){if(t.status){var e=t.data;this.SlotChat.addChat(e)}else this.SlotChat.addChatFail(t.msg)},initDataBet:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;this.setIsTest(!1),this.setBet(t)},initDataTest:function(){this.setIsTest(!0),this.bet=this.testInfo.spin_fee,this.initTestData(),this.SlotReels.reset(),this.SlotSelectLine.selectAllItem()},initTestData:function(){this.SlotLabel.setBet(this.bet),this.initBetData(this.testInfo),this.SlotLabel.setMoney(this.testInfo.money),this.SlotLabel.setLastMoneyWin(0)},onBackClick:function(){this.showProcessingSceneNode(),this.sendRequest.sendNoPrefixToZone(n.REQUEST_OUT_LOBBY_GAME)},onRechargeClick:function(){this.Audio.playClick()},spin:function(){if(this.line_player_choose=this.SlotSelectLine.getLineSelected(),this.line_player_choose.length>0){if(!this.isSendSpin()){var t={money_type:0,money_value:this.bet,line_player_choose:this.line_player_choose};if(this.isTest()){this.sendRequest.send(_.SPIN_DEMO,t);var e=this.getTestInfo();e.is_free||(e.money-=2e5,this.SlotLabel.setMoney(e.money))}else this.sendRequest.send(_.SPIN,t);this.setSendSpin(!0)}}else this.showToast(s.SLOT3_NOT_SELECT_LINE),this.SlotState.setStop(),this.SlotAutoSpinSetting.stopAutoSpin(),this.SlotAutoSpinSetting.onResetClick()},updateMoneyGold:function(){this.isTest()||this.SlotLabel.setMoney(this.getMoney())},setBet:function(t){this.bet=t;var e=this.getInfo();if(this.initBetData(e),this.SlotLabel.setMoney(this.getMoney()),this.SlotLabel.setBet(t),e){var i=e.x_jackpot?e.x_jackpot:1;this.MiniGameXPer.setXMiniGame(i)}},initBetData:function(t){if(t){var e=t.jackpot,i=t.is_free||t.remain_spin_free,o=this.SlotSelectLine.getLineSelected().length;this.SlotLabel.setJackpot(e,!1),this.SlotLabel.initTotalNumberLine(o),i?this.SlotUI.showSpinFreeButton(i):this.SlotUI.showSpinButton()}},getBet:function(){return this.bet},isAutoSpin:function(){return this.SlotState.isAutoSpin()&&this.SlotAutoSpinSetting.checkAutoSpin()},isFreeSpin:function(){return!!this.getInfo()&&this.getInfo().is_free},isBonus:function(){return this.SlotBonus.node.active},getInfo:function(){for(var t in this.info)if(this.info[t].spin_fee==this.bet)return this.info[t];return null},getTestInfo:function(){return this.testInfo},isTest:function(){return this.istest},setFistBet:function(t){this.firstBet=t},getFistBet:function(t){this.firstBet=t},setIsTest:function(t){this.istest=t},isCanChangeBet:function(){return this.SlotState.isStop()},getTotalBet:function(){return this.bet*this.line_player_choose.length},showBonusResult:function(t,e){this.SlotUI.showBonusResultForm(),this.SlotBonusResult.setMoney(t,e)},hideBonusResult:function(){this.SlotUI.hideBonusResultForm()},showToast:function(t){this.Toast.showToast(t)},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},showDialogMessage:function(t,e){this.SlotUI.showDialogMessage(t,e)},hideDialogMessage:function(){this.SlotUI.hideDialogMessage()},showProcessingNode:function(){this.SlotUI.showProcessingNode()},hideProcessingNode:function(){this.SlotUI.hideProcessingNode()},showProcessingSceneNode:function(){this.SlotUI.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.SlotUI.hideProcessingSceneNode()},clearTimeoutProcessingNode:function(){this.Processing.clearTimeout()},dataTestBonus:function(){var t={bonus_prize:3e4,display_slot_data:["G","H","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!0,is_free:!1,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=0,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=2,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree2:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=1,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree3:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=0,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t},dataTestFree4:function(){var t={bonus_prize:3e4,display_slot_data:["G","BONUS","H","H","H","D","WILD","BONUS","B","BONUS","BONUS","E","A","H","B"],is_bonus:!1,is_free:!0,is_jackpot:!1,list_bonus_prize:[]};return t.list_bonus_prize[0]={line:1,prize:5200},t.list_bonus_prize[1]={line:2,prize:4100},t.list_bonus_prize[2]={line:3,prize:5700},t.list_line_free=[],t.list_line_prize=[],t.money_type=0,t.remain_free=3,t.spin_id=166,t.win_prize=3e4,t.win_type=0,t}}),cc._RF.pop()},{"../../base/BaseScene":"BaseScene","../../helper/Config":"Config","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","../../object/Music":"Music","../../prefab/News":"News","../../prefab/Toast":"Toast","../../prefab/form/LogOut":"LogOut","../../prefab/form/Setting":"Setting","../../prefab/form/Tutorial":"Tutorial","../../prefab/mini-game/item/MiniGameXPer":"MiniGameXPer","../../ui/Processing":"Processing","../../ui/ProcessingScene":"ProcessingScene","../../ui/dialog/DialogMessage":"DialogMessage","./SlotBonus":"SlotBonus","./SlotConstant":"SlotConstant","./SlotControl":"SlotControl","./SlotEffect":"SlotEffect","./SlotHandlerRequest":"SlotHandlerRequest","./SlotHeader":"SlotHeader","./SlotLabel":"SlotLabel","./SlotLines":"SlotLines","./SlotReels":"SlotReels","./SlotState":"SlotState","./SlotUI":"SlotUI","./SlotX":"SlotX","./form/SlotAutoSpinSetting":"SlotAutoSpinSetting","./form/SlotBonusResult":"SlotBonusResult","./form/SlotHistory":"SlotHistory","./form/SlotRank":"SlotRank","./form/SlotSelectLine":"SlotSelectLine"}],SmallBannerItem:[function(t,e,i){"use strict";cc._RF.push(e,"c07d9joORpP0oMrXfUn3rQN","SmallBannerItem");var o=t("../../helper/Config"),n=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{imageSprite:cc.Sprite,loadingNode:cc.Node},init:function(t,e){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.Event=t.Event,this.data=e,this.data.thumb2=n.convertUrlToLocation(this.data.thumb2);var i=this;n.validateUrlImage(this.data.thumb2)&&cc.loader.load(this.data.thumb2,function(t,e){if(e instanceof cc.Texture2D){var o=new cc.SpriteFrame(e,cc.Rect(0,0,279,445));i.imageSprite.spriteFrame=o,i.loadingNode.active=!1}})},onLoad:function(){},onClick:function(){this.GameCenter.Audio.playClick(),this.data.link&&cc.sys.openURL(this.data.link)},show:function(t){this.node.zIndex=1,this.node.active=!0,t?(this.node.opacity=0,this.node.runAction(cc.fadeIn(o.BANNER_TIME_FADE))):this.node.opacity=255},hide:function(t){this.node.zIndex=0,this.node.active=!0,t?(this.node.opacity=255,this.node.runAction(cc.sequence(cc.fadeOut(o.BANNER_TIME_FADE),cc.callFunc(function(){this.node.active=!1},this)))):this.node.active=!1}}),cc._RF.pop()},{"../../helper/Config":"Config","../../util/FormatUtil":"FormatUtil"}],SmallBanner:[function(t,e,i){"use strict";cc._RF.push(e,"75b6dmI5o5GDaqwxJ1F+IgJ","SmallBanner");var o=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{smallBannerItemPrefab:cc.Prefab,bannerPageView:cc.PageView},init:function(t){this.GameCenter=t},onLoad:function(){this.listSmallBanner=[],this.initData()},start:function(){},initData:function(){var t=this.GameCenter.getGeneralConfig();if(t){var e=t.EVENT;if(e&&e.length>0){this.bannerPageView.content.removeAllChildren(!0),this.node.stopAllActions();for(var i=0;i<e.length;i++){var n=cc.instantiate(this.smallBannerItemPrefab);n.getComponent("SmallBannerItem").init(this.GameCenter,e[i]),this.bannerPageView.addPage(n)}var s=this.bannerPageView.getPages();this.leftToRight=!0,s.length>1&&this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(o.BANNER_TIME_CHANGE),cc.callFunc(function(){var t=this.bannerPageView.getCurrentPageIndex(),e=void 0;this.leftToRight?(e=t+1)>=this.bannerPageView.getPages().length&&(e-=2,this.leftToRight=!1):(e=t-1)<0&&(e+=2,this.leftToRight=!0),this.bannerPageView.setCurrentPageIndex(e)},this))))}}}}),cc._RF.pop()},{"../../../helper/Config":"Config"}],Splash:[function(t,e,i){"use strict";cc._RF.push(e,"ee617DSR+VBJLxlj9OJsjjJ","Splash");var o=t("../../base/BaseController"),n=t("../../helper/Constant"),s=t("../../helper/Message"),a=t("./HotUpdate"),r=t("../../object/Audio");cc.Class({extends:o,properties:{HotUpdate:a,messageLabel:cc.Label,retryGetDataButtonNode:cc.Node,Audio:r},onLoad:function(){this._super(),this.isLoadScene=!1,this.isLoadConfig=!1,this.HotUpdate.init(this),this.initOneSign()},initOneSign:function(){this.checkPlugin()&&(sdkbox.PluginOneSignal.init(),sdkbox.PluginOneSignal.setListener({onSendTag:function(t,e,i){},onGetTags:function(t){},onIdsAvailable:function(t,e){},onPostNotification:function(t,e){},onNotification:function(t,e,i){}}))},checkPlugin:function(){return"undefined"==typeof sdkbox?(console.log("sdkbox is undefined"),!1):void 0!==sdkbox.PluginOneSignal||(console.log("sdkbox.PluginFacebook is undefined"),!1)},loadAssets:function(){this.loadConfig(),this.loadScene()},loadScene:function(){var t=this;cc.director.preloadScene("GameCenter",function(){t.isLoadScene=!0,t.isLoadConfig&&cc.director.loadScene(n.SCENE_GAME_CENTER)})},loadConfig:function(){var t=this;this.messageLabel.string=s.SPLASH_GET_GET_DATA;var e=this;this.api.getConfig({},function(i){t.setGeneralConfig(i.data),e.isLoadConfig=!0,e.isLoadScene&&cc.director.loadScene(n.SCENE_GAME_CENTER)},function(e){t.messageLabel.string=s.SPLASH_GET_CONFIG_FAILED,t.retryGetDataButtonNode.active=!0})},onRetryGetDataClick:function(){this.Audio.playClick(),this.retryGetDataButtonNode.active=!1,this.loadConfig()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/Audio":"Audio","./HotUpdate":"HotUpdate"}],TLMNCardController:[function(t,e,i){"use strict";cc._RF.push(e,"b235cw9IHJP0L/XQO2zv7bJ","TLMNCardController");var o=t("../TLMNConfig");cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.cardController=this.node.getComponent("CardController")},onEnable:function(){},init:function(t){var e=this;this.TLMN=t,this.isSelected=!1,this.isInAction=!1,this._initScale=1,this._scaleDownAction=cc.scaleTo(o.TIME_TOUCH_CARD,o.SCALE_TOUCH_CARD),this._scaleUpAction=cc.scaleTo(o.TIME_TOUCH_CARD,this._initScale),this._moveUpAction=cc.moveBy(o.TIME_TOUCH_CARD,0,o.DISTANCE_SELECTED_CARD),this._moveDownaction=cc.moveBy(o.TIME_TOUCH_CARD,0,-o.DISTANCE_SELECTED_CARD),this._resetInAction=cc.callFunc(function(){e.isInAction=!1},this),this._onMouseEnter=function(t){e.cardController.showHighLight()},this._onMouseLeave=function(t){e.cardController.hideHighLight()},this._onTouchDown=function(t){e.isInAction||(this.stopAllActions(),this.cardController.showHighLight(),this.runAction(e._scaleDownAction))},this._onTouchUp=function(t){e.isInAction||(this.stopAllActions(),this.cardController.hideHighLight(),e.isInAction=!0,e.isSelected?(e.isSelected=!1,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveDownaction),e._resetInAction))):(e.isSelected=!0,this.runAction(cc.sequence(cc.spawn(e._scaleUpAction,e._moveUpAction),e._resetInAction))),e.TLMN.TLMNHandlerEffect.checkShowButtons(),e.TLMN.TLMNHandlerEffect.showRecommend())},this.enableEvents()},enableEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},disableEvents:function(){this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchUp,this.node),this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchDown,this.node),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this.node),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this.node)},moveTo:function(t,e){this.isSelected&&(e+=o.DISTANCE_SELECTED_CARD),this.node.stopAllActions(),this.cardController.reveal(!0),this.cardController.hideHighLight(),this.isInAction=!0,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(o.TIME_TOUCH_CARD,this._initScale),cc.moveTo(o.TIME_TOUCH_CARD,t,e)),cc.callFunc(function(){this.isInAction=!1},this)))},selectCard:function(){this.isInAction||(this.node.stopAllActions(),this.isInAction=!0,this.isSelected?(this.isSelected=!1,this.node.runAction(cc.sequence(this._moveDownaction,this._resetInAction))):(this.isSelected=!0,this.node.runAction(cc.sequence(this._moveUpAction,this._resetInAction))),this.cardController.hideHighLight())},getSelected:function(){return this.isSelected}}),cc._RF.pop()},{"../TLMNConfig":"TLMNConfig"}],TLMNCard:[function(t,e,i){"use strict";cc._RF.push(e,"cff470LjCtDGLClF5VCuKIo","TLMNCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;3===++i?i=4:4===i&&(i=3),e=15===(e=14===e?1:e)?2:e,Object.defineProperties(this,{trueValue:{value:t,writable:!1},point:{value:e,writable:!1},suit:{value:i,writable:!1},id:{value:13*(i-1)+(e-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],TLMNConfig:[function(t,e,i){"use strict";cc._RF.push(e,"45180EFUXNFOpQDpO/cOKK9","TLMNConfig");e.exports={NUMBER_PLAYERS:4,NUMBER_SOLO_PLAYERS:2,NUMBER_CARDS_EACH_PLAYERS:13,VALUE_HAI:15,TIME_SORT_CARDS_IN_HAND:.5,DISTANCE_TWO_CARDS_IN_HAND:50,SCALE_CARDS_IN_HAND:1,TIME_TOUCH_CARD:.1,SCALE_TOUCH_CARD:1.1,DISTANCE_SELECTED_CARD:40,POSITION_MY_CARDS_X:-250,POSITION_MY_CARDS_Y:-250,DISTANCE_CARD_IN_TABLE:20,DISTANCE_TWO_CARDS_IN_TABLE:40,TIME_MOVE_CARDS_TO_TABLE:.25,DISTANCE_MAX_RANDOM_POSITION_CARD_X:100,DISTANCE_MAX_RANDOM_POSITION_CARD_Y:50,SCALE_CARD_IN_TABLE:.6,TIME_FLIP_CARD_IN_TABLE:.25,TIME_SORT_CARDS_IN_OTHER_PLAYER:.5,DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:40,DISTANCE_BACK_CARD_OTHER_PLAYER:60,SCALE_CARDS_IN_OTHER_PLAYER:.6,TIME_SHOW_CARDS_OTHER_PLAYERS:.5},cc._RF.pop()},{}],TLMNConstant:[function(t,e,i){"use strict";cc._RF.push(e,"75e5eld/shHv6VbCcDo/PeJ","TLMNConstant");e.exports={START:"START",COUNT_DOWN:"COUNT_DOWN",PLAY:"PLAY",IGNORE:"IGNORE",RESULT:"RESULT",ROOM_INFO:"ROOM_INFO",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_LEFT_ROOM_WITH_CHANGE_HOME:"PLAYERS_LEFT_ROOM_WITH_CHANGE_HOME",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",ADD_PLAYER:"ADD_PLAYER"},cc._RF.pop()},{}],TLMNGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"1a345Mlxn9L1JmRLWkvRfGD","TLMNGroupCardsType");e.exports={KHONG_HOP_LE:"KHONG_HOP_LE",BAI_RAC:"BAI_RAC",MOT_DOI:"MOT_DOI",MOT_BO_BA:"MOT_BO_BA",MOT_TU_QUY:"MOT_TU_QUY",BA_DOI_THONG:"BA_DOI_THONG",BON_DOI_THONG:"BON_DOI_THONG",MOT_DAY:"MOT_DAY"},cc._RF.pop()},{}],TLMNHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"5934bUfIoVCjJ5cUYFhOjbw","TLMNHandlerEffect");var o=t("./TLMNCard"),n=t("./item/TLMNCardController"),s=t("./TLMNConfig"),a=t("./TLMNUtil"),r=t("./TLMNThoiType"),c=t("./TLMNWinType"),h=t("./TLMNRecommend"),l=t("../../util/CardUtil"),u=t("../../util/RandomUtil"),d={init:function(t){this.TLMN=t,this.TLMNUI=t.TLMNUI,this.GameCommon=t.GameCommon,this.sortCard=!1,this.listPlayers=t.listPlayers,this.recommenedToggle=t.recommenedToggle},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.initMyCards(t):this.listPlayers[e].TLMNPlayer.showCardBack(s.NUMBER_CARDS_EACH_PLAYERS)},initMyCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.TLMN.myCardsNode.removeAllChildren(!0),this.TLMNUI.showSortButton(),t){var o=this.initNewCardNode(t[i]);o.parent=this.TLMN.myCardsNode,o.scale=s.SCALE_CARDS_IN_HAND;var a=o.addComponent(n);a.init(this.TLMN),o.tlmnCardController=a;var r=s.DISTANCE_TWO_CARDS_IN_HAND*i+s.POSITION_MY_CARDS_X,c=s.POSITION_MY_CARDS_Y;e?(o.setPosition(s.POSITION_MY_CARDS_X,s.POSITION_MY_CARDS_Y),o.runAction(cc.moveTo(s.TIME_SORT_CARDS_IN_HAND,r,c))):o.setPosition(r,c)}},resumeCards:function(t){var e=t.data.players;for(var i in e)if(e[i].is_player)if(e[i].isItMe){var o=e[i].cards;this.initMyCards(o,!1)}else{var n=e[i].number_cards;e[i].TLMNPlayer.showCardBack(n)}},initLastRoundCards:function(t){var e=t.data.last_round_cards.cards,i=this.getRandomPositonInTable();if(e)for(var o in e){var n=this.initNewCardNode(e[o]);n.setPosition((o-e.length/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+i.x,i.y),n.scale=s.SCALE_CARD_IN_TABLE,n.parent=this.TLMN.tableCardsNode}},sort:function(){var t=this.TLMN.myCardsNode.getChildren(),e=[];for(var i in t)e.push(t[i].getComponent("CardController").getTrueValue());this.sortCard?(a.sortCardsASC(e),this.initMyCards(e),this.sortCard=!this.sortCard):(this.initMyCards(l.sortList(e)),this.sortCard=!this.sortCard)},handlePlayerStart:function(t){var e=t.data.id_playing,i=this.TLMN.getPlayerByUserId(e);i&&i.isItMe&&this.initRecommendIgnore()},handlePlayingPlayer:function(t){var e=t.data.id_playing,i=t.data.is_new_round,o=this.TLMN.getPlayerByUserId(e);o&&(this.TLMN.idPlaying=e,o.isItMe?(this.checkShowButtons(),i?this.listCardPlay=[]:this.TLMNUI.showIgnoreTurnButton()):(this.TLMNUI.hidePlayButton(),this.TLMNUI.hideIgnoreTurnButton()),this.TLMN.startCountDownPlayer(o,t.time_remain,t.time))},handlePlayedPlayer:function(t){var e=t.data.cards,i=e.length,n=t.data.id_played||t.data.user_id_win,r=a.getGroupCardsType(e),c=this.getRandomPositonInTable();this.initRecommendPlay(e),this.showDarkEffectAllCardsRevealInTable();var h=this.TLMN.getPlayerByUserId(n);if(h)if(h.isItMe){var l=this.TLMN.getCardsNodeByCards(e);for(var u in l)l[u].stopAllActions(),l[u].parent=this.TLMN.tableCardsNode,l[u].scale=1,l[u].cardController.hideHighLight(),l[u].tlmnCardController.disableEvents(),l[u].runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(u-i/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+c.x,c.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)));this.sortMyCards(),this.checkShowButtons()}else{var d=h.node.x,m=h.node.y;d+=s.DISTANCE_BACK_CARD_OTHER_PLAYER*(d>0?-1:1);for(var p=0;p<i;p++){var f=cc.instantiate(this.TLMN.cardPrefab);f.setPosition(d,m),f.scale=s.SCALE_CARDS_IN_OTHER_PLAYER,f.parent=this.TLMN.tableCardsNode;var g=f.getComponent("CardController"),_=new o(e[p]);g.init(_),f.cardController=g,f.runAction(cc.spawn(cc.moveTo(s.TIME_MOVE_CARDS_TO_TABLE,(p-i/2)*s.DISTANCE_TWO_CARDS_IN_TABLE+c.x,c.y),cc.scaleTo(s.TIME_MOVE_CARDS_TO_TABLE,s.SCALE_CARD_IN_TABLE)))}this.minusNumberCardsForPlayer(h,i)}h.TLMNPlayer.showGroupCardsTypeEffect(r)},handleResult:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.showEffectMinusBalanceAndWinner(t.money_change),this.showEffectShowPlayersCards(t,e),this.resetRecommend();var i=t.user_id_win;if(t.win_type===c.WIN_TYPE_THANG_TRANG){var o=t.thang_trang_type,n=this.TLMN.getPlayerByUserId(i);n&&n.TLMNPlayer.showThangTrangEffect(o)}},showEffectMinusBalanceAndWinner:function(t){for(var e in t){var i=t[e].user_id,o=t[e].money_change,n=this.TLMN.getPlayerByUserId(i);n&&(n.BasePlayer.hideText(),n.BasePlayer.showChangeBalance(o),n.BasePlayer.showEffectByChangeBalance(o),n.isItMe&&o>0&&this.GameCommon.Audio.playWin())}},showEffectShowPlayersCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.win_type,o=t.players_cards,n=t.money_change;for(var s in o){var a=o[s].user_id,r=o[s].cards,c=void 0;for(var h in n)n[h].user_id===a&&(c=n[h].money_change);var l=this.TLMN.getPlayerByUserId(a);if(l)if(r.length>0)if(l.isItMe){var u=this.TLMN.myCardsNode.getChildren(),d=[];for(var m in u)d.push(u[m].cardController);this.showEffectTypeWin(l,r,d,i,c)}else{l.TLMNPlayer.showCards(r,e);var p=l.TLMNPlayer.getListCardController();this.showEffectTypeWin(l,r,p,i,c)}else this.showEffectTypeWin(l,r,[],i,c)}},showEffectTypeWin:function(t,e,i,o,n){if(o===c.WIN_TYPE_HET_BAI){var s=a.getCardsThoi(e),h=s.cards;switch(s.type){case r.KhongHopLe:break;case r.Cong:t.TLMNPlayer.showEffectCong();break;case r.ThoiHai:t.TLMNPlayer.showEffectThoiHai(),this.showCardsThoiEffectByTrueValue(h,i);break;case r.ThoiBaDoiThong:t.TLMNPlayer.showEffectThoiBaDoiThong(),this.showCardsThoiEffectByValue(h,i);break;case r.ThoiTuQuy:t.TLMNPlayer.showEffectThoiTuQuy(),this.showCardsThoiEffectByTrueValue(h,i);break;case r.ThoiBonDoiThong:t.TLMNPlayer.showEffectThoiBonDoiThong(),this.showCardsThoiEffectByValue(h,i)}}else o===c.WIN_TYPE_KET_BA_BICH?n>0&&t.TLMNPlayer.showEffectKetBaBich():o===c.WIN_TYPE_CHAN_KET_BA_BICH&&n>0&&t.TLMNPlayer.showEffectChanKetBaBich()},showCardsThoiEffectByTrueValue:function(t,e){for(var i in e)e[i].showDarkEffect();for(var o in e)for(var n in t)if(e[o].trueValue===t[n]){e[o].hideDarkEffect();break}},showCardsThoiEffectByValue:function(t,e){var i=0;for(var o in e)e[o].showDarkEffect();for(var n in t)for(var s in i=0,e)parseInt(e[s].trueValue/100)===parseInt(t[n]/100)&&++i<3&&e[s].hideDarkEffect()},sortMyCards:function(){var t=this.TLMN.myCardsNode.getChildren();for(var e in t){var i=s.DISTANCE_TWO_CARDS_IN_HAND*e+s.POSITION_MY_CARDS_X,o=s.POSITION_MY_CARDS_Y;t[e].tlmnCardController.isSelected=!1,t[e].tlmnCardController.moveTo(i,o)}},initNewCardNode:function(t){var e=cc.instantiate(this.TLMN.cardPrefab);e.trueValue=t;var i=new o(t),n=e.getComponent("CardController");return n.init(i),e.cardController=n,e},minusNumberCardsForPlayer:function(t,e){var i=t.TLMNPlayer.getNumberCards()-e;t.TLMNPlayer.showCardBack(i)},handlerIgnoreTurn:function(t){var e=t.data.id_ignore,i=t.data.is_new_round,o=t.data.id_playing,n=this.TLMN.getPlayerByUserId(e),s=this.TLMN.getPlayerByUserId(o);i?this.clearIgnoreTurnAllPlayers():n&&n.TLMNPlayer.showIgnoreTurn(),s&&(s.isItMe&&i?this.initRecommendIgnore():this.initRecommendPlay())},removeAllCardsInTable:function(){this.TLMN.tableCardsNode.removeAllChildren(!0)},flipCardsInTable:function(){var t=this.TLMN.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&(t[e].cardController.hideDarkEffect(),t[e].cardController.revealWithAnimationFlip(!1,s.TIME_FLIP_CARD_IN_TABLE,!1))},showDarkEffectAllCardsRevealInTable:function(){var t=this.TLMN.tableCardsNode.getChildren();for(var e in t)t[e].cardController.isReveal()&&t[e].cardController.showDarkEffect()},getRandomPositonInTable:function(){var t=u.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_X,s.DISTANCE_MAX_RANDOM_POSITION_CARD_X),e=u.getRandom(-s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y,s.DISTANCE_MAX_RANDOM_POSITION_CARD_Y);return new cc.Vec2(t,e)},handleChangeMoney:function(t){var e=t.data.money_change;if(e)for(var i in e){var o=e[i].user_id,n=e[i].money_change,s=this.TLMN.getPlayerByUserId(o);s&&s.BasePlayer.showChangeBalance(n)}},checkShowButtons:function(){var t=!1,e=this.TLMN.myCardsNode.getChildren();for(var i in e)if(e[i].tlmnCardController.isSelected){t=!0;break}t?this.TLMNUI.showIgnoreSelectButton():this.TLMNUI.hideIgnoreSelectButton(),this.TLMN.checkIsMyTurn()&&(t?this.TLMNUI.showPlayButton():this.TLMNUI.hidePlayButton())},clearIgnoreTurnAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].TLMNPlayer.setIgnoreTurn(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){},showRecommend:function(){this.recommenedToggle.isChecked&&(this.ignoreTurn?this.recommend_ignore&&this.showRecommendStartAndIgnore():this.is_recommend&&this.showRecommendPlay())},showRecommendPlay:function(){var t=[],e=[],i=this.listCardPlay,o=void 0,n=this.TLMN.myCardsNode.getChildren();for(var s in n)e.push(n[s].getComponent("CardController").getTrueValue());for(var a in n)n[a].tlmnCardController.isSelected&&(o=n[a].getComponent("CardController").getTrueValue());if(i&&e&&o&&(t=h.getRecommend(e,i,o)),t)for(var r=0,c=t.length;r<c;r++)for(var l=0,u=e.length;l<u;l++)t[r]===e[l]&&(n[l].getComponent("TLMNCardController").getSelected()||n[l].getComponent("TLMNCardController").selectCard());this.listCardPlay=[],this.is_recommend=!1},showRecommendStartAndIgnore:function(){var t=[],e=[],i=this.TLMN.myCardsNode.getChildren();for(var o in i){var n=i[o].getComponent("CardController").getTrueValue();t.push(n),i[o].getComponent("TLMNCardController").getSelected()&&e.push(n)}if(e.length>=2){for(var s in e=h.getRecommendStartAndIgnore(t,e),t=[],i)t.push(i[s].getComponent("CardController").getTrueValue());if(e)for(var a=0,r=e.length;a<r;a++)for(var c=0,l=t.length;c<l;c++)e[a]===t[c]&&(i[c].getComponent("TLMNCardController").getSelected()||i[c].getComponent("TLMNCardController").selectCard());this.ignoreTurn=!1,this.recommend_ignore=!1}},initRecommendIgnore:function(){this.ignoreTurn=!0,this.recommend_ignore=!0,this.is_recommend=!1,this.listCardPlay=[]},initRecommendPlay:function(t){this.ignoreTurn=!1,this.is_recommend=!0,this.recommend_ignore=!1,t&&(this.listCardPlay=t)},resetRecommend:function(){this.ignoreTurn=!1,this.is_recommend=!1,this.recommend_ignore=!1,this.listCardPlay=[]}};e.exports=d,cc._RF.pop()},{"../../util/CardUtil":"CardUtil","../../util/RandomUtil":"RandomUtil","./TLMNCard":"TLMNCard","./TLMNConfig":"TLMNConfig","./TLMNRecommend":"TLMNRecommend","./TLMNThoiType":"TLMNThoiType","./TLMNUtil":"TLMNUtil","./TLMNWinType":"TLMNWinType","./item/TLMNCardController":"TLMNCardController"}],TLMNHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"562adBJqJ5Fy6k8nP/kRsqH","TLMNHandlerRequest");var o=t("./TLMNConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.TLMN=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.TLMN.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.GOLD:this.TLMN.initGold(e);break;case n.MONEY:this.TLMN.initMoney(e);break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.ROOM_INFO:this.TLMN.handleRoomInfo(e);break;case o.START:this.TLMN.handleStart(e);break;case o.COUNT_DOWN:this.TLMN.handleCountDown(e);break;case o.PLAY:this.TLMN.handlePlay(e);break;case o.IGNORE:this.TLMN.handleIgnore(e);break;case o.SORT:this.TLMN.handleSort(e);break;case o.RESULT:this.TLMN.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.TLMN.handlePlayersLeftRoom(e);break;case o.PLAYERS_LEFT_ROOM_WITH_CHANGE_HOME:this.TLMN.handlePlayersLeftRoomWithChangeHome(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.TLMN.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.TLMN.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.TLMN.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./TLMNConstant":"TLMNConstant"}],TLMNPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"44457NA5rpNgIybocMyNvER","TLMNPlayer");var o=t("./TLMNCard"),n=t("./TLMNConfig"),s=t("./TLMNGroupCardsType"),a=t("./TLMNThangTrangType"),r=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node,cardBackNode:cc.Node,numberCardLabel:cc.Label},onLoad:function(){this.numberCard=0},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var s=new o(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(s),a.cardController=r;var c=0;c=this.cardsNode.x>0?i*n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS:(t.length-i-1)*-n.DISTANCE_TWO_CARDS_IN_OTHER_PLAYERS,e?(a.setPosition(0,0),a.runAction(cc.moveTo(n.TIME_SHOW_CARDS_OTHER_PLAYERS,c,0))):a.setPosition(c,0)}},getListCardController:function(){var t=[],e=this.cardsNode.getChildren();for(var i in e)t.push(e[i].cardController);return t},showCardBack:function(t){this.numberCards=t,this.numberCardLabel.string=t,this.cardBackNode.active=0!==t},getNumberCards:function(){return this.numberCards},hideCardBack:function(){this.numberCardLabel.string="",this.cardBackNode.active=!1},setIgnoreTurn:function(t){t?this.showIgnoreTurn():this.hideIgnoreTurn()},showIgnoreTurn:function(){this.node.getComponent("BasePlayer").showTextDark(r.TLMN_IGNORE_TURN)},hideIgnoreTurn:function(){this.node.getComponent("BasePlayer").hideTextDark()},showEffectCong:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_CONG)},showEffectThoiHai:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_HAI)},showEffectThoiBaDoiThong:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_BA_DOI_THONG)},showEffectThoiTuQuy:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_TU_QUY)},showEffectThoiBonDoiThong:function(){this.node.getComponent("BasePlayer").showLoseEffect(r.TLMN_THOI_BON_DOI_THONG)},showEffectChanKetBaBich:function(){this.node.getComponent("BasePlayer").showWinEffect(r.TLMN_CHAN_KET_BA_BICH)},showEffectKetBaBich:function(){this.node.getComponent("BasePlayer").showWinEffect(r.TLMN_KET_BA_BICH)},showGroupCardsTypeEffect:function(t){var e="";switch(t){case s.BA_DOI_THONG:e=r.TLMN_BA_DOI_THONG;break;case s.BON_DOI_THONG:e=r.TLMN_BON_DOI_THONG;break;case s.MOT_TU_QUY:e=r.TLMN_MOT_TU_QUY}e&&this.node.getComponent("BasePlayer").showTextLight(e,!0)},showThangTrangEffect:function(t){var e="";switch(t){case a.SANH_RONG:e=r.TLMN_SANH_RONG;break;case a.SAU_DOI_THONG:e=r.TLMN_SAU_DOI_THONG;break;case a.BON_BO_BA:e=r.TLMN_BON_BO_BA;break;case a.HAI_BO_TU_QUY:e=r.TLMN_HAI_BO_TU_QUY;break;case a.MUOI_HAI_CON_BAI_DONG_CHAT:e=r.TLMN_MUOI_HAI_CON_DONG_CHAT;break;case a.NAM_DOI_THONG:e=r.TLMN_NAM_DOI_THONG;break;case a.TU_HAI:e=r.TLMN_TU_HAI;break;case a.SAU_DOI:e=r.TLMN_SAU_DOI}e&&this.node.getComponent("BasePlayer").showWinEffect(e)},reset:function(){this.numberCards=0,this.hideCardBack(),this.hideIgnoreTurn(),this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./TLMNCard":"TLMNCard","./TLMNConfig":"TLMNConfig","./TLMNGroupCardsType":"TLMNGroupCardsType","./TLMNThangTrangType":"TLMNThangTrangType"}],TLMNRecommend:[function(t,e,i){"use strict";cc._RF.push(e,"61decMDoK5Mp6uuqZTS+mzB","TLMNRecommend");var o={BO_DOI_4:4,BO_DOI_3:3,getRecommend:function(t,e,i){return e.length%2==0?this.checCard2(e)?this.getRecommendDoi2(t,e,i):this.checkTuQuy(e)?this.getRecommendTuQuy(t,e,i):this.checkBoDoi(e,this.BO_DOI_4)?this.getRecommendBoDoi4(t,e,i):this.checkBoDoi(e,this.BO_DOI_3)?this.getRecommendBoDoi3(t,e,i):this.checkTypeListCardSuite(e)?this.getListSuite(t,e,i):this.getListCardArray(t,e,i):this.check3Card2(e)?null:this.checCard2(e)?this.getRecommendCard2(t,e,i):this.checkTypeListCardSuite(e)?this.getListSuite(t,e,i):this.getListCardArray(t,e,i)},getRecommendBoDoi4:function(t,e,i){var o=t.slice();o=this.remveCard2(o);var n;return(n=this.getBoDoi(o,e,i,this.BO_DOI_4))&&this.getMaxValue(n)>this.getMaxValue(e)?n:null},getRecommendTuQuy:function(t,e,i){var o=t.slice(),n=void 0;return i>e[0]?((n=this.getTuQuy(o,i))||(o=this.remveCard2(o),n=this.getBoDoi(o,e,i,this.BO_DOI_4)),n):(o=this.remveCard2(o),n=this.getBoDoi(o,e,i,this.BO_DOI_4))},getRecommendDoi2:function(t,e,i){var o=t.slice(),n=void 0;return(n=this.getListSuite(o,e,i))||(n=this.getTuQuy(o,i)),n||(o=this.remveCard2(o),n=this.getBoDoi(o,e,i,this.BO_DOI_4)),n},getRecommendBoDoi3:function(t,e,i){var o=t.slice();o=this.remveCard2(o);var n=void 0;if((n=this.getBoDoi(o,e,i,this.BO_DOI_3))&&this.getMaxValue(n)>this.getMaxValue(e))return n;return(n=this.getTuQuy(t,i))||(n=this.getBoDoi(o,e,i,this.BO_DOI_4)),n},getRecommendCard2:function(t,e,i){var o=void 0;if(e[0]>i){var n=t.slice();n=this.remveCard2(n),(o=this.getBoDoi(n,e,i,this.BO_DOI_3))||(o=this.getTuQuy(t,i))}return o},getListSuite:function(t,e,i){var o=t.slice(),n=[];n.push(i);for(var s=parseInt(i/100),a=1,r=e.length;a<r;a++)for(var c=0,h=o.length;c<h;c++){if(o[c]!==i&&0!==o[c])if(s===parseInt(o[c]/100)){n.push(o[c]),o[c]=0;break}}return n.length>=e.length&&this.getMaxValue(n)>this.getMaxValue(e)?n:null},getListCardArray:function(t,e,i){var o=void 0;if(i<1500){var n=this.remveCard2(t),s=n.slice(),a=[],r=this.getListAllCard(s),c=parseInt(i/100);if(a.push(c),c+1<r.length)for(var h=c+1;r[h]>0&&h<r.length;)a.push(h),h++;if(c-1>=0)for(var l=c-1;r[l]>0&&l>=0;)a.push(l),l--;if(o=this.getListCardRecommend(a,e,n),o=this.addCardLoading(o,i),o=this.remveCard2(o),o=this.getCardMaxInArray(o,n,i),a&&e)if(a.length>=e.length)return this.getMaxValue(o)>this.getMaxValue(e)?o:null}return null},getBoDoi:function(t,e,i,o){var n=t.slice(),s=i,a=[],r=[],c=this.getListAllCard(n),h=parseInt(s/100);if(c[h]>=2){if(a.push(h),h+1<c.length)for(var l=h+1;c[l]>=2&&l<c.length;)a.push(l),l++;if(h-1>=0)for(var u=h-1;c[u]>=2&&u>=0;)a.push(u),u--;return a.length>=o?(r=this.getListRecommendInValue(t,a,i,o),r=this.getCardMaxInArray(r,t,i)):null}return null},getTuQuy:function(t,e){var i=t.slice(),o=e,n=[];n.push(e);for(var s=parseInt(o/100),a=0,r=i.length;a<r;a++){if(i[a]!==e&&0!==i[a])s===parseInt(i[a]/100)&&(n.push(i[a]),i[a]=0)}return n.length>=4?n:null},getListCardRecommend:function(t,e,i){for(var o=i.slice(),n=[],s=0,a=e.length;s<a;s++)for(var r=t[s],c=0,h=o.length;c<h;c++){if(0!==o[c])if(r===parseInt(o[c]/100)){n.push(o[c]),o[c]=0;break}}return n},getListRecommendInValue:function(t,e,i,o){for(var n=t.slice(),s=[],a=1;a<o;a++)for(var r=0,c=n.length;r<c;r++)if(0!=n[r]){var h=parseInt(n[r]/100);if(e[a]===h){s.push(n[r]),n[r]=0;for(var l=r,u=n.length;l<u;l++)if(0!=n[l]){var d=parseInt(n[l]/100);if(e[a]===d){s.push(n[l]),n[l]=0;break}}break}}for(var m=parseInt(i/100),p=0,f=n.length;p<f;p++){if(0!=n[p]&&n[p]!==i)if(parseInt(n[p]/100)===m){s.push(i),s.push(n[p]);break}}return s},getMaxValue:function(t){for(var e=t[0],i=0,o=t.length;i<o;i++)e<t[i]&&(e=t[i]);return e},getCardMaxInArray:function(t,e,i){var o=this.getMaxValue(t);if(i!==o){for(var n=o,s=parseInt(o/100),a=0,r=e.length;a<r;a++){s===parseInt(e[a]/100)&&o<e[a]&&(n=e[a])}if(n!==o)for(var c=0,h=t.length;c<h;c++)o===t[c]&&(t[c]=n)}return t},checkTuQuy:function(t){if(t.length===this.BO_DOI_4){for(var e=parseInt(t[0]/100),i=1,o=t.length;i<o;i++){if(e!==parseInt(t[i]/100))return!1}return!0}return!1},checkBoDoi:function(t,e){for(var i=this.getListAllCard(t),o=0,n=0,s=i.length;n<s;n++)if(0!=i[n]){o=n;break}for(var a=0;a<e;a++){if(2!==i[o])return!1;o++}return!0},checCard2:function(t){return t[0]>=1500},check3Card2:function(t){return t.length>=3&&this.checCard2(t)},checkBaCard:function(t){return length>=3&&parseInt(t[0]/100)===parseInt(t[1]/100)},getListAllCard:function(t){for(var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0,o=t.length;i<o;i++){e[parseInt(t[i]/100)]++}return e},checkTypeListCardSuite:function(t){return t.length>1&&parseInt(t[0]/100)===parseInt(t[1]/100)},getRecommendStartAndIgnore:function(t,e){return this.checkTypeListCardSuite(e)?this.getListSuiteStartAndIgnore(t,e):this.checkListCard2(e)?this.getListArrayStartAndIgnore(t,e):e},getListSuiteStartAndIgnore:function(t,e){for(var i=e[0],o=e[1],n=parseInt(e[0]/100),s=0,a=t.length;s<a;s++){if(t[s]!==i&&t[s]!==o)n===parseInt(t[s]/100)&&e.push(t[s])}return e},getListArrayStartAndIgnore:function(t,e){var i=e[0],o=e[1],n=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(o/100);return this.checkDistanceCard(s,a,n)&&(e=this.getListStartAndIgnore(t,e)),e},checkDistanceCard:function(t,e,i){for(var o=t<e?t:e,n=t>e?t:e;o<n;o++)if(0===i[o])return!1;return!0},getListStartAndIgnore:function(t,e){var i=e[0],o=e[1],n=this.getListAllCard(t),s=parseInt(i/100),a=parseInt(o/100),r=s>a?s:a,c=s<a?s:a,h=this.getListCardValueRecommend(c,r,n);return h&&(e=this.getListCardRecommendStartAndignore(e,t,h)),e},getListCardValueRecommend:function(t,e,i){var o=[];if(t-1>=0)for(var n=t-1;i[n]>0&&n>=0;)o.push(n),n--;if(e+1<i.length)for(var s=e+1;i[s]>0&&s<i.length;)o.push(s),s++;if(e-t>1)for(var a=t+1;a<e;a++)o.push(a);return o},getListCardRecommendStartAndignore:function(t,e,i){for(var o=e.slice(),n=0,s=i.length;n<s;n++)for(var a=0,r=o.length;a<r;a++){if(0!==o[a])if(parseInt(o[a]/100)===i[n]){t.push(o[a]),o[a]=0;break}}return t=this.remveCard2(t)},remveCard2:function(t){if(t)for(var e=0,i=t.length;e<i;e++)t[e]>=1500&&(t.splice(e,1),e--);return t},checkListCard2:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e]>=1500)return!1;return!0},addCardLoading:function(t,e){for(var i=parseInt(e/100),o=0,n=t.length;o<n;o++){if(parseInt(t[o]/100)===i)return t[o]=e,t}}};e.exports=o,cc._RF.pop()},{}],TLMNState:[function(t,e,i){"use strict";cc._RF.push(e,"a56f7ZKWtVGXbL1B77WiULf","TLMNState");e.exports={currentState:null,STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",setState:function(t){this.currentState=t},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setPlaying:function(){this.currentState=this.PLAYING},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],TLMNThangTrangType:[function(t,e,i){"use strict";cc._RF.push(e,"08df9iUenxCgaqpoeGW/X7z","TLMNThangTrangType");e.exports={SANH_RONG:"SANH_RONG",SAU_DOI_THONG:"SAU_DOI_THONG",BON_BO_BA:"BON_BO_BA",HAI_BO_TU_QUY:"HAI_BO_TU_QUY",MUOI_HAI_CON_BAI_DONG_CHAT:"MUOI_HAI_CON_BAI_DONG_CHAT",NAM_DOI_THONG:"NAM_DOI_THONG",TU_HAI:"TU_HAI",SAU_DOI:"SAU_DOI",KHONG_PHAI_THANG_TRANG:"KHONG_PHAI_THANG_TRANG"},cc._RF.pop()},{}],TLMNThoiType:[function(t,e,i){"use strict";cc._RF.push(e,"c4d9aang0pKkLfrlzH11pv9","TLMNThoiType");var o=cc.Enum({KhongHopLe:1,Cong:2,ThoiHai:3,ThoiBaDoiThong:4,ThoiTuQuy:5,ThoiBonDoiThong:6});e.exports=o,cc._RF.pop()},{}],TLMNUI:[function(t,e,i){"use strict";cc._RF.push(e,"9eebckgHMBCA4di+5FrYpJU","TLMNUI"),cc.Class({extends:cc.Component,properties:{playButton:cc.Node,ignoreTurnButton:cc.Node,ignoreSelectButton:cc.Node,sortButton:cc.Node,playersNode:[cc.Node],playersSoloNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},hideAllPlayers:function(){for(var t in this.playersNode)this.playersNode[t].active=!1},initSoloRoom:function(){this.playersPlaceHolderNode[1].active=!1,this.playersPlaceHolderNode[3].active=!1},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showPlayButton:function(){this.playButton.active=!0},hidePlayButton:function(){this.playButton.active=!1},showSortButton:function(){this.sortButton.active=!0},hideSortButton:function(){this.sortButton.active=!1},showIgnoreTurnButton:function(){this.ignoreTurnButton.active=!0},hideIgnoreTurnButton:function(){this.ignoreTurnButton.active=!1},showIgnoreSelectButton:function(){this.ignoreSelectButton.active=!0},hideIgnoreSelectButton:function(){this.ignoreSelectButton.active=!1},hideAllButtons:function(){this.hidePlayButton(),this.hideIgnoreTurnButton(),this.hideIgnoreSelectButton(),this.hideSortButton()},reset:function(){this.hideAllButtons()}}),cc._RF.pop()},{}],TLMNUtil:[function(t,e,i){"use strict";cc._RF.push(e,"7f44aq/fWhIurhPH/LgqmQG","TLMNUtil");var o=t("./TLMNGroupCardsType"),n=t("./TLMNThoiType"),s=t("./TLMNConfig"),a={getGroupCardsType:function(t){var e=this.cloneCards(t),i=o.KHONG_HOP_LE;switch(e.length){case 0:break;case 1:i=o.BAI_RAC;break;case 2:this.checkMotDoi(e)&&(i=o.MOT_DOI);break;case 3:this.checkMotBoBa(e)?i=o.MOT_BO_BA:this.checkMotDay(e)&&(i=o.MOT_DAY);break;case 4:this.checkMotTuQuy(e)?i=o.MOT_TU_QUY:this.checkMotDay(e)&&(i=o.MOT_DAY);break;case 6:this.getCardsBaDoiThong(e).length>0?i=o.BA_DOI_THONG:this.checkMotDay(e)&&(i=o.MOT_DAY);break;case 8:this.getCardsBonDoiThong(e).length>0?i=o.BON_DOI_THONG:this.checkMotDay(e)&&(i=o.MOT_DAY);break;default:this.checkMotDay(e)&&(i=o.MOT_DAY)}return i},getCardsThoi:function(t){var e=this.cloneCards(t),i=this.getCardsCong(e),o=this.getCardsBonDoiThong(e),s=this.getCardsTuQuy(e),a=this.getCardsBaDoiThong(e),r=this.getCardsHai(e);return i.length>0?{type:n.Cong,cards:i}:o.length>0?{type:n.ThoiBonDoiThong,cards:o}:s.length>0?{type:n.ThoiTuQuy,cards:s}:a.length>0?{type:n.ThoiBaDoiThong,cards:a}:r.length>0?{type:n.ThoiHai,cards:r}:{type:n.KhongHopLe,cards:[]}},getCardsCong:function(t){return t.length===s.NUMBER_CARDS_EACH_PLAYERS?t:[]},getCardsBonDoiThong:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,o=0,n=[],s=0;s<e.length;s++)0===o?o=e[s]:this.getValueCard(o)===this.getValueCard(e[s])?i>0?this.getValueCard(e[i-1])!==this.getValueCard(o)&&(n.push(o),++i,o=0):(n.push(o),++i,o=0):o=t[s];for(var a=0,r=n.length-1;a<r;a++)this.getValueCard(n[a])===this.getValueCard(n[a+1])&&n.splice(a,1);if(5==i){for(var c=!0,h=0;h<i-1;h++)this.getValueCard(n[h])+1!==this.getValueCard(n[h+1])&&(c=!1);if(c)return[n[0],n[1],n[2],n[3]];c=!0;for(var l=1;l<i;l++)this.getValueCard(n[l])+1!==this.getValueCard(n[l+1])&&(c=!1);if(c)return[n[1],n[2],n[3],n[4]]}else if(4==i){for(var u=0;u<i-1;u++)if(this.getValueCard(n[u])+1!==this.getValueCard(n[u+1]))return[];return n}return[]},getCardsTuQuy:function(t){var e=this.cloneCards(t);if(this.sortCardsASC(e),e.length>3)for(var i=0;i<=e.length-4;i++)if(e[i]&&e[i+1]&&e[i+2]&&e[i+3]&&this.getValueCard(e[i])===this.getValueCard(e[i+1])&&this.getValueCard(e[i])===this.getValueCard(e[i+2])&&this.getValueCard(e[i])===this.getValueCard(e[i+3]))return[e[i],e[i+1],e[i+2],e[i+3]];return[]},getCardsBaDoiThong:function(t){var e=this.cloneCards(t);this.sortCardsASC(e);for(var i=0,o=0,n=[],a=0;a<e.length;a++)0===o?o=e[a]:this.getValueCard(o)===this.getValueCard(e[a])?i>0?this.getValueCard(e[i-1])!==this.getValueCard(o)&&o!==s.VALUE_HAI&&(n.push(o),++i,o=0):o!==s.VALUE_HAI&&(n.push(o),++i,o=0):o=t[a];switch(i){case 5:for(var r=!0,c=0;c<i-3;c++)this.getValueCard(n[c])+1===this.getValueCard(n[c+1])&&this.getValueCard(n[c+1])!==s.VALUE_HAI||(r=!1);if(r)return[n[0],n[1],n[2]];r=!0;for(var h=1;h<i-2;h++)this.getValueCard(n[h])+1===this.getValueCard(n[h+1])&&this.getValueCard(n[h+1])!==s.VALUE_HAI||(r=!1);if(r)return[n[1],n[2],n[3]];r=!0;for(var l=2;l<i-1;l++)this.getValueCard(n[l])+1===this.getValueCard(n[l+1])&&this.getValueCard(n[l+1])!==s.VALUE_HAI||(r=!1);if(r)return[n[2],n[3],n[4]];break;case 4:for(var u=!0,d=0;d<i-2;d++)this.getValueCard(n[d])+1===this.getValueCard(n[d+1])&&this.getValueCard(n[d+1])!==s.VALUE_HAI||(u=!1);if(u)return[n[0],n[1],n[2]];u=!0;for(var m=1;m<i-1;m++)this.getValueCard(n[m])+1===this.getValueCard(n[m+1])&&this.getValueCard(n[m+1])!==s.VALUE_HAI||(u=!1);if(u)return[n[1],n[2],n[3]];break;case 3:for(var p=0;p<i-1;p++)if(this.getValueCard(n[p])+1!==this.getValueCard(n[p+1])||this.getValueCard(n[p+1])===s.VALUE_HAI)return[];return n}return[]},getCardsHai:function(t){for(var e=[],i=0,o=t.length;i<o;i++)this.getValueCard(t[i])===s.VALUE_HAI&&e.push(t[i]);return e},checkMotDoi:function(t){return 2===t.length&&this.checkSameValueCards(t)},checkMotBoBa:function(t){return 3===t.length&&this.checkSameValueCards(t)},checkMotTuQuy:function(t){return 4===t.length&&this.checkSameValueCards(t)},checkSameValueCards:function(t){for(var e=0;e<t.length-1;e++)if(this.getValueCard(t[e])!=this.getValueCard(t[e+1]))return!1;return!0},checkMotDay:function(t){if(t.length>2){this.sortCardsASC(t);var e=0;for(var i in t){var o=this.getValueCard(t[i]);if(o===s.VALUE_HAI)return!1;if(0===e)e=o;else{if(o!==e+1)return!1;e=o}}}return!1},getValueCard:function(t){return parseInt(t/100)},getTypeCard:function(t){return t%4},sortCardsASC:function(t){t.sort(function(t,e){return t-e})},sortCardsDESC:function(t){t.sort(function(t,e){return e-t})},cloneCards:function(t){for(var e=[],i=0,o=t.length;i<o;i++){var n=t[i];e.push(n)}return e}};e.exports=a,cc._RF.pop()},{"./TLMNConfig":"TLMNConfig","./TLMNGroupCardsType":"TLMNGroupCardsType","./TLMNThoiType":"TLMNThoiType"}],TLMNWinType:[function(t,e,i){"use strict";cc._RF.push(e,"4369cqEaoxEFZVHHVAyg3c9","TLMNWinType");e.exports={WIN_TYPE_HET_BAI:"HET_BAI",WIN_TYPE_THANG_TRANG:"THANG_TRANG",WIN_TYPE_KET_BA_BICH:"KET_BA_BICH",WIN_TYPE_CHAN_KET_BA_BICH:"CHAN_KET_BA_BICH"},cc._RF.pop()},{}],TLMN:[function(t,e,i){"use strict";cc._RF.push(e,"e0202H0oABEXo7dMSsGvgcv","TLMN");var o=t("../../base/BaseController"),n=t("./TLMNConstant"),s=t("./TLMNConfig"),a=t("./TLMNUI"),r=t("./TLMNState"),c=t("./TLMNWinType"),h=t("./TLMNHandlerRequest"),l=t("./TLMNHandlerEffect"),u=t("../../prefab/GameCommon"),d=t("../../object/RoomType"),m=t("../../helper/Constant"),p=t("../../helper/Message");cc.Class({extends:o,properties:{cardPrefab:cc.Prefab,myCardsNode:cc.Node,tableCardsNode:cc.Node,recommenedToggle:cc.Toggle,TLMNUI:a,GameCommon:u},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_TLMN),this.sfsManager.setController(this),this.timeoutResult=null,this.myPlayer=null,this.myPosition=0,this.idPlaying=-1,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==d.MONEY_CODE,this.playersNode=this.TLMNUI.playersNode,this.isRoomSolo()&&(this.playersNode=this.TLMNUI.playersSoloNode,this.TLMNUI.initSoloRoom()),this.isMoneyType||this.TLMNUI.disableAllPlaceHolder(),this.TLMNConstant=n,this.TLMNConfig=s,this.TLMNState=r,this.TLMNHandlerRequest=h,this.TLMNHandlerRequest.init(this),this.TLMNHandlerEffect=l,this.TLMNHandlerEffect.init(this),this.GameCommon.init(this),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.TLMNHandlerRequest.onPublicMessage.bind(this.TLMNHandlerRequest),this.onRoomVarsUpdate=this.TLMNHandlerRequest.onRoomVarsUpdate.bind(this.TLMNHandlerRequest),this.onUserVarsUpdate=this.TLMNHandlerRequest.onUserVarsUpdate.bind(this.TLMNHandlerRequest),this.onResponse=this.TLMNHandlerRequest.onResponse.bind(this.TLMNHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a)}this.TLMNUI.hideAllPlayers(),this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;if((i-=this.myPosition)<0)i+=this.isRoomSolo()?s.NUMBER_SOLO_PLAYERS:s.NUMBER_PLAYERS;t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("TLMNPlayer");t.BasePlayer=o,t.TLMNPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRequestLeftRoom(t.request_left_room),o.setRoomMaster(t.is_home),o.setPlayerName(t.nick_name),o.setBalance(t.balance),n.setIgnoreTurn(t.ignore),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.TLMNState.setState(e),this.TLMNState.isStop()?this.reset():this.TLMNState.isWaiting()?this.resumeStateWaiting(t):this.TLMNState.isPlaying()?this.resumeStatePlaying(t):this.TLMNState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.TLMNHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){this.TLMNHandlerEffect.handlePlayingPlayer(t),this.TLMNHandlerEffect.resumeCards(t),this.TLMNHandlerEffect.initLastRoundCards(t)},resumeStateFinish:function(t){this.TLMNHandlerEffect.resumeCards(t),this.TLMNHandlerEffect.initLastRoundCards(t),this.TLMNHandlerEffect.handleResult(t.data.result,!1)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.TLMNHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,o=this.getPlayerByUserId(e);o&&!this.isMoneyType&&o.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,o=this.getPlayerByUserId(e);o&&this.isMoneyType&&o.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.TLMNState.setWaiting(),this.GameCommon.hideWaitingNode(),this.TLMNHandlerEffect.startCountDownAllPlayers(t)):(this.TLMNState.setStop(),this.TLMNHandlerEffect.stopCountDownAllPlayers())},handleStart:function(t){var e=t.data.cards.cards;this.TLMNState.setPlaying(),this.TLMNHandlerEffect.stopCountDownAllPlayers(),this.TLMNHandlerEffect.dealCards(e),this.TLMNHandlerEffect.handlePlayerStart(t),this.TLMNHandlerEffect.handlePlayingPlayer(t)},handlePlay:function(t){this.TLMNHandlerEffect.stopCountDownAllPlayers(),this.TLMNHandlerEffect.handlePlayedPlayer(t),this.TLMNHandlerEffect.handlePlayingPlayer(t)},handleIgnore:function(t){var e=t.data.is_new_round,i=t.data.is_end_game;e&&this.TLMNHandlerEffect.removeAllCardsInTable(),this.TLMNHandlerEffect.stopCountDownAllPlayers(),i||this.TLMNHandlerEffect.handlerIgnoreTurn(t),this.TLMNHandlerEffect.handlePlayingPlayer(t),this.TLMNHandlerEffect.handleChangeMoney(t)},handleResult:function(t){var e=t.data.win_type;if(this.TLMNState.setFinish(),this.TLMNHandlerEffect.stopCountDownAllPlayers(),this.TLMNUI.hideAllButtons(),e===c.WIN_TYPE_THANG_TRANG){var i=t.data.players_cards,o=this.getMyCardsByPlayersCards(i);this.TLMNHandlerEffect.dealCards(o),this.timeoutResult=setTimeout(function(){this.TLMNHandlerEffect.handleResult(t.data)}.bind(this),2e3)}else this.TLMNHandlerEffect.handlePlayedPlayer(t),this.TLMNHandlerEffect.handleResult(t.data);this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.TLMNState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersLeftRoomWithChangeHome:function(t){var e=t.data.user_id_home_player,i=this.getPlayerByUserId(e);i&&i.BasePlayer.setRoomMaster(!0),this.handlerPlayersLeftRoom(t)},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.TLMNHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(p.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(p.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onPlayClick:function(){this.GameCommon.Audio.playClick();var t=this.getListCardsSelected(),e=[];for(var i in t)e.push(t[i].trueValue);var o={};o.data=e,this.sendRequest.send(n.PLAY,o)},onSortClick:function(){this.GameCommon.Audio.playClick(),this.TLMNHandlerEffect.sort()},onIgnoreTurnClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.IGNORE)},onIgnoreSelectClick:function(){this.GameCommon.Audio.playClick();var t=this.myCardsNode.getChildren();for(var e in t)t[e].tlmnCardController.isSelected&&(t[e].tlmnCardController.selectCard(),this.TLMNUI.hideIgnoreSelectButton())},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},isRoomSolo:function(){return this.getLastJoinedRoom().maxUsers===s.NUMBER_SOLO_PLAYERS},getMyCardsByPlayersCards:function(t){for(var e=0,i=t.length;e<i;e++)if(t[e].user_id===this.getSFSMySelf().variables.user_id.value)return t[e].cards},getListCardsSelected:function(){var t=this.myCardsNode.getChildren(),e=[];for(var i in t)t[i].tlmnCardController.isSelected&&e.push(t[i]);return e},getCardsNodeByCards:function(t){var e=this.myCardsNode.getChildren(),i=[];for(var o in e)for(var n in t)if(e[o].trueValue===t[n]){i.push(e[o]);break}return i},checkIsMyTurn:function(){return this.idPlaying===this.getSFSMySelf().variables.user_id.value},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){clearTimeout(this.timeoutResult),this.TLMNHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.idPlaying=-1,this.TLMNUI.reset(),this.clearAllTimeout(),this.myCardsNode.removeAllChildren(!0),this.tableCardsNode.removeAllChildren(!0),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].TLMNPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./TLMNConfig":"TLMNConfig","./TLMNConstant":"TLMNConstant","./TLMNHandlerEffect":"TLMNHandlerEffect","./TLMNHandlerRequest":"TLMNHandlerRequest","./TLMNState":"TLMNState","./TLMNUI":"TLMNUI","./TLMNWinType":"TLMNWinType"}],TaiXiuChainItem:[function(t,e,i){"use strict";cc._RF.push(e,"f7f7c1FkNFEi5RohANaTxTQ","TaiXiuChainItem");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,noLabel:cc.Label,nameLabel:cc.Label,chainLabel:cc.Label,totalBetLabel:cc.Label,startMatchGameIdLabel:cc.Label,endMatchGameIdLabel:cc.Label,prizeLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t,e){if(t&&this.checkNickName(t.nick_name)){this.noLabel.string=t.top||e+1,this.nameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.chainLabel.string=t.chain,this.totalBetLabel.string=o.numberWithCommas(t.total_bet),this.startMatchGameIdLabel.string=t.start_match_game_id||t.start_math_game_id,this.endMatchGameIdLabel.string=t.end_match_game_id||t.end_math_game_id;var i=t.note;this.prizeLabel.string=i||o.numberWithCommas(t.prize);var s=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=s}else this.node.active=!1},checkNickName:function(t){return"__zeus__"!==t&&"baonhi23"!==t&&"tinhduonphuong"!==t&&"king88"!==t&&"daophong21"!==t}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],TaiXiuChain:[function(t,e,i){"use strict";cc._RF.push(e,"52ec0qkKWNKYoNtzdwCloS/","TaiXiuChain");t("../../../helper/Constant");var o=t("../../../helper/Message"),n=t("../../../util/FormatUtil"),s=t("../tai-xiu/TaiXiuConstant"),a=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{contentChanLeNode:cc.Node,contentTaiXiuNode:cc.Node,taiXiuButtonNode:cc.Node,chanLeButtonNode:cc.Node,taiXiuChainItemPrefab:cc.Prefab,taiXiuContentNode:cc.Node,taiXiuRuleNode:cc.Node,taiXiuCurrentTopDayNode:cc.Node,taiXiuListChainNode:cc.Node,taiXiuListCurrentNode:cc.Node,chanLeContentNode:cc.Node,chanLeRuleNode:cc.Node,chanLeCurrentTopDayNode:cc.Node,chanLeListChainNode:cc.Node,chanLeListCurrentNode:cc.Node,taiXiuNextNode:cc.Node,taiXiuPreviousNode:cc.Node,taiXiuDateLabel:cc.Label,chanLeNextNode:cc.Node,chanLePreviousNode:cc.Node,chanLeDateLabel:cc.Label,taiXiuchainWinButtonOnNode:cc.Node,taiXiuchainWinButtonOffNode:cc.Node,taiXiuchainLoseButtonOnNode:cc.Node,taiXiuchainLoseButtonOffNode:cc.Node,chanLechainWinButtonOnNode:cc.Node,chanLetaiXiuchainWinButtonOffNode:cc.Node,chanLetaiXiuchainLoseButtonOnNode:cc.Node,chanLetaiXiuchainLoseButtonOffNode:cc.Node,taiXiuchainWinButtonOnNode2:cc.Node,taiXiuchainWinButtonOffNode2:cc.Node,taiXiuchainLoseButtonOnNode2:cc.Node,taiXiuchainLoseButtonOffNode2:cc.Node,chanLechainWinButtonOnNode2:cc.Node,chanLetaiXiuchainWinButtonOffNode2:cc.Node,chanLetaiXiuchainLoseButtonOnNode2:cc.Node,chanLetaiXiuchainLoseButtonOffNode2:cc.Node,currentTopDayOnNode:cc.Node,currentTopDayOffNode:cc.Node,topDayButtonOnNode:cc.Node,topDayButtonOffNode:cc.Node,topMonthButtonOnNode:cc.Node,topMonthButtonOffNode:cc.Node,ruleButtonOnNode:cc.Node,ruleButtonOffNode:cc.Node,loadingNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.reset(),this.loadData(),this.getCurrentTopChain(),this.controller.MiniGame.TaiXiu.isChanLe()?this.onChanLeChainClick():this.onTaiXiuChainClick()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.removeXhr()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},getCurrentTopChain:function(){this.controller.sendRequest.sendNoPrefixToZone(s.CURRENT_TOP_CHAIN)},initTopDay:function(t){this.node.active&&(this.loadingNode.active=!1,this.currentDataTopDay=t,this.onCurrentTopDayClick())},initListTopDay:function(){if(this.taiXiuListCurrentNode.removeAllChildren(!0),this.chanLeListCurrentNode.removeAllChildren(!0),this.currentDataTopDay){for(var t=this.currentDataTopDay.tai_xiu_top_chains,e=this.currentDataTopDay.chan_le_top_chains,i=t.chain_lose_day,o=t.chain_win_day,n=e.chain_lose_day,s=e.chain_win_day,a=this.taiXiuchainWinButtonOnNode.active?o:i,r=this.chanLechainWinButtonOnNode.active?s:n,c=0;c<a.length;c++){var h=cc.instantiate(this.taiXiuChainItemPrefab);h.getComponent("TaiXiuChainItem").init(a[c],c),h.parent=this.taiXiuListCurrentNode}for(var l=0;l<r.length;l++){var u=cc.instantiate(this.taiXiuChainItemPrefab);u.getComponent("TaiXiuChainItem").init(r[l],l),u.parent=this.chanLeListCurrentNode}}},loadData:function(){var t=this;if(this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.loadingNode.active=!0,this.xhr=this.controller.api.getChainTaiXiu(e,function(e){t.loadingNode.active=!1,t.data=t.modifyMonthDay(e.data),t.initData()},function(e){t.loadingNode.active=!1,t.controller.showDialogMessage(o.TAIXIU_CHAIN,e.msg)})}},modifyMonthDay:function(t){var e,i,o,n,s={chan_le_chain:{},tai_xiu_chain:{}};return e=(t=t.day)[0],i=t[2],o=t[1],n=t[3],s.chan_le_chain.day=o,s.chan_le_chain.month=n,s.tai_xiu_chain.day=e,s.tai_xiu_chain.month=i,s},initData:function(){if(this.data&&this.data.tai_xiu_chain){var t=this.data.tai_xiu_chain.day,e=this.data.tai_xiu_chain.month,i={};i=this.isTopDay()?(t=a.removeItemObjectInList(t,e))[0]:e,this.initListDataTaiXiu(i),i||this.hideDateNodeTaiXiu()}if(this.data&&this.data.chan_le_chain){var o=this.data.chan_le_chain.day,n=this.data.chan_le_chain.month,s={};s=this.isTopDay()?(o=a.removeItemObjectInList(o,n))[0]:n,this.initListDataChanLe(s),s||this.hideDateNodeChanLe()}},initListDataTaiXiu:function(t){if(this.taiXiuListChainNode.removeAllChildren(!0),this.isTopDay()?this.showDateNodeTaiXiu():this.hideDateNodeTaiXiu(),t){for(var e=[],i=0;i<t.length;i++)this.isTaiXiuChainWin()?1==t[i].is_win&&e.push(t[i]):0==t[i].is_win&&e.push(t[i]);for(var o=e.length-1;o>=0;o--){var s=cc.instantiate(this.taiXiuChainItemPrefab);s.getComponent("TaiXiuChainItem").init(e[o],o),s.parent=this.taiXiuListChainNode,0===o&&(this.timeTaiXiu=e[o].created_at,this.taiXiuDateLabel.string=n.getStringOnlyDateByTimeStamp(this.timeTaiXiu/1e3-86400),this.isTopDay()&&this.initNextPreviousButtonTaiXiu())}}},initListDataChanLe:function(t){if(this.chanLeListChainNode.removeAllChildren(!0),this.isTopDay()?this.showDateNodeChanLe():this.hideDateNodeChanLe(),t){for(var e=[],i=0;i<t.length;i++)this.isChanLeChainWin()?1==t[i].is_win&&e.push(t[i]):0==t[i].is_win&&e.push(t[i]);for(var o=e.length-1;o>=0;o--){var s=cc.instantiate(this.taiXiuChainItemPrefab);s.getComponent("TaiXiuChainItem").init(e[o],o),s.parent=this.chanLeListChainNode,0===o&&(this.timeChanLe=e[o].created_at,this.chanLeDateLabel.string=n.getStringOnlyDateByTimeStamp(this.timeChanLe/1e3-86400),this.isTopDay()&&this.initNextPreviousButtonChanLe())}}},onTaiXiuNextClick:function(){if(this.data&&this.data.tai_xiu_chain&&this.isTopDay()){var t=this.data.tai_xiu_chain.day;if(t.length>0)for(var e=t.length-1;e>=0;e--)if(t[e][0].created_at===this.timeTaiXiu){this.initListDataTaiXiu(t[e+1]);break}}},onTaiXiuPreviousClick:function(){if(this.data&&this.data&&this.data.tai_xiu_chain&&this.isTopDay()){var t=this.data.tai_xiu_chain.day;if(t.length>0)for(var e=t.length-1;e>=0;e--)if(t[e][0].created_at===this.timeTaiXiu){this.initListDataTaiXiu(t[e-1]);break}}},onChanLeNextClick:function(){if(this.data&&this.data.chan_le_chain&&this.isTopDay()){var t=this.data.chan_le_chain.day;if(t.length>0)for(var e=t.length-1;e>=0;e--)if(t[e][0].created_at===this.timeChanLe){this.initListDataChanLe(t[e+1]);break}}},onChanLePreviousClick:function(){if(this.data&&this.data&&this.data.chan_le_chain&&this.isTopDay()){var t=this.data.chan_le_chain.day;if(t.length>0)for(var e=t.length-1;e>=0;e--)if(t[e][0].created_at===this.timeChanLe){this.initListDataChanLe(t[e-1]);break}}},showDateNodeTaiXiu:function(){this.taiXiuNextNode.active=!0,this.taiXiuPreviousNode.active=!0,this.taiXiuDateLabel.node.active=!0},hideDateNodeTaiXiu:function(){this.taiXiuNextNode.active=!1,this.taiXiuPreviousNode.active=!1,this.taiXiuDateLabel.node.active=!1},showDateNodeChanLe:function(){this.chanLeNextNode.active=!0,this.chanLePreviousNode.active=!0,this.chanLeDateLabel.node.active=!0},hideDateNodeChanLe:function(){this.chanLeNextNode.active=!1,this.chanLePreviousNode.active=!1,this.chanLeDateLabel.node.active=!1},isTopDay:function(){return this.topDayButtonOnNode.active},isTaiXiuChainWin:function(){return this.taiXiuchainWinButtonOnNode2.active},isChanLeChainWin:function(){return this.chanLechainWinButtonOnNode2.active},initNextPreviousButtonTaiXiu:function(){if(this.taiXiuNextNode.active=!0,this.taiXiuPreviousNode.active=!0,this.data&&this.data.tai_xiu_chain&&this.isTopDay()){var t=this.data.tai_xiu_chain.day;t.length>0&&(this.timeTaiXiu===t[0][0].created_at&&(this.taiXiuPreviousNode.active=!1),this.timeTaiXiu===t[t.length-1][0].created_at&&(this.taiXiuNextNode.active=!1))}},initNextPreviousButtonChanLe:function(){if(this.chanLeNextNode.active=!0,this.chanLePreviousNode.active=!0,this.data&&this.data.chan_le_chain&&this.isTopDay()){var t=this.data.chan_le_chain.day;t.length>0&&(this.timeChanLe===t[0][0].created_at&&(this.chanLePreviousNode.active=!1),this.timeChanLe===t[t.length-1][0].created_at&&(this.chanLeNextNode.active=!1))}},onChainWinCurrentDayClick:function(){this.taiXiuchainWinButtonOnNode.active=!0,this.taiXiuchainWinButtonOffNode.active=!1,this.taiXiuchainLoseButtonOnNode.active=!1,this.taiXiuchainLoseButtonOffNode.active=!0,this.chanLechainWinButtonOnNode.active=!0,this.chanLetaiXiuchainWinButtonOffNode.active=!1,this.chanLetaiXiuchainLoseButtonOnNode.active=!1,this.chanLetaiXiuchainLoseButtonOffNode.active=!0,this.initListTopDay()},onChainLoseCurrentDayClick:function(){this.taiXiuchainWinButtonOnNode.active=!1,this.taiXiuchainWinButtonOffNode.active=!0,this.taiXiuchainLoseButtonOnNode.active=!0,this.taiXiuchainLoseButtonOffNode.active=!1,this.chanLechainWinButtonOnNode.active=!1,this.chanLetaiXiuchainWinButtonOffNode.active=!0,this.chanLetaiXiuchainLoseButtonOnNode.active=!0,this.chanLetaiXiuchainLoseButtonOffNode.active=!1,this.initListTopDay()},onChainWinClick2:function(){this.data&&(this.taiXiuchainWinButtonOnNode2.active=!0,this.taiXiuchainWinButtonOffNode2.active=!1,this.taiXiuchainLoseButtonOnNode2.active=!1,this.taiXiuchainLoseButtonOffNode2.active=!0,this.chanLechainWinButtonOnNode2.active=!0,this.chanLetaiXiuchainWinButtonOffNode2.active=!1,this.chanLetaiXiuchainLoseButtonOnNode2.active=!1,this.chanLetaiXiuchainLoseButtonOffNode2.active=!0,this.initData())},onChainLoseClick2:function(){this.data&&(this.taiXiuchainWinButtonOnNode2.active=!1,this.taiXiuchainWinButtonOffNode2.active=!0,this.taiXiuchainLoseButtonOnNode2.active=!0,this.taiXiuchainLoseButtonOffNode2.active=!1,this.chanLechainWinButtonOnNode2.active=!1,this.chanLetaiXiuchainWinButtonOffNode2.active=!0,this.chanLetaiXiuchainLoseButtonOnNode2.active=!0,this.chanLetaiXiuchainLoseButtonOffNode2.active=!1,this.initData())},onTaiXiuChainClick:function(){this.taiXiuButtonNode.active=!1,this.chanLeButtonNode.active=!0,this.contentChanLeNode.active=!1,this.contentTaiXiuNode.active=!0},onChanLeChainClick:function(){this.taiXiuButtonNode.active=!0,this.chanLeButtonNode.active=!1,this.contentChanLeNode.active=!0,this.contentTaiXiuNode.active=!1},onCurrentTopDayClick:function(){this.showCurrentTopDayNode(),this.initListTopDay()},onTopDayClick:function(){this.data&&(this.showTopDayNode(),this.initData())},onTopMonthClick:function(){this.data&&(this.showTopMonthNode(),this.initData())},onRuleClick:function(){this.showRuleNode()},showCurrentTopDayNode:function(){this.hideAllButton(),this.hideAllContent(),this.taiXiuCurrentTopDayNode.active=!0,this.chanLeCurrentTopDayNode.active=!0,this.currentTopDayOnNode.active=!0,this.currentTopDayOffNode.active=!1},showTopDayNode:function(){this.hideAllButton(),this.hideAllContent(),this.showContentTopMonthDayNode(),this.topDayButtonOnNode.active=!0,this.topDayButtonOffNode.active=!1},showTopMonthNode:function(){this.hideAllButton(),this.hideAllContent(),this.showContentTopMonthDayNode(),this.topMonthButtonOnNode.active=!0,this.topMonthButtonOffNode.active=!1},showContentTopMonthDayNode:function(){this.taiXiuContentNode.active=!0,this.chanLeContentNode.active=!0},showRuleNode:function(){this.hideAllButton(),this.hideAllContent(),this.taiXiuRuleNode.active=!0,this.chanLeRuleNode.active=!0,this.ruleButtonOnNode.active=!0,this.ruleButtonOffNode.active=!1},hideAllContent:function(){this.taiXiuContentNode.active=!1,this.taiXiuRuleNode.active=!1,this.taiXiuCurrentTopDayNode.active=!1,this.chanLeContentNode.active=!1,this.chanLeRuleNode.active=!1,this.chanLeCurrentTopDayNode.active=!1},hideAllButton:function(){this.currentTopDayOnNode.active=!1,this.topDayButtonOnNode.active=!1,this.topMonthButtonOnNode.active=!1,this.ruleButtonOnNode.active=!1,this.currentTopDayOffNode.active=!0,this.topDayButtonOffNode.active=!0,this.topMonthButtonOffNode.active=!0,this.ruleButtonOffNode.active=!0},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)},reset:function(){this.data=null}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util","../tai-xiu/TaiXiuConstant":"TaiXiuConstant"}],TaiXiuChat:[function(t,e,i){"use strict";cc._RF.push(e,"24287Geh4tJ+Ybp0b62zVpQ","TaiXiuChat");var o=t("../../../helper/Constant"),n=t("../../../util/BrowserUtil"),s=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{chatItemPrefab:cc.Prefab,chatScrollView:cc.ScrollView,chatEditBox:cc.EditBox,chatButtonNode:cc.Node},init:function(t){this.TaiXiu=t},onLoad:function(){this.number=0,this.editboxs=[this.chatEditBox]},update:function(t){0===this.number&&this.chatScrollView.scrollToBottom(0),this.number++},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress(),this.chatButtonNode.active=!1},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress(),this.chatButtonNode.active=!0},addEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){n.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){n.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}},keyHandle:function(t){return t.keyCode===o.ENTER_KEY?(n.focusGame(),this.onSendClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===o.ESC_KEY?(this.unFocusChatEditBox(),!1):void 0},initChat:function(t){this.chatScrollView.content.removeAllChildren(!0),this.instanceChat(t),this.scrollToBottom()},addChat:function(t){this.instanceChat(t),this.checkBottom()&&this.chatScrollView.scrollToBottom(.25)},instanceChat:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.instanceChatItem(t[e]);else this.instanceChatItem(t)},instanceChatItem:function(t){var e=cc.instantiate(this.chatItemPrefab);e.getComponent("MiniGameChatItem").init(t),e.parent=this.chatScrollView.content},scrollToBottom:function(){this.number=0},onCloseClick:function(){this.TaiXiu.getTempData()[s.IS_SHOW_CHAT]=!this.node.active,this.node.active=!this.node.active},onSendClick:function(){var t=this.chatEditBox.string;this.sendChat(t)},sendChat:function(t){if(""!==t.trim()){var e={message:t};this.TaiXiu.sendRequest.sendNoPrefixToZone(s.CHAT,e),this.chatEditBox.string=""}},unFocusChatEditBox:function(){n.unFocusEditBox(this.chatEditBox)},checkBottom:function(){var t=this.chatScrollView.getScrollOffset().y,e=this.chatScrollView.node.height,i=this.chatScrollView.content.height;return Math.abs(t+e-i)<=150}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../util/BrowserUtil":"BrowserUtil","./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuConstant:[function(t,e,i){"use strict";cc._RF.push(e,"de4d8Tzx0dDebFezsVpACh1","TaiXiuConstant");e.exports={TAI:1,XIU:0,CHAN:2,LE:3,MIN_TAI:11,NUMBER_HISTORY:18,NUMBER_DETAIL_ITEM:8,TIME_GET_FINISH:4,TOTAL_STATISTIC:17,MAX_NUM_STATISTIC:7,MAX_SUM_STATISTIC:18,DISTANCE_H_STATISTIC:30.8,DISTANCE_H_SUM:6.5,DISTANCE_W_STATISTIC:30.8,START_H_SUM:147.5,SIZE_SUM_CRILE:7,SIZE_STATISTIC_CRILE:4,DISTANCE_HISTORY_ITEM:21.5,MAX_COL:18,MAX_TAXIU:120,MAX_TAXIU_2:89,MAX_CHAT:120,DISTANCE_ECLIP_ITEM:17,DISTANCE_W_STATISTIC_2:21.5,DISTANCE_H_STATISTIC_2:19.5,REQUEST_START:"START",REQUEST_BALANCE_DOOR:"BALANCE_DOOR",REQUEST_FINISH:"FINISH",REQUEST_UPDATE:"UPDATE",REQUEST_INFO:"INFO",REQUEST_MESSAGE:"MESSAGE",REQUEST_CHANGE_STATE:"CHANGE_STATE",REQUEST_CHAT:"CHAT",REQUEST_HISTORY_DETAIL:"HISTORY_DETAIL",HISTORY_USER_DETAIL_2:"HISTORY_USER_DETAIL",CURRENT_TOP_CHAIN_2:"CURRENT_TOP_CHAIN",GET_TOP_2:"GET_TOP",ADD_EVENT:"tai_xiu.ADD_EVENT",REMOVE_EVENT:"tai_xiu.REMOVE_EVENT",GET_STATE:"tai_xiu.GET_STATE",BET:"tai_xiu.BET",CHAT:"tai_xiu.CHAT",HISTORY_DETAIL:"tai_xiu.HISTORY_DETAIL",IS_SHOW:"tai_xiu_is_show",CHAN_LE_IS_SHOW:"chan_le_is_show",IS_SHOW_CHAT:"tai_xiu_is_show_chat",POSITION:"tai_xiu_position",IS_NAN:"tai_xiu_nan",CURRENT_TOP_CHAIN:"tai_xiu.CURRENT_TOP_CHAIN",GET_TOP:"tai_xiu.GET_TOP",GET_FINISH:"tai_xiu.FINISH",HISTORY_USER_DETAIL:"tai_xiu.HISTORY_USER_DETAIL"},cc._RF.pop()},{}],TaiXiuDetailItem:[function(t,e,i){"use strict";cc._RF.push(e,"2100fo8/etNDYeE9bNpW7jg","TaiXiuDetailItem");var o=t("../../../util/FormatUtil"),n=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,timeLabel:cc.Label,nickNameLabel:cc.Label,balanceBetLabel:cc.Label,balanceReturnLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){if(t){this.data=t,this.timeLabel.string=o.getStringHourByTimeStamp(t.time),this.nickNameLabel.string=n.getServerID(t.server_id)+t.nick_name,this.balanceBetLabel.string=o.numberWithCommas(t.balance_bet),this.balanceReturnLabel.string=o.numberWithCommas(t.balance_return);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}else this.node.active=!1},onLoad:function(){}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../../../util/Util":"Util"}],TaiXiuDetail:[function(t,e,i){"use strict";cc._RF.push(e,"d1373M+vONBq6ueyKM/VUT4","TaiXiuDetail");var o=t("../tai-xiu/TaiXiuConstant"),n=t("../../../helper/Message"),s=t("../../../util/FormatUtil"),a=t("../../item/PaginationItem");cc.Class({extends:cc.Component,properties:{contentNode:cc.Node,loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,taiXiuNode:cc.Node,chanLeNode:cc.Node,chanLeButtonNode:cc.Node,taiXiuButtonNode:cc.Node,dice1Sprite:cc.Sprite,dice2Sprite:cc.Sprite,dice3Sprite:cc.Sprite,dicesSpriteFrame:[cc.SpriteFrame],nextNode:cc.Node,previousNode:cc.Node,matchLabel:cc.Label,taiAnimation:cc.Animation,xiuAnimation:cc.Animation,chanAnimation:cc.Animation,leAnimation:cc.Animation,taiAnimationOff:cc.Animation,xiuAnimationOff:cc.Animation,chanAnimationOff:cc.Animation,leAnimationOff:cc.Animation,taiXiuDetailItemPrefab:cc.Prefab,listTaiNode:cc.Node,listXiuNode:cc.Node,listChanNode:cc.Node,listLeNode:cc.Node,taiTotalBalanceBetLabel:cc.Label,taiTotalBalanceReturnLabel:cc.Label,xiuTotalBalanceBetLabel:cc.Label,xiuTotalBalanceReturnLabel:cc.Label,chanTotalBalanceBetLabel:cc.Label,chanTotalBalanceReturnLabel:cc.Label,leTotalBalanceBetLabel:cc.Label,leTotalBalanceReturnLabel:cc.Label,pageNode:cc.Node,pagePreviewPreview:a,pagePreView:a,pageNext:a,pageNextNext:a,listPageNumberItem:[a]},init:function(t){this.controller=t},onLoad:function(){!1!==this.isMoneyType&&(this.isMoneyType=!0),this.pool=new cc.NodePool;for(var t=0;t<20;t++)this.pool.put(cc.instantiate(this.taiXiuDetailItemPrefab));this.dialogForm=this.node.getComponent("DialogForm"),this.listPagination=[],this.sortBetListTai,this.sortBetListXiu,this.sortTimeListTai,this.sortTimeListXiu},onEnable:function(){this.controller.MiniGame.TaiXiu.isChanLe()?this.onShowChanLeClick():this.onShowTaiXiuClick(),cc.sys.isBrowser&&this.addEventKeyPress(),this.dataDices&&this.initDicesEffect(this.dataDices)},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},handleHistoryDetail:function(t){this.data=t,this.saveData(this.data),this.initInfo()},onNextClick:function(){for(var t=this.data.list_histories_match_game_id.length-1;t>=0;t--)if(this.data.list_histories_match_game_id[t]===this.matchGameId){this.matchGameId=this.data.list_histories_match_game_id[t+1],this.showLoading();var e={match_game_id:this.matchGameId},i=this.getSaveData(this.matchGameId);i?this.handleHistoryDetail(i):this.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,e);break}},onPreviousClick:function(){for(var t=this.data.list_histories_match_game_id.length-1;t>=0;t--)if(this.data.list_histories_match_game_id[t]===this.matchGameId){this.matchGameId=this.data.list_histories_match_game_id[t-1],this.showLoading();var e={match_game_id:this.matchGameId},i=this.getSaveData(this.matchGameId);i?this.handleHistoryDetail(i):this.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,e);break}},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyButtonNode.active=t,this.goldButtonNode.active=!t,this.initInfo()},initInfo:function(){if(this.data){var t=this.data.history_detail;if(t){this.showContent();var e=t.match_game_id,i=t.time,o=t.dices,a=t.list_bets;this.matchLabel.string=String.format(n.TAIXIU_HISTORIES_DETAIL,e,s.getStringDateByTimeStamp(i)),this.initNextPreviousButton(e),this.initDicesSprite(o),this.initDicesEffect(o),this.initListBets(a)}}},initNextPreviousButton:function(t){this.nextNode.active=!0,this.previousNode.active=!0,this.data&&this.data.list_histories_match_game_id&&(this.data.list_histories_match_game_id[0]===t&&(this.previousNode.active=!1),this.data.list_histories_match_game_id[this.data.list_histories_match_game_id.length-1]===t&&(this.nextNode.active=!1))},initListBets:function(t){t=this.sortListBetByTimes(t),this.listTaiNode.parent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll(),this.listTaiNode.parent.parent.parent.getComponent(cc.ScrollView).scrollToTop(),this.listChanNode.parent.parent.parent.getComponent(cc.ScrollView).stopAutoScroll(),this.listChanNode.parent.parent.parent.getComponent(cc.ScrollView).scrollToTop();var e=0,i=0,n=0,a=0,r=0,c=0,h=0,l=0;for(var u in this.listBetTai=[],this.listBetXiu=[],this.listBetChan=[],this.listBetLe=[],this.sortBetListTai=null,this.sortBetListXiu=null,this.sortTimeListTai=null,this.sortTimeListXiu=null,this.sortBetListChan=null,this.sortBetListLe=null,this.sortTimeListChan=null,this.sortTimeListLe=null,t)(t[u].is_money&&this.isMoneyType||!t[u].is_money&&!this.isMoneyType)&&(t[u].type===o.TAI?this.listBetTai.push(t[u]):t[u].type===o.XIU?this.listBetXiu.push(t[u]):t[u].type===o.CHAN?this.listBetChan.push(t[u]):t[u].type===o.LE&&this.listBetLe.push(t[u]),t[u].type===o.TAI?(e+=t[u].balance_bet,i+=t[u].balance_return):t[u].type===o.XIU?(n+=t[u].balance_bet,a+=t[u].balance_return):t[u].type===o.CHAN?(r+=t[u].balance_bet,c+=t[u].balance_return):t[u].type===o.LE&&(h+=t[u].balance_bet,l+=t[u].balance_return));this.sortTimeListTai=this.listBetTai,this.sortTimeListXiu=this.listBetXiu,this.sortTimeListChan=this.listBetChan,this.sortTimeListLe=this.listBetLe,this.taiTotalBalanceBetLabel.string=s.numberWithCommas(e),this.taiTotalBalanceReturnLabel.string=s.numberWithCommas(i),this.xiuTotalBalanceBetLabel.string=s.numberWithCommas(n),this.xiuTotalBalanceReturnLabel.string=s.numberWithCommas(a),this.chanTotalBalanceBetLabel.string=s.numberWithCommas(r),this.chanTotalBalanceReturnLabel.string=s.numberWithCommas(c),this.leTotalBalanceBetLabel.string=s.numberWithCommas(h),this.leTotalBalanceReturnLabel.string=s.numberWithCommas(l),this.setPage(0)},onShowChanLeClick:function(){this.chanLeNode.active=!0,this.taiXiuNode.active=!1,this.chanLeButtonNode.active=!0,this.taiXiuButtonNode.active=!1},onShowTaiXiuClick:function(){this.chanLeNode.active=!1,this.taiXiuNode.active=!0,this.chanLeButtonNode.active=!1,this.taiXiuButtonNode.active=!0},onSortBetTaiClick:function(){this.sortBetListTai?(this.sortBetListTai.reverse(),this.listBetTai=this.sortBetListTai,this.sortBetListChan.reverse(),this.listBetChan=this.sortBetListChan,this.setPage(this.page)):(this.sortBetListTai=this.sortListBetByBet(this.listBetTai),this.listBetTai=this.sortBetListTai,this.sortBetListChan=this.sortListBetByBet(this.listBetChan),this.listBetChan=this.sortBetListChan,this.setPage(this.page))},onSortBetXiuClick:function(){this.sortBetListXiu?(this.sortBetListXiu.reverse(),this.listBetXiu=this.sortBetListXiu,this.sortBetListLe.reverse(),this.listBetLe=this.sortBetListLe,this.setPage(this.page)):(this.sortBetListXiu=this.sortListBetByBet(this.listBetXiu),this.listBetXiu=this.sortBetListXiu,this.sortBetListLe=this.sortListBetByBet(this.listBetLe),this.listBetLe=this.sortBetListLe,this.setPage(this.page))},onSortTimeTaiClick:function(){this.sortTimeListTai.reverse(),this.listBetTai=this.sortTimeListTai,this.sortTimeListChan.reverse(),this.listBetChan=this.sortTimeListChan,this.setPage(this.page)},onSortTimeXiuClick:function(){this.sortTimeListXiu.reverse(),this.listBetXiu=this.sortTimeListXiu,this.sortTimeListLe.reverse(),this.listBetLe=this.sortTimeListLe,this.setPage(this.page)},sortListBetByTimes:function(t){var e=t.slice();return e.sort(function(t,e){return t.time-e.time}),e},sortListBetByBet:function(t){var e=t.slice();return e.sort(function(t,e){return e.balance_bet-t.balance_bet}),e},showDetail:function(t,e){this.setTypeRoom(e),this.matchGameId=t,this.showDialog(),this.showLoading();var i={match_game_id:t},n=this.getSaveData(t);n?this.handleHistoryDetail(n):this.controller.sendRequest.sendNoPrefixToZone(o.HISTORY_DETAIL,i)},showContent:function(){this.loadingNode.active=!1,this.contentNode.active=!0},showLoading:function(){this.loadingNode.active=!0,this.contentNode.active=!1},initDicesSprite:function(t){this.dice1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.dice2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.dice3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2])},getSpriteFrameByDice:function(t){return t>0&&t<7?this.dicesSpriteFrame[t-1]:this.dicesSpriteFrame[0]},initDicesEffect:function(t){this.dataDices=t;for(var e=0,i=0;i<t.length;i++)e+=t[i];e>=o.MIN_TAI?this.showTaiAnimationNode():this.showXiuAnimationNode(),e%2==0?this.showChanAnimationNode():this.showLeAnimationNode()},putAllToPool:function(){if(this.pool){var t=this.listTaiNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o]);var n=this.listXiuNode.getChildren(),s=[];for(var a in n)s.push(n[a]);for(var r in s)this.pool.put(s[r]);var c=this.listChanNode.getChildren(),h=[];for(var l in c)h.push(c[l]);for(var u in h)this.pool.put(h[u]);var d=this.listLeNode.getChildren(),m=[];for(var p in d)m.push(d[p]);for(var f in m)this.pool.put(m[f])}},setPage:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.page=e,this.listPagination=[],this.listBetTai&&this.listBetXiu?function(){t.showListContent(e);var i=parseInt(t.listBetTai.length/o.NUMBER_DETAIL_ITEM),n=parseInt(t.listBetXiu.length/o.NUMBER_DETAIL_ITEM),s=t.listBetTai.length>t.listBetXiu.length?t.listBetTai.length:t.listBetXiu.length,a=i>n?i:n;if(a=a*o.NUMBER_DETAIL_ITEM===s?a-1:a,t.showNumberPagination(a),t.pagePreviewPreview.init("<<",0),t.pageNextNext.init(">>",a),t.listPagination.push(t.pagePreviewPreview),t.listPagination.push(t.pageNextNext),e<2)for(var r=0,c=t.listPageNumberItem.length;r<c;r++)t.listPageNumberItem[r].init(r+1,r),t.listPageNumberItem[r].enable(),r===e&&t.listPageNumberItem[r].disable(),t.listPagination.push(t.listPageNumberItem[r]);else if(e+2>=a){var h=a;if(a>4)for(var l=t.listPageNumberItem.length-1;l>=0;l--)t.listPageNumberItem[l].init(h+1,h),t.listPageNumberItem[l].enable(),h===e&&t.listPageNumberItem[l].disable(),t.listPagination.push(t.listPageNumberItem[l]),h--;else{for(var u=0,d=t.listPageNumberItem.length;u<d;u++)t.listPageNumberItem[u].enable();t.listPageNumberItem[e].disable()}}else for(var m=-2,p=0,f=t.listPageNumberItem.length;p<f;p++)t.listPageNumberItem[p].init(e+m+1,e+m),t.listPageNumberItem[p].enable(),0===m&&t.listPageNumberItem[p].disable(),t.listPagination.push(t.listPageNumberItem[p]),m++;e<=0?(t.pagePreView.init("<",0),t.pageNext.init(">",1)):e+2>=a?(t.pagePreView.init("<",e-1),t.pageNext.init(">",a)):(t.pagePreView.init("<",e-1),t.pageNext.init(">",e+1)),t.listPagination.push(t.pagePreView),t.listPagination.push(t.pageNext);var g=t;if(!t.isEvent){for(var _ in t.listPagination){var S=t.listPagination[_].getComponent("PaginationItem").pageOffButtonNode;S.on(cc.Node.EventType.TOUCH_END,function(){var t=this.parent.getComponent("PaginationItem").getPage();g.setPage(t)},S)}t.isEvent=!0}}():this.pageNode.active=!1},showNumberPagination:function(t){this.pageNode.active=!0;for(var e=0;e<this.listPageNumberItem.length;e++)this.listPageNumberItem[e].node.active=!1;if(t<4)for(var i=0;i<=t;i++)this.listPageNumberItem[i].node.active=!0;else for(var o=0;o<this.listPageNumberItem.length;o++)this.listPageNumberItem[o].node.active=!0},showListContent:function(t){if(this.putAllToPool(),t*o.NUMBER_DETAIL_ITEM<this.listBetTai.length)for(var e=t*o.NUMBER_DETAIL_ITEM,i=e,n=e+o.NUMBER_DETAIL_ITEM;i<n;i++)if(i<this.listBetTai.length){var s=void 0;this.pool&&(s=this.pool.get()),s||(s=cc.instantiate(this.taiXiuDetailItemPrefab)),s.getComponent("TaiXiuDetailItem").init(this.listBetTai[i]),s.parent=this.listTaiNode}if(t*o.NUMBER_DETAIL_ITEM<this.listBetXiu.length)for(var a=t*o.NUMBER_DETAIL_ITEM,r=a,c=a+o.NUMBER_DETAIL_ITEM;r<c;r++)if(r<this.listBetXiu.length){var h=void 0;this.pool&&(h=this.pool.get()),h||(h=cc.instantiate(this.taiXiuDetailItemPrefab)),h.getComponent("TaiXiuDetailItem").init(this.listBetXiu[r]),h.parent=this.listXiuNode}if(t*o.NUMBER_DETAIL_ITEM<this.listBetChan.length)for(var l=t*o.NUMBER_DETAIL_ITEM,u=l,d=l+o.NUMBER_DETAIL_ITEM;u<d;u++)if(u<this.listBetChan.length){var m=void 0;this.pool&&(m=this.pool.get()),m||(m=cc.instantiate(this.taiXiuDetailItemPrefab)),m.getComponent("TaiXiuDetailItem").init(this.listBetChan[u]),m.parent=this.listChanNode}if(t*o.NUMBER_DETAIL_ITEM<this.listBetLe.length)for(var p=t*o.NUMBER_DETAIL_ITEM,f=p,g=p+o.NUMBER_DETAIL_ITEM;f<g;f++)if(f<this.listBetLe.length){var _=void 0;this.pool&&(_=this.pool.get()),_||(_=cc.instantiate(this.taiXiuDetailItemPrefab)),_.getComponent("TaiXiuDetailItem").init(this.listBetLe[f]),_.parent=this.listLeNode}},showTaiAnimationNode:function(){this.taiAnimation.node.active=!0,this.taiAnimationOff.node.active=!1,this.xiuAnimation.node.active=!1,this.xiuAnimationOff.node.active=!0},showXiuAnimationNode:function(){this.taiAnimation.node.active=!1,this.taiAnimationOff.node.active=!0,this.xiuAnimation.node.active=!0,this.xiuAnimationOff.node.active=!1},showChanAnimationNode:function(){this.chanAnimation.node.active=!0,this.chanAnimationOff.node.active=!1,this.leAnimation.node.active=!1,this.leAnimationOff.node.active=!0},showLeAnimationNode:function(){this.chanAnimation.node.active=!1,this.chanAnimationOff.node.active=!0,this.leAnimation.node.active=!0,this.leAnimationOff.node.active=!1},saveData:function(t){var e=t.history_detail.match_game_id;this.listData||(this.listData=[]);for(var i=0,o=this.listData.length;i<o;i++){if(e===this.listData[i].history_detail.match_game_id)return!0}for(var n=0,s=this.listData.length;n<s;n++)this.listData[n].list_histories_match_game_id=t.list_histories_match_game_id;this.listData.push(t)},getSaveData:function(t){if(this.listData)for(var e=0,i=this.listData.length;e<i;e++){if(t===this.listData[e].history_detail.match_game_id)return this.listData[e]}return null}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/FormatUtil":"FormatUtil","../../item/PaginationItem":"PaginationItem","../tai-xiu/TaiXiuConstant":"TaiXiuConstant"}],TaiXiuDice:[function(t,e,i){"use strict";cc._RF.push(e,"1b3347UjyNMIbdubDOddH80","TaiXiuDice"),cc.Class({extends:cc.Component,properties:{dice1Sprite:cc.Sprite,dice2Sprite:cc.Sprite,dice3Sprite:cc.Sprite,dicesSpriteFrame:[cc.SpriteFrame],diceSprite:cc.Sprite,diceSpriteFrame:cc.SpriteFrame,diceAnimation:cc.Animation,taiAnimationNode:cc.Node,xiuAnimationNode:cc.Node},init:function(t){this.TaiXiu=t},onLoad:function(){},show:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=(arguments[2],t.dice||t.dices),o=t.result;this.reset(),this.node.active=!0,this.diceSprite.node.active=!0,e?(this.showDices(!1),this.node.active&&this.diceAnimation.play(),this.node.runAction(cc.sequence(cc.delayTime(this.diceAnimation.defaultClip.duration),cc.callFunc(function(){this.reset(),this.showDices(!0),this.initDicesSprite(i),this.showEffectTaiXiuResult(o)},this)))):(this.showDices(!0),this.initDicesSprite(i))},showEffectTaiXiuResult:function(t){this.taiAnimationNode.active=!1,this.xiuAnimationNode.active=!1,"tai"===t?this.taiAnimationNode.active=!0:"xiu"===t&&(this.xiuAnimationNode.active=!0)},hide:function(){this.node.stopAllActions(),this.diceAnimation.stop(),this.taiAnimationNode.active=!1,this.xiuAnimationNode.active=!1,this.showDices(!1),this.node.active=!1,this.diceSprite.node.active=!1},initDicesSprite:function(t){this.dice1Sprite.spriteFrame=this.getSpriteFrameByDice(t[0]),this.dice2Sprite.spriteFrame=this.getSpriteFrameByDice(t[1]),this.dice3Sprite.spriteFrame=this.getSpriteFrameByDice(t[2])},getSpriteFrameByDice:function(t){return t>0&&t<7?this.dicesSpriteFrame[t-1]:this.dicesSpriteFrame[0]},showDices:function(t){this.dice1Sprite.node.active=t,this.dice2Sprite.node.active=t,this.dice3Sprite.node.active=t},reset:function(){this.node.stopAllActions(),this.diceAnimation.stop(),this.diceSprite.spriteFrame=this.diceSpriteFrame}}),cc._RF.pop()},{}],TaiXiuHistoriesItem:[function(t,e,i){"use strict";cc._RF.push(e,"5b6f2STKMxBIpW/gsJ0Rxjz","TaiXiuHistoriesItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,doorLabel:cc.Label,resultLabel:cc.Label,betLabel:cc.Label,returnLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),t.is_add_match_game_id?this.idLabel.string="":this.idLabel.string=t.match_game_id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at);var i="";1==t.tai_xiu_type&&(i="T\xc0I"),0==t.tai_xiu_type&&(i="X\u1ec8U"),2==t.tai_xiu_type&&(i="CH\u1eb4N"),3==t.tai_xiu_type&&(i="L\u1eba"),this.doorLabel.string=i,this.betLabel.string=o.numberWithCommas(t.total_bet_amount),this.resultLabel.string=this.getResult(t.result),this.returnLabel.string=o.numberWithCommas(t.total_return_amount),this.getLabel.string=o.numberWithCommas(t.total_prize_amount+t.total_bet_amount);var n=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=n},onLoad:function(){},getResult:function(t){var e=JSON.parse(t),i=0;for(var o in e)i+=e[o];return t+" - "+i}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TaiXiuHistories:[function(t,e,i){"use strict";cc._RF.push(e,"1adf1R+ug5IyqC45J84nMtG","TaiXiuHistories");var o=t("../../../../helper/Message"),n=t("../../tai-xiu/TaiXiuConstant"),s=t("../../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyTaiXiuItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.historyTaiXiuItemPrefab);this.pool.put(e)}},onEnable:function(){this.onMoneyClick(),this.checkTimeUpdate()&&this.reset(),this.isSend||(this.loadData(),this.isSend=!0);this.controller.sendRequest.sendNoPrefixToZone(n.HISTORY_USER_DETAIL,{})},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!1},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!1},loadData:function(){var t=this;this.showLoadingNode();var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryTaiXiu(e,function(e){var i=e.data[0],o=t.listHistory.slice();i=t.checkDupcaliteItem(i,o).concat(i),t.data=t.convertData(i),t.initData(t.data)},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})},convertData:function(t){var e={is_tai_xiu:[],is_chan_le:[]};if(t)for(var i=t,o=0,n=i.length;o<n;o++)0===i[o].tai_xiu_type||1===i[o].tai_xiu_type?e.is_tai_xiu.push(i[o]):e.is_chan_le.push(i[o]);return e},initData:function(t){this.putAllChipToPool(),this.showListNode();var e=this.controller.MiniGame.TaiXiu.isChanLe();if(t){var i=e?t.is_chan_le:t.is_tai_xiu;for(var o in i){this.instanceItem(i[o],o).parent=this.historyScrollView.content}}},instanceItem:function(t,e){var i=void 0;return this.pool&&(i=this.pool.get()),i||(i=cc.instantiate(this.historyTaiXiuItemPrefab)),i.getComponent("TaiXiuHistoriesItem").init(t,e),i},putAllChipToPool:function(){if(this.pool){var t=this.historyScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},handleHistoryUserDetail:function(t){var e=t.chan_le_money,i=t.tai_xiu_money,o=[],n=this.convertDataMatchGameIdAndResultHistory(i,!0),s=this.convertDataMatchGameIdAndResultHistory(e,!1);if(o=n.concat(s),(o=this.checkDuplicateHistory(o)).length>0){this.listHistory=o.concat(this.listHistory);var a=this.convertData(o),r=a.is_tai_xiu,c=a.is_chan_le;this.data.is_tai_xiu?(this.data.is_tai_xiu=r.concat(this.data.is_tai_xiu),this.data.is_chan_le=c.concat(this.data.is_chan_le)):this.data=this.convertData(this.listHistory.slice())}this.data.is_tai_xiu&&this.initData(this.data)},convertDataMatchGameIdAndResultHistory:function(t,e){for(var i=[],o=0,n=t.length;o<n;o++){var s=t[o],a={};a.created_at=s.bets[0].time,a.match_game_id=s.match_game_id,a.result="["+s.dices.toString()+"]",a.total_bet_amount=s.bets[0].balance_bet,a.total_prize_amount=s.bets[0].balance_win,a.total_return_amount=s.bets[0].balance_return,a.tai_xiu_type=s.bets[0].type,a.is_add_match_game_id=!0,i.push(a)}return i},checkDuplicateHistory:function(t){return this.data||(this.data={}),this.listHistory||(this.listHistory=[]),t=this.checkDupcaliteItem(this.listHistory,t),t=s.sortDataTimeByTime(t)},checkDupcaliteItem:function(t,e){for(var i=0,o=t.length;i<o;i++)for(var n=0;n<e.length;n++)t[i].result===e[n].result&&t[i].tai_xiu_type===e[n].tai_xiu_type&&t.total_bet_amount===e.total_bet_amount&&t.total_return_amount===e.total_return_amount&&(e.splice(n,1),n-=1);return e},checkTimeUpdate:function(){if(!this.preTimeUpdate)return this.preTimeUpdate=(new Date).getTime()/1e3,!1;var t=(new Date).getTime()/1e3;return t-this.preTimeUpdate>180&&(this.preTimeUpdate=t,!0)},reset:function(){this.isSend=!1,this.listHistory=null,this.data=null},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message","../../../../util/FormatUtil":"FormatUtil","../../tai-xiu/TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryGame1:[function(t,e,i){"use strict";cc._RF.push(e,"f51b3Jt+s5BE5+mQDl8sZWK","TaiXiuHistoryGame1");var o=t("../../../util/FormatUtil"),n=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{taiLabel:cc.Label,xiuLabel:cc.Label,taiLabel2:cc.Label,xiuLabel2:cc.Label,resultOnButtonNode:cc.Node,resultOffButtonNode:cc.Node,pointOnButtonNode:cc.Node,pointOffButtonNode:cc.Node,history1Node:cc.Node,history2Node:cc.Node,historyLayoutNode:cc.Node,listLayoutNode:[cc.Node],listNodeEclip:[cc.Node],taixiuHistoryItem2Prefab:cc.Prefab,taixiuHistoryItemPrefab:cc.Prefab},init:function(t,e){this.data=e,this.TaiXiuHistoryGame=t,this.initFirst(),this.TaiXiuHistoryGame.node.active&&this.initData(e)},initFirst:function(){if(!this.pool){this.pool=new cc.NodePool,this.pool2=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.taixiuHistoryItem2Prefab);this.pool.put(e)}for(var i=0;i<40;i++){var o=cc.instantiate(this.taixiuHistoryItemPrefab);this.pool2.put(o)}}},onLoad:function(){this.onResultClick()},onEnable:function(){this.data&&this.initData(this.data)},initData:function(t){t.length>0&&(this.initFirst(),this.initTaiXiuHistoryPoint(t),this.initTaiXiuHistory2(t))},onResultClick:function(){this.hideAll(),this.resultOffButtonNode.active=!1,this.resultOnButtonNode.active=!0,this.history2Node.active=!0},onPointClick:function(){this.hideAll(),this.pointOffButtonNode.active=!1,this.pointOnButtonNode.active=!0,this.history1Node.active=!0},hideAll:function(){this.resultOffButtonNode.active=!0,this.resultOnButtonNode.active=!1,this.pointOffButtonNode.active=!0,this.pointOnButtonNode.active=!1,this.history1Node.active=!1,this.history2Node.active=!1},initTaiXiuHistoryPoint:function(t){var e=[];(e=t.slice()).length>1&&parseInt(e[0].match_game_id)<parseInt(e[1].match_game_id)&&e.reverse();var i=0,s=0,a=4,r=0,c=0,h=void 0,l=this.instanceListAllPosition();this.putAllChipToPool();for(var u=0,d=e.length;u<d;u++){var m=this.instanceItem(e[u]);if(0===u)h=m.getComponent("TaiXiuHistoryItem2").isTaiXiu(),r=0,a=4,l[c].push(m);else{var p=m.getComponent("TaiXiuHistoryItem2").isTaiXiu();h===p?(--a<0&&(r++,a=4),l[c].push(m)):(a=4,r++,l[++c].push(m)),h=p}if(this.historyLayoutNode.addChild(m),m.setPosition(0,0),h?i++:s++,this.taiLabel.string=o.numberWithCommas(i),this.xiuLabel.string=o.numberWithCommas(s),r>=n.MAX_COL)break}this.sortAllPositionY(l)},initTaiXiuHistory2:function(t){var e=t.slice(),i=0,o=0;this.putAllChipToPool2();var s=[];e.length>n.MAX_TAXIU_2&&(e=e.splice(0,n.MAX_TAXIU_2)),e.length>1&&parseInt(e[0].match_game_id)>parseInt(e[1].match_game_id)&&e.reverse();for(var a=0;a<this.listNodeEclip.length;a++){var r=a+(a+1)*n.DISTANCE_ECLIP_ITEM;if(e[r]){s.push(e[r]);var c=this.instanceItem2(e[r]);this.listNodeEclip[a].addChild(c),c.x=0,c.y=0,this.isTai(e[r].dices)?i++:o++,r===e.length-1&&(c.getComponent("TaiXiuHistoryItem").showLight(),this.showLight=!0)}}for(var h=0,l=0;l<e.length;l++)e[l]===s[h]&&(h++,e.splice(l,1),l-=1);h=0;for(var u=0;u<this.listLayoutNode.length;u++)for(var d=0;d<e.length;d++){0!==d&&d%n.DISTANCE_ECLIP_ITEM==0&&u++;var m=this.instanceItem2(e[d]);this.listLayoutNode[u].addChild(m),this.isTai(e[d].dices)?i++:o++,d===e.length-1&&(this.showLight||m.getComponent("TaiXiuHistoryItem").showLight(),u=this.listLayoutNode.length)}this.taiLabel2.string=i,this.xiuLabel2.string=o},instanceItem:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.taixiuHistoryItem2Prefab)),e.getComponent("TaiXiuHistoryItem2").init(t),e},instanceItem2:function(t){var e=void 0;return this.pool2&&(e=this.pool2.get()),e||(e=cc.instantiate(this.taixiuHistoryItemPrefab)),e.getComponent("TaiXiuHistoryItem").initData(t),e},putAllChipToPool:function(){if(this.pool){var t=this.historyLayoutNode.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},putAllChipToPool2:function(){if(this.pool2){for(var t=0;t<this.listLayoutNode.length;t++){var e=this.listLayoutNode[t].getChildren(),i=[];for(var o in e)i.push(e[o]);for(var n in i)this.pool2.put(i[n])}for(var s=0;s<this.listNodeEclip.length;s++){var a=this.listNodeEclip[s].getChildren(),r=[];for(var c in a)r.push(a[c]);for(var h in r)this.pool2.put(r[h])}}},instanceListAllPosition:function(){for(var t=[],e=0,i=n.MAX_COL;e<=i;e++){t.push([])}return t},sortAllPositionY:function(t){for(var e=0,i=4,o=0,s=(t=t.reverse()).length;o<s;o++)if(t[o].length>0){for(var a=t[o].reverse(),r=0;r<a.length;r++){var c=e*n.DISTANCE_W_STATISTIC+15,h=i*n.DISTANCE_H_STATISTIC+15;a[r].x=c,a[r].y=h,--i<0&&r<a.length-1&&(e++,i=4)}e++,i=4}},isTai:function(t){var e=0;for(var i in t)e+=t[i];return e>=n.MIN_TAI}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryGame2:[function(t,e,i){"use strict";cc._RF.push(e,"b225eVxRYRAZaXeq1QG67kb","TaiXiuHistoryGame2");var o=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{graphicsNode:cc.Node},init:function(t,e){this.data=e,this.TaiXiuHistoryGame=t,this.TaiXiuHistoryGame.node.active&&this.initHistory(e)},onLoad:function(){},onEnable:function(){this.data&&(this.initFirst(),this.initHistory(this.data))},initFirst:function(){this.graphic||(this.graphic=this.graphicsNode.getComponent(cc.Graphics),this.sumDraw=!0,this.xs1Draw=!0,this.xs2Draw=!0,this.xs3Draw=!0,this.BLACK_COLOR=cc.Color.BLACK.toCSS(),this.WHILE_COLOR=cc.Color.WHITE.toCSS(),this.XS1_COLOR=cc.Color.YELLOW.toCSS()+"00",this.XS2_COLOR=cc.Color.RED.toCSS()+"00",this.XS3_COLOR=cc.Color.GREEN.toCSS()+"00")},initHistory:function(t){this.reset();var e=[];if(t.length>o.TOTAL_STATISTIC)for(var i=0;i<o.TOTAL_STATISTIC;i++)e.push(t[i]);else e=t;e=e.reverse(),this.drawSum(e),this.drawStatistic(e)},drawSum:function(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.getPositionDrawSum(i+1,t[i].dices));this.draw(this.sumDraw,e,o.SIZE_SUM_CRILE)},drawStatistic:function(t){var e=this.getPositionStatistic(t,0,this.XS1_COLOR,cc.Color.YELLOW),i=this.getPositionStatistic(t,1,this.XS2_COLOR,cc.Color.RED),n=this.getPositionStatistic(t,2,this.XS3_COLOR,cc.Color.GREEN);this.draw(this.xs1Draw,e,o.SIZE_STATISTIC_CRILE),this.draw(this.xs2Draw,i,o.SIZE_STATISTIC_CRILE),this.draw(this.xs3Draw,n,o.SIZE_STATISTIC_CRILE)},getPositionDrawSum:function(t,e){var i=e[0]+e[1]+e[2],n=t*o.DISTANCE_W_STATISTIC_2,s=o.START_H_SUM+i*o.DISTANCE_H_SUM,a=i>=o.MIN_TAI?this.BLACK_COLOR:this.WHILE_COLOR;this.WHILE_COLOR;return{x:n,y:s,colorCrile:a,colorLine:cc.Color.WHITE}},getPositionStatistic:function(t,e,i,n){for(var s=[],a=0,r=t.length;a<r;a++){var c=t[a].dices,h=(a+1)*o.DISTANCE_W_STATISTIC_2,l=c[e]*o.DISTANCE_H_STATISTIC_2;s.push({x:h,y:l,colorCrile:i,colorLine:n})}return s},draw:function(t,e,i){if(t){for(var o=0,n=e.length;o<n;o++)0===o?this.graphic.moveTo(e[o].x,e[o].y):(this.graphic.lineTo(e[o].x,e[o].y),this.graphic.strokeColor=e[o].colorLine);this.graphic.stroke();for(var s=0,a=e.length;s<a;s++)this.graphic.circle(e[s].x,e[s].y,i),this.graphic.fillColor=cc.color().fromHEX(e[s].colorCrile),this.graphic.fill()}},onSumToggleClick:function(){this.sumDraw=!this.sumDraw,this.init(this.TaiXiuHistoryGame,this.data)},onXS1ToogleClick:function(){this.xs1Draw=!this.xs1Draw,this.init(this.TaiXiuHistoryGame,this.data)},onXS2ToogleClick:function(){this.xs2Draw=!this.xs2Draw,this.init(this.TaiXiuHistoryGame,this.data)},onXS3ToogleClick:function(){this.xs3Draw=!this.xs3Draw,this.init(this.TaiXiuHistoryGame,this.data)},reset:function(){this.initFirst(),this.graphic.clear()}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryGame:[function(t,e,i){"use strict";cc._RF.push(e,"792780g4wNPBYckn8J7xha9","TaiXiuHistoryGame");var o=t("./TaiXiuHistoryGame1"),n=t("./TaiXiuHistoryGame2"),s=t("./chan-le/ChanLeHistoryGame1");cc.Class({extends:cc.Component,properties:{buttonNode:cc.Node,chanleContentNode:cc.Node,taixiuContentNode:cc.Node,taiXiuButtonNode:cc.Node,chanLeButtonNode:cc.Node,TaiXiuHistoryGame1:o,TaiXiuHistoryGame2:n,ChanLeHistoryGame1:s},init:function(t,e){this.TaiXiu=t,this.TaiXiuHistoryGame1.init(this,e),this.TaiXiuHistoryGame2.init(this,e),this.ChanLeHistoryGame1.initData(this,e)},onLoad:function(){},onEnable:function(){this.TaiXiu.isChanLe()?this.showChanLeContentNode():this.showTaiXiuContentNode()},onTaiXiuHistoryClick:function(){this.showTaiXiuContentNode()},onChanLeHistoryClick:function(){this.showChanLeContentNode()},onNextClick:function(){this.TaiXiuHistoryGame1.node.active?this.showHistoryGame2():this.showHistoryGame1()},onPreviousClick:function(){this.TaiXiuHistoryGame1.node.active?this.showHistoryGame2():this.showHistoryGame1()},showTaiXiuContentNode:function(){this.taiXiuButtonNode.active=!1,this.chanLeButtonNode.active=!0,this.chanleContentNode.active=!1,this.taixiuContentNode.active=!0,this.buttonNode.active=!1},showChanLeContentNode:function(){this.taiXiuButtonNode.active=!0,this.chanLeButtonNode.active=!1,this.chanleContentNode.active=!0,this.taixiuContentNode.active=!1,this.buttonNode.active=!1},showHistoryGame1:function(){this.TaiXiuHistoryGame1.node.active=!0,this.TaiXiuHistoryGame2.node.active=!1,this.buttonNode.active=!1},showHistoryGame2:function(){this.TaiXiuHistoryGame1.node.active=!1,this.TaiXiuHistoryGame2.node.active=!0,this.buttonNode.active=!1},onCloseClick:function(){this.node.active=!1}}),cc._RF.pop()},{"./TaiXiuHistoryGame1":"TaiXiuHistoryGame1","./TaiXiuHistoryGame2":"TaiXiuHistoryGame2","./chan-le/ChanLeHistoryGame1":"ChanLeHistoryGame1"}],TaiXiuHistoryItem2:[function(t,e,i){"use strict";cc._RF.push(e,"af451w50RhHErjxt6tEnGc1","TaiXiuHistoryItem2");var o=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{taiLabel:cc.Label,xiuLabel:cc.Label,bgSprite:cc.Sprite,taiSpriteFrame:cc.SpriteFrame,xiuSpriteFrame:cc.SpriteFrame},onLoad:function(){},init:function(t){this.data=t;var e=t.dices;for(var i in this.sum=0,e)this.sum+=e[i];this.taiLabel.string=this.sum,this.xiuLabel.string=this.sum,this.sum>=o.MIN_TAI?(this.taiLabel.node.active=!0,this.xiuLabel.node.active=!1,this.bgSprite.spriteFrame=this.taiSpriteFrame):(this.taiLabel.node.active=!1,this.xiuLabel.node.active=!0,this.bgSprite.spriteFrame=this.xiuSpriteFrame)},isTaiXiu:function(){return this.sum>=o.MIN_TAI}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"c2bf58gN+pLjrEZozeDlSXU","TaiXiuHistoryItem");var o=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{itemSprite:cc.Sprite,taiSpriteFrame:cc.SpriteFrame,xiuSpriteFrame:cc.SpriteFrame,selectedNode:cc.Node,animationNode:cc.Node},init:function(t){this.TaiXiu=t,this.TaiXiuHistory=t.TaiXiuHistory},onLoad:function(){var t=this;this.onMouseEnter=function(){t.TaiXiuHistory&&t.TaiXiuHistory.showGameHint(t)},this.onMouseLeave=function(){t.TaiXiuHistory&&t.TaiXiuHistory.hideGameHint()},this.node.getComponent("ButtonHover")&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onEnable:function(){this.TaiXiu&&this.TaiXiu.node.active&&this.selectedNode.active&&this.animationNode.getComponent(cc.Animation).play()},onDisable:function(){this.TaiXiu&&this.selectedNode.active&&this.animationNode.getComponent(cc.Animation).stop(),this.animationNode.y=0},initData:function(t){this.hideSelectNode(),this.data=t;var e=t.dices;for(var i in this.sum=0,e)this.sum+=e[i];this.itemSprite.spriteFrame=this.sum>=o.MIN_TAI?this.taiSpriteFrame:this.xiuSpriteFrame,this.selectedNode.active=!1,this.animationNode.y=0},isTaiXiu:function(){return this.sum>=o.MIN_TAI},showSelectedNode:function(){this.TaiXiu&&this.TaiXiu.node.active&&this.animationNode.getComponent(cc.Animation).play(),this.selectedNode.active=!0},hideSelectNode:function(){this.animationNode.getComponent(cc.Animation).stop(),this.selectedNode.active=!1},hideLight:function(){this.selectedNode.active=!1},showLight:function(){this.selectedNode.active=!0},getData:function(){return this.data},onClick:function(){this.TaiXiu&&this.TaiXiu.controller.MiniGame.TaiXiuDetail.showDetail(this.data.match_game_id,this.TaiXiu.isMoneyType)}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuHistory:[function(t,e,i){"use strict";cc._RF.push(e,"8e4e0/ba+xMFo0NiXSkJzEJ","TaiXiuHistory");var o=t("./TaiXiuConstant"),n=t("./TaiXiuHistoryItem");cc.Class({extends:cc.Component,properties:{historyItemPrefab:cc.Prefab,historyLayout:cc.Node,historyHintNode:cc.Node,historyHintLabel:cc.Label,listHistoryItem:[n]},init:function(t){for(var e in this.TaiXiu=t,this.listHistoryItem)this.listHistoryItem[e].init(t)},onLoad:function(){},initHistories:function(t){for(var e=t.length>o.NUMBER_HISTORY?o.NUMBER_HISTORY:t.length,i=0;i<this.listHistoryItem.length;i++)i<e?(this.listHistoryItem[i].node.active=!0,this.listHistoryItem[i].initData(t[i]),0==i&&this.listHistoryItem[i].showSelectedNode()):this.listHistoryItem[i].node.active=!1},showGameHint:function(t){if(t.getData()){this.historyHintNode.active=!0;for(var e=0,i=t.getData().dices,n=0,s=i.length;n<s;n++)e+=i[n];var a=e>=o.MIN_TAI?"T\xc0I: ":"X\u1ec8U: ";this.historyHintLabel.string=a+""+t.getData().dices.join("-");var r=this.historyHintNode.parent.convertToWorldSpaceAR(this.historyHintNode),c=t.node.convertToNodeSpaceAR(r);this.historyHintNode.x-=c.x}},stopAllAnimationHistory:function(){for(var t in this.listHistoryItem)this.listHistoryItem[t].onDisable()},hideGameHint:function(){this.historyHintNode.active=!1,this.historyHintLabel.string=""}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant","./TaiXiuHistoryItem":"TaiXiuHistoryItem"}],TaiXiuIconItem:[function(t,e,i){"use strict";cc._RF.push(e,"7d977Csl5hDV5MBLMEtVcHw","TaiXiuIconItem");var o=t("../mini-game/item/JackpotItem");cc.Class({extends:cc.Component,properties:{taiChanJackpotItem:o,xiuLeJackpotItem:o},onLoad:function(){},initData:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t=t[0],this.data=t,t&&(e?(this.taiChanJackpotItem.setMoney(t.amount_money_tai),this.xiuLeJackpotItem.setMoney(t.amount_money_xiu)):(this.taiChanJackpotItem.setMoney(t.amount_money_chan),this.xiuLeJackpotItem.setMoney(t.amount_money_le)))}}),cc._RF.pop()},{"../mini-game/item/JackpotItem":"JackpotItem"}],TaiXiuNumberItem:[function(t,e,i){"use strict";cc._RF.push(e,"75c9fg6sT5M7YavsC7Uu+kt","TaiXiuNumberItem"),cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label,taxiubgSpriteNode:cc.Node},init:function(t){this.TaiXiu=t,this.ChanLe=t.ChanLe},onLoad:function(){var t=this;this.taxiubgSpriteNode.active=!1,this.onMouseEnter=function(){t.taxiubgSpriteNode.active=!0},this.onMouseLeave=function(){t.taxiubgSpriteNode.active=!1},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onNumberClick:function(){if(this.isChanLe()){var t=(this.ChanLe.isSelectChan?this.ChanLe.getChanValue():this.ChanLe.getLeValue())+""+this.numberLabel.string;this.ChanLe.isSelectChan?this.ChanLe.setChan(t):this.ChanLe.setLe(t)}else{var e=(this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue())+""+this.numberLabel.string;this.TaiXiu.isSelectTai?this.TaiXiu.setTai(e):this.TaiXiu.setXiu(e)}},onBackClick:function(){if(this.isChanLe()){var t=this.ChanLe.isSelectChan?this.ChanLe.getChanValue():this.ChanLe.getLeValue(),e=(t+="").slice(0,-1);this.ChanLe.isSelectChan?this.ChanLe.setChan(e):this.ChanLe.setLe(e)}else{var i=this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue(),o=(i+="").slice(0,-1);this.TaiXiu.isSelectTai?this.TaiXiu.setTai(o):this.TaiXiu.setXiu(o)}},isChanLe:function(){return this.TaiXiu.isChanLe()}}),cc._RF.pop()},{}],TaiXiuPlateMove:[function(t,e,i){"use strict";cc._RF.push(e,"a3b6eKfQ1NCFLhmtgBcjAom","TaiXiuPlateMove"),cc.Class({extends:cc.Component,properties:{},init:function(t){this.TaiXiu=t,this.positionX=this.node.x,this.positionY=this.node.y},onLoad:function(){var t=this;this.onTouchMove=function(e){var i=e.touch.getDelta();t.node.x+=i.x,t.node.y+=i.y,t.getDistance()>135&&t.isHide&&(t.isHide=!1,t.TaiXiu.initResult()),e.stopPropagation()},this.addEventMove(),this.isHide=!0},addEventMove:function(){this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this.node)},reset:function(){this.node.x=this.positionX,this.node.y=this.positionY,this.isHide=!0},getDistance:function(){return Math.sqrt((this.node.x-this.positionX)*(this.node.x-this.positionX)+(this.node.y-this.positionY)*(this.node.y-this.positionY))}}),cc._RF.pop()},{}],TaiXiuPlate:[function(t,e,i){"use strict";cc._RF.push(e,"8ab39EYQwdE9q2N0BgnMjMv","TaiXiuPlate");var o=t("./TaiXiuPlateMove"),n=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{plateRealNode:cc.Node,nanButtonNode:cc.Node,nanDisalbeButtonNode:cc.Node,TaiXiuPlateMove:o},init:function(t){this.TaiXiu=t,this.TaiXiuPlateMove.init(t)},onLoad:function(){},onNanClick:function(){this.showNanDisableButton()},onNanDisableClick:function(){this.showNanButton()},setPlateByRoomType:function(t){},showNanButton:function(){this.TaiXiu.getTempData()[n.IS_NAN]=!1,this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!0,this.TaiXiuPlateMove.node.active=!1,this.plateRealNode.active=!1},showNanDisableButton:function(){this.TaiXiu.getTempData()[n.IS_NAN]=!0,this.nanButtonNode.active=!0,this.nanDisalbeButtonNode.active=!1,this.TaiXiuPlateMove.node.active=!1,this.plateRealNode.active=!0},showPlateMove:function(){this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!1,this.TaiXiuPlateMove.node.active=!0,this.TaiXiuPlateMove.reset()},hidePlateRealNode:function(){this.plateRealNode.active=!1},isNan:function(){return this.TaiXiu.getTempData()[n.IS_NAN]},reset:function(){this.TaiXiu.getTempData()[n.IS_NAN]?(this.nanButtonNode.active=!0,this.nanDisalbeButtonNode.active=!1):(this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!0),this.TaiXiuPlateMove.node.active=!1,this.TaiXiuPlateMove.reset()},hideAll:function(){this.nanButtonNode.active=!1,this.nanDisalbeButtonNode.active=!1,this.TaiXiuPlateMove.node.active=!1}}),cc._RF.pop()},{"./TaiXiuConstant":"TaiXiuConstant","./TaiXiuPlateMove":"TaiXiuPlateMove"}],TaiXiuQuickSelect:[function(t,e,i){"use strict";cc._RF.push(e,"0465ciBip1IIKMWo+eURJax","TaiXiuQuickSelect");var o=t("../../../helper/Config"),n=t("../../../helper/Message"),s=t("../../../object/RoomType"),a=t("../item/TaiXiuSelectItem"),r=t("../item/TaiXiuNumberItem"),c=t("./TaiXiuConstant");cc.Class({extends:cc.Component,properties:{selectNode:cc.Node,numberNode:cc.Node,selectButtonNode:cc.Node,numberButtonNode:cc.Node,listSelectItem:[a],listNumberItem:[r]},init:function(t){this.TaiXiu=t,this.ChanLe=t.ChanLe},onLoad:function(){this.initData()},initData:function(){for(var t=0;t<this.listSelectItem.length;t++)this.listSelectItem[t].init(this.TaiXiu,o.TAI_XIU_LIST_SELECT[t]);for(var e=0;e<this.listNumberItem.length;e++)this.listNumberItem[e].init(this.TaiXiu)},onSelectClick:function(){this.selectNode.active=!0,this.numberNode.active=!1,this.selectButtonNode.active=!1,this.numberButtonNode.active=!0,this.TaiXiu.resetEditBox(),this.ChanLe.resetEditBox()},onNumberClick:function(){this.selectNode.active=!1,this.numberNode.active=!0,this.selectButtonNode.active=!0,this.numberButtonNode.active=!1,this.TaiXiu.resetEditBox(),this.ChanLe.resetEditBox()},onBetClick:function(){var t=this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue(),e=this.ChanLe.isSelectChan?this.ChanLe.getChanValue():this.ChanLe.getLeValue(),i="";if(t&&(i=this.TaiXiu.isSelectTai?c.TAI:c.XIU),e&&(i=this.ChanLe.isSelectChan?c.CHAN:c.LE),0!==t||0!==e){var o={amount:t||e,type:i,room_type:this.TaiXiu.isMoneyType?s.MONEY_CODE:s.GOLD_CODE};this.TaiXiu.sendRequest.sendNoPrefixToZone(c.BET,o),this.onCloseClick()}else this.TaiXiu.showMessage(n.TAIXIU_YOU_NOT_BET)},onCloseClick:function(){this.node.active=!1,this.TaiXiu.resetEditBox(),this.ChanLe.resetEditBox()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../item/TaiXiuNumberItem":"TaiXiuNumberItem","../item/TaiXiuSelectItem":"TaiXiuSelectItem","./TaiXiuConstant":"TaiXiuConstant"}],TaiXiuSelectItem:[function(t,e,i){"use strict";cc._RF.push(e,"e7cc0Yj4AlJdaS7p4z5o26Y","TaiXiuSelectItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{nameLabel:cc.Label,taxiubgSpriteNode:cc.Node},init:function(t,e){this.TaiXiu=t,this.ChanLe=t.ChanLe,e?(this.value=e,this.nameLabel.string=o.nFormatter(e)):(this.nameLabel.string="ALL IN",this.is_all_in=!0)},onLoad:function(){var t=this;this.onMouseEnter=function(){t.taxiubgSpriteNode.active=!0},this.onMouseLeave=function(){t.taxiubgSpriteNode.active=!1},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},onClick:function(){if(this.isChanLe()){var t=this.ChanLe.isSelectChan?this.ChanLe.getChanValue():this.ChanLe.getLeValue(),e=0;e=this.is_all_in?this.TaiXiu.getSFSMySelf().variables.money.value:t+this.value,this.ChanLe.isSelectChan?this.ChanLe.setChan(e):this.ChanLe.setLe(e)}else{var i=this.TaiXiu.isSelectTai?this.TaiXiu.getTaiValue():this.TaiXiu.getXiuValue(),o=0;o=this.is_all_in?this.TaiXiu.getSFSMySelf().variables.money.value:i+this.value,this.TaiXiu.isSelectTai?this.TaiXiu.setTai(o):this.TaiXiu.setXiu(o)}},isChanLe:function(){return this.TaiXiu.isChanLe()}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TaiXiuState:[function(t,e,i){"use strict";cc._RF.push(e,"7f5e41p0NdKXYcBA/+MC+Q8","TaiXiuState");e.exports={currentState:null,BETTING:"BETTING",BALANCE_DOOR:"BALANCE_DOOR",FINISH:"FINISH",setState:function(t){this.currentState=t},setBetting:function(){this.currentState=this.BETTING},setBalanceDoor:function(){this.currentState=this.BALANCE_DOOR},setFinish:function(){this.currentState=this.FINISH},isBetting:function(){return this.currentState===this.BETTING},isBalanceDoor:function(){return this.currentState===this.BALANCE_DOOR},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],TaiXiuTime:[function(t,e,i){"use strict";cc._RF.push(e,"633497XfllIJKTB3z7KzLLZ","TaiXiuTime");var o=t("./TaiXiuState"),n=t("../../../helper/Config"),s=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{taixiuTimeBetLabel:cc.Label,taixiuTimeFinishLabel:cc.Label},init:function(t){this.TaiXiu=t},onLoad:function(){},onDestroy:function(){clearInterval(this.timeInterval)},setTime:function(t){clearInterval(this.timeInterval),this.setTimeLabel(t)},initTimeTaiXiu:function(t){t&&(this.gameState=t.game_state,this.time=t.time_remain,this.setTimeLabel(this.time),this.gameState===o.BETTING?(this.taixiuTimeBetLabel.node.active=!0,this.taixiuTimeFinishLabel.node.active=!1):(this.taixiuTimeBetLabel.node.active=!1,this.taixiuTimeFinishLabel.node.active=!0),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval),this.TaiXiu&&this.TaiXiu.startTimeGetFinish()),this.setTimeLabel(this.time)}.bind(this),1e3))},setTimeLabel:function(t){var e=s.numberToTime(t);this.taixiuTimeBetLabel&&(this.taixiuTimeBetLabel.string=e),this.taixiuTimeFinishLabel&&(this.taixiuTimeFinishLabel.string=e)},setPositionBymoveByMiniGameCircleShow:function(t){t?this.node.setPosition(n.TAI_XIU_TIME_POSITION_X_BIG,n.TAI_XIU_TIME_POSITION_Y_BIG):this.node.setPosition(n.TAI_XIU_TIME_POSITION_X_SMALL,n.TAI_XIU_TIME_POSITION_Y_SMALL)},moveByMiniGameCircleShow:function(t){this.node.active?t?this.moveBig():this.moveSmall():this.setPositionBymoveByMiniGameCircleShow(t)},moveBig:function(){this.node.stopAllActions(),this.node.runAction(cc.moveTo(n.MINIGAME_TIME_SHOW,n.TAI_XIU_TIME_POSITION_X_BIG,n.TAI_XIU_TIME_POSITION_Y_BIG))},moveSmall:function(){this.node.stopAllActions(),this.node.runAction(cc.moveTo(n.MINIGAME_TIME_SHOW,n.TAI_XIU_TIME_POSITION_X_SMALL,n.TAI_XIU_TIME_POSITION_Y_SMALL))}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","./TaiXiuState":"TaiXiuState"}],TaiXiu:[function(t,e,i){"use strict";cc._RF.push(e,"16159JdFwJDeJGPJin+vf75","TaiXiu");var o=t("../../../base/BaseController"),n=t("./TaiXiuState"),s=t("./TaiXiuConstant"),a=t("./TaiXiuDice"),r=t("./TaiXiuPlate"),c=t("./TaiXiuHistory"),h=t("./TaiXiuTime"),l=t("./TaiXiuQuickSelect"),u=t("./TaiXiuHistoryGame"),d=t("./TaiXiuChat"),m=t("../MiniGameResultTaiXiu"),p=t("../MiniGameResult"),f=t("./chan-le/ChanLe"),g=t("../../../object/RoomType"),_=t("../../../util/FormatUtil"),S=t("../../../util/BrowserUtil"),C=t("../../../helper/Message"),N=t("../../../helper/Constant"),E=t("../../../helper/Config"),T=t("../MiniGameConstant");cc.Class({extends:o,properties:{idLabel:cc.Label,chainWinLabel:cc.Label,chainLoseLabel:cc.Label,currentChainWinLabel:cc.Label,currentChainLoseLabel:cc.Label,timeBettingLabel:cc.Label,timeBettingNode:cc.Node,timeFinishLabel:cc.Label,timeFinishNode:cc.Node,timeBettingSpine:sp.Skeleton,taiNumberPlayerLabel:cc.Label,taiTotalLabel:cc.Label,taiMyBetLabel:cc.Label,taiEditBox:cc.EditBox,xiuNumberPlayerLabel:cc.Label,xiuTotalLabel:cc.Label,xiuMyBetLabel:cc.Label,xiuEditBox:cc.EditBox,moneyNode:cc.Node,goldNode:cc.Node,taiBetNodeSprite:cc.Sprite,xiuBetNodeSprite:cc.Sprite,onBetTaiXiuSpriteFrame:cc.SpriteFrame,offBetTaiXiuSpriteFrame:cc.SpriteFrame,toastPrefab:cc.Prefab,TaiXiuDice:a,TaiXiuPlate:r,TaiXiuQuickSelect:l,TaiXiuHistory:c,TaiXiuTime:h,TaiXiuHistoryGame:u,TaiXiuChat:d,MiniGameResultTaiXiu:m,MiniGameResult:p,ChanLe:f,taiXiuNode:cc.Node,chanLeNode:cc.Node,chanLeButtonNode:cc.Node,taiXiuButtonNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this._super(),this.data=null,this.time=0,this.timeInterval=null,this.resultTimeout=null,this.timeOutGetFinish=null,this.isMoneyType=!0,this.dataFinish=[],this.TaiXiuState=n,this.TaiXiuDice.init(this),this.TaiXiuChat.init(this),this.TaiXiuPlate.init(this),this.TaiXiuHistory.init(this),this.TaiXiuQuickSelect.init(this),this.TaiXiuTime.init(this),this.ChanLe.init(this),this.editboxs=[this.taiEditBox,this.xiuEditBox],this.setTypeRoom(this.isMoneyType),this.initData()},onEnable:function(){cc.sys.isBrowser&&!this.isChanLe()&&this.addEventKeyPress(),this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){cc.sys.isBrowser&&!this.isChanLe()&&this.removeEventKeyPress(),this.reset(),clearInterval(this.timeInterval),clearTimeout(this.resultTimeout),clearTimeout(this.timeOutGetFinish),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT),this.TaiXiuHistory.stopAllAnimationHistory(),this.ChanLe.ChanLeHistory.stopAllAnimationHistory(),this.node.active=!1},addEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){S.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){S.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}},keyHandle:function(t){return t.keyCode==N.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===N.ENTER_KEY?(S.focusGame(),this.onBetClick(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(S.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),S.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&S.focusEditBox(this.editboxs[0])},initData:function(){!1===this.getTempData()[s.IS_SHOW_CHAT]&&(this.TaiXiuChat.node.active=!1)},setShowTaiXiu:function(t){this.node.active=t,this.isShow=t,cc.sys.localStorage.setItem([s.IS_SHOW],this.isShow),this.TaiXiuTime.node.active=!t,t||this.sendRequest.sendNoPrefixToZone(s.GET_STATE,{})},setTimeLabel:function(t){var e=parseInt(t);this.TaiXiuState.isBetting()?(this.timeBettingNode.active=!0,this.timeFinishNode.active=!1,this.timeBettingLabel&&(this.timeBettingLabel.string=e,e<=10?this.setTimeFinish||(this.timeAnimation(),this.setTimeFinish=!0):this.setTimeDefault||(this.timeDefault(),this.setTimeDefault=!0))):this.TaiXiuState.isFinish()&&(this.timeBettingNode.active=!1,this.timeFinishNode.active=!0,this.timeFinishLabel&&(this.timeFinishLabel.string=e))},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(s.REQUEST_UPDATE,e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_START:this.handleStart(i);break;case s.REQUEST_BALANCE_DOOR:this.handleBalanceDoor(i);break;case s.REQUEST_FINISH:this.handleFinish(i);break;case s.REQUEST_UPDATE:this.handleUpdate(i);break;case s.REQUEST_CHANGE_STATE:this.handleChangeState(i);break;case s.REQUEST_CHAT:this.handleChat(i);break;case s.REQUEST_HISTORY_DETAIL:this.handleHistoryDetail(i);break;case s.HISTORY_USER_DETAIL_2:this.handleHistoryUserDetail(i);break;case s.REQUEST_MESSAGE:this.handleMessage(o);break;case s.CURRENT_TOP_CHAIN_2:this.controller.MiniGame.TaiXiuChain.initTopDay(i),this.controller.EventGame&&this.controller.EventGame.initDataTaiXiu(i);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTaiXiu(i,this.isChanLe())}},handleInfo:function(t){this.dataBlanceDoor={};var e=t.game_state;this.match_game_id=t.match_game_id,this.TaiXiuState.setState(e),this.data=t,this.data.histories=this.data.histories.reverse(),this.initTime(),this.initChain(),this.initBetData(),this.initDices(!0),this.initHistories(),this.initChat(),this.initPlate(),this.idLabel.string=String.format(C.MINIGAME_ID,this.match_game_id)},handleStart:function(t){this.TaiXiuState.setBetting(),this.data=t,this.reset(),this.initTime(),this.match_game_id=t.match_game_id,this.idLabel.string=String.format(C.MINIGAME_ID,t.match_game_id)},handleBalanceDoor:function(t){this.TaiXiuState.setBalanceDoor(),this.data=t,this.initBalanceDoor(),this.startTimeGetFinish()},handleFinish:function(t){this.dataFinish.push(t),1===this.dataFinish.length&&(clearTimeout(this.timeOutGetFinish),this.TaiXiuState.setFinish(),this.data=t,this.histories.length>=s.NUMBER_HISTORY&&this.histories.pop(),this.histories.splice(0,0,{match_game_id:this.match_game_id,dices:this.data.dice||this.data.dices}),this.data.histories=this.histories,this.initTime(),this.initDices(!1),this.initResultByTime())},handleUpdate:function(t){this.data=t,this.initBetData()},handleChangeState:function(t){this.TaiXiuTime.initTimeTaiXiu(t)},handleChat:function(t){this.TaiXiuChat.addChat(t)},handleHistoryDetail:function(t){this.controller.MiniGame.TaiXiuDetail.handleHistoryDetail(t)},handleHistoryUserDetail:function(t){this.controller.MiniGame.GameMiniHistory.TaiXiuHistories.handleHistoryUserDetail(t)},handleMessage:function(t){this.showMessage(t)},initTime:function(){this.data&&(this.time=this.data.time_remain,this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.data&&(this.data.time_remain=this.time,this.setTimeLabel(this.time))}.bind(this),1e3))},initChain:function(){if(this.data){var t=this.data.tai_xiu_chain_lose,e=this.data.tai_xiu_chain_win,i=this.data.tai_xiu_current_chain_win,o=this.data.tai_xiu_current_chain_lose;this.chainWinLabel.string=String.format(C.TAIXIU_CHAIN_WIN,i),this.chainLoseLabel.string=String.format(C.TAIXIU_CHAIN_LOSE,o),this.currentChainWinLabel.string=String.format(C.TAIXIU_CURRENT_CHAIN_WIN,e),this.currentChainLoseLabel.string=String.format(C.TAIXIU_CURRENT_CHAIN_LOSE,t),this.ChanLe.initChain()}},initBetData:function(){if(this.data){var t=this.data.tai_xiu_gold,e=this.data.tai_xiu_money,i=this.data.chan_le_gold,o=this.data.chan_le_money;this.isMoneyType?(this.initBetDataByData(e),this.ChanLe.initBetDataByData(o)):(this.initBetDataByData(t),this.ChanLe.initBetDataByData(i))}},initBetDataByData:function(t){var e=t.tai,i=t.xiu,o=e.total_players,n=e.total_bet,s=e.my_bet,a=i.total_players,r=i.total_bet,c=i.my_bet;this.taiTotalLabel.string=_.numberWithCommas(n),this.taiNumberPlayerLabel.string="("+_.numberWithCommas(o)+")",this.taiMyBetLabel.string=_.numberWithCommas(s),this.xiuTotalLabel.string=_.numberWithCommas(r),this.xiuNumberPlayerLabel.string="("+_.numberWithCommas(a)+")",this.xiuMyBetLabel.string=_.numberWithCommas(c)},initHistories:function(){this.data&&this.data.histories&&(this.histories=this.data.histories,this.TaiXiuHistory.initHistories(this.histories),this.TaiXiuHistoryGame.init(this,this.histories),this.ChanLe.ChanLeHistory.initHistories(this.histories))},initChat:function(){this.data&&this.TaiXiuChat.initChat(this.data.chat)},initPlate:function(){this.TaiXiuState.isBetting()&&this.TaiXiuPlate.reset()},initDices:function(t){this.data&&(this.data.dice||this.data.dices?t?(this.data.dice=this.data.histories[0].dices,this.TaiXiuDice.show(this.data,!1,t),this.TaiXiuDice.showEffectTaiXiuResult(this.data.result||this.getResultTaiXiu(this.data.dice||this.data.dices)),this.ChanLe.showEffectChanLeResult(this.data.dices||this.data.dice),this.TaiXiuPlate.hideAll()):this.TaiXiuPlate.isNan()?(this.TaiXiuDice.show(this.data,!1,t),this.TaiXiuPlate.showPlateMove()):(this.TaiXiuDice.show(this.data,!0,t),this.TaiXiuPlate.hideAll()):(this.TaiXiuDice.hide(),this.ChanLe.hide()))},initResultByTime:function(){clearTimeout(this.resultTimeout);var t=this.TaiXiuPlate.isNan()?1e4:2e3;this.resultTimeout=setTimeout(function(){this.initResult()}.bind(this),t),this.TaiXiuPlate.hidePlateRealNode()},initResult:function(){if(clearTimeout(this.resultTimeout),this.data){var t=this.data;if(t&&this.TaiXiuState.isFinish()){var e=parseInt(t.tai_xiu_money_add),i=parseInt(t.chan_le_money_add),o=parseInt(t.tai_xiu_gold_add),n=parseInt(t.chan_le_gold_add),s="tai"===t.result?"T\xe0i":"X\u1ec9u",a=this.getResultChanLe(t.dices||t.dice),r=this.isMoneyType?e:o,c=this.isMoneyType?i:n;this.isChanLe()?0!==parseFloat(c)&&this.MiniGameResult.show(c,a):0!==parseFloat(r)&&this.MiniGameResult.show(r,s),this.TaiXiuPlate.hideAll(),this.TaiXiuDice.showEffectTaiXiuResult(t.result),this.ChanLe.showEffectChanLeResult(t.dices),this.initHistories(),this.initChain()}}},initBalanceDoor:function(){var t=this.data;if(this.dataBlanceDoor={},t){var e=parseInt(t.money_return),i=parseInt(t.gold_return),o=this.isMoneyType?e:i,n=t.tai_xiu_gold,s=t.tai_xiu_money,a=t.chan_le_gold,r=t.chan_le_money,c=n.tai.my_bet?n.tai.my_bet:n.xiu.my_bet,h=s.tai.my_bet?s.tai.my_bet:s.xiu.my_bet,l=a.chan.my_bet?a.chan.my_bet:a.le.my_bet,u=r.chan.my_bet?r.chan.my_bet:r.le.my_bet;this.dataBlanceDoor.tai_xiu_gold_my_bet=c,this.dataBlanceDoor.tai_xiu_money_my_bet=h,this.dataBlanceDoor.chan_le_gold_my_bet=l,this.dataBlanceDoor.chan_le_money_my_bet=u,this.TaiXiuTime.setTime(0),0!==parseFloat(o)?this.MiniGameResult.show(o,C.TAIXIU_BALANCE_DOOR):this.showMessage(C.TAIXIU_BALANCE_DOOR)}},onTaiEditBoxBegan:function(){this.TaiXiuQuickSelect.node.active=!0,this.xiuEditBox.string="",this.ChanLe.chanEditBox.string="",this.ChanLe.leEditBox.string="",this.isSelectTai=!0,this.showBetTaiNode()},onTaiEditBoxEnd:function(){this.hideBetTaiNode()},onXiuEditBoxBegan:function(){this.TaiXiuQuickSelect.node.active=!0,this.taiEditBox.string="",this.ChanLe.chanEditBox.string="",this.ChanLe.leEditBox.string="",this.isSelectTai=!1,this.showBetXiuNode()},onXiuEditBoxEnd:function(){this.hideBetXiuNode()},onEditBoxChange:function(){var t=this.taiEditBox.string,e=this.xiuEditBox.string,i=_.numberWithCommas(_.getOnlyNumberInString(t)),o=_.numberWithCommas(_.getOnlyNumberInString(e));this.taiEditBox.string=0==i?"":i,this.xiuEditBox.string=0==o?"":o},onEventChainClick:function(){this.controller.MiniGame.TaiXiuChain.showDialog()},onTaiXiuClick:function(){this.setShowTaiXiu(!this.isShow)},onHistoryGameClick:function(){this.TaiXiuHistoryGame.node.active=!this.TaiXiuHistoryGame.node.active},onCloseClick:function(){this.setShowTaiXiu(!1)},onBetClick:function(){var t=parseFloat(_.getOnlyNumberInString(this.taiEditBox.string)),e=parseFloat(_.getOnlyNumberInString(this.xiuEditBox.string)),i=parseFloat(this.ChanLe.getChanValue()),o=parseFloat(this.ChanLe.getLeValue());if(t&&e&&i&&o)this.showMessage(C.TAIXIU_YOU_ONLE_BET_A_DOOR);else if(t){var n={amount:t,type:s.TAI,room_type:this.isMoneyType?g.MONEY_CODE:g.GOLD_CODE};this.sendRequest.sendNoPrefixToZone(s.BET,n),this.resetEditBox(),this.TaiXiuQuickSelect.node.active=!1}else if(e){var a={amount:e,type:s.XIU,room_type:this.isMoneyType?g.MONEY_CODE:g.GOLD_CODE};this.sendRequest.sendNoPrefixToZone(s.BET,a),this.resetEditBox(),this.TaiXiuQuickSelect.node.active=!1}else if(i){var r={amount:i,type:s.CHAN,room_type:this.isMoneyType?g.MONEY_CODE:g.GOLD_CODE};this.sendRequest.sendNoPrefixToZone(s.BET,r),this.resetEditBox(),this.TaiXiuQuickSelect.node.active=!1}else if(o){var c={amount:o,type:s.LE,room_type:this.isMoneyType?g.MONEY_CODE:g.GOLD_CODE};this.sendRequest.sendNoPrefixToZone(s.BET,c),this.resetEditBox(),this.TaiXiuQuickSelect.node.active=!1}},startTimeGetFinish:function(){clearTimeout(this.timeOutGetFinish),this.timeOutGetFinish=setInterval(function(){clearTimeout(this.timeOutGetFinish),this.sendRequest&&this.sendRequest.sendNoPrefixToZone(s.GET_FINISH)}.bind(this),1e3*s.TIME_GET_FINISH)},onShowChanLeClick:function(){this.chanLeNode.active=!0,this.taiXiuNode.active=!1,this.chanLeButtonNode.active=!0,this.taiXiuButtonNode.active=!1,this.TaiXiuHistoryGame.showChanLeContentNode(),this.setShowChanLe(!0)},onShowTaiXiuClick:function(){this.chanLeNode.active=!1,this.taiXiuNode.active=!0,this.chanLeButtonNode.active=!1,this.taiXiuButtonNode.active=!0,this.TaiXiuHistoryGame.showTaiXiuContentNode(),this.setShowChanLe(!1)},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(N.TAI_XIU)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showTaiXiuHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(T.TAIXIU),this.controller.MiniGame.GameMiniRank.showDialog()},onGoldClick:function(){this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.setTypeRoom(!this.isMoneyType)},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=E.MINIGAME_SCALE_TOAST,e.setPosition(E.MINIGAME_POSITION_TOAST_X,E.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initTaiXiuData(this.data),this.TaiXiuPlate.setPlateByRoomType(this.isMoneyType),this.TaiXiuQuickSelect.node.active=!1},setTai:function(t){_.numberWithCommas(t).length<=E.TAI_XIU_MAX_LENGTH&&(this.taiEditBox.string=_.numberWithCommas(t))},getTaiValue:function(){return parseInt(_.getOnlyNumberInString(this.taiEditBox.string))||0},setXiu:function(t){_.numberWithCommas(t).length<=E.TAI_XIU_MAX_LENGTH&&(this.xiuEditBox.string=_.numberWithCommas(t))},getXiuValue:function(){return parseInt(_.getOnlyNumberInString(this.xiuEditBox.string))||0},isChanLe:function(){return this.ChanLe.node.active},getMoneyType:function(){return this.isMoneyType},getTaiXiuData:function(){return this.data},getTaiXiuHistory:function(){return this.histories},initTaiXiuData:function(t){if(t){this.data=t;var e=this.isMoneyType?t.money:t.gold;if(e){this.time=t.time_remain;var i=e.tai.total_players,o=e.tai.total_bet,n=e.tai.my_bet,s=e.xiu.total_players,a=e.xiu.total_bet,r=e.xiu.my_bet;this.setTimeLabel(this.time),this.taiTotalLabel.string=_.numberWithCommas(o),this.taiNumberPlayerLabel.string="("+_.numberWithCommas(i)+")",this.taiMyBetLabel.string=_.numberWithCommas(n),this.xiuTotalLabel.string=_.numberWithCommas(a),this.xiuNumberPlayerLabel.string="("+_.numberWithCommas(s)+")",this.xiuMyBetLabel.string=_.numberWithCommas(r)}}},resetEditBox:function(){this.taiEditBox.string="",this.xiuEditBox.string="",this.ChanLe.chanEditBox.string="",this.ChanLe.leEditBox.string=""},timeDefault:function(){this.timeBettingLabel.node.getComponent(cc.Animation).stop(),this.timeBettingLabel.node.opacity=255,this.timeBettingLabel.node.color=new cc.Color(252,198,60,255),this.timeBettingLabel.node.scale=1,this.timeBettingSpine.setAnimation(0,"animation",!0),this.setTimeFinish=!1},timeAnimation:function(){this.timeBettingLabel.node.getComponent(cc.Animation).play(),this.timeBettingSpine.setAnimation(0,"animation2",!0),this.setTimeDefault=!1},showHideRoundSpine:function(t){this.timeBettingSpine.node.active!==t&&(this.timeBettingSpine.node.active=t)},showBetTaiNode:function(){},showBetXiuNode:function(){},hideBetTaiNode:function(){},hideBetXiuNode:function(){},getResultChanLe:function(t){for(var e=0,i=0,o=t.length;i<o;i++)e+=t[i];return e%2==0?"Ch\u1eb5n":"L\u1ebb"},getResultTaiXiu:function(t){for(var e=0,i=0,o=t.length;i<o;i++)e+=t[i];return e>=s.MIN_TAI?"tai":"xiu"},reset:function(){this.setTimeLabel(0),this.timeDefault(),this.setTimeDefault=!1,this.setTimeFinish=!1,this.dataFinish=[],this.taiTotalLabel.string=_.numberWithCommas(0),this.taiNumberPlayerLabel.string="("+_.numberWithCommas(0)+")",this.taiMyBetLabel.string=_.numberWithCommas(0),this.xiuTotalLabel.string=_.numberWithCommas(0),this.xiuNumberPlayerLabel.string="("+_.numberWithCommas(0)+")",this.xiuMyBetLabel.string=_.numberWithCommas(0),this.TaiXiuDice.hide(),this.ChanLe.hide(),this.ChanLe.reset(),this.MiniGameResultTaiXiu.reset(),this.TaiXiuPlate.reset(),this.MiniGameResult.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../MiniGameResultTaiXiu":"MiniGameResultTaiXiu","./TaiXiuChat":"TaiXiuChat","./TaiXiuConstant":"TaiXiuConstant","./TaiXiuDice":"TaiXiuDice","./TaiXiuHistory":"TaiXiuHistory","./TaiXiuHistoryGame":"TaiXiuHistoryGame","./TaiXiuPlate":"TaiXiuPlate","./TaiXiuQuickSelect":"TaiXiuQuickSelect","./TaiXiuState":"TaiXiuState","./TaiXiuTime":"TaiXiuTime","./chan-le/ChanLe":"ChanLe"}],Toast:[function(t,e,i){"use strict";cc._RF.push(e,"99c39Jks9ZIfplJXMIlCr3g","Toast");var o=t("../helper/Config"),n=t("../helper/Message"),s=t("../util/FormatUtil");cc.Class({extends:cc.Component,properties:{toastLabel:cc.Label},onLoad:function(){this.timeOutHideToast=null,this.timeOutActiveToast=null},onDestroy:function(){this.clearTimeOut()},showToast:function(t){this.clearTimeOut(),this.setMessage(t),this.node.active=!0,this.node.getComponent(cc.Animation).play("ShowToastAnimation"),this.timeOutHideToast=setTimeout(function(){this.hideToast()}.bind(this),1e3*o.TOAST_TIME_OUT)},hideToast:function(){this.node.active&&this.node.getComponent(cc.Animation).play("HideToastAnimation"),this.timeOutActiveToast=setTimeout(function(){this.node.active=!1,this.setMessage("")}.bind(this),100)},setMessage:function(t){t=s.replaceContent(t,n.OLD_MONEY_1,n.NEW_MONEY),t=s.replaceContent(t,n.OLD_MONEY_2,n.NEW_MONEY),t=s.replaceContent(t,n.OLD_MONEY_3,n.NEW_MONEY),t=s.replaceContent(t,n.OLD_MONEY_4,n.NEW_MONEY),this.toastLabel.string=t},clearTimeOut:function(){clearTimeout(this.timeOutHideToast),clearTimeout(this.timeOutActiveToast)}}),cc._RF.pop()},{"../helper/Config":"Config","../helper/Message":"Message","../util/FormatUtil":"FormatUtil"}],Toggle:[function(t,e,i){"use strict";cc._RF.push(e,"04b58sGEXZCxbwlg/Ri/Rtb","Toggle");var o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{isOn:!0,toggleNode:cc.Node,toggleSprite:cc.Sprite,toggleOnSpriteFrame:cc.SpriteFrame,toggleOffSpriteFrame:cc.SpriteFrame,toggleBgSprite:cc.Sprite,toggleBgOnSpriteFrame:cc.SpriteFrame,toggleBgOffSpriteFrame:cc.SpriteFrame},onLoad:function(){this.moveOnAction=cc.moveTo(o.TOGGLE_TIME_ANIMATION,o.TOGGLE_DISTANCE_X,0),this.moveOffAction=cc.moveTo(o.TOGGLE_TIME_ANIMATION,-o.TOGGLE_DISTANCE_X,0)},onClick:function(){this.toggleNode.stopAllActions(),this.isOn?(this.isOn=!1,this.toggleSprite.spriteFrame=this.toggleOffSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOffSpriteFrame,this.toggleNode.runAction(this.moveOffAction)):(this.isOn=!0,this.toggleSprite.spriteFrame=this.toggleOnSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOnSpriteFrame,this.toggleNode.runAction(this.moveOnAction))},setOn:function(){this.isOn=!0,this.toggleSprite.spriteFrame=this.toggleOnSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOnSpriteFrame,this.toggleNode.x=o.TOGGLE_DISTANCE_X},setOff:function(){this.isOn=!1,this.toggleSprite.spriteFrame=this.toggleOffSpriteFrame,this.toggleBgSprite.spriteFrame=this.toggleBgOffSpriteFrame,this.toggleNode.x=-o.TOGGLE_DISTANCE_X},isChecked:function(){return this.isOn}}),cc._RF.pop()},{"../../helper/Config":"Config"}],TopEvent2Item:[function(t,e,i){"use strict";cc._RF.push(e,"9949cQx3nxCFoOS0GOjH1Qm","TopEvent2Item");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{rankSprite:cc.Sprite,rankLabel:cc.Label,prizeSprite:cc.Sprite,prizeLabel:cc.Label,nickNameLabel:cc.Label,scoreLabel:cc.Label,listRankSprite:[cc.SpriteFrame],listPrizeSprite:[cc.SpriteFrame]},start:function(){},init:function(t,e){this.reset();var i=0;if(i=e<10?5e5:i,i=e>=10&&e<20?1e5:i,i=e>=20?5e4:i,i=1==e?5e6:i,i=2==e?2e6:i,t){e>0?(this.rankLabel.node.active=!0,this.prizeLabel.node.active=!0,this.rankLabel.string=e+1,this.prizeLabel.string=o.numberWithCommas(i)):(this.rankSprite.node.active=!0,this.prizeSprite.node.active=!0,this.rankSprite.spriteFrame=this.listRankSprite[e],this.prizeSprite.spriteFrame=this.listPrizeSprite[e]),0===e&&(this.nickNameLabel.node.color=cc.Color.YELLOW,this.scoreLabel.node.color=cc.Color.YELLOW),1===e&&(this.nickNameLabel.node.color=cc.Color.CYAN,this.scoreLabel.node.color=cc.Color.CYAN),2===e&&(this.nickNameLabel.node.color=new cc.Color(252,198,144,91),this.scoreLabel.node.color=new cc.Color(252,198,144,91));var n=t.total_vp;n="number"==typeof n?o.numberWithCommas(n):n;var s=new Date("May 12 2020 10:00:00").getTime(),a=new Date("May 12 2020 10:00:00").getTime(),r=(new Date).getTime();this.scoreLabel.string=r-s<0&&e<3?"*********":r-a<0&&e<3?"*********":n,this.nickNameLabel.string=t.nickname}else this.node.active=!1},reset:function(){this.rankSprite.node.active=!1,this.prizeSprite.node.active=!1,this.rankLabel.node.active=!1,this.prizeLabel.node.active=!1,this.scoreLabel.node.color=cc.Color.WHITE,this.nickNameLabel.node.color=cc.Color.WHITE}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TopEvent2:[function(t,e,i){"use strict";cc._RF.push(e,"f7487Qs+t9Ii4h2g85IGAij","TopEvent2");var o=t("../../../../util/FormatUtil"),n=t("../../../../util/Util"),s=t("../../../../helper/Constant");cc.Class({extends:cc.Component,properties:{avatarSprite:cc.Sprite,nickNameLabel:cc.Label,vipLabel:cc.Label,rankLabel:cc.Label,timeNode:cc.Node,timeX2Node:cc.Node,rankButtonNode:cc.Node,tutorialButtonNode:cc.Node,rankNode:cc.Node,tutorialNode:cc.Node,contentScrollView:cc.ScrollView,topEvent2ItemPrefab:cc.Prefab,loadingNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.topEvent2ItemPrefab);this.pool.put(e)}},onEnable:function(){this.loadUserInfo(),this.loadData(),this.onRankClick(),this.showTimeNode()},loadData:function(){var t=this,e={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId()};this.loadingNode.active=!0,this.GameCenter.api.getTopEvent2(e,function(e){t.loadingNode.active=!1,t.initData(e.data),t.initUser(e.data)},function(e){t.loadingNode.active=!1})},loadUserInfo:function(){var t=this.GameCenter.getUser();if(t){var e=n.getShowNickName(t.show_nickname,s.SERVER_ID_1_NAME),i=t.avatar;this.setNicknameLabel(e),this.setAvatar(i)}},initUser:function(t){for(var e=this.GameCenter.getUser().nick_name,i=void 0,o=0,n=t.length;o<n;o++)e===t[o].nickname&&(i=o);if(t[i]){this.vipLabel.string="Vip: "+t[i].total_vp;var s=t[i].current_top?t[i].current_top:"???";this.rankLabel.string="H\u1ea1ng: "+s}else this.vipLabel.string="Vip: ???",this.rankLabel.string="H\u1ea1ng: ????"},setNicknameLabel:function(t){this.nickNameLabel.string=t},setAvatar:function(t){var e=this;t&&cc.loader.load(o.convertUrlToLocation(t),function(t,i){if(i instanceof cc.Texture2D){var o=new cc.SpriteFrame(i,cc.Rect(0,0,90,128));e.avatarSprite.spriteFrame=o}})},initData:function(t){this.putAllChipToPool();for(var e=0,i=t.length-1;e<i;e++){var o=void 0;this.pool&&(o=this.pool.get()),o||(o=cc.instantiate(this.topEvent2ItemPrefab)),o.getComponent("TopEvent2Item").init(t[e],e),o.parent=this.contentScrollView.content}},onRankClick:function(){this.tutorialButtonNode.active=!0,this.rankButtonNode.active=!1,this.rankNode.active=!0,this.tutorialNode.active=!1},onTutorialClick:function(){this.tutorialButtonNode.active=!1,this.rankButtonNode.active=!0,this.rankNode.active=!1,this.tutorialNode.active=!0},showTimeNode:function(){new Date("May 01 2020").getTime(),(new Date).getTime();this.timeX2Node.active=!1,this.timeNode.active=!0},putAllChipToPool:function(){if(this.pool){var t=this.contentScrollView.content.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../util/FormatUtil":"FormatUtil","../../../../util/Util":"Util"}],Track:[function(t,e,i){"use strict";cc._RF.push(e,"29c5bJMlp5H7IcDbfjfl7gr","Track");var o={addTrackCompleteRegistration:function(){cc.sys.isBrowser&&window.fbq&&fbq("track","CompleteRegistration")},addTrackPurchase:function(){cc.sys.isBrowser&&window.fbq&&fbq("track","Purchase",{value:0,currency:"USD"})},addTrackLead:function(){cc.sys.isBrowser&&window.fbq&&fbq("track","Lead")}};e.exports=o,cc._RF.pop()},{}],TransferAgent:[function(t,e,i){"use strict";cc._RF.push(e,"860ddt7+lVCOISjpygGpwEH","TransferAgent"),cc.Class({extends:cc.Component,properties:{agentOnButtonNode:cc.Node,agentOffButtonNode:cc.Node,policyOnButtonNode:cc.Node,policyOffButtonNode:cc.Node,agentContentNode:cc.Node,policyContentNode:cc.Node,agentItemPrefab:cc.Prefab,listAgentScrollView:cc.ScrollView},init:function(t){this.GameCenter=t},onLoad:function(){var t=this.GameCenter.getConfig();!0===t.SHOW_AGENT||"true"===t.SHOW_AGENT?this.showAgent():this.showPolicy(),this.initData()},initData:function(){this.listAgentScrollView.content.removeAllChildren(!0);var t=0,e=this.GameCenter.getListAgent();if(e)for(var i=0;i<e.length;i++)if(0===e[i].type){var o=cc.instantiate(this.agentItemPrefab);o.getComponent("AgentItem").init(this.GameCenter,t,e[i]),o.parent=this.listAgentScrollView.content,this.nickNameSelected===e[i].nick_name&&o.getComponent("AgentItem").showBgNode(),t++}},onAgentClick:function(){this.GameCenter.Audio.playClick(),this.showAgent()},onPolicyClick:function(){this.GameCenter.Audio.playClick(),this.showPolicy()},showAgent:function(){this.agentOnButtonNode.active=!0,this.agentOffButtonNode.active=!1,this.policyOnButtonNode.active=!1,this.policyOffButtonNode.active=!0,this.agentContentNode.active=!0,this.policyContentNode.active=!1},showPolicy:function(){this.agentOnButtonNode.active=!1,this.agentOffButtonNode.active=!0,this.policyOnButtonNode.active=!0,this.policyOffButtonNode.active=!1,this.policyContentNode.active=!0,this.agentContentNode.active=!1},showData:function(t){this.nickNameSelected=t;for(var e=this.listAgentScrollView.content.getChildren(),i=0;i<e.length;i++){e[i].getComponent("AgentItem").data.nick_name===t?e[i].getComponent("AgentItem").showBgNode():e[i].getComponent("AgentItem").hideBgNode()}},checkIsAgent:function(t){var e=this.GameCenter.getListAgent();if(e)for(var i=0;i<e.length;i++)if(t===e[i].nick_name)return!0;return!1},hideAllBgAgent:function(){for(var t=this.listAgentScrollView.content.getChildren(),e=0;e<t.length;e++)t[e].getComponent("AgentItem").hideBgNode()},initCapcha:function(){}}),cc._RF.pop()},{}],TransferContent:[function(t,e,i){"use strict";cc._RF.push(e,"55048JpUl9HroKSkZDJMts9","TransferContent");var o=t("../../../../util/BrowserUtil"),n=t("../../../../util/FormatUtil"),s=t("../../../../helper/Constant"),a=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{nicknameEditBox:cc.EditBox,reNicknameEditBox:cc.EditBox,valueEditBox:cc.EditBox,noteEditBox:cc.EditBox,otpEditBox:cc.EditBox,moneyLabel:cc.Label,moneyNeedLabel:cc.Label,rateAgentLabel:cc.Label,ratePlayerLabel:cc.Label,otpRichText:cc.RichText,smsButtonNode:cc.Node,otpButtonNode:cc.Node},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI,this.RechargeUseMoney=t.GameRecharge.RechargeUseMoney,this.TransferAgent=this.RechargeUseMoney.Transfer.TransferAgent},onLoad:function(){this.editboxs=[this.nicknameEditBox,this.reNicknameEditBox,this.valueEditBox,this.noteEditBox,this.otpEditBox],this.clear()},onEnable:function(){this.initData(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===s.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===s.ESC_KEY?(this.GameCenterUI.showGameNode(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},initData:function(){var t=this.GameCenter.getConfig().agent_transter_fee;this.rateAgentLabel.string=100*t+"%";var e=this.GameCenter.getConfig().player_transter_fee;this.ratePlayerLabel.string=100*e+"%",this.moneyNeedLabel.string=0,this.initMoney();var i=this.GameCenter.getGeneralConfig();if(i){var o=i.OTP_FORGOT_PASS;if(o){var n=o.content,s=o.service_number,r=String.format(a.TRANSFER_OTP,n,s);this.otpRichText.string=r}}},initMoney:function(){this.moneyLabel.string=n.numberWithCommas(this.GameCenter.getMoney())},onOTPClick:function(){this.smsButtonNode.active=!0,this.otpButtonNode.active=!1},onSMSClick:function(){this.smsButtonNode.active=!1,this.otpButtonNode.active=!0},onConfirmClick:function(){var t=this.nicknameEditBox.string,e=this.reNicknameEditBox.string,i=parseInt(n.getOnlyNumberInString(this.valueEditBox.string)),o=this.noteEditBox.string,r=this.otpEditBox.string;this.checkAllEditboxNotEmpty()?t===e?i>0?(t=t.replace(s.SERVER_ID_1_NAME,"").trim(),this.transfer(t,i,o,r)):this.GameCenter.showDialogMessage(a.TRANSFER_TITLE,a.VALUE_LARGER_ZERO):this.GameCenter.showDialogMessage(a.TRANSFER_TITLE,a.RE_NICKNAME_NOT_CORRECT):this.GameCenter.showDialogMessage(a.TRANSFER_TITLE,a.MISSING_INFO)},onGetOtpClick:function(){this.GameCenter.GameCenterUI.showOtpFormNode()},checkAllEditboxNotEmpty:function(){for(var t in this.editboxs)if(""===this.editboxs[t].string)return!1;return!0},transfer:function(t,e,i,o){this.GameCenter.showProcessingNode();var n={to_nickname:t,amount:e,reason:i,type_card:this.selectedCard,otp:o};this.GameCenter.sendRequest.sendToZone(s.REQUEST_TRANSFER,n)},onMoneyChange:function(){var t=this.valueEditBox.string,e=n.numberWithCommas(n.getOnlyNumberInString(t));this.valueEditBox.string=e;var i=this.nicknameEditBox.string,o=this.GameCenter.getConfig().player_transter_fee;this.TransferAgent.checkIsAgent(i)&&(o=this.GameCenter.getConfig().agent_transter_fee);var s=parseInt(n.getOnlyNumberInString(this.valueEditBox.string));s*=1-parseFloat(o),this.moneyNeedLabel.string=n.numberWithCommas(s)},onNickNameChange:function(){this.TransferAgent.showData(this.nicknameEditBox.string),this.onMoneyChange()},showData:function(t){this.nicknameEditBox.string=t,this.reNicknameEditBox.string=t,this.TransferAgent.showData(t),this.onMoneyChange()},clear:function(){this.nicknameEditBox.string="",this.reNicknameEditBox.string="",this.valueEditBox.string="",this.noteEditBox.string="",this.initData()},initCapcha:function(){}}),cc._RF.pop()},{"../../../../helper/Constant":"Constant","../../../../helper/Message":"Message","../../../../util/BrowserUtil":"BrowserUtil","../../../../util/FormatUtil":"FormatUtil"}],Transfer:[function(t,e,i){"use strict";cc._RF.push(e,"d4b3dGPryJFmIG36138rDlS","Transfer");var o=t("./tranfser/TransferAgent"),n=t("./tranfser/TransferContent");cc.Class({extends:cc.Component,properties:{backButtonNode:cc.Node,TransferAgent:o,TransferContent:n,useMoneyNode:cc.Node},init:function(t){this.GameCenter=t,this.TransferAgent.init(t),this.TransferContent.init(t)},onLoad:function(){},onEnable:function(){this.backButtonNode.active=!1},onDisable:function(){this.backButtonNode.active=!0},initCapcha:function(){},onBackClick:function(){this.GameCenter.GameRecharge.onBackClick()}}),cc._RF.pop()},{"./tranfser/TransferAgent":"TransferAgent","./tranfser/TransferContent":"TransferContent"}],TrenDuoiCard:[function(t,e,i){"use strict";cc._RF.push(e,"a6c798zoYNB/5yKohhgQmWt","TrenDuoiCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],TrenDuoiConstant:[function(t,e,i){"use strict";cc._RF.push(e,"aedc7R91fhMRLoC3Y5JIxWl","TrenDuoiConstant");e.exports={ADD_EVENT:"hilo.ADD_EVENT",REMOVE_EVENT:"hilo.REMOVE_EVENT",REQUEST_START:"hilo.START",REQUEST_CHOOSE:"hilo.CHOOSE",REQUEST_NEW_GAME:"hilo.NEW_GAME",PLAYER_INFO:"PLAYER_INFO",INFO:"INFO",RESULT:"RESULT",FINISH:"FINISH",MESSAGE:"MESSAGE",IS_SHOW:"tren_duoi_is_show",POSITION:"tren_duoi_position",BET_VALUE:"tren_duoi_bet_value",BET_1K:1e3,BET_5K:5e3,BET_10k:1e4,BET_50k:5e4,BET_100k:1e5,BET_500k:5e5,MONEY_TYPE:"tren_duoi_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"hilo.GET_TOP"},cc._RF.pop()},{}],TrenDuoiHistories:[function(t,e,i){"use strict";cc._RF.push(e,"d8b170hwuBNmor3sAZphQ0X","TrenDuoiHistories"),cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyTrenDuoiItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryTrenDuoi(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(Message.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyTrenDuoiItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("TrenDuoiHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{}],TrenDuoiHistoryCardItem:[function(t,e,i){"use strict";cc._RF.push(e,"9c8b1+2usJO2p68FYtOFtP4","TrenDuoiHistoryCardItem"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},init:function(t){this.card=t,this.node.getComponent(cc.Label).string=this.getResultByTrueValue(t)},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=" "+(e=11===(e=12===(e=13===(e=14===e?"A":e)?"K":e)?"Q":e)?"J":e),t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e+" "}}),cc._RF.pop()},{}],TrenDuoiHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"6d4ec+pcVVHboRaC+1Rryar","TrenDuoiHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_bet_value),this.resultLabel.string=this.getResultBySlotData(t.slot_data),this.getLabel.string=o.numberWithCommas(t.total_prize_value);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResultBySlotData:function(t){t=JSON.parse(t);var e="";for(var i in t){e+=" ",e+=this.getResultByTrueValue(t[i])}return e},getResultByTrueValue:function(t){var e=parseInt(t/100);switch(e=11===(e=12===(e=13===(e=14===e?"A":e)?"K":e)?"Q":e)?"J":e,t%4){case 0:e+="\u2660";break;case 1:e+="\u2663";break;case 2:e+="\u2665";break;case 3:e+="\u2666"}return e}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],TrenDuoiReel:[function(t,e,i){"use strict";cc._RF.push(e,"21d1a9uG0FHP7rr4pU66Bpk","TrenDuoiReel");var o=t("./TrenDuoiCard"),n=(t("../MiniGameConstant"),t("../../../util/RandomUtil")),s=t("../../../helper/Config"),a=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab},init:function(t){this.TrenDuoi=t,this.TrenDuoiUI=t.TrenDuoiUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.trueValue=null,this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.cardPrefab);this.pool.put(e)}this.randomCard()},spin:function(t,e,i,o){this.reset(),this.TrenDuoi.setSpining(!0),this.setCard(this.trueValue),this.trueValue=t,o||this.TrenDuoi.setPlaying(i.status);for(var n=1;n<e;n++){var r=t;n!=e-1&&(r=this.getRandomTrueValue());var c=this.instanceCard(r);c.setPosition(0,n*s.TRENDUOI_DISTANCE_TWO_CARD),c.parent=this.node}var h=(e-1)*s.TRENDUOI_DISTANCE_TWO_CARD*this.node.scaleY,l=h/s.TRENDUOI_SPEED_SPIN_CARD,u=cc.moveTo(l,this.node.x,-h).easing(cc.easeInOut(3)),d=cc.callFunc(function(){this.setCard(t),this.TrenDuoi.setSpining(!1),i&&this.TrenDuoi.node.active&&(o?(this.TrenDuoi.numberAt++,this.TrenDuoiUI.showNumberAt(this.TrenDuoi.numberAt),this.TrenDuoi.addHistoryCardNode(i.card)):(this.TrenDuoi.setPlaying(i.status),i.status?(this.TrenDuoi.checkAt(i.card)&&this.TrenDuoi.numberAt++,this.TrenDuoiUI.showNumberAt(this.TrenDuoi.numberAt),this.TrenDuoi.initBalance(i),this.TrenDuoi.initTime(i),this.TrenDuoi.addHistoryCardNode(i.card),i.total_prize_amount>0&&this.TrenDuoi.MiniGameResult.show(i.total_prize_amount)):this.TrenDuoi.showMessage(a.TRENDUOI_LOSE)))},this),m=cc.delayTime(s.TRENDUOI_DELAY_SPIN),p=cc.callFunc(function(){this.setCard(t),this.TrenDuoi.setSpining(!1),o?(this.TrenDuoi.setPlaying(!1),this.TrenDuoiUI.showJackPot(i.amount,this.TrenDuoi.isMoneyType),this.TrenDuoi.reset()):i.status||this.TrenDuoi.reset()},this);this.node.runAction(cc.sequence(u,d,m,p))},getRandomTrueValue:function(){return 100*n.getRandomInt(2,14)+n.getRandomInt(0,3)},randomCard:function(){var t=this.getRandomTrueValue();this.reset(),this.setCard(t)},setCard:function(t){this.trueValue=t;var e=this.instanceCard(t);e.setPosition(0,0),e.parent=this.node},instanceCard:function(t){var e=void 0;this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.cardPrefab));var i=e.getComponent("CardController"),n=new o(t);return i.init(n),i.reveal(!0),e.scale=s.TRENDUOI_SCALE_CARD,e.cardController=i,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../helper/Message":"Message","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./TrenDuoiCard":"TrenDuoiCard"}],TrenDuoiUI:[function(t,e,i){"use strict";cc._RF.push(e,"9de13ntGNlPwomOqgxq1lP5","TrenDuoiUI");t("./TrenDuoiConstant");var o=t("./TrenDuoiReel"),n=(t("./TrenDuoiCard"),t("../../../util/FormatUtil")),s=t("../../../util/RandomUtil"),a=t("../../../helper/Config");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,bet4Label:cc.Label,bet5Label:cc.Label,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOnButton4Node:cc.Node,betOffButton4Node:cc.Node,betOnButton5Node:cc.Node,betOffButton5Node:cc.Node,highButtonNode:cc.Node,lowButtonNode:cc.Node,atsNode:[cc.Node],playNode:cc.Node,cardNode:cc.Node,TrenDuoiReel:o,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?this.setBetMoney():this.setBetGold()},setBetMoney:function(){var t=a.TRENDUOI_LIST_BET_MONEY;this.setBetGoldByList(t[1],t[2],t[3],t[4],t[5])},setBetGold:function(){var t=a.TRENDUOI_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2],t[3],t[4])},setBetGoldByList:function(t,e,i,o,s){this.bet1Label.string=n.nFormatter(t),this.bet2Label.string=n.nFormatter(e),this.bet3Label.string=n.nFormatter(i),this.bet4Label.string=n.nFormatter(o),this.bet5Label.string=n.nFormatter(s)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet4Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOnButton4Node.active=!0,this.betOffButton5Node.active=!0},enableBet5Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0,this.betOffButton4Node.active=!0,this.betOnButton5Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1,this.betOnButton4Node.active=!1,this.betOffButton4Node.active=!1,this.betOnButton5Node.active=!1,this.betOffButton5Node.active=!1},showNumberAt:function(t){for(var e=0;e<this.atsNode.length;e++)this.atsNode[e].active=e<t},spinCard:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.cardNode.active=!0,this.playNode.active=!1,this.TrenDuoiReel.spin(t,a.TRENDUOI_NUMBER_CARDS_SPIN,e,i)},getRandomTrueValue:function(){return 100*s.getRandomInt(2,14)+s.getRandomInt(0,3)},showPlayNode:function(){this.cardNode.stopAllActions(),this.cardNode.active=!1,this.playNode.active=!0},showCardNode:function(){this.cardNode.active=!0,this.playNode.active=!1},showHighButton:function(){this.highButtonNode.active=!0},showHighDisable:function(){this.highButtonNode.active=!1},showLowButton:function(){this.lowButtonNode.active=!0},showLowDisable:function(){this.lowButtonNode.active=!1},reset:function(){this.showNumberAt(3),this.showPlayNode(),this.showHighButton(),this.showLowButton()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil","./TrenDuoiCard":"TrenDuoiCard","./TrenDuoiConstant":"TrenDuoiConstant","./TrenDuoiReel":"TrenDuoiReel"}],TrenDuoi:[function(t,e,i){"use strict";cc._RF.push(e,"54272eaJb9MpZioCRBUea7v","TrenDuoi");var o=t("../../../base/BaseController"),n=t("./TrenDuoiConstant"),s=t("./TrenDuoiUI"),a=t("./TrenDuoiReel"),r=t("../MiniGameResult"),c=t("../item/JackpotItem"),h=t("../../../helper/Config"),l=t("../../../helper/Constant"),u=t("../../../helper/Message"),d=t("../../../object/RoomType"),m=t("../../../util/FormatUtil"),p=t("../MiniGameConstant"),f=t("../item/MiniGameXPer");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,balanceLabel:cc.Label,highBalanceLabel:cc.Label,lowBalanceLabel:cc.Label,timeLabel:cc.Label,historyCardItemPrefab:cc.Prefab,historyCardNode:cc.Node,JackpotItem:c,toastPrefab:cc.Prefab,TrenDuoiUI:s,TrenDuoiReel:a,MiniGameResult:r,MiniGameXPer:f},init:function(t){this.controller=t},onLoad:function(){this._super(),this.data=null,this.isMoneyType=!0,this.betOrder=0,this.numberAt=0,this.playing=!1,this.spining=!1,this.TrenDuoiReel.init(this),this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onDestroy:function(){clearInterval(this.timeInterval)},onEnable:function(){this.initTempData(),this.sendRequest.sendNoPrefixToZone(n.ADD_EVENT)},onDisable:function(){this.destroyGame()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(n.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[n.MONEY_TYPE]===n.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initTempData:function(){switch(this.getTempData()[n.BET_VALUE]){case n.BET_5K:this.setBet1();break;case n.BET_10k:this.setBet2();break;case n.BET_50k:this.setBet3();break;case n.BET_100k:this.setBet4();break;case n.BET_500k:this.setBet5();break;default:this.setBet1()}},initSaveData:function(){var t=cc.sys.localStorage.getItem(n.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case n.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i);break;case n.PLAYER_INFO:this.handlePlayerInfo(i);break;case n.INFO:this.handleInfo(i);break;case n.RESULT:this.handleResult(i);break;case n.FINISH:this.handleFinish(i);break;case n.MESSAGE:this.handleMessage(o)}},handlePlayerInfo:function(t){this.setSendSpin(!1),this.data=t,this.initDefaultBalanceJackpot(),this.initLastData()},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleResult:function(t){this.setSendSpin(!1),this.isPlaying()||this.TrenDuoiUI.showNumberAt(0),this.initSpinId(t),this.TrenDuoiUI.spinCard(t.card,t,!1)},handleFinish:function(t){this.setSendSpin(!1),t.win_type===p.WIN_TYPE_JACKPOT?this.TrenDuoiUI.spinCard(t.card,t,!0):this.reset()},handleMessage:function(t){this.setSendSpin(!1),this.showMessage(t)},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:this.isMoneyType?d.MONEY_CODE:d.GOLD_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(n.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(l.TREN_DUOI)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showTrenDuoiHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(p.TREN_DUOI),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowTrenDuoi(!1)},onGoldClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_MONEY_TYPE):(this.isMoneyType?this.betOrder--:this.betOrder++,this.setTypeRoom(!this.isMoneyType))},onMoneyClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_MONEY_TYPE):(this.isMoneyType?this.betOrder--:this.betOrder++,this.setTypeRoom(!this.isMoneyType))},onBet1ButtonClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=this.isMoneyType?1:0;var t=this.isMoneyType?n.BET_5K:n.BET_1K;this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet1Button(),this.getTempData()[n.BET_VALUE]=t},onBet2ButtonClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=this.isMoneyType?2:1,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet2Button(),this.getTempData()[n.BET_VALUE]=n.BET_10k},onBet3ButtonClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=this.isMoneyType?3:2,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet3Button(),this.getTempData()[n.BET_VALUE]=n.BET_50k},onBet4ButtonClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_BET):this.setBet4()},setBet4:function(){this.betOrder=this.isMoneyType?4:3,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet4Button(),this.getTempData()[n.BET_VALUE]=n.BET_100k},onBet5ButtonClick:function(){this.isPlaying()?this.showMessage(u.PLAYING_NOT_CHANGE_BET):this.setBet5()},setBet5:function(){this.betOrder=this.isMoneyType?5:4,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.enableBet5Button(),this.getTempData()[n.BET_VALUE]=n.BET_500k},onHighClick:function(){if(this.isPlaying()){if(!this.isSendSpin()){this.setSendSpin(!0);this.sendRequest.sendNoPrefixToZone(n.REQUEST_CHOOSE,{choose_value:1}),this.TrenDuoiUI.showHighDisable(),this.TrenDuoiUI.showLowDisable()}}else this.showMessage(u.TRENDUOI_CLICK_PLAY)},onLowClick:function(){if(this.isPlaying()){if(!this.isSendSpin()){this.setSendSpin(!0);this.sendRequest.sendNoPrefixToZone(n.REQUEST_CHOOSE,{choose_value:0}),this.TrenDuoiUI.showHighDisable(),this.TrenDuoiUI.showLowDisable()}}else this.showMessage(u.TRENDUOI_CLICK_PLAY)},onPlayClick:function(){this.play()},play:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:this.isMoneyType?d.MONEY_CODE:d.GOLD_CODE,money_value:this.getCurrentBet()};this.TrenDuoiUI.showHighDisable(),this.TrenDuoiUI.showLowDisable(),this.sendRequest.sendNoPrefixToZone(n.REQUEST_START,t),this.MiniGameResult.reset()}},onNewGameClick:function(){this.isSpining()?this.showMessage(u.TRENDUOI_STOP_SPINING):this.isPlaying()?this.sendRequest.sendNoPrefixToZone(n.REQUEST_NEW_GAME):this.showMessage(u.TRENDUOI_CLICK_PLAY)},onTrenDuoiClick:function(){this.setShowTrenDuoi(!this.isShow)},setShowTrenDuoi:function(t){this.node.active=t,this.isShow=t,cc.sys.localStorage.setItem(n.IS_SHOW,this.isShow)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[6]?e[6]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},initDefaultBalanceJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]),this.balanceLabel.string=m.numberWithCommas(h.TRENDUOI_LIST_BET_MONEY[this.betOrder]);var i=e[6]?e[6]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.balanceLabel.string=m.numberWithCommas(h.TRENDUOI_LIST_BET_GOLD[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},initLastData:function(){if(this.data){this.playing=!0;var t=this.data.player_info;if(t&&t.card){var e=void 0;this.TrenDuoiUI.showCardNode(),this.TrenDuoiReel.setCard(t.card),t.money_type==d.MONEY_CODE?(this.setTypeRoom(!0),e=h.TRENDUOI_LIST_BET_MONEY):(this.setTypeRoom(!1),e=h.TRENDUOI_LIST_BET_GOLD);for(var i=0;i<e.length;i++)if(e[i]===t.spin_fee){switch(i){case 1:this.setBet1();break;case 2:this.setBet2();break;case 3:this.setBet3();break;case 4:this.setBet4();break;case 5:this.setBet5()}break}this.initBalance(t),this.initNumberAt(t),this.initTime(t),this.initSpinId(t),this.initHistoryCards(t)}else this.reset()}},initBalance:function(t){this.balanceLabel.string=m.numberWithCommas(t.total_prize_amount||t.amount),0!==t.prize_up?(this.highBalanceLabel.string=m.numberWithCommas(t.prize_up),this.TrenDuoiUI.showHighButton()):(this.highBalanceLabel.string=m.numberWithCommas(0),this.TrenDuoiUI.showHighDisable()),0!==t.prize_down?(this.lowBalanceLabel.string=m.numberWithCommas(t.prize_down),this.TrenDuoiUI.showLowButton()):(this.lowBalanceLabel.string=m.numberWithCommas(0),this.TrenDuoiUI.showLowDisable())},initNumberAt:function(t){var e=t.cards;this.numberAt=0;for(var i=0;i<e.length;i++)this.checkAt(e[i])&&this.numberAt++;this.TrenDuoiUI.showNumberAt(this.numberAt)},initSpinId:function(t){this.idLabel.string=String.format(u.MINIGAME_ID,t.spin_id)},initHistoryCards:function(t){this.historyCardNode.removeAllChildren(!0);for(var e=t.cards,i=0;i<e.length;i++)this.addHistoryCardNode(e[i])},addHistoryCardNode:function(t){this.historyCardNode.active=!0;var e=cc.instantiate(this.historyCardItemPrefab);e.getComponent("TrenDuoiHistoryCardItem").init(t),e.parent=this.historyCardNode},initTime:function(t){this.time=t.remain_time,this.time||(this.time=0),this.setTimeLabel(this.time),clearInterval(this.timeInterval),this.timeInterval=setInterval(function(){this.time-=1,this.time<0&&(this.time=0,clearInterval(this.timeInterval)),this.data&&(this.data.remain_time=this.time,this.setTimeLabel(this.time))}.bind(this),1e3)},setTimeLabel:function(t){var e=m.numberToTime(t);this.timeLabel.string=e},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=h.MINIGAME_SCALE_TOAST,e.setPosition(h.MINIGAME_POSITION_TOAST_X,h.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initDefaultBalanceJackpot(),this.TrenDuoiUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?n.MONEY_TYPE_MONEY:n.MONEY_TYPE_GOLD;this.getTempData()[n.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?h.TRENDUOI_LIST_BET_MONEY:h.TRENDUOI_LIST_BET_GOLD)[this.betOrder]},setPlaying:function(t){this.playing=t},isPlaying:function(){return this.playing},setSpining:function(t){this.spining=t},isSpining:function(){return this.spining},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},getNumberAt:function(){return this.numberAt},checkAt:function(t){return 14===parseInt(t/100)},reset:function(){this.highBalanceLabel.string="",this.lowBalanceLabel.string="",this.numberAt=0,this.playing=!1,this.spining=!1,this.balanceLabel.string=m.numberWithCommas(this.getCurrentBet()),clearInterval(this.timeInterval),this.setTimeLabel(0),this.historyCardNode.removeAllChildren(),this.historyCardNode.active=!1,this.MiniGameResult.reset(),this.TrenDuoiUI.reset()}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/FormatUtil":"FormatUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./TrenDuoiConstant":"TrenDuoiConstant","./TrenDuoiReel":"TrenDuoiReel","./TrenDuoiUI":"TrenDuoiUI"}],TutorialItem:[function(t,e,i){"use strict";cc._RF.push(e,"01fd29bClpN15/nE6BfFmba","TutorialItem"),cc.Class({extends:cc.Component,properties:{gameNameOnLabel:cc.Label,gameNameOffLabel:cc.Label,tutorialOnNode:cc.Node,tutorialOffNode:cc.Node},init:function(t,e){this.Tutorial=t,this.data=e,this.gameNameOnLabel.string=this.getGameName(),this.gameNameOffLabel.string=this.getGameName()},onLoad:function(){},select:function(t){this.tutorialOnNode.active=t,this.tutorialOffNode.active=!t},onClick:function(){this.Tutorial.unSelectAll(),this.select(!0),this.Tutorial.initDataSelect(this.data)},getShortName:function(){return this.data.short_name},getGameName:function(){return this.data.game_name||this.data.name},getHelp:function(){return this.data.help||this.data.value}}),cc._RF.pop()},{}],Tutorial:[function(t,e,i){"use strict";cc._RF.push(e,"3fa81ewTvNP26WdCU/2HF1Y","Tutorial");var o=t("../../base/BaseController"),n=t("../../helper/Constant"),s=t("../../helper/Message");cc.Class({extends:o,properties:{tutorialGameItemPrefab:cc.Prefab,listPolicyScrollView:cc.ScrollView,listGameScrollView:cc.ScrollView,titleLabel:cc.Label,contentScrollView:cc.ScrollView,contentRichText:cc.RichText,contentNode:cc.Node,miniBaCayContentNode:cc.Node,miniPokerContentNode:cc.Node,taiXiuContentNode:cc.Node,diamondContentNode:cc.Node,trenduoiContentNode:cc.Node,baucuaContentNode:cc.Node,vqmmContentNode:cc.Node,diamond2ContentNode:cc.Node,bomContentNode:cc.Node,wildContentNode:cc.Node},init:function(t){this.controller=t},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm"),this.listGameTutorial=[],this.listPolicyTutorial=[],this.initData()},onEnable:function(){cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog()}},isTop:function(){return this.controller.DialogMessage?!this.controller.DialogMessage.node.active&&!this.controller.Processing.node.active:!!this.controller.GameCommon&&(!this.controller.GameCommon.DialogMessage.node.active&&!this.controller.GameCommon.Processing.node.active)},initData:function(){this.listGameScrollView.content.removeAllChildren(!0),this.listPolicyScrollView.content.removeAllChildren(!0);var t=this.getGeneralConfig();if(t){var e=t.GUIDE;for(var i in e)if("Slot4"===e[i].short_name||e[i].short_name===n.ZOOMBIES||e[i].short_name===n.ONE001||e[i].short_name===n.TLMN||e[i].short_name===n.SAM||e[i].short_name===n.XITO||e[i].short_name===n.CHAN||e[i].short_name===n.PHOM||e[i].short_name===n.LIENG||e[i].short_name===n.XOC_DIA||e[i].short_name===n.SHOOTING_FISH||e[i].short_name===n.LONGVUONG||e[i].short_name===n.KEOBUABAO);else{e[i].short_name===n.TLMNSOLO&&(e[i].game_name="TLMN Solo"),e[i].short_name===n.TLMN&&(e[i].game_name="TLMN \u0110\u1ebfm L\xe1"),e[i].short_name===n.BOM&&(e[i].game_name="PUBG"),e[i].short_name===n.WILD&&(e[i].game_name="X\xe8ng Hoa Qu\u1ea3"),e[i].short_name===n.MODERN_SLOT&&(e[i].game_name="N\u1eef Ho\xe0ng Ai C\u1eadp"),e[i].short_name===n.DIAMOND&&(e[i].game_name="N\xf4ng tr\u1ea1i"),e[i].short_name===n.DRAGON&&(e[i].game_name="\u0110\xe0o V\xe0ng");var o=cc.instantiate(this.tutorialGameItemPrefab);o.parent=this.listGameScrollView.content;var s=o.getComponent("TutorialItem");s.init(this,e[i]),this.listGameTutorial.push(s)}var a=t.POLICY;for(var r in a){var c=cc.instantiate(this.tutorialGameItemPrefab);c.parent=this.listPolicyScrollView.content;var h=c.getComponent("TutorialItem");h.init(this,a[r]),this.listPolicyTutorial.push(h)}}},initDataSelect:function(t){this.hideAllContents(),t.short_name===n.DIAMOND?(this.diamondContentNode.active=!0,this.setTitle(s.DIAMOND)):t.short_name===n.MINI_BACAY?(this.miniBaCayContentNode.active=!0,this.setTitle(s.MINI_BACAY)):t.short_name===n.MINI_POKER?(this.miniPokerContentNode.active=!0,this.setTitle(s.MINI_POKER)):t.short_name===n.TAI_XIU?(this.taiXiuContentNode.active=!0,this.setTitle(s.TAI_XIU+" - Ch\u1eb5n L\u1ebb")):t.short_name===n.BAU_CUA?(this.baucuaContentNode.active=!0,this.setTitle(s.BAU_CUA)):t.short_name===n.TREN_DUOI?(this.trenduoiContentNode.active=!0,this.setTitle(s.TREN_DUOI)):t.short_name===n.LUCK_WHEEL?(this.vqmmContentNode.active=!0,this.setTitle(s.LUCK_WHEEL)):t.short_name===n.DIAMOND_2?(this.diamond2ContentNode.active=!0,this.setTitle(s.DIAMOND_2)):t.short_name===n.BOM?(this.bomContentNode.active=!0,this.setTitle(s.BOM)):t.short_name===n.WILD?(this.wildContentNode.active=!0,this.setTitle("X\xe8ng Hoa Qu\u1ea3")):(this.contentNode.active=!0,t.short_name===n.TLMNSOLO&&(t.game_name="Ti\u1ebfn L\xean Mi\u1ec1n Nam Solo"),t.short_name===n.TLMN&&(t.game_name="Ti\u1ebfn L\xean Mi\u1ec1n Nam \u0110\u1ebfm L\xe1"),t.short_name===n.MODERN_SLOT&&(t.game_name="N\u1eef Ho\xe0ng Ai C\u1eadp"),t.short_name===n.DRAGON&&(t.game_name="\u0110\xe0o V\xe0ng"),this.setTitle(t.game_name||t.name),this.setContent(t.help||t.value))},setTitle:function(t){this.titleLabel.string=t},setContent:function(t){t||(t=""),this.contentRichText.string=t,this.contentScrollView.stopAutoScroll(),this.contentScrollView.scrollToTop()},showTutorialByGameName:function(t){for(var e in this.listGameTutorial)if(this.listGameTutorial[e].getShortName()===t){this.listGameTutorial[e].onClick(!0);break}},unSelectAll:function(){for(var t in this.listGameTutorial)this.listGameTutorial[t].select(!1);for(var e in this.listPolicyTutorial)this.listPolicyTutorial[e].select(!1)},showDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.showDialog()},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},hideAllContents:function(){this.contentNode.active=!1,this.miniBaCayContentNode.active=!1,this.miniPokerContentNode.active=!1,this.taiXiuContentNode.active=!1,this.diamondContentNode.active=!1,this.baucuaContentNode.active=!1,this.trenduoiContentNode.active=!1,this.vqmmContentNode.active=!1,this.diamond2ContentNode.active=!1,this.bomContentNode.active=!1,this.wildContentNode.active=!1}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message"}],UpDownAnim:[function(t,e,i){"use strict";cc._RF.push(e,"340a0mnvRdJj4UdzcbyVlms","UpDownAnim"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onEnable:function(){this.node.y=0,this.direction=-1,this.is_pause=!0},onDisable:function(){this.is_pause=!1},update:function(t){if(this.is_show_effect&&this.is_pause){this.checkDirection();var e=this.node.opacity+this.direction*t*1e3;e>255&&(e=255),e<10&&(e=10),this.node.opacity=e}},checkDirection:function(){-1===this.direction&&this.node.opacity<=10&&(this.direction=1),1===this.direction&&this.node.opacity>=255&&(this.direction=-1)},showEffect:function(){this.is_show_effect=!0},hideEffect:function(){this.is_show_effect=!1,this.node.opacity=255}}),cc._RF.pop()},{}],UpdateAvatar:[function(t,e,i){"use strict";cc._RF.push(e,"0237eUzm0xEOItFwmCafyQh","UpdateAvatar");var o=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{avatarItemPrefab:cc.Prefab,listAvatarNode:cc.Node},init:function(t){this.GameCenter=t},onLoad:function(){this.listAvatar=[],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.listAvatarNode.removeAllChildren(!0),this.getListAvatars(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},removeEventKeyPress:function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.escape:this.isTop()&&this.dialogForm.hideDialog();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},getListAvatars:function(){var t=this.GameCenter.getConfig().list_avatar;this.initAvatars(t)},initAvatars:function(t){this.listAvatar=[];var e=this.listAvatarNode,i=this.GameCenter.getUser().avatar;for(var o in t){var n=cc.instantiate(this.avatarItemPrefab);e.addChild(n);var s=n.getComponent("AvatarItem");s.init(this.GameCenter,t[o]),i===t[o].content&&s.selectAvatar(!0),this.listAvatar.push(s)}},onConfirmClick:function(){if(this.GameCenter.Audio.playClick(),this.getSelectedAvatar()){var t=this.getSelectedAvatar().avatar;this.updateAvatar(t)}},getSelectedAvatar:function(){for(var t in this.listAvatar)if(this.listAvatar[t].isSelected())return this.listAvatar[t];return null},clearSelected:function(){for(var t in this.listAvatar)this.listAvatar[t].selectAvatar(!1)},updateAvatar:function(t){var e=this;this.GameCenter.showProcessingNode();var i={token:this.GameCenter.getToken(),user_id:this.GameCenter.getUserId(),avatar_id:t.id};this.GameCenter.api.updateAvatar(i,function(i){e.GameCenter.hideProcessingNode(),e.GameCenter.getUser().avatar=t.content,e.GameCenter.GameCenterUI.hideUpdateAvatarFormNode(),e.GameCenter.GameInfo.InfoAccount.loadUserInfo(),e.GameCenter.Header.HeaderAccount.loadUserInfo()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(o.UPDATE_AVATAR_TITLE,t.msg)})}}),cc._RF.pop()},{"../../../helper/Message":"Message"}],UpdateNickname:[function(t,e,i){"use strict";cc._RF.push(e,"8aa2bnGJu9DjLNXiOakiO5y","UpdateNickname");var o=t("../../../util/BrowserUtil"),n=t("../../../helper/Constant"),s=t("../../../helper/Message"),a=t("../../../util/Track"),r=t("../../../util/Util");cc.Class({extends:cc.Component,properties:{nicknameEditBox:cc.EditBox},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){this.editboxs=[this.nicknameEditBox],this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){this.clear(),cc.sys.isBrowser&&this.addEventKeyPress()},onDisable:function(){cc.sys.isBrowser&&this.removeEventKeyPress()},addEventKeyPress:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this);for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).addEventListener("keydown",this.keyHandle.bind(this),!1)}},removeEventKeyPress:function(){for(var t=0,e=this.editboxs.length;t<e;t++){o.getHTMLElementByEditBox(this.editboxs[t]).removeEventListener("keydown",this.keyHandle.bind(this),!1)}cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyPressed,this)},onKeyPressed:function(t){switch(t.keyCode){case cc.macro.KEY.tab:this.isTop()&&this.changeNextFocusEditBox();break;case cc.macro.KEY.enter:this.isTop()&&this.onConfirmClick()}},keyHandle:function(t){return t.keyCode===n.TAB_KEY?(this.changeNextFocusEditBox(),t.preventDefault&&t.preventDefault(),!1):t.keyCode===n.ENTER_KEY?(o.focusGame(),this.onConfirmClick(),t.preventDefault&&t.preventDefault(),!1):void 0},changeNextFocusEditBox:function(){if(this.isTop()){for(var t=!1,e=0,i=this.editboxs.length;e<i;e++)if(o.checkEditBoxFocus(this.editboxs[e])){e>=i&&(e=0),o.focusEditBox(this.editboxs[e]),t=!0;break}!t&&this.editboxs.length>0&&o.focusEditBox(this.editboxs[0])}},isTop:function(){return!this.GameCenter.DialogMessage.node.active&&!this.GameCenter.Processing.node.active},onConfirmClick:function(){this.GameCenter.Audio.playClick(),this.GameCenter.showProcessingNode();var t=this.nicknameEditBox.string,e=this.GameCenter.getUser().username;t?t===e?(this.GameCenter.hideProcessingNode(),this.GameCenter.showDialogMessage(s.SET_NICKNAME_TITLE,s.NICKNAME_DIFFERENT_USERNAME)):this.updateNickname(t):(this.GameCenter.hideProcessingNode(),this.GameCenter.showDialogMessage(s.SET_NICKNAME_TITLE,s.SET_NICKNAME_NICKNAME_NOT_EMPTY))},updateNickname:function(t){var e=this,i={token:this.GameCenter.getToken(),user_id:parseInt(this.GameCenter.getUserId()),nick_name:t};this.GameCenter.api.updateNickname(i,function(i){a.addTrackCompleteRegistration(),e.GameCenter.getUser().show_nickname=r.getShowNickName(t,n.SERVER_ID_1_NAME),e.GameCenterUI.hideUpdateNicknameFormNode(),e.GameCenter.connectSFS()},function(t){e.GameCenter.hideProcessingNode(),e.GameCenter.showDialogMessage(s.SET_NICKNAME_TITLE,t.msg)})},clear:function(){for(var t in this.editboxs)this.editboxs[t].string=""}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/Track":"Track","../../../util/Util":"Util"}],Util:[function(t,e,i){"use strict";cc._RF.push(e,"f16c6JoQyRF4K6Dg5F6k4k3","Util");var o=t("../helper/Constant"),n=t("../object/RoomType"),s={getVipByMoney:function(t){t=parseInt(t);for(var e=o.VIPS,i=e.length-1;i>=0;i--)if(t>e[i])return i+1;return 0},getVipBalance:function(t){var e=o.VIPS;return 0===t?0:e[t]},getShortNameTelcoByName:function(t){var e=cc.S.config.telco;if(e)for(var i in e)if(e[i].name===t)return e[i].short_name;return t},getShortNameRechargeProviderByName:function(t){var e=cc.S.config.recharge_provider;if(e)for(var i in e)if(e[i].name===t)return e[i].short_name;return t},getNameTelcoByShortName:function(t){var e=cc.S.config.telco;if(e)for(var i in e)if(e[i].short_name===t)return e[i].name;return t},getGameConfigByRoomName:function(t){for(var e=cc.S.config.list_game,i=0,o=e.length;i<o;i++)if(t===e[i].short_name)return e[i];return null},getGameNameByRoomName:function(t){for(var e=cc.S.config.list_game,i=0,o=e.length;i<o;i++)if(t===e[i].short_name)return e[i].game_name;return""},getRoomTypeByRoomTypeCode:function(t){switch(t+""){case n.MONEY_CODE:return o.MONEY_NAME;case n.GOLD_CODE:return o.GOLD_NAME;default:return""}},getShowNickName:function(t,e){if(t&&e){if(!(t.length>e.length))return e+t;if(t.substring(0,e.length)!=e)return e+t}return t},removeItemObjectInList:function(t,e){if(t&&e)for(var i=0,o=t.length;i<o;i++)JSON.stringify(t[i])==JSON.stringify(e)&&t.splice(i,1);return t},isLobbyRoom:function(t){return t===o.LOBBY||-1!==t.indexOf(o.LOBBY+"_")},isLobbyGame:function(t){return!this.isLobbySlot(t)&&!this.isLobbySlot2(t)&&!this.isLobbySlot3(t)&&!this.isLobbyRoom(t)&&!this.isLobbyLottery(t)&&t.indexOf(o.LOBBY)&&!this.isLobbyClassic1(t)&&!this.isLobbyModernSlot(t)>-1},isLobbyLongVuong:function(t){return t===o.SHOOTING_FISH+"_LOBBY"},isLobbyLongVuong2:function(t){return-1!==t.indexOf(o.SHOOTING_FISH)},isLobbySlot:function(t){return t===o.MODERN_SLOT+"_LOBBY"},isLobbySlot2:function(t){return t===o.ONE001+"_LOBBY"},isLobbySlot3:function(t){return t===o.DRAGON+"_LOBBY"},isLobbyClassic1:function(t){return t===o.CLASSIC1+"_LOBBY"},isLobbyModernSlot:function(t){return t===o.MODERN_SLOT+"_LOBBY"},isLobbyLottery:function(t){return t===o.LOTTERY+"_LOBBY"},getServerID:function(t){return t===o.SERVER_ID_1?o.SERVER_ID_1_NAME:t===o.SERVER_ID_2?o.SERVER_ID_2_NAME:""},getOrbitByUrl:function(t,e){cc.loader.loadRes(t,cc.JsonAsset,function(t,e){return e.json})},clearArray:function(t){if(t)for(;t.length>0;)t.pop()},getNameByGameName:function(t){switch(t){case o.MINI_BACAY:return"Mini 3 C\xe2y";case o.MINI_POKER:return"Mini Poker";case o.TAI_XIU:return"T\xe0i X\u1ec9u";case o.CHAN_LE:return"Ch\u1eb5n L\u1ebb";case o.TREN_DUOI:return"Tr\xean D\u01b0\u1edbi";case o.BAU_CUA:return"B\u1ea7u Cua";case o.LUCK_WHEEL:return"V\xf2ng Quay May M\u1eafn";case o.DIAMOND:return"N\xf4ng Tr\u1ea1i";case o.LONGVUONG:return"B\u1eafn C\xe1";case o.ZOOMBIES:return"ZOOMBIES";case o.ONE001:return"ONE001";case o.DRAGON:return"\u0110\xe0o V\xe0ng";case o.CLASSIC1:return"\u0110\xeam th\u01b0\u1ee3ng h\u1ea3i";case o.MODERN_SLOT:return"N\u1eef Ho\xe0ng Ai C\u1eadp";case o.PIRATE:case o.DIAMOND_2:return"H\u1ea3i T\u1eb7c";case o.LOTTERY:return"\u0110o\xe1n S\u1ed1";case o.DRAGON_TIGER:return"Long H\u1ed5";case o.BOM:return"Pubg";case o.WILD:return"X\xe8ng Hoa Qu\u1ea3";case o.BA_CAY:return"Ba C\xe2y";case o.XOC_DIA:return"X\xf3c \u0110\u0129a";case o.POKER:return"Poker";case o.TLMN:return"Ti\u1ebfn L\xean Mi\u1ec1n Nam";case o.TLMNSOLO:return"Ti\u1ebfn L\xean Mi\u1ec1n Nam Solo";case o.LIENG:return"Li\xeang";case o.MAU_BINH:return"M\u1eadu Binh";case o.SAM:return"S\xe2m";case o.SAMSOLO:return"S\xe2m Solo";case o.PHOM:return"Ph\u1ecfm";case o.XITO:return"X\xec T\u1ed1";case o.MINIGAME_XOCDIA:return"X\xf3c X\xf3c X\xf3c";default:return t}},loadImageBase64:function(t,e){var i=t,o=new Image;o.onload=function(){var t=new cc.Texture2D;t.initWithElement(o),t.handleLoadedTexture(),e.spriteFrame=new cc.SpriteFrame(t)},o.src=i}};e.exports=s,cc._RF.pop()},{"../helper/Constant":"Constant","../object/RoomType":"RoomType"}],VipAccount:[function(t,e,i){"use strict";cc._RF.push(e,"a001b3t2f9MJ4ID2RUUxjbj","VipAccount");t("../../../../helper/Constant");var o=t("../../../../util/FormatUtil"),n=t("../../../../helper/Config");cc.Class({extends:cc.Component,properties:{vipIconSprite:cc.Sprite,vipNameLabel:cc.Label,totalVipLabel:cc.Label,remainVipLabel:cc.Label,nextPointLabel:cc.Label,prizeLabel:cc.Label,contentScrolView:cc.ScrollView,vipItemPrefab:cc.Prefab,listVipSprite:[cc.SpriteFrame]},init:function(t){this.GameCenter=t,this.GameCenterUI=t.GameCenterUI},onLoad:function(){},onEnable:function(){this.initInfo()},initInfo:function(){this.contentScrolView.content.removeAllChildren();var t=this.GameCenter.getVip2Remain(),e=this.GameCenter.getVip2Total(),i=this.getVipPointData(e);this.vipIconSprite.spriteFrame=this.listVipSprite[i.position],this.vipNameLabel.string=i.vip_name,this.totalVipLabel.string=o.numberWithCommas(parseInt(e)),this.remainVipLabel.string=o.numberWithCommas(parseInt(t)),this.nextPointLabel.string=o.numberWithCommas(parseInt(i.next_point)),this.prizeLabel.string=o.numberWithCommas(parseInt(i.total_prize));for(var s=0,a=n.VIP_2_POINT.length;s<a;s++){var r={position:s,from_money:n.VIP_2_POINT[s],prize:n.VIP_2_RATE_TRANFER[s]};r.name="VIP "+(s+1),r.is_selected=s===i.position;var c=cc.instantiate(this.vipItemPrefab);c.getComponent("VipItem").init(r,s),this.contentScrolView.content.addChild(c)}},onInterestClick:function(){this.GameCenterUI.showInserestVipNode()},onAwardVipClick:function(){this.GameCenterUI.showAwardVipNode()},onRankClick:function(){this.GameCenterUI.showRankVip2Node()},getVipPointData:function(t){for(var e=n.VIP_2_POINT,i=0,o=0,s=0,a="",r=0,c=e.length;r<c;r++)if(t<e[r]){e[r-1]?(i=n.VIP_2_RATE_TRANFER[r-1],o=n.VIP_2_POINT[r]-t,s=r-1,a="VIP "+r):(i=n.VIP_2_RATE_TRANFER[0],o=n.VIP_2_POINT[1]-t,s=0,a="VIP "+r);break}return t>=e[e.length-1]&&(i=n.VIP_2_RATE_TRANFER[e.length-1],o=0,s=e.length-1,a="VIP "+e.length),{position:s,total_prize:i,next_point:o,vip_name:a}}}),cc._RF.pop()},{"../../../../helper/Config":"Config","../../../../helper/Constant":"Constant","../../../../util/FormatUtil":"FormatUtil"}],VipItem:[function(t,e,i){"use strict";cc._RF.push(e,"8207bpBt21JZ6JNMb/Gp85k","VipItem");t("../../helper/Constant");var o=t("../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,vipIconSprite:cc.Sprite,vipLabel:cc.Label,vipNameLabel:cc.Label,pointLabel:cc.Label,prizeLabel:cc.Label,successNode:cc.Node,vipSpriteFrame:[cc.SpriteFrame],onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame,lightSprite:cc.SpriteFrame},onLoad:function(){},init:function(t,e){if(t)if(this.vipIconSprite.spriteFrame=this.vipSpriteFrame[t.position],this.vipLabel.string=t.name,this.pointLabel.string=o.numberWithCommas(parseInt(t.from_money)),this.prizeLabel.string=o.numberWithCommas(parseInt(t.prize)),t.is_selected)this.bgSprite.spriteFrame=this.lightSprite;else{var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i}}}),cc._RF.pop()},{"../../helper/Constant":"Constant","../../util/FormatUtil":"FormatUtil"}],WildConstant:[function(t,e,i){"use strict";cc._RF.push(e,"4275abZGBRNIIJFRf9kic76","WildConstant");e.exports={REQUEST_MESSAGE:"MESSAGE",REQUEST_INFO:"INFO",REQUEST_SPIN:"SPIN",ADD_EVENT:"wild.ADD_EVENT",REMOVE_EVENT:"wild.REMOVE_EVENT",SPIN:"wild.SPIN",IS_SHOW:"wild_is_show",POSITION:"wild_position",LIST_LINES:"wild_list",IS_AUTO_SPIN:"wild_auto_spin",BET_VALUE:"wild_bet_value",SPEED_SPIN:"wild_speed_spin",BET_100:1e3,BET_1k:5e3,BET_10k:1e4,NUMBER_ITEM_IN_REEL:3,MONEY_TYPE:"wild_money_type",MONEY_TYPE_GOLD:"GOLD",MONEY_TYPE_MONEY:"MONEY",GET_TOP_2:"GET_TOP",GET_TOP:"wild.GET_TOP",MINIGAME_CONFIG_ID:53,WILD_LIST_ICON_1:["A","B","C","D","E","F","G"],WILD_LIST_ICON_2:["X1","X2","X3"],WILD_ICON_X1:"X1",WILD_ICON_X2:"X2",WILD_ICON_X3:"X3",LIST_SPEED_SPIN:[1,1.5],LIST_AUTO_SPIN:[10,50,100,200,500,1e3]},cc._RF.pop()},{}],WildEffect:[function(t,e,i){"use strict";cc._RF.push(e,"bb6b4yaazBN3qxd+WJsabk/","WildEffect"),cc.Class({extends:cc.Component,properties:{listEffectNode:[sp.Skeleton]},init:function(t){this.Wild=t},onLoad:function(){},onEnable:function(){},onDisable:function(){},showEffect:function(){for(var t in this.listEffectNode)this.listEffectNode[t].setAnimation(0,"animation",!0)},hideEffect:function(){for(var t in this.listEffectNode)this.listEffectNode[t].clearTracks(0)},reset:function(){}}),cc._RF.pop()},{}],WildHistories:[function(t,e,i){"use strict";cc._RF.push(e,"ff540DP/5dGEoXexbLbYxz3","WildHistories");var o=t("../../../../helper/Message");cc.Class({extends:cc.Component,properties:{loadingNode:cc.Node,moneyButtonNode:cc.Node,goldButtonNode:cc.Node,historyWildItemPrefab:cc.Prefab,historyScrollView:cc.ScrollView},init:function(t){this.controller=t},onLoad:function(){},onEnable:function(){this.data=null,this.onMoneyClick()},onDisable:function(){this.removeXhr()},onMoneyClick:function(){this.goldButtonNode.active=!0,this.moneyButtonNode.active=!1,this.loadData()},onGoldClick:function(){this.goldButtonNode.active=!1,this.moneyButtonNode.active=!0,this.loadData()},loadData:function(){var t=this;if(this.showLoadingNode(),this.historyScrollView.content.removeAllChildren(!0),this.data)this.initData();else{var e={token:this.controller.getToken(),user_id:this.controller.getUserId()};this.xhr=this.controller.api.getHistoryWild(e,function(e){t.data=e.data,t.initData()},function(e){t.showListNode(),t.controller.showDialogMessage(o.HISTORY_TITLE,e.msg)})}},initData:function(){if(this.showListNode(),this.data){var t=this.isMoneyType()?this.data[0]:this.data[1];for(var e in t){var i=cc.instantiate(this.historyWildItemPrefab);i.parent=this.historyScrollView.content,i.getComponent("WildHistoryItem").init(t[e],e)}}},getType:function(){return this.moneyOnButtonNode.active?0:1},isMoneyType:function(){return this.goldButtonNode.active},showLoadingNode:function(){this.loadingNode.active=!0,this.historyScrollView.node.active=!1},showListNode:function(){this.loadingNode.active=!1,this.historyScrollView.node.active=!0},removeXhr:function(){this.xhr&&(this.xhr.abort(),this.xhr=null)}}),cc._RF.pop()},{"../../../../helper/Message":"Message"}],WildHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"444a5DUEMRHMYST52QEbfyI","WildHistoryItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,idLabel:cc.Label,timeLabel:cc.Label,betLabel:cc.Label,resultLabel:cc.Label,getLabel:cc.Label,onBgSpriteFrame:cc.SpriteFrame,offSpriteFrame:cc.SpriteFrame},init:function(t,e){this.data=t,t.created_at>=1e10&&(t.created_at=parseInt(t.created_at/1e3)),this.idLabel.string=t.spin_id,this.timeLabel.string=o.getStringDateByTimeStamp(t.created_at),this.betLabel.string=o.numberWithCommas(t.total_bet_value),this.getLabel.string=o.numberWithCommas(t.total_prize_value),this.resultLabel.string=this.getResult(t.result);var i=e%2==0?this.onBgSpriteFrame:this.offSpriteFrame;this.bgSprite.spriteFrame=i},onLoad:function(){},getResult:function(t){if(!t)return"0 d\xf2ng";"]"===t[t.leng-1]&&"]"===t[t.leng-2]&&(t=t.substring(0,x.length-1));try{return(t=JSON.parse(t)).length+" d\xf2ng"}catch(t){return"0 d\xf2ng"}}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],WildItem:[function(t,e,i){"use strict";cc._RF.push(e,"849ffW95hZO8I5Os0oVXFNq","WildItem"),cc.Class({extends:cc.Component,properties:{iconANode:cc.Node,iconBNode:cc.Node,iconCNode:cc.Node,iconDNode:cc.Node,iconENode:cc.Node,iconFNode:cc.Node,iconGNode:cc.Node,x1SpriteNode:cc.Node,x2SpriteNode:cc.Node,x3SpriteNode:cc.Node},onLoad:function(){},init:function(t){switch(this.reset(),this.index=t,t){case"A":this.iconANode.active=!0;break;case"B":this.iconBNode.active=!0;break;case"C":this.iconCNode.active=!0;break;case"D":this.iconDNode.active=!0;break;case"E":this.iconENode.active=!0;break;case"F":this.iconFNode.active=!0;break;case"G":this.iconGNode.active=!0;break;case"X1":this.x1SpriteNode.active=!0;break;case"X2":this.x2SpriteNode.active=!0;break;case"X3":this.x3SpriteNode.active=!0}},reset:function(){this.iconANode.active=!1,this.iconBNode.active=!1,this.iconCNode.active=!1,this.iconDNode.active=!1,this.iconENode.active=!1,this.iconFNode.active=!1,this.iconGNode.active=!1,this.x1SpriteNode.active=!1,this.x2SpriteNode.active=!1,this.x3SpriteNode.active=!1}}),cc._RF.pop()},{}],WildReel2:[function(t,e,i){"use strict";cc._RF.push(e,"68e98AqCxNCKbAy0SNDHfyD","WildReel2");var o=t("../../../util/RandomUtil"),n=t("../../../helper/Config"),s=(t("../MiniGameConstant"),t("./WildConstant"));cc.Class({extends:cc.Component,properties:{wildItemPrefab:cc.Prefab},init:function(t){this.Wild=t,this.WildUI=t.WildUI,this.MiniGameResult=t.MiniGameResult},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.wildItemPrefab);this.pool.put(e)}this.randomChips(!0)},spin:function(t,e,i,o){this.reset(),this.setChips(this.chips),this.chips=t;for(var s=1;s<e;s++){var a=this.getRandomChip();s===e-1&&(a=t[0]),s===e-2&&(a=t[1]),s===e-3&&(a=t[2]);var r=this.instanceChip(a);r.setPosition(0,(s+1)*n.WILD_DISTANCE_TWO_CHIPS_2),r.parent=this.node}var c=(e-1)*n.WILD_DISTANCE_TWO_CHIPS_2,h=c/n.WILD_SPEED_SPIN_CARD/this.Wild.getSpeedSpin(),l=cc.moveTo(h,this.node.x,-c).easing(cc.easeInOut(3)),u=cc.callFunc(function(){this.setChips(t),i&&this.WildUI.setMoneyTotalPrize(o)},this),d=cc.delayTime(n.WILD_DELAY_SPIN_REEL_2),m=cc.callFunc(function(){this.Wild.spinReelsXper()},this);this.node.runAction(cc.sequence(l,u,d,m))},randomChips:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[],i=0;i<n.WILD_NUMBER_REELS;i++){var o=void 0;o=t?s.WILD_LIST_ICON_2[0]:this.getRandomChip(),e.push(o)}this.reset(),this.setChips(e)},getRandomChip:function(){var t=o.getRandomInt(0,s.WILD_LIST_ICON_2.length-1);return s.WILD_LIST_ICON_2[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*n.WILD_DISTANCE_TWO_CHIPS_2),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.wildItemPrefab)),e.getComponent("WildItem").init(t),e.scale=n.WILD_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./WildConstant":"WildConstant"}],WildReel:[function(t,e,i){"use strict";cc._RF.push(e,"45f7dAsCu9NCKuERMVcmDWb","WildReel");var o=t("../../../util/RandomUtil"),n=t("../../../helper/Config"),s=t("../MiniGameConstant"),a=t("./WildConstant");cc.Class({extends:cc.Component,properties:{wildItemPrefab:cc.Prefab},init:function(t){this.Wild=t,this.WildUI=t.WildUI,this.MiniGameResult=t.MiniGameResult,this.WildEffect=t.WildEffect},onLoad:function(){this.chips=[],this.pool=new cc.NodePool;for(var t=0;t<20;t++){var e=cc.instantiate(this.wildItemPrefab);this.pool.put(e)}this.randomChips()},spin:function(t,e,i,o,a,r,c,h){this.reset(),this.setChips(this.chips),this.chips=t;for(var l=1;l<e;l++){var u=this.getRandomChip();l===e-1&&(u=t[0]),l===e-2&&(u=t[1]),l===e-3&&(u=t[2]);var d=this.instanceChip(u);d.setPosition(0,(l+1)*n.WILD_DISTANCE_TWO_CHIPS),d.parent=this.node}var m=(e-1)*n.WILD_DISTANCE_TWO_CHIPS,p=m/n.WILD_SPEED_SPIN_CARD/this.Wild.getSpeedSpin(),f=cc.moveTo(p,this.node.x,-m).easing(cc.easeInOut(3)),g=cc.callFunc(function(){this.setChips(t),i&&this.Wild.node.active?a===s.WIN_TYPE_JACKPOT||c?this.WildUI.showJackPot(h,r):(this.WildUI.setMoneyTotalPrize(0),o&&(this.WildUI.setMoneyTotalPrize(o),this.showWillEffect())):i&&(a===s.WIN_TYPE_JACKPOT||c)&&(this.Wild.node.active=!0,this.WildUI.showJackPot(h,r))},this),_=void 0;_=this.Wild.node.active?cc.delayTime(n.WILD_DELAY_SPIN/this.Wild.getSpeedSpin()):cc.delayTime(n.WILD_DELAY_SPIN);var S=cc.callFunc(function(){i&&this.Wild.node.active?this.Wild.spinReelsXper():i&&!this.Wild.node.active&&(this.Wild.isAutoSpin()?this.Wild.spin():this.Wild.onStopAutoSpinClick())},this);this.node.runAction(cc.sequence(f,g,_,S))},randomChips:function(){for(var t=[],e=0;e<n.WILD_NUMBER_REELS;e++){var i=this.getRandomChip();t.push(i)}this.reset(),this.setChips(t)},getRandomChip:function(){var t=o.getRandomInt(0,a.WILD_LIST_ICON_1.length-1);return a.WILD_LIST_ICON_1[t]},setChips:function(t){if(t){this.putAllChipToPool(),this.node.setPosition(this.node.x,0),this.chips=t;for(var e=0;e<t.length;e++){var i=this.instanceChip(t[e]);i.setPosition(0,(1-e)*n.WILD_DISTANCE_TWO_CHIPS),i.parent=this.node}}},instanceChip:function(t){var e=void 0;return this.pool&&(e=this.pool.get()),e||(e=cc.instantiate(this.wildItemPrefab)),e.getComponent("WildItem").init(t),e.scale=n.WILD_SCALE_CHIP,e},putAllChipToPool:function(){if(this.pool){var t=this.node.getChildren(),e=[];for(var i in t)e.push(t[i]);for(var o in e)this.pool.put(e[o])}},showWillEffect:function(){this.WildEffect.node.active=!0,this.WildEffect.showEffect()},hideWillEffect:function(){this.WildEffect.hideEffect(),this.WildEffect.node.active=!1},reset:function(){this.node.stopAllActions(!0),this.node.setPosition(this.node.x,0),this.hideWillEffect(),this.putAllChipToPool()}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","./WildConstant":"WildConstant"}],WildSelectAutoSpinItem:[function(t,e,i){"use strict";cc._RF.push(e,"9df16PdoOdEkqeqLMkjdieL","WildSelectAutoSpinItem");var o=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{numberAutoSpinLabel:cc.Label},onLoad:function(){},init:function(t,e){this.WildSelectAutoSpin=t,this.numberAutoSpin=e,this.numberAutoSpinLabel.string=o.numberWithCommas(e)},onClick:function(){this.WildSelectAutoSpin.onItemClick(this.numberAutoSpin)},reset:function(){}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil"}],WildSelectAutoSpin:[function(t,e,i){"use strict";cc._RF.push(e,"4e6fa40HLREX7LNIOAa8an6","WildSelectAutoSpin");var o=t("./WildSelectAutoSpinItem"),n=t("./WildConstant");cc.Class({extends:cc.Component,properties:{listAutoSpinItem:[o]},init:function(t){this.Wild=t},onLoad:function(){for(var t in n.LIST_AUTO_SPIN)this.listAutoSpinItem[t]&&this.listAutoSpinItem[t].init(this,n.LIST_AUTO_SPIN[t])},onItemClick:function(t){this.Wild.selectNewAutoSpin(t),this.node.active=!1}}),cc._RF.pop()},{"./WildConstant":"WildConstant","./WildSelectAutoSpinItem":"WildSelectAutoSpinItem"}],WildUI:[function(t,e,i){"use strict";cc._RF.push(e,"fde45mepLRDzb8Vouv7m9xt","WildUI");var o=t("../../../util/FormatUtil"),n=t("../../../helper/Config"),s=t("../item/JackpotItem");cc.Class({extends:cc.Component,properties:{bet1Label:cc.Label,bet2Label:cc.Label,bet3Label:cc.Label,autoSpinLabel:cc.Label,speedSpinLabel:cc.Label,totalPrizeJackpotItem:s,betOnButton1Node:cc.Node,betOffButton1Node:cc.Node,betOnButton2Node:cc.Node,betOffButton2Node:cc.Node,betOnButton3Node:cc.Node,betOffButton3Node:cc.Node,betOn1Sprite:cc.Sprite,betOn2Sprite:cc.Sprite,betOn3Sprite:cc.Sprite,betMoneySpriteFrame:cc.SpriteFrame,betGoldSpriteFrame:cc.SpriteFrame,jackpotPrefab:cc.Prefab,jackpotNode:cc.Node,notifySpinFreeNode:cc.Node,notifySpinFreeLabel:cc.Label},onLoad:function(){},showJackPot:function(t,e){this.jackpotNode.removeAllChildren(!0);var i=cc.instantiate(this.jackpotPrefab);this.jackpotNode.addChild(i),i.getComponent("JackpotEffect").show(t,e),i.position=new cc.Vec2(0,0)},setBetByRoomType:function(t){t?(this.setBetMoney(),this.betOn1Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn2Sprite.spriteFrame=this.betMoneySpriteFrame,this.betOn3Sprite.spriteFrame=this.betMoneySpriteFrame):(this.setBetGold(),this.betOn1Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn2Sprite.spriteFrame=this.betGoldSpriteFrame,this.betOn3Sprite.spriteFrame=this.betGoldSpriteFrame)},setMoneyTotalPrize:function(t){0==t?this.totalPrizeJackpotItem.setMoneyWithoutAnimation(0):this.totalPrizeJackpotItem.setMoneyWithStartNumberZero(t)},setNumberAutoSpin:function(t){this.autoSpinLabel.string=t},setSpeedSpin:function(t){t=t>1?2:t,this.speedSpinLabel.string="x"+t},showMiniGameSpinFree:function(t){this.notifySpinFreeLabel.string=t,this.notifySpinFreeNode.active=!0},hideMiniGameSpinFree:function(){this.notifySpinFreeNode.active=!1},setBetMoney:function(){var t=n.WILD_LIST_BET_MONEY;this.setBetGoldByList(t[0],t[1],t[2])},setBetGold:function(){var t=n.WILD_LIST_BET_GOLD;this.setBetGoldByList(t[0],t[1],t[2])},setBetGoldByList:function(t,e,i){this.bet1Label.string=o.nFormatter(t),this.bet2Label.string=o.nFormatter(e),this.bet3Label.string=o.nFormatter(i)},enableBet1Button:function(){this.hideAllBetButtons(),this.betOnButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet2Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOnButton2Node.active=!0,this.betOffButton3Node.active=!0},enableBet3Button:function(){this.hideAllBetButtons(),this.betOffButton1Node.active=!0,this.betOffButton2Node.active=!0,this.betOnButton3Node.active=!0},hideAllBetButtons:function(){this.betOnButton1Node.active=!1,this.betOffButton1Node.active=!1,this.betOnButton2Node.active=!1,this.betOffButton2Node.active=!1,this.betOnButton3Node.active=!1,this.betOffButton3Node.active=!1}}),cc._RF.pop()},{"../../../helper/Config":"Config","../../../util/FormatUtil":"FormatUtil","../item/JackpotItem":"JackpotItem"}],Wild:[function(t,e,i){"use strict";cc._RF.push(e,"8e05csP/DpB/4mPqVZjEUAE","Wild");var o=t("../../../base/BaseController"),n=t("./WildUI"),s=t("./WildConstant"),a=t("./WildReel"),r=t("./WildReel2"),c=t("./WildEffect"),h=t("./WildSelectAutoSpin"),l=t("../MiniGameResult"),u=t("../item/JackpotItem"),d=t("../../../helper/Config"),m=t("../../../helper/Constant"),p=t("../../../helper/Message"),f=t("../../../object/RoomType"),g=t("../MiniGameConstant"),_=t("../item/MiniGameXPer"),S=t("../../../util/RandomUtil");cc.Class({extends:o,properties:{idLabel:cc.Label,moneyNode:cc.Node,goldNode:cc.Node,JackpotItem:u,toastPrefab:cc.Prefab,autoSpinButtonNode:cc.Node,stopAutoSpinButtonNode:cc.Node,spinButtonNode:cc.Node,reels:[a],reels2:[r],WildEffect:c,WildSelectAutoSpin:h,WildUI:n,MiniGameResult:l,MiniGameXPer:_},init:function(t){this.controller=t,this.MiniGameCircleNotification=t.MiniGame.MiniGameCircleNotification},onLoad:function(){for(var t in this._super(),this.data=null,this.betOrder=1,this.intervalSpin=null,this.WildEffect.init(this),this.WildSelectAutoSpin.init(this),this.reels)this.reels[t].init(this);for(var e in this.reels2)this.reels2[e].init(this);this.initTypeRoom(),this.setTypeRoom(this.isMoneyType),this.reset(),this.initData()},onEnable:function(){this.removeIntervalSpin(),this.initTempData(),this.sendRequest.sendNoPrefixToZone(s.ADD_EVENT)},onDisable:function(){this.destroyGame()},onDestroy:function(){this.removeIntervalSpin()},destroyGame:function(){this.reset(),this.sendRequest.sendNoPrefixToZone(s.REMOVE_EVENT)},initData:function(){this.initSaveData(),this.initTempData()},initTypeRoom:function(){this.isMoneyType=!0,this.getTempData()[s.MONEY_TYPE]===s.MONEY_TYPE_GOLD&&(this.isMoneyType=!1)},initSaveData:function(){var t=cc.sys.localStorage.getItem(s.POSITION);t&&(t=JSON.parse(t),this.positionX=t.x,this.positionY=t.y)},initTempData:function(){var t=this.getTempData(),e=this.getUser(),i=t[s.IS_AUTO_SPIN],o=t[s.BET_VALUE],n=t[s.SPEED_SPIN],a=e.wild_free;switch(i?(this.setAutoSpin(i),this.showStopAutoSpinNode(),clearTimeout(this.timeOutSpin),this.timeOutSpin=setTimeout(function(){this.spin()}.bind(this),1500)):this.setAutoSpin(0),n?this.setSpeedSPin(n):this.setSpeedSPin(s.LIST_SPEED_SPIN[0]),o){case s.BET_100:this.setBet1();break;case s.BET_1k:this.setBet2();break;case s.BET_10k:this.setBet3();break;default:this.setBet1()}this.initMiniGameNotification(i,a)},initMiniGameNotification:function(t,e){this.MiniGameCircleNotification&&(!this.node.active&&t?(this.initIntervalSpin(),e&&e>0?this.MiniGameCircleNotification.initShowNotificationWild(!0,e):this.MiniGameCircleNotification.initShowNotificationWild(!0,"\u25ba")):this.MiniGameCircleNotification.initShowNotificationWild(!1,""))},initMiniGameSpinFree:function(t){for(var e in t){var i=t[e].minigame_config_id,o=t[e].quantity;i===s.MINIGAME_CONFIG_ID&&(o>0?this.WildUI.showMiniGameSpinFree(o):this.WildUI.hideMiniGameSpinFree())}},handleRequest:function(t){var e=t.game_cmd,i=t.game_data,o=t.game_msg;switch(e){case s.REQUEST_INFO:this.handleInfo(i);break;case s.REQUEST_SPIN:this.handleSpin(i);break;case s.REQUEST_MESSAGE:this.handleMessage(o);break;case s.GET_TOP_2:this.controller.MiniGame.GameMiniRank.initDataTop(i)}},handleInfo:function(t){this.setSendSpin(!1),this.data=t,this.initJackpot()},handleMessage:function(t){this.setSendSpin(!1),this.removeIntervalSpin(),this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.showMessage(t),this.onStopAutoSpinClick()},handleSpin:function(t){this.setSendSpin(!1);var e=t.result,i=t.slot_data,o=t.total_prize_value,n=t.win_type,s=t.spin_id,a=t.is_jackpot;this.idLabel.string=String.format(p.MINIGAME_ID,s),this.reels2[0].randomChips(!0),this.spinReels(i,o,e,n,!0,a),this.minusAutoSpin()},spinReels:function(t,e,i,o,n,a){this.listDataReelXper=[],this.totalPrizeWithoutXper=0;var r=this.getDataDisplay(s.WILD_LIST_ICON_1,t[0]),c=this.getDataDisplay(s.WILD_LIST_ICON_1,t[1]),h=this.getDataDisplay(s.WILD_LIST_ICON_1,t[2]),l=t[3],u=t[4],m=t[5];l&&this.listDataReelXper.push(l),u&&this.listDataReelXper.push(u),m&&this.listDataReelXper.push(m),this.totalPrizeWithoutXper=this.getMoneyPrizeWithoutXper(e),this.reels[0].spin(r,d.WILD_NUMBER_CHIP_SPIN),this.reels[1].spin(c,d.WILD_NUMBER_CHIP_SPIN+3),this.reels[2].spin(h,d.WILD_NUMBER_CHIP_SPIN+6,!0,this.totalPrizeWithoutXper,o,n,a,e)},spinReelsXper:function(){if(this.listDataReelXper&&this.listDataReelXper.length>0){var t=this.listDataReelXper.splice(0,1)[0],e=this.getXperBySlotData(t);this.totalPrizeWithoutXper=this.totalPrizeWithoutXper*e;var i=this.getDataDisplay(s.WILD_LIST_ICON_2,t);this.reels2[0].spin(i,d.WILD_NUMBER_CHIP_SPIN,!0,this.totalPrizeWithoutXper)}else this.isAutoSpin()?this.spin():this.onStopAutoSpinClick()},getMoneyPrizeWithoutXper:function(t){if(this.listDataReelXper&&this.listDataReelXper.length>0){var e=1;for(var i in this.listDataReelXper)this.listDataReelXper[i]===s.WILD_ICON_X1&&(e*=1),this.listDataReelXper[i]===s.WILD_ICON_X2&&(e*=2),this.listDataReelXper[i]===s.WILD_ICON_X3&&(e*=3);t=parseInt(t/e)}return t},getXperBySlotData:function(t){var e=1;switch(t){case s.WILD_ICON_X1:e=1;break;case s.WILD_ICON_X2:e=2;break;case s.WILD_ICON_X3:e=3}return e},onAutoSpinClick:function(){this.WildSelectAutoSpin.node.active=!this.WildSelectAutoSpin.node.active},selectNewAutoSpin:function(t){this.setAutoSpin(t),this.showStopAutoSpinNode(),this.isSpinning()||this.spin()},showStopAutoSpinNode:function(){this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!0,this.spinButtonNode.active=!1},onStopAutoSpinClick:function(){this.autoSpinButtonNode.active=!0,this.stopAutoSpinButtonNode.active=!1,this.spinButtonNode.active=!0,this.WildSelectAutoSpin.node.active=!1,this.setAutoSpin(0)},onSpeedSpinClick:function(){for(var t=this.getSpeedSpin(),e=s.LIST_SPEED_SPIN,i=0,o=e.length;i<o;i++)t==e[i]&&(i===e.length-1?this.setSpeedSPin(e[0]):this.setSpeedSPin(e[i+1]))},onSpinClick:function(){this.isSpinning()||this.spin()},spin:function(){if(!this.isSendSpin()){this.setSendSpin(!0);var t={money_type:f.MONEY_CODE,money_value:this.getCurrentBet()};this.sendRequest.sendNoPrefixToZone(s.SPIN,t),this.MiniGameResult.reset()}},onHelpClick:function(){this.controller.Tutorial.showDialog(),this.controller.Tutorial.showTutorialByGameName(m.WILD)},onHistoriesClick:function(){this.controller.MiniGame.GameMiniHistory.showWildHistories(),this.controller.MiniGame.GameMiniHistory.showDialog()},onRankClick:function(){this.controller.MiniGame.GameMiniRank.setMiniGameName(g.WILD),this.controller.MiniGame.GameMiniRank.showDialog()},onCloseClick:function(){this.setShowWild(!1)},onGoldClick:function(){this.isAutoSpin()?this.showMessage(p.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onMoneyClick:function(){this.isAutoSpin()?this.showMessage(p.AUTO_SPIN_NOT_CHANGE_MONEY_TYPE):this.setTypeRoom(!this.isMoneyType)},onBet1ButtonClick:function(){this.isAutoSpin()?this.showMessage(p.AUTO_SPIN_NOT_CHANGE_BET):this.setBet1()},setBet1:function(){this.betOrder=0,this.initJackpot(),this.WildUI.enableBet1Button(),this.getTempData()[s.BET_VALUE]=s.BET_100},onBet2ButtonClick:function(){this.isAutoSpin()?this.showMessage(p.AUTO_SPIN_NOT_CHANGE_BET):this.setBet2()},setBet2:function(){this.betOrder=1,this.initJackpot(),this.WildUI.enableBet2Button(),this.getTempData()[s.BET_VALUE]=s.BET_1k},onBet3ButtonClick:function(){this.isAutoSpin()?this.showMessage(p.AUTO_SPIN_NOT_CHANGE_BET):this.setBet3()},setBet3:function(){this.betOrder=2,this.initJackpot(),this.WildUI.enableBet3Button(),this.getTempData()[s.BET_VALUE]=s.BET_10k},setSpeedSPin:function(t){this.speed_spin=t,this.WildUI.setSpeedSpin(t),this.getTempData()[s.SPEED_SPIN]=t},getSpeedSpin:function(){return this.speed_spin},minusAutoSpin:function(){this.auto_spin&&this.auto_spin>0?(this.auto_spin--,this.setAutoSpin(this.auto_spin)):this.setAutoSpin(0)},setAutoSpin:function(t){this.auto_spin=t,this.WildUI.setNumberAutoSpin(t),this.getTempData()[s.IS_AUTO_SPIN]=t},getAutoSpin:function(){return this.auto_spin},onWildClick:function(){this.setShowWild(!this.isShow)},setShowWild:function(t){this.node.active=t,this.isShow=t;var e=this.getUser().wild_free;cc.sys.localStorage.setItem(s.IS_SHOW,this.isShow),this.initMiniGameNotification(this.isAutoSpin(),e)},initIntervalSpin:function(){this.removeIntervalSpin(),this.intervalSpin=setInterval(function(){this.spin()}.bind(this),2e3*d.WILD_TIME_SPIN)},removeIntervalSpin:function(){clearInterval(this.intervalSpin)},initJackpot:function(){if(this.data){var t=this.data.gold,e=this.data.money;if(this.isMoneyType){this.JackpotItem.setMoney(e[this.betOrder]);var i=e[3]?e[3]:null;i&&this.MiniGameXPer.setXMiniGame(i[this.betOrder])}else this.JackpotItem.setMoney(t[this.betOrder]),this.MiniGameXPer.setXMiniGame(1)}},showMessage:function(t){var e=cc.instantiate(this.toastPrefab);e.scale=d.MINIGAME_SCALE_TOAST,e.setPosition(d.MINIGAME_POSITION_TOAST_X,d.MINIGAME_POSITION_TOAST_Y),e.parent=this.node,e.getComponent("Toast").showToast(t)},setTypeRoom:function(t){this.isMoneyType=t,this.moneyNode.active=t,this.goldNode.active=!t,this.initJackpot(),this.WildUI.setBetByRoomType(this.isMoneyType);var e=this.isMoneyType?s.MONEY_TYPE_MONEY:s.MONEY_TYPE_GOLD;this.getTempData()[s.MONEY_TYPE]=e},getCurrentBet:function(){return(this.isMoneyType?d.WILD_LIST_BET_MONEY:d.WILD_LIST_BET_GOLD)[this.betOrder]},getDataDisplay:function(t,e){for(var i=[],o=0,n=s.NUMBER_ITEM_IN_REEL;o<n;o++)if(1===o)i.push(e);else{var a=S.getRandomInt(0,t.length-1);i.push(t[a])}return i},isSpinning:function(){return cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels[0].node)>0||cc.director.getActionManager().getNumberOfRunningActionsInTarget(this.reels2[0].node)>0},isAutoSpin:function(){return this.auto_spin>0},setSendSpin:function(t){this.is_send_spin=t},isSendSpin:function(){return this.is_send_spin},reset:function(){clearTimeout(this.timeOutSpin),this.MiniGameResult.reset()},dataTest1:function(){var t={bonus_prize:0,is_jackpot:!1,result:{}};return t.result.icon="E",t.result.prize=3,t.result.quantity=2,t.slot_data=[],t.slot_data[0]="E",t.slot_data[1]="G",t.slot_data[2]="A",t.slot_data[3]="X2",t.slot_data[4]="X3",t.spin_id="9",t.total_prize_value=18e3,t.win_type=1,t},dataTest2:function(){var t={bonus_prize:0,is_jackpot:!1,result:{}};return t.result.icon="E",t.result.prize=3,t.result.quantity=2,t.slot_data=[],t.slot_data[0]="E",t.slot_data[1]="G",t.slot_data[2]="A",t.slot_data[3]="X1",t.slot_data[4]="X3",t.slot_data[5]="X2",t.spin_id="9",t.total_prize_value=9e3,t.win_type=1,t},dataTest3Jackpot:function(){var t={bonus_prize:0,is_jackpot:!0,result:{}};return t.result.icon="E",t.result.prize=3,t.result.quantity=2,t.slot_data=[],t.slot_data[0]="E",t.slot_data[1]="G",t.slot_data[2]="A",t.slot_data[3]="X1",t.slot_data[4]="X3",t.spin_id="9",t.total_prize_value=9e3,t.win_type=4,t}}),cc._RF.pop()},{"../../../base/BaseController":"BaseController","../../../helper/Config":"Config","../../../helper/Constant":"Constant","../../../helper/Message":"Message","../../../object/RoomType":"RoomType","../../../util/RandomUtil":"RandomUtil","../MiniGameConstant":"MiniGameConstant","../MiniGameResult":"MiniGameResult","../item/JackpotItem":"JackpotItem","../item/MiniGameXPer":"MiniGameXPer","./WildConstant":"WildConstant","./WildEffect":"WildEffect","./WildReel":"WildReel","./WildReel2":"WildReel2","./WildSelectAutoSpin":"WildSelectAutoSpin","./WildUI":"WildUI"}],WinEffect:[function(t,e,i){"use strict";cc._RF.push(e,"3283difYeZDUZ37b3qklXZq","WinEffect");var o=t("../../helper/Config");cc.Class({extends:cc.Component,properties:{textLabel:cc.Label},onLoad:function(){},show:function(t){this.textLabel.string=t,this.node.opacity=0,this.node.scale=1.5,this.node.runAction(cc.sequence(cc.spawn(cc.scaleTo(.1,1),cc.fadeIn(.1)),cc.delayTime(o.WIN_EFFECT_TIME_OUT),cc.spawn(cc.scaleTo(.1,1.5),cc.fadeOut(.1)),cc.callFunc(function(){this.node.removeFromParent(!0)},this)))}}),cc._RF.pop()},{"../../helper/Config":"Config"}],XiToBetState:[function(t,e,i){"use strict";cc._RF.push(e,"d8b59lxQppPiJEUs+czF8EE","XiToBetState");e.exports={NO:"NO",CHECK:"CHECK",CALL:"CALL",RAISE:"RAISE",ALL_IN:"ALL_IN",FOLD:"FOLD"},cc._RF.pop()},{}],XiToCard:[function(t,e,i){"use strict";cc._RF.push(e,"8f4dbduF+JBeYnO4x+MH6jz","XiToCard");var o=cc.Enum({Spade:1,Club:2,Heart:3,Diamon:4}),n="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function s(t){var e=parseInt(t/100),i=t%4;this.trueValue=100*e+i,this.value=e,this.type=i;var s=e,a=++i;s=14===s?1:s,Object.defineProperties(this,{point:{value:s,writable:!1},suit:{value:a,writable:!1},id:{value:13*(a-1)+(s-1),writable:!1},pointName:{get:function(){return n[this.point]}},suitName:{get:function(){return o[this.suit]}},isBlackSuit:{get:function(){return 1===this.suit||2===this.suit}},isRedSuit:{get:function(){return 3===this.suit||4===this.suit}}})}s.prototype.toString=function(){return this.suitName+" "+this.pointName},e.exports=s,cc._RF.pop()},{}],XiToConfig:[function(t,e,i){"use strict";cc._RF.push(e,"9d880Tm0IxPVbe5caJWbt5q","XiToConfig");e.exports={NUMBER_CARDS_EACH_PLAYERS:2,NUMBER_CARDS_TABLE:5,NUMBER_PLAYERS:6,SCALE_CARD:.7,DISTANCE_TWO_CARDS:45,TIME_SHOW_CARDS:.5,POSITION_CARDS_DEALDER_X:0,POSITION_CARDS_DEALDER_Y:150,SCALE_CARD_DEALDER:.7,SCALE_CARD_IN_TABLE:1.25,POSITION_CARD_1_X:-80,POSITION_CARD_2_X:80,POSITION_CENTER_MONEY_X:0,POSITION_CENTER_MONEY_Y:75,TIME_MOVE_BALANCE_CENTER:.5,POSITION_PLAYER_RESULT_X:185,POSITION_PLAYER_RESULT_Y:-75},cc._RF.pop()},{}],XiToConstant:[function(t,e,i){"use strict";cc._RF.push(e,"930da2ykfdPiZDgNBWAmo7o","XiToConstant");e.exports={COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",SELECT_CARD_HIDE:"SELECT_CARD_HIDE",PLAYER_PLAY:"PLAYER_PLAY",PLAYER_BET:"PLAYER_BET",BUY_IN:"BUY_IN",RESULT:"RESULT",BET:"BET",PREFLOP:"PREFLOP",FLOP:"FLOP",TURN:"TURN",RIVER:"RIVER",FOLD:"FOLD",CHECK:"CHECK",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",REQUEST_SELECT_CARD_HIDE:"REQUEST_SELECT_CARD_HIDE",ADD_PLAYER:"ADD_PLAYER",REQUEST_CHECK:"REQUEST_CHECK",REQUEST_ALL_IN:"REQUEST_ALL_IN",REQUEST_CALL:"REQUEST_CALL",REQUEST_FOLD:"REQUEST_FOLD",REQUEST_RAISE:"REQUEST_RAISE",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_BUY_IN:"REQUEST_BUY_IN"},cc._RF.pop()},{}],XiToGroupCardsType:[function(t,e,i){"use strict";cc._RF.push(e,"123010ZTXZI8Y47tARvq5/i","XiToGroupCardsType");e.exports={KHONG_HOP_LE:"KHONG_HOP_LE",THUNG_PHA_SANH:"THUNG_PHA_SANH",TU_QUY:"TU_QUY",CU_LU:"CU_LU",THUNG:"THUNG",SANH:"SANH",SAM:"SAM",THU:"THU",DOI:"DOI",BAI_CAO:"BAI_CAO"},cc._RF.pop()},{}],XiToHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"aff4f3sZn1Mk7vEUIFp2uDF","XiToHandlerEffect");var o=t("./XiToConfig"),n=t("./XiToBetState"),s=t("../../helper/Message"),a={init:function(t){this.XiTo=t,this.XiToUI=t.XiToUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers},dealCards:function(t){for(var e in this.listPlayers)this.listPlayers[e].isItMe?this.listPlayers[e].XiToPlayer.showCards(t,!0):this.listPlayers[e].XiToPlayer.showBackCards(!0)},startGame:function(t){var e=t.data.cards;this.XiToUI.hideAllButtons(),this.XiTo.myPlayer.XiToPlayer.showCards(e),this.XiTo.XiToSelectCard.showCards(e)},playerSelectCard:function(t){var e=t.data.card,i=t.data.user_id,o=this.XiTo.getPlayerByUserId(i);o&&(o.isItMe?(this.XiTo.XiToSelectCard.node.active=!1,this.XiTo.myPlayer.XiToPlayer.selectCard(e)):(o.XiToPlayer.showBackCards(!0),o.XiToPlayer.addCard(e)))},addCard:function(t){var e=t.data.cards;for(var i in e){var o=this.XiTo.getPlayerByUserId(e[i].user_id);o&&o.XiToPlayer.addCard(e[i].card)}},showEffectCollectMoney:function(t){var e=t.data.bet_amount;this.XiToUI.showTotalChip(e);for(var i=0,o=this.listPlayers.length;i<o;i++)this.listPlayers[i].XiToPlayer.moveToCenterTable()},showEffectWinCenterBalance:function(t){var e=cc.instantiate(this.XiTo.chipPrefab);e.parent=this.XiTo.gameNode,e.setPosition(o.POSITION_CENTER_MONEY_X,o.POSITION_CENTER_MONEY_Y),e.getComponent("Balance").init(this.XiTo.isMoneyType),e.runAction(cc.sequence(cc.moveTo(o.TIME_MOVE_BALANCE_CENTER,t.node.getPosition()),cc.callFunc(function(){e.removeFromParent(!0)},this))),this.XiToUI.showTotalChip(0)},handlePlayingPlayer:function(t){this.stopCountDownAllPlayers();var e=t.data.playing_player||t.data,i=e.user_id,o=e.balance,n=e.min_bet,s=this.XiTo.getPlayerByUserId(i);s&&(s.isItMe?(this.XiToUI.showAllButtons(),this.displayButtons(o,n),n>0?this.GameCommon.setMinMaxBetForm(n,o):this.GameCommon.setMinMaxBetForm(this.XiTo.minBet,o)):this.XiToUI.hideAllButtons(),this.XiTo.startCountDownPlayer(s,t.time_remain,t.time))},showResult:function(t){var e=t.data.players;for(var i in this.GameCommon.BetForm.hideDialog(!1),this.XiToUI.hideAllButtons(),e){var o=e[i].money_change,n=e[i].user_id,s=e[i].cards,a=e[i].type,r=this.XiTo.getPlayerByUserId(n);r&&(r.BasePlayer.showChangeBalance(o,!0),r.XiToPlayer.isFold()||r.BasePlayer.showEffectByChangeBalance(o),r.XiToPlayer.showEffectByGroupCardsType(a),r.isItMe&&o>0&&this.GameCommon.Audio.playWin(),s&&r.XiToPlayer.showCards(s),o>0&&this.XiToUI.getTotalChip()>0&&this.showEffectWinCenterBalance(r))}},displayButtons:function(t,e){this.XiToUI.showAllButtons(),this.XiToUI.setAllInLabelValue(0),this.XiToUI.setCallLabelValue(0),e>0?(this.XiToUI.hideCheckButton(),this.XiToUI.setCallLabelValue(e)):this.XiToUI.hideCallButton(),e>=t?(this.XiToUI.hideCallButton(),this.XiToUI.hideRaiseButton(),this.XiToUI.hideCheckButton(),this.XiToUI.setAllInLabelValue(t)):this.XiToUI.setCallLabelValue(e)},resetPlayerNameAllPlayers:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].XiToPlayer.isFold()||this.listPlayers[t].BasePlayer.hideText()},resetPlayerNameAllPlayersCheck:function(){for(var t=0,e=this.listPlayers.length;t<e;t++)this.listPlayers[t].BasePlayer.textLightLabel.string===s.XITO_CHECK&&this.listPlayers[t].BasePlayer.hideText()},setPlayerStatusByBetState:function(t,e){e===n.CHECK?t.XiToPlayer.showEffectCheck():e===n.ALL_IN?t.XiToPlayer.showEffectAllIn():e===n.FOLD&&t.XiToPlayer.showEffectFold()},setRoomMasterPlayer:function(t){this.clearRoomMasterAllPlayers();var e=this.XiTo.getPlayerByUserId(t);e&&e.BasePlayer.setRoomMaster(!0)},clearRoomMasterAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRoomMaster(!1)},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()}};e.exports=a,cc._RF.pop()},{"../../helper/Message":"Message","./XiToBetState":"XiToBetState","./XiToConfig":"XiToConfig"}],XiToHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"56647HcsMpFx71sAh1PZE/P","XiToHandlerRequest");var o=t("./XiToConstant"),n=t("../../helper/Constant"),s={XiTo:null,init:function(t){this.XiTo=t,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.XiTo.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.BALANCE:this.XiTo.initBalance(e)}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.COUNT_DOWN:this.XiTo.handleCountDown(e);break;case o.START_GAME:this.XiTo.handleStartGame(e);break;case o.SELECT_CARD_HIDE:this.XiTo.handleSelectCardHide(e);break;case o.PLAYER_PLAY:this.XiTo.handlePlayerPlay(e);break;case o.BET:this.XiTo.handlePlayerBet(e);break;case o.FLOP:this.XiTo.handlePlayerFlop(e);break;case o.TURN:this.XiTo.handlePlayerTurn(e);break;case o.RIVER:this.XiTo.handlePlayerRiver(e);break;case o.FOLD:this.XiTo.handlePlayerFold(e);break;case o.CHECK:this.XiTo.handlePlayerCheck(e);break;case o.BUY_IN:this.XiTo.handlePlayerBuyIn(e);break;case o.RESULT:this.XiTo.handleResult(e);break;case o.PLAYERS_LEFT_ROOM:this.XiTo.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.XiTo.handlePlayersRequestLeftRoom(e);break;case o.ADD_PLAYER:this.XiTo.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else this.XiTo.showToast(e.msg)}};e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","./XiToConstant":"XiToConstant"}],XiToPlayer:[function(t,e,i){"use strict";cc._RF.push(e,"e4baaG1th9Mzbt4TmakxIZP","XiToPlayer");var o=t("./XiToConfig"),n=t("./XiToGroupCardsType"),s=t("./XiToCard"),a=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardBackPrefab:cc.Prefab,cardsNode:cc.Node},onLoad:function(){},showCards:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(var i in this.cardsNode.removeAllChildren(!0),t){var n=new s(t[i]),a=cc.instantiate(this.cardPrefab);a.trueValue=t[i],a.scale=o.SCALE_CARD,a.parent=this.cardsNode;var r=a.getComponent("CardController");r.init(n),e?(a.setPosition(0,0),r.revealWithAnimationFlipMoveScale(!0,o.TIME_SHOW_CARDS,o.DISTANCE_TWO_CARDS*i,0,o.SCALE_CARD)):(r.reveal(!0),a.setPosition(o.DISTANCE_TWO_CARDS*i,0))}},selectCard:function(t){var e=this.cardsNode.getChildren();for(var i in e)t===e[i].trueValue?e[i].getComponent("CardController").hideDarkEffect():e[i].getComponent("CardController").showDarkEffect()},selectCard2:function(t){var e=this.cardsNode.getChildren();for(var i in e)t===e[i].trueValue?e[i].getComponent("CardController").showDarkEffect():e[i].getComponent("CardController").hideDarkEffect()},addCard:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new s(t),n=cc.instantiate(this.cardPrefab);n.trueValue=t,n.scale=o.SCALE_CARD;var a=n.getComponent("CardController");a.init(i),n.setPosition(o.DISTANCE_TWO_CARDS*this.cardsNode.getChildren().length,0),e?a.revealWithAnimationFlip(!0,o.TIME_SHOW_CARDS):a.reveal(!0),n.parent=this.cardsNode},showBackCards:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.cardsNode.removeAllChildren(!0);var e=cc.instantiate(this.cardBackPrefab);e.parent=this.cardsNode,e.scale=o.SCALE_CARD,t?(e.setPosition(0,0),e.runAction(cc.moveTo(o.TIME_SHOW_CARDS,0,0))):e.setPosition(0,0)},moveToCenterTable:function(){var t=this.node.getComponent("BasePlayer").betNode;if(t.active){t.stopAllActions(),t.opacity=255;var e=o.POSITION_CENTER_MONEY_X-this.node.x,i=o.POSITION_CENTER_MONEY_Y-this.node.y;t.runAction(cc.sequence(cc.moveTo(.5,e,i),cc.callFunc(function(){t.active=!1},this)))}},showEffectAllIn:function(){this.node.getComponent("BasePlayer").showTextLight(a.XITO_ALL_IN)},showEffectCheck:function(){this.node.getComponent("BasePlayer").showTextLight(a.XITO_CHECK)},showEffectCall:function(){this.node.getComponent("BasePlayer").showTextLight(a.XITO_CALL)},showEffectFold:function(){this.fold=!0,this.node.getComponent("BasePlayer").showTextDark(a.XITO_FOLD)},showEffectByGroupCardsType:function(t){var e="";switch(t){case n.THUNG_PHA_SANH:e=a.XITO_THUNG_PHA_SANH;break;case n.TU_QUY:e=a.XITO_TU_QUY;break;case n.CU_LU:e=a.XITO_CU_LU;break;case n.THUNG:e=a.XITO_THUNG;break;case n.SANH:e=a.XITO_SANH;break;case n.SAM:e=a.XITO_SAM;break;case n.THU:e=a.XITO_THU;break;case n.DOI:e=a.XITO_DOI;break;case n.BAI_CAO:e=a.XITO_BAI_CAO}e&&this.node.getComponent("BasePlayer").showTextLight(e,!1,new cc.Vec2(o.POSITION_PLAYER_RESULT_X,o.POSITION_PLAYER_RESULT_Y))},isFold:function(){return this.fold},reset:function(){this.fold=!1,this.cardsNode.removeAllChildren(!0)}}),cc._RF.pop()},{"../../helper/Message":"Message","./XiToCard":"XiToCard","./XiToConfig":"XiToConfig","./XiToGroupCardsType":"XiToGroupCardsType"}],XiToSelectCard:[function(t,e,i){"use strict";cc._RF.push(e,"b2dc8JL51RE5KUnpnM039w/","XiToSelectCard");var o=t("../../../ui/button/ButtonHover"),n=t("../XiToCard"),s=t("../XiToConfig"),a=t("../XiToConstant");cc.Class({extends:cc.Component,properties:{cardPrefab:cc.Prefab,cardsNode:cc.Node},init:function(t){this.XiTo=t},onLoad:function(){},showCards:function(t){this.cardsNode.removeAllChildren(!0),this.node.active=!0;var e=this.instanceCard(t[0]),i=this.instanceCard(t[1]);e.x=s.POSITION_CARD_1_X,i.x=s.POSITION_CARD_2_X},onDisable:function(){this.cardsNode.removeAllChildren(!0)},instanceCard:function(t){var e=this,i=cc.instantiate(this.cardPrefab);i.scale=s.SCALE_CARD_IN_TABLE,i.trueValue=t,i.parent=this.cardsNode;var r=i.getComponent("CardController"),c=new n(t);return r.init(c),i.cardController=r,i.addComponent(o),i.on(cc.Node.EventType.TOUCH_END,function(){var t={card:this.trueValue};e.XiTo.sendRequest.send(a.REQUEST_SELECT_CARD_HIDE,t)},i),i}}),cc._RF.pop()},{"../../../ui/button/ButtonHover":"ButtonHover","../XiToCard":"XiToCard","../XiToConfig":"XiToConfig","../XiToConstant":"XiToConstant"}],XiToState:[function(t,e,i){"use strict";cc._RF.push(e,"ed471CvZR1AdK/tAfJ/1KFl","XiToState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",PLAYING:"PLAYING",FINISH:"FINISH",init:function(t){this.XiTo=t},setState:function(t){this.currentState=t,this.initShowBuyInButton()},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP,this.initShowBuyInButton()},setWaiting:function(){this.currentState=this.WAITING,this.initShowBuyInButton()},setPlaying:function(){this.currentState=this.PLAYING,this.initShowBuyInButton()},setFinish:function(){this.currentState=this.FINISH,this.initShowBuyInButton()},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isPlaying:function(){return this.currentState===this.PLAYING},isFinish:function(){return this.currentState===this.FINISH},initShowBuyInButton:function(){this.isStop()||this.isWaiting()?this.XiTo.GameCommon.showBuyInButton():this.XiTo.GameCommon.hideBuyInButton()}},cc._RF.pop()},{}],XiToUI:[function(t,e,i){"use strict";cc._RF.push(e,"9b3aanF0klPNJzi9toi9+pq","XiToUI");var o=t("../../util/FormatUtil"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{totalChipNode:cc.Node,totalChipLabel:cc.Label,callLabel:cc.Label,allInLabel:cc.Label,raiseButton:cc.Node,callButton:cc.Node,foldButton:cc.Node,allInButton:cc.Node,checkButton:cc.Node,selectCardsNode:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showTotalChip:function(t){this.totalChip=t,this.totalChipNode.active=!0,this.totalChipLabel.string=t>0?o.numberWithCommas(t):0},hideTotalChip:function(){this.totalChipNode.active=!1},getTotalChip:function(){return this.totalChip},setCallLabelValue:function(t){this.callLabel.string=t>0?String.format(n.LIENG_BET_TEXT,n.LIENG_CALL,o.numberWithCommas(t)):n.LIENG_CALL},setAllInLabelValue:function(t){this.allInLabel.string=t>0?String.format(n.LIENG_BET_TEXT,n.LIENG_ALL_IN,o.numberWithCommas(t)):n.LIENG_ALL_IN},showRaiseButton:function(){this.raiseButton.active=!0},hideRaiseButton:function(){this.raiseButton.active=!1},showCallButton:function(){this.callButton.active=!0},hideCallButton:function(){this.callButton.active=!1},showCheckButton:function(){this.checkButton.active=!0},hideCheckButton:function(){this.checkButton.active=!1},showFoldButton:function(){this.foldButton.active=!0},hideFoldButton:function(){this.foldButton.active=!1},showAllInButton:function(){this.allInButton.active=!0},hideAllInButton:function(){this.allInButton.active=!1},hideAllButtons:function(){this.hideFoldButton(),this.hideCheckButton(),this.hideCallButton(),this.hideRaiseButton(),this.hideAllInButton()},showAllButtons:function(){this.showFoldButton(),this.showCheckButton(),this.showCallButton(),this.showRaiseButton(),this.showAllInButton()},reset:function(){this.totalChip=0,this.hideTotalChip(),this.hideAllButtons()}}),cc._RF.pop()},{"../../helper/Message":"Message","../../util/FormatUtil":"FormatUtil"}],XiTo:[function(t,e,i){"use strict";cc._RF.push(e,"79bf1tZpdNCIqPqL/27mBur","XiTo");var o=t("../../base/BaseController"),n=t("./XiToConstant"),s=t("./XiToConfig"),a=t("./XiToUI"),r=t("./XiToState"),c=t("./XiToHandlerRequest"),h=t("./XiToHandlerEffect"),l=t("./XiToBetState"),u=t("./other/XiToSelectCard"),d=t("../../prefab/GameCommon"),m=t("../../helper/Constant"),p=t("../../helper/Message"),f=t("../../object/RoomType");cc.Class({extends:o,properties:{chipPrefab:cc.Prefab,cardPrefab:cc.Prefab,gameNode:cc.Node,iconSprite:cc.Sprite,moneySpriteFrame:cc.SpriteFrame,goldSpriteFrame:cc.SpriteFrame,XiToSelectCard:u,XiToUI:a,GameCommon:d},onLoad:function(){this._super(),this.setSceneName(m.SCENE_GAME_XiTo),this.sfsManager.setController(this),this.myPosition=0,this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[m.MIN_BET].value),this.roomType=parseInt(this.room.variables[m.ROOM_TYPE].value),this.isMoneyType=this.roomType==f.MONEY_CODE,this.iconSprite.spriteFrame=this.isMoneyType?this.moneySpriteFrame:this.goldSpriteFrame,this.playersNode=this.XiToUI.playersNode,this.isMoneyType||this.XiToUI.disableAllPlaceHolder(),this.XiToConstant=n,this.XiToConfig=s,this.XiToState=r,this.XiToState.init(this),this.XiToHandlerRequest=c,this.XiToHandlerRequest.init(this),this.XiToHandlerEffect=h,this.XiToHandlerEffect.init(this),this.XiToSelectCard.init(this),this.GameCommon.init(this),this.GameCommon.BetForm.setRound(this.minBet/2),this.GameCommon.BetForm.setHideWhenClick(!0),this.GameCommon.BuyInForm.setRound(this.minBet/2),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.XiToHandlerRequest.onPublicMessage.bind(this.XiToHandlerRequest),this.onRoomVarsUpdate=this.XiToHandlerRequest.onRoomVarsUpdate.bind(this.XiToHandlerRequest),this.onUserVarsUpdate=this.XiToHandlerRequest.onUserVarsUpdate.bind(this.XiToHandlerRequest),this.onResponse=this.XiToHandlerRequest.onResponse.bind(this.XiToHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a),a.active=!1}this.initMyPositionByListPlayers(i,n),this.initMyPositionByListPlayers(o,n),this.initPlayersByListPlayers(i),this.initPlayersByListPlayers(o)},initMyPositionByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i],this.myPosition=t[i].position):t[i].isItMe=!1},initPlayersByListPlayers:function(t){for(var e in t)this.initPlayer(t[e])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.position;(i-=this.myPosition)<0&&(i+=s.NUMBER_PLAYERS),t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer"),n=t.node.getComponent("XiToPlayer");t.BasePlayer=o,t.XiToPlayer=n,o.reset(),n.reset(),o.setAvatar(t.avatar),o.setRoomMaster(!1),o.setRequestLeftRoom(t.request_left_room),o.setPlayerName(t.nick_name),o.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state;this.XiToState.setState(e),this.XiToState.isStop()?this.reset():this.XiToState.isWaiting()?this.resumeStateWaiting(t):this.XiToState.isPlaying()?this.resumeStatePlaying(t):this.XiToState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.reset(),this.XiToHandlerEffect.startCountDownAllPlayers(t)},resumeStatePlaying:function(t){var e=t.data.players,i=t.data.bet_amount,o=t.data.turn_state;for(var s in e){var a=e[s].user_id,r=e[s].bet_amount,c=e[s].bet_state,h=e[s].cards,l=e[s].card_hide,u=this.getPlayerByUserId(a);if(u)if(r>0&&u.BasePlayer.showBetNodeWithoutAnimation(r),this.XiToHandlerEffect.setPlayerStatusByBetState(u,c),u.isItMe)this.myPlayer.XiToPlayer.showCards(h,!1),l?this.myPlayer.XiToPlayer.selectCard2(l):this.XiToSelectCard.showCards(h);else for(var d in u.XiToPlayer.showBackCards(!1),h)u.XiToPlayer.addCard(h[d],!1)}this.XiToUI.showTotalChip(i),o===n.PREFLOP?this.XiToHandlerEffect.startCountDownAllPlayers(t):this.XiToHandlerEffect.handlePlayingPlayer(t)},resumeStateFinish:function(t){var e=t.data.players,i=t.data.bet_amount;for(var o in e){var n=e[o].user_id,s=e[o].bet_amount,a=e[o].bet_state,r=e[o].money_change,c=e[o].cards,h=e[o].type,l=this.getPlayerByUserId(n);l&&(s>0&&l.BasePlayer.showBetNodeWithoutAnimation(s),l.BasePlayer.showChangeBalance(r),l.BasePlayer.showEffectByChangeBalance(r),this.XiToHandlerEffect.setPlayerStatusByBetState(l,a),c&&c.length>0&&l.XiToPlayer.showCards(c,!1),l.XiToPlayer.showEffectByGroupCardsType(h))}this.XiToUI.showTotalChip(i),this.XiToUI.hideAllButtons()},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.XiToHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initBalance:function(t){var e=t.variables.user_id.value;if(t.variables.balance){var i=t.variables.balance.value,o=this.getPlayerByUserId(e);o&&o.BasePlayer.setBalance(i)}},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.XiToState.setWaiting(),this.GameCommon.hideWaitingNode(),this.XiToHandlerEffect.startCountDownAllPlayers(t)):(this.XiToState.setStop(),this.XiToHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){this.XiToState.setPlaying(),this.XiToHandlerEffect.startGame(t),this.XiToHandlerEffect.startCountDownAllPlayers(t)},handleSelectCardHide:function(t){this.XiToHandlerEffect.playerSelectCard(t)},handlePlayerPlay:function(t){t.data.bet_state===l.CHECK&&this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.handlePlayingPlayer(t)},handlePlayerBet:function(t){var e=t.data.user_id,i=t.data.bet_amount_round,o=t.data.is_all_in,n=this.getPlayerByUserId(e);n&&(n.BasePlayer.hideText(),n.BasePlayer.showChangeBalance(-i),i>0&&n.BasePlayer.showBetNode(i),o&&n.XiToPlayer.showEffectAllIn()),this.XiToHandlerEffect.stopCountDownAllPlayers()},handlePlayerFlop:function(t){this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.addCard(t),this.XiToHandlerEffect.handlePlayingPlayer(t),this.XiToHandlerEffect.showEffectCollectMoney(t)},handlePlayerTurn:function(t){this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.addCard(t),this.XiToHandlerEffect.handlePlayingPlayer(t),this.XiToHandlerEffect.showEffectCollectMoney(t)},handlePlayerRiver:function(t){this.XiToHandlerEffect.resetPlayerNameAllPlayersCheck(),this.XiToHandlerEffect.addCard(t),this.XiToHandlerEffect.handlePlayingPlayer(t),this.XiToHandlerEffect.showEffectCollectMoney(t)},handlePlayerFold:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.XiToPlayer.showEffectFold()},handlePlayerCheck:function(t){var e=t.data.user_id,i=this.getPlayerByUserId(e);i&&i.XiToPlayer.showEffectCheck()},handleResult:function(t){this.XiToState.setFinish(),this.XiToHandlerEffect.stopCountDownAllPlayers(),this.XiToHandlerEffect.resetPlayerNameAllPlayers(),this.XiToHandlerEffect.showResult(t),this.setViewersToPlayers()},handlePlayerBuyIn:function(t){var e=t.data.min_balance,i=t.data.max_balance;this.GameCommon.BuyInForm.setMinValue(e),this.GameCommon.BuyInForm.setMaxValue(i),this.GameCommon.BuyInForm.showDialog()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.XiToState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.XiToHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(p.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(p.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onAllInClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_ALL_IN)},onCheckClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_CHECK)},onRaiseClick:function(){this.GameCommon.Audio.playClick(),this.GameCommon.BetForm.showDialog()},onCallClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_CALL)},onFoldClick:function(){this.GameCommon.Audio.playClick(),this.sendRequest.send(n.REQUEST_FOLD)},onBetConfirmClick:function(){this.GameCommon.Audio.playClick();var t={bet_amount:this.GameCommon.BetForm.getBalanceSlider()};this.sendRequest.send(n.REQUEST_RAISE,t),this.GameCommon.BetForm.hideDialog()},onBuyInConfirmClick:function(){this.GameCommon.Audio.playClick();var t=this.GameCommon.BuyInForm.getBalanceSlider(),e=this.GameCommon.BuyInForm.isBuyIn(),i={balance:parseInt(t),is_auto_buy_in:e};this.sendRequest.send(n.REQUEST_BUY_IN,i),this.GameCommon.BuyInForm.hideDialog()},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(this.util.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},reset:function(){for(var t in this.GameCommon.BetForm.hideDialog(!1),this.XiToUI.reset(),this.listPlayers)this.listPlayers[t].BasePlayer.reset(),this.listPlayers[t].XiToPlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","./XiToBetState":"XiToBetState","./XiToConfig":"XiToConfig","./XiToConstant":"XiToConstant","./XiToHandlerEffect":"XiToHandlerEffect","./XiToHandlerRequest":"XiToHandlerRequest","./XiToState":"XiToState","./XiToUI":"XiToUI","./other/XiToSelectCard":"XiToSelectCard"}],XocDiaChip:[function(t,e,i){"use strict";cc._RF.push(e,"7e5beqxukdL0al5xDBKtKs0","XocDiaChip");var o=t("../XocDiaConfig");cc.Class({extends:cc.Component,properties:{chipSprite:cc.Sprite,chipSpriteFrames:[cc.SpriteFrame]},init:function(t,e){this.chip=t;var i=this.getSpriteFrameByChip(t,e);i&&(this.chipSprite.spriteFrame=i)},onLoad:function(){},getSpriteFrameByChip:function(t,e){var i=o.X_MY_CHIPS;for(var n in i)if(i[n]*e===t)return this.chipSpriteFrames[n];return null}}),cc._RF.pop()},{"../XocDiaConfig":"XocDiaConfig"}],XocDiaConfig:[function(t,e,i){"use strict";cc._RF.push(e,"6bac7dV3iBPxZVXbUe52E3x","XocDiaConfig");e.exports={MAX_PLAYERS:9,NUMBER_ROWS:6,NUMBER_COLS:29,NUMBER_CELL_SMALL_1:80,NUMBER_CELL_SMALL_2:36,X_MY_CHIPS:[1,5,20,50,100],TIME_SELECT_CHIP:.15,TIME_MOVE_CHIP:.35,TIME_RETURN_CHIP:.5,TIME_SHAKE_PLATE:.05,TIME_SHOW_COIN:2.5,TIME_MOVE_MY_CHIP:.2,TIME_DELAY_AFTER_SHOW_RESULT:1,SCALE_CHIP_IN_DOOR:.5,SCALE_SELECT_CHIP:1.3,POSITION_MASTER_DEFAULT_X:0,POSITION_MASTER_DEFAULT_Y:235,DISTANCE_SHAKE_PLATE:15,DISTANCE_MOVE_BOWL_X:60,DISTANCE_MOVE_BOWL_Y:-60,DISTANCE_MOVE_UP_MY_CHIP:25},cc._RF.pop()},{}],XocDiaConstant:[function(t,e,i){"use strict";cc._RF.push(e,"0babd7T4mpIL7WWS2ND+xIL","XocDiaConstant");e.exports={DOOR_ID_EVEN:2,DOOR_ID_ODD:1,DOOR_ID_4_GREEN_0_RED:4,DOOR_ID_3_GREEN_1_RED:13,DOOR_ID_1_GREEN_3_RED:31,DOOR_ID_0_GREEN_4_RED:40,ROOM_INFO:"ROOM_INFO",COUNT_DOWN:"COUNT_DOWN",START_GAME:"START_GAME",STATISTIC:"STATISTIC",CHANGE_HOME:"CHANGE_HOME",UPDATE_LIST_HOSTS:"UPDATE_LIST_HOSTS",PLAYERS_LEFT_ROOM:"PLAYERS_LEFT_ROOM",PLAYERS_REQUEST_LEFT_ROOM:"PLAYERS_REQUEST_LEFT_ROOM",BET_DOOR:"BET_DOOR",RESULT:"RESULT",BALANCE_DOOR:"BALANCE_DOOR",SELL_DOOR_STATE:"SELL_DOOR_STATE",SELL_DOOR:"SELL_DOOR",BUY_DOOR:"BUY_DOOR",ADD_PLAYER:"ADD_PLAYER",REQUEST_BET_DOOR:"REQUEST_BET_DOOR",REQUEST_LEFT_ROOM:"REQUEST_LEFT_ROOM",REQUEST_REGISTER_HOME:"REQUEST_REGISTER_HOME",REQUEST_IGNORE_HOME:"REQUEST_IGNORE_HOME",REQUEST_BUY_DOOR:"REQUEST_BUY_DOOR",REQUEST_SELL_DOOR:"REQUEST_SELL_DOOR"},cc._RF.pop()},{}],XocDiaDoorState:[function(t,e,i){"use strict";cc._RF.push(e,"7fb82EykDBG5qsbNgj3lkfa","XocDiaDoorState");e.exports={NO:"NO",BUY:"BUY",SELL:"SELL"},cc._RF.pop()},{}],XocDiaDoor:[function(t,e,i){"use strict";cc._RF.push(e,"965b1QdySlGjKD9T9oaRj6o","XocDiaDoor");var o=t("../XocDiaConstant"),n=t("../../../util/FormatUtil"),s=t("../../../util/RandomUtil"),a=t("../../../util/BrowserUtil"),r=t("../../../helper/Message");cc.Class({extends:cc.Component,properties:{bgSprite:cc.Sprite,bgNormalSpriteFrame:cc.SpriteFrame,bgHoverSpriteFrame:cc.SpriteFrame,betButtonNode:cc.Node,buyButtonNode:cc.Node,sellButtonNode:cc.Node,chipsNode:cc.Node,totalChipLabel:cc.Label,myChipLabel:cc.Label,winNode:cc.Node},init:function(t,e){this.XocDia=t,this.GameCommon=t.GameCommon,this.XocDiaMyChip=t.XocDiaMyChip,this.doorId=e},onLoad:function(){var t=this;this.onMouseEnter=function(){t.initBgSprite()},this.onMouseLeave=function(){t.bgSprite.spriteFrame=t.bgNormalSpriteFrame,a.showCursorAuto()},cc.sys.isBrowser&&(this.node.on(cc.Node.EventType.MOUSE_ENTER,this.onMouseEnter,this.node),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this.onMouseLeave,this.node))},initBgSprite:function(){this.isCanBet()?(this.bgSprite.spriteFrame=this.bgHoverSpriteFrame,a.showCursorPointer()):(this.bgSprite.spriteFrame=this.bgNormalSpriteFrame,a.showCursorAuto())},setTotalChip:function(t){this.totalChipLabel.string=n.numberWithCommas(t)},setMyChip:function(t){this.myChipLabel.string=n.numberWithCommas(t)},setBetStatus:function(){this.showbetButtonNode(),this.hidebuyButtonNode(),this.hidesellButtonNode()},setBuyStatus:function(){this.showbuyButtonNode(),this.hidebetButtonNode(),this.hidesellButtonNode()},setSellStatus:function(){this.showsellButtonNode(),this.hidebuyButtonNode(),this.hidebetButtonNode()},isCanBetAndShowMessage:function(){if(this.XocDia.XocDiaState.isBetting()){var t=this.XocDia.myPlayer.is_home,e=!!this.XocDia.getHomePlayer();if(t)this.XocDia.showToast(r.XOC_DIA_HOST_NOT_BET);else if(e||this.doorId===o.DOOR_ID_ODD||this.doorId===o.DOOR_ID_EVEN||this.XocDia.showToast(r.XOC_DIA_NOT_BET_NO_HOST),e||this.doorId===o.DOOR_ID_ODD||this.doorId===o.DOOR_ID_EVEN)return!0}return!1},isCanBet:function(){if(this.XocDia.XocDiaState.isBetting()){var t=this.XocDia.myPlayer.is_home,e=!!this.XocDia.getHomePlayer();if(!t&&(e||this.doorId===o.DOOR_ID_ODD||this.doorId===o.DOOR_ID_EVEN))return!0}return!1},onClick:function(){this.GameCommon.Audio.playClick(),this.isCanBetAndShowMessage()&&this.betDoor()},onBetClick:function(){this.GameCommon.Audio.playClick(),this.betDoor()},onBuyClick:function(){this.GameCommon.Audio.playClick(),this.buyDoor()},onSellClick:function(){this.GameCommon.Audio.playClick(),this.sellDoor()},betDoor:function(){var t={amount:this.XocDiaMyChip.getChipSelected(),door_id:this.doorId};this.XocDia.sendRequest.send(o.REQUEST_BET_DOOR,t)},sellDoor:function(){var t={door_id:this.doorId};this.XocDia.sendRequest.send(o.REQUEST_SELL_DOOR,t)},buyDoor:function(){var t={door_id:this.doorId};this.XocDia.sendRequest.send(o.REQUEST_BUY_DOOR,t)},hideAllButtons:function(){this.hidebetButtonNode(),this.hidesellButtonNode(),this.hidebuyButtonNode()},showWinNode:function(){this.winNode.active=!0},hideWinNode:function(){this.winNode.active=!1},showbetButtonNode:function(){this.betButtonNode.active=!0},hidebetButtonNode:function(){this.betButtonNode.active=!1},showbuyButtonNode:function(){this.buyButtonNode.active=!0},hidebuyButtonNode:function(){this.buyButtonNode.active=!1},showsellButtonNode:function(){this.sellButtonNode.active=!0},hidesellButtonNode:function(){this.sellButtonNode.active=!1},getRandomPositionInChipsNode:function(){var t=s.getRandom(-this.chipsNode.width/2,this.chipsNode.width/2),e=s.getRandom(-this.chipsNode.height/2,this.chipsNode.height/2);return new cc.Vec2(t,e)},reset:function(){this.setTotalChip(0),this.setMyChip(0),this.chipsNode.removeAllChildren(!0),this.hidebetButtonNode(),this.hidebuyButtonNode(),this.hidesellButtonNode(),this.hideWinNode()},putChipInPool:function(t){for(var e=this.chipsNode.children,i=0;i<e.length;++i)t.put(e[i])}}),cc._RF.pop()},{"../../../helper/Message":"Message","../../../util/BrowserUtil":"BrowserUtil","../../../util/FormatUtil":"FormatUtil","../../../util/RandomUtil":"RandomUtil","../XocDiaConstant":"XocDiaConstant"}],XocDiaHandlerEffect:[function(t,e,i){"use strict";cc._RF.push(e,"872c2aNY75HFJ45i/fHRrJh","XocDiaHandlerEffect");var o=t("./XocDiaConfig"),n={init:function(t){this.XocDia=t,this.XocDiaUI=t.XocDiaUI,this.GameCommon=t.GameCommon,this.listPlayers=t.listPlayers,this.timeoutReturnChip=null,this.timeoutShowEffectResult=null,this.poolChip=new cc.NodePool;for(var e=0;e<20;e++){var i=cc.instantiate(this.XocDia.chipPrefab);this.poolChip.put(i)}},showEffectBetDoor:function(t){var e=t.data.amount,i=t.data.user_id,o=t.data.door_id,n=t.data.amount_bet,s=t.data.my_bet_door,a=this.XocDia.getDoorByDoorId(o),r=this.XocDia.getPlayerByUserId(i);r&&a&&(r.isItMe&&a.setMyChip(s),a.setTotalChip(n),r.BasePlayer.showChangeBalance(-e),this.playerBetChip(r,e,a))},playerBetChip:function(t,e,i){var n=this.initNewChipByAmountBet(e);n.setPosition(this.getPlayerPositionNodeSpaceOfDoor(t,i)),n.parent=i.chipsNode;var s=i.getRandomPositionInChipsNode();n.runAction(cc.sequence(cc.moveTo(o.TIME_MOVE_CHIP,s.x,s.y),cc.callFunc(function(){},this)))},showEffectBalanceDoor:function(t){for(var e=this,i=t.data.players,n=function(t,n){var s=e.XocDia.getPlayerByUserId(i[t].user_id),a=e.XocDia.getDoorByDoorId(i[t].door_id),r=i[t].amount,c=i[t].remain_bet_door;if(s&&a&&r>0){a.setTotalChip(c),0===r&&a.chipsNode.removeAllChildren(!0),s.isItMe&&a.setMyChip(i[t].my_bet_door);for(var h=0;h<5;h++)e.createChipAndReturnPlayer(s,a);e.timeoutReturnChip=setTimeout(function(){s.BasePlayer.showChangeBalance(r)},1e3*o.TIME_RETURN_CHIP)}},s=0,a=i.length;s<a;s++)n(s)},createChipAndReturnPlayer:function(t,e){var i=this.initNewChipByAmountBet(this.XocDia.minBet);i.setPosition(e.getRandomPositionInChipsNode()),i.parent=e.chipsNode;var n=this.getPlayerPositionNodeSpaceOfDoor(t,e);i.runAction(cc.sequence(cc.moveTo(o.TIME_RETURN_CHIP,n.x,n.y),cc.callFunc(function(){this.poolChip.put(i)},this)))},showEffectResult:function(t){var e=t.data.players,i=t.data.coins,n=t.data.histories,s=t.data.last_match_game_id,a=i.number_green_coins;this.XocDia.XocDiaPlate.shakePlateByNumberGreenCoins(a),this.timeoutShowEffectResult=setTimeout(function(){this.showEffectBetControllerWin(a),this.showEffectWinCoin(e),this.XocDia.XocDiaHistory.initHistories(n,s)}.bind(this),1e3*(this.XocDia.XocDiaPlate.duration+o.TIME_SHOW_COIN))},showEffectBetControllerWin:function(t){var e=this.XocDia.getDoorByNumberGreenCoin(t),i=this.XocDia.getRatioDoorByNumberGreenCoin(t);e&&e.showWinNode(),i&&i.showWinNode()},showEffectWinCoin:function(t){for(var e=0,i=t.length;e<i;e++){var o=t[e].user_id,n=t[e].change_balance,s=this.XocDia.getPlayerByUserId(o);s&&(s.BasePlayer.showChangeBalance(n),s.BasePlayer.showEffectByChangeBalance(n),s.isItMe&&n>0&&this.GameCommon.Audio.playWin())}},initNewChipByAmountBet:function(t){var e=this.poolChip.get();e||(e=cc.instantiate(this.XocDia.chipPrefab));var i=this.XocDia.getIndexByAmountBet(t);return e.getComponent("Chip").init(i),e.scale=o.SCALE_CHIP_IN_DOOR,e},getPlayerPositionNodeSpaceOfDoor:function(t,e){var i=e.node.getPosition(),o=t.node.getPosition(),n=e.chipsNode.getPosition();return new cc.Vec2(o.x-i.x-n.x,o.y-i.y-n.y)},checkShowHostButton:function(){var t=this.XocDia.getHomePlayer();t?(this.XocDiaUI.hideRegisterHostButton(),t.isItMe?this.XocDiaUI.showRestHostButton():this.XocDiaUI.hideRestHostButton()):(this.XocDiaUI.showRegisterHostButton(),this.XocDiaUI.hideRestHostButton())},setAllDoorToStatusNo:function(){this.XocDia.evenDoor.hideAllButtons(),this.XocDia.oddDoor.hideAllButtons(),this.XocDia.green4Red0Door.hideAllButtons(),this.XocDia.green0Red4Door.hideAllButtons(),this.XocDia.green3Red1Door.hideAllButtons(),this.XocDia.green1Red3Door.hideAllButtons()},setAllDoorToStatusBet:function(t){this.XocDia.evenDoor.setBetStatus(),this.XocDia.oddDoor.setBetStatus(),t&&(this.XocDia.green4Red0Door.setBetStatus(),this.XocDia.green0Red4Door.setBetStatus(),this.XocDia.green3Red1Door.setBetStatus(),this.XocDia.green1Red3Door.setBetStatus())},setAllDoorToStatusBuy:function(){this.XocDia.evenDoor.setBuyStatus(),this.XocDia.oddDoor.setBuyStatus(),this.XocDia.green4Red0Door.setBuyStatus(),this.XocDia.green0Red4Door.setBuyStatus(),this.XocDia.green3Red1Door.setBuyStatus(),this.XocDia.green1Red3Door.setBuyStatus()},setAllDoorToStatusSell:function(){this.XocDia.evenDoor.setSellStatus(),this.XocDia.oddDoor.setSellStatus(),this.XocDia.green4Red0Door.setSellStatus(),this.XocDia.green0Red4Door.setSellStatus(),this.XocDia.green3Red1Door.setSellStatus(),this.XocDia.green1Red3Door.setSellStatus()},clearRequestLeftRoomAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.setRequestLeftRoom(!1)},stopCountDown:function(t){t.BasePlayer.stopCountDown()},startCountDownAllPlayers:function(t){var e=t.time,i=t.time_remain;for(var o in this.listPlayers)this.listPlayers[o].is_player&&this.listPlayers[o].BasePlayer.startCountDown(i,e)},stopCountDownAllPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].BasePlayer.stopCountDown()},clearAllTimeout:function(){clearTimeout(this.timeoutReturnChip),clearTimeout(this.timeoutShowEffectResult)}};e.exports=n,cc._RF.pop()},{"./XocDiaConfig":"XocDiaConfig"}],XocDiaHandlerRequest:[function(t,e,i){"use strict";cc._RF.push(e,"d3253Wyq1hCwJVwgOTDjt7O","XocDiaHandlerRequest");var o=t("./XocDiaConstant"),n=t("../../helper/Constant"),s=(t("../../helper/Message"),{init:function(t){this.XocDia=t,this.XocDiaUI=t.XocDiaUI,this.GameCommon=t.GameCommon},onPublicMessage:function(t){this.XocDia.showChat(t)},onUserVarsUpdate:function(t){var e=t.user,i=t.changedVars;for(var o in i)switch(i[o]){case n.GOLD:this.XocDia.initGold(e);break;case n.MONEY:this.XocDia.initMoney(e);break;case n.DIAMOND_EVENT:case n.DIAMOND_LEVEL_EVENT:}},onRoomVarsUpdate:function(t){var e=t.changedVars;for(var i in e)switch(e[i]){case n.MATCH_GAME_ID:this.GameCommon.initRoomDescription()}},onResponse:function(t){var e=t.params,i=e.status,s=t.cmd;if(i)switch(s){case o.ROOM_INFO:break;case o.COUNT_DOWN:this.XocDia.handleCountDown(e);break;case o.START_GAME:this.XocDia.handleStartGame(e);break;case o.CHANGE_HOME:this.XocDia.handleChangeHome(e);break;case o.UPDATE_LIST_HOSTS:this.XocDia.handleUpdateListHosts(e);break;case o.PLAYERS_LEFT_ROOM:this.XocDia.handlePlayersLeftRoom(e);break;case o.PLAYERS_REQUEST_LEFT_ROOM:this.XocDia.handlePlayersRequestLeftRoom(e);break;case o.REQUEST_REGISTER_HOME:break;case o.BET_DOOR:this.XocDia.handlePlayerBetDoor(e);break;case o.BALANCE_DOOR:this.XocDia.handleBalanceDoor(e);break;case o.SELL_DOOR_STATE:this.XocDia.handleSellDoorState(e);break;case o.SELL_DOOR:this.XocDia.handleSellDoor(e);break;case o.BUY_DOOR:this.XocDia.handleBuyDoor(e);break;case o.RESULT:this.XocDia.handleResult(e);break;case o.ADD_PLAYER:this.XocDia.handleAddPlayer(e);break;case n.UPDATE_MINIGAME_FREE:this.GameCommon.MiniGame&&this.GameCommon.MiniGame.initNumberSpinFreeGame(e);break;default:this.GameCommon.onResponse(t)}else s===o.REQUEST_REGISTER_HOME&&this.XocDiaUI.showRegisterHostButton(),this.XocDia.showToast(e.msg)}});e.exports=s,cc._RF.pop()},{"../../helper/Constant":"Constant","../../helper/Message":"Message","./XocDiaConstant":"XocDiaConstant"}],XocDiaHistoryItem:[function(t,e,i){"use strict";cc._RF.push(e,"b5d3d7iE6RD46o6kRBhmoho","XocDiaHistoryItem"),cc.Class({extends:cc.Component,properties:{chanNode:cc.Node,leNode:cc.Node,chanLabel:cc.Label,leLabel:cc.Label},onLoad:function(){},showByNumberWhiteCoin:function(t){this.reset(),this.chanLabel.string=t,this.leLabel.string=t,t%2==0?this.chanNode.active=!0:this.leNode.active=!0},showScaleAnimation:function(){},hideScaleAnimation:function(){},reset:function(){this.chanNode.active=!1,this.leNode.active=!1}}),cc._RF.pop()},{}],XocDiaHistory:[function(t,e,i){"use strict";cc._RF.push(e,"72694caLzZOqI3JtpL8AhcA","XocDiaHistory");var o=t("./XocDiaConfig"),n=t("../../helper/Message");cc.Class({extends:cc.Component,properties:{idLabel:cc.Label,chanLabel:cc.Label,leLabel:cc.Label,white4Label:cc.Label,white0Label:cc.Label,white3Label:cc.Label,white1Label:cc.Label,bigNode:cc.Node,bigNodeLayout:cc.Node,small1NodeLayout:cc.Node,small2NodeLayout:cc.Node},init:function(t){for(var e in this.XocDia=t,this.XocDiaUI=t.XocDiaUI,this.listChildrenBigNode=this.bigNodeLayout.getChildren(),this.listChildrenSmall1Node=this.small1NodeLayout.getChildren(),this.listChildrenSmall2Node=this.small2NodeLayout.getChildren(),this.listComponentBig=[],this.listComponentSmall1=[],this.listComponentSmall2=[],this.listChildrenBigNode)this.listComponentBig.push(this.listChildrenBigNode[e].getComponent("XocDiaHistoryItem"));for(var i in this.listChildrenSmall1Node)this.listComponentSmall1.push(this.listChildrenSmall1Node[i].getComponent("XocDiaHistoryItem"));for(var n in this.listChildrenSmall2Node)this.listComponentSmall2.push(this.listChildrenSmall2Node[n].getComponent("XocDiaHistoryItem"));this.numberCols=o.NUMBER_COLS,this.numberRows=o.NUMBER_ROWS,cc.test=this},onLoad:function(){},initHistories:function(t,e){this.reset(),this.initHistoriesBig(t);var i=[];for(var o in t)for(var s in t[o])i.push(t[o][s]);this.initHistoriesSmall1(i),this.initHistoriesSmall2(i),this.initInfoLabel(i),this.idLabel.string=String.format(n.XOC_DIA_ID,e)},initHistoriesBig:function(t){if(this.listComponentBig){for(var e=-1,i=0,o=t.length;i<o;i++)for(var n=0,s=t[i].length;n<s;n++)this.listComponentBig[i*this.numberRows+n].showByNumberWhiteCoin(t[i][n]),this.listComponentBig[i*this.numberRows+n].hideScaleAnimation(),e=i*this.numberRows+n;-1!==e&&this.listComponentBig[e].showScaleAnimation()}},initHistoriesSmall1:function(t){if(this.listComponentSmall1){for(var e=-1,i=t.length>o.NUMBER_CELL_SMALL_1?t.length-o.NUMBER_CELL_SMALL_1:0,n=i;n<t.length;n++)this.listComponentSmall1[n-i].showByNumberWhiteCoin(t[n]),this.listComponentSmall1[n-i].hideScaleAnimation(),e=n-i;-1!==e&&this.listComponentSmall1[e].showScaleAnimation()}},initHistoriesSmall2:function(t){if(this.listComponentSmall2){for(var e=-1,i=t.length>o.NUMBER_CELL_SMALL_2?t.length-o.NUMBER_CELL_SMALL_2:0,n=i;n<t.length;n++)this.listComponentSmall2[n-i].showByNumberWhiteCoin(t[n]),this.listComponentSmall2[n-i].hideScaleAnimation(),e=n-i;-1!==e&&this.listComponentSmall2[e].showScaleAnimation()}},initInfoLabel:function(t){var e=0,i=0,o=0,n=0,s=0,a=0;for(var r in t)switch(t[r]%2==0?++e:++i,t[r]){case 0:++n;break;case 1:++s;break;case 3:++a;break;case 4:++o}this.chanLabel.string=e,this.leLabel.string=i,this.white0Label.string=n,this.white1Label.string=a,this.white3Label.string=s,this.white4Label.string=o},onHistoryClick:function(){this.bigNode.active=!this.bigNode.active},onCloseClick:function(){this.bigNode.active=!1},reset:function(){if(this.listComponentBig)for(var t in this.listComponentBig)this.listComponentBig[t].reset();if(this.listComponentSmall1)for(var e in this.listComponentSmall1)this.listComponentSmall1[e].reset();if(this.listComponentSmall2)for(var i in this.listComponentSmall2)this.listComponentSmall2[i].reset()}}),cc._RF.pop()},{"../../helper/Message":"Message","./XocDiaConfig":"XocDiaConfig"}],XocDiaHostState:[function(t,e,i){"use strict";cc._RF.push(e,"bafd5oGXLlFj4NN2VteAPq5","XocDiaHostState");e.exports={NO:"NO",WAITING:"WAITING",IGNORE:"IGNORE",HOME:"HOME"},cc._RF.pop()},{}],XocDiaMyChipItem:[function(t,e,i){"use strict";cc._RF.push(e,"fea37opCW9K/6/EYhRmH2Y3","XocDiaMyChipItem");var o=t("../XocDiaConfig"),n=t("../../../util/FormatUtil");cc.Class({extends:cc.Component,properties:{chipLabel:cc.Label},init:function(t,e){this.XocDiaMyChip=t,this.chip=e,this.chipLabel.string=n.nFormatter(e,1),this.isSelected=!1,this._initScale=this.node.scale},onLoad:function(){},onClick:function(){this.XocDiaMyChip.reset(),this.select(!this.isSelected)},select:function(t){this.isSelected=t,this.node.stopAllActions(),t?this.node.runAction(cc.scaleTo(o.TIME_SELECT_CHIP,o.SCALE_SELECT_CHIP)):this.node.runAction(cc.scaleTo(o.TIME_SELECT_CHIP,this._initScale))},selectWithoutAnimation:function(t){this.isSelected=t,this.node.scale=t?o.SCALE_SELECT_CHIP:this._initScale}}),cc._RF.pop()},{"../../../util/FormatUtil":"FormatUtil","../XocDiaConfig":"XocDiaConfig"}],XocDiaMyChip:[function(t,e,i){"use strict";cc._RF.push(e,"ab729/Bw7hIopKLOpIBsM46","XocDiaMyChip");var o=t("../item/XocDiaMyChipItem"),n=t("../XocDiaConfig");cc.Class({extends:cc.Component,properties:{myChipItems:[o]},init:function(t){this.XocDia=t,this.minBet=this.XocDia.minBet},onLoad:function(){for(var t in this.myChipItems)this.myChipItems[t].init(this,n.X_MY_CHIPS[t]*this.minBet),0==t&&this.myChipItems[t].selectWithoutAnimation(!0)},getChipSelected:function(){for(var t in this.myChipItems)if(this.myChipItems[t].isSelected)return this.myChipItems[t].chip;return 0},reset:function(){for(var t in this.myChipItems)this.myChipItems[t].isSelected&&this.myChipItems[t].select(!1)}}),cc._RF.pop()},{"../XocDiaConfig":"XocDiaConfig","../item/XocDiaMyChipItem":"XocDiaMyChipItem"}],XocDiaPlate:[function(t,e,i){"use strict";cc._RF.push(e,"b55b8iCHBROA5xyOEvTdAEZ","XocDiaPlate");var o=t("../XocDiaConfig");cc.Class({extends:cc.Component,properties:{bowlNode:cc.Node,xocNode:cc.Node,listCoin:[cc.Sprite],redSpriteFrame:cc.SpriteFrame,greenSpriteFrame:cc.SpriteFrame},init:function(t){this.XocDia=t,this.XocDiaUI=t.XocDiaUI},onLoad:function(){this.isOnLoad=!0,this.animation=this.xocNode.getComponent(cc.Animation),this.duration=this.animation.defaultClip.duration,this.bowlInitX=this.bowlNode.x,this.bowlInitY=this.bowlNode.y,this.timeEachShake=o.TIME_SHAKE_PLATE,this.timeShowCoin=o.TIME_SHOW_COIN,this.distanceMoveBowlX=o.DISTANCE_MOVE_BOWL_X,this.distanceMoveBowlY=o.DISTANCE_MOVE_BOWL_Y},onDisable:function(){clearTimeout(this.timeoutHideXoc)},shakePlateByNumberGreenCoins:function(t){this.reset();for(var e=0,i=this.listCoin.length;e<i;e++)this.listCoin[e].spriteFrame=e<t?this.redSpriteFrame:this.greenSpriteFrame;this.xocNode.active=!0,this.xocNode.getComponent(cc.Animation).play(),clearTimeout(this.timeoutHideXoc),this.timeoutHideXoc=setTimeout(function(){this.xocNode.active=!1,this.bowlNode.runAction(cc.moveBy(this.timeShowCoin,this.distanceMoveBowlX,this.distanceMoveBowlY))}.bind(this),1e3*this.duration)},shakePlateByNumberGreenCoinsNoAnimation:function(t){this.reset();for(var e=0,i=this.listCoin.length;e<i;e++)this.listCoin[e].spriteFrame=e<t?this.greenSpriteFrame:this.redSpriteFrame;this.isOnLoad?this.bowlNode.setPosition(this.bowlInitX+this.distanceMoveBowlX,this.bowlInitY+this.distanceMoveBowlY):this.bowlNode.setPosition(o.DISTANCE_MOVE_BOWL_X+1,o.DISTANCE_MOVE_BOWL_Y-1)},reset:function(){this.isOnLoad&&(this.bowlNode.stopAllActions(),this.bowlNode.setPosition(this.bowlInitX,this.bowlInitY),this.bowlNode.setPosition(1,-1),this.xocNode.active=!1)}}),cc._RF.pop()},{"../XocDiaConfig":"XocDiaConfig"}],XocDiaRegisterHostForm:[function(t,e,i){"use strict";cc._RF.push(e,"3b80bPr3I1EJ40oO7+V3lUZ","XocDiaRegisterHostForm");var o=t("../XocDiaHostState"),n=t("../../../helper/Message");t("../../../helper/Constant");cc.Class({extends:cc.Component,init:function(t){this.XocDia=t},properties:{listNode:cc.Node,registerItemPrefab:cc.Prefab},initListHost:function(t){this.listNode.removeAllChildren(!0);for(var e=0,i=t.length;e<i;e++){this.createRegisterItem(t[e],e).parent=this.listNode}},onLoad:function(){this.dialogForm=this.node.getComponent("DialogForm")},onEnable:function(){},onDisable:function(){},hideDialog:function(){this.dialogForm||(this.dialogForm=this.node.getComponent("DialogForm")),this.dialogForm.hideDialog()},createRegisterItem:function(t,e){var i=e+1,o=t.nick_name,n=t.host_state,s=this.getMessageStatusByHostState(n),a=cc.instantiate(this.registerItemPrefab);return a.getComponent("XocDiaRegisterItem").init(i,o,s),a},getMessageStatusByHostState:function(t){switch(t){case o.WAITING:return n.XOC_DIA_REGISTER_FORM_MESSAGE_WAITING;case o.IGNORE:return n.XOC_DIA_REGISTER_FORM_MESSAGE_IGNORE;case o.HOME:return n.XOC_DIA_REGISTER_FORM_MESSAGE_HOME;default:return""}}}),cc._RF.pop()},{"../../../helper/Constant":"Constant","../../../helper/Message":"Message","../XocDiaHostState":"XocDiaHostState"}],XocDiaRegisterItem:[function(t,e,i){"use strict";cc._RF.push(e,"514aaDw+iZLbr6cuB99Pzgn","XocDiaRegisterItem"),cc.Class({extends:cc.Component,properties:{noLabel:cc.Label,playerLabel:cc.Label,statusLabel:cc.Label},onLoad:function(){},init:function(t,e,i){this.noLabel.string=t,this.playerLabel.string=e,this.statusLabel.string=i}}),cc._RF.pop()},{}],XocDiaState:[function(t,e,i){"use strict";cc._RF.push(e,"6bf98k38tpPZpLsiSEbENCD","XocDiaState");e.exports={currentState:"",STOP:"STOP",WAITING:"WAITING",BETTING:"BETTING",SELL_DOOR:"SELL_DOOR",FINISH:"FINISH",setState:function(t){this.currentState=t},getState:function(){return this.currentState},setStop:function(){this.currentState=this.STOP},setWaiting:function(){this.currentState=this.WAITING},setBetting:function(){this.currentState=this.BETTING},setSellDoor:function(){this.currentState=this.SELL_DOOR},setFinish:function(){this.currentState=this.FINISH},isStop:function(){return this.currentState===this.STOP},isWaiting:function(){return this.currentState===this.WAITING},isBetting:function(){return this.currentState===this.BETTING},isSellDoor:function(){return this.currentState===this.SELL_DOOR},isFinish:function(){return this.currentState===this.FINISH}},cc._RF.pop()},{}],XocDiaUI:[function(t,e,i){"use strict";cc._RF.push(e,"97feeCWR8dGzIagWQwHqjNb","XocDiaUI"),cc.Class({extends:cc.Component,properties:{registerHostButtonNode:cc.Node,restHostButtonNode:cc.Node,registerHostNode:cc.Node,playersNode:[cc.Node],playersPlaceHolderNode:[cc.Node]},onLoad:function(){this.registerHostDialogForm=this.registerHostNode.getComponent("DialogForm")},disableAllPlaceHolder:function(){for(var t in this.playersPlaceHolderNode)this.playersPlaceHolderNode[t].getComponent("ButtonHover").setEnable(!1),this.playersPlaceHolderNode[t].getComponent(cc.Button).interactable=!1},showRegisterForm:function(){this.registerHostDialogForm.showDialog()},hideRegisterForm:function(){this.registerHostDialogForm.hideDialog()},showRegisterHostButton:function(){this.registerHostButtonNode.active=!0},hideRegisterHostButton:function(){this.registerHostButtonNode.active=!1},showRestHostButton:function(){this.restHostButtonNode.active=!0},hideRestHostButton:function(){this.restHostButtonNode.active=!1},reset:function(){this.hideRegisterHostButton(),this.hideRestHostButton()}}),cc._RF.pop()},{}],XocDia:[function(t,e,i){"use strict";cc._RF.push(e,"f6bb9qvxVlHvpxfUCt/0tHZ","XocDia");var o=t("../../base/BaseController"),n=t("./XocDiaConstant"),s=t("./XocDiaConfig"),a=t("./XocDiaUI"),r=t("./XocDiaState"),c=t("./XocDiaHistory"),h=t("./XocDiaDoorState"),l=t("./item/XocDiaDoor"),u=t("./item/XocDiaMyChipItem"),d=t("./XocDiaHandlerRequest"),m=t("./XocDiaHandlerEffect"),p=t("./form/XocDiaRegisterHostForm"),f=t("./other/XocDiaPlate"),g=t("./other/XocDiaMyChip"),_=t("../../prefab/GameCommon"),S=t("../../helper/Constant"),C=t("../../helper/Message"),N=t("../../object/RoomType"),E=t("../../util/RandomUtil");cc.Class({extends:o,properties:{chipPrefab:cc.Prefab,evenDoor:l,oddDoor:l,green4Red0Door:l,green0Red4Door:l,green3Red1Door:l,green1Red3Door:l,myChipItems:[u],XocDiaUI:a,XocDiaPlate:f,XocDiaMyChip:g,XocDiaRegisterHostForm:p,XocDiaHistory:c,GameCommon:_},onLoad:function(){this._super(),this.setSceneName(S.SCENE_GAME_XOCDIA),this.sfsManager.setController(this),this.myPlayer=null,this.listPlayers=[],this.room=this.getLastJoinedRoom(),this.minBet=parseInt(this.room.variables[S.MIN_BET].value),this.roomType=parseInt(this.room.variables[S.ROOM_TYPE].value),this.isMoneyType=this.roomType==N.MONEY_CODE,this.playersNode=this.XocDiaUI.playersNode,this.isMoneyType||this.XocDiaUI.disableAllPlaceHolder(),this.XocDiaConstant=n,this.XocDiaConfig=s,this.XocDiaState=r,this.XocDiaHandlerRequest=d,this.XocDiaHandlerRequest.init(this),this.XocDiaHandlerEffect=m,this.XocDiaHandlerEffect.init(this),this.XocDiaHistory.init(this),this.XocDiaPlate.init(this),this.XocDiaMyChip.init(this),this.GameCommon.init(this),this.evenDoor.init(this,n.DOOR_ID_EVEN),this.oddDoor.init(this,n.DOOR_ID_ODD),this.green4Red0Door.init(this,n.DOOR_ID_4_GREEN_0_RED),this.green0Red4Door.init(this,n.DOOR_ID_0_GREEN_4_RED),this.green3Red1Door.init(this,n.DOOR_ID_3_GREEN_1_RED),this.green1Red3Door.init(this,n.DOOR_ID_1_GREEN_3_RED),this.reset(),this.initPlayers(),this.initRoomInfo(),this.onPublicMessage=this.XocDiaHandlerRequest.onPublicMessage.bind(this.XocDiaHandlerRequest),this.onRoomVarsUpdate=this.XocDiaHandlerRequest.onRoomVarsUpdate.bind(this.XocDiaHandlerRequest),this.onUserVarsUpdate=this.XocDiaHandlerRequest.onUserVarsUpdate.bind(this.XocDiaHandlerRequest),this.onResponse=this.XocDiaHandlerRequest.onResponse.bind(this.XocDiaHandlerRequest),this.initTempRequests(),this.sfsManager.removeEventResponse(),this.addEventListeners()},onDestroy:function(){this.removeEventListeners()},addEventListeners:function(){this.sfs.addEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.addEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.addEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},removeEventListeners:function(){this.sfs.removeEventListener(this.SFS2X.SFSEvent.PUBLIC_MESSAGE,this.onPublicMessage),this.sfs.removeEventListener(this.SFS2X.SFSEvent.USER_VARIABLES_UPDATE,this.onUserVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.ROOM_VARIABLES_UPDATE,this.onRoomVarsUpdate),this.sfs.removeEventListener(this.SFS2X.SFSEvent.EXTENSION_RESPONSE,this.onResponse)},initPlayers:function(){var t=this,e=this.getRoomInfo(),i=e.data.players,o=e.data.viewers,n=this.getSFSMySelf().variables.user_id.value;for(var s in this.playersNode){var a=this.playersNode[s];a.getComponent("BasePlayer").setBetType(this.isMoneyType),a.on(cc.Node.EventType.TOUCH_END,function(){var e=this.user_id;t.GameCommon.showPlayerInfo(e)},a),a.active=!1}this.initPlayersByListPlayers(i,n),this.initPlayersByListPlayers(o,n)},initPlayersByListPlayers:function(t,e){for(var i in t)t[i].user_id===e?(t[i].isItMe=!0,this.myPlayer=t[i]):t[i].isItMe=!1,this.initPlayer(t[i])},initPlayer:function(t){var e=t.user_id;if(!this.checkPlayerInRoomByUserId(e)){var i=t.isItMe?0:this.getRandomPosition();t.node=this.playersNode[i],t.node.user_id=e,t.node.active=!0;var o=t.node.getComponent("BasePlayer");t.BasePlayer=o,o.reset(),o.setAvatar(t.avatar),o.setRequestLeftRoom(t.request_left_room),o.setRoomMaster(t.is_home),o.setPlayerName(t.nick_name),o.setBalance(t.balance),t.isItMe&&!t.is_player&&this.GameCommon.showWaitingNode(),this.listPlayers.push(t)}},initRoomInfo:function(){var t=this.getRoomInfo(),e=t.data.game_state,i=t.data.histories||t.data.statistic.histories,o=t.data.last_match_game_id;this.XocDiaState.setState(e),this.XocDiaHistory.initHistories(i,o),this.XocDiaState.isStop()?this.reset():this.XocDiaState.isWaiting()?this.resumeStateWaiting(t):this.XocDiaState.isBetting()?this.resumeStateBetting(t):this.XocDiaState.isSellDoor()?this.resumeStateSellDoor(t):this.XocDiaState.isFinish()&&this.resumeStateFinish(t)},resumeStateWaiting:function(t){this.getHomePlayer()||this.XocDiaUI.showRegisterHostButton(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},resumeStateBetting:function(t){for(var e=t.data.doors,i=0,o=e.length;i<o;i++){var n=e[i],s=n.door_id,a=n.amount,r=n.my_bet_door;this.setDoorAmount(s,a,r)}!this.myPlayer.is_home&&this.myPlayer.is_player&&this.XocDiaHandlerEffect.setAllDoorToStatusBet(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},resumeStateSellDoor:function(t){for(var e=t.data.doors,i=0,o=e.length;i<o;i++){var n=e[i],s=n.door_id,a=n.amount,r=n.door_state,c=n.my_bet_door;this.setDoorAmount(s,a,c),this.setDoorState(s,r)}this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},resumeStateFinish:function(t){for(var e=t.data.doors,i=t.data.statistic.coins,o=t.data.statistic.players,n=i.number_green_coins,s=0,a=e.length;s<a;s++){var r=e[s],c=r.door_id,h=r.amount,l=r.win,u=r.my_bet_door;this.setDoorAmount(c,h,u),this.setDoorState(c,l)}for(var d in o){var m=this.getPlayerByUserId(o[d].user_id);if(m){var p=o[d].change_balance;m.BasePlayer.showChangeBalance(p),m.BasePlayer.showEffectByChangeBalance(p)}}this.XocDiaPlate.shakePlateByNumberGreenCoinsNoAnimation(n),this.XocDiaHandlerEffect.showEffectBetControllerWin(n),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},initTempRequests:function(){var t=this.getTempRequests();for(var e in t)this.XocDiaHandlerRequest.onResponse(t[e]);this.clearTempRequests()},initGold:function(t){var e=t.variables.user_id.value,i=t.variables.gold.value,o=this.getPlayerByUserId(e);o&&!this.isMoneyType&&o.BasePlayer.setBalance(i)},initMoney:function(t){var e=t.variables.user_id.value,i=t.variables.money.value,o=this.getPlayerByUserId(e);o&&this.isMoneyType&&o.BasePlayer.setBalance(i)},handleCountDown:function(t){this.reset(),this.setViewersToPlayers(),t.data.is_count_down?(this.XocDiaState.setWaiting(),this.GameCommon.hideWaitingNode(),this.XocDiaHandlerEffect.checkShowHostButton(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)):(this.XocDiaState.setStop(),this.XocDiaHandlerEffect.stopCountDownAllPlayers())},handleStartGame:function(t){this.XocDiaState.setBetting(),this.XocDiaUI.hideRegisterHostButton(),this.XocDiaUI.hideRestHostButton(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},handlePlayerBetDoor:function(t){this.XocDiaHandlerEffect.showEffectBetDoor(t)},handleBalanceDoor:function(t){this.XocDiaHandlerEffect.showEffectBalanceDoor(t)},handleSellDoorState:function(t){this.XocDiaState.setSellDoor(),this.XocDiaHandlerEffect.setAllDoorToStatusNo(),this.myPlayer.is_home&&this.XocDiaHandlerEffect.setAllDoorToStatusSell(),this.XocDiaHandlerEffect.startCountDownAllPlayers(t)},handleSellDoor:function(t){var e=t.data.door_id,i=this.getDoorByDoorId(e);i&&(this.myPlayer.is_home?i.hideAllButtons():i.setBuyStatus())},handleBuyDoor:function(t){var e=t.data.door_id,i=this.getDoorByDoorId(e);i&&i.hideAllButtons()},handleChangeHome:function(t){var e=t.data.user_id_last_home,i=t.data.user_id_new_home,o=this.getPlayerByUserId(e),n=this.getPlayerByUserId(i);o&&(o.is_home=!1,o.BasePlayer.setRoomMaster(!1)),n?(n.is_home=!0,n.BasePlayer.setRoomMaster(!0),this.XocDiaUI.hideRegisterHostButton(),n.isItMe&&this.XocDiaUI.showRestHostButton()):this.XocDiaUI.showRegisterHostButton()},handleUpdateListHosts:function(t){var e=t.data.list_hosts;this.XocDiaRegisterHostForm.initListHost(e)},handleResult:function(t){console.log(t),this.XocDiaState.setFinish(),this.XocDiaHandlerEffect.stopCountDownAllPlayers(),this.XocDiaHandlerEffect.setAllDoorToStatusNo(),this.XocDiaHandlerEffect.showEffectResult(t),this.setViewersToPlayers()},handleAddPlayer:function(t){var e=t.data;if(this.initPlayer(e),this.XocDiaState.isWaiting()){var i=this.getFirstPlayer();if(i){var o=i.BasePlayer.getRemainTimeCountDown(),n=i.BasePlayer.getTotalTimeCountDown();this.startCountDownPlayer(e,o,n,!1)}}},handlePlayersLeftRoom:function(t){var e=t.data.players;for(var i in e)this.removePlayerByUserId(e[i])},handlePlayersRequestLeftRoom:function(t){var e=this.myPlayer.BasePlayer.isRequestLeftRoom();this.XocDiaHandlerEffect.clearRequestLeftRoomAllPlayers();var i=!1,o=t.data.players;for(var n in o){var s=this.getPlayerByUserId(o[n]);s&&(s.BasePlayer.setRequestLeftRoom(!0),s.isItMe&&(i=!0,e||this.showToast(C.REQUEST_LEFT_ROOM)))}e&&!i&&this.showToast(C.IGNORE_REQUEST_LEFT_ROOM)},showChat:function(t){var e=t.sender,i=t.message,o=e.variables.user_id.value,n=this.getPlayerByUserId(o);n&&n.BasePlayer.showChat(i)},onHostClick:function(){this.GameCommon.Audio.playClick(),this.XocDiaUI.showRegisterForm()},onRegisterHostClick:function(){this.GameCommon.Audio.playClick(),this.XocDiaUI.hideRegisterHostButton(),this.sendRequest.send(n.REQUEST_REGISTER_HOME)},onRestHostClick:function(){this.GameCommon.Audio.playClick(),this.XocDiaUI.hideRestHostButton(),this.sendRequest.send(n.REQUEST_IGNORE_HOME)},onInviteClick:function(){this.GameCommon.onInviteClick()},removePlayerByUserId:function(t){var e=this.getPlayerByUserId(t);e&&(this.removePlayerFromListByPlayer(e),e.node.active=!1)},getIndexByAmountBet:function(t){var e=t/this.minBet,i=0;for(var o in s.X_MY_CHIPS)s.X_MY_CHIPS[o]===e&&(i=o);return i},getDoorByDoorId:function(t){switch(t){case n.DOOR_ID_EVEN:return this.evenDoor;case n.DOOR_ID_ODD:return this.oddDoor;case n.DOOR_ID_0_GREEN_4_RED:return this.green0Red4Door;case n.DOOR_ID_4_GREEN_0_RED:return this.green4Red0Door;case n.DOOR_ID_1_GREEN_3_RED:return this.green1Red3Door;case n.DOOR_ID_3_GREEN_1_RED:return this.green3Red1Door;default:return null}},setDoorAmount:function(t,e,i){var o=this.getDoorByDoorId(t);o&&(o.setTotalChip(e),o.setMyChip(i))},setDoorState:function(t,e){var i=this.getDoorByDoorId(t);i&&(this.myPlayer.is_home?e===h.NO&&i.setSellStatus():this.myPlayer.is_player&&e===h.SELL&&i.setBuyStatus())},setWinDoor:function(t,e){var i=this.getDoorByDoorId(t);i&&(e?i.showWinNode():i.hideWinNode())},getDoorByNumberGreenCoin:function(t){switch(t){case 0:case 2:case 4:return this.evenDoor;case 1:case 3:return this.oddDoor}},getRatioDoorByNumberGreenCoin:function(t){switch(t){case 4:return this.green4Red0Door;case 3:return this.green3Red1Door;case 1:return this.green1Red3Door;case 0:return this.green0Red4Door;default:return null}},checkPlayerOnline:function(t){var e=this.room._userManager._usersById.items;for(var i in e)if(e[i].variables.user_id===t)return!0;return!1},getFirstPlayer:function(){for(var t in this.listPlayers)return this.listPlayers[t];return null},getPlayerByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return this.listPlayers[e];return null},checkPlayerInRoomByUserId:function(t){for(var e in this.listPlayers)if(this.listPlayers[e].user_id===t)return!0;return!1},removePlayerFromListByPlayer:function(t){for(var e in this.listPlayers)if(this.listPlayers[e]===t){this.listPlayers.splice(e,1);break}},setViewersToPlayers:function(){for(var t in this.listPlayers)this.listPlayers[t].is_player=!0},getRandomPosition:function(){for(var t=0;t=parseInt(E.getRandom(1,s.MAX_PLAYERS)),!1!==this.playersNode[t].active;);return t},getHomePlayer:function(){for(var t in this.listPlayers)if(this.listPlayers[t].is_home)return this.listPlayers[t];return null},startCountDownPlayer:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.BasePlayer.startCountDown(e,i,o)},showProcessingNode:function(){this.GameCommon.showProcessingNode()},clearTimeoutProcessingNode:function(){this.GameCommon.clearTimeoutProcessingNode()},hideProcessingNode:function(){this.GameCommon.hideProcessingNode()},showProcessingSceneNode:function(){this.GameCommon.showProcessingSceneNode()},hideProcessingSceneNode:function(){this.GameCommon.hideProcessingSceneNode()},showToast:function(t){this.GameCommon.showToast(t)},clearAllTimeout:function(){this.XocDiaHandlerEffect.clearAllTimeout()},reset:function(){for(var t in this.clearAllTimeout(),this.evenDoor.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.oddDoor.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green4Red0Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green0Red4Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green3Red1Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.green1Red3Door.putChipInPool(this.XocDiaHandlerEffect.poolChip),this.evenDoor.reset(),this.oddDoor.reset(),this.green4Red0Door.reset(),this.green0Red4Door.reset(),this.green3Red1Door.reset(),this.green1Red3Door.reset(),this.XocDiaPlate.reset(),this.XocDiaUI.reset(),this.listPlayers)this.listPlayers[t].BasePlayer.reset()}}),cc._RF.pop()},{"../../base/BaseController":"BaseController","../../helper/Constant":"Constant","../../helper/Message":"Message","../../object/RoomType":"RoomType","../../prefab/GameCommon":"GameCommon","../../util/RandomUtil":"RandomUtil","./XocDiaConfig":"XocDiaConfig","./XocDiaConstant":"XocDiaConstant","./XocDiaDoorState":"XocDiaDoorState","./XocDiaHandlerEffect":"XocDiaHandlerEffect","./XocDiaHandlerRequest":"XocDiaHandlerRequest","./XocDiaHistory":"XocDiaHistory","./XocDiaState":"XocDiaState","./XocDiaUI":"XocDiaUI","./form/XocDiaRegisterHostForm":"XocDiaRegisterHostForm","./item/XocDiaDoor":"XocDiaDoor","./item/XocDiaMyChipItem":"XocDiaMyChipItem","./other/XocDiaMyChip":"XocDiaMyChip","./other/XocDiaPlate":"XocDiaPlate"}],md5:[function(t,e,i){"use strict";cc._RF.push(e,"8b6abJC651N0qAWSrbe6D8w","md5");e.exports=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,o,n,s,a;return n=2147483648&t,s=2147483648&e,a=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(o=1073741824&e)?2147483648^a^n^s:i|o?1073741824&a?3221225472^a^n^s:1073741824^a^n^s:a^n^s}function o(t,e,i){return t&e|~t&i}function n(t,e,i){return t&i|e&~i}function s(t,e,i){return t^e^i}function a(t,e,i){return e^(t|~i)}function r(t,n,s,a,r,c,h){return i(e(t=i(t,i(i(o(n,s,a),r),h)),c),n)}function c(t,o,s,a,r,c,h){return i(e(t=i(t,i(i(n(o,s,a),r),h)),c),o)}function h(t,o,n,a,r,c,h){return i(e(t=i(t,i(i(s(o,n,a),r),h)),c),o)}function l(t,o,n,s,r,c,h){return i(e(t=i(t,i(i(a(o,n,s),r),h)),c),o)}function u(t){var e="",i="",o=void 0;for(o=0;o<=3;o++)e+=(i="0"+(t>>>8*o&255).toString(16)).substr(i.length-2,2);return e}var d=Array(),m=void 0,p=void 0,f=void 0,g=void 0,_=void 0,S=void 0,C=void 0,N=void 0,E=void 0;for(d=function(t){for(var e=void 0,i=t.length,o=i+8,n=16*((o-o%64)/64+1),s=Array(n-1),a=0,r=0;r<i;)a=r%4*8,s[e=(r-r%4)/4]=s[e]|t.charCodeAt(r)<<a,r++;return a=r%4*8,s[e=(r-r%4)/4]=s[e]|128<<a,s[n-2]=i<<3,s[n-1]=i>>>29,s}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e}(t)),S=1732584193,C=4023233417,N=2562383102,E=271733878,m=0;m<d.length;m+=16)p=S,f=C,g=N,_=E,C=l(C=l(C=l(C=l(C=h(C=h(C=h(C=h(C=c(C=c(C=c(C=c(C=r(C=r(C=r(C=r(C,N=r(N,E=r(E,S=r(S,C,N,E,d[m+0],7,3614090360),C,N,d[m+1],12,3905402710),S,C,d[m+2],17,606105819),E,S,d[m+3],22,3250441966),N=r(N,E=r(E,S=r(S,C,N,E,d[m+4],7,4118548399),C,N,d[m+5],12,1200080426),S,C,d[m+6],17,2821735955),E,S,d[m+7],22,4249261313),N=r(N,E=r(E,S=r(S,C,N,E,d[m+8],7,1770035416),C,N,d[m+9],12,2336552879),S,C,d[m+10],17,4294925233),E,S,d[m+11],22,2304563134),N=r(N,E=r(E,S=r(S,C,N,E,d[m+12],7,1804603682),C,N,d[m+13],12,4254626195),S,C,d[m+14],17,2792965006),E,S,d[m+15],22,1236535329),N=c(N,E=c(E,S=c(S,C,N,E,d[m+1],5,4129170786),C,N,d[m+6],9,3225465664),S,C,d[m+11],14,643717713),E,S,d[m+0],20,3921069994),N=c(N,E=c(E,S=c(S,C,N,E,d[m+5],5,3593408605),C,N,d[m+10],9,38016083),S,C,d[m+15],14,3634488961),E,S,d[m+4],20,3889429448),N=c(N,E=c(E,S=c(S,C,N,E,d[m+9],5,568446438),C,N,d[m+14],9,3275163606),S,C,d[m+3],14,4107603335),E,S,d[m+8],20,1163531501),N=c(N,E=c(E,S=c(S,C,N,E,d[m+13],5,2850285829),C,N,d[m+2],9,4243563512),S,C,d[m+7],14,1735328473),E,S,d[m+12],20,2368359562),N=h(N,E=h(E,S=h(S,C,N,E,d[m+5],4,4294588738),C,N,d[m+8],11,2272392833),S,C,d[m+11],16,1839030562),E,S,d[m+14],23,4259657740),N=h(N,E=h(E,S=h(S,C,N,E,d[m+1],4,2763975236),C,N,d[m+4],11,1272893353),S,C,d[m+7],16,4139469664),E,S,d[m+10],23,3200236656),N=h(N,E=h(E,S=h(S,C,N,E,d[m+13],4,681279174),C,N,d[m+0],11,3936430074),S,C,d[m+3],16,3572445317),E,S,d[m+6],23,76029189),N=h(N,E=h(E,S=h(S,C,N,E,d[m+9],4,3654602809),C,N,d[m+12],11,3873151461),S,C,d[m+15],16,530742520),E,S,d[m+2],23,3299628645),N=l(N,E=l(E,S=l(S,C,N,E,d[m+0],6,4096336452),C,N,d[m+7],10,1126891415),S,C,d[m+14],15,2878612391),E,S,d[m+5],21,4237533241),N=l(N,E=l(E,S=l(S,C,N,E,d[m+12],6,1700485571),C,N,d[m+3],10,2399980690),S,C,d[m+10],15,4293915773),E,S,d[m+1],21,2240044497),N=l(N,E=l(E,S=l(S,C,N,E,d[m+8],6,1873313359),C,N,d[m+15],10,4264355552),S,C,d[m+6],15,2734768916),E,S,d[m+13],21,1309151649),N=l(N,E=l(E,S=l(S,C,N,E,d[m+4],6,4149444226),C,N,d[m+11],10,3174756917),S,C,d[m+2],15,718787259),E,S,d[m+9],21,3951481745),S=i(S,p),C=i(C,f),N=i(N,g),E=i(E,_);return(u(S)+u(C)+u(N)+u(E)).toLowerCase()},cc._RF.pop()},{}],test:[function(t,e,i){"use strict";cc._RF.push(e,"68662XpLn5CLoxxFQCCoW7e","test"),cc.Class({extends:cc.Component,properties:{processingNode:cc.Node},onLoad:function(){},onClick:function(){this.processingNode.active=!this.processingNode.active}}),cc._RF.pop()},{}]},{},["test","API","APIConstant","BaseController","BaseScene","Config","Constant","FireFishConfig","Message","SFS2X_API_JS","md5","Audio","AudioFireFish","Capcha","Card","CompareType","Music","RoomType","BaseBullet","BaseFish","Bullet","Fish","Gun","GunChoise","MyPlayerHover","PlasticityPositionType","Score","FormulaBezier","FormulaCurve","FormulaDirect","GameCommon","GameDecoration","News","Toast","Invite","LogOut","Otp","PlayerInfo","Recharge","Setting","Tutorial","RechargeBankingForm","RechargeGoldForm","RechargeMoneyForm","RechargeSMSForm","ChangeBalance","WinEffect","Agent2Item","AgentItem","AgentItem2","AvatarItem","AwardCardRateItem","AwardHistoryItem","CardGameValueItem","CardValue2Item","CardValueItem","ChatGameItem","ChatItem","EmotionItem","FFRankItem","FFRoomItem","GameAchivementItem","InternationalPhoneItem","MailItem","MomoItem","NewsItem","PaginationItem","PlayHistoryItem","PlayerOnlineItem","QuestNotificationItem","QuickChatItem","RankItem","RechargeCardItem","RechargeGoldHistoryItem","RechargeHistoryItem","RoomItem","SMSItem","SafeQuickSelectItem","SlotGameIconItem","SmallBannerItem","TaiXiuIconItem","TutorialItem","VipItem","TopEvent2Item","HistoryAwardInviteFriendItem","InviteFriendItem","RankInviteFriendItem","RankVip2Item","LotteryBetItem","LotteryButtonItem","LotteryChipItem","LotteryHistoryItem","LotteryJackpotItem","LotteryNumberItem","LotteryPageViewItem","LotteryRankItem","LotteryResultItem","MiniGame","MiniGameCircle","MiniGameCircleNotification","MiniGameConstant","MiniGameResult","MiniGameResultTaiXiu","BauCua","BauCuaBet","BauCuaConfig","BauCuaConstant","BauCuaHistory","BauCuaPlate","BauCuaState","BauCuaTime","BauCuaUI","Bom","BomConstant","BomLine","BomReel","BomReel2","BomUI","Diamond","DiamondConstant","DiamondLine","DiamondReel","DiamondSelectForm","DiamondUI","DragonTiger","DragonTigerCard","DragonTigerChain","DragonTigerChat","DragonTigerChip","DragonTigerChipItem","DragonTigerConfig","DragonTigerConstant","DragonTigerDoor","DragonTigerEffectCard","DragonTigerHistory","DragonTigerHistory2","DragonTigerHistoryItem2","DragonTigerMove","DragonTigerState","DragonTigerTime","BauCuaRank","DragonTigerChains","DragonTigerDetail","GameMiniHistory","GameMiniRank","LuckyWheelResult","TaiXiuChain","TaiXiuDetail","BauCuaHistories","BomHistories","DiamondHistories","DragonTigerHistories","MiniBaCayHistories","MiniPokerHistories","PirateHistories","TaiXiuHistories","TrenDuoiHistories","WildHistories","BauCuaBetItem","BauCuaHistoryGameItem","BauCuaHistoryItem","BauCuaItem","BauCuaNumberItem","BomHistoryItem","BomItem","DiamondHistoryItem","DiamondItem","DiamondNumberLineItem","DiamondSelectItem","DragonTigerChainItem","DragonTigerDetailItem","DragonTigerHistoryItem","DragonTigerHistoryItem1","DragonTigerHistoryItem3","GameMiniJackpotItem","GameMiniRankItem","JackpotItem","LuckyWheelItem","MiniGameChatItem","MiniGameXPer","MiniPokerHistoryItem","PirateItem","PirateNumberLineItem","PirateSelectItem","TaiXiuChainItem","TaiXiuDetailItem","TaiXiuHistoriesItem","TaiXiuNumberItem","TaiXiuSelectItem","TrenDuoiHistoryCardItem","TrenDuoiHistoryItem","WildHistoryItem","WildItem","Jackpot","JackpotConstant","JackpotEffect","LuckyWheel","LuckyWheelConfig","LuckyWheelConstant","MiniBaCay","MiniBaCayCard","MiniBaCayConstant","MiniBaCayReel","MiniBaCayUI","MiniPoker","MiniPokerCard","MiniPokerConstant","MiniPokerReel","MiniPokerUI","MiniXocDia","MiniXocDiaBet","MiniXocDiaConfig","MiniXocDiaConstant","MiniXocDiaDoors","MiniXocDiaHistory","MiniXocDiaPlate","MiniXocDiaState","MiniXocDiaTime","MiniXocDiaDoor","MiniXocDiaHistoryItem","Pirate","PirateConstant","PirateLine","PirateReel","PirateSelectForm","PirateUI","TaiXiu","TaiXiuChat","TaiXiuConstant","TaiXiuDice","TaiXiuHistory","TaiXiuHistoryGame","TaiXiuHistoryGame1","TaiXiuHistoryGame2","TaiXiuHistoryItem","TaiXiuHistoryItem2","TaiXiuPlate","TaiXiuPlateMove","TaiXiuQuickSelect","TaiXiuState","TaiXiuTime","ChanLe","ChanLeHistory","ChanLeHistoryGame1","ChanLeHistoryItem","ChanLeHistoryItem2","TrenDuoi","TrenDuoiCard","TrenDuoiConstant","TrenDuoiReel","TrenDuoiUI","Wild","WildConstant","WildEffect","WildReel","WildReel2","WildSelectAutoSpin","WildSelectAutoSpinItem","WildUI","Balance","Card2Controller","CardController","Chip","ScrollBottom","BasePlayer","Slot2BonusItem","Slot2HistoryItem","Slot2Item","Slot2JackpotItem","Slot2MiniGameItem","Slot2RankItem","Slot4BonusItem","Slot4HistoryItem","Slot4Item","Slot4MiniGameItem","Slot4RankItem","Slot5BonusItem","Slot5HistoryItem","Slot5Item","Slot5MiniGameItem","Slot5RankItem","SlotBonusItem","SlotHistoryItem","SlotItem","SlotMiniGameItem","SlotRankItem","Slot3BonusItem","Slot3HistoryItem","Slot3Item","Slot3Jackpot2Item","Slot3JackpotItem","Slot3MiniGameItem","Slot3Rank2Item","Slot3RankItem","BaCay","BaCayCard","BaCayConfig","BaCayConstant","BaCayHandlerEffect","BaCayHandlerRequest","BaCayPlayer","BaCayPrivateBetState","BaCayState","BaCayUI","BaCayBetChicken","GameCenter","GameCenterHandlerRequest","GameCenterUI","GameInfo","GameList","GameRecharge","GameRoom","Footer","Agent","Bonus","CaptchaForm","ChangePassword","ChangePasswordSuccess","ConfirmRemoveMail","ConfirmSecurity","Event","ForgetPasswordEmail","ForgetPasswordPhone","GiftCode","JoinRoomError","Login","OTPLogin","OtpFirstAccount","PlayerInvite","Register","UpdateAvatar","UpdateNickname","TopEvent2","BannerEvent","EventGame","Header","HeaderAccount","HeaderAccountUI","HeaderLogin","InfoAccount","InfoHistory","InfoMail","InfoSercurity","InviteFriend","InfoAccountAbout","InfoAccountAchivement","InfoAccountClan","VipAccount","InfoAwardHistory","InfoPlayGoldHistory","InfoPlayMoneyHistory","InfoRechargeGoldHistory","InfoRechargeMoneyHistory","AwardInviteFriend","HistoryAwardInviteFriend","HistoryInviteFriend","InserestInviteFriend","RankInviteFriend","InfoGame","InfoSercurityAccount","InfoSercurityLogin","InfoSercurityActivePhone","InfoSercurityInfo","InfoSercurityUpdate","AwardVip","RankVip2","Chat","ChatEvent","GameListAll","GameListBettingGame","GameListCard","GameListFavorite","GameListMiniGame","GameListSlot","GameSlot","Online","Room","SmallBanner","AwardCard","RechargeBanking","RechargeButtonCard","RechargeGold","RechargeMomo","RechargeMoney","RechargeSMS","RechargeUseMoney","Safe","Transfer","TransferAgent","TransferContent","FireFish","FireFishBulletManager","FireFishCenter","FireFishConstant","FireFishFormulaManager","FireFishGame","FireFishUI","FishManager","FFEvent","FFRank","FFTutorial","RechargeMessage","FFRankLuck","FFRankMegaPrize","FFRankMiss","FireFishBasePlayer","FireFishMyPlayer","FireFishOtherPlayer","FFGameCardsList","FFLockFish","FireFishHeader","FireFishMegaPrize","Lieng","LiengBetState","LiengCard","LiengConfig","LiengConstant","LiengGroupCardsType","LiengHandlerEffect","LiengHandlerRequest","LiengPlayer","LiengState","LiengUI","Lottery","LotteryBetType","LotteryBets","LotteryBoard","LotteryConfig","LotteryConstant","LotteryDetailsHistory","LotteryEffect","LotteryEvent","LotteryFooter","LotteryHandlerRequest","LotteryHeader","LotteryHistory","LotteryInfo","LotteryResult","LotteryRoomChat","LotteryState","LotteryTop","LotteryUI","MauBinh","MauBinhCard","MauBinhConfig","MauBinhConstant","MauBinhGroupCardsType","MauBinhHandlerEffect","MauBinhHandlerRequest","MauBinhPlayer","MauBinhState","MauBinhUI","MauBinhUtil","MauBinhWinType","MauBinhCardController","MauBinhMove","Phom","PhomCard","PhomConfig","PhomConstant","PhomHandlerEffect","PhomHandlerRequest","PhomPlayer","PhomState","PhomUI","PhomUtil","PhomWinType","PhomCardController","Poker","PokerBetState","PokerCard","PokerConfig","PokerConstant","PokerGroupCardsType","PokerHandlerEffect","PokerHandlerRequest","PokerPlayer","PokerState","PokerUI","Sam","SamCard","SamConfig","SamConstant","SamGroupCardsType","SamHandlerEffect","SamHandlerRequest","SamPlayer","SamRecommend","SamState","SamUI","SamUtil","SamWinType","SamCardController","Slot2","Slot2Bonus","Slot2Constant","Slot2Control","Slot2Effect","Slot2HandlerRequest","Slot2Header","Slot2Label","Slot2Lines","Slot2Reel","Slot2Reels","Slot2Room","Slot2State","Slot2UI","Slot2AutoSpinSetting","Slot2History","Slot2Jackpot","Slot2Rank","Slot2SelectLine","Slot2NumberLineItem","Slot2SelectNumberLineItem","Slot3","Slot3Bonus","Slot3Constant","Slot3Control","Slot3Effect","Slot3Footer","Slot3Form","Slot3HandlerRequest","Slot3Header","Slot3Label","Slot3Lines","Slot3Reel","Slot3Reels","Slot3SelectLine","Slot3State","Slot3UI","Slot3X","Slot3AutoSpinSetting","Slot3BonusResult","Slot3History","Slot3JackpotForm","Slot3Rank","Slot3Rank2","Slot3NumberLineItem","Slot3SelectNumberLineItem","Slot4","Slot4Bonus","Slot4Constant","Slot4Control","Slot4Effect","Slot4HandlerRequest","Slot4Header","Slot4Label","Slot4Lines","Slot4Reel","Slot4Reels","Slot4State","Slot4UI","Slot4X","Slot4AutoSpinSetting","Slot4BonusResult","Slot4Form","Slot4History","Slot4Rank","Slot4SelectLine","Slot4NumberLineItem","Slot4SelectNumberLineItem","Slot5","Slot5Bonus","Slot5Constant","Slot5Control","Slot5Effect","Slot5HandlerRequest","Slot5Header","Slot5Label","Slot5Lines","Slot5Reel","Slot5Reels","Slot5State","Slot5UI","Slot5X","Slot5AutoSpinSetting","Slot5BonusResult","Slot5Form","Slot5History","Slot5Prize","Slot5Rank","Slot5SelectLine","Slot5NumberLineItem","Slot5SelectNumberLineItem","Slot","SlotBonus","SlotConstant","SlotControl","SlotEffect","SlotHandlerRequest","SlotHeader","SlotLabel","SlotLines","SlotReel","SlotReels","SlotState","SlotUI","SlotX","SlotAutoSpinSetting","SlotBonusResult","SlotHistory","SlotPrize","SlotRank","SlotSelectLine","SlotTutorial","SlotNumberLineItem","SlotSelectNumberLineItem","TLMN","TLMNCard","TLMNConfig","TLMNConstant","TLMNGroupCardsType","TLMNHandlerEffect","TLMNHandlerRequest","TLMNPlayer","TLMNRecommend","TLMNState","TLMNThangTrangType","TLMNThoiType","TLMNUI","TLMNUtil","TLMNWinType","TLMNCardController","XiTo","XiToBetState","XiToCard","XiToConfig","XiToConstant","XiToGroupCardsType","XiToHandlerEffect","XiToHandlerRequest","XiToPlayer","XiToState","XiToUI","XiToSelectCard","XocDia","XocDiaConfig","XocDiaConstant","XocDiaDoorState","XocDiaHandlerEffect","XocDiaHandlerRequest","XocDiaHistory","XocDiaHostState","XocDiaState","XocDiaUI","XocDiaRegisterHostForm","XocDiaChip","XocDiaDoor","XocDiaHistoryItem","XocDiaMyChipItem","XocDiaRegisterItem","XocDiaMyChip","XocDiaPlate","HotUpdate","Splash","SFSManager","SFSSendRequest","Processing","ProcessingScene","ShowHideAnim","UpDownAnim","ButtonHover","ButtonHoverScaler","ButtonShowHide","ButtonTooltip","BetForm","BuyInForm","DialogForm","DialogMessage","DropDownList","DropDownList2","DropDownListItem","FormMove","FormStopPropagation","Toggle","BrowserUtil","CardUtil","Clipboard","FormatUtil","NodeUtil","RandomUtil","Track","Util"]);